all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.873695, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.224613| train set 2.455x speedup, test set 1.147x speedup, val set 0.745x speedup, step: 1, train time 113.51 s
Epoch 1/10 |loss: 1.647557| train set 3.133x speedup, test set 1.792x speedup, val set 0.828x speedup, step: 1, train time 112.31 s
Epoch 2/10 |loss: 1.394839| train set 2.674x speedup, test set 1.819x speedup, val set 0.759x speedup, step: 2, train time 121.31 s
Epoch 3/10 |loss: 1.261182| train set 3.134x speedup, test set 1.632x speedup, val set 0.828x speedup, step: 1, train time 123.11 s
Epoch 4/10 |loss: 1.189981| train set 3.221x speedup, test set 1.677x speedup, val set 1.677x speedup, step: 1, train time 122.69 s
Epoch 5/10 |loss: 1.111155| train set 3.250x speedup, test set 1.692x speedup, val set 0.757x speedup, step: 2, train time 121.89 s
Epoch 6/10 |loss: 1.063268| train set 3.190x speedup, test set 1.790x speedup, val set 0.823x speedup, step: 3, train time 117.79 s
Epoch 7/10 |loss: 1.041123| train set 3.230x speedup, test set 1.796x speedup, val set 0.823x speedup, step: 4, train time 116.41 s
Epoch 8/10 |loss: 0.983782| train set 3.219x speedup, test set 1.737x speedup, val set 1.644x speedup, step: 5, train time 114.81 s
Epoch 9/10 |loss: 0.954524| train set 3.192x speedup, test set 1.791x speedup, val set 0.823x speedup, step: 6, train time 126.70 s
Training per epoch cost 119.051 s
Optimal speedup on test set is 1.999x
====================
best train speedup epoch: 5, train speedup 3.250, test speedup 1.692, val speedup 0.757
best test speedup epoch: 2, train speedup 2.674, test speedup 1.819, val speedup 0.759
best validation speedup epoch: 4, train speedup 3.221, test speedup 1.677, val speedup 1.677
last model at epoch 9, train speedup 3.192, test speedup 1.791, val speedup 0.823
execution cost 0:20:06.236755
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.895650, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.235707| train set 3.008x speedup, test set 1.249x speedup, val set 0.741x speedup, step: 1, train time 117.32 s
Epoch 1/10 |loss: 1.683267| train set 2.732x speedup, test set 1.691x speedup, val set 0.815x speedup, step: 1, train time 133.79 s
Epoch 2/10 |loss: 1.454230| train set 2.755x speedup, test set 1.285x speedup, val set 1.417x speedup, step: 1, train time 141.49 s
Epoch 3/10 |loss: 1.298016| train set 3.190x speedup, test set 1.571x speedup, val set 1.677x speedup, step: 1, train time 142.20 s
Epoch 4/10 |loss: 1.221695| train set 3.179x speedup, test set 1.678x speedup, val set 0.784x speedup, step: 2, train time 144.89 s
Epoch 5/10 |loss: 1.149868| train set 3.284x speedup, test set 1.543x speedup, val set 0.512x speedup, step: 3, train time 144.40 s
Epoch 6/10 |loss: 1.097916| train set 3.159x speedup, test set 1.765x speedup, val set 1.666x speedup, step: 4, train time 144.50 s
Epoch 7/10 |loss: 1.074231| train set 3.115x speedup, test set 1.872x speedup, val set 0.807x speedup, step: 5, train time 143.50 s
Epoch 8/10 |loss: 1.008010| train set 3.179x speedup, test set 1.786x speedup, val set 0.823x speedup, step: 6, train time 143.20 s
Epoch 9/10 |loss: 0.994766| train set 3.229x speedup, test set 1.714x speedup, val set 1.487x speedup, step: 7, train time 142.48 s
Training per epoch cost 139.775 s
Optimal speedup on test set is 1.999x
01, model runtime 1.648s, pg runtime 1.315s, speedup 0.798x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.919s, pg runtime 6.089s, speedup 3.174x
07, model runtime 0.805s, pg runtime 0.545s, speedup 0.676x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.056s, pg runtime 0.053s, speedup 0.954x
10, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.200s, pg runtime 0.183s, speedup 0.911x
18, model runtime 2.274s, pg runtime 0.404s, speedup 0.178x
19, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
====================
best train speedup epoch: 5, train speedup 3.284, test speedup 1.543, val speedup 0.512
best test speedup epoch: 7, train speedup 3.115, test speedup 1.872, val speedup 0.807
best validation speedup epoch: 3, train speedup 3.190, test speedup 1.571, val speedup 1.677
last model at epoch 9, train speedup 3.229, test speedup 1.714, val speedup 1.487
execution cost 0:23:33.732908
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:02.063951, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.231263| train set 2.681x speedup, test set 1.231x speedup, val set 0.565x speedup, step: 1, train time 182.82 s
Epoch 1/10 |loss: 1.665756| train set 3.181x speedup, test set 1.641x speedup, val set 0.745x speedup, step: 1, train time 183.12 s
Epoch 2/10 |loss: 1.421047| train set 2.688x speedup, test set 1.315x speedup, val set 1.448x speedup, step: 1, train time 181.56 s
Epoch 3/10 |loss: 1.282149| train set 3.153x speedup, test set 1.604x speedup, val set 0.828x speedup, step: 2, train time 182.71 s
Epoch 4/10 |loss: 1.196928| train set 2.777x speedup, test set 1.249x speedup, val set 1.677x speedup, step: 1, train time 181.50 s
Epoch 5/10 |loss: 1.144417| train set 2.775x speedup, test set 1.669x speedup, val set 0.627x speedup, step: 2, train time 183.59 s
Epoch 6/10 |loss: 1.081173| train set 3.151x speedup, test set 1.725x speedup, val set 0.823x speedup, step: 3, train time 181.20 s
Epoch 7/10 |loss: 1.064209| train set 3.223x speedup, test set 1.759x speedup, val set 0.823x speedup, step: 4, train time 181.27 s
Epoch 8/10 |loss: 0.995047| train set 3.051x speedup, test set 1.840x speedup, val set 1.697x speedup, step: 1, train time 181.86 s
Epoch 9/10 |loss: 0.981246| train set 3.238x speedup, test set 1.831x speedup, val set 1.183x speedup, step: 2, train time 180.99 s
Training per epoch cost 182.062 s
Optimal speedup on test set is 1.999x
01, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 1.210s, pg runtime 0.545s, speedup 0.450x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.056s, pg runtime 0.053s, speedup 0.954x
10, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
11, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.161s, pg runtime 0.183s, speedup 1.136x
18, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 9, train speedup 3.238, test speedup 1.831, val speedup 1.183
best test speedup epoch: 8, train speedup 3.051, test speedup 1.840, val speedup 1.697
best validation speedup epoch: 8, train speedup 3.051, test speedup 1.840, val speedup 1.697
last model at epoch 9, train speedup 3.238, test speedup 1.831, val speedup 1.183
execution cost 0:30:41.128074
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:02.028936, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.243800| train set 2.737x speedup, test set 1.153x speedup, val set 0.752x speedup, step: 1, train time 187.63 s
Epoch 1/10 |loss: 1.705592| train set 2.717x speedup, test set 1.793x speedup, val set 0.752x speedup, step: 1, train time 189.48 s
Epoch 2/10 |loss: 1.453834| train set 2.665x speedup, test set 1.368x speedup, val set 0.755x speedup, step: 1, train time 185.41 s
Epoch 3/10 |loss: 1.315947| train set 2.657x speedup, test set 1.601x speedup, val set 0.542x speedup, step: 2, train time 187.18 s
Epoch 4/10 |loss: 1.237806| train set 2.804x speedup, test set 1.724x speedup, val set 0.758x speedup, step: 1, train time 186.88 s
Epoch 5/10 |loss: 1.133804| train set 3.233x speedup, test set 1.754x speedup, val set 0.627x speedup, step: 2, train time 139.59 s
Epoch 6/10 |loss: 1.136084| train set 3.187x speedup, test set 1.793x speedup, val set 0.068x speedup, step: 3, train time 138.28 s
Epoch 7/10 |loss: 1.061062| train set 3.224x speedup, test set 1.794x speedup, val set 0.069x speedup, step: 4, train time 151.21 s
Epoch 8/10 |loss: 1.039612| train set 2.765x speedup, test set 1.370x speedup, val set 0.748x speedup, step: 5, train time 188.37 s
Epoch 9/10 |loss: 0.992113| train set 3.171x speedup, test set 1.867x speedup, val set 0.680x speedup, step: 6, train time 187.95 s
Training per epoch cost 174.197 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 0.796s, pg runtime 0.545s, speedup 0.685x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 1.040s, pg runtime 0.942s, speedup 0.906x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.200s, pg runtime 0.183s, speedup 0.911x
18, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 5, train speedup 3.233, test speedup 1.754, val speedup 0.627
best test speedup epoch: 9, train speedup 3.171, test speedup 1.867, val speedup 0.680
best validation speedup epoch: 4, train speedup 2.804, test speedup 1.724, val speedup 0.758
last model at epoch 9, train speedup 3.171, test speedup 1.867, val speedup 0.680
execution cost 0:29:21.901129
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:02.012469, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.246006| train set 2.505x speedup, test set 1.254x speedup, val set 0.747x speedup, step: 1, train time 180.55 s
Epoch 1/10 |loss: 1.678380| train set 3.109x speedup, test set 1.803x speedup, val set 0.741x speedup, step: 2, train time 181.69 s
Epoch 2/10 |loss: 1.433154| train set 2.674x speedup, test set 1.166x speedup, val set 1.677x speedup, step: 1, train time 181.17 s
Epoch 3/10 |loss: 1.287824| train set 3.138x speedup, test set 1.738x speedup, val set 1.677x speedup, step: 1, train time 181.33 s
Epoch 4/10 |loss: 1.214133| train set 2.733x speedup, test set 1.732x speedup, val set 1.677x speedup, step: 1, train time 180.46 s
Epoch 5/10 |loss: 1.121550| train set 3.193x speedup, test set 1.468x speedup, val set 1.405x speedup, step: 2, train time 180.49 s
Epoch 6/10 |loss: 1.096769| train set 3.176x speedup, test set 1.574x speedup, val set 1.391x speedup, step: 3, train time 182.41 s
Epoch 7/10 |loss: 1.039306| train set 3.224x speedup, test set 1.762x speedup, val set 1.677x speedup, step: 1, train time 179.51 s
Epoch 8/10 |loss: 0.994482| train set 3.174x speedup, test set 1.769x speedup, val set 1.677x speedup, step: 1, train time 180.58 s
Epoch 9/10 |loss: 0.979024| train set 3.190x speedup, test set 1.764x speedup, val set 1.664x speedup, step: 2, train time 179.89 s
Training per epoch cost 180.808 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.919s, pg runtime 6.089s, speedup 3.174x
07, model runtime 1.210s, pg runtime 0.545s, speedup 0.450x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.056s, pg runtime 0.053s, speedup 0.954x
10, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.180s, pg runtime 0.183s, speedup 1.015x
18, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 7, train speedup 3.224, test speedup 1.762, val speedup 1.677
best test speedup epoch: 1, train speedup 3.109, test speedup 1.803, val speedup 0.741
best validation speedup epoch: 8, train speedup 3.174, test speedup 1.769, val speedup 1.677
last model at epoch 9, train speedup 3.190, test speedup 1.764, val speedup 1.664
execution cost 0:30:26.907651
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.985956, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.243279| train set 2.461x speedup, test set 1.151x speedup, val set 0.752x speedup, step: 1, train time 179.24 s
Epoch 1/10 |loss: 1.683027| train set 3.190x speedup, test set 1.824x speedup, val set 0.740x speedup, step: 2, train time 179.72 s
Epoch 2/10 |loss: 1.435124| train set 2.607x speedup, test set 1.367x speedup, val set 1.346x speedup, step: 1, train time 178.80 s
Epoch 3/10 |loss: 1.301347| train set 3.156x speedup, test set 1.597x speedup, val set 1.644x speedup, step: 1, train time 180.78 s
Epoch 4/10 |loss: 1.206527| train set 2.973x speedup, test set 1.693x speedup, val set 0.748x speedup, step: 2, train time 182.87 s
Epoch 5/10 |loss: 1.122601| train set 3.229x speedup, test set 1.545x speedup, val set 0.741x speedup, step: 3, train time 182.51 s
Epoch 6/10 |loss: 1.087759| train set 3.172x speedup, test set 1.530x speedup, val set 0.823x speedup, step: 4, train time 182.12 s
Epoch 7/10 |loss: 1.057757| train set 3.224x speedup, test set 1.795x speedup, val set 0.823x speedup, step: 5, train time 180.79 s
Epoch 8/10 |loss: 0.990145| train set 3.175x speedup, test set 1.801x speedup, val set 0.815x speedup, step: 6, train time 155.89 s
Epoch 9/10 |loss: 0.973214| train set 3.217x speedup, test set 1.593x speedup, val set 0.815x speedup, step: 7, train time 137.29 s
Training per epoch cost 174.001 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 0.805s, pg runtime 0.545s, speedup 0.676x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.056s, pg runtime 0.053s, speedup 0.954x
10, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.992s, pg runtime 0.298s, speedup 0.300x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.180s, pg runtime 0.183s, speedup 1.015x
18, model runtime 2.274s, pg runtime 0.404s, speedup 0.178x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 5, train speedup 3.229, test speedup 1.545, val speedup 0.741
best test speedup epoch: 1, train speedup 3.190, test speedup 1.824, val speedup 0.740
best validation speedup epoch: 3, train speedup 3.156, test speedup 1.597, val speedup 1.644
last model at epoch 9, train speedup 3.217, test speedup 1.593, val speedup 0.815
execution cost 0:29:18.863203
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:02.320663, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.230791| train set 2.454x speedup, test set 1.122x speedup, val set 0.751x speedup, step: 1, train time 181.77 s
Epoch 1/10 |loss: 1.668554| train set 3.161x speedup, test set 1.796x speedup, val set 0.739x speedup, step: 2, train time 182.58 s
Epoch 2/10 |loss: 1.420658| train set 2.653x speedup, test set 1.371x speedup, val set 1.424x speedup, step: 1, train time 180.35 s
Epoch 3/10 |loss: 1.270998| train set 3.147x speedup, test set 1.506x speedup, val set 0.745x speedup, step: 2, train time 180.17 s
Epoch 4/10 |loss: 1.186105| train set 3.230x speedup, test set 1.683x speedup, val set 0.757x speedup, step: 3, train time 182.83 s
Epoch 5/10 |loss: 1.107866| train set 3.256x speedup, test set 1.268x speedup, val set 0.707x speedup, step: 4, train time 181.11 s
Epoch 6/10 |loss: 1.076286| train set 3.194x speedup, test set 1.757x speedup, val set 0.745x speedup, step: 5, train time 181.99 s
Epoch 7/10 |loss: 1.041599| train set 3.209x speedup, test set 1.720x speedup, val set 0.751x speedup, step: 6, train time 181.29 s
Epoch 8/10 |loss: 0.980957| train set 3.186x speedup, test set 1.685x speedup, val set 0.751x speedup, step: 7, train time 181.41 s
Epoch 9/10 |loss: 0.978603| train set 3.124x speedup, test set 1.781x speedup, val set 0.745x speedup, step: 8, train time 182.22 s
Training per epoch cost 181.572 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 1.210s, pg runtime 0.545s, speedup 0.450x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
11, model runtime 0.184s, pg runtime 0.189s, speedup 1.028x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.173s, pg runtime 0.183s, speedup 1.054x
18, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 5, train speedup 3.256, test speedup 1.268, val speedup 0.707
best test speedup epoch: 1, train speedup 3.161, test speedup 1.796, val speedup 0.739
best validation speedup epoch: 2, train speedup 2.653, test speedup 1.371, val speedup 1.424
last model at epoch 9, train speedup 3.124, test speedup 1.781, val speedup 0.745
execution cost 0:30:36.060937
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:02.075498, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.244087| train set 2.971x speedup, test set 1.545x speedup, val set 0.745x speedup, step: 1, train time 179.36 s
Epoch 1/10 |loss: 1.706266| train set 2.689x speedup, test set 1.809x speedup, val set 0.745x speedup, step: 1, train time 185.59 s
Epoch 2/10 |loss: 1.454388| train set 2.359x speedup, test set 1.314x speedup, val set 1.035x speedup, step: 1, train time 181.10 s
Epoch 3/10 |loss: 1.315504| train set 3.172x speedup, test set 1.388x speedup, val set 0.828x speedup, step: 2, train time 185.79 s
Epoch 4/10 |loss: 1.216621| train set 3.159x speedup, test set 1.719x speedup, val set 0.753x speedup, step: 3, train time 133.40 s
Epoch 5/10 |loss: 1.145333| train set 3.216x speedup, test set 1.750x speedup, val set 0.745x speedup, step: 4, train time 140.31 s
Epoch 6/10 |loss: 1.097839| train set 3.171x speedup, test set 1.579x speedup, val set 0.815x speedup, step: 5, train time 135.99 s
Epoch 7/10 |loss: 1.054701| train set 3.218x speedup, test set 1.789x speedup, val set 0.815x speedup, step: 6, train time 142.49 s
Epoch 8/10 |loss: 1.020438| train set 3.168x speedup, test set 1.714x speedup, val set 1.441x speedup, step: 1, train time 136.68 s
Epoch 9/10 |loss: 0.997942| train set 3.247x speedup, test set 1.596x speedup, val set 0.820x speedup, step: 2, train time 142.19 s
Training per epoch cost 156.290 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.919s, pg runtime 6.089s, speedup 3.174x
07, model runtime 1.210s, pg runtime 0.545s, speedup 0.450x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.180s, pg runtime 0.183s, speedup 1.015x
18, model runtime 0.404s, pg runtime 0.404s, speedup 1.000x
19, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
====================
best train speedup epoch: 9, train speedup 3.247, test speedup 1.596, val speedup 0.820
best test speedup epoch: 1, train speedup 2.689, test speedup 1.809, val speedup 0.745
best validation speedup epoch: 8, train speedup 3.168, test speedup 1.714, val speedup 1.441
last model at epoch 9, train speedup 3.247, test speedup 1.596, val speedup 0.820
execution cost 0:26:23.472832
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.730254, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.241967| train set 2.500x speedup, test set 1.744x speedup, val set 0.747x speedup, step: 1, train time 138.54 s
Epoch 1/10 |loss: 1.704774| train set 3.072x speedup, test set 1.796x speedup, val set 0.828x speedup, step: 1, train time 137.10 s
Epoch 2/10 |loss: 1.436244| train set 2.615x speedup, test set 1.191x speedup, val set 1.417x speedup, step: 1, train time 135.09 s
Epoch 3/10 |loss: 1.313020| train set 2.779x speedup, test set 1.808x speedup, val set 0.823x speedup, step: 2, train time 139.10 s
Epoch 4/10 |loss: 1.215349| train set 3.237x speedup, test set 1.715x speedup, val set 0.823x speedup, step: 3, train time 137.90 s
Epoch 5/10 |loss: 1.136917| train set 3.220x speedup, test set 1.714x speedup, val set 0.713x speedup, step: 4, train time 142.70 s
Epoch 6/10 |loss: 1.098067| train set 3.176x speedup, test set 1.761x speedup, val set 1.697x speedup, step: 1, train time 142.99 s
Epoch 7/10 |loss: 1.058446| train set 3.221x speedup, test set 1.610x speedup, val set 1.391x speedup, step: 2, train time 144.11 s
Epoch 8/10 |loss: 1.007897| train set 3.101x speedup, test set 1.783x speedup, val set 1.405x speedup, step: 3, train time 121.69 s
Epoch 9/10 |loss: 0.990434| train set 3.222x speedup, test set 1.762x speedup, val set 1.677x speedup, step: 4, train time 118.50 s
Training per epoch cost 135.771 s
Optimal speedup on test set is 1.999x
01, model runtime 1.618s, pg runtime 1.315s, speedup 0.813x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.919s, pg runtime 6.089s, speedup 3.174x
07, model runtime 0.805s, pg runtime 0.545s, speedup 0.676x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.180s, pg runtime 0.183s, speedup 1.015x
18, model runtime 0.404s, pg runtime 0.404s, speedup 1.000x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 4, train speedup 3.237, test speedup 1.715, val speedup 0.823
best test speedup epoch: 3, train speedup 2.779, test speedup 1.808, val speedup 0.823
best validation speedup epoch: 6, train speedup 3.176, test speedup 1.761, val speedup 1.697
last model at epoch 9, train speedup 3.222, test speedup 1.762, val speedup 1.677
execution cost 0:22:55.910396
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.665563, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.245066| train set 2.409x speedup, test set 1.814x speedup, val set 0.745x speedup, step: 1, train time 128.64 s
Epoch 1/10 |loss: 1.686074| train set 3.135x speedup, test set 1.924x speedup, val set 0.741x speedup, step: 2, train time 129.21 s
Epoch 2/10 |loss: 1.438907| train set 2.783x speedup, test set 1.792x speedup, val set 0.544x speedup, step: 3, train time 129.29 s
Epoch 3/10 |loss: 1.303619| train set 3.150x speedup, test set 1.756x speedup, val set 0.544x speedup, step: 4, train time 127.29 s
Epoch 4/10 |loss: 1.192256| train set 2.665x speedup, test set 1.681x speedup, val set 0.748x speedup, step: 1, train time 145.61 s
Epoch 5/10 |loss: 1.131413| train set 3.175x speedup, test set 1.699x speedup, val set 0.748x speedup, step: 1, train time 139.00 s
Epoch 6/10 |loss: 1.075779| train set 3.180x speedup, test set 1.755x speedup, val set 0.823x speedup, step: 1, train time 127.80 s
Epoch 7/10 |loss: 1.055404| train set 3.251x speedup, test set 1.750x speedup, val set 0.066x speedup, step: 2, train time 122.50 s
Epoch 8/10 |loss: 0.998240| train set 3.011x speedup, test set 1.716x speedup, val set 0.542x speedup, step: 3, train time 114.70 s
Epoch 9/10 |loss: 0.989539| train set 3.229x speedup, test set 1.750x speedup, val set 0.713x speedup, step: 4, train time 120.09 s
Training per epoch cost 128.414 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 1.210s, pg runtime 0.545s, speedup 0.450x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.053s, pg runtime 0.053s, speedup 1.000x
10, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.200s, pg runtime 0.183s, speedup 0.911x
18, model runtime 0.404s, pg runtime 0.404s, speedup 1.000x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 7, train speedup 3.251, test speedup 1.750, val speedup 0.066
best test speedup epoch: 1, train speedup 3.135, test speedup 1.924, val speedup 0.741
best validation speedup epoch: 6, train speedup 3.180, test speedup 1.755, val speedup 0.823
last model at epoch 9, train speedup 3.229, test speedup 1.750, val speedup 0.713
execution cost 0:21:38.815070
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: main
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.760729, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.248097| train set 2.441x speedup, test set 1.133x speedup, val set 0.681x speedup, step: 1, train time 147.97 s
Epoch 1/10 |loss: 1.711693| train set 3.161x speedup, test set 1.902x speedup, val set 0.786x speedup, step: 1, train time 140.79 s
Epoch 2/10 |loss: 1.453854| train set 2.479x speedup, test set 1.375x speedup, val set 0.680x speedup, step: 2, train time 119.20 s
Epoch 3/10 |loss: 1.299907| train set 3.078x speedup, test set 1.610x speedup, val set 0.822x speedup, step: 1, train time 120.39 s
Epoch 4/10 |loss: 1.205997| train set 2.755x speedup, test set 1.822x speedup, val set 0.748x speedup, step: 2, train time 133.90 s
Epoch 5/10 |loss: 1.124881| train set 3.161x speedup, test set 1.604x speedup, val set 0.756x speedup, step: 3, train time 148.18 s
Epoch 6/10 |loss: 1.105214| train set 3.163x speedup, test set 1.715x speedup, val set 0.823x speedup, step: 1, train time 146.50 s
Epoch 7/10 |loss: 1.058617| train set 3.195x speedup, test set 1.918x speedup, val set 0.756x speedup, step: 2, train time 147.01 s
Epoch 8/10 |loss: 0.983153| train set 3.059x speedup, test set 1.918x speedup, val set 0.823x speedup, step: 1, train time 149.49 s
Epoch 9/10 |loss: 0.981299| train set 3.251x speedup, test set 1.925x speedup, val set 0.822x speedup, step: 2, train time 149.07 s
Training per epoch cost 140.251 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.919s, pg runtime 6.089s, speedup 3.174x
07, model runtime 0.805s, pg runtime 0.545s, speedup 0.676x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.056s, pg runtime 0.053s, speedup 0.954x
10, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
11, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
12, model runtime 0.294s, pg runtime 0.298s, speedup 1.014x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.139s, pg runtime 0.102s, speedup 0.732x
15, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.200s, pg runtime 0.183s, speedup 0.911x
18, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 9, train speedup 3.251, test speedup 1.925, val speedup 0.822
best test speedup epoch: 9, train speedup 3.251, test speedup 1.925, val speedup 0.822
best validation speedup epoch: 8, train speedup 3.059, test speedup 1.918, val speedup 0.823
last model at epoch 9, train speedup 3.251, test speedup 1.925, val speedup 0.822
execution cost 0:23:38.815235
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: log
lr: 0.0001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.598504, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.279949| train set 2.452x speedup, test set 1.222x speedup, val set 0.701x speedup, step: 1, train time 155.35 s
Epoch 1/10 |loss: 1.806990| train set 2.571x speedup, test set 1.338x speedup, val set 0.739x speedup, step: 1, train time 157.18 s
Epoch 2/10 |loss: 1.578954| train set 2.425x speedup, test set 1.340x speedup, val set 0.740x speedup, step: 1, train time 156.79 s
Epoch 3/10 |loss: 1.431029| train set 2.621x speedup, test set 1.196x speedup, val set 0.541x speedup, step: 2, train time 156.09 s
Epoch 4/10 |loss: 1.324381| train set 2.636x speedup, test set 1.531x speedup, val set 0.740x speedup, step: 1, train time 156.61 s
Epoch 5/10 |loss: 1.259363| train set 3.202x speedup, test set 1.522x speedup, val set 0.541x speedup, step: 2, train time 155.69 s
Epoch 6/10 |loss: 1.191885| train set 3.056x speedup, test set 1.561x speedup, val set 1.684x speedup, step: 1, train time 156.21 s
Epoch 7/10 |loss: 1.147523| train set 3.077x speedup, test set 1.643x speedup, val set 0.822x speedup, step: 2, train time 155.41 s
Epoch 8/10 |loss: 1.096988| train set 2.754x speedup, test set 1.567x speedup, val set 0.675x speedup, step: 3, train time 155.49 s
Epoch 9/10 |loss: 1.061917| train set 2.785x speedup, test set 1.613x speedup, val set 0.541x speedup, step: 4, train time 154.40 s
Training per epoch cost 155.922 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 1.891s, pg runtime 0.545s, speedup 0.288x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.444s, pg runtime 0.298s, speedup 0.671x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.180s, pg runtime 0.183s, speedup 1.015x
18, model runtime 2.274s, pg runtime 0.404s, speedup 0.178x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 5, train speedup 3.202, test speedup 1.522, val speedup 0.541
best test speedup epoch: 7, train speedup 3.077, test speedup 1.643, val speedup 0.822
best validation speedup epoch: 6, train speedup 3.056, test speedup 1.561, val speedup 1.684
last model at epoch 9, train speedup 2.785, test speedup 1.613, val speedup 0.541
execution cost 0:26:23.957491
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: log
lr: 0.0001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.668633, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.273891| train set 2.457x speedup, test set 1.393x speedup, val set 0.520x speedup, step: 1, train time 172.39 s
Epoch 1/10 |loss: 1.795967| train set 2.524x speedup, test set 1.415x speedup, val set 0.701x speedup, step: 1, train time 167.01 s
Epoch 2/10 |loss: 1.570765| train set 2.470x speedup, test set 1.398x speedup, val set 0.740x speedup, step: 1, train time 165.30 s
Epoch 3/10 |loss: 1.421476| train set 2.715x speedup, test set 1.220x speedup, val set 0.741x speedup, step: 1, train time 167.20 s
Epoch 4/10 |loss: 1.317466| train set 2.729x speedup, test set 1.623x speedup, val set 0.740x speedup, step: 2, train time 164.49 s
Epoch 5/10 |loss: 1.241241| train set 3.179x speedup, test set 1.606x speedup, val set 0.747x speedup, step: 1, train time 170.30 s
Epoch 6/10 |loss: 1.166557| train set 2.720x speedup, test set 1.412x speedup, val set 0.823x speedup, step: 1, train time 167.50 s
Epoch 7/10 |loss: 1.129749| train set 3.075x speedup, test set 1.652x speedup, val set 0.734x speedup, step: 2, train time 161.50 s
Epoch 8/10 |loss: 1.087707| train set 2.729x speedup, test set 1.822x speedup, val set 0.734x speedup, step: 3, train time 159.30 s
Epoch 9/10 |loss: 1.050949| train set 3.174x speedup, test set 1.601x speedup, val set 0.815x speedup, step: 4, train time 160.00 s
Training per epoch cost 165.499 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 0.805s, pg runtime 0.545s, speedup 0.676x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 3.833s, pg runtime 0.298s, speedup 0.078x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.180s, pg runtime 0.183s, speedup 1.015x
18, model runtime 2.274s, pg runtime 0.404s, speedup 0.178x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 5, train speedup 3.179, test speedup 1.606, val speedup 0.747
best test speedup epoch: 8, train speedup 2.729, test speedup 1.822, val speedup 0.734
best validation speedup epoch: 6, train speedup 2.720, test speedup 1.412, val speedup 0.823
last model at epoch 9, train speedup 3.174, test speedup 1.601, val speedup 0.815
execution cost 0:27:55.314770
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: log
lr: 0.0001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:02.038484, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.276870| train set 2.485x speedup, test set 1.325x speedup, val set 0.540x speedup, step: 1, train time 168.06 s
Epoch 1/10 |loss: 1.807544| train set 2.459x speedup, test set 1.410x speedup, val set 0.740x speedup, step: 1, train time 168.58 s
Epoch 2/10 |loss: 1.571735| train set 2.485x speedup, test set 1.168x speedup, val set 0.822x speedup, step: 1, train time 169.22 s
Epoch 3/10 |loss: 1.412910| train set 2.670x speedup, test set 1.308x speedup, val set 0.822x speedup, step: 1, train time 169.78 s
Epoch 4/10 |loss: 1.315173| train set 2.740x speedup, test set 1.609x speedup, val set 0.822x speedup, step: 1, train time 169.40 s
Epoch 5/10 |loss: 1.237972| train set 3.106x speedup, test set 1.721x speedup, val set 0.822x speedup, step: 1, train time 168.19 s
Epoch 6/10 |loss: 1.178904| train set 2.980x speedup, test set 1.642x speedup, val set 0.822x speedup, step: 1, train time 169.78 s
Epoch 7/10 |loss: 1.130644| train set 3.071x speedup, test set 1.662x speedup, val set 0.822x speedup, step: 1, train time 171.12 s
Epoch 8/10 |loss: 1.083608| train set 2.720x speedup, test set 1.712x speedup, val set 0.822x speedup, step: 1, train time 168.49 s
Epoch 9/10 |loss: 1.054085| train set 3.206x speedup, test set 1.768x speedup, val set 0.822x speedup, step: 1, train time 167.07 s
Training per epoch cost 168.970 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 1.210s, pg runtime 0.545s, speedup 0.450x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.444s, pg runtime 0.298s, speedup 0.671x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.139s, pg runtime 0.102s, speedup 0.732x
15, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.180s, pg runtime 0.183s, speedup 1.015x
18, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 9, train speedup 3.206, test speedup 1.768, val speedup 0.822
best test speedup epoch: 9, train speedup 3.206, test speedup 1.768, val speedup 0.822
best validation speedup epoch: 9, train speedup 3.206, test speedup 1.768, val speedup 0.822
last model at epoch 9, train speedup 3.206, test speedup 1.768, val speedup 0.822
execution cost 0:28:30.575033
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: log
lr: 0.0001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.617440, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.275017| train set 2.491x speedup, test set 1.326x speedup, val set 0.701x speedup, step: 1, train time 144.85 s
Epoch 1/10 |loss: 1.799471| train set 2.537x speedup, test set 1.393x speedup, val set 0.701x speedup, step: 1, train time 149.09 s
Epoch 2/10 |loss: 1.579030| train set 2.587x speedup, test set 1.271x speedup, val set 0.745x speedup, step: 1, train time 151.60 s
Epoch 3/10 |loss: 1.427456| train set 2.631x speedup, test set 1.547x speedup, val set 0.541x speedup, step: 2, train time 154.90 s
Epoch 4/10 |loss: 1.322417| train set 2.731x speedup, test set 1.371x speedup, val set 0.815x speedup, step: 1, train time 143.70 s
Epoch 5/10 |loss: 1.251263| train set 3.154x speedup, test set 1.394x speedup, val set 0.822x speedup, step: 1, train time 134.20 s
Epoch 6/10 |loss: 1.196027| train set 2.756x speedup, test set 1.456x speedup, val set 0.815x speedup, step: 2, train time 114.50 s
Epoch 7/10 |loss: 1.140422| train set 3.189x speedup, test set 1.599x speedup, val set 0.815x speedup, step: 3, train time 113.00 s
Epoch 8/10 |loss: 1.097083| train set 2.745x speedup, test set 1.806x speedup, val set 0.815x speedup, step: 4, train time 114.51 s
Epoch 9/10 |loss: 1.060603| train set 3.177x speedup, test set 1.661x speedup, val set 0.538x speedup, step: 5, train time 113.51 s
Training per epoch cost 133.387 s
Optimal speedup on test set is 1.999x
01, model runtime 1.648s, pg runtime 1.315s, speedup 0.798x
02, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 0.805s, pg runtime 0.545s, speedup 0.676x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 3.833s, pg runtime 0.298s, speedup 0.078x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.200s, pg runtime 0.183s, speedup 0.911x
18, model runtime 2.274s, pg runtime 0.404s, speedup 0.178x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 7, train speedup 3.189, test speedup 1.599, val speedup 0.815
best test speedup epoch: 8, train speedup 2.745, test speedup 1.806, val speedup 0.815
best validation speedup epoch: 5, train speedup 3.154, test speedup 1.394, val speedup 0.822
last model at epoch 9, train speedup 3.177, test speedup 1.661, val speedup 0.538
execution cost 0:22:32.058738
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: log
lr: 0.0001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.586464, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.276972| train set 2.409x speedup, test set 1.395x speedup, val set 0.701x speedup, step: 1, train time 109.82 s
Epoch 1/10 |loss: 1.808446| train set 2.557x speedup, test set 1.392x speedup, val set 0.701x speedup, step: 1, train time 116.29 s
Epoch 2/10 |loss: 1.578596| train set 2.449x speedup, test set 1.404x speedup, val set 0.734x speedup, step: 1, train time 114.89 s
Epoch 3/10 |loss: 1.430881| train set 2.545x speedup, test set 1.199x speedup, val set 0.822x speedup, step: 1, train time 116.21 s
Epoch 4/10 |loss: 1.326633| train set 2.744x speedup, test set 1.739x speedup, val set 0.734x speedup, step: 2, train time 114.49 s
Epoch 5/10 |loss: 1.236261| train set 3.198x speedup, test set 1.720x speedup, val set 0.815x speedup, step: 3, train time 117.20 s
Epoch 6/10 |loss: 1.176917| train set 2.688x speedup, test set 1.317x speedup, val set 0.815x speedup, step: 4, train time 117.60 s
Epoch 7/10 |loss: 1.133193| train set 3.200x speedup, test set 1.808x speedup, val set 0.815x speedup, step: 5, train time 115.30 s
Epoch 8/10 |loss: 1.090551| train set 2.735x speedup, test set 1.728x speedup, val set 0.815x speedup, step: 6, train time 115.89 s
Epoch 9/10 |loss: 1.051848| train set 3.181x speedup, test set 1.734x speedup, val set 0.815x speedup, step: 7, train time 115.00 s
Training per epoch cost 115.270 s
Optimal speedup on test set is 1.999x
01, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
06, model runtime 4.017s, pg runtime 6.089s, speedup 1.516x
07, model runtime 0.805s, pg runtime 0.545s, speedup 0.676x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.056s, pg runtime 0.053s, speedup 0.954x
10, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.444s, pg runtime 0.298s, speedup 0.671x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.180s, pg runtime 0.183s, speedup 1.015x
18, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
19, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
====================
best train speedup epoch: 7, train speedup 3.200, test speedup 1.808, val speedup 0.815
best test speedup epoch: 7, train speedup 3.200, test speedup 1.808, val speedup 0.815
best validation speedup epoch: 3, train speedup 2.545, test speedup 1.199, val speedup 0.822
last model at epoch 9, train speedup 3.181, test speedup 1.734, val speedup 0.815
execution cost 0:19:26.602685
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: log
lr: 0.0001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.663246, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.281346| train set 2.390x speedup, test set 1.320x speedup, val set 0.706x speedup, step: 1, train time 113.90 s
Epoch 1/10 |loss: 1.801806| train set 2.558x speedup, test set 1.395x speedup, val set 0.707x speedup, step: 1, train time 115.99 s
Epoch 2/10 |loss: 1.572932| train set 2.472x speedup, test set 1.407x speedup, val set 0.629x speedup, step: 2, train time 117.60 s
Epoch 3/10 |loss: 1.428332| train set 2.708x speedup, test set 1.275x speedup, val set 0.740x speedup, step: 1, train time 116.80 s
Epoch 4/10 |loss: 1.335048| train set 2.701x speedup, test set 1.232x speedup, val set 0.740x speedup, step: 1, train time 117.19 s
Epoch 5/10 |loss: 1.245669| train set 3.191x speedup, test set 1.626x speedup, val set 0.822x speedup, step: 1, train time 115.59 s
Epoch 6/10 |loss: 1.181358| train set 2.780x speedup, test set 1.232x speedup, val set 0.822x speedup, step: 1, train time 116.40 s
Epoch 7/10 |loss: 1.145663| train set 3.063x speedup, test set 1.649x speedup, val set 0.822x speedup, step: 1, train time 115.59 s
Epoch 8/10 |loss: 1.088512| train set 2.775x speedup, test set 1.226x speedup, val set 0.823x speedup, step: 1, train time 114.59 s
Epoch 9/10 |loss: 1.060832| train set 2.764x speedup, test set 1.602x speedup, val set 0.541x speedup, step: 2, train time 116.11 s
Training per epoch cost 115.977 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 0.805s, pg runtime 0.545s, speedup 0.676x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.444s, pg runtime 0.298s, speedup 0.671x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.173s, pg runtime 0.183s, speedup 1.052x
18, model runtime 2.274s, pg runtime 0.404s, speedup 0.178x
19, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
====================
best train speedup epoch: 5, train speedup 3.191, test speedup 1.626, val speedup 0.822
best test speedup epoch: 7, train speedup 3.063, test speedup 1.649, val speedup 0.822
best validation speedup epoch: 8, train speedup 2.775, test speedup 1.226, val speedup 0.823
last model at epoch 9, train speedup 2.764, test speedup 1.602, val speedup 0.541
execution cost 0:19:33.771025
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: log
lr: 0.0001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.782675, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.274456| train set 2.381x speedup, test set 1.393x speedup, val set 0.701x speedup, step: 1, train time 113.63 s
Epoch 1/10 |loss: 1.802954| train set 2.575x speedup, test set 1.385x speedup, val set 0.739x speedup, step: 1, train time 116.90 s
Epoch 2/10 |loss: 1.570269| train set 2.469x speedup, test set 1.400x speedup, val set 0.738x speedup, step: 2, train time 115.79 s
Epoch 3/10 |loss: 1.421049| train set 2.703x speedup, test set 1.607x speedup, val set 0.740x speedup, step: 1, train time 112.90 s
Epoch 4/10 |loss: 1.321172| train set 2.760x speedup, test set 1.897x speedup, val set 0.734x speedup, step: 2, train time 112.90 s
Epoch 5/10 |loss: 1.248761| train set 3.118x speedup, test set 1.503x speedup, val set 0.538x speedup, step: 3, train time 114.99 s
Epoch 6/10 |loss: 1.186934| train set 3.045x speedup, test set 1.711x speedup, val set 0.740x speedup, step: 1, train time 114.99 s
Epoch 7/10 |loss: 1.140947| train set 3.103x speedup, test set 1.599x speedup, val set 0.538x speedup, step: 2, train time 114.01 s
Epoch 8/10 |loss: 1.091166| train set 2.753x speedup, test set 1.928x speedup, val set 0.740x speedup, step: 1, train time 115.39 s
Epoch 9/10 |loss: 1.069518| train set 2.765x speedup, test set 1.639x speedup, val set 0.541x speedup, step: 2, train time 115.48 s
Training per epoch cost 114.699 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.919s, pg runtime 6.089s, speedup 3.174x
07, model runtime 0.805s, pg runtime 0.545s, speedup 0.676x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
11, model runtime 0.184s, pg runtime 0.189s, speedup 1.028x
12, model runtime 0.444s, pg runtime 0.298s, speedup 0.671x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.173s, pg runtime 0.183s, speedup 1.052x
18, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 5, train speedup 3.118, test speedup 1.503, val speedup 0.538
best test speedup epoch: 8, train speedup 2.753, test speedup 1.928, val speedup 0.740
best validation speedup epoch: 8, train speedup 2.753, test speedup 1.928, val speedup 0.740
last model at epoch 9, train speedup 2.765, test speedup 1.639, val speedup 0.541
execution cost 0:19:21.042673
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: log
lr: 0.0001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.614832, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.277402| train set 2.444x speedup, test set 1.392x speedup, val set 0.701x speedup, step: 1, train time 115.19 s
Epoch 1/10 |loss: 1.803913| train set 2.547x speedup, test set 1.333x speedup, val set 0.701x speedup, step: 1, train time 118.39 s
Epoch 2/10 |loss: 1.558196| train set 2.538x speedup, test set 1.217x speedup, val set 0.740x speedup, step: 1, train time 118.39 s
Epoch 3/10 |loss: 1.412947| train set 2.709x speedup, test set 1.188x speedup, val set 0.822x speedup, step: 1, train time 121.00 s
Epoch 4/10 |loss: 1.317099| train set 2.730x speedup, test set 1.217x speedup, val set 0.541x speedup, step: 2, train time 124.30 s
Epoch 5/10 |loss: 1.256447| train set 3.193x speedup, test set 1.568x speedup, val set 0.538x speedup, step: 3, train time 119.50 s
Epoch 6/10 |loss: 1.168372| train set 2.976x speedup, test set 1.620x speedup, val set 1.653x speedup, step: 1, train time 120.30 s
Epoch 7/10 |loss: 1.140874| train set 3.013x speedup, test set 1.407x speedup, val set 0.538x speedup, step: 2, train time 121.59 s
Epoch 8/10 |loss: 1.097189| train set 2.718x speedup, test set 1.638x speedup, val set 0.809x speedup, step: 3, train time 122.51 s
Epoch 9/10 |loss: 1.045944| train set 2.759x speedup, test set 1.580x speedup, val set 0.809x speedup, step: 4, train time 118.31 s
Training per epoch cost 119.949 s
Optimal speedup on test set is 1.999x
01, model runtime 1.618s, pg runtime 1.315s, speedup 0.813x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.919s, pg runtime 6.089s, speedup 3.174x
07, model runtime 0.805s, pg runtime 0.545s, speedup 0.676x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.056s, pg runtime 0.053s, speedup 0.954x
10, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.176s, pg runtime 0.183s, speedup 1.040x
18, model runtime 2.274s, pg runtime 0.404s, speedup 0.178x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 5, train speedup 3.193, test speedup 1.568, val speedup 0.538
best test speedup epoch: 8, train speedup 2.718, test speedup 1.638, val speedup 0.809
best validation speedup epoch: 6, train speedup 2.976, test speedup 1.620, val speedup 1.653
last model at epoch 9, train speedup 2.759, test speedup 1.580, val speedup 0.809
execution cost 0:20:13.470182
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: log
lr: 0.0001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.596800, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.279342| train set 2.405x speedup, test set 1.386x speedup, val set 0.701x speedup, step: 1, train time 112.06 s
Epoch 1/10 |loss: 1.808747| train set 2.545x speedup, test set 1.382x speedup, val set 0.707x speedup, step: 1, train time 113.50 s
Epoch 2/10 |loss: 1.571836| train set 2.423x speedup, test set 1.402x speedup, val set 0.740x speedup, step: 1, train time 115.81 s
Epoch 3/10 |loss: 1.433286| train set 2.728x speedup, test set 1.309x speedup, val set 0.740x speedup, step: 1, train time 115.60 s
Epoch 4/10 |loss: 1.327174| train set 2.729x speedup, test set 1.745x speedup, val set 0.740x speedup, step: 1, train time 117.01 s
Epoch 5/10 |loss: 1.257207| train set 2.955x speedup, test set 1.727x speedup, val set 0.734x speedup, step: 2, train time 113.30 s
Epoch 6/10 |loss: 1.181985| train set 3.025x speedup, test set 1.776x speedup, val set 0.740x speedup, step: 1, train time 115.70 s
Epoch 7/10 |loss: 1.142432| train set 3.009x speedup, test set 1.874x speedup, val set 0.734x speedup, step: 2, train time 115.21 s
Epoch 8/10 |loss: 1.087117| train set 3.134x speedup, test set 1.890x speedup, val set 0.745x speedup, step: 1, train time 115.69 s
Epoch 9/10 |loss: 1.065934| train set 3.219x speedup, test set 1.780x speedup, val set 0.815x speedup, step: 1, train time 116.61 s
Training per epoch cost 115.048 s
Optimal speedup on test set is 1.999x
01, model runtime 1.618s, pg runtime 1.315s, speedup 0.813x
02, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.919s, pg runtime 6.089s, speedup 3.174x
07, model runtime 0.796s, pg runtime 0.545s, speedup 0.685x
08, model runtime 0.013s, pg runtime 0.080s, speedup 6.141x
09, model runtime 0.069s, pg runtime 0.053s, speedup 0.779x
10, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.180s, pg runtime 0.183s, speedup 1.015x
18, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 9, train speedup 3.219, test speedup 1.780, val speedup 0.815
best test speedup epoch: 8, train speedup 3.134, test speedup 1.890, val speedup 0.745
best validation speedup epoch: 9, train speedup 3.219, test speedup 1.780, val speedup 0.815
last model at epoch 9, train speedup 3.219, test speedup 1.780, val speedup 0.815
execution cost 0:19:24.188881
==================================================
all print will write to path record/postgresql/join-order-benchmark/TCNN/pair
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 10
execute_sql: 0
expname: log
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: 1
save_path: record/postgresql/join-order-benchmark/TCNN/pair
seed: 42
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
weighted: True

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
load JOB succ
train, test, validation (85, 49) (19, 49) (9, 49)
(85, 49, 3)
(85, 49)
construct training samples cost 0:00:01.585740, and there are 99960 training samples
in channel 9
Epoch 0/10 |loss: 2.234920| train set 2.536x speedup, test set 1.338x speedup, val set 0.752x speedup, step: 1, train time 111.59 s
Epoch 1/10 |loss: 1.675922| train set 3.018x speedup, test set 1.632x speedup, val set 0.820x speedup, step: 1, train time 113.40 s
Epoch 2/10 |loss: 1.431736| train set 2.468x speedup, test set 1.131x speedup, val set 0.820x speedup, step: 1, train time 116.00 s
Epoch 3/10 |loss: 1.311592| train set 3.048x speedup, test set 1.635x speedup, val set 0.815x speedup, step: 2, train time 116.60 s
Epoch 4/10 |loss: 1.220027| train set 2.714x speedup, test set 1.696x speedup, val set 1.406x speedup, step: 1, train time 116.29 s
Epoch 5/10 |loss: 1.143642| train set 3.135x speedup, test set 1.596x speedup, val set 0.692x speedup, step: 2, train time 115.30 s
Epoch 6/10 |loss: 1.102324| train set 3.129x speedup, test set 1.572x speedup, val set 0.072x speedup, step: 3, train time 116.70 s
Epoch 7/10 |loss: 1.062177| train set 3.222x speedup, test set 1.632x speedup, val set 0.545x speedup, step: 4, train time 116.91 s
Epoch 8/10 |loss: 1.017139| train set 3.176x speedup, test set 1.698x speedup, val set 1.410x speedup, step: 1, train time 117.09 s
Epoch 9/10 |loss: 0.987251| train set 3.228x speedup, test set 1.746x speedup, val set 0.823x speedup, step: 2, train time 116.10 s
Training per epoch cost 115.597 s
Optimal speedup on test set is 1.999x
01, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
02, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
03, model runtime 0.509s, pg runtime 0.580s, speedup 1.139x
04, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
05, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
06, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
07, model runtime 1.891s, pg runtime 0.545s, speedup 0.288x
08, model runtime 0.083s, pg runtime 0.080s, speedup 0.968x
09, model runtime 0.056s, pg runtime 0.053s, speedup 0.954x
10, model runtime 1.040s, pg runtime 0.942s, speedup 0.906x
11, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
12, model runtime 0.478s, pg runtime 0.298s, speedup 0.624x
13, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
14, model runtime 0.102s, pg runtime 0.102s, speedup 1.000x
15, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
17, model runtime 0.180s, pg runtime 0.183s, speedup 1.015x
18, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
19, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
====================
best train speedup epoch: 9, train speedup 3.228, test speedup 1.746, val speedup 0.823
best test speedup epoch: 9, train speedup 3.228, test speedup 1.746, val speedup 0.823
best validation speedup epoch: 8, train speedup 3.176, test speedup 1.698, val speedup 1.410
last model at epoch 9, train speedup 3.228, test speedup 1.746, val speedup 0.823
execution cost 0:19:29.906369
==================================================
