all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

load TPCH...
TPCH test template [5, 1, 10, 9]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:01.060150, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.045443| train set 4.183x speedup, test set 0.604x speedup, val set 1.308x speedup, step: 1
Epoch 1/300 |loss: 0.013554| train set 5.498x speedup, test set 0.893x speedup, val set 1.280x speedup, step: 2
Epoch 2/300 |loss: 0.006581| train set 6.018x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 3
Epoch 3/300 |loss: 0.004099| train set 6.543x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 4
Epoch 4/300 |loss: 0.004810| train set 6.724x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 5/300 |loss: 0.003613| train set 7.084x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 6/300 |loss: 0.002706| train set 6.766x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 7/300 |loss: 0.002578| train set 7.142x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 8/300 |loss: 0.002430| train set 6.661x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 9/300 |loss: 0.002553| train set 8.048x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 10/300 |loss: 0.001428| train set 8.116x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 2
Epoch 11/300 |loss: 0.001329| train set 8.134x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 3
Epoch 12/300 |loss: 0.001629| train set 8.133x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 4
Epoch 13/300 |loss: 0.001243| train set 8.122x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 5
Epoch 14/300 |loss: 0.001041| train set 8.117x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 6
Epoch 15/300 |loss: 0.000977| train set 8.123x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 7
Epoch 16/300 |loss: 0.000826| train set 8.132x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 8
Epoch 17/300 |loss: 0.000778| train set 8.310x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 9
Epoch 18/300 |loss: 0.000704| train set 8.133x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 10
Epoch 19/300 |loss: 0.000649| train set 8.271x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 11
Epoch 20/300 |loss: 0.000846| train set 8.059x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 12
Epoch 21/300 |loss: 0.000634| train set 8.338x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 13
Epoch 22/300 |loss: 0.000607| train set 8.327x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 14
Epoch 23/300 |loss: 0.000634| train set 8.310x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 15
Epoch 24/300 |loss: 0.000609| train set 8.340x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 16
Epoch 25/300 |loss: 0.000613| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 17
Epoch 26/300 |loss: 0.000581| train set 8.318x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 18
Epoch 27/300 |loss: 0.000592| train set 8.324x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 19
Epoch 28/300 |loss: 0.000596| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 20
Epoch 29/300 |loss: 0.000633| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 21
Epoch 30/300 |loss: 0.000673| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 22
Epoch 31/300 |loss: 0.000689| train set 8.336x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 23
early stopping at epoch 31
Training per epoch cost 0.978 s
Optimal speedup on test set is 1.793x
01, opt runtime 26.072s, model runtime 26.072s, pg runtime 26.072s, speedup 1.000x
02, opt runtime 29.200s, model runtime 29.200s, pg runtime 29.200s, speedup 1.000x
03, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
04, opt runtime 24.220s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
05, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
06, opt runtime 30.353s, model runtime 30.353s, pg runtime 30.353s, speedup 1.000x
07, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
08, opt runtime 18.955s, model runtime 18.955s, pg runtime 18.955s, speedup 1.000x
09, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
10, opt runtime 20.460s, model runtime 20.460s, pg runtime 20.460s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
22, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
23, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
24, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
25, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
26, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
27, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
28, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
29, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
30, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
31, opt runtime 6.149s, model runtime 35.923s, pg runtime 30.760s, speedup 0.856x
32, opt runtime 10.788s, model runtime 60.401s, pg runtime 32.939s, speedup 0.545x
33, opt runtime 6.888s, model runtime 40.777s, pg runtime 29.820s, speedup 0.731x
34, opt runtime 6.248s, model runtime 39.200s, pg runtime 19.123s, speedup 0.488x
35, opt runtime 5.874s, model runtime 43.589s, pg runtime 29.356s, speedup 0.673x
36, opt runtime 11.830s, model runtime 43.956s, pg runtime 20.360s, speedup 0.463x
37, opt runtime 7.469s, model runtime 41.483s, pg runtime 23.223s, speedup 0.560x
38, opt runtime 7.662s, model runtime 43.362s, pg runtime 15.898s, speedup 0.367x
39, opt runtime 7.867s, model runtime 43.762s, pg runtime 24.303s, speedup 0.555x
40, opt runtime 7.565s, model runtime 58.212s, pg runtime 20.255s, speedup 0.348x
====================
best train speedup epoch: 24, train speedup 8.340, test speedup 0.642, val speedup 0.974
best test speedup epoch: 1, train speedup 5.498, test speedup 0.893, val speedup 1.280
best validation speedup epoch: 9, train speedup 8.048, test speedup 0.642, val speedup 1.308
last model at epoch 31, train speedup 8.336, test speedup 0.642, val speedup 0.974
execution cost 0:01:24.848241
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

load TPCH...
TPCH test template [5, 1, 10, 9]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:01.003138, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.045443| train set 4.183x speedup, test set 0.604x speedup, val set 1.308x speedup, step: 1
Epoch 1/300 |loss: 0.013554| train set 5.489x speedup, test set 0.893x speedup, val set 1.280x speedup, step: 2
Epoch 2/300 |loss: 0.006579| train set 6.106x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 3
Epoch 3/300 |loss: 0.004099| train set 7.849x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 4
Epoch 4/300 |loss: 0.004745| train set 6.558x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 5/300 |loss: 0.003630| train set 7.090x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 6/300 |loss: 0.002829| train set 6.765x speedup, test set 0.662x speedup, val set 1.280x speedup, step: 2
Epoch 7/300 |loss: 0.002621| train set 7.141x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 8/300 |loss: 0.002279| train set 6.658x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 9/300 |loss: 0.002540| train set 8.064x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 10/300 |loss: 0.001438| train set 7.155x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 11/300 |loss: 0.001314| train set 8.106x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 12/300 |loss: 0.001447| train set 8.134x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 3
Epoch 13/300 |loss: 0.001041| train set 7.876x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 4
Epoch 14/300 |loss: 0.001073| train set 8.054x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 5
Epoch 15/300 |loss: 0.001166| train set 8.329x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 6
Epoch 16/300 |loss: 0.000704| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 7
Epoch 17/300 |loss: 0.000717| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 8
Epoch 18/300 |loss: 0.000694| train set 8.338x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 9
Epoch 19/300 |loss: 0.000618| train set 8.338x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 10
Epoch 20/300 |loss: 0.000836| train set 8.324x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 11
Epoch 21/300 |loss: 0.000588| train set 8.338x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 12
Epoch 22/300 |loss: 0.000580| train set 8.325x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 13
Epoch 23/300 |loss: 0.000657| train set 8.297x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 14
Epoch 24/300 |loss: 0.000587| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 15
Epoch 25/300 |loss: 0.000639| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 16
Epoch 26/300 |loss: 0.000611| train set 8.327x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 17
Epoch 27/300 |loss: 0.000630| train set 8.274x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 18
Epoch 28/300 |loss: 0.000592| train set 8.340x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 19
Epoch 29/300 |loss: 0.000649| train set 8.258x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 20
Epoch 30/300 |loss: 0.000798| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 21
early stopping at epoch 30
Training per epoch cost 0.963 s
Optimal speedup on test set is 1.793x
01, opt runtime 26.072s, model runtime 26.072s, pg runtime 26.072s, speedup 1.000x
02, opt runtime 29.200s, model runtime 29.200s, pg runtime 29.200s, speedup 1.000x
03, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
04, opt runtime 24.220s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
05, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
06, opt runtime 30.353s, model runtime 30.353s, pg runtime 30.353s, speedup 1.000x
07, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
08, opt runtime 18.955s, model runtime 18.955s, pg runtime 18.955s, speedup 1.000x
09, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
10, opt runtime 20.460s, model runtime 20.460s, pg runtime 20.460s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
22, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
23, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
24, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
25, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
26, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
27, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
28, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
29, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
30, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
31, opt runtime 6.149s, model runtime 35.923s, pg runtime 30.760s, speedup 0.856x
32, opt runtime 10.788s, model runtime 60.401s, pg runtime 32.939s, speedup 0.545x
33, opt runtime 6.888s, model runtime 40.777s, pg runtime 29.820s, speedup 0.731x
34, opt runtime 6.248s, model runtime 39.200s, pg runtime 19.123s, speedup 0.488x
35, opt runtime 5.874s, model runtime 43.589s, pg runtime 29.356s, speedup 0.673x
36, opt runtime 11.830s, model runtime 43.956s, pg runtime 20.360s, speedup 0.463x
37, opt runtime 7.469s, model runtime 41.483s, pg runtime 23.223s, speedup 0.560x
38, opt runtime 7.662s, model runtime 43.362s, pg runtime 15.898s, speedup 0.367x
39, opt runtime 7.867s, model runtime 43.762s, pg runtime 24.303s, speedup 0.555x
40, opt runtime 7.565s, model runtime 58.212s, pg runtime 20.255s, speedup 0.348x
====================
best train speedup epoch: 28, train speedup 8.340, test speedup 0.642, val speedup 0.974
best test speedup epoch: 1, train speedup 5.489, test speedup 0.893, val speedup 1.280
best validation speedup epoch: 10, train speedup 7.155, test speedup 0.642, val speedup 1.730
last model at epoch 30, train speedup 8.339, test speedup 0.642, val speedup 0.974
execution cost 0:01:21.541558
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

load TPCH...
TPCH test template [5, 1, 10, 9]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:01.024275, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.045443| train set 4.183x speedup, test set 0.604x speedup, val set 1.308x speedup, step: 1
Epoch 1/300 |loss: 0.013554| train set 5.489x speedup, test set 0.893x speedup, val set 1.280x speedup, step: 2
Epoch 2/300 |loss: 0.006581| train set 6.018x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 3
Epoch 3/300 |loss: 0.004085| train set 6.299x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 4
Epoch 4/300 |loss: 0.004664| train set 6.723x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 5/300 |loss: 0.003695| train set 7.090x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 6/300 |loss: 0.002682| train set 6.765x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 7/300 |loss: 0.002644| train set 7.141x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 8/300 |loss: 0.002112| train set 6.748x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 9/300 |loss: 0.002347| train set 6.978x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 10/300 |loss: 0.001506| train set 8.116x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 11/300 |loss: 0.001315| train set 8.072x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 3
Epoch 12/300 |loss: 0.001432| train set 8.133x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 4
Epoch 13/300 |loss: 0.001137| train set 7.976x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 5
Epoch 14/300 |loss: 0.001060| train set 8.133x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 6
Epoch 15/300 |loss: 0.000984| train set 8.134x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 7
Epoch 16/300 |loss: 0.000844| train set 8.132x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 8
Epoch 17/300 |loss: 0.000971| train set 8.133x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 9
Epoch 18/300 |loss: 0.000687| train set 8.340x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 10
Epoch 19/300 |loss: 0.000621| train set 8.338x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 11
Epoch 20/300 |loss: 0.000823| train set 8.327x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 12
Epoch 21/300 |loss: 0.000624| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 13
Epoch 22/300 |loss: 0.000572| train set 8.320x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 14
Epoch 23/300 |loss: 0.000666| train set 8.319x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 15
Epoch 24/300 |loss: 0.000582| train set 8.336x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 16
Epoch 25/300 |loss: 0.000665| train set 8.330x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 17
Epoch 26/300 |loss: 0.000651| train set 8.329x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 18
Epoch 27/300 |loss: 0.000798| train set 8.340x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 19
Epoch 28/300 |loss: 0.000597| train set 8.340x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 20
Epoch 29/300 |loss: 0.000595| train set 8.340x speedup, test set 0.650x speedup, val set 1.730x speedup, step: 1
Epoch 30/300 |loss: 0.000688| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 31/300 |loss: 0.000693| train set 8.338x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 3
early stopping at epoch 31
Training per epoch cost 0.958 s
Optimal speedup on test set is 1.793x
01, opt runtime 26.072s, model runtime 26.072s, pg runtime 26.072s, speedup 1.000x
02, opt runtime 29.200s, model runtime 29.200s, pg runtime 29.200s, speedup 1.000x
03, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
04, opt runtime 24.220s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
05, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
06, opt runtime 30.353s, model runtime 30.353s, pg runtime 30.353s, speedup 1.000x
07, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
08, opt runtime 18.955s, model runtime 18.955s, pg runtime 18.955s, speedup 1.000x
09, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
10, opt runtime 20.460s, model runtime 20.460s, pg runtime 20.460s, speedup 1.000x
11, opt runtime 7.237s, model runtime 13.362s, pg runtime 17.708s, speedup 1.325x
12, opt runtime 6.284s, model runtime 13.017s, pg runtime 31.019s, speedup 2.383x
13, opt runtime 7.851s, model runtime 14.835s, pg runtime 13.622s, speedup 0.918x
14, opt runtime 7.442s, model runtime 16.130s, pg runtime 14.838s, speedup 0.920x
15, opt runtime 7.110s, model runtime 14.126s, pg runtime 14.286s, speedup 1.011x
16, opt runtime 6.810s, model runtime 16.153s, pg runtime 13.796s, speedup 0.854x
17, opt runtime 6.460s, model runtime 12.479s, pg runtime 16.134s, speedup 1.293x
18, opt runtime 6.656s, model runtime 14.201s, pg runtime 15.260s, speedup 1.075x
19, opt runtime 7.913s, model runtime 15.905s, pg runtime 15.548s, speedup 0.978x
20, opt runtime 7.377s, model runtime 17.141s, pg runtime 28.655s, speedup 1.672x
21, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
22, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
23, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
24, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
25, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
26, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
27, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
28, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
29, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
30, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
31, opt runtime 6.149s, model runtime 35.923s, pg runtime 30.760s, speedup 0.856x
32, opt runtime 10.788s, model runtime 60.401s, pg runtime 32.939s, speedup 0.545x
33, opt runtime 6.888s, model runtime 40.777s, pg runtime 29.820s, speedup 0.731x
34, opt runtime 6.248s, model runtime 39.200s, pg runtime 19.123s, speedup 0.488x
35, opt runtime 5.874s, model runtime 43.589s, pg runtime 29.356s, speedup 0.673x
36, opt runtime 11.830s, model runtime 43.956s, pg runtime 20.360s, speedup 0.463x
37, opt runtime 7.469s, model runtime 41.483s, pg runtime 23.223s, speedup 0.560x
38, opt runtime 7.662s, model runtime 43.362s, pg runtime 15.898s, speedup 0.367x
39, opt runtime 7.867s, model runtime 43.762s, pg runtime 24.303s, speedup 0.555x
40, opt runtime 7.565s, model runtime 58.212s, pg runtime 20.255s, speedup 0.348x
====================
best train speedup epoch: 18, train speedup 8.340, test speedup 0.642, val speedup 0.974
best test speedup epoch: 1, train speedup 5.489, test speedup 0.893, val speedup 1.280
best validation speedup epoch: 29, train speedup 8.340, test speedup 0.650, val speedup 1.730
last model at epoch 31, train speedup 8.338, test speedup 0.662, val speedup 0.974
execution cost 0:01:24.317964
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

load TPCH...
TPCH test template [5, 1, 10, 9]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.618914, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.045443| train set 4.183x speedup, test set 0.604x speedup, val set 1.308x speedup, step: 1
Epoch 1/300 |loss: 0.013554| train set 5.489x speedup, test set 0.893x speedup, val set 1.280x speedup, step: 2
Epoch 2/300 |loss: 0.006581| train set 6.018x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 3
Epoch 3/300 |loss: 0.004084| train set 6.299x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 4
Epoch 4/300 |loss: 0.004618| train set 6.724x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 5/300 |loss: 0.003733| train set 7.084x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 6/300 |loss: 0.002711| train set 6.752x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 7/300 |loss: 0.002779| train set 7.092x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 8/300 |loss: 0.002248| train set 6.707x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 9/300 |loss: 0.002363| train set 8.046x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 2
Epoch 10/300 |loss: 0.001599| train set 7.142x speedup, test set 0.650x speedup, val set 1.730x speedup, step: 1
Epoch 11/300 |loss: 0.001364| train set 7.109x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 12/300 |loss: 0.001543| train set 8.117x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 3
Epoch 13/300 |loss: 0.001321| train set 8.132x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 4
Epoch 14/300 |loss: 0.001117| train set 7.911x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 5
Epoch 15/300 |loss: 0.001103| train set 8.134x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 6
Epoch 16/300 |loss: 0.000968| train set 8.025x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 7
Epoch 17/300 |loss: 0.001013| train set 8.119x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 18/300 |loss: 0.000882| train set 8.335x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 19/300 |loss: 0.000653| train set 8.339x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 3
Epoch 20/300 |loss: 0.000803| train set 8.325x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 4
Epoch 21/300 |loss: 0.000622| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 5
Epoch 22/300 |loss: 0.000585| train set 8.321x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 6
Epoch 23/300 |loss: 0.000618| train set 8.304x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 24/300 |loss: 0.000573| train set 8.340x speedup, test set 0.662x speedup, val set 1.730x speedup, step: 1
Epoch 25/300 |loss: 0.000675| train set 8.334x speedup, test set 0.642x speedup, val set 1.601x speedup, step: 2
Epoch 26/300 |loss: 0.000583| train set 8.329x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 3
Epoch 27/300 |loss: 0.000610| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 4
Epoch 28/300 |loss: 0.000612| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 5
Epoch 29/300 |loss: 0.000601| train set 8.318x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 6
Epoch 30/300 |loss: 0.000686| train set 8.339x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 31/300 |loss: 0.000632| train set 8.325x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
early stopping at epoch 31
Training per epoch cost 0.665 s
Optimal speedup on test set is 1.793x
01, opt runtime 26.072s, model runtime 26.072s, pg runtime 26.072s, speedup 1.000x
02, opt runtime 29.200s, model runtime 29.200s, pg runtime 29.200s, speedup 1.000x
03, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
04, opt runtime 24.220s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
05, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
06, opt runtime 30.353s, model runtime 30.353s, pg runtime 30.353s, speedup 1.000x
07, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
08, opt runtime 18.955s, model runtime 18.955s, pg runtime 18.955s, speedup 1.000x
09, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
10, opt runtime 20.460s, model runtime 20.460s, pg runtime 20.460s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
22, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
23, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
24, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
25, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
26, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
27, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
28, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
29, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
30, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
31, opt runtime 6.149s, model runtime 35.923s, pg runtime 30.760s, speedup 0.856x
32, opt runtime 10.788s, model runtime 60.401s, pg runtime 32.939s, speedup 0.545x
33, opt runtime 6.888s, model runtime 40.777s, pg runtime 29.820s, speedup 0.731x
34, opt runtime 6.248s, model runtime 39.200s, pg runtime 19.123s, speedup 0.488x
35, opt runtime 5.874s, model runtime 43.589s, pg runtime 29.356s, speedup 0.673x
36, opt runtime 11.830s, model runtime 43.956s, pg runtime 20.360s, speedup 0.463x
37, opt runtime 7.469s, model runtime 41.483s, pg runtime 23.223s, speedup 0.560x
38, opt runtime 7.662s, model runtime 43.362s, pg runtime 15.898s, speedup 0.367x
39, opt runtime 7.867s, model runtime 43.762s, pg runtime 24.303s, speedup 0.555x
40, opt runtime 7.565s, model runtime 58.212s, pg runtime 20.255s, speedup 0.348x
====================
best train speedup epoch: 24, train speedup 8.340, test speedup 0.662, val speedup 1.730
best test speedup epoch: 1, train speedup 5.489, test speedup 0.893, val speedup 1.280
best validation speedup epoch: 30, train speedup 8.339, test speedup 0.642, val speedup 1.730
last model at epoch 31, train speedup 8.325, test speedup 0.662, val speedup 0.974
execution cost 0:00:58.233671
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

load TPCH...
TPCH test template [5, 1, 10, 9]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:01.096995, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.045443| train set 4.183x speedup, test set 0.604x speedup, val set 1.308x speedup, step: 1
Epoch 1/300 |loss: 0.013554| train set 5.489x speedup, test set 0.893x speedup, val set 1.280x speedup, step: 2
Epoch 2/300 |loss: 0.006581| train set 6.018x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 3
Epoch 3/300 |loss: 0.004084| train set 6.299x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 4
Epoch 4/300 |loss: 0.004618| train set 6.724x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 5/300 |loss: 0.003733| train set 7.084x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 6/300 |loss: 0.002711| train set 6.752x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 7/300 |loss: 0.002762| train set 7.090x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 8/300 |loss: 0.002264| train set 7.036x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 9/300 |loss: 0.002357| train set 8.046x speedup, test set 0.662x speedup, val set 1.730x speedup, step: 1
Epoch 10/300 |loss: 0.001557| train set 8.116x speedup, test set 0.662x speedup, val set 1.730x speedup, step: 1
Epoch 11/300 |loss: 0.001386| train set 8.126x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 12/300 |loss: 0.001598| train set 8.122x speedup, test set 0.650x speedup, val set 1.730x speedup, step: 1
Epoch 13/300 |loss: 0.001313| train set 8.132x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 2
Epoch 14/300 |loss: 0.001149| train set 7.968x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 3
Epoch 15/300 |loss: 0.001091| train set 8.115x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 4
Epoch 16/300 |loss: 0.000914| train set 8.119x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 5
Epoch 17/300 |loss: 0.000886| train set 8.110x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 6
Epoch 18/300 |loss: 0.000762| train set 8.134x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 7
Epoch 19/300 |loss: 0.000666| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 8
Epoch 20/300 |loss: 0.000829| train set 8.327x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 9
Epoch 21/300 |loss: 0.000643| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 10
Epoch 22/300 |loss: 0.000591| train set 8.183x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 11
Epoch 23/300 |loss: 0.000644| train set 8.302x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 12
Epoch 24/300 |loss: 0.000595| train set 8.327x speedup, test set 0.662x speedup, val set 1.730x speedup, step: 1
Epoch 25/300 |loss: 0.000648| train set 8.328x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 26/300 |loss: 0.000606| train set 8.329x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 3
Epoch 27/300 |loss: 0.000603| train set 8.325x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 4
Epoch 28/300 |loss: 0.000590| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 5
Epoch 29/300 |loss: 0.000640| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 6
Epoch 30/300 |loss: 0.000715| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 7
Epoch 31/300 |loss: 0.000677| train set 8.327x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 8
early stopping at epoch 31
Training per epoch cost 0.959 s
Optimal speedup on test set is 1.793x
01, opt runtime 26.072s, model runtime 26.072s, pg runtime 26.072s, speedup 1.000x
02, opt runtime 29.200s, model runtime 29.200s, pg runtime 29.200s, speedup 1.000x
03, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
04, opt runtime 24.220s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
05, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
06, opt runtime 30.353s, model runtime 30.353s, pg runtime 30.353s, speedup 1.000x
07, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
08, opt runtime 18.955s, model runtime 18.955s, pg runtime 18.955s, speedup 1.000x
09, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
10, opt runtime 20.460s, model runtime 20.460s, pg runtime 20.460s, speedup 1.000x
11, opt runtime 7.237s, model runtime 9.171s, pg runtime 17.708s, speedup 1.931x
12, opt runtime 6.284s, model runtime 9.232s, pg runtime 31.019s, speedup 3.360x
13, opt runtime 7.851s, model runtime 12.431s, pg runtime 13.622s, speedup 1.096x
14, opt runtime 7.442s, model runtime 9.800s, pg runtime 14.838s, speedup 1.514x
15, opt runtime 7.110s, model runtime 12.431s, pg runtime 14.286s, speedup 1.149x
16, opt runtime 6.810s, model runtime 11.534s, pg runtime 13.796s, speedup 1.196x
17, opt runtime 6.460s, model runtime 10.619s, pg runtime 16.134s, speedup 1.519x
18, opt runtime 6.656s, model runtime 8.786s, pg runtime 15.260s, speedup 1.737x
19, opt runtime 7.913s, model runtime 9.315s, pg runtime 15.548s, speedup 1.669x
20, opt runtime 7.377s, model runtime 8.566s, pg runtime 28.655s, speedup 3.345x
21, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
22, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
23, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
24, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
25, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
26, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
27, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
28, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
29, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
30, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
31, opt runtime 6.149s, model runtime 35.923s, pg runtime 30.760s, speedup 0.856x
32, opt runtime 10.788s, model runtime 60.401s, pg runtime 32.939s, speedup 0.545x
33, opt runtime 6.888s, model runtime 40.777s, pg runtime 29.820s, speedup 0.731x
34, opt runtime 6.248s, model runtime 39.200s, pg runtime 19.123s, speedup 0.488x
35, opt runtime 5.874s, model runtime 43.589s, pg runtime 29.356s, speedup 0.673x
36, opt runtime 11.830s, model runtime 43.956s, pg runtime 20.360s, speedup 0.463x
37, opt runtime 7.469s, model runtime 41.483s, pg runtime 23.223s, speedup 0.560x
38, opt runtime 7.662s, model runtime 43.362s, pg runtime 15.898s, speedup 0.367x
39, opt runtime 7.867s, model runtime 43.762s, pg runtime 24.303s, speedup 0.555x
40, opt runtime 7.565s, model runtime 58.212s, pg runtime 20.255s, speedup 0.348x
====================
best train speedup epoch: 21, train speedup 8.339, test speedup 0.642, val speedup 0.974
best test speedup epoch: 1, train speedup 5.489, test speedup 0.893, val speedup 1.280
best validation speedup epoch: 24, train speedup 8.327, test speedup 0.662, val speedup 1.730
last model at epoch 31, train speedup 8.327, test speedup 0.662, val speedup 0.974
execution cost 0:01:24.215619
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

load TPCH...
TPCH test template [5, 1, 10, 9]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:01.041075, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.045443| train set 4.183x speedup, test set 0.604x speedup, val set 1.308x speedup, step: 1
Epoch 1/300 |loss: 0.013553| train set 5.498x speedup, test set 0.893x speedup, val set 1.280x speedup, step: 2
Epoch 2/300 |loss: 0.006593| train set 5.896x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 3
Epoch 3/300 |loss: 0.004143| train set 7.653x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 4
Epoch 4/300 |loss: 0.004897| train set 6.723x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 5/300 |loss: 0.003531| train set 7.041x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 6/300 |loss: 0.002821| train set 6.765x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 7/300 |loss: 0.002476| train set 7.132x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 8/300 |loss: 0.002323| train set 7.082x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 9/300 |loss: 0.002447| train set 7.173x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 10/300 |loss: 0.001339| train set 8.117x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 2
Epoch 11/300 |loss: 0.001154| train set 8.134x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 3
Epoch 12/300 |loss: 0.001414| train set 8.132x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 4
Epoch 13/300 |loss: 0.001028| train set 8.122x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 5
Epoch 14/300 |loss: 0.001054| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 6
Epoch 15/300 |loss: 0.000989| train set 8.329x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 7
Epoch 16/300 |loss: 0.000680| train set 8.338x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 8
Epoch 17/300 |loss: 0.000810| train set 8.338x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 9
Epoch 18/300 |loss: 0.000623| train set 8.172x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 10
Epoch 19/300 |loss: 0.000630| train set 8.340x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 11
Epoch 20/300 |loss: 0.000691| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 12
Epoch 21/300 |loss: 0.000715| train set 8.340x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 13
Epoch 22/300 |loss: 0.000577| train set 8.328x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 14
Epoch 23/300 |loss: 0.000622| train set 8.296x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 15
Epoch 24/300 |loss: 0.000581| train set 8.185x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 16
Epoch 25/300 |loss: 0.000640| train set 8.331x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 17
Epoch 26/300 |loss: 0.000595| train set 8.329x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 18
Epoch 27/300 |loss: 0.000572| train set 8.338x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 19
Epoch 28/300 |loss: 0.000576| train set 8.340x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 20
Epoch 29/300 |loss: 0.000705| train set 8.275x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 21
Epoch 30/300 |loss: 0.000884| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 22
Epoch 31/300 |loss: 0.000595| train set 8.338x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 23
early stopping at epoch 31
Training per epoch cost 0.965 s
Optimal speedup on test set is 1.793x
01, opt runtime 26.072s, model runtime 26.072s, pg runtime 26.072s, speedup 1.000x
02, opt runtime 29.200s, model runtime 29.200s, pg runtime 29.200s, speedup 1.000x
03, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
04, opt runtime 24.220s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
05, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
06, opt runtime 30.353s, model runtime 30.353s, pg runtime 30.353s, speedup 1.000x
07, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
08, opt runtime 18.955s, model runtime 18.955s, pg runtime 18.955s, speedup 1.000x
09, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
10, opt runtime 20.460s, model runtime 20.460s, pg runtime 20.460s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
22, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
23, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
24, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
25, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
26, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
27, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
28, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
29, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
30, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
31, opt runtime 6.149s, model runtime 35.923s, pg runtime 30.760s, speedup 0.856x
32, opt runtime 10.788s, model runtime 60.401s, pg runtime 32.939s, speedup 0.545x
33, opt runtime 6.888s, model runtime 40.777s, pg runtime 29.820s, speedup 0.731x
34, opt runtime 6.248s, model runtime 39.200s, pg runtime 19.123s, speedup 0.488x
35, opt runtime 5.874s, model runtime 43.589s, pg runtime 29.356s, speedup 0.673x
36, opt runtime 11.830s, model runtime 43.956s, pg runtime 20.360s, speedup 0.463x
37, opt runtime 7.469s, model runtime 41.483s, pg runtime 23.223s, speedup 0.560x
38, opt runtime 7.662s, model runtime 43.362s, pg runtime 15.898s, speedup 0.367x
39, opt runtime 7.867s, model runtime 43.762s, pg runtime 24.303s, speedup 0.555x
40, opt runtime 7.565s, model runtime 58.212s, pg runtime 20.255s, speedup 0.348x
====================
best train speedup epoch: 19, train speedup 8.340, test speedup 0.642, val speedup 0.974
best test speedup epoch: 1, train speedup 5.498, test speedup 0.893, val speedup 1.280
best validation speedup epoch: 9, train speedup 7.173, test speedup 0.642, val speedup 1.308
last model at epoch 31, train speedup 8.338, test speedup 0.642, val speedup 0.974
execution cost 0:01:24.492645
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

load TPCH...
TPCH test template [5, 1, 10, 9]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.778685, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.045443| train set 4.183x speedup, test set 0.604x speedup, val set 1.308x speedup, step: 1
Epoch 1/300 |loss: 0.013554| train set 5.489x speedup, test set 0.893x speedup, val set 1.280x speedup, step: 2
Epoch 2/300 |loss: 0.006581| train set 6.018x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 3
Epoch 3/300 |loss: 0.004085| train set 6.299x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 4
Epoch 4/300 |loss: 0.004652| train set 6.503x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 5/300 |loss: 0.003725| train set 7.091x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 6/300 |loss: 0.002700| train set 6.768x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 7/300 |loss: 0.002497| train set 7.141x speedup, test set 0.642x speedup, val set 1.194x speedup, step: 2
Epoch 8/300 |loss: 0.002182| train set 7.069x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 9/300 |loss: 0.002227| train set 7.047x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 10/300 |loss: 0.001464| train set 7.156x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 2
Epoch 11/300 |loss: 0.001256| train set 8.134x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 3
Epoch 12/300 |loss: 0.001537| train set 8.133x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 4
Epoch 13/300 |loss: 0.001070| train set 7.986x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 5
Epoch 14/300 |loss: 0.001010| train set 8.073x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 6
Epoch 15/300 |loss: 0.001018| train set 8.123x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 7
Epoch 16/300 |loss: 0.000838| train set 8.123x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 8
Epoch 17/300 |loss: 0.000858| train set 8.119x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 9
Epoch 18/300 |loss: 0.000732| train set 8.134x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 10
Epoch 19/300 |loss: 0.000668| train set 8.134x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 11
Epoch 20/300 |loss: 0.000902| train set 8.324x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 12
Epoch 21/300 |loss: 0.000643| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 13
Epoch 22/300 |loss: 0.000567| train set 8.321x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 14
Epoch 23/300 |loss: 0.000633| train set 8.297x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 15
Epoch 24/300 |loss: 0.000599| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 16
Epoch 25/300 |loss: 0.000651| train set 8.331x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 17
Epoch 26/300 |loss: 0.000648| train set 8.329x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 18
Epoch 27/300 |loss: 0.000776| train set 8.324x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 19
Epoch 28/300 |loss: 0.000596| train set 8.337x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 20
Epoch 29/300 |loss: 0.000656| train set 8.276x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 21
Epoch 30/300 |loss: 0.000710| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 22
early stopping at epoch 30
Training per epoch cost 0.751 s
Optimal speedup on test set is 1.793x
01, opt runtime 26.072s, model runtime 26.072s, pg runtime 26.072s, speedup 1.000x
02, opt runtime 29.200s, model runtime 29.200s, pg runtime 29.200s, speedup 1.000x
03, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
04, opt runtime 24.220s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
05, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
06, opt runtime 30.353s, model runtime 30.353s, pg runtime 30.353s, speedup 1.000x
07, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
08, opt runtime 18.955s, model runtime 18.955s, pg runtime 18.955s, speedup 1.000x
09, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
10, opt runtime 20.460s, model runtime 20.460s, pg runtime 20.460s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
22, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
23, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
24, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
25, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
26, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
27, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
28, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
29, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
30, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
31, opt runtime 6.149s, model runtime 35.923s, pg runtime 30.760s, speedup 0.856x
32, opt runtime 10.788s, model runtime 60.401s, pg runtime 32.939s, speedup 0.545x
33, opt runtime 6.888s, model runtime 40.777s, pg runtime 29.820s, speedup 0.731x
34, opt runtime 6.248s, model runtime 39.200s, pg runtime 19.123s, speedup 0.488x
35, opt runtime 5.874s, model runtime 43.589s, pg runtime 29.356s, speedup 0.673x
36, opt runtime 11.830s, model runtime 43.956s, pg runtime 20.360s, speedup 0.463x
37, opt runtime 7.469s, model runtime 41.483s, pg runtime 23.223s, speedup 0.560x
38, opt runtime 7.662s, model runtime 43.362s, pg runtime 15.898s, speedup 0.367x
39, opt runtime 7.867s, model runtime 43.762s, pg runtime 24.303s, speedup 0.555x
40, opt runtime 7.565s, model runtime 58.212s, pg runtime 20.255s, speedup 0.348x
====================
best train speedup epoch: 21, train speedup 8.339, test speedup 0.642, val speedup 0.974
best test speedup epoch: 1, train speedup 5.489, test speedup 0.893, val speedup 1.280
best validation speedup epoch: 9, train speedup 7.047, test speedup 0.642, val speedup 1.730
last model at epoch 30, train speedup 8.339, test speedup 0.662, val speedup 0.974
execution cost 0:01:07.026419
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

load TPCH...
TPCH test template [5, 1, 10, 9]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:01.150579, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.045443| train set 4.183x speedup, test set 0.604x speedup, val set 1.308x speedup, step: 1
Epoch 1/300 |loss: 0.013554| train set 5.489x speedup, test set 0.893x speedup, val set 1.280x speedup, step: 2
Epoch 2/300 |loss: 0.006581| train set 6.018x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 3
Epoch 3/300 |loss: 0.004085| train set 6.299x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 4
Epoch 4/300 |loss: 0.004658| train set 6.723x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 5/300 |loss: 0.003684| train set 7.091x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 6/300 |loss: 0.002756| train set 6.764x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 7/300 |loss: 0.002530| train set 7.156x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 8/300 |loss: 0.002196| train set 6.647x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 9/300 |loss: 0.002284| train set 7.047x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 2
Epoch 10/300 |loss: 0.001507| train set 7.143x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 3
Epoch 11/300 |loss: 0.001276| train set 8.072x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 4
Epoch 12/300 |loss: 0.001524| train set 7.987x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 5
Epoch 13/300 |loss: 0.001102| train set 8.134x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 6
Epoch 14/300 |loss: 0.001050| train set 8.073x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 7
Epoch 15/300 |loss: 0.001096| train set 8.124x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 8
Epoch 16/300 |loss: 0.000791| train set 8.132x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 9
Epoch 17/300 |loss: 0.000879| train set 8.322x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 10
Epoch 18/300 |loss: 0.000711| train set 8.128x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 11
Epoch 19/300 |loss: 0.000661| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 12
Epoch 20/300 |loss: 0.000894| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 13
Epoch 21/300 |loss: 0.000648| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 14
Epoch 22/300 |loss: 0.000578| train set 8.328x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 15
Epoch 23/300 |loss: 0.000639| train set 8.311x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 16
Epoch 24/300 |loss: 0.000599| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 17
Epoch 25/300 |loss: 0.000622| train set 8.329x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 18
Epoch 26/300 |loss: 0.000601| train set 8.328x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 19
Epoch 27/300 |loss: 0.000617| train set 8.274x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 20
Epoch 28/300 |loss: 0.000594| train set 8.337x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 21
Epoch 29/300 |loss: 0.000677| train set 8.275x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 22
Epoch 30/300 |loss: 0.000635| train set 8.339x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 23
Epoch 31/300 |loss: 0.000671| train set 8.316x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 24
early stopping at epoch 31
Training per epoch cost 0.946 s
Optimal speedup on test set is 1.793x
01, opt runtime 26.072s, model runtime 26.072s, pg runtime 26.072s, speedup 1.000x
02, opt runtime 29.200s, model runtime 29.200s, pg runtime 29.200s, speedup 1.000x
03, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
04, opt runtime 24.220s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
05, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
06, opt runtime 30.353s, model runtime 30.353s, pg runtime 30.353s, speedup 1.000x
07, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
08, opt runtime 18.955s, model runtime 18.955s, pg runtime 18.955s, speedup 1.000x
09, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
10, opt runtime 20.460s, model runtime 20.460s, pg runtime 20.460s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
22, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
23, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
24, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
25, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
26, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
27, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
28, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
29, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
30, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
31, opt runtime 6.149s, model runtime 35.923s, pg runtime 30.760s, speedup 0.856x
32, opt runtime 10.788s, model runtime 60.401s, pg runtime 32.939s, speedup 0.545x
33, opt runtime 6.888s, model runtime 40.777s, pg runtime 29.820s, speedup 0.731x
34, opt runtime 6.248s, model runtime 39.200s, pg runtime 19.123s, speedup 0.488x
35, opt runtime 5.874s, model runtime 43.589s, pg runtime 29.356s, speedup 0.673x
36, opt runtime 11.830s, model runtime 43.956s, pg runtime 20.360s, speedup 0.463x
37, opt runtime 7.469s, model runtime 41.483s, pg runtime 23.223s, speedup 0.560x
38, opt runtime 7.662s, model runtime 43.362s, pg runtime 15.898s, speedup 0.367x
39, opt runtime 7.867s, model runtime 43.762s, pg runtime 24.303s, speedup 0.555x
40, opt runtime 7.565s, model runtime 58.212s, pg runtime 20.255s, speedup 0.348x
====================
best train speedup epoch: 21, train speedup 8.339, test speedup 0.642, val speedup 0.974
best test speedup epoch: 1, train speedup 5.489, test speedup 0.893, val speedup 1.280
best validation speedup epoch: 8, train speedup 6.647, test speedup 0.642, val speedup 1.730
last model at epoch 31, train speedup 8.316, test speedup 0.642, val speedup 0.974
execution cost 0:01:23.464222
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

load TPCH...
TPCH test template [5, 1, 10, 9]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:01.021447, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.045443| train set 4.183x speedup, test set 0.604x speedup, val set 1.308x speedup, step: 1
Epoch 1/300 |loss: 0.013554| train set 5.489x speedup, test set 0.893x speedup, val set 1.280x speedup, step: 2
Epoch 2/300 |loss: 0.006579| train set 6.106x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 3
Epoch 3/300 |loss: 0.004121| train set 7.455x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 4
Epoch 4/300 |loss: 0.004773| train set 6.724x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 5/300 |loss: 0.003623| train set 7.090x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 6/300 |loss: 0.002831| train set 6.778x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 7/300 |loss: 0.002599| train set 7.142x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 8/300 |loss: 0.002268| train set 6.714x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 9/300 |loss: 0.002610| train set 7.090x speedup, test set 0.662x speedup, val set 1.730x speedup, step: 1
Epoch 10/300 |loss: 0.001414| train set 8.116x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 2
Epoch 11/300 |loss: 0.001276| train set 8.073x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 3
Epoch 12/300 |loss: 0.001634| train set 8.132x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 4
Epoch 13/300 |loss: 0.001275| train set 8.105x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 5
Epoch 14/300 |loss: 0.001039| train set 8.132x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 6
Epoch 15/300 |loss: 0.000968| train set 8.339x speedup, test set 0.650x speedup, val set 0.974x speedup, step: 7
Epoch 16/300 |loss: 0.000714| train set 8.337x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 8
Epoch 17/300 |loss: 0.000792| train set 8.337x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 9
Epoch 18/300 |loss: 0.000670| train set 8.170x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 10
Epoch 19/300 |loss: 0.000640| train set 8.134x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 11
Epoch 20/300 |loss: 0.000682| train set 8.328x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 12
Epoch 21/300 |loss: 0.000582| train set 8.338x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 13
Epoch 22/300 |loss: 0.000588| train set 8.184x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 14
Epoch 23/300 |loss: 0.000649| train set 8.296x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 15
Epoch 24/300 |loss: 0.000619| train set 8.085x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 16
Epoch 25/300 |loss: 0.000633| train set 8.340x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 17
Epoch 26/300 |loss: 0.000632| train set 8.314x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 18
Epoch 27/300 |loss: 0.000685| train set 8.337x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 19
Epoch 28/300 |loss: 0.000583| train set 8.340x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 20
Epoch 29/300 |loss: 0.000659| train set 8.318x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 21
Epoch 30/300 |loss: 0.000757| train set 8.328x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 22
early stopping at epoch 30
Training per epoch cost 0.975 s
Optimal speedup on test set is 1.793x
01, opt runtime 26.072s, model runtime 26.072s, pg runtime 26.072s, speedup 1.000x
02, opt runtime 29.200s, model runtime 29.200s, pg runtime 29.200s, speedup 1.000x
03, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
04, opt runtime 24.220s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
05, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
06, opt runtime 30.353s, model runtime 30.353s, pg runtime 30.353s, speedup 1.000x
07, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
08, opt runtime 18.955s, model runtime 18.955s, pg runtime 18.955s, speedup 1.000x
09, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
10, opt runtime 20.460s, model runtime 20.460s, pg runtime 20.460s, speedup 1.000x
11, opt runtime 7.237s, model runtime 9.171s, pg runtime 17.708s, speedup 1.931x
12, opt runtime 6.284s, model runtime 9.232s, pg runtime 31.019s, speedup 3.360x
13, opt runtime 7.851s, model runtime 12.431s, pg runtime 13.622s, speedup 1.096x
14, opt runtime 7.442s, model runtime 9.800s, pg runtime 14.838s, speedup 1.514x
15, opt runtime 7.110s, model runtime 12.431s, pg runtime 14.286s, speedup 1.149x
16, opt runtime 6.810s, model runtime 11.534s, pg runtime 13.796s, speedup 1.196x
17, opt runtime 6.460s, model runtime 10.619s, pg runtime 16.134s, speedup 1.519x
18, opt runtime 6.656s, model runtime 8.786s, pg runtime 15.260s, speedup 1.737x
19, opt runtime 7.913s, model runtime 9.315s, pg runtime 15.548s, speedup 1.669x
20, opt runtime 7.377s, model runtime 8.566s, pg runtime 28.655s, speedup 3.345x
21, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
22, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
23, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
24, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
25, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
26, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
27, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
28, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
29, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
30, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
31, opt runtime 6.149s, model runtime 35.923s, pg runtime 30.760s, speedup 0.856x
32, opt runtime 10.788s, model runtime 60.401s, pg runtime 32.939s, speedup 0.545x
33, opt runtime 6.888s, model runtime 40.777s, pg runtime 29.820s, speedup 0.731x
34, opt runtime 6.248s, model runtime 39.200s, pg runtime 19.123s, speedup 0.488x
35, opt runtime 5.874s, model runtime 43.589s, pg runtime 29.356s, speedup 0.673x
36, opt runtime 11.830s, model runtime 43.956s, pg runtime 20.360s, speedup 0.463x
37, opt runtime 7.469s, model runtime 41.483s, pg runtime 23.223s, speedup 0.560x
38, opt runtime 7.662s, model runtime 43.362s, pg runtime 15.898s, speedup 0.367x
39, opt runtime 7.867s, model runtime 43.762s, pg runtime 24.303s, speedup 0.555x
40, opt runtime 7.565s, model runtime 58.212s, pg runtime 20.255s, speedup 0.348x
====================
best train speedup epoch: 25, train speedup 8.340, test speedup 0.642, val speedup 0.974
best test speedup epoch: 1, train speedup 5.489, test speedup 0.893, val speedup 1.280
best validation speedup epoch: 9, train speedup 7.090, test speedup 0.662, val speedup 1.730
last model at epoch 30, train speedup 8.328, test speedup 0.642, val speedup 0.974
execution cost 0:01:22.612107
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

load TPCH...
TPCH test template [5, 1, 10, 9]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:01.237385, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.045443| train set 4.183x speedup, test set 0.604x speedup, val set 1.308x speedup, step: 1
Epoch 1/300 |loss: 0.013554| train set 5.498x speedup, test set 0.893x speedup, val set 1.280x speedup, step: 2
Epoch 2/300 |loss: 0.006581| train set 6.018x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 3
Epoch 3/300 |loss: 0.004085| train set 6.299x speedup, test set 0.642x speedup, val set 1.280x speedup, step: 4
Epoch 4/300 |loss: 0.004664| train set 6.723x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 5/300 |loss: 0.003695| train set 7.090x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 6/300 |loss: 0.002682| train set 6.765x speedup, test set 0.662x speedup, val set 1.308x speedup, step: 1
Epoch 7/300 |loss: 0.002650| train set 7.141x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 1
Epoch 8/300 |loss: 0.002109| train set 6.958x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 9/300 |loss: 0.002275| train set 7.045x speedup, test set 0.642x speedup, val set 1.308x speedup, step: 2
Epoch 10/300 |loss: 0.001511| train set 7.970x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 11/300 |loss: 0.001279| train set 8.072x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 12/300 |loss: 0.001501| train set 8.071x speedup, test set 0.662x speedup, val set 1.730x speedup, step: 1
Epoch 13/300 |loss: 0.001115| train set 7.986x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 14/300 |loss: 0.001049| train set 8.062x speedup, test set 0.662x speedup, val set 1.601x speedup, step: 2
Epoch 15/300 |loss: 0.001009| train set 8.134x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 3
Epoch 16/300 |loss: 0.000845| train set 8.337x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 4
Epoch 17/300 |loss: 0.000892| train set 8.339x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 18/300 |loss: 0.000727| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 19/300 |loss: 0.000621| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 3
Epoch 20/300 |loss: 0.000889| train set 8.325x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 4
Epoch 21/300 |loss: 0.000667| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 5
Epoch 22/300 |loss: 0.000570| train set 8.337x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 6
Epoch 23/300 |loss: 0.000640| train set 8.302x speedup, test set 0.642x speedup, val set 0.974x speedup, step: 7
Epoch 24/300 |loss: 0.000591| train set 8.340x speedup, test set 0.662x speedup, val set 1.730x speedup, step: 1
Epoch 25/300 |loss: 0.000625| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 26/300 |loss: 0.000580| train set 8.329x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 3
Epoch 27/300 |loss: 0.000628| train set 8.330x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 4
Epoch 28/300 |loss: 0.000596| train set 8.336x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 5
Epoch 29/300 |loss: 0.000603| train set 8.338x speedup, test set 0.642x speedup, val set 1.730x speedup, step: 1
Epoch 30/300 |loss: 0.000696| train set 8.339x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 2
Epoch 31/300 |loss: 0.000657| train set 8.318x speedup, test set 0.662x speedup, val set 0.974x speedup, step: 3
early stopping at epoch 31
Training per epoch cost 0.976 s
Optimal speedup on test set is 1.793x
01, opt runtime 26.072s, model runtime 26.072s, pg runtime 26.072s, speedup 1.000x
02, opt runtime 29.200s, model runtime 29.200s, pg runtime 29.200s, speedup 1.000x
03, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
04, opt runtime 24.220s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
05, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
06, opt runtime 30.353s, model runtime 30.353s, pg runtime 30.353s, speedup 1.000x
07, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
08, opt runtime 18.955s, model runtime 18.955s, pg runtime 18.955s, speedup 1.000x
09, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
10, opt runtime 20.460s, model runtime 20.460s, pg runtime 20.460s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
22, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
23, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
24, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
25, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
26, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
27, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
28, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
29, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
30, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
31, opt runtime 6.149s, model runtime 35.923s, pg runtime 30.760s, speedup 0.856x
32, opt runtime 10.788s, model runtime 60.401s, pg runtime 32.939s, speedup 0.545x
33, opt runtime 6.888s, model runtime 40.777s, pg runtime 29.820s, speedup 0.731x
34, opt runtime 6.248s, model runtime 39.200s, pg runtime 19.123s, speedup 0.488x
35, opt runtime 5.874s, model runtime 43.589s, pg runtime 29.356s, speedup 0.673x
36, opt runtime 11.830s, model runtime 43.956s, pg runtime 20.360s, speedup 0.463x
37, opt runtime 7.469s, model runtime 41.483s, pg runtime 23.223s, speedup 0.560x
38, opt runtime 7.662s, model runtime 43.362s, pg runtime 15.898s, speedup 0.367x
39, opt runtime 7.867s, model runtime 43.762s, pg runtime 24.303s, speedup 0.555x
40, opt runtime 7.565s, model runtime 58.212s, pg runtime 20.255s, speedup 0.348x
====================
best train speedup epoch: 24, train speedup 8.340, test speedup 0.662, val speedup 1.730
best test speedup epoch: 1, train speedup 5.498, test speedup 0.893, val speedup 1.280
best validation speedup epoch: 29, train speedup 8.338, test speedup 0.642, val speedup 1.730
last model at epoch 31, train speedup 8.318, test speedup 0.662, val speedup 0.974
execution cost 0:01:27.160204
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.862653, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.042801| train set 2.378x speedup, test set 5.363x speedup, val set 1.684x speedup, step: 1
Epoch 1/300 |loss: 0.011355| train set 3.089x speedup, test set 4.196x speedup, val set 0.992x speedup, step: 2
Epoch 2/300 |loss: 0.006094| train set 3.668x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 3
Epoch 3/300 |loss: 0.004588| train set 4.082x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 4
Epoch 4/300 |loss: 0.003963| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 5
Epoch 5/300 |loss: 0.003176| train set 4.348x speedup, test set 4.895x speedup, val set 0.918x speedup, step: 6
Epoch 6/300 |loss: 0.003089| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 7
Epoch 7/300 |loss: 0.002203| train set 4.300x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 8
Epoch 8/300 |loss: 0.002073| train set 4.875x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 9
Epoch 9/300 |loss: 0.001899| train set 4.834x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 10
Epoch 10/300 |loss: 0.001679| train set 4.479x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 11
Epoch 11/300 |loss: 0.001630| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 12
Epoch 12/300 |loss: 0.001396| train set 4.798x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 13
Epoch 13/300 |loss: 0.001479| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 14
Epoch 14/300 |loss: 0.001098| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 15
Epoch 15/300 |loss: 0.000960| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 16
Epoch 16/300 |loss: 0.000971| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 17
Epoch 17/300 |loss: 0.000886| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 18
Epoch 18/300 |loss: 0.000937| train set 5.001x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 19
Epoch 19/300 |loss: 0.000832| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 20
Epoch 20/300 |loss: 0.000981| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 21
Epoch 21/300 |loss: 0.001455| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 22
Epoch 22/300 |loss: 0.000879| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 23
Epoch 23/300 |loss: 0.000828| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 24
Epoch 24/300 |loss: 0.000885| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 25
Epoch 25/300 |loss: 0.000791| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 26
Epoch 26/300 |loss: 0.000824| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 27
Epoch 27/300 |loss: 0.000769| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 28
Epoch 28/300 |loss: 0.000769| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 29
Epoch 29/300 |loss: 0.000952| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 30
Epoch 30/300 |loss: 0.000841| train set 4.998x speedup, test set 7.760x speedup, val set 0.918x speedup, step: 31
Epoch 31/300 |loss: 0.000784| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 32
Epoch 32/300 |loss: 0.000865| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 33
Epoch 33/300 |loss: 0.000791| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 34
Epoch 34/300 |loss: 0.000775| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 35
Epoch 35/300 |loss: 0.000810| train set 4.994x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 36
Epoch 36/300 |loss: 0.000925| train set 4.913x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 37
early stopping at epoch 36
Training per epoch cost 0.470 s
Optimal speedup on test set is 11.825x
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 15.714s, pg runtime 17.708s, speedup 1.127x
12, opt runtime 6.284s, model runtime 17.474s, pg runtime 31.019s, speedup 1.775x
13, opt runtime 7.851s, model runtime 15.260s, pg runtime 13.622s, speedup 0.893x
14, opt runtime 7.442s, model runtime 15.019s, pg runtime 14.838s, speedup 0.988x
15, opt runtime 7.110s, model runtime 14.478s, pg runtime 14.286s, speedup 0.987x
16, opt runtime 6.810s, model runtime 13.906s, pg runtime 13.796s, speedup 0.992x
17, opt runtime 6.460s, model runtime 14.288s, pg runtime 16.134s, speedup 1.129x
18, opt runtime 6.656s, model runtime 18.031s, pg runtime 15.260s, speedup 0.846x
19, opt runtime 7.913s, model runtime 15.092s, pg runtime 15.548s, speedup 1.030x
20, opt runtime 7.377s, model runtime 15.647s, pg runtime 28.655s, speedup 1.831x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
====================
best train speedup epoch: 19, train speedup 5.008, test speedup 5.035, val speedup 0.918
best test speedup epoch: 30, train speedup 4.998, test speedup 7.760, val speedup 0.918
best validation speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
last model at epoch 36, train speedup 4.913, test speedup 5.035, val speedup 0.918
execution cost 0:00:39.141491
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.986801, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.042801| train set 2.378x speedup, test set 5.363x speedup, val set 1.684x speedup, step: 1
Epoch 1/300 |loss: 0.011355| train set 3.089x speedup, test set 4.196x speedup, val set 0.992x speedup, step: 2
Epoch 2/300 |loss: 0.006086| train set 3.667x speedup, test set 5.239x speedup, val set 0.975x speedup, step: 3
Epoch 3/300 |loss: 0.004564| train set 4.264x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 4
Epoch 4/300 |loss: 0.003921| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 5
Epoch 5/300 |loss: 0.003134| train set 4.300x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 6
Epoch 6/300 |loss: 0.003100| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 7
Epoch 7/300 |loss: 0.002287| train set 4.338x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 8
Epoch 8/300 |loss: 0.002062| train set 4.891x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 9
Epoch 9/300 |loss: 0.001889| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 10
Epoch 10/300 |loss: 0.001786| train set 4.472x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 11
Epoch 11/300 |loss: 0.001700| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 12
Epoch 12/300 |loss: 0.001450| train set 4.802x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 13
Epoch 13/300 |loss: 0.001547| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 14
Epoch 14/300 |loss: 0.001146| train set 4.998x speedup, test set 7.760x speedup, val set 0.918x speedup, step: 15
Epoch 15/300 |loss: 0.001084| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 16
Epoch 16/300 |loss: 0.001031| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 17
Epoch 17/300 |loss: 0.001021| train set 5.008x speedup, test set 7.760x speedup, val set 0.918x speedup, step: 18
Epoch 18/300 |loss: 0.001013| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 19
Epoch 19/300 |loss: 0.000847| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 20
Epoch 20/300 |loss: 0.000981| train set 4.865x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 21
Epoch 21/300 |loss: 0.001438| train set 4.911x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 22
Epoch 22/300 |loss: 0.000865| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 23
Epoch 23/300 |loss: 0.000830| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 24
Epoch 24/300 |loss: 0.000875| train set 5.008x speedup, test set 7.760x speedup, val set 0.918x speedup, step: 25
Epoch 25/300 |loss: 0.000785| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 26
Epoch 26/300 |loss: 0.000826| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 27
Epoch 27/300 |loss: 0.000830| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 28
Epoch 28/300 |loss: 0.000802| train set 5.008x speedup, test set 5.035x speedup, val set 0.894x speedup, step: 29
Epoch 29/300 |loss: 0.000908| train set 4.994x speedup, test set 5.035x speedup, val set 0.733x speedup, step: 30
Epoch 30/300 |loss: 0.000893| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 31
Epoch 31/300 |loss: 0.000759| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 32
Epoch 32/300 |loss: 0.000892| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 33
Epoch 33/300 |loss: 0.000808| train set 4.920x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 34
Epoch 34/300 |loss: 0.000794| train set 5.008x speedup, test set 5.035x speedup, val set 0.733x speedup, step: 35
early stopping at epoch 34
Training per epoch cost 0.477 s
Optimal speedup on test set is 11.825x
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 15.714s, pg runtime 17.708s, speedup 1.127x
12, opt runtime 6.284s, model runtime 17.474s, pg runtime 31.019s, speedup 1.775x
13, opt runtime 7.851s, model runtime 15.260s, pg runtime 13.622s, speedup 0.893x
14, opt runtime 7.442s, model runtime 15.019s, pg runtime 14.838s, speedup 0.988x
15, opt runtime 7.110s, model runtime 14.478s, pg runtime 14.286s, speedup 0.987x
16, opt runtime 6.810s, model runtime 13.906s, pg runtime 13.796s, speedup 0.992x
17, opt runtime 6.460s, model runtime 14.288s, pg runtime 16.134s, speedup 1.129x
18, opt runtime 6.656s, model runtime 18.031s, pg runtime 15.260s, speedup 0.846x
19, opt runtime 7.913s, model runtime 15.092s, pg runtime 15.548s, speedup 1.030x
20, opt runtime 7.377s, model runtime 15.647s, pg runtime 28.655s, speedup 1.831x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
====================
best train speedup epoch: 17, train speedup 5.008, test speedup 7.760, val speedup 0.918
best test speedup epoch: 14, train speedup 4.998, test speedup 7.760, val speedup 0.918
best validation speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
last model at epoch 34, train speedup 5.008, test speedup 5.035, val speedup 0.733
execution cost 0:00:38.368935
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.844394, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.042801| train set 2.378x speedup, test set 5.363x speedup, val set 1.684x speedup, step: 1
Epoch 1/300 |loss: 0.011355| train set 3.089x speedup, test set 4.196x speedup, val set 0.992x speedup, step: 2
Epoch 2/300 |loss: 0.006088| train set 3.668x speedup, test set 5.239x speedup, val set 0.975x speedup, step: 3
Epoch 3/300 |loss: 0.004595| train set 4.264x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 4
Epoch 4/300 |loss: 0.003902| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 5
Epoch 5/300 |loss: 0.003165| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 6
Epoch 6/300 |loss: 0.003226| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 7
Epoch 7/300 |loss: 0.002334| train set 4.300x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 8
Epoch 8/300 |loss: 0.002131| train set 4.380x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 9
Epoch 9/300 |loss: 0.001857| train set 4.956x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 10
Epoch 10/300 |loss: 0.001745| train set 4.468x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 11
Epoch 11/300 |loss: 0.001812| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 12
Epoch 12/300 |loss: 0.001485| train set 4.802x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 13
Epoch 13/300 |loss: 0.001525| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 14
Epoch 14/300 |loss: 0.001133| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 15
Epoch 15/300 |loss: 0.001080| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 16
Epoch 16/300 |loss: 0.001075| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 17
Epoch 17/300 |loss: 0.000935| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 18
Epoch 18/300 |loss: 0.000964| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 19
Epoch 19/300 |loss: 0.000867| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 20
Epoch 20/300 |loss: 0.000951| train set 4.861x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 21
Epoch 21/300 |loss: 0.001333| train set 4.993x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 22
Epoch 22/300 |loss: 0.000865| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 23
Epoch 23/300 |loss: 0.000840| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 24
Epoch 24/300 |loss: 0.000827| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 25
Epoch 25/300 |loss: 0.000789| train set 4.996x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 26
Epoch 26/300 |loss: 0.000891| train set 4.999x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 27
Epoch 27/300 |loss: 0.000762| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 28
Epoch 28/300 |loss: 0.000777| train set 5.003x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 29
Epoch 29/300 |loss: 0.001051| train set 4.917x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 30
Epoch 30/300 |loss: 0.000906| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 31
Epoch 31/300 |loss: 0.000816| train set 5.003x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 32
Epoch 32/300 |loss: 0.000928| train set 5.006x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 33
Epoch 33/300 |loss: 0.000791| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 34
Epoch 34/300 |loss: 0.000775| train set 5.005x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 35
Epoch 35/300 |loss: 0.000811| train set 4.993x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 36
Epoch 36/300 |loss: 0.000949| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 37
early stopping at epoch 36
Training per epoch cost 0.487 s
Optimal speedup on test set is 11.825x
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 15.714s, pg runtime 17.708s, speedup 1.127x
12, opt runtime 6.284s, model runtime 17.474s, pg runtime 31.019s, speedup 1.775x
13, opt runtime 7.851s, model runtime 15.260s, pg runtime 13.622s, speedup 0.893x
14, opt runtime 7.442s, model runtime 15.019s, pg runtime 14.838s, speedup 0.988x
15, opt runtime 7.110s, model runtime 14.478s, pg runtime 14.286s, speedup 0.987x
16, opt runtime 6.810s, model runtime 13.906s, pg runtime 13.796s, speedup 0.992x
17, opt runtime 6.460s, model runtime 14.288s, pg runtime 16.134s, speedup 1.129x
18, opt runtime 6.656s, model runtime 18.031s, pg runtime 15.260s, speedup 0.846x
19, opt runtime 7.913s, model runtime 15.092s, pg runtime 15.548s, speedup 1.030x
20, opt runtime 7.377s, model runtime 15.647s, pg runtime 28.655s, speedup 1.831x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
====================
best train speedup epoch: 11, train speedup 5.008, test speedup 5.035, val speedup 0.918
best test speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
best validation speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
last model at epoch 36, train speedup 5.007, test speedup 5.035, val speedup 0.918
execution cost 0:00:39.691058
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.856534, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.042801| train set 2.378x speedup, test set 5.363x speedup, val set 1.684x speedup, step: 1
Epoch 1/300 |loss: 0.011355| train set 3.089x speedup, test set 4.196x speedup, val set 0.992x speedup, step: 2
Epoch 2/300 |loss: 0.006086| train set 3.667x speedup, test set 5.239x speedup, val set 0.975x speedup, step: 3
Epoch 3/300 |loss: 0.004580| train set 4.264x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 4
Epoch 4/300 |loss: 0.004069| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 5
Epoch 5/300 |loss: 0.003159| train set 4.300x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 6
Epoch 6/300 |loss: 0.003181| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 7
Epoch 7/300 |loss: 0.002365| train set 4.338x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 8
Epoch 8/300 |loss: 0.002206| train set 4.891x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 9
Epoch 9/300 |loss: 0.001881| train set 4.948x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 10
Epoch 10/300 |loss: 0.001763| train set 4.432x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 11
Epoch 11/300 |loss: 0.001650| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 12
Epoch 12/300 |loss: 0.001390| train set 4.792x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 13
Epoch 13/300 |loss: 0.001501| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 14
Epoch 14/300 |loss: 0.001173| train set 5.008x speedup, test set 7.760x speedup, val set 0.918x speedup, step: 15
Epoch 15/300 |loss: 0.000991| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 16
Epoch 16/300 |loss: 0.000955| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 17
Epoch 17/300 |loss: 0.000837| train set 5.007x speedup, test set 7.760x speedup, val set 0.918x speedup, step: 18
Epoch 18/300 |loss: 0.000886| train set 5.003x speedup, test set 7.760x speedup, val set 0.918x speedup, step: 19
Epoch 19/300 |loss: 0.000842| train set 5.007x speedup, test set 7.760x speedup, val set 0.918x speedup, step: 20
Epoch 20/300 |loss: 0.000976| train set 4.865x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 21
Epoch 21/300 |loss: 0.001463| train set 5.005x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 22
Epoch 22/300 |loss: 0.000858| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 23
Epoch 23/300 |loss: 0.000812| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 24
Epoch 24/300 |loss: 0.000807| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 25
Epoch 25/300 |loss: 0.000787| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 26
Epoch 26/300 |loss: 0.000861| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 27
Epoch 27/300 |loss: 0.000766| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 28
Epoch 28/300 |loss: 0.000765| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 29
Epoch 29/300 |loss: 0.000989| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 30
Epoch 30/300 |loss: 0.000931| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 31
Epoch 31/300 |loss: 0.000781| train set 4.945x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 32
Epoch 32/300 |loss: 0.000828| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 33
Epoch 33/300 |loss: 0.000793| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 34
Epoch 34/300 |loss: 0.000753| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 35
Epoch 35/300 |loss: 0.000775| train set 4.994x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 36
Epoch 36/300 |loss: 0.000931| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 37
early stopping at epoch 36
Training per epoch cost 0.475 s
Optimal speedup on test set is 11.825x
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 15.714s, pg runtime 17.708s, speedup 1.127x
12, opt runtime 6.284s, model runtime 17.474s, pg runtime 31.019s, speedup 1.775x
13, opt runtime 7.851s, model runtime 15.260s, pg runtime 13.622s, speedup 0.893x
14, opt runtime 7.442s, model runtime 15.019s, pg runtime 14.838s, speedup 0.988x
15, opt runtime 7.110s, model runtime 14.478s, pg runtime 14.286s, speedup 0.987x
16, opt runtime 6.810s, model runtime 13.906s, pg runtime 13.796s, speedup 0.992x
17, opt runtime 6.460s, model runtime 14.288s, pg runtime 16.134s, speedup 1.129x
18, opt runtime 6.656s, model runtime 18.031s, pg runtime 15.260s, speedup 0.846x
19, opt runtime 7.913s, model runtime 15.092s, pg runtime 15.548s, speedup 1.030x
20, opt runtime 7.377s, model runtime 15.647s, pg runtime 28.655s, speedup 1.831x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
====================
best train speedup epoch: 11, train speedup 5.008, test speedup 5.035, val speedup 0.918
best test speedup epoch: 14, train speedup 5.008, test speedup 7.760, val speedup 0.918
best validation speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
last model at epoch 36, train speedup 5.008, test speedup 5.035, val speedup 0.918
execution cost 0:00:38.597492
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.826705, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.042801| train set 2.378x speedup, test set 5.363x speedup, val set 1.684x speedup, step: 1
Epoch 1/300 |loss: 0.011355| train set 3.089x speedup, test set 4.196x speedup, val set 0.992x speedup, step: 2
Epoch 2/300 |loss: 0.006086| train set 3.667x speedup, test set 5.239x speedup, val set 0.975x speedup, step: 3
Epoch 3/300 |loss: 0.004564| train set 4.264x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 4
Epoch 4/300 |loss: 0.003928| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 5
Epoch 5/300 |loss: 0.003166| train set 4.331x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 6
Epoch 6/300 |loss: 0.003120| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 7
Epoch 7/300 |loss: 0.002310| train set 4.300x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 8
Epoch 8/300 |loss: 0.002153| train set 4.369x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 9
Epoch 9/300 |loss: 0.001859| train set 4.956x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 10
Epoch 10/300 |loss: 0.001839| train set 4.470x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 11
Epoch 11/300 |loss: 0.001762| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 12
Epoch 12/300 |loss: 0.001466| train set 4.802x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 13
Epoch 13/300 |loss: 0.001547| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 14
Epoch 14/300 |loss: 0.001164| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 15
Epoch 15/300 |loss: 0.001074| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 16
Epoch 16/300 |loss: 0.001140| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 17
Epoch 17/300 |loss: 0.000968| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 18
Epoch 18/300 |loss: 0.000951| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 19
Epoch 19/300 |loss: 0.000834| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 20
Epoch 20/300 |loss: 0.000915| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 21
Epoch 21/300 |loss: 0.001195| train set 4.990x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 22
Epoch 22/300 |loss: 0.000871| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 23
Epoch 23/300 |loss: 0.000850| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 24
Epoch 24/300 |loss: 0.001021| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 25
Epoch 25/300 |loss: 0.000794| train set 5.003x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 26
Epoch 26/300 |loss: 0.000816| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 27
Epoch 27/300 |loss: 0.000766| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 28
Epoch 28/300 |loss: 0.000787| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 29
Epoch 29/300 |loss: 0.000966| train set 4.953x speedup, test set 5.035x speedup, val set 0.928x speedup, step: 30
Epoch 30/300 |loss: 0.000941| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 31
Epoch 31/300 |loss: 0.000837| train set 4.958x speedup, test set 5.035x speedup, val set 0.928x speedup, step: 32
Epoch 32/300 |loss: 0.000933| train set 5.003x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 33
Epoch 33/300 |loss: 0.000855| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 34
Epoch 34/300 |loss: 0.000768| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 35
Epoch 35/300 |loss: 0.000836| train set 4.912x speedup, test set 5.035x speedup, val set 0.938x speedup, step: 36
Epoch 36/300 |loss: 0.000983| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 37
early stopping at epoch 36
Training per epoch cost 0.487 s
Optimal speedup on test set is 11.825x
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 15.714s, pg runtime 17.708s, speedup 1.127x
12, opt runtime 6.284s, model runtime 17.474s, pg runtime 31.019s, speedup 1.775x
13, opt runtime 7.851s, model runtime 15.260s, pg runtime 13.622s, speedup 0.893x
14, opt runtime 7.442s, model runtime 15.019s, pg runtime 14.838s, speedup 0.988x
15, opt runtime 7.110s, model runtime 14.478s, pg runtime 14.286s, speedup 0.987x
16, opt runtime 6.810s, model runtime 13.906s, pg runtime 13.796s, speedup 0.992x
17, opt runtime 6.460s, model runtime 14.288s, pg runtime 16.134s, speedup 1.129x
18, opt runtime 6.656s, model runtime 18.031s, pg runtime 15.260s, speedup 0.846x
19, opt runtime 7.913s, model runtime 15.092s, pg runtime 15.548s, speedup 1.030x
20, opt runtime 7.377s, model runtime 15.647s, pg runtime 28.655s, speedup 1.831x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
====================
best train speedup epoch: 19, train speedup 5.008, test speedup 5.035, val speedup 0.918
best test speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
best validation speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
last model at epoch 36, train speedup 5.008, test speedup 5.035, val speedup 0.918
execution cost 0:00:39.693171
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.849682, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.042801| train set 2.378x speedup, test set 5.363x speedup, val set 1.684x speedup, step: 1
Epoch 1/300 |loss: 0.011355| train set 3.089x speedup, test set 4.196x speedup, val set 0.992x speedup, step: 2
Epoch 2/300 |loss: 0.006085| train set 3.665x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 3
Epoch 3/300 |loss: 0.004554| train set 4.264x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 4
Epoch 4/300 |loss: 0.003956| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 5
Epoch 5/300 |loss: 0.003215| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 6
Epoch 6/300 |loss: 0.003188| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 7
Epoch 7/300 |loss: 0.002454| train set 4.338x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 8
Epoch 8/300 |loss: 0.002373| train set 4.334x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 9
Epoch 9/300 |loss: 0.001986| train set 4.956x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 10
Epoch 10/300 |loss: 0.002049| train set 4.472x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 11
Epoch 11/300 |loss: 0.001727| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 12
Epoch 12/300 |loss: 0.001501| train set 4.800x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 13
Epoch 13/300 |loss: 0.001383| train set 4.843x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 14
Epoch 14/300 |loss: 0.001240| train set 4.892x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 15
Epoch 15/300 |loss: 0.001198| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 16
Epoch 16/300 |loss: 0.001736| train set 4.951x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 17
Epoch 17/300 |loss: 0.001117| train set 4.883x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 18
Epoch 18/300 |loss: 0.001087| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 19
Epoch 19/300 |loss: 0.000845| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 20
Epoch 20/300 |loss: 0.000903| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 21
Epoch 21/300 |loss: 0.000951| train set 4.918x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 22
Epoch 22/300 |loss: 0.000810| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 23
Epoch 23/300 |loss: 0.000825| train set 4.912x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 24
Epoch 24/300 |loss: 0.000897| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 25
Epoch 25/300 |loss: 0.000775| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 26
Epoch 26/300 |loss: 0.000801| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 27
Epoch 27/300 |loss: 0.000787| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 28
Epoch 28/300 |loss: 0.000791| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 29
Epoch 29/300 |loss: 0.000992| train set 4.945x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 30
Epoch 30/300 |loss: 0.000890| train set 4.948x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 31
Epoch 31/300 |loss: 0.000819| train set 4.994x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 32
early stopping at epoch 31
Training per epoch cost 0.513 s
Optimal speedup on test set is 11.825x
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 15.714s, pg runtime 17.708s, speedup 1.127x
12, opt runtime 6.284s, model runtime 17.474s, pg runtime 31.019s, speedup 1.775x
13, opt runtime 7.851s, model runtime 15.260s, pg runtime 13.622s, speedup 0.893x
14, opt runtime 7.442s, model runtime 15.019s, pg runtime 14.838s, speedup 0.988x
15, opt runtime 7.110s, model runtime 14.478s, pg runtime 14.286s, speedup 0.987x
16, opt runtime 6.810s, model runtime 13.906s, pg runtime 13.796s, speedup 0.992x
17, opt runtime 6.460s, model runtime 14.288s, pg runtime 16.134s, speedup 1.129x
18, opt runtime 6.656s, model runtime 18.031s, pg runtime 15.260s, speedup 0.846x
19, opt runtime 7.913s, model runtime 15.092s, pg runtime 15.548s, speedup 1.030x
20, opt runtime 7.377s, model runtime 15.647s, pg runtime 28.655s, speedup 1.831x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
====================
best train speedup epoch: 19, train speedup 5.008, test speedup 5.035, val speedup 0.918
best test speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
best validation speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
last model at epoch 31, train speedup 4.994, test speedup 5.035, val speedup 0.918
execution cost 0:00:36.429952
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.858168, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.042801| train set 2.378x speedup, test set 5.363x speedup, val set 1.684x speedup, step: 1
Epoch 1/300 |loss: 0.011355| train set 3.089x speedup, test set 4.196x speedup, val set 0.992x speedup, step: 2
Epoch 2/300 |loss: 0.006094| train set 3.668x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 3
Epoch 3/300 |loss: 0.004588| train set 4.082x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 4
Epoch 4/300 |loss: 0.003963| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 5
Epoch 5/300 |loss: 0.003171| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 6
Epoch 6/300 |loss: 0.003107| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 7
Epoch 7/300 |loss: 0.002215| train set 4.300x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 8
Epoch 8/300 |loss: 0.002128| train set 4.885x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 9
Epoch 9/300 |loss: 0.001804| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 10
Epoch 10/300 |loss: 0.001653| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 11
Epoch 11/300 |loss: 0.001675| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 12
Epoch 12/300 |loss: 0.001389| train set 4.802x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 13
Epoch 13/300 |loss: 0.001459| train set 4.947x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 14
Epoch 14/300 |loss: 0.001018| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 15
Epoch 15/300 |loss: 0.001008| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 16
Epoch 16/300 |loss: 0.000965| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 17
Epoch 17/300 |loss: 0.000855| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 18
Epoch 18/300 |loss: 0.000875| train set 5.003x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 19
Epoch 19/300 |loss: 0.000842| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 20
Epoch 20/300 |loss: 0.001045| train set 4.865x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 21
Epoch 21/300 |loss: 0.001498| train set 4.997x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 22
Epoch 22/300 |loss: 0.000876| train set 5.000x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 23
Epoch 23/300 |loss: 0.000801| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 24
Epoch 24/300 |loss: 0.000900| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 25
Epoch 25/300 |loss: 0.000807| train set 4.991x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 26
Epoch 26/300 |loss: 0.000827| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 27
Epoch 27/300 |loss: 0.000756| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 28
Epoch 28/300 |loss: 0.000771| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 29
Epoch 29/300 |loss: 0.000956| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 30
Epoch 30/300 |loss: 0.001003| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 31
Epoch 31/300 |loss: 0.000770| train set 4.995x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 32
Epoch 32/300 |loss: 0.000849| train set 5.003x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 33
Epoch 33/300 |loss: 0.000810| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 34
Epoch 34/300 |loss: 0.000782| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 35
Epoch 35/300 |loss: 0.000803| train set 4.994x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 36
Epoch 36/300 |loss: 0.000902| train set 4.917x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 37
early stopping at epoch 36
Training per epoch cost 0.489 s
Optimal speedup on test set is 11.825x
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 15.714s, pg runtime 17.708s, speedup 1.127x
12, opt runtime 6.284s, model runtime 17.474s, pg runtime 31.019s, speedup 1.775x
13, opt runtime 7.851s, model runtime 15.260s, pg runtime 13.622s, speedup 0.893x
14, opt runtime 7.442s, model runtime 15.019s, pg runtime 14.838s, speedup 0.988x
15, opt runtime 7.110s, model runtime 14.478s, pg runtime 14.286s, speedup 0.987x
16, opt runtime 6.810s, model runtime 13.906s, pg runtime 13.796s, speedup 0.992x
17, opt runtime 6.460s, model runtime 14.288s, pg runtime 16.134s, speedup 1.129x
18, opt runtime 6.656s, model runtime 18.031s, pg runtime 15.260s, speedup 0.846x
19, opt runtime 7.913s, model runtime 15.092s, pg runtime 15.548s, speedup 1.030x
20, opt runtime 7.377s, model runtime 15.647s, pg runtime 28.655s, speedup 1.831x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
====================
best train speedup epoch: 15, train speedup 5.008, test speedup 5.035, val speedup 0.918
best test speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
best validation speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
last model at epoch 36, train speedup 4.917, test speedup 5.035, val speedup 0.918
execution cost 0:00:40.502000
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.842377, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.042801| train set 2.378x speedup, test set 5.363x speedup, val set 1.684x speedup, step: 1
Epoch 1/300 |loss: 0.011355| train set 3.089x speedup, test set 4.196x speedup, val set 0.992x speedup, step: 2
Epoch 2/300 |loss: 0.006094| train set 3.668x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 3
Epoch 3/300 |loss: 0.004587| train set 4.264x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 4
Epoch 4/300 |loss: 0.003938| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 5
Epoch 5/300 |loss: 0.003159| train set 4.300x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 6
Epoch 6/300 |loss: 0.003051| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 7
Epoch 7/300 |loss: 0.002218| train set 4.195x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 8
Epoch 8/300 |loss: 0.002077| train set 4.891x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 9
Epoch 9/300 |loss: 0.001918| train set 4.956x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 10
Epoch 10/300 |loss: 0.001726| train set 4.478x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 11
Epoch 11/300 |loss: 0.001595| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 12
Epoch 12/300 |loss: 0.001391| train set 4.802x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 13
Epoch 13/300 |loss: 0.001446| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 14
Epoch 14/300 |loss: 0.001118| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 15
Epoch 15/300 |loss: 0.001007| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 16
Epoch 16/300 |loss: 0.000919| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 17
Epoch 17/300 |loss: 0.000922| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 18
Epoch 18/300 |loss: 0.000893| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 19
Epoch 19/300 |loss: 0.000832| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 20
Epoch 20/300 |loss: 0.000985| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 21
Epoch 21/300 |loss: 0.001399| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 22
Epoch 22/300 |loss: 0.000868| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 23
Epoch 23/300 |loss: 0.000832| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 24
Epoch 24/300 |loss: 0.000877| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 25
Epoch 25/300 |loss: 0.000785| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 26
Epoch 26/300 |loss: 0.000825| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 27
Epoch 27/300 |loss: 0.000753| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 28
Epoch 28/300 |loss: 0.000766| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 29
Epoch 29/300 |loss: 0.000953| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 30
Epoch 30/300 |loss: 0.000842| train set 5.008x speedup, test set 7.760x speedup, val set 0.918x speedup, step: 31
Epoch 31/300 |loss: 0.000792| train set 5.000x speedup, test set 7.760x speedup, val set 0.918x speedup, step: 32
Epoch 32/300 |loss: 0.000835| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 33
Epoch 33/300 |loss: 0.000804| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 34
Epoch 34/300 |loss: 0.000871| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 35
early stopping at epoch 34
Training per epoch cost 0.489 s
Optimal speedup on test set is 11.825x
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 15.714s, pg runtime 17.708s, speedup 1.127x
12, opt runtime 6.284s, model runtime 17.474s, pg runtime 31.019s, speedup 1.775x
13, opt runtime 7.851s, model runtime 15.260s, pg runtime 13.622s, speedup 0.893x
14, opt runtime 7.442s, model runtime 15.019s, pg runtime 14.838s, speedup 0.988x
15, opt runtime 7.110s, model runtime 14.478s, pg runtime 14.286s, speedup 0.987x
16, opt runtime 6.810s, model runtime 13.906s, pg runtime 13.796s, speedup 0.992x
17, opt runtime 6.460s, model runtime 14.288s, pg runtime 16.134s, speedup 1.129x
18, opt runtime 6.656s, model runtime 18.031s, pg runtime 15.260s, speedup 0.846x
19, opt runtime 7.913s, model runtime 15.092s, pg runtime 15.548s, speedup 1.030x
20, opt runtime 7.377s, model runtime 15.647s, pg runtime 28.655s, speedup 1.831x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
====================
best train speedup epoch: 15, train speedup 5.008, test speedup 5.035, val speedup 0.918
best test speedup epoch: 30, train speedup 5.008, test speedup 7.760, val speedup 0.918
best validation speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
last model at epoch 34, train speedup 5.008, test speedup 5.035, val speedup 0.918
execution cost 0:00:38.316499
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.858732, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.042801| train set 2.378x speedup, test set 5.363x speedup, val set 1.684x speedup, step: 1
Epoch 1/300 |loss: 0.011355| train set 3.089x speedup, test set 4.196x speedup, val set 0.992x speedup, step: 2
Epoch 2/300 |loss: 0.006086| train set 3.667x speedup, test set 5.239x speedup, val set 0.975x speedup, step: 3
Epoch 3/300 |loss: 0.004580| train set 4.264x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 4
Epoch 4/300 |loss: 0.004069| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 5
Epoch 5/300 |loss: 0.003158| train set 4.300x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 6
Epoch 6/300 |loss: 0.003121| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 7
Epoch 7/300 |loss: 0.002325| train set 4.300x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 8
Epoch 8/300 |loss: 0.002115| train set 4.892x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 9
Epoch 9/300 |loss: 0.001828| train set 4.956x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 10
Epoch 10/300 |loss: 0.001683| train set 4.470x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 11
Epoch 11/300 |loss: 0.001734| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 12
Epoch 12/300 |loss: 0.001440| train set 4.796x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 13
Epoch 13/300 |loss: 0.001445| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 14
Epoch 14/300 |loss: 0.001175| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 15
Epoch 15/300 |loss: 0.001086| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 16
Epoch 16/300 |loss: 0.001013| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 17
Epoch 17/300 |loss: 0.000884| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 18
Epoch 18/300 |loss: 0.000913| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 19
Epoch 19/300 |loss: 0.000854| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 20
Epoch 20/300 |loss: 0.000989| train set 4.865x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 21
Epoch 21/300 |loss: 0.001349| train set 4.999x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 22
Epoch 22/300 |loss: 0.000837| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 23
Epoch 23/300 |loss: 0.000838| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 24
Epoch 24/300 |loss: 0.000901| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 25
Epoch 25/300 |loss: 0.000785| train set 5.003x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 26
Epoch 26/300 |loss: 0.000836| train set 5.002x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 27
Epoch 27/300 |loss: 0.000778| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 28
Epoch 28/300 |loss: 0.000781| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 29
Epoch 29/300 |loss: 0.000931| train set 4.954x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 30
Epoch 30/300 |loss: 0.000872| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 31
Epoch 31/300 |loss: 0.000790| train set 4.957x speedup, test set 5.035x speedup, val set 0.928x speedup, step: 32
Epoch 32/300 |loss: 0.000848| train set 5.003x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 33
Epoch 33/300 |loss: 0.000793| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 34
Epoch 34/300 |loss: 0.000794| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 35
early stopping at epoch 34
Training per epoch cost 0.502 s
Optimal speedup on test set is 11.825x
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 15.714s, pg runtime 17.708s, speedup 1.127x
12, opt runtime 6.284s, model runtime 17.474s, pg runtime 31.019s, speedup 1.775x
13, opt runtime 7.851s, model runtime 15.260s, pg runtime 13.622s, speedup 0.893x
14, opt runtime 7.442s, model runtime 15.019s, pg runtime 14.838s, speedup 0.988x
15, opt runtime 7.110s, model runtime 14.478s, pg runtime 14.286s, speedup 0.987x
16, opt runtime 6.810s, model runtime 13.906s, pg runtime 13.796s, speedup 0.992x
17, opt runtime 6.460s, model runtime 14.288s, pg runtime 16.134s, speedup 1.129x
18, opt runtime 6.656s, model runtime 18.031s, pg runtime 15.260s, speedup 0.846x
19, opt runtime 7.913s, model runtime 15.092s, pg runtime 15.548s, speedup 1.030x
20, opt runtime 7.377s, model runtime 15.647s, pg runtime 28.655s, speedup 1.831x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
====================
best train speedup epoch: 11, train speedup 5.008, test speedup 5.035, val speedup 0.918
best test speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
best validation speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
last model at epoch 34, train speedup 5.008, test speedup 5.035, val speedup 0.918
execution cost 0:00:38.946424
==================================================
all print will write to path record/postgresql/TPCH/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: TPCH
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/TPCH/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/TPCH/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
train, test, validation (140, 49) (40, 49) (20, 49)
construct training samples cost 0:00:00.887142, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.042801| train set 2.378x speedup, test set 5.363x speedup, val set 1.684x speedup, step: 1
Epoch 1/300 |loss: 0.011355| train set 3.089x speedup, test set 4.196x speedup, val set 0.992x speedup, step: 2
Epoch 2/300 |loss: 0.006088| train set 3.668x speedup, test set 5.239x speedup, val set 0.975x speedup, step: 3
Epoch 3/300 |loss: 0.004595| train set 4.264x speedup, test set 4.013x speedup, val set 0.975x speedup, step: 4
Epoch 4/300 |loss: 0.003893| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 5
Epoch 5/300 |loss: 0.003164| train set 4.348x speedup, test set 4.013x speedup, val set 0.918x speedup, step: 6
Epoch 6/300 |loss: 0.003186| train set 4.958x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 7
Epoch 7/300 |loss: 0.002277| train set 4.300x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 8
Epoch 8/300 |loss: 0.002068| train set 4.892x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 9
Epoch 9/300 |loss: 0.001889| train set 4.431x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 10
Epoch 10/300 |loss: 0.001840| train set 4.478x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 11
Epoch 11/300 |loss: 0.001838| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 12
Epoch 12/300 |loss: 0.001456| train set 4.802x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 13
Epoch 13/300 |loss: 0.001456| train set 4.957x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 14
Epoch 14/300 |loss: 0.001109| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 15
Epoch 15/300 |loss: 0.001099| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 16
Epoch 16/300 |loss: 0.001117| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 17
Epoch 17/300 |loss: 0.001013| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 18
Epoch 18/300 |loss: 0.000952| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 19
Epoch 19/300 |loss: 0.000837| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 20
Epoch 20/300 |loss: 0.000895| train set 4.865x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 21
Epoch 21/300 |loss: 0.001213| train set 4.920x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 22
Epoch 22/300 |loss: 0.000808| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 23
Epoch 23/300 |loss: 0.000874| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 24
Epoch 24/300 |loss: 0.000963| train set 4.921x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 25
Epoch 25/300 |loss: 0.000810| train set 4.997x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 26
Epoch 26/300 |loss: 0.000883| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 27
Epoch 27/300 |loss: 0.000748| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 28
Epoch 28/300 |loss: 0.000750| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 29
Epoch 29/300 |loss: 0.000964| train set 5.004x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 30
Epoch 30/300 |loss: 0.000932| train set 4.998x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 31
Epoch 31/300 |loss: 0.000801| train set 5.001x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 32
Epoch 32/300 |loss: 0.000851| train set 5.003x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 33
Epoch 33/300 |loss: 0.000803| train set 5.007x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 34
Epoch 34/300 |loss: 0.000769| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 35
Epoch 35/300 |loss: 0.000786| train set 4.993x speedup, test set 5.035x speedup, val set 0.928x speedup, step: 36
Epoch 36/300 |loss: 0.000905| train set 5.008x speedup, test set 5.035x speedup, val set 0.918x speedup, step: 37
early stopping at epoch 36
Training per epoch cost 0.472 s
Optimal speedup on test set is 11.825x
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 15.714s, pg runtime 17.708s, speedup 1.127x
12, opt runtime 6.284s, model runtime 17.474s, pg runtime 31.019s, speedup 1.775x
13, opt runtime 7.851s, model runtime 15.260s, pg runtime 13.622s, speedup 0.893x
14, opt runtime 7.442s, model runtime 15.019s, pg runtime 14.838s, speedup 0.988x
15, opt runtime 7.110s, model runtime 14.478s, pg runtime 14.286s, speedup 0.987x
16, opt runtime 6.810s, model runtime 13.906s, pg runtime 13.796s, speedup 0.992x
17, opt runtime 6.460s, model runtime 14.288s, pg runtime 16.134s, speedup 1.129x
18, opt runtime 6.656s, model runtime 18.031s, pg runtime 15.260s, speedup 0.846x
19, opt runtime 7.913s, model runtime 15.092s, pg runtime 15.548s, speedup 1.030x
20, opt runtime 7.377s, model runtime 15.647s, pg runtime 28.655s, speedup 1.831x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
====================
best train speedup epoch: 19, train speedup 5.008, test speedup 5.035, val speedup 0.918
best test speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
best validation speedup epoch: 0, train speedup 2.378, test speedup 5.363, val speedup 1.684
last model at epoch 36, train speedup 5.008, test speedup 5.035, val speedup 0.918
execution cost 0:00:38.704767
==================================================
