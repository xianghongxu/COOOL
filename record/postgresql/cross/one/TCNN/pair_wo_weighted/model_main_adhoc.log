all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.994615, and there are 36890 training samples
in channel 9
JOB test speedup 0.2523811039196437
TPCH test speedup 0.7422125925259552
TPCH skew test speedup 0.5627681486405565
Epoch 0/50 |loss: 0.378138| train set 0.479x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 1, train time 25.03 s
JOB test speedup 0.1942945591073872
TPCH test speedup 0.7729551984909703
TPCH skew test speedup 0.5834278637216542
Epoch 1/50 |loss: 0.281707| train set 0.477x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 1, train time 23.50 s
JOB test speedup 0.21788702917135488
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.6441127721652866
Epoch 2/50 |loss: 0.250675| train set 0.477x speedup, test set 0.644x speedup, val set 0.239x speedup, step: 2, train time 23.39 s
JOB test speedup 0.19640461488218255
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 3/50 |loss: 0.229743| train set 0.480x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 3, train time 23.22 s
JOB test speedup 0.23236370089907957
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 4/50 |loss: 0.212648| train set 0.478x speedup, test set 0.583x speedup, val set 0.239x speedup, step: 4, train time 23.59 s
JOB test speedup 0.16782651036010857
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 5/50 |loss: 0.201898| train set 0.472x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 5, train time 23.38 s
JOB test speedup 0.2000680981299503
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 6/50 |loss: 0.196086| train set 0.478x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 6, train time 23.41 s
JOB test speedup 0.2079642431855519
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 7/50 |loss: 0.187234| train set 0.479x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 7, train time 23.43 s
JOB test speedup 0.2627851335251535
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 8/50 |loss: 0.180681| train set 0.477x speedup, test set 0.583x speedup, val set 1.040x speedup, step: 1, train time 23.45 s
JOB test speedup 0.19567704935401042
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 9/50 |loss: 0.174816| train set 0.470x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 2, train time 23.38 s
JOB test speedup 0.17762418699524596
TPCH test speedup 0.7708726120658665
TPCH skew test speedup 0.5886352622012384
Epoch 10/50 |loss: 0.169456| train set 0.468x speedup, test set 0.589x speedup, val set 0.236x speedup, step: 3, train time 23.33 s
JOB test speedup 0.16264822330830822
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.6088409645156851
Epoch 11/50 |loss: 0.164637| train set 0.473x speedup, test set 0.609x speedup, val set 0.241x speedup, step: 4, train time 23.38 s
JOB test speedup 0.16194754466563663
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5886352622012384
Epoch 12/50 |loss: 0.162018| train set 0.476x speedup, test set 0.589x speedup, val set 0.241x speedup, step: 5, train time 23.42 s
JOB test speedup 0.17582994322233253
TPCH test speedup 0.7708726120658665
TPCH skew test speedup 0.5676117484757536
Epoch 13/50 |loss: 0.158665| train set 0.472x speedup, test set 0.568x speedup, val set 0.238x speedup, step: 6, train time 23.48 s
JOB test speedup 0.1941059260923721
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5676117484757536
Epoch 14/50 |loss: 0.157007| train set 0.470x speedup, test set 0.568x speedup, val set 0.238x speedup, step: 7, train time 23.37 s
JOB test speedup 0.19175705512813682
TPCH test speedup 0.7708726120658665
TPCH skew test speedup 0.5886352622012384
Epoch 15/50 |loss: 0.152287| train set 0.473x speedup, test set 0.589x speedup, val set 0.239x speedup, step: 8, train time 24.31 s
JOB test speedup 0.18107137608214896
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 16/50 |loss: 0.149131| train set 0.468x speedup, test set 0.589x speedup, val set 0.241x speedup, step: 9, train time 23.58 s
JOB test speedup 0.1789972023935721
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5527565388872033
Epoch 17/50 |loss: 0.144855| train set 0.464x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 10, train time 23.62 s
JOB test speedup 0.17768281685358156
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5574286216062958
Epoch 18/50 |loss: 0.143694| train set 0.470x speedup, test set 0.557x speedup, val set 1.049x speedup, step: 1, train time 23.78 s
JOB test speedup 0.17861460994505993
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5574286216062958
Epoch 19/50 |loss: 0.142212| train set 0.467x speedup, test set 0.557x speedup, val set 1.037x speedup, step: 2, train time 23.85 s
JOB test speedup 0.17787983633971344
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 20/50 |loss: 0.138924| train set 0.467x speedup, test set 0.583x speedup, val set 1.093x speedup, step: 1, train time 23.96 s
JOB test speedup 0.19714325681666486
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 21/50 |loss: 0.136868| train set 0.468x speedup, test set 0.553x speedup, val set 0.239x speedup, step: 2, train time 23.89 s
JOB test speedup 0.18107137608214896
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5834278637216542
Epoch 22/50 |loss: 0.135004| train set 0.465x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 3, train time 24.11 s
JOB test speedup 0.17680570875850096
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 23/50 |loss: 0.136151| train set 0.466x speedup, test set 0.589x speedup, val set 0.240x speedup, step: 4, train time 24.09 s
JOB test speedup 0.17649800111075592
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 24/50 |loss: 0.132054| train set 0.473x speedup, test set 0.589x speedup, val set 0.238x speedup, step: 5, train time 23.99 s
JOB test speedup 0.17583975510085698
TPCH test speedup 3.788517372919242
TPCH skew test speedup 0.5574286216062958
Epoch 25/50 |loss: 0.129613| train set 0.468x speedup, test set 0.557x speedup, val set 0.617x speedup, step: 6, train time 23.91 s
JOB test speedup 0.1746099786551907
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5574286216062958
Epoch 26/50 |loss: 0.128144| train set 0.472x speedup, test set 0.557x speedup, val set 0.236x speedup, step: 7, train time 24.01 s
JOB test speedup 0.17499818468120787
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 27/50 |loss: 0.126855| train set 0.470x speedup, test set 0.589x speedup, val set 0.238x speedup, step: 8, train time 23.98 s
JOB test speedup 0.17395402261391657
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 28/50 |loss: 0.126605| train set 0.464x speedup, test set 0.589x speedup, val set 0.238x speedup, step: 9, train time 23.91 s
JOB test speedup 0.1683965894561656
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 29/50 |loss: 0.122989| train set 0.464x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 10, train time 24.07 s
JOB test speedup 0.17204198218163458
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5539541699869531
Epoch 30/50 |loss: 0.120332| train set 0.471x speedup, test set 0.554x speedup, val set 0.236x speedup, step: 11, train time 23.89 s
JOB test speedup 0.19186754146416432
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 31/50 |loss: 0.121264| train set 0.468x speedup, test set 0.589x speedup, val set 0.238x speedup, step: 12, train time 23.98 s
JOB test speedup 0.176835885684275
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5574286216062958
Epoch 32/50 |loss: 0.118719| train set 0.470x speedup, test set 0.557x speedup, val set 0.236x speedup, step: 13, train time 24.27 s
JOB test speedup 0.1746099786551907
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5574286216062958
Epoch 33/50 |loss: 0.118493| train set 0.466x speedup, test set 0.557x speedup, val set 0.236x speedup, step: 14, train time 24.21 s
JOB test speedup 0.17624294448928923
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 34/50 |loss: 0.115874| train set 0.472x speedup, test set 0.589x speedup, val set 0.238x speedup, step: 15, train time 24.10 s
JOB test speedup 0.17357486329106114
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5834278637216542
Epoch 35/50 |loss: 0.116934| train set 0.465x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 16, train time 24.19 s
JOB test speedup 0.17321295732411232
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5627681486405565
Epoch 36/50 |loss: 0.116840| train set 0.464x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 17, train time 24.01 s
JOB test speedup 0.17586983899786793
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5847622508253792
Epoch 37/50 |loss: 0.113695| train set 0.472x speedup, test set 0.585x speedup, val set 0.238x speedup, step: 18, train time 24.11 s
JOB test speedup 0.17649800111075592
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5574286216062958
Epoch 38/50 |loss: 0.112356| train set 0.468x speedup, test set 0.557x speedup, val set 0.236x speedup, step: 19, train time 24.19 s
JOB test speedup 0.17744273701769347
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5539541699869531
Epoch 39/50 |loss: 0.112568| train set 0.463x speedup, test set 0.554x speedup, val set 0.236x speedup, step: 20, train time 23.82 s
JOB test speedup 0.17609278011397603
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 40/50 |loss: 0.111182| train set 0.468x speedup, test set 0.589x speedup, val set 0.240x speedup, step: 21, train time 23.77 s
JOB test speedup 0.17646683314403494
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 41/50 |loss: 0.110003| train set 0.464x speedup, test set 0.589x speedup, val set 0.240x speedup, step: 22, train time 23.99 s
JOB test speedup 0.1734292091959639
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 42/50 |loss: 0.109466| train set 0.464x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 23, train time 24.09 s
JOB test speedup 0.17624294448928923
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5847622508253792
Epoch 43/50 |loss: 0.109646| train set 0.464x speedup, test set 0.585x speedup, val set 0.240x speedup, step: 24, train time 23.96 s
JOB test speedup 0.1737920203337853
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 44/50 |loss: 0.105675| train set 0.468x speedup, test set 0.583x speedup, val set 0.240x speedup, step: 25, train time 24.09 s
JOB test speedup 0.19022354866834357
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5834278637216542
Epoch 45/50 |loss: 0.106771| train set 0.467x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 26, train time 24.18 s
JOB test speedup 0.17321295732411232
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 46/50 |loss: 0.106717| train set 0.468x speedup, test set 0.589x speedup, val set 0.240x speedup, step: 27, train time 24.08 s
JOB test speedup 0.17781588705854903
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 47/50 |loss: 0.108154| train set 0.463x speedup, test set 0.583x speedup, val set 0.240x speedup, step: 28, train time 24.41 s
JOB test speedup 0.1770645397753392
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 48/50 |loss: 0.106900| train set 0.468x speedup, test set 0.589x speedup, val set 0.240x speedup, step: 29, train time 24.08 s
JOB test speedup 0.17609278011397603
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 49/50 |loss: 0.103024| train set 0.468x speedup, test set 0.589x speedup, val set 0.652x speedup, step: 30, train time 23.91 s
Training per epoch cost 23.863 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 7.526s, pg runtime 0.404s, speedup 0.054x
04, opt runtime 0.637s, model runtime 4.014s, pg runtime 0.637s, speedup 0.159x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.661s, model runtime 5.066s, pg runtime 0.661s, speedup 0.130x
07, opt runtime 1.437s, model runtime 48.127s, pg runtime 1.437s, speedup 0.030x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 4.223s, model runtime 37.578s, pg runtime 18.741s, speedup 0.499x
10, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
11, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
12, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
13, opt runtime 2.593s, model runtime 24.533s, pg runtime 8.283s, speedup 0.338x
14, opt runtime 2.046s, model runtime 36.795s, pg runtime 5.879s, speedup 0.160x
15, opt runtime 1.737s, model runtime 27.852s, pg runtime 5.994s, speedup 0.215x
16, opt runtime 2.324s, model runtime 25.090s, pg runtime 10.605s, speedup 0.423x
17, opt runtime 3.248s, model runtime 25.801s, pg runtime 10.538s, speedup 0.408x
18, opt runtime 0.612s, model runtime 17.609s, pg runtime 1.357s, speedup 0.077x
19, opt runtime 0.189s, model runtime 8.037s, pg runtime 0.189s, speedup 0.024x
20, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
21, opt runtime 0.136s, model runtime 1.444s, pg runtime 0.137s, speedup 0.095x
22, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
23, opt runtime 0.129s, model runtime 0.711s, pg runtime 0.129s, speedup 0.182x
24, opt runtime 0.348s, model runtime 12.974s, pg runtime 0.391s, speedup 0.030x
25, opt runtime 2.755s, model runtime 17.369s, pg runtime 5.521s, speedup 0.318x
26, opt runtime 0.250s, model runtime 5.920s, pg runtime 0.250s, speedup 0.042x
27, opt runtime 0.278s, model runtime 6.001s, pg runtime 0.948s, speedup 0.158x
========== TPCH
01, opt runtime 18.392s, model runtime 57.953s, pg runtime 18.392s, speedup 0.317x
02, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
03, opt runtime 17.779s, model runtime 51.347s, pg runtime 17.779s, speedup 0.346x
04, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
05, opt runtime 14.857s, model runtime 96.106s, pg runtime 14.857s, speedup 0.155x
06, opt runtime 19.263s, model runtime 56.580s, pg runtime 19.263s, speedup 0.340x
07, opt runtime 15.831s, model runtime 47.554s, pg runtime 15.831s, speedup 0.333x
08, opt runtime 9.432s, model runtime 80.143s, pg runtime 9.432s, speedup 0.118x
09, opt runtime 26.874s, model runtime 57.821s, pg runtime 26.874s, speedup 0.465x
10, opt runtime 21.143s, model runtime 44.389s, pg runtime 21.143s, speedup 0.476x
11, opt runtime 7.237s, model runtime 119.588s, pg runtime 17.708s, speedup 0.148x
12, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
13, opt runtime 7.851s, model runtime 91.943s, pg runtime 13.622s, speedup 0.148x
14, opt runtime 7.442s, model runtime 128.345s, pg runtime 14.838s, speedup 0.116x
15, opt runtime 7.110s, model runtime 87.878s, pg runtime 14.286s, speedup 0.163x
16, opt runtime 6.810s, model runtime 136.064s, pg runtime 13.796s, speedup 0.101x
17, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
18, opt runtime 6.656s, model runtime 177.558s, pg runtime 15.260s, speedup 0.086x
19, opt runtime 7.913s, model runtime 131.024s, pg runtime 15.548s, speedup 0.119x
20, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
21, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
22, opt runtime 7.096s, model runtime 7.177s, pg runtime 7.096s, speedup 0.989x
23, opt runtime 7.063s, model runtime 7.159s, pg runtime 7.063s, speedup 0.987x
24, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
25, opt runtime 6.854s, model runtime 7.066s, pg runtime 6.854s, speedup 0.970x
26, opt runtime 6.905s, model runtime 7.091s, pg runtime 6.905s, speedup 0.974x
27, opt runtime 6.663s, model runtime 7.015s, pg runtime 6.663s, speedup 0.950x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 7.066s, model runtime 7.355s, pg runtime 7.533s, speedup 1.024x
30, opt runtime 6.961s, model runtime 7.020s, pg runtime 6.961s, speedup 0.992x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 55.250s, pg runtime 91.786s, speedup 1.661x
12, opt runtime 33.249s, model runtime 61.610s, pg runtime 103.551s, speedup 1.681x
13, opt runtime 33.759s, model runtime 63.571s, pg runtime 98.290s, speedup 1.546x
14, opt runtime 36.646s, model runtime 52.341s, pg runtime 98.171s, speedup 1.876x
15, opt runtime 32.482s, model runtime 54.278s, pg runtime 123.411s, speedup 2.274x
16, opt runtime 31.996s, model runtime 55.524s, pg runtime 120.854s, speedup 2.177x
17, opt runtime 30.778s, model runtime 53.160s, pg runtime 100.158s, speedup 1.884x
18, opt runtime 30.030s, model runtime 77.102s, pg runtime 85.930s, speedup 1.115x
19, opt runtime 28.776s, model runtime 66.441s, pg runtime 86.923s, speedup 1.308x
20, opt runtime 29.576s, model runtime 48.325s, pg runtime 113.059s, speedup 2.340x
21, opt runtime 10.669s, model runtime 59.523s, pg runtime 29.760s, speedup 0.500x
22, opt runtime 16.844s, model runtime 91.176s, pg runtime 27.164s, speedup 0.298x
23, opt runtime 20.708s, model runtime 47.541s, pg runtime 20.708s, speedup 0.436x
24, opt runtime 30.649s, model runtime 55.174s, pg runtime 30.649s, speedup 0.555x
25, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
26, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
27, opt runtime 28.312s, model runtime 49.880s, pg runtime 28.312s, speedup 0.568x
28, opt runtime 11.965s, model runtime 94.584s, pg runtime 11.965s, speedup 0.127x
29, opt runtime 21.883s, model runtime 70.905s, pg runtime 24.220s, speedup 0.342x
30, opt runtime 13.053s, model runtime 88.741s, pg runtime 13.053s, speedup 0.147x
31, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
32, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
33, opt runtime 3.020s, model runtime 126.890s, pg runtime 13.874s, speedup 0.109x
34, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
35, opt runtime 2.718s, model runtime 128.447s, pg runtime 12.519s, speedup 0.097x
36, opt runtime 2.748s, model runtime 130.366s, pg runtime 11.962s, speedup 0.092x
37, opt runtime 3.090s, model runtime 135.601s, pg runtime 14.431s, speedup 0.106x
38, opt runtime 3.079s, model runtime 99.885s, pg runtime 13.817s, speedup 0.138x
39, opt runtime 2.923s, model runtime 137.862s, pg runtime 13.811s, speedup 0.100x
40, opt runtime 2.833s, model runtime 131.802s, pg runtime 12.441s, speedup 0.094x
====================
JOB best validation speedup epoch: 20, train speedup 0.467, test speedup 0.178, val speedup 1.093
TPCH best validation speedup epoch: 20, train speedup 0.467, test speedup 2.422, val speedup 1.093
TPCH Skew best validation speedup epoch: 20, train speedup 0.467, test speedup 0.583, val speedup 1.093
execution cost 0:21:04.021660
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.977835, and there are 36890 training samples
in channel 9
JOB test speedup 0.2663880884639519
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 0/50 |loss: 0.373175| train set 0.499x speedup, test set 0.563x speedup, val set 1.097x speedup, step: 1, train time 24.77 s
JOB test speedup 0.20803970981773337
TPCH test speedup 0.8675385262504458
TPCH skew test speedup 0.5627681486405565
Epoch 1/50 |loss: 0.276910| train set 0.480x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 2, train time 23.40 s
JOB test speedup 0.29085640497152276
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 2/50 |loss: 0.247517| train set 0.489x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 3, train time 23.37 s
JOB test speedup 0.24615865977393867
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 3/50 |loss: 0.228425| train set 0.476x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 4, train time 23.38 s
JOB test speedup 0.22711681149037544
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 4/50 |loss: 0.212002| train set 0.471x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 5, train time 23.41 s
JOB test speedup 0.16735359868278413
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 5/50 |loss: 0.201978| train set 0.468x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 6, train time 23.47 s
JOB test speedup 0.20630365653447608
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5527565388872033
Epoch 6/50 |loss: 0.195435| train set 0.473x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 7, train time 23.47 s
JOB test speedup 0.19317554082239935
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 7/50 |loss: 0.187426| train set 0.473x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 8, train time 23.49 s
JOB test speedup 0.1622453457924756
TPCH test speedup 0.8057468945159608
TPCH skew test speedup 0.5527565388872033
Epoch 8/50 |loss: 0.180899| train set 0.473x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 9, train time 23.58 s
JOB test speedup 0.19317554082239935
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 9/50 |loss: 0.173936| train set 0.470x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 10, train time 23.71 s
JOB test speedup 0.17437631887260285
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 10/50 |loss: 0.169693| train set 0.473x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 11, train time 23.78 s
JOB test speedup 0.1680865075256134
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 11/50 |loss: 0.164999| train set 0.471x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 12, train time 23.71 s
JOB test speedup 0.17424484216453812
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 12/50 |loss: 0.162995| train set 0.476x speedup, test set 0.583x speedup, val set 0.237x speedup, step: 13, train time 23.62 s
JOB test speedup 0.171402217378718
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 13/50 |loss: 0.157469| train set 0.471x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 14, train time 23.82 s
JOB test speedup 0.19083334231840954
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 14/50 |loss: 0.156531| train set 0.469x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 15, train time 23.88 s
JOB test speedup 0.2223998967081162
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 15/50 |loss: 0.153773| train set 0.472x speedup, test set 0.583x speedup, val set 0.237x speedup, step: 16, train time 24.46 s
JOB test speedup 0.1801208249205265
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 16/50 |loss: 0.148996| train set 0.466x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 17, train time 23.89 s
JOB test speedup 0.18078671277438677
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5527565388872033
Epoch 17/50 |loss: 0.145737| train set 0.463x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 18, train time 23.91 s
JOB test speedup 0.1633521719576419
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5539541699869531
Epoch 18/50 |loss: 0.144279| train set 0.473x speedup, test set 0.554x speedup, val set 0.236x speedup, step: 19, train time 23.80 s
JOB test speedup 0.20349306849809282
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5527565388872033
Epoch 19/50 |loss: 0.142402| train set 0.468x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 20, train time 23.80 s
JOB test speedup 0.19354942076173293
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 20/50 |loss: 0.139885| train set 0.467x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 21, train time 23.91 s
JOB test speedup 0.184978241677284
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 21/50 |loss: 0.136352| train set 0.467x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 22, train time 23.87 s
JOB test speedup 0.16725181018231214
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.6441127721652866
Epoch 22/50 |loss: 0.133340| train set 0.464x speedup, test set 0.644x speedup, val set 0.236x speedup, step: 23, train time 23.89 s
JOB test speedup 0.17086492310485907
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 23/50 |loss: 0.135537| train set 0.463x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 24, train time 23.90 s
JOB test speedup 0.16712707919035158
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5527565388872033
Epoch 24/50 |loss: 0.133382| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 25, train time 23.72 s
JOB test speedup 0.17713990846603175
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.6404624292764783
Epoch 25/50 |loss: 0.129432| train set 0.469x speedup, test set 0.640x speedup, val set 0.237x speedup, step: 26, train time 23.91 s
JOB test speedup 0.17005084078033963
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5527565388872033
Epoch 26/50 |loss: 0.127435| train set 0.471x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 27, train time 23.82 s
JOB test speedup 0.1743618899516433
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 27/50 |loss: 0.126616| train set 0.470x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 28, train time 23.71 s
JOB test speedup 0.25331527064395426
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 28/50 |loss: 0.127392| train set 0.465x speedup, test set 0.553x speedup, val set 0.263x speedup, step: 29, train time 23.89 s
JOB test speedup 0.17418433691505758
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 29/50 |loss: 0.122920| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 30, train time 23.78 s
JOB test speedup 0.235305988508723
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 30/50 |loss: 0.119785| train set 0.469x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 31, train time 23.80 s
JOB test speedup 0.2055237485633599
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 31/50 |loss: 0.121852| train set 0.474x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 32, train time 23.80 s
JOB test speedup 0.2152360964868605
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 32/50 |loss: 0.118489| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 33, train time 23.80 s
JOB test speedup 0.18111277779497403
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 33/50 |loss: 0.117598| train set 0.462x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 34, train time 23.89 s
JOB test speedup 0.1731006904656225
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 34/50 |loss: 0.116500| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 35, train time 23.91 s
JOB test speedup 0.170833282951559
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 35/50 |loss: 0.116163| train set 0.465x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 36, train time 23.72 s
JOB test speedup 0.17399929714688653
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 36/50 |loss: 0.117185| train set 0.463x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 37, train time 23.70 s
JOB test speedup 0.1751111217036892
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 37/50 |loss: 0.113523| train set 0.469x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 38, train time 23.82 s
JOB test speedup 0.17834391970349067
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 38/50 |loss: 0.113181| train set 0.467x speedup, test set 0.553x speedup, val set 0.238x speedup, step: 39, train time 23.88 s
JOB test speedup 0.16631394978098935
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5527565388872033
Epoch 39/50 |loss: 0.111394| train set 0.462x speedup, test set 0.553x speedup, val set 0.254x speedup, step: 40, train time 24.03 s
JOB test speedup 0.1711622320044789
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 40/50 |loss: 0.111547| train set 0.467x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 41, train time 23.99 s
JOB test speedup 0.17681112352164988
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 41/50 |loss: 0.110150| train set 0.463x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 42, train time 23.88 s
JOB test speedup 0.19538267576727014
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 42/50 |loss: 0.108801| train set 0.464x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 43, train time 23.98 s
JOB test speedup 0.19227367914944765
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 43/50 |loss: 0.110409| train set 0.464x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 44, train time 23.87 s
JOB test speedup 0.16411147300644058
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 44/50 |loss: 0.107012| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 45, train time 23.81 s
JOB test speedup 0.18423453723197422
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 45/50 |loss: 0.107771| train set 0.464x speedup, test set 0.553x speedup, val set 0.241x speedup, step: 46, train time 23.79 s
JOB test speedup 0.16943781439830274
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 46/50 |loss: 0.105913| train set 0.472x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 47, train time 24.06 s
JOB test speedup 0.1669572372629343
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 47/50 |loss: 0.108366| train set 0.468x speedup, test set 0.553x speedup, val set 0.239x speedup, step: 48, train time 23.91 s
JOB test speedup 0.1688289573442371
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 48/50 |loss: 0.106948| train set 0.466x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 49, train time 23.91 s
JOB test speedup 0.18455359021108636
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 49/50 |loss: 0.104682| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 50, train time 23.99 s
Training per epoch cost 23.814 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 2.609s, pg runtime 0.189s, speedup 0.073x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 4.762s, pg runtime 0.404s, speedup 0.085x
04, opt runtime 0.637s, model runtime 4.014s, pg runtime 0.637s, speedup 0.159x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.661s, model runtime 5.066s, pg runtime 0.661s, speedup 0.130x
07, opt runtime 1.437s, model runtime 48.127s, pg runtime 1.437s, speedup 0.030x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 4.223s, model runtime 20.836s, pg runtime 18.741s, speedup 0.899x
10, opt runtime 1.763s, model runtime 18.644s, pg runtime 1.763s, speedup 0.095x
11, opt runtime 1.386s, model runtime 18.916s, pg runtime 1.386s, speedup 0.073x
12, opt runtime 3.504s, model runtime 7.826s, pg runtime 6.143s, speedup 0.785x
13, opt runtime 2.593s, model runtime 25.213s, pg runtime 8.283s, speedup 0.329x
14, opt runtime 2.046s, model runtime 7.753s, pg runtime 5.879s, speedup 0.758x
15, opt runtime 1.737s, model runtime 7.168s, pg runtime 5.994s, speedup 0.836x
16, opt runtime 2.324s, model runtime 19.354s, pg runtime 10.605s, speedup 0.548x
17, opt runtime 3.248s, model runtime 19.559s, pg runtime 10.538s, speedup 0.539x
18, opt runtime 0.612s, model runtime 17.609s, pg runtime 1.357s, speedup 0.077x
19, opt runtime 0.189s, model runtime 5.391s, pg runtime 0.189s, speedup 0.035x
20, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
21, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
22, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
23, opt runtime 0.129s, model runtime 0.711s, pg runtime 0.129s, speedup 0.182x
24, opt runtime 0.348s, model runtime 25.645s, pg runtime 0.391s, speedup 0.015x
25, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
26, opt runtime 0.250s, model runtime 5.920s, pg runtime 0.250s, speedup 0.042x
27, opt runtime 0.278s, model runtime 6.001s, pg runtime 0.948s, speedup 0.158x
========== TPCH
01, opt runtime 18.392s, model runtime 57.953s, pg runtime 18.392s, speedup 0.317x
02, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
03, opt runtime 17.779s, model runtime 51.347s, pg runtime 17.779s, speedup 0.346x
04, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
05, opt runtime 14.857s, model runtime 96.106s, pg runtime 14.857s, speedup 0.155x
06, opt runtime 19.263s, model runtime 56.580s, pg runtime 19.263s, speedup 0.340x
07, opt runtime 15.831s, model runtime 47.554s, pg runtime 15.831s, speedup 0.333x
08, opt runtime 9.432s, model runtime 80.143s, pg runtime 9.432s, speedup 0.118x
09, opt runtime 26.874s, model runtime 57.821s, pg runtime 26.874s, speedup 0.465x
10, opt runtime 21.143s, model runtime 44.389s, pg runtime 21.143s, speedup 0.476x
11, opt runtime 7.237s, model runtime 119.588s, pg runtime 17.708s, speedup 0.148x
12, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
13, opt runtime 7.851s, model runtime 91.943s, pg runtime 13.622s, speedup 0.148x
14, opt runtime 7.442s, model runtime 128.345s, pg runtime 14.838s, speedup 0.116x
15, opt runtime 7.110s, model runtime 87.878s, pg runtime 14.286s, speedup 0.163x
16, opt runtime 6.810s, model runtime 136.064s, pg runtime 13.796s, speedup 0.101x
17, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
18, opt runtime 6.656s, model runtime 177.558s, pg runtime 15.260s, speedup 0.086x
19, opt runtime 7.913s, model runtime 131.024s, pg runtime 15.548s, speedup 0.119x
20, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
21, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
22, opt runtime 7.096s, model runtime 7.177s, pg runtime 7.096s, speedup 0.989x
23, opt runtime 7.063s, model runtime 7.159s, pg runtime 7.063s, speedup 0.987x
24, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
25, opt runtime 6.854s, model runtime 7.066s, pg runtime 6.854s, speedup 0.970x
26, opt runtime 6.905s, model runtime 7.091s, pg runtime 6.905s, speedup 0.974x
27, opt runtime 6.663s, model runtime 7.015s, pg runtime 6.663s, speedup 0.950x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 7.066s, model runtime 7.355s, pg runtime 7.533s, speedup 1.024x
30, opt runtime 6.961s, model runtime 7.020s, pg runtime 6.961s, speedup 0.992x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 67.790s, pg runtime 91.786s, speedup 1.354x
12, opt runtime 33.249s, model runtime 71.275s, pg runtime 103.551s, speedup 1.453x
13, opt runtime 33.759s, model runtime 70.794s, pg runtime 98.290s, speedup 1.388x
14, opt runtime 36.646s, model runtime 66.614s, pg runtime 98.171s, speedup 1.474x
15, opt runtime 32.482s, model runtime 72.642s, pg runtime 123.411s, speedup 1.699x
16, opt runtime 31.996s, model runtime 66.753s, pg runtime 120.854s, speedup 1.810x
17, opt runtime 30.778s, model runtime 68.265s, pg runtime 100.158s, speedup 1.467x
18, opt runtime 30.030s, model runtime 67.656s, pg runtime 85.930s, speedup 1.270x
19, opt runtime 28.776s, model runtime 70.439s, pg runtime 86.923s, speedup 1.234x
20, opt runtime 29.576s, model runtime 71.065s, pg runtime 113.059s, speedup 1.591x
21, opt runtime 10.669s, model runtime 59.523s, pg runtime 29.760s, speedup 0.500x
22, opt runtime 16.844s, model runtime 91.176s, pg runtime 27.164s, speedup 0.298x
23, opt runtime 20.708s, model runtime 47.541s, pg runtime 20.708s, speedup 0.436x
24, opt runtime 30.649s, model runtime 55.174s, pg runtime 30.649s, speedup 0.555x
25, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
26, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
27, opt runtime 28.312s, model runtime 49.880s, pg runtime 28.312s, speedup 0.568x
28, opt runtime 11.965s, model runtime 94.584s, pg runtime 11.965s, speedup 0.127x
29, opt runtime 21.883s, model runtime 70.905s, pg runtime 24.220s, speedup 0.342x
30, opt runtime 13.053s, model runtime 88.741s, pg runtime 13.053s, speedup 0.147x
31, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
32, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
33, opt runtime 3.020s, model runtime 126.890s, pg runtime 13.874s, speedup 0.109x
34, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
35, opt runtime 2.718s, model runtime 128.447s, pg runtime 12.519s, speedup 0.097x
36, opt runtime 2.748s, model runtime 130.366s, pg runtime 11.962s, speedup 0.092x
37, opt runtime 3.090s, model runtime 135.601s, pg runtime 14.431s, speedup 0.106x
38, opt runtime 3.079s, model runtime 99.885s, pg runtime 13.817s, speedup 0.138x
39, opt runtime 2.923s, model runtime 137.862s, pg runtime 13.811s, speedup 0.100x
40, opt runtime 2.833s, model runtime 131.802s, pg runtime 12.441s, speedup 0.094x
====================
JOB best validation speedup epoch: 0, train speedup 0.499, test speedup 0.266, val speedup 1.097
TPCH best validation speedup epoch: 0, train speedup 0.499, test speedup 2.422, val speedup 1.097
TPCH Skew best validation speedup epoch: 0, train speedup 0.499, test speedup 0.563, val speedup 1.097
execution cost 0:21:01.251726
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.968922, and there are 36890 training samples
in channel 9
JOB test speedup 0.2598229779822967
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5627681486405565
Epoch 0/50 |loss: 0.378035| train set 0.480x speedup, test set 0.563x speedup, val set 1.052x speedup, step: 1, train time 25.25 s
JOB test speedup 0.22543484558991583
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 1/50 |loss: 0.281041| train set 0.475x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 2, train time 23.90 s
JOB test speedup 0.18212856216059656
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 2/50 |loss: 0.251390| train set 0.490x speedup, test set 0.563x speedup, val set 0.240x speedup, step: 3, train time 23.61 s
JOB test speedup 0.16809502804550333
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 3/50 |loss: 0.230585| train set 0.476x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 4, train time 23.51 s
JOB test speedup 0.18182783597957455
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 4/50 |loss: 0.213467| train set 0.471x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 5, train time 23.65 s
JOB test speedup 0.18910065545958674
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 5/50 |loss: 0.202764| train set 0.473x speedup, test set 0.563x speedup, val set 0.242x speedup, step: 6, train time 23.61 s
JOB test speedup 0.20556620682015866
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 6/50 |loss: 0.197367| train set 0.473x speedup, test set 0.563x speedup, val set 1.104x speedup, step: 1, train time 23.69 s
JOB test speedup 0.19611751857668766
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 7/50 |loss: 0.188220| train set 0.472x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 2, train time 23.75 s
JOB test speedup 0.2571620755957039
TPCH test speedup 0.7146212470346025
TPCH skew test speedup 0.5627681486405565
Epoch 8/50 |loss: 0.181514| train set 0.473x speedup, test set 0.563x speedup, val set 1.093x speedup, step: 3, train time 23.66 s
JOB test speedup 0.19691325150217617
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 9/50 |loss: 0.174173| train set 0.478x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 4, train time 23.88 s
JOB test speedup 0.1822227337752694
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5574286216062958
Epoch 10/50 |loss: 0.170992| train set 0.471x speedup, test set 0.557x speedup, val set 0.236x speedup, step: 5, train time 23.65 s
JOB test speedup 0.16498552121201795
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5676117484757536
Epoch 11/50 |loss: 0.166389| train set 0.471x speedup, test set 0.568x speedup, val set 0.238x speedup, step: 6, train time 23.52 s
JOB test speedup 0.16498552121201795
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5676117484757536
Epoch 12/50 |loss: 0.163573| train set 0.475x speedup, test set 0.568x speedup, val set 0.238x speedup, step: 7, train time 23.58 s
JOB test speedup 0.19287646473776024
TPCH test speedup 0.7268316613044126
TPCH skew test speedup 0.5640096046913297
Epoch 13/50 |loss: 0.160239| train set 0.472x speedup, test set 0.564x speedup, val set 0.239x speedup, step: 8, train time 23.40 s
JOB test speedup 0.1916142307765847
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 14/50 |loss: 0.157838| train set 0.469x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 9, train time 23.39 s
JOB test speedup 0.20756349391536708
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5886352622012384
Epoch 15/50 |loss: 0.153557| train set 0.472x speedup, test set 0.589x speedup, val set 0.242x speedup, step: 10, train time 24.39 s
JOB test speedup 0.16498875448826122
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5676117484757536
Epoch 16/50 |loss: 0.151060| train set 0.472x speedup, test set 0.568x speedup, val set 0.238x speedup, step: 11, train time 23.69 s
JOB test speedup 0.17322221885299807
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 17/50 |loss: 0.147976| train set 0.467x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 12, train time 23.66 s
JOB test speedup 0.17529050555714928
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5853462477033089
Epoch 18/50 |loss: 0.146333| train set 0.468x speedup, test set 0.585x speedup, val set 0.236x speedup, step: 13, train time 23.61 s
JOB test speedup 0.19959034301516645
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 19/50 |loss: 0.143324| train set 0.466x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 14, train time 23.66 s
JOB test speedup 0.19441997676650224
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 20/50 |loss: 0.141343| train set 0.467x speedup, test set 0.583x speedup, val set 0.242x speedup, step: 15, train time 23.57 s
JOB test speedup 0.18182390904202597
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 21/50 |loss: 0.137413| train set 0.467x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 16, train time 23.89 s
JOB test speedup 0.1636255600466499
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 22/50 |loss: 0.133924| train set 0.467x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 17, train time 23.71 s
JOB test speedup 0.192263376330599
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 23/50 |loss: 0.137012| train set 0.469x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 18, train time 23.79 s
JOB test speedup 0.166864033227417
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5627681486405565
Epoch 24/50 |loss: 0.135520| train set 0.466x speedup, test set 0.563x speedup, val set 0.241x speedup, step: 19, train time 23.88 s
JOB test speedup 0.16531383079394607
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 25/50 |loss: 0.131818| train set 0.474x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 20, train time 23.82 s
JOB test speedup 0.1925298485190984
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 26/50 |loss: 0.128880| train set 0.477x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 21, train time 23.89 s
JOB test speedup 0.1738987545845352
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 27/50 |loss: 0.127939| train set 0.472x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 22, train time 24.01 s
JOB test speedup 0.24223893787598447
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 28/50 |loss: 0.128101| train set 0.465x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 23, train time 23.78 s
JOB test speedup 0.1566639378596118
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 29/50 |loss: 0.125593| train set 0.468x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 24, train time 23.91 s
JOB test speedup 0.1961216330673974
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 30/50 |loss: 0.122444| train set 0.470x speedup, test set 0.553x speedup, val set 0.241x speedup, step: 25, train time 24.09 s
JOB test speedup 0.18610484798950214
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5834278637216542
Epoch 31/50 |loss: 0.123995| train set 0.474x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 26, train time 23.88 s
JOB test speedup 0.19415272783423926
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 32/50 |loss: 0.121347| train set 0.467x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 27, train time 23.91 s
JOB test speedup 0.17172019343230002
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 33/50 |loss: 0.120377| train set 0.462x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 28, train time 23.89 s
JOB test speedup 0.16498875448826122
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 34/50 |loss: 0.117585| train set 0.468x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 29, train time 23.79 s
JOB test speedup 0.15963323367016385
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 35/50 |loss: 0.118161| train set 0.468x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 30, train time 24.00 s
JOB test speedup 0.17368164372813966
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 36/50 |loss: 0.119696| train set 0.463x speedup, test set 0.583x speedup, val set 0.240x speedup, step: 31, train time 23.97 s
JOB test speedup 0.18241226553338383
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 37/50 |loss: 0.116311| train set 0.468x speedup, test set 0.583x speedup, val set 0.240x speedup, step: 32, train time 24.09 s
JOB test speedup 0.1737561426598212
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 38/50 |loss: 0.114053| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 33, train time 23.90 s
JOB test speedup 0.16546980520038637
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 39/50 |loss: 0.115333| train set 0.469x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 34, train time 24.09 s
JOB test speedup 0.17404551292062073
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 40/50 |loss: 0.113448| train set 0.467x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 35, train time 24.02 s
JOB test speedup 0.1671998691937752
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5742487859428209
Epoch 41/50 |loss: 0.113044| train set 0.470x speedup, test set 0.574x speedup, val set 0.241x speedup, step: 36, train time 23.90 s
JOB test speedup 0.19252972221952708
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 42/50 |loss: 0.109447| train set 0.466x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 37, train time 24.00 s
JOB test speedup 0.17171669094544534
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 43/50 |loss: 0.111304| train set 0.464x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 38, train time 23.98 s
JOB test speedup 0.1929770799677053
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 44/50 |loss: 0.107502| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 39, train time 23.78 s
JOB test speedup 0.19046903385567004
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 45/50 |loss: 0.110532| train set 0.466x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 40, train time 24.10 s
JOB test speedup 0.17404551292062073
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 46/50 |loss: 0.108139| train set 0.469x speedup, test set 0.589x speedup, val set 0.236x speedup, step: 41, train time 24.00 s
JOB test speedup 0.17143559580811465
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 47/50 |loss: 0.111321| train set 0.469x speedup, test set 0.583x speedup, val set 0.240x speedup, step: 42, train time 23.98 s
JOB test speedup 0.1636255600466499
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 48/50 |loss: 0.108445| train set 0.466x speedup, test set 0.553x speedup, val set 0.235x speedup, step: 43, train time 23.81 s
JOB test speedup 0.15698459186269922
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5527565388872033
Epoch 49/50 |loss: 0.104317| train set 0.469x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 44, train time 24.09 s
Training per epoch cost 23.852 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 2.609s, pg runtime 0.189s, speedup 0.073x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 4.762s, pg runtime 0.404s, speedup 0.085x
04, opt runtime 0.637s, model runtime 4.014s, pg runtime 0.637s, speedup 0.159x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.661s, model runtime 5.066s, pg runtime 0.661s, speedup 0.130x
07, opt runtime 1.437s, model runtime 48.127s, pg runtime 1.437s, speedup 0.030x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 4.223s, model runtime 53.823s, pg runtime 18.741s, speedup 0.348x
10, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
11, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
12, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
13, opt runtime 2.593s, model runtime 11.947s, pg runtime 8.283s, speedup 0.693x
14, opt runtime 2.046s, model runtime 6.177s, pg runtime 5.879s, speedup 0.952x
15, opt runtime 1.737s, model runtime 5.445s, pg runtime 5.994s, speedup 1.101x
16, opt runtime 2.324s, model runtime 19.337s, pg runtime 10.605s, speedup 0.548x
17, opt runtime 3.248s, model runtime 19.559s, pg runtime 10.538s, speedup 0.539x
18, opt runtime 0.612s, model runtime 17.609s, pg runtime 1.357s, speedup 0.077x
19, opt runtime 0.189s, model runtime 8.037s, pg runtime 0.189s, speedup 0.024x
20, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
21, opt runtime 0.136s, model runtime 1.353s, pg runtime 0.137s, speedup 0.101x
22, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
23, opt runtime 0.129s, model runtime 0.711s, pg runtime 0.129s, speedup 0.182x
24, opt runtime 0.348s, model runtime 25.645s, pg runtime 0.391s, speedup 0.015x
25, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
26, opt runtime 0.250s, model runtime 5.920s, pg runtime 0.250s, speedup 0.042x
27, opt runtime 0.278s, model runtime 6.001s, pg runtime 0.948s, speedup 0.158x
========== TPCH
01, opt runtime 18.392s, model runtime 57.953s, pg runtime 18.392s, speedup 0.317x
02, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
03, opt runtime 17.779s, model runtime 51.347s, pg runtime 17.779s, speedup 0.346x
04, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
05, opt runtime 14.857s, model runtime 96.106s, pg runtime 14.857s, speedup 0.155x
06, opt runtime 19.263s, model runtime 56.580s, pg runtime 19.263s, speedup 0.340x
07, opt runtime 15.831s, model runtime 47.554s, pg runtime 15.831s, speedup 0.333x
08, opt runtime 9.432s, model runtime 80.143s, pg runtime 9.432s, speedup 0.118x
09, opt runtime 26.874s, model runtime 57.821s, pg runtime 26.874s, speedup 0.465x
10, opt runtime 21.143s, model runtime 44.389s, pg runtime 21.143s, speedup 0.476x
11, opt runtime 7.237s, model runtime 119.588s, pg runtime 17.708s, speedup 0.148x
12, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
13, opt runtime 7.851s, model runtime 91.943s, pg runtime 13.622s, speedup 0.148x
14, opt runtime 7.442s, model runtime 128.345s, pg runtime 14.838s, speedup 0.116x
15, opt runtime 7.110s, model runtime 87.878s, pg runtime 14.286s, speedup 0.163x
16, opt runtime 6.810s, model runtime 136.064s, pg runtime 13.796s, speedup 0.101x
17, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
18, opt runtime 6.656s, model runtime 177.558s, pg runtime 15.260s, speedup 0.086x
19, opt runtime 7.913s, model runtime 131.024s, pg runtime 15.548s, speedup 0.119x
20, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
21, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
22, opt runtime 7.096s, model runtime 7.177s, pg runtime 7.096s, speedup 0.989x
23, opt runtime 7.063s, model runtime 7.159s, pg runtime 7.063s, speedup 0.987x
24, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
25, opt runtime 6.854s, model runtime 7.066s, pg runtime 6.854s, speedup 0.970x
26, opt runtime 6.905s, model runtime 7.091s, pg runtime 6.905s, speedup 0.974x
27, opt runtime 6.663s, model runtime 7.015s, pg runtime 6.663s, speedup 0.950x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 7.066s, model runtime 7.355s, pg runtime 7.533s, speedup 1.024x
30, opt runtime 6.961s, model runtime 7.020s, pg runtime 6.961s, speedup 0.992x
31, opt runtime 16.268s, model runtime 562.147s, pg runtime 432.766s, speedup 0.770x
32, opt runtime 15.120s, model runtime 456.981s, pg runtime 566.078s, speedup 1.239x
33, opt runtime 16.639s, model runtime 700.825s, pg runtime 462.544s, speedup 0.660x
34, opt runtime 16.280s, model runtime 650.160s, pg runtime 634.990s, speedup 0.977x
35, opt runtime 16.528s, model runtime 641.666s, pg runtime 620.762s, speedup 0.967x
36, opt runtime 18.690s, model runtime 786.481s, pg runtime 651.942s, speedup 0.829x
37, opt runtime 16.438s, model runtime 516.443s, pg runtime 546.887s, speedup 1.059x
38, opt runtime 16.138s, model runtime 638.331s, pg runtime 501.793s, speedup 0.786x
39, opt runtime 16.770s, model runtime 600.737s, pg runtime 594.754s, speedup 0.990x
40, opt runtime 16.305s, model runtime 605.422s, pg runtime 436.168s, speedup 0.720x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 67.790s, pg runtime 91.786s, speedup 1.354x
12, opt runtime 33.249s, model runtime 71.275s, pg runtime 103.551s, speedup 1.453x
13, opt runtime 33.759s, model runtime 70.794s, pg runtime 98.290s, speedup 1.388x
14, opt runtime 36.646s, model runtime 66.614s, pg runtime 98.171s, speedup 1.474x
15, opt runtime 32.482s, model runtime 72.642s, pg runtime 123.411s, speedup 1.699x
16, opt runtime 31.996s, model runtime 66.753s, pg runtime 120.854s, speedup 1.810x
17, opt runtime 30.778s, model runtime 68.265s, pg runtime 100.158s, speedup 1.467x
18, opt runtime 30.030s, model runtime 67.656s, pg runtime 85.930s, speedup 1.270x
19, opt runtime 28.776s, model runtime 70.439s, pg runtime 86.923s, speedup 1.234x
20, opt runtime 29.576s, model runtime 71.065s, pg runtime 113.059s, speedup 1.591x
21, opt runtime 10.669s, model runtime 59.523s, pg runtime 29.760s, speedup 0.500x
22, opt runtime 16.844s, model runtime 91.176s, pg runtime 27.164s, speedup 0.298x
23, opt runtime 20.708s, model runtime 47.541s, pg runtime 20.708s, speedup 0.436x
24, opt runtime 30.649s, model runtime 55.174s, pg runtime 30.649s, speedup 0.555x
25, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
26, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
27, opt runtime 28.312s, model runtime 49.880s, pg runtime 28.312s, speedup 0.568x
28, opt runtime 11.965s, model runtime 94.584s, pg runtime 11.965s, speedup 0.127x
29, opt runtime 21.883s, model runtime 70.905s, pg runtime 24.220s, speedup 0.342x
30, opt runtime 13.053s, model runtime 88.741s, pg runtime 13.053s, speedup 0.147x
31, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
32, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
33, opt runtime 3.020s, model runtime 126.890s, pg runtime 13.874s, speedup 0.109x
34, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
35, opt runtime 2.718s, model runtime 128.447s, pg runtime 12.519s, speedup 0.097x
36, opt runtime 2.748s, model runtime 130.366s, pg runtime 11.962s, speedup 0.092x
37, opt runtime 3.090s, model runtime 135.601s, pg runtime 14.431s, speedup 0.106x
38, opt runtime 3.079s, model runtime 99.885s, pg runtime 13.817s, speedup 0.138x
39, opt runtime 2.923s, model runtime 137.862s, pg runtime 13.811s, speedup 0.100x
40, opt runtime 2.833s, model runtime 131.802s, pg runtime 12.441s, speedup 0.094x
====================
JOB best validation speedup epoch: 6, train speedup 0.473, test speedup 0.206, val speedup 1.104
TPCH best validation speedup epoch: 6, train speedup 0.473, test speedup 0.718, val speedup 1.104
TPCH Skew best validation speedup epoch: 6, train speedup 0.473, test speedup 0.563, val speedup 1.104
execution cost 0:21:04.597747
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.999979, and there are 36890 training samples
in channel 9
JOB test speedup 0.29463872575088085
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 0/50 |loss: 0.377316| train set 0.479x speedup, test set 0.563x speedup, val set 1.097x speedup, step: 1, train time 25.07 s
JOB test speedup 0.27637188978771554
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 1/50 |loss: 0.277074| train set 0.474x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 2, train time 23.58 s
JOB test speedup 0.24583573325045643
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5640096046913297
Epoch 2/50 |loss: 0.246614| train set 0.482x speedup, test set 0.564x speedup, val set 0.239x speedup, step: 3, train time 23.48 s
JOB test speedup 0.2113879608428608
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 3/50 |loss: 0.226879| train set 0.476x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 4, train time 23.70 s
JOB test speedup 0.17275543684148123
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 4/50 |loss: 0.210661| train set 0.473x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 5, train time 23.60 s
JOB test speedup 0.17749785822362824
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 5/50 |loss: 0.197820| train set 0.471x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 6, train time 23.58 s
JOB test speedup 0.2080088908997597
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 6/50 |loss: 0.188309| train set 0.473x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 7, train time 23.60 s
JOB test speedup 0.20836641296647043
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 7/50 |loss: 0.181462| train set 0.486x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 8, train time 23.71 s
JOB test speedup 0.2690045003314999
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 8/50 |loss: 0.173697| train set 0.484x speedup, test set 0.563x speedup, val set 1.083x speedup, step: 9, train time 23.69 s
JOB test speedup 0.20228411691931716
TPCH test speedup 0.7708814699941801
TPCH skew test speedup 0.5627681486405565
Epoch 9/50 |loss: 0.168706| train set 0.474x speedup, test set 0.563x speedup, val set 1.096x speedup, step: 10, train time 23.70 s
JOB test speedup 0.19931598324296806
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 10/50 |loss: 0.163267| train set 0.470x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 11, train time 23.60 s
JOB test speedup 0.1714184938817738
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5676117484757536
Epoch 11/50 |loss: 0.158547| train set 0.469x speedup, test set 0.568x speedup, val set 0.236x speedup, step: 12, train time 23.61 s
JOB test speedup 0.1775320154798275
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5676117484757536
Epoch 12/50 |loss: 0.156997| train set 0.475x speedup, test set 0.568x speedup, val set 0.635x speedup, step: 13, train time 23.41 s
JOB test speedup 0.1816578924467625
TPCH test speedup 0.7268316613044126
TPCH skew test speedup 0.5640096046913297
Epoch 13/50 |loss: 0.152763| train set 0.471x speedup, test set 0.564x speedup, val set 0.236x speedup, step: 14, train time 23.49 s
JOB test speedup 0.17790845486298396
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 14/50 |loss: 0.151462| train set 0.470x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 15, train time 23.58 s
JOB test speedup 0.2001500361053921
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5640096046913297
Epoch 15/50 |loss: 0.147723| train set 0.472x speedup, test set 0.564x speedup, val set 0.236x speedup, step: 16, train time 24.19 s
JOB test speedup 0.18126455800249522
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5676117484757536
Epoch 16/50 |loss: 0.142541| train set 0.467x speedup, test set 0.568x speedup, val set 0.238x speedup, step: 17, train time 23.79 s
JOB test speedup 0.17776518420382453
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 17/50 |loss: 0.142024| train set 0.464x speedup, test set 0.553x speedup, val set 0.619x speedup, step: 18, train time 23.71 s
JOB test speedup 0.16991488816838507
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5574286216062958
Epoch 18/50 |loss: 0.139551| train set 0.470x speedup, test set 0.557x speedup, val set 1.040x speedup, step: 19, train time 23.71 s
JOB test speedup 0.18234410812327193
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 19/50 |loss: 0.137062| train set 0.466x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 20, train time 23.87 s
JOB test speedup 0.18570097839011646
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 20/50 |loss: 0.135541| train set 0.467x speedup, test set 0.563x speedup, val set 1.037x speedup, step: 21, train time 23.78 s
JOB test speedup 0.17799459168507892
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5539541699869531
Epoch 21/50 |loss: 0.131670| train set 0.466x speedup, test set 0.554x speedup, val set 0.236x speedup, step: 22, train time 23.71 s
JOB test speedup 0.18140139490488
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 22/50 |loss: 0.130477| train set 0.465x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 23, train time 23.69 s
JOB test speedup 0.16991488816838507
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 23/50 |loss: 0.131043| train set 0.464x speedup, test set 0.563x speedup, val set 0.633x speedup, step: 24, train time 23.78 s
JOB test speedup 0.18119182280230126
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5574286216062958
Epoch 24/50 |loss: 0.127826| train set 0.472x speedup, test set 0.557x speedup, val set 0.236x speedup, step: 25, train time 23.71 s
JOB test speedup 0.1807333150454325
TPCH test speedup 2.1794093346365155
TPCH skew test speedup 0.5574286216062958
Epoch 25/50 |loss: 0.125083| train set 0.466x speedup, test set 0.557x speedup, val set 1.037x speedup, step: 26, train time 23.79 s
JOB test speedup 0.17791181449157695
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5574286216062958
Epoch 26/50 |loss: 0.123498| train set 0.470x speedup, test set 0.557x speedup, val set 1.037x speedup, step: 27, train time 23.72 s
JOB test speedup 0.21190104347880553
TPCH test speedup 2.1794093346365155
TPCH skew test speedup 0.5574286216062958
Epoch 27/50 |loss: 0.121499| train set 0.469x speedup, test set 0.557x speedup, val set 0.378x speedup, step: 28, train time 23.66 s
JOB test speedup 0.2087438692740475
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5527565388872033
Epoch 28/50 |loss: 0.124839| train set 0.465x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 29, train time 23.53 s
JOB test speedup 0.1700642083332725
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5527565388872033
Epoch 29/50 |loss: 0.118795| train set 0.470x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 30, train time 23.80 s
JOB test speedup 0.1748665108776076
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 30/50 |loss: 0.116680| train set 0.469x speedup, test set 0.553x speedup, val set 1.037x speedup, step: 31, train time 23.60 s
JOB test speedup 0.19670598217328428
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5676117484757536
Epoch 31/50 |loss: 0.116811| train set 0.469x speedup, test set 0.568x speedup, val set 0.236x speedup, step: 32, train time 23.59 s
JOB test speedup 0.2547677957908686
TPCH test speedup 2.215334194284433
TPCH skew test speedup 0.5527565388872033
Epoch 32/50 |loss: 0.115528| train set 0.467x speedup, test set 0.553x speedup, val set 0.769x speedup, step: 33, train time 23.57 s
JOB test speedup 0.17442583842959394
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5527565388872033
Epoch 33/50 |loss: 0.115856| train set 0.463x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 34, train time 23.78 s
JOB test speedup 0.16821545784827657
TPCH test speedup 2.285021284850739
TPCH skew test speedup 0.5527565388872033
Epoch 34/50 |loss: 0.111079| train set 0.472x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 35, train time 23.58 s
JOB test speedup 0.17101196559357193
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 35/50 |loss: 0.115128| train set 0.464x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 36, train time 23.79 s
JOB test speedup 0.17423206547622774
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 36/50 |loss: 0.113226| train set 0.462x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 37, train time 23.70 s
JOB test speedup 0.20305669395625245
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 37/50 |loss: 0.112986| train set 0.470x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 38, train time 23.78 s
JOB test speedup 0.24640344568405145
TPCH test speedup 2.1983128115690707
TPCH skew test speedup 0.5527565388872033
Epoch 38/50 |loss: 0.108787| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 39, train time 23.87 s
JOB test speedup 0.21684249717848073
TPCH test speedup 2.285021284850739
TPCH skew test speedup 0.5539541699869531
Epoch 39/50 |loss: 0.108662| train set 0.467x speedup, test set 0.554x speedup, val set 0.236x speedup, step: 40, train time 23.87 s
JOB test speedup 0.1739411231377029
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 40/50 |loss: 0.109026| train set 0.468x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 41, train time 23.88 s
JOB test speedup 0.21929786310179
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 41/50 |loss: 0.108384| train set 0.469x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 42, train time 24.11 s
JOB test speedup 0.16539958889957201
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 42/50 |loss: 0.106827| train set 0.464x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 43, train time 23.88 s
JOB test speedup 0.1619556930718201
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5527565388872033
Epoch 43/50 |loss: 0.106717| train set 0.464x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 44, train time 24.18 s
JOB test speedup 0.17078802428250775
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5527565388872033
Epoch 44/50 |loss: 0.105355| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 45, train time 24.16 s
JOB test speedup 0.19311877339516187
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5527565388872033
Epoch 45/50 |loss: 0.106031| train set 0.467x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 46, train time 23.88 s
JOB test speedup 0.1693291619179754
TPCH test speedup 2.1794093346365155
TPCH skew test speedup 0.5574286216062958
Epoch 46/50 |loss: 0.104208| train set 0.470x speedup, test set 0.557x speedup, val set 0.236x speedup, step: 47, train time 23.97 s
JOB test speedup 0.18618520363911945
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5527565388872033
Epoch 47/50 |loss: 0.108041| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 48, train time 23.81 s
JOB test speedup 0.17334851294876352
TPCH test speedup 2.285021284850739
TPCH skew test speedup 0.5539541699869531
Epoch 48/50 |loss: 0.104567| train set 0.467x speedup, test set 0.554x speedup, val set 0.236x speedup, step: 49, train time 24.08 s
JOB test speedup 0.16598665036735957
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5574286216062958
Epoch 49/50 |loss: 0.101479| train set 0.468x speedup, test set 0.557x speedup, val set 0.236x speedup, step: 50, train time 24.01 s
Training per epoch cost 23.779 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 2.609s, pg runtime 0.189s, speedup 0.073x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.399s, model runtime 4.762s, pg runtime 0.404s, speedup 0.085x
04, opt runtime 0.637s, model runtime 4.014s, pg runtime 0.637s, speedup 0.159x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.661s, model runtime 5.066s, pg runtime 0.661s, speedup 0.130x
07, opt runtime 1.437s, model runtime 48.127s, pg runtime 1.437s, speedup 0.030x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 4.223s, model runtime 20.980s, pg runtime 18.741s, speedup 0.893x
10, opt runtime 1.763s, model runtime 6.887s, pg runtime 1.763s, speedup 0.256x
11, opt runtime 1.386s, model runtime 5.536s, pg runtime 1.386s, speedup 0.250x
12, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
13, opt runtime 2.593s, model runtime 11.947s, pg runtime 8.283s, speedup 0.693x
14, opt runtime 2.046s, model runtime 7.753s, pg runtime 5.879s, speedup 0.758x
15, opt runtime 1.737s, model runtime 7.168s, pg runtime 5.994s, speedup 0.836x
16, opt runtime 2.324s, model runtime 19.337s, pg runtime 10.605s, speedup 0.548x
17, opt runtime 3.248s, model runtime 19.559s, pg runtime 10.538s, speedup 0.539x
18, opt runtime 0.612s, model runtime 17.609s, pg runtime 1.357s, speedup 0.077x
19, opt runtime 0.189s, model runtime 7.289s, pg runtime 0.189s, speedup 0.026x
20, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
21, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
22, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
23, opt runtime 0.129s, model runtime 0.711s, pg runtime 0.129s, speedup 0.182x
24, opt runtime 0.348s, model runtime 22.966s, pg runtime 0.391s, speedup 0.017x
25, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
26, opt runtime 0.250s, model runtime 5.920s, pg runtime 0.250s, speedup 0.042x
27, opt runtime 0.278s, model runtime 6.001s, pg runtime 0.948s, speedup 0.158x
========== TPCH
01, opt runtime 18.392s, model runtime 57.953s, pg runtime 18.392s, speedup 0.317x
02, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
03, opt runtime 17.779s, model runtime 51.347s, pg runtime 17.779s, speedup 0.346x
04, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
05, opt runtime 14.857s, model runtime 96.106s, pg runtime 14.857s, speedup 0.155x
06, opt runtime 19.263s, model runtime 56.580s, pg runtime 19.263s, speedup 0.340x
07, opt runtime 15.831s, model runtime 47.554s, pg runtime 15.831s, speedup 0.333x
08, opt runtime 9.432s, model runtime 80.143s, pg runtime 9.432s, speedup 0.118x
09, opt runtime 26.874s, model runtime 57.821s, pg runtime 26.874s, speedup 0.465x
10, opt runtime 21.143s, model runtime 44.389s, pg runtime 21.143s, speedup 0.476x
11, opt runtime 7.237s, model runtime 119.588s, pg runtime 17.708s, speedup 0.148x
12, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
13, opt runtime 7.851s, model runtime 91.943s, pg runtime 13.622s, speedup 0.148x
14, opt runtime 7.442s, model runtime 128.345s, pg runtime 14.838s, speedup 0.116x
15, opt runtime 7.110s, model runtime 87.878s, pg runtime 14.286s, speedup 0.163x
16, opt runtime 6.810s, model runtime 136.064s, pg runtime 13.796s, speedup 0.101x
17, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
18, opt runtime 6.656s, model runtime 177.558s, pg runtime 15.260s, speedup 0.086x
19, opt runtime 7.913s, model runtime 131.024s, pg runtime 15.548s, speedup 0.119x
20, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
21, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
22, opt runtime 7.096s, model runtime 7.177s, pg runtime 7.096s, speedup 0.989x
23, opt runtime 7.063s, model runtime 7.159s, pg runtime 7.063s, speedup 0.987x
24, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
25, opt runtime 6.854s, model runtime 7.066s, pg runtime 6.854s, speedup 0.970x
26, opt runtime 6.905s, model runtime 7.091s, pg runtime 6.905s, speedup 0.974x
27, opt runtime 6.663s, model runtime 7.015s, pg runtime 6.663s, speedup 0.950x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 7.066s, model runtime 7.355s, pg runtime 7.533s, speedup 1.024x
30, opt runtime 6.961s, model runtime 7.020s, pg runtime 6.961s, speedup 0.992x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 67.790s, pg runtime 91.786s, speedup 1.354x
12, opt runtime 33.249s, model runtime 71.275s, pg runtime 103.551s, speedup 1.453x
13, opt runtime 33.759s, model runtime 70.794s, pg runtime 98.290s, speedup 1.388x
14, opt runtime 36.646s, model runtime 66.614s, pg runtime 98.171s, speedup 1.474x
15, opt runtime 32.482s, model runtime 72.642s, pg runtime 123.411s, speedup 1.699x
16, opt runtime 31.996s, model runtime 66.753s, pg runtime 120.854s, speedup 1.810x
17, opt runtime 30.778s, model runtime 68.265s, pg runtime 100.158s, speedup 1.467x
18, opt runtime 30.030s, model runtime 67.656s, pg runtime 85.930s, speedup 1.270x
19, opt runtime 28.776s, model runtime 70.439s, pg runtime 86.923s, speedup 1.234x
20, opt runtime 29.576s, model runtime 71.065s, pg runtime 113.059s, speedup 1.591x
21, opt runtime 10.669s, model runtime 59.523s, pg runtime 29.760s, speedup 0.500x
22, opt runtime 16.844s, model runtime 91.176s, pg runtime 27.164s, speedup 0.298x
23, opt runtime 20.708s, model runtime 47.541s, pg runtime 20.708s, speedup 0.436x
24, opt runtime 30.649s, model runtime 55.174s, pg runtime 30.649s, speedup 0.555x
25, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
26, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
27, opt runtime 28.312s, model runtime 49.880s, pg runtime 28.312s, speedup 0.568x
28, opt runtime 11.965s, model runtime 94.584s, pg runtime 11.965s, speedup 0.127x
29, opt runtime 21.883s, model runtime 70.905s, pg runtime 24.220s, speedup 0.342x
30, opt runtime 13.053s, model runtime 88.741s, pg runtime 13.053s, speedup 0.147x
31, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
32, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
33, opt runtime 3.020s, model runtime 126.890s, pg runtime 13.874s, speedup 0.109x
34, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
35, opt runtime 2.718s, model runtime 128.447s, pg runtime 12.519s, speedup 0.097x
36, opt runtime 2.748s, model runtime 130.366s, pg runtime 11.962s, speedup 0.092x
37, opt runtime 3.090s, model runtime 135.601s, pg runtime 14.431s, speedup 0.106x
38, opt runtime 3.079s, model runtime 99.885s, pg runtime 13.817s, speedup 0.138x
39, opt runtime 2.923s, model runtime 137.862s, pg runtime 13.811s, speedup 0.100x
40, opt runtime 2.833s, model runtime 131.802s, pg runtime 12.441s, speedup 0.094x
====================
JOB best validation speedup epoch: 0, train speedup 0.479, test speedup 0.295, val speedup 1.097
TPCH best validation speedup epoch: 0, train speedup 0.479, test speedup 2.422, val speedup 1.097
TPCH Skew best validation speedup epoch: 0, train speedup 0.479, test speedup 0.563, val speedup 1.097
execution cost 0:20:58.993515
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.979752, and there are 36890 training samples
in channel 9
JOB test speedup 0.27563716116534887
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 0/50 |loss: 0.375008| train set 0.480x speedup, test set 0.583x speedup, val set 1.155x speedup, step: 1, train time 24.97 s
JOB test speedup 0.29376258872680616
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 1/50 |loss: 0.277019| train set 0.475x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 2, train time 23.02 s
JOB test speedup 0.29396174787500273
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5834278637216542
Epoch 2/50 |loss: 0.247582| train set 0.490x speedup, test set 0.583x speedup, val set 1.174x speedup, step: 1, train time 23.36 s
JOB test speedup 0.172676923498689
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 3/50 |loss: 0.227559| train set 0.476x speedup, test set 0.583x speedup, val set 1.050x speedup, step: 2, train time 23.27 s
JOB test speedup 0.1937436085358871
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 4/50 |loss: 0.212200| train set 0.473x speedup, test set 0.583x speedup, val set 0.242x speedup, step: 3, train time 23.22 s
JOB test speedup 0.1888592874747731
TPCH test speedup 2.368469180476163
TPCH skew test speedup 0.5886352622012384
Epoch 5/50 |loss: 0.200471| train set 0.471x speedup, test set 0.589x speedup, val set 1.154x speedup, step: 4, train time 23.38 s
JOB test speedup 0.21176207538945
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 6/50 |loss: 0.194130| train set 0.474x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 5, train time 23.24 s
JOB test speedup 0.232261383652275
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 7/50 |loss: 0.186806| train set 0.474x speedup, test set 0.583x speedup, val set 0.237x speedup, step: 6, train time 23.31 s
JOB test speedup 0.24344988263939119
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 8/50 |loss: 0.179730| train set 0.486x speedup, test set 0.583x speedup, val set 1.058x speedup, step: 7, train time 23.20 s
JOB test speedup 0.22201728221489092
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 9/50 |loss: 0.175661| train set 0.474x speedup, test set 0.583x speedup, val set 0.661x speedup, step: 8, train time 23.31 s
JOB test speedup 0.20090371537916296
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5834278637216542
Epoch 10/50 |loss: 0.169844| train set 0.467x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 9, train time 23.41 s
JOB test speedup 0.16856089743891364
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 11/50 |loss: 0.164315| train set 0.474x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 10, train time 23.51 s
JOB test speedup 0.1751902540507093
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 12/50 |loss: 0.162312| train set 0.479x speedup, test set 0.589x speedup, val set 1.154x speedup, step: 11, train time 23.22 s
JOB test speedup 0.17948633338873834
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 13/50 |loss: 0.159312| train set 0.471x speedup, test set 0.563x speedup, val set 0.242x speedup, step: 12, train time 23.49 s
JOB test speedup 0.19426746814783608
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 14/50 |loss: 0.157315| train set 0.468x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 13, train time 23.31 s
JOB test speedup 0.23512999240557492
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5847622508253792
Epoch 15/50 |loss: 0.154115| train set 0.471x speedup, test set 0.585x speedup, val set 0.242x speedup, step: 14, train time 24.18 s
JOB test speedup 0.19579129760185907
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 16/50 |loss: 0.150349| train set 0.471x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 15, train time 23.38 s
JOB test speedup 0.19953177528009625
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5527565388872033
Epoch 17/50 |loss: 0.146864| train set 0.465x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 16, train time 23.40 s
JOB test speedup 0.17750120236253186
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 18/50 |loss: 0.144490| train set 0.476x speedup, test set 0.589x speedup, val set 0.241x speedup, step: 17, train time 23.42 s
JOB test speedup 0.20414829044065735
TPCH test speedup 3.788517372919242
TPCH skew test speedup 0.6891314425266719
Epoch 19/50 |loss: 0.140909| train set 0.467x speedup, test set 0.689x speedup, val set 0.236x speedup, step: 18, train time 23.59 s
JOB test speedup 0.2036078275209266
TPCH test speedup 2.1794093346365155
TPCH skew test speedup 0.5834278637216542
Epoch 20/50 |loss: 0.140781| train set 0.466x speedup, test set 0.583x speedup, val set 0.242x speedup, step: 19, train time 23.41 s
JOB test speedup 0.2036078275209266
TPCH test speedup 4.119493865506655
TPCH skew test speedup 0.5834278637216542
Epoch 21/50 |loss: 0.137475| train set 0.466x speedup, test set 0.583x speedup, val set 0.239x speedup, step: 20, train time 23.67 s
JOB test speedup 0.1982868194114669
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 22/50 |loss: 0.134256| train set 0.465x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 21, train time 23.67 s
JOB test speedup 0.17842770735193278
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 23/50 |loss: 0.135581| train set 0.468x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 22, train time 23.69 s
JOB test speedup 0.17842770735193278
TPCH test speedup 3.788517372919242
TPCH skew test speedup 0.5676117484757536
Epoch 24/50 |loss: 0.132544| train set 0.471x speedup, test set 0.568x speedup, val set 0.238x speedup, step: 23, train time 23.67 s
JOB test speedup 0.1987993673961955
TPCH test speedup 0.8762137069842204
TPCH skew test speedup 0.6404624292764783
Epoch 25/50 |loss: 0.129497| train set 0.465x speedup, test set 0.640x speedup, val set 0.236x speedup, step: 24, train time 23.81 s
JOB test speedup 0.1987993673961955
TPCH test speedup 0.8762137069842204
TPCH skew test speedup 0.6404624292764783
Epoch 26/50 |loss: 0.127689| train set 0.472x speedup, test set 0.640x speedup, val set 0.236x speedup, step: 25, train time 23.67 s
JOB test speedup 0.1983294473395999
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 27/50 |loss: 0.126379| train set 0.468x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 26, train time 23.71 s
JOB test speedup 0.2037416662319505
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 28/50 |loss: 0.127681| train set 0.463x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 27, train time 23.90 s
JOB test speedup 0.1982868194114669
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 29/50 |loss: 0.123183| train set 0.463x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 28, train time 23.71 s
JOB test speedup 0.21498414937811997
TPCH test speedup 0.8762137069842204
TPCH skew test speedup 0.6404624292764783
Epoch 30/50 |loss: 0.120715| train set 0.470x speedup, test set 0.640x speedup, val set 0.236x speedup, step: 29, train time 23.81 s
JOB test speedup 0.1989269572264289
TPCH test speedup 0.7729551984909703
TPCH skew test speedup 0.5527565388872033
Epoch 31/50 |loss: 0.121179| train set 0.469x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 30, train time 23.91 s
JOB test speedup 0.19524249194341353
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.6404624292764783
Epoch 32/50 |loss: 0.118752| train set 0.469x speedup, test set 0.640x speedup, val set 0.236x speedup, step: 31, train time 23.63 s
JOB test speedup 0.1983294473395999
TPCH test speedup 0.8762137069842204
TPCH skew test speedup 0.6404624292764783
Epoch 33/50 |loss: 0.118750| train set 0.466x speedup, test set 0.640x speedup, val set 0.236x speedup, step: 32, train time 23.97 s
JOB test speedup 0.1983294473395999
TPCH test speedup 4.119493865506655
TPCH skew test speedup 0.6404624292764783
Epoch 34/50 |loss: 0.114863| train set 0.467x speedup, test set 0.640x speedup, val set 0.236x speedup, step: 33, train time 24.08 s
JOB test speedup 0.1984137519711437
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 35/50 |loss: 0.115237| train set 0.466x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 34, train time 23.89 s
JOB test speedup 0.1989269572264289
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 36/50 |loss: 0.117067| train set 0.464x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 35, train time 24.01 s
JOB test speedup 0.19486491212527984
TPCH test speedup 3.7557763464916736
TPCH skew test speedup 0.5627681486405565
Epoch 37/50 |loss: 0.114999| train set 0.468x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 36, train time 24.01 s
JOB test speedup 0.1983294473395999
TPCH test speedup 0.7729551984909703
TPCH skew test speedup 0.5527565388872033
Epoch 38/50 |loss: 0.111510| train set 0.467x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 37, train time 24.11 s
JOB test speedup 0.1788426222315862
TPCH test speedup 3.3016069676446147
TPCH skew test speedup 0.5527565388872033
Epoch 39/50 |loss: 0.112142| train set 0.468x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 38, train time 24.16 s
JOB test speedup 0.19118230983801615
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 40/50 |loss: 0.110198| train set 0.468x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 39, train time 24.07 s
JOB test speedup 0.17525185080854758
TPCH test speedup 2.1685343563476405
TPCH skew test speedup 0.5627681486405565
Epoch 41/50 |loss: 0.109445| train set 0.468x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 40, train time 24.28 s
JOB test speedup 0.1984137519711437
TPCH test speedup 2.1685343563476405
TPCH skew test speedup 0.6539419157757496
Epoch 42/50 |loss: 0.108662| train set 0.466x speedup, test set 0.654x speedup, val set 0.236x speedup, step: 41, train time 24.11 s
JOB test speedup 0.19115895326200882
TPCH test speedup 0.87178616747384
TPCH skew test speedup 0.6539419157757496
Epoch 43/50 |loss: 0.108851| train set 0.465x speedup, test set 0.654x speedup, val set 0.236x speedup, step: 42, train time 23.89 s
JOB test speedup 0.19163526992215335
TPCH test speedup 1.2588011571918665
TPCH skew test speedup 0.6539419157757496
Epoch 44/50 |loss: 0.104708| train set 0.468x speedup, test set 0.654x speedup, val set 0.236x speedup, step: 43, train time 23.89 s
JOB test speedup 0.18842572663218846
TPCH test speedup 0.7695076554569024
TPCH skew test speedup 0.6404624292764783
Epoch 45/50 |loss: 0.107251| train set 0.469x speedup, test set 0.640x speedup, val set 0.236x speedup, step: 44, train time 23.98 s
JOB test speedup 0.194413387339859
TPCH test speedup 0.7729551984909703
TPCH skew test speedup 0.6404624292764783
Epoch 46/50 |loss: 0.105650| train set 0.467x speedup, test set 0.640x speedup, val set 0.236x speedup, step: 45, train time 23.92 s
JOB test speedup 0.19131658828726295
TPCH test speedup 2.1685343563476405
TPCH skew test speedup 0.5627681486405565
Epoch 47/50 |loss: 0.109292| train set 0.468x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 46, train time 23.99 s
JOB test speedup 0.17565211032894615
TPCH test speedup 0.8900265341846907
TPCH skew test speedup 0.6404624292764783
Epoch 48/50 |loss: 0.107326| train set 0.466x speedup, test set 0.640x speedup, val set 0.236x speedup, step: 47, train time 23.98 s
JOB test speedup 0.17330706236038496
TPCH test speedup 0.7708726120658665
TPCH skew test speedup 0.5527565388872033
Epoch 49/50 |loss: 0.102155| train set 0.467x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 48, train time 23.97 s
Training per epoch cost 23.715 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 5.505s, pg runtime 0.189s, speedup 0.034x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 9.532s, pg runtime 0.404s, speedup 0.042x
04, opt runtime 0.637s, model runtime 3.116s, pg runtime 0.637s, speedup 0.205x
05, opt runtime 2.262s, model runtime 4.670s, pg runtime 3.549s, speedup 0.760x
06, opt runtime 0.661s, model runtime 3.018s, pg runtime 0.661s, speedup 0.219x
07, opt runtime 1.437s, model runtime 4.967s, pg runtime 1.437s, speedup 0.289x
08, opt runtime 0.206s, model runtime 19.941s, pg runtime 0.206s, speedup 0.010x
09, opt runtime 4.223s, model runtime 40.861s, pg runtime 18.741s, speedup 0.459x
10, opt runtime 1.763s, model runtime 16.423s, pg runtime 1.763s, speedup 0.107x
11, opt runtime 1.386s, model runtime 46.142s, pg runtime 1.386s, speedup 0.030x
12, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
13, opt runtime 2.593s, model runtime 11.947s, pg runtime 8.283s, speedup 0.693x
14, opt runtime 2.046s, model runtime 7.727s, pg runtime 5.879s, speedup 0.761x
15, opt runtime 1.737s, model runtime 7.353s, pg runtime 5.994s, speedup 0.815x
16, opt runtime 2.324s, model runtime 22.017s, pg runtime 10.605s, speedup 0.482x
17, opt runtime 3.248s, model runtime 15.195s, pg runtime 10.538s, speedup 0.694x
18, opt runtime 0.612s, model runtime 17.609s, pg runtime 1.357s, speedup 0.077x
19, opt runtime 0.189s, model runtime 8.037s, pg runtime 0.189s, speedup 0.024x
20, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
21, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
22, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
23, opt runtime 0.129s, model runtime 1.896s, pg runtime 0.129s, speedup 0.068x
24, opt runtime 0.348s, model runtime 22.966s, pg runtime 0.391s, speedup 0.017x
25, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
26, opt runtime 0.250s, model runtime 5.920s, pg runtime 0.250s, speedup 0.042x
27, opt runtime 0.278s, model runtime 6.001s, pg runtime 0.948s, speedup 0.158x
========== TPCH
01, opt runtime 18.392s, model runtime 57.953s, pg runtime 18.392s, speedup 0.317x
02, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
03, opt runtime 17.779s, model runtime 51.347s, pg runtime 17.779s, speedup 0.346x
04, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
05, opt runtime 14.857s, model runtime 96.106s, pg runtime 14.857s, speedup 0.155x
06, opt runtime 19.263s, model runtime 56.580s, pg runtime 19.263s, speedup 0.340x
07, opt runtime 15.831s, model runtime 47.554s, pg runtime 15.831s, speedup 0.333x
08, opt runtime 9.432s, model runtime 80.143s, pg runtime 9.432s, speedup 0.118x
09, opt runtime 26.874s, model runtime 57.821s, pg runtime 26.874s, speedup 0.465x
10, opt runtime 21.143s, model runtime 44.389s, pg runtime 21.143s, speedup 0.476x
11, opt runtime 7.237s, model runtime 119.588s, pg runtime 17.708s, speedup 0.148x
12, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
13, opt runtime 7.851s, model runtime 91.943s, pg runtime 13.622s, speedup 0.148x
14, opt runtime 7.442s, model runtime 128.345s, pg runtime 14.838s, speedup 0.116x
15, opt runtime 7.110s, model runtime 87.878s, pg runtime 14.286s, speedup 0.163x
16, opt runtime 6.810s, model runtime 136.064s, pg runtime 13.796s, speedup 0.101x
17, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
18, opt runtime 6.656s, model runtime 177.558s, pg runtime 15.260s, speedup 0.086x
19, opt runtime 7.913s, model runtime 131.024s, pg runtime 15.548s, speedup 0.119x
20, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
21, opt runtime 6.789s, model runtime 11.142s, pg runtime 7.799s, speedup 0.700x
22, opt runtime 7.096s, model runtime 10.477s, pg runtime 7.096s, speedup 0.677x
23, opt runtime 7.063s, model runtime 10.006s, pg runtime 7.063s, speedup 0.706x
24, opt runtime 7.268s, model runtime 10.574s, pg runtime 7.268s, speedup 0.687x
25, opt runtime 6.854s, model runtime 10.847s, pg runtime 6.854s, speedup 0.632x
26, opt runtime 6.905s, model runtime 10.527s, pg runtime 6.905s, speedup 0.656x
27, opt runtime 6.663s, model runtime 10.451s, pg runtime 6.663s, speedup 0.637x
28, opt runtime 7.199s, model runtime 10.848s, pg runtime 7.619s, speedup 0.702x
29, opt runtime 7.066s, model runtime 10.449s, pg runtime 7.533s, speedup 0.721x
30, opt runtime 6.961s, model runtime 10.511s, pg runtime 6.961s, speedup 0.662x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 55.250s, pg runtime 91.786s, speedup 1.661x
12, opt runtime 33.249s, model runtime 61.610s, pg runtime 103.551s, speedup 1.681x
13, opt runtime 33.759s, model runtime 63.571s, pg runtime 98.290s, speedup 1.546x
14, opt runtime 36.646s, model runtime 52.341s, pg runtime 98.171s, speedup 1.876x
15, opt runtime 32.482s, model runtime 54.278s, pg runtime 123.411s, speedup 2.274x
16, opt runtime 31.996s, model runtime 55.524s, pg runtime 120.854s, speedup 2.177x
17, opt runtime 30.778s, model runtime 53.160s, pg runtime 100.158s, speedup 1.884x
18, opt runtime 30.030s, model runtime 77.102s, pg runtime 85.930s, speedup 1.115x
19, opt runtime 28.776s, model runtime 66.441s, pg runtime 86.923s, speedup 1.308x
20, opt runtime 29.576s, model runtime 48.325s, pg runtime 113.059s, speedup 2.340x
21, opt runtime 10.669s, model runtime 59.523s, pg runtime 29.760s, speedup 0.500x
22, opt runtime 16.844s, model runtime 91.176s, pg runtime 27.164s, speedup 0.298x
23, opt runtime 20.708s, model runtime 47.541s, pg runtime 20.708s, speedup 0.436x
24, opt runtime 30.649s, model runtime 55.174s, pg runtime 30.649s, speedup 0.555x
25, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
26, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
27, opt runtime 28.312s, model runtime 49.880s, pg runtime 28.312s, speedup 0.568x
28, opt runtime 11.965s, model runtime 94.584s, pg runtime 11.965s, speedup 0.127x
29, opt runtime 21.883s, model runtime 70.905s, pg runtime 24.220s, speedup 0.342x
30, opt runtime 13.053s, model runtime 88.741s, pg runtime 13.053s, speedup 0.147x
31, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
32, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
33, opt runtime 3.020s, model runtime 126.890s, pg runtime 13.874s, speedup 0.109x
34, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
35, opt runtime 2.718s, model runtime 128.447s, pg runtime 12.519s, speedup 0.097x
36, opt runtime 2.748s, model runtime 130.366s, pg runtime 11.962s, speedup 0.092x
37, opt runtime 3.090s, model runtime 135.601s, pg runtime 14.431s, speedup 0.106x
38, opt runtime 3.079s, model runtime 99.885s, pg runtime 13.817s, speedup 0.138x
39, opt runtime 2.923s, model runtime 137.862s, pg runtime 13.811s, speedup 0.100x
40, opt runtime 2.833s, model runtime 131.802s, pg runtime 12.441s, speedup 0.094x
====================
JOB best validation speedup epoch: 2, train speedup 0.490, test speedup 0.294, val speedup 1.174
TPCH best validation speedup epoch: 2, train speedup 0.490, test speedup 2.388, val speedup 1.174
TPCH Skew best validation speedup epoch: 2, train speedup 0.490, test speedup 0.583, val speedup 1.174
execution cost 0:20:56.860501
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.936007, and there are 36890 training samples
in channel 9
JOB test speedup 0.2473480058453427
TPCH test speedup 0.7422125925259552
TPCH skew test speedup 0.5627681486405565
Epoch 0/50 |loss: 0.377954| train set 0.480x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 1, train time 24.90 s
JOB test speedup 0.30007661656454726
TPCH test speedup 0.7729551984909703
TPCH skew test speedup 0.5527565388872033
Epoch 1/50 |loss: 0.280077| train set 0.473x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 2, train time 23.61 s
JOB test speedup 0.24609262477070312
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 2/50 |loss: 0.247925| train set 0.485x speedup, test set 0.583x speedup, val set 0.240x speedup, step: 1, train time 23.40 s
JOB test speedup 0.23707176966901825
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5527565388872033
Epoch 3/50 |loss: 0.227770| train set 0.477x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 2, train time 23.44 s
JOB test speedup 0.18466925337005807
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 4/50 |loss: 0.210701| train set 0.470x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 3, train time 23.85 s
JOB test speedup 0.19746368509615894
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 5/50 |loss: 0.201340| train set 0.469x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 4, train time 23.42 s
JOB test speedup 0.1945703334081059
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5527565388872033
Epoch 6/50 |loss: 0.194775| train set 0.473x speedup, test set 0.553x speedup, val set 1.071x speedup, step: 1, train time 23.57 s
JOB test speedup 0.17260712676563297
TPCH test speedup 0.7146212470346025
TPCH skew test speedup 0.5834278637216542
Epoch 7/50 |loss: 0.186711| train set 0.474x speedup, test set 0.583x speedup, val set 0.237x speedup, step: 2, train time 23.59 s
JOB test speedup 0.1891996047869989
TPCH test speedup 0.7146212470346025
TPCH skew test speedup 0.5527565388872033
Epoch 8/50 |loss: 0.178912| train set 0.473x speedup, test set 0.553x speedup, val set 1.028x speedup, step: 3, train time 23.47 s
JOB test speedup 0.1943143368725467
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5527565388872033
Epoch 9/50 |loss: 0.173655| train set 0.476x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 4, train time 23.48 s
JOB test speedup 0.17882243086168298
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 10/50 |loss: 0.169328| train set 0.467x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 5, train time 23.67 s
JOB test speedup 0.1770854011008742
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 11/50 |loss: 0.165628| train set 0.472x speedup, test set 0.589x speedup, val set 0.236x speedup, step: 6, train time 23.33 s
JOB test speedup 0.17892579584619508
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5834278637216542
Epoch 12/50 |loss: 0.160973| train set 0.476x speedup, test set 0.583x speedup, val set 1.139x speedup, step: 1, train time 23.60 s
JOB test speedup 0.19628162028368742
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 13/50 |loss: 0.159475| train set 0.472x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 2, train time 23.67 s
JOB test speedup 0.19321600871052394
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5527565388872033
Epoch 14/50 |loss: 0.158687| train set 0.467x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 3, train time 23.67 s
JOB test speedup 0.22958955469221884
TPCH test speedup 0.7146212470346025
TPCH skew test speedup 0.5527565388872033
Epoch 15/50 |loss: 0.152409| train set 0.472x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 4, train time 24.30 s
JOB test speedup 0.16051966784538574
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 16/50 |loss: 0.148536| train set 0.474x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 5, train time 23.37 s
JOB test speedup 0.17520462671330791
TPCH test speedup 2.1685343563476405
TPCH skew test speedup 0.5527565388872033
Epoch 17/50 |loss: 0.149244| train set 0.465x speedup, test set 0.553x speedup, val set 0.235x speedup, step: 6, train time 23.47 s
JOB test speedup 0.17431120798697383
TPCH test speedup 0.7128407774694251
TPCH skew test speedup 0.5574286216062958
Epoch 18/50 |loss: 0.145105| train set 0.475x speedup, test set 0.557x speedup, val set 0.236x speedup, step: 7, train time 23.65 s
JOB test speedup 0.1838634287933504
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 19/50 |loss: 0.142399| train set 0.467x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 8, train time 23.61 s
JOB test speedup 0.19303327563948722
TPCH test speedup 0.7146212470346025
TPCH skew test speedup 0.5627681486405565
Epoch 20/50 |loss: 0.139332| train set 0.469x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 9, train time 23.62 s
JOB test speedup 0.1954456566374008
TPCH test speedup 0.7729551984909703
TPCH skew test speedup 0.5834278637216542
Epoch 21/50 |loss: 0.137893| train set 0.467x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 10, train time 23.66 s
JOB test speedup 0.19128786632947892
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 22/50 |loss: 0.134556| train set 0.466x speedup, test set 0.563x speedup, val set 0.235x speedup, step: 11, train time 23.68 s
JOB test speedup 0.1942501517069623
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 23/50 |loss: 0.136651| train set 0.465x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 12, train time 23.88 s
JOB test speedup 0.169097770948802
TPCH test speedup 0.7146212470346025
TPCH skew test speedup 0.5527565388872033
Epoch 24/50 |loss: 0.133683| train set 0.473x speedup, test set 0.553x speedup, val set 0.235x speedup, step: 13, train time 23.72 s
JOB test speedup 0.1981288834099465
TPCH test speedup 0.7695076554569024
TPCH skew test speedup 0.5527565388872033
Epoch 25/50 |loss: 0.130692| train set 0.467x speedup, test set 0.553x speedup, val set 0.235x speedup, step: 14, train time 23.91 s
JOB test speedup 0.19250897242100615
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 26/50 |loss: 0.128271| train set 0.471x speedup, test set 0.563x speedup, val set 0.235x speedup, step: 15, train time 23.74 s
JOB test speedup 0.18847226205947565
TPCH test speedup 2.1685343563476405
TPCH skew test speedup 0.5627681486405565
Epoch 27/50 |loss: 0.127975| train set 0.470x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 16, train time 23.82 s
JOB test speedup 0.19315356918899626
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5834278637216542
Epoch 28/50 |loss: 0.129575| train set 0.464x speedup, test set 0.583x speedup, val set 0.237x speedup, step: 17, train time 24.15 s
JOB test speedup 0.18633992535852387
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 29/50 |loss: 0.124594| train set 0.464x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 18, train time 23.98 s
JOB test speedup 0.19377842090379757
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5834278637216542
Epoch 30/50 |loss: 0.121294| train set 0.469x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 19, train time 23.90 s
JOB test speedup 0.18076548717868401
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 31/50 |loss: 0.121691| train set 0.468x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 20, train time 23.98 s
JOB test speedup 0.18018962335329744
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5834278637216542
Epoch 32/50 |loss: 0.120995| train set 0.468x speedup, test set 0.583x speedup, val set 0.235x speedup, step: 21, train time 23.89 s
JOB test speedup 0.1916064522058726
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 33/50 |loss: 0.119595| train set 0.464x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 22, train time 23.88 s
JOB test speedup 0.18683112099966515
TPCH test speedup 0.7146212470346025
TPCH skew test speedup 0.5627681486405565
Epoch 34/50 |loss: 0.116022| train set 0.469x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 23, train time 24.01 s
JOB test speedup 0.18560527270455796
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 35/50 |loss: 0.117437| train set 0.465x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 24, train time 24.31 s
JOB test speedup 0.1872320665850144
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 36/50 |loss: 0.118118| train set 0.465x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 25, train time 24.01 s
JOB test speedup 0.187726966046083
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 37/50 |loss: 0.113725| train set 0.468x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 26, train time 23.81 s
JOB test speedup 0.18216477333237413
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 38/50 |loss: 0.113422| train set 0.467x speedup, test set 0.563x speedup, val set 0.235x speedup, step: 27, train time 23.98 s
JOB test speedup 0.18340048958203953
TPCH test speedup 0.8631980075822291
TPCH skew test speedup 0.5627681486405565
Epoch 39/50 |loss: 0.112744| train set 0.465x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 28, train time 23.92 s
JOB test speedup 0.16869529473430753
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 40/50 |loss: 0.112118| train set 0.468x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 29, train time 23.90 s
JOB test speedup 0.16733844105965767
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 41/50 |loss: 0.108947| train set 0.468x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 30, train time 23.88 s
JOB test speedup 0.18349108078484444
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 42/50 |loss: 0.108695| train set 0.464x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 31, train time 23.82 s
JOB test speedup 0.18369332447956715
TPCH test speedup 0.7695076554569024
TPCH skew test speedup 0.5627681486405565
Epoch 43/50 |loss: 0.111202| train set 0.465x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 32, train time 23.97 s
JOB test speedup 0.18099705795853535
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 44/50 |loss: 0.105959| train set 0.468x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 33, train time 24.30 s
JOB test speedup 0.18139145604039883
TPCH test speedup 0.8631980075822291
TPCH skew test speedup 0.5627681486405565
Epoch 45/50 |loss: 0.107358| train set 0.465x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 34, train time 23.91 s
JOB test speedup 0.17090485118978335
TPCH test speedup 2.055995341602891
TPCH skew test speedup 0.5627681486405565
Epoch 46/50 |loss: 0.105670| train set 0.469x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 35, train time 23.97 s
JOB test speedup 0.16327028891901552
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 47/50 |loss: 0.109203| train set 0.466x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 36, train time 23.90 s
JOB test speedup 0.17152754433610795
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 48/50 |loss: 0.107930| train set 0.467x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 37, train time 24.00 s
JOB test speedup 0.16594852209433647
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 49/50 |loss: 0.102350| train set 0.468x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 38, train time 23.70 s
Training per epoch cost 23.806 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 7.526s, pg runtime 0.404s, speedup 0.054x
04, opt runtime 0.637s, model runtime 4.014s, pg runtime 0.637s, speedup 0.159x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.661s, model runtime 5.066s, pg runtime 0.661s, speedup 0.130x
07, opt runtime 1.437s, model runtime 48.127s, pg runtime 1.437s, speedup 0.030x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 4.223s, model runtime 37.578s, pg runtime 18.741s, speedup 0.499x
10, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
11, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
12, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
13, opt runtime 2.593s, model runtime 21.589s, pg runtime 8.283s, speedup 0.384x
14, opt runtime 2.046s, model runtime 36.795s, pg runtime 5.879s, speedup 0.160x
15, opt runtime 1.737s, model runtime 27.852s, pg runtime 5.994s, speedup 0.215x
16, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
17, opt runtime 3.248s, model runtime 25.801s, pg runtime 10.538s, speedup 0.408x
18, opt runtime 0.612s, model runtime 17.609s, pg runtime 1.357s, speedup 0.077x
19, opt runtime 0.189s, model runtime 8.037s, pg runtime 0.189s, speedup 0.024x
20, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
21, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
22, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
23, opt runtime 0.129s, model runtime 0.711s, pg runtime 0.129s, speedup 0.182x
24, opt runtime 0.348s, model runtime 12.974s, pg runtime 0.391s, speedup 0.030x
25, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
26, opt runtime 0.250s, model runtime 5.920s, pg runtime 0.250s, speedup 0.042x
27, opt runtime 0.278s, model runtime 6.001s, pg runtime 0.948s, speedup 0.158x
========== TPCH
01, opt runtime 18.392s, model runtime 69.318s, pg runtime 18.392s, speedup 0.265x
02, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
03, opt runtime 17.779s, model runtime 72.094s, pg runtime 17.779s, speedup 0.247x
04, opt runtime 25.597s, model runtime 68.287s, pg runtime 27.136s, speedup 0.397x
05, opt runtime 14.857s, model runtime 71.032s, pg runtime 14.857s, speedup 0.209x
06, opt runtime 19.263s, model runtime 63.266s, pg runtime 19.263s, speedup 0.304x
07, opt runtime 15.831s, model runtime 62.351s, pg runtime 15.831s, speedup 0.254x
08, opt runtime 9.432s, model runtime 69.839s, pg runtime 9.432s, speedup 0.135x
09, opt runtime 26.874s, model runtime 64.975s, pg runtime 26.874s, speedup 0.414x
10, opt runtime 21.143s, model runtime 66.875s, pg runtime 21.143s, speedup 0.316x
11, opt runtime 7.237s, model runtime 119.588s, pg runtime 17.708s, speedup 0.148x
12, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
13, opt runtime 7.851s, model runtime 91.943s, pg runtime 13.622s, speedup 0.148x
14, opt runtime 7.442s, model runtime 128.345s, pg runtime 14.838s, speedup 0.116x
15, opt runtime 7.110s, model runtime 87.878s, pg runtime 14.286s, speedup 0.163x
16, opt runtime 6.810s, model runtime 136.064s, pg runtime 13.796s, speedup 0.101x
17, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
18, opt runtime 6.656s, model runtime 177.558s, pg runtime 15.260s, speedup 0.086x
19, opt runtime 7.913s, model runtime 131.024s, pg runtime 15.548s, speedup 0.119x
20, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
21, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
22, opt runtime 7.096s, model runtime 7.177s, pg runtime 7.096s, speedup 0.989x
23, opt runtime 7.063s, model runtime 7.159s, pg runtime 7.063s, speedup 0.987x
24, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
25, opt runtime 6.854s, model runtime 7.066s, pg runtime 6.854s, speedup 0.970x
26, opt runtime 6.905s, model runtime 7.091s, pg runtime 6.905s, speedup 0.974x
27, opt runtime 6.663s, model runtime 7.015s, pg runtime 6.663s, speedup 0.950x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 7.066s, model runtime 7.355s, pg runtime 7.533s, speedup 1.024x
30, opt runtime 6.961s, model runtime 7.020s, pg runtime 6.961s, speedup 0.992x
31, opt runtime 16.268s, model runtime 562.147s, pg runtime 432.766s, speedup 0.770x
32, opt runtime 15.120s, model runtime 456.981s, pg runtime 566.078s, speedup 1.239x
33, opt runtime 16.639s, model runtime 700.825s, pg runtime 462.544s, speedup 0.660x
34, opt runtime 16.280s, model runtime 650.160s, pg runtime 634.990s, speedup 0.977x
35, opt runtime 16.528s, model runtime 641.666s, pg runtime 620.762s, speedup 0.967x
36, opt runtime 18.690s, model runtime 786.481s, pg runtime 651.942s, speedup 0.829x
37, opt runtime 16.438s, model runtime 516.443s, pg runtime 546.887s, speedup 1.059x
38, opt runtime 16.138s, model runtime 638.331s, pg runtime 501.793s, speedup 0.786x
39, opt runtime 16.770s, model runtime 600.737s, pg runtime 594.754s, speedup 0.990x
40, opt runtime 16.305s, model runtime 605.422s, pg runtime 436.168s, speedup 0.720x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 55.250s, pg runtime 91.786s, speedup 1.661x
12, opt runtime 33.249s, model runtime 61.610s, pg runtime 103.551s, speedup 1.681x
13, opt runtime 33.759s, model runtime 63.571s, pg runtime 98.290s, speedup 1.546x
14, opt runtime 36.646s, model runtime 52.341s, pg runtime 98.171s, speedup 1.876x
15, opt runtime 32.482s, model runtime 54.278s, pg runtime 123.411s, speedup 2.274x
16, opt runtime 31.996s, model runtime 55.524s, pg runtime 120.854s, speedup 2.177x
17, opt runtime 30.778s, model runtime 53.160s, pg runtime 100.158s, speedup 1.884x
18, opt runtime 30.030s, model runtime 77.102s, pg runtime 85.930s, speedup 1.115x
19, opt runtime 28.776s, model runtime 66.441s, pg runtime 86.923s, speedup 1.308x
20, opt runtime 29.576s, model runtime 48.325s, pg runtime 113.059s, speedup 2.340x
21, opt runtime 10.669s, model runtime 59.523s, pg runtime 29.760s, speedup 0.500x
22, opt runtime 16.844s, model runtime 91.176s, pg runtime 27.164s, speedup 0.298x
23, opt runtime 20.708s, model runtime 47.541s, pg runtime 20.708s, speedup 0.436x
24, opt runtime 30.649s, model runtime 55.174s, pg runtime 30.649s, speedup 0.555x
25, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
26, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
27, opt runtime 28.312s, model runtime 49.880s, pg runtime 28.312s, speedup 0.568x
28, opt runtime 11.965s, model runtime 94.584s, pg runtime 11.965s, speedup 0.127x
29, opt runtime 21.883s, model runtime 70.905s, pg runtime 24.220s, speedup 0.342x
30, opt runtime 13.053s, model runtime 88.741s, pg runtime 13.053s, speedup 0.147x
31, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
32, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
33, opt runtime 3.020s, model runtime 126.890s, pg runtime 13.874s, speedup 0.109x
34, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
35, opt runtime 2.718s, model runtime 128.447s, pg runtime 12.519s, speedup 0.097x
36, opt runtime 2.748s, model runtime 130.366s, pg runtime 11.962s, speedup 0.092x
37, opt runtime 3.090s, model runtime 135.601s, pg runtime 14.431s, speedup 0.106x
38, opt runtime 3.079s, model runtime 99.885s, pg runtime 13.817s, speedup 0.138x
39, opt runtime 2.923s, model runtime 137.862s, pg runtime 13.811s, speedup 0.100x
40, opt runtime 2.833s, model runtime 131.802s, pg runtime 12.441s, speedup 0.094x
====================
JOB best validation speedup epoch: 12, train speedup 0.476, test speedup 0.179, val speedup 1.139
TPCH best validation speedup epoch: 12, train speedup 0.476, test speedup 0.716, val speedup 1.139
TPCH Skew best validation speedup epoch: 12, train speedup 0.476, test speedup 0.583, val speedup 1.139
execution cost 0:21:00.308605
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:02.007567, and there are 36890 training samples
in channel 9
JOB test speedup 0.2735387314956143
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 0/50 |loss: 0.376935| train set 0.480x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 1, train time 24.62 s
JOB test speedup 0.20464331150515336
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 1/50 |loss: 0.279533| train set 0.475x speedup, test set 0.583x speedup, val set 0.264x speedup, step: 1, train time 23.20 s
JOB test speedup 0.2312349671079655
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 2/50 |loss: 0.247234| train set 0.488x speedup, test set 0.589x speedup, val set 0.288x speedup, step: 1, train time 23.71 s
JOB test speedup 0.15085697376934337
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 3/50 |loss: 0.226176| train set 0.477x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 2, train time 23.60 s
JOB test speedup 0.16822723783124283
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 4/50 |loss: 0.210412| train set 0.471x speedup, test set 0.563x speedup, val set 0.249x speedup, step: 3, train time 23.39 s
JOB test speedup 0.18418735005887352
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 5/50 |loss: 0.198354| train set 0.472x speedup, test set 0.583x speedup, val set 0.239x speedup, step: 4, train time 23.52 s
JOB test speedup 0.21305586710214816
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 6/50 |loss: 0.192315| train set 0.472x speedup, test set 0.583x speedup, val set 1.141x speedup, step: 1, train time 23.69 s
JOB test speedup 0.19606999253394525
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 7/50 |loss: 0.182126| train set 0.471x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 2, train time 23.59 s
JOB test speedup 0.2017020382701782
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 8/50 |loss: 0.174882| train set 0.478x speedup, test set 0.563x speedup, val set 1.119x speedup, step: 3, train time 23.81 s
JOB test speedup 0.20836641296647043
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 9/50 |loss: 0.169124| train set 0.474x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 4, train time 23.61 s
JOB test speedup 0.2001875864055302
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 10/50 |loss: 0.164871| train set 0.468x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 5, train time 23.86 s
JOB test speedup 0.18059338043327586
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.581209205362792
Epoch 11/50 |loss: 0.159985| train set 0.472x speedup, test set 0.581x speedup, val set 0.239x speedup, step: 6, train time 23.58 s
JOB test speedup 0.19470881932981768
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 12/50 |loss: 0.156765| train set 0.477x speedup, test set 0.589x speedup, val set 0.241x speedup, step: 7, train time 23.78 s
JOB test speedup 0.1944519692079082
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5834278637216542
Epoch 13/50 |loss: 0.152293| train set 0.470x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 8, train time 23.72 s
JOB test speedup 0.20370404787483684
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 14/50 |loss: 0.153324| train set 0.468x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 9, train time 23.97 s
JOB test speedup 0.2039475814875825
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 15/50 |loss: 0.146067| train set 0.471x speedup, test set 0.583x speedup, val set 0.239x speedup, step: 10, train time 24.53 s
JOB test speedup 0.18203562767666118
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 16/50 |loss: 0.143974| train set 0.471x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 11, train time 23.80 s
JOB test speedup 0.20950071730916578
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 17/50 |loss: 0.142397| train set 0.463x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 12, train time 23.93 s
JOB test speedup 0.17425312000251847
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5847622508253792
Epoch 18/50 |loss: 0.137235| train set 0.472x speedup, test set 0.585x speedup, val set 0.238x speedup, step: 13, train time 23.82 s
JOB test speedup 0.19967727906788174
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5527565388872033
Epoch 19/50 |loss: 0.137121| train set 0.464x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 14, train time 23.92 s
JOB test speedup 0.20426314688283195
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 20/50 |loss: 0.135454| train set 0.466x speedup, test set 0.583x speedup, val set 0.239x speedup, step: 15, train time 23.99 s
JOB test speedup 0.19915237839483438
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 21/50 |loss: 0.131859| train set 0.467x speedup, test set 0.583x speedup, val set 0.237x speedup, step: 16, train time 24.00 s
JOB test speedup 0.1949745754601072
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 22/50 |loss: 0.128981| train set 0.464x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 17, train time 23.89 s
JOB test speedup 0.17999591978712198
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5834278637216542
Epoch 23/50 |loss: 0.131414| train set 0.463x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 18, train time 24.07 s
JOB test speedup 0.1795581354007021
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 24/50 |loss: 0.128672| train set 0.465x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 19, train time 23.90 s
JOB test speedup 0.19429512877740077
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 25/50 |loss: 0.124929| train set 0.469x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 20, train time 23.98 s
JOB test speedup 0.1987993673961955
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 26/50 |loss: 0.124248| train set 0.475x speedup, test set 0.589x speedup, val set 0.236x speedup, step: 21, train time 23.97 s
JOB test speedup 0.1958283040289377
TPCH test speedup 2.530298924448547
TPCH skew test speedup 0.5834278637216542
Epoch 27/50 |loss: 0.122641| train set 0.468x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 22, train time 23.79 s
JOB test speedup 0.1946188350120124
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 28/50 |loss: 0.124115| train set 0.470x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 23, train time 23.87 s
JOB test speedup 0.18022361652986815
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 29/50 |loss: 0.120090| train set 0.469x speedup, test set 0.583x speedup, val set 0.239x speedup, step: 24, train time 24.01 s
JOB test speedup 0.19967727906788174
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 30/50 |loss: 0.117678| train set 0.471x speedup, test set 0.583x speedup, val set 0.239x speedup, step: 25, train time 24.01 s
JOB test speedup 0.19033633801077104
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 31/50 |loss: 0.117976| train set 0.475x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 26, train time 23.82 s
JOB test speedup 0.19269390381262072
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 32/50 |loss: 0.116418| train set 0.468x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 27, train time 23.82 s
JOB test speedup 0.18972421977741524
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5834278637216542
Epoch 33/50 |loss: 0.115820| train set 0.462x speedup, test set 0.583x speedup, val set 0.236x speedup, step: 28, train time 23.82 s
JOB test speedup 0.16921874293784525
TPCH test speedup 2.4261197782460915
TPCH skew test speedup 0.5834278637216542
Epoch 34/50 |loss: 0.113141| train set 0.468x speedup, test set 0.583x speedup, val set 0.240x speedup, step: 29, train time 23.88 s
JOB test speedup 0.19691325150217617
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 35/50 |loss: 0.114346| train set 0.463x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 30, train time 23.72 s
JOB test speedup 0.19274421968108427
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 36/50 |loss: 0.114622| train set 0.462x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 31, train time 23.97 s
JOB test speedup 0.1842124091509323
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 37/50 |loss: 0.113048| train set 0.467x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 32, train time 23.77 s
JOB test speedup 0.187874542586474
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 38/50 |loss: 0.111224| train set 0.468x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 33, train time 23.79 s
JOB test speedup 0.17680240379198453
TPCH test speedup 2.1685343563476405
TPCH skew test speedup 0.5627681486405565
Epoch 39/50 |loss: 0.110285| train set 0.467x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 34, train time 23.81 s
JOB test speedup 0.18610484798950214
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 40/50 |loss: 0.109084| train set 0.467x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 35, train time 23.97 s
JOB test speedup 0.19302884978595564
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5834278637216542
Epoch 41/50 |loss: 0.109112| train set 0.468x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 36, train time 24.60 s
JOB test speedup 0.1879532141595747
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 42/50 |loss: 0.106626| train set 0.464x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 37, train time 23.99 s
JOB test speedup 0.1878703501275611
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 43/50 |loss: 0.108457| train set 0.464x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 38, train time 23.96 s
JOB test speedup 0.19314189864736658
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 44/50 |loss: 0.105145| train set 0.468x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 39, train time 23.91 s
JOB test speedup 0.1847627792825497
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 45/50 |loss: 0.104322| train set 0.466x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 40, train time 23.80 s
JOB test speedup 0.18892507654068866
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 46/50 |loss: 0.106573| train set 0.468x speedup, test set 0.589x speedup, val set 0.238x speedup, step: 41, train time 23.88 s
JOB test speedup 0.1911655438987026
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5834278637216542
Epoch 47/50 |loss: 0.108173| train set 0.467x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 42, train time 23.91 s
JOB test speedup 0.17577939100369977
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5834278637216542
Epoch 48/50 |loss: 0.105112| train set 0.466x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 43, train time 24.07 s
JOB test speedup 0.1980007224766565
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 49/50 |loss: 0.102330| train set 0.468x speedup, test set 0.589x speedup, val set 0.239x speedup, step: 44, train time 23.88 s
Training per epoch cost 23.871 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 2.609s, pg runtime 0.189s, speedup 0.073x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 4.762s, pg runtime 0.404s, speedup 0.085x
04, opt runtime 0.637s, model runtime 4.014s, pg runtime 0.637s, speedup 0.159x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.661s, model runtime 5.066s, pg runtime 0.661s, speedup 0.130x
07, opt runtime 1.437s, model runtime 48.127s, pg runtime 1.437s, speedup 0.030x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 4.223s, model runtime 37.578s, pg runtime 18.741s, speedup 0.499x
10, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
11, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
12, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
13, opt runtime 2.593s, model runtime 11.947s, pg runtime 8.283s, speedup 0.693x
14, opt runtime 2.046s, model runtime 6.177s, pg runtime 5.879s, speedup 0.952x
15, opt runtime 1.737s, model runtime 5.445s, pg runtime 5.994s, speedup 1.101x
16, opt runtime 2.324s, model runtime 19.337s, pg runtime 10.605s, speedup 0.548x
17, opt runtime 3.248s, model runtime 19.559s, pg runtime 10.538s, speedup 0.539x
18, opt runtime 0.612s, model runtime 17.609s, pg runtime 1.357s, speedup 0.077x
19, opt runtime 0.189s, model runtime 8.037s, pg runtime 0.189s, speedup 0.024x
20, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
21, opt runtime 0.136s, model runtime 1.444s, pg runtime 0.137s, speedup 0.095x
22, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
23, opt runtime 0.129s, model runtime 0.711s, pg runtime 0.129s, speedup 0.182x
24, opt runtime 0.348s, model runtime 25.645s, pg runtime 0.391s, speedup 0.015x
25, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
26, opt runtime 0.250s, model runtime 5.920s, pg runtime 0.250s, speedup 0.042x
27, opt runtime 0.278s, model runtime 6.001s, pg runtime 0.948s, speedup 0.158x
========== TPCH
01, opt runtime 18.392s, model runtime 57.953s, pg runtime 18.392s, speedup 0.317x
02, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
03, opt runtime 17.779s, model runtime 51.347s, pg runtime 17.779s, speedup 0.346x
04, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
05, opt runtime 14.857s, model runtime 96.106s, pg runtime 14.857s, speedup 0.155x
06, opt runtime 19.263s, model runtime 56.580s, pg runtime 19.263s, speedup 0.340x
07, opt runtime 15.831s, model runtime 47.554s, pg runtime 15.831s, speedup 0.333x
08, opt runtime 9.432s, model runtime 80.143s, pg runtime 9.432s, speedup 0.118x
09, opt runtime 26.874s, model runtime 57.821s, pg runtime 26.874s, speedup 0.465x
10, opt runtime 21.143s, model runtime 44.389s, pg runtime 21.143s, speedup 0.476x
11, opt runtime 7.237s, model runtime 119.588s, pg runtime 17.708s, speedup 0.148x
12, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
13, opt runtime 7.851s, model runtime 91.943s, pg runtime 13.622s, speedup 0.148x
14, opt runtime 7.442s, model runtime 128.345s, pg runtime 14.838s, speedup 0.116x
15, opt runtime 7.110s, model runtime 87.878s, pg runtime 14.286s, speedup 0.163x
16, opt runtime 6.810s, model runtime 136.064s, pg runtime 13.796s, speedup 0.101x
17, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
18, opt runtime 6.656s, model runtime 177.558s, pg runtime 15.260s, speedup 0.086x
19, opt runtime 7.913s, model runtime 131.024s, pg runtime 15.548s, speedup 0.119x
20, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
21, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
22, opt runtime 7.096s, model runtime 7.177s, pg runtime 7.096s, speedup 0.989x
23, opt runtime 7.063s, model runtime 7.159s, pg runtime 7.063s, speedup 0.987x
24, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
25, opt runtime 6.854s, model runtime 7.066s, pg runtime 6.854s, speedup 0.970x
26, opt runtime 6.905s, model runtime 7.091s, pg runtime 6.905s, speedup 0.974x
27, opt runtime 6.663s, model runtime 7.015s, pg runtime 6.663s, speedup 0.950x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 7.066s, model runtime 7.355s, pg runtime 7.533s, speedup 1.024x
30, opt runtime 6.961s, model runtime 7.020s, pg runtime 6.961s, speedup 0.992x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 55.250s, pg runtime 91.786s, speedup 1.661x
12, opt runtime 33.249s, model runtime 61.610s, pg runtime 103.551s, speedup 1.681x
13, opt runtime 33.759s, model runtime 63.571s, pg runtime 98.290s, speedup 1.546x
14, opt runtime 36.646s, model runtime 52.341s, pg runtime 98.171s, speedup 1.876x
15, opt runtime 32.482s, model runtime 54.278s, pg runtime 123.411s, speedup 2.274x
16, opt runtime 31.996s, model runtime 55.524s, pg runtime 120.854s, speedup 2.177x
17, opt runtime 30.778s, model runtime 53.160s, pg runtime 100.158s, speedup 1.884x
18, opt runtime 30.030s, model runtime 77.102s, pg runtime 85.930s, speedup 1.115x
19, opt runtime 28.776s, model runtime 66.441s, pg runtime 86.923s, speedup 1.308x
20, opt runtime 29.576s, model runtime 48.325s, pg runtime 113.059s, speedup 2.340x
21, opt runtime 10.669s, model runtime 59.523s, pg runtime 29.760s, speedup 0.500x
22, opt runtime 16.844s, model runtime 91.176s, pg runtime 27.164s, speedup 0.298x
23, opt runtime 20.708s, model runtime 47.541s, pg runtime 20.708s, speedup 0.436x
24, opt runtime 30.649s, model runtime 55.174s, pg runtime 30.649s, speedup 0.555x
25, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
26, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
27, opt runtime 28.312s, model runtime 49.880s, pg runtime 28.312s, speedup 0.568x
28, opt runtime 11.965s, model runtime 94.584s, pg runtime 11.965s, speedup 0.127x
29, opt runtime 21.883s, model runtime 70.905s, pg runtime 24.220s, speedup 0.342x
30, opt runtime 13.053s, model runtime 88.741s, pg runtime 13.053s, speedup 0.147x
31, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
32, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
33, opt runtime 3.020s, model runtime 126.890s, pg runtime 13.874s, speedup 0.109x
34, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
35, opt runtime 2.718s, model runtime 128.447s, pg runtime 12.519s, speedup 0.097x
36, opt runtime 2.748s, model runtime 130.366s, pg runtime 11.962s, speedup 0.092x
37, opt runtime 3.090s, model runtime 135.601s, pg runtime 14.431s, speedup 0.106x
38, opt runtime 3.079s, model runtime 99.885s, pg runtime 13.817s, speedup 0.138x
39, opt runtime 2.923s, model runtime 137.862s, pg runtime 13.811s, speedup 0.100x
40, opt runtime 2.833s, model runtime 131.802s, pg runtime 12.441s, speedup 0.094x
====================
JOB best validation speedup epoch: 6, train speedup 0.472, test speedup 0.213, val speedup 1.141
TPCH best validation speedup epoch: 6, train speedup 0.472, test speedup 2.422, val speedup 1.141
TPCH Skew best validation speedup epoch: 6, train speedup 0.472, test speedup 0.583, val speedup 1.141
execution cost 0:21:04.054002
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:02.193730, and there are 36890 training samples
in channel 9
JOB test speedup 0.27790193749469166
TPCH test speedup 0.7422125925259552
TPCH skew test speedup 0.5627681486405565
Epoch 0/50 |loss: 0.376949| train set 0.482x speedup, test set 0.563x speedup, val set 1.097x speedup, step: 1, train time 24.58 s
JOB test speedup 0.23445089622045073
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5527565388872033
Epoch 1/50 |loss: 0.277361| train set 0.473x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 2, train time 23.20 s
JOB test speedup 0.19851154928116058
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 2/50 |loss: 0.248032| train set 0.488x speedup, test set 0.563x speedup, val set 1.111x speedup, step: 1, train time 23.47 s
JOB test speedup 0.21163872242142287
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 3/50 |loss: 0.225671| train set 0.476x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 2, train time 23.48 s
JOB test speedup 0.17509844895538756
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 4/50 |loss: 0.208184| train set 0.474x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 3, train time 23.60 s
JOB test speedup 0.21418635625342852
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 5/50 |loss: 0.198265| train set 0.471x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 4, train time 23.57 s
JOB test speedup 0.20023138834532891
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 6/50 |loss: 0.190523| train set 0.473x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 5, train time 23.57 s
JOB test speedup 0.18795642282789468
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 7/50 |loss: 0.181176| train set 0.469x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 6, train time 23.70 s
JOB test speedup 0.207624339979934
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 8/50 |loss: 0.174532| train set 0.481x speedup, test set 0.563x speedup, val set 1.096x speedup, step: 7, train time 23.87 s
JOB test speedup 0.20192959357066204
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 9/50 |loss: 0.169930| train set 0.477x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 8, train time 24.00 s
JOB test speedup 0.2000913504744287
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 10/50 |loss: 0.164558| train set 0.471x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 9, train time 24.09 s
JOB test speedup 0.19768949693725013
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 11/50 |loss: 0.159465| train set 0.468x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 10, train time 23.91 s
JOB test speedup 0.22252002064095974
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 12/50 |loss: 0.157025| train set 0.479x speedup, test set 0.563x speedup, val set 0.243x speedup, step: 11, train time 24.09 s
JOB test speedup 0.16387529712765672
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 13/50 |loss: 0.154550| train set 0.469x speedup, test set 0.563x speedup, val set 0.260x speedup, step: 12, train time 23.90 s
JOB test speedup 0.19379842018889185
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 14/50 |loss: 0.154193| train set 0.468x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 13, train time 24.21 s
JOB test speedup 0.19260608229054518
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 15/50 |loss: 0.148372| train set 0.471x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 14, train time 24.78 s
JOB test speedup 0.15791316001941447
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 16/50 |loss: 0.145724| train set 0.468x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 15, train time 23.99 s
JOB test speedup 0.17300648255169532
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 17/50 |loss: 0.143613| train set 0.463x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 16, train time 24.17 s
JOB test speedup 0.17079949319847287
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 18/50 |loss: 0.139726| train set 0.472x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 17, train time 24.05 s
JOB test speedup 0.18891067371152637
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 19/50 |loss: 0.138472| train set 0.463x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 18, train time 24.05 s
JOB test speedup 0.1764618343673348
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 20/50 |loss: 0.133459| train set 0.465x speedup, test set 0.563x speedup, val set 0.282x speedup, step: 19, train time 24.19 s
JOB test speedup 0.19632024779246102
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 21/50 |loss: 0.134434| train set 0.467x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 20, train time 24.11 s
JOB test speedup 0.16795951978814247
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 22/50 |loss: 0.128467| train set 0.464x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 21, train time 24.27 s
JOB test speedup 0.19177667506774168
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 23/50 |loss: 0.133252| train set 0.468x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 22, train time 24.07 s
JOB test speedup 0.1741754668483424
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 24/50 |loss: 0.130064| train set 0.466x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 23, train time 23.91 s
JOB test speedup 0.1741754668483424
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 25/50 |loss: 0.127015| train set 0.465x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 24, train time 24.01 s
JOB test speedup 0.19221602154704268
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 26/50 |loss: 0.125509| train set 0.470x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 25, train time 24.12 s
JOB test speedup 0.17660892419437746
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 27/50 |loss: 0.124280| train set 0.471x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 26, train time 24.01 s
JOB test speedup 0.19475434298188476
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 28/50 |loss: 0.125214| train set 0.465x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 27, train time 24.02 s
JOB test speedup 0.1711478946216997
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 29/50 |loss: 0.120463| train set 0.464x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 28, train time 23.97 s
JOB test speedup 0.19416371712269775
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 30/50 |loss: 0.118238| train set 0.469x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 29, train time 24.10 s
JOB test speedup 0.18933697211496234
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 31/50 |loss: 0.118942| train set 0.473x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 30, train time 24.08 s
JOB test speedup 0.18891067371152637
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 32/50 |loss: 0.117005| train set 0.473x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 31, train time 24.22 s
JOB test speedup 0.19177667506774168
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 33/50 |loss: 0.116433| train set 0.466x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 32, train time 23.99 s
JOB test speedup 0.1741042083969091
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 34/50 |loss: 0.113060| train set 0.467x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 33, train time 24.09 s
JOB test speedup 0.1741754668483424
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 35/50 |loss: 0.114733| train set 0.465x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 34, train time 24.08 s
JOB test speedup 0.17497588250668372
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 36/50 |loss: 0.115290| train set 0.465x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 35, train time 24.07 s
JOB test speedup 0.19369654444926793
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 37/50 |loss: 0.114496| train set 0.467x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 36, train time 24.08 s
JOB test speedup 0.17223263665803504
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 38/50 |loss: 0.109921| train set 0.468x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 37, train time 24.09 s
JOB test speedup 0.17715051665844506
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 39/50 |loss: 0.111431| train set 0.469x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 38, train time 23.87 s
JOB test speedup 0.1707878347886469
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 40/50 |loss: 0.110084| train set 0.468x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 39, train time 24.17 s
JOB test speedup 0.1778137218192428
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 41/50 |loss: 0.107717| train set 0.469x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 40, train time 23.92 s
JOB test speedup 0.1726569370033748
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 42/50 |loss: 0.107126| train set 0.464x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 41, train time 24.25 s
JOB test speedup 0.1725869154039067
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 43/50 |loss: 0.109944| train set 0.465x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 42, train time 24.12 s
JOB test speedup 0.16917226228665688
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 44/50 |loss: 0.103699| train set 0.468x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 43, train time 24.31 s
JOB test speedup 0.18717392194467916
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 45/50 |loss: 0.108656| train set 0.465x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 44, train time 24.09 s
JOB test speedup 0.18298632236458398
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 46/50 |loss: 0.106370| train set 0.469x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 45, train time 24.11 s
JOB test speedup 0.16792003002565878
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 47/50 |loss: 0.109130| train set 0.468x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 46, train time 23.91 s
JOB test speedup 0.17020931001355885
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 48/50 |loss: 0.105470| train set 0.466x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 47, train time 23.94 s
JOB test speedup 0.1725869154039067
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 49/50 |loss: 0.102560| train set 0.468x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 48, train time 24.28 s
Training per epoch cost 24.015 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 5.505s, pg runtime 0.189s, speedup 0.034x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 7.526s, pg runtime 0.404s, speedup 0.054x
04, opt runtime 0.637s, model runtime 4.014s, pg runtime 0.637s, speedup 0.159x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.661s, model runtime 5.066s, pg runtime 0.661s, speedup 0.130x
07, opt runtime 1.437s, model runtime 48.127s, pg runtime 1.437s, speedup 0.030x
08, opt runtime 0.206s, model runtime 19.941s, pg runtime 0.206s, speedup 0.010x
09, opt runtime 4.223s, model runtime 37.578s, pg runtime 18.741s, speedup 0.499x
10, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
11, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
12, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
13, opt runtime 2.593s, model runtime 25.213s, pg runtime 8.283s, speedup 0.329x
14, opt runtime 2.046s, model runtime 6.177s, pg runtime 5.879s, speedup 0.952x
15, opt runtime 1.737s, model runtime 5.445s, pg runtime 5.994s, speedup 1.101x
16, opt runtime 2.324s, model runtime 22.017s, pg runtime 10.605s, speedup 0.482x
17, opt runtime 3.248s, model runtime 15.195s, pg runtime 10.538s, speedup 0.694x
18, opt runtime 0.612s, model runtime 17.609s, pg runtime 1.357s, speedup 0.077x
19, opt runtime 0.189s, model runtime 8.037s, pg runtime 0.189s, speedup 0.024x
20, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
21, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
22, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
23, opt runtime 0.129s, model runtime 0.711s, pg runtime 0.129s, speedup 0.182x
24, opt runtime 0.348s, model runtime 22.966s, pg runtime 0.391s, speedup 0.017x
25, opt runtime 2.755s, model runtime 17.369s, pg runtime 5.521s, speedup 0.318x
26, opt runtime 0.250s, model runtime 5.920s, pg runtime 0.250s, speedup 0.042x
27, opt runtime 0.278s, model runtime 6.001s, pg runtime 0.948s, speedup 0.158x
========== TPCH
01, opt runtime 18.392s, model runtime 57.953s, pg runtime 18.392s, speedup 0.317x
02, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
03, opt runtime 17.779s, model runtime 51.347s, pg runtime 17.779s, speedup 0.346x
04, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
05, opt runtime 14.857s, model runtime 96.106s, pg runtime 14.857s, speedup 0.155x
06, opt runtime 19.263s, model runtime 56.580s, pg runtime 19.263s, speedup 0.340x
07, opt runtime 15.831s, model runtime 47.554s, pg runtime 15.831s, speedup 0.333x
08, opt runtime 9.432s, model runtime 80.143s, pg runtime 9.432s, speedup 0.118x
09, opt runtime 26.874s, model runtime 57.821s, pg runtime 26.874s, speedup 0.465x
10, opt runtime 21.143s, model runtime 44.389s, pg runtime 21.143s, speedup 0.476x
11, opt runtime 7.237s, model runtime 119.588s, pg runtime 17.708s, speedup 0.148x
12, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
13, opt runtime 7.851s, model runtime 91.943s, pg runtime 13.622s, speedup 0.148x
14, opt runtime 7.442s, model runtime 128.345s, pg runtime 14.838s, speedup 0.116x
15, opt runtime 7.110s, model runtime 87.878s, pg runtime 14.286s, speedup 0.163x
16, opt runtime 6.810s, model runtime 136.064s, pg runtime 13.796s, speedup 0.101x
17, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
18, opt runtime 6.656s, model runtime 177.558s, pg runtime 15.260s, speedup 0.086x
19, opt runtime 7.913s, model runtime 131.024s, pg runtime 15.548s, speedup 0.119x
20, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
21, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
22, opt runtime 7.096s, model runtime 7.177s, pg runtime 7.096s, speedup 0.989x
23, opt runtime 7.063s, model runtime 7.159s, pg runtime 7.063s, speedup 0.987x
24, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
25, opt runtime 6.854s, model runtime 7.066s, pg runtime 6.854s, speedup 0.970x
26, opt runtime 6.905s, model runtime 7.091s, pg runtime 6.905s, speedup 0.974x
27, opt runtime 6.663s, model runtime 7.015s, pg runtime 6.663s, speedup 0.950x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 7.066s, model runtime 7.355s, pg runtime 7.533s, speedup 1.024x
30, opt runtime 6.961s, model runtime 7.020s, pg runtime 6.961s, speedup 0.992x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 67.790s, pg runtime 91.786s, speedup 1.354x
12, opt runtime 33.249s, model runtime 71.275s, pg runtime 103.551s, speedup 1.453x
13, opt runtime 33.759s, model runtime 70.794s, pg runtime 98.290s, speedup 1.388x
14, opt runtime 36.646s, model runtime 66.614s, pg runtime 98.171s, speedup 1.474x
15, opt runtime 32.482s, model runtime 72.642s, pg runtime 123.411s, speedup 1.699x
16, opt runtime 31.996s, model runtime 66.753s, pg runtime 120.854s, speedup 1.810x
17, opt runtime 30.778s, model runtime 68.265s, pg runtime 100.158s, speedup 1.467x
18, opt runtime 30.030s, model runtime 67.656s, pg runtime 85.930s, speedup 1.270x
19, opt runtime 28.776s, model runtime 70.439s, pg runtime 86.923s, speedup 1.234x
20, opt runtime 29.576s, model runtime 71.065s, pg runtime 113.059s, speedup 1.591x
21, opt runtime 10.669s, model runtime 59.523s, pg runtime 29.760s, speedup 0.500x
22, opt runtime 16.844s, model runtime 91.176s, pg runtime 27.164s, speedup 0.298x
23, opt runtime 20.708s, model runtime 47.541s, pg runtime 20.708s, speedup 0.436x
24, opt runtime 30.649s, model runtime 55.174s, pg runtime 30.649s, speedup 0.555x
25, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
26, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
27, opt runtime 28.312s, model runtime 49.880s, pg runtime 28.312s, speedup 0.568x
28, opt runtime 11.965s, model runtime 94.584s, pg runtime 11.965s, speedup 0.127x
29, opt runtime 21.883s, model runtime 70.905s, pg runtime 24.220s, speedup 0.342x
30, opt runtime 13.053s, model runtime 88.741s, pg runtime 13.053s, speedup 0.147x
31, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
32, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
33, opt runtime 3.020s, model runtime 126.890s, pg runtime 13.874s, speedup 0.109x
34, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
35, opt runtime 2.718s, model runtime 128.447s, pg runtime 12.519s, speedup 0.097x
36, opt runtime 2.748s, model runtime 130.366s, pg runtime 11.962s, speedup 0.092x
37, opt runtime 3.090s, model runtime 135.601s, pg runtime 14.431s, speedup 0.106x
38, opt runtime 3.079s, model runtime 99.885s, pg runtime 13.817s, speedup 0.138x
39, opt runtime 2.923s, model runtime 137.862s, pg runtime 13.811s, speedup 0.100x
40, opt runtime 2.833s, model runtime 131.802s, pg runtime 12.441s, speedup 0.094x
====================
JOB best validation speedup epoch: 2, train speedup 0.488, test speedup 0.199, val speedup 1.111
TPCH best validation speedup epoch: 2, train speedup 0.488, test speedup 2.422, val speedup 1.111
TPCH Skew best validation speedup epoch: 2, train speedup 0.488, test speedup 0.563, val speedup 1.111
execution cost 0:21:14.978898
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.962959, and there are 36890 training samples
in channel 9
JOB test speedup 0.2679185084021954
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 0/50 |loss: 0.375008| train set 0.479x speedup, test set 0.563x speedup, val set 0.265x speedup, step: 1, train time 24.58 s
JOB test speedup 0.24897901473882375
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 1/50 |loss: 0.274646| train set 0.474x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 2, train time 23.42 s
JOB test speedup 0.23191025762217327
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 2/50 |loss: 0.245883| train set 0.484x speedup, test set 0.553x speedup, val set 0.237x speedup, step: 3, train time 23.37 s
JOB test speedup 0.19609637017460224
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 3/50 |loss: 0.226059| train set 0.480x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 4, train time 23.52 s
JOB test speedup 0.18261812599514185
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 4/50 |loss: 0.210336| train set 0.473x speedup, test set 0.563x speedup, val set 0.257x speedup, step: 5, train time 23.57 s
JOB test speedup 0.19445849730605055
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 5/50 |loss: 0.198383| train set 0.472x speedup, test set 0.583x speedup, val set 0.241x speedup, step: 6, train time 23.61 s
JOB test speedup 0.19605469667408787
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5527565388872033
Epoch 6/50 |loss: 0.193372| train set 0.473x speedup, test set 0.553x speedup, val set 0.242x speedup, step: 7, train time 23.60 s
JOB test speedup 0.19554556205148718
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 7/50 |loss: 0.188171| train set 0.491x speedup, test set 0.563x speedup, val set 0.237x speedup, step: 8, train time 23.42 s
JOB test speedup 0.19167066767359353
TPCH test speedup 0.7146212470346025
TPCH skew test speedup 0.5627681486405565
Epoch 8/50 |loss: 0.180308| train set 0.473x speedup, test set 0.563x speedup, val set 0.264x speedup, step: 9, train time 23.69 s
JOB test speedup 0.20025003176484024
TPCH test speedup 2.3882394091713204
TPCH skew test speedup 0.5627681486405565
Epoch 9/50 |loss: 0.174278| train set 0.478x speedup, test set 0.563x speedup, val set 0.236x speedup, step: 10, train time 23.49 s
JOB test speedup 0.16679194195471286
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 10/50 |loss: 0.169539| train set 0.466x speedup, test set 0.553x speedup, val set 0.236x speedup, step: 11, train time 23.58 s
JOB test speedup 0.15791316001941447
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 11/50 |loss: 0.164812| train set 0.470x speedup, test set 0.563x speedup, val set 0.241x speedup, step: 12, train time 23.48 s
JOB test speedup 0.1596594680947498
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5676117484757536
Epoch 12/50 |loss: 0.163125| train set 0.478x speedup, test set 0.568x speedup, val set 0.264x speedup, step: 13, train time 23.58 s
JOB test speedup 0.17178801743479233
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 13/50 |loss: 0.159990| train set 0.472x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 14, train time 23.41 s
JOB test speedup 0.18182783597957455
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 14/50 |loss: 0.157053| train set 0.470x speedup, test set 0.563x speedup, val set 0.249x speedup, step: 15, train time 23.61 s
JOB test speedup 0.20462387007287514
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 15/50 |loss: 0.154365| train set 0.472x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 16, train time 24.20 s
JOB test speedup 0.17731472457766506
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 16/50 |loss: 0.149605| train set 0.469x speedup, test set 0.563x speedup, val set 0.264x speedup, step: 17, train time 23.66 s
JOB test speedup 0.17769024206170436
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 17/50 |loss: 0.146873| train set 0.467x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 18, train time 23.67 s
JOB test speedup 0.17948633338873834
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5676117484757536
Epoch 18/50 |loss: 0.144040| train set 0.475x speedup, test set 0.568x speedup, val set 0.264x speedup, step: 19, train time 23.72 s
JOB test speedup 0.19269831431971474
TPCH test speedup 0.7729551984909703
TPCH skew test speedup 0.5527565388872033
Epoch 19/50 |loss: 0.142035| train set 0.467x speedup, test set 0.553x speedup, val set 0.261x speedup, step: 20, train time 23.71 s
JOB test speedup 0.20275261203395378
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 20/50 |loss: 0.137179| train set 0.466x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 21, train time 23.67 s
JOB test speedup 0.19737647663797317
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 21/50 |loss: 0.136876| train set 0.467x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 22, train time 23.80 s
JOB test speedup 0.17731472457766506
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 22/50 |loss: 0.132480| train set 0.466x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 23, train time 23.71 s
JOB test speedup 0.17948633338873834
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 23/50 |loss: 0.134981| train set 0.471x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 24, train time 23.87 s
JOB test speedup 0.18246751219076107
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 24/50 |loss: 0.131362| train set 0.471x speedup, test set 0.563x speedup, val set 0.264x speedup, step: 25, train time 23.81 s
JOB test speedup 0.18246751219076107
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 25/50 |loss: 0.128220| train set 0.467x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 26, train time 23.89 s
JOB test speedup 0.2066374212689202
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 26/50 |loss: 0.126543| train set 0.472x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 27, train time 23.71 s
JOB test speedup 0.17660892419437746
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 27/50 |loss: 0.127212| train set 0.469x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 28, train time 23.78 s
JOB test speedup 0.19415272783423926
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 28/50 |loss: 0.126466| train set 0.465x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 29, train time 23.88 s
JOB test speedup 0.18246751219076107
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 29/50 |loss: 0.121503| train set 0.464x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 30, train time 23.88 s
JOB test speedup 0.20612976300636995
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 30/50 |loss: 0.119273| train set 0.470x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 31, train time 23.81 s
JOB test speedup 0.20200081370089037
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 31/50 |loss: 0.121291| train set 0.468x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 32, train time 23.89 s
JOB test speedup 0.19718126746130893
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 32/50 |loss: 0.119768| train set 0.471x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 33, train time 23.91 s
JOB test speedup 0.19375638393284617
TPCH test speedup 0.7729551984909703
TPCH skew test speedup 0.5527565388872033
Epoch 33/50 |loss: 0.118396| train set 0.462x speedup, test set 0.553x speedup, val set 0.260x speedup, step: 34, train time 23.91 s
JOB test speedup 0.2032885382926553
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 34/50 |loss: 0.115623| train set 0.469x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 35, train time 23.88 s
JOB test speedup 0.18246751219076107
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 35/50 |loss: 0.115119| train set 0.466x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 36, train time 23.81 s
JOB test speedup 0.18246751219076107
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 36/50 |loss: 0.116441| train set 0.463x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 37, train time 23.90 s
JOB test speedup 0.2032885382926553
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 37/50 |loss: 0.114701| train set 0.468x speedup, test set 0.563x speedup, val set 0.260x speedup, step: 38, train time 23.71 s
JOB test speedup 0.2032885382926553
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 38/50 |loss: 0.111971| train set 0.468x speedup, test set 0.563x speedup, val set 0.260x speedup, step: 39, train time 23.90 s
JOB test speedup 0.18246751219076107
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5527565388872033
Epoch 39/50 |loss: 0.112110| train set 0.468x speedup, test set 0.553x speedup, val set 0.260x speedup, step: 40, train time 23.78 s
JOB test speedup 0.19044057852187574
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 40/50 |loss: 0.111144| train set 0.467x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 41, train time 24.00 s
JOB test speedup 0.18246751219076107
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 41/50 |loss: 0.109392| train set 0.463x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 42, train time 23.90 s
JOB test speedup 0.2032885382926553
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 42/50 |loss: 0.108829| train set 0.464x speedup, test set 0.563x speedup, val set 0.261x speedup, step: 43, train time 23.99 s
JOB test speedup 0.17790845486298396
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5527565388872033
Epoch 43/50 |loss: 0.109990| train set 0.463x speedup, test set 0.553x speedup, val set 0.261x speedup, step: 44, train time 23.80 s
JOB test speedup 0.16939441708089728
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 44/50 |loss: 0.105674| train set 0.468x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 45, train time 23.99 s
JOB test speedup 0.2032885382926553
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 45/50 |loss: 0.107767| train set 0.466x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 46, train time 23.78 s
JOB test speedup 0.18246751219076107
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5572353388047638
Epoch 46/50 |loss: 0.107084| train set 0.469x speedup, test set 0.557x speedup, val set 0.260x speedup, step: 47, train time 23.80 s
JOB test speedup 0.18246751219076107
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 47/50 |loss: 0.108736| train set 0.467x speedup, test set 0.563x speedup, val set 0.264x speedup, step: 48, train time 23.96 s
JOB test speedup 0.18246751219076107
TPCH test speedup 0.7251657736420027
TPCH skew test speedup 0.5627681486405565
Epoch 48/50 |loss: 0.107404| train set 0.466x speedup, test set 0.563x speedup, val set 0.263x speedup, step: 49, train time 23.90 s
JOB test speedup 0.2066374212689202
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 49/50 |loss: 0.104059| train set 0.468x speedup, test set 0.563x speedup, val set 0.264x speedup, step: 50, train time 23.89 s
Training per epoch cost 23.768 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 13.827s, pg runtime 0.189s, speedup 0.014x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.399s, model runtime 4.762s, pg runtime 0.404s, speedup 0.085x
04, opt runtime 0.637s, model runtime 4.014s, pg runtime 0.637s, speedup 0.159x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.661s, model runtime 5.066s, pg runtime 0.661s, speedup 0.130x
07, opt runtime 1.437s, model runtime 48.127s, pg runtime 1.437s, speedup 0.030x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 4.223s, model runtime 40.861s, pg runtime 18.741s, speedup 0.459x
10, opt runtime 1.763s, model runtime 6.887s, pg runtime 1.763s, speedup 0.256x
11, opt runtime 1.386s, model runtime 5.536s, pg runtime 1.386s, speedup 0.250x
12, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
13, opt runtime 2.593s, model runtime 11.947s, pg runtime 8.283s, speedup 0.693x
14, opt runtime 2.046s, model runtime 11.467s, pg runtime 5.879s, speedup 0.513x
15, opt runtime 1.737s, model runtime 6.227s, pg runtime 5.994s, speedup 0.963x
16, opt runtime 2.324s, model runtime 19.337s, pg runtime 10.605s, speedup 0.548x
17, opt runtime 3.248s, model runtime 19.559s, pg runtime 10.538s, speedup 0.539x
18, opt runtime 0.612s, model runtime 17.609s, pg runtime 1.357s, speedup 0.077x
19, opt runtime 0.189s, model runtime 5.391s, pg runtime 0.189s, speedup 0.035x
20, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
21, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
22, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
23, opt runtime 0.129s, model runtime 0.711s, pg runtime 0.129s, speedup 0.182x
24, opt runtime 0.348s, model runtime 22.966s, pg runtime 0.391s, speedup 0.017x
25, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
26, opt runtime 0.250s, model runtime 5.920s, pg runtime 0.250s, speedup 0.042x
27, opt runtime 0.278s, model runtime 6.001s, pg runtime 0.948s, speedup 0.158x
========== TPCH
01, opt runtime 18.392s, model runtime 57.953s, pg runtime 18.392s, speedup 0.317x
02, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
03, opt runtime 17.779s, model runtime 51.347s, pg runtime 17.779s, speedup 0.346x
04, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
05, opt runtime 14.857s, model runtime 96.106s, pg runtime 14.857s, speedup 0.155x
06, opt runtime 19.263s, model runtime 56.580s, pg runtime 19.263s, speedup 0.340x
07, opt runtime 15.831s, model runtime 47.554s, pg runtime 15.831s, speedup 0.333x
08, opt runtime 9.432s, model runtime 80.143s, pg runtime 9.432s, speedup 0.118x
09, opt runtime 26.874s, model runtime 57.821s, pg runtime 26.874s, speedup 0.465x
10, opt runtime 21.143s, model runtime 44.389s, pg runtime 21.143s, speedup 0.476x
11, opt runtime 7.237s, model runtime 119.588s, pg runtime 17.708s, speedup 0.148x
12, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
13, opt runtime 7.851s, model runtime 91.943s, pg runtime 13.622s, speedup 0.148x
14, opt runtime 7.442s, model runtime 128.345s, pg runtime 14.838s, speedup 0.116x
15, opt runtime 7.110s, model runtime 87.878s, pg runtime 14.286s, speedup 0.163x
16, opt runtime 6.810s, model runtime 136.064s, pg runtime 13.796s, speedup 0.101x
17, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
18, opt runtime 6.656s, model runtime 177.558s, pg runtime 15.260s, speedup 0.086x
19, opt runtime 7.913s, model runtime 131.024s, pg runtime 15.548s, speedup 0.119x
20, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
21, opt runtime 6.789s, model runtime 11.142s, pg runtime 7.799s, speedup 0.700x
22, opt runtime 7.096s, model runtime 10.477s, pg runtime 7.096s, speedup 0.677x
23, opt runtime 7.063s, model runtime 10.006s, pg runtime 7.063s, speedup 0.706x
24, opt runtime 7.268s, model runtime 10.574s, pg runtime 7.268s, speedup 0.687x
25, opt runtime 6.854s, model runtime 10.847s, pg runtime 6.854s, speedup 0.632x
26, opt runtime 6.905s, model runtime 10.527s, pg runtime 6.905s, speedup 0.656x
27, opt runtime 6.663s, model runtime 10.451s, pg runtime 6.663s, speedup 0.637x
28, opt runtime 7.199s, model runtime 10.848s, pg runtime 7.619s, speedup 0.702x
29, opt runtime 7.066s, model runtime 10.449s, pg runtime 7.533s, speedup 0.721x
30, opt runtime 6.961s, model runtime 10.511s, pg runtime 6.961s, speedup 0.662x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 67.790s, pg runtime 91.786s, speedup 1.354x
12, opt runtime 33.249s, model runtime 71.275s, pg runtime 103.551s, speedup 1.453x
13, opt runtime 33.759s, model runtime 70.794s, pg runtime 98.290s, speedup 1.388x
14, opt runtime 36.646s, model runtime 66.614s, pg runtime 98.171s, speedup 1.474x
15, opt runtime 32.482s, model runtime 72.642s, pg runtime 123.411s, speedup 1.699x
16, opt runtime 31.996s, model runtime 66.753s, pg runtime 120.854s, speedup 1.810x
17, opt runtime 30.778s, model runtime 68.265s, pg runtime 100.158s, speedup 1.467x
18, opt runtime 30.030s, model runtime 67.656s, pg runtime 85.930s, speedup 1.270x
19, opt runtime 28.776s, model runtime 70.439s, pg runtime 86.923s, speedup 1.234x
20, opt runtime 29.576s, model runtime 71.065s, pg runtime 113.059s, speedup 1.591x
21, opt runtime 10.669s, model runtime 59.523s, pg runtime 29.760s, speedup 0.500x
22, opt runtime 16.844s, model runtime 91.176s, pg runtime 27.164s, speedup 0.298x
23, opt runtime 20.708s, model runtime 47.541s, pg runtime 20.708s, speedup 0.436x
24, opt runtime 30.649s, model runtime 55.174s, pg runtime 30.649s, speedup 0.555x
25, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
26, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
27, opt runtime 28.312s, model runtime 49.880s, pg runtime 28.312s, speedup 0.568x
28, opt runtime 11.965s, model runtime 94.584s, pg runtime 11.965s, speedup 0.127x
29, opt runtime 21.883s, model runtime 70.905s, pg runtime 24.220s, speedup 0.342x
30, opt runtime 13.053s, model runtime 88.741s, pg runtime 13.053s, speedup 0.147x
31, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
32, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
33, opt runtime 3.020s, model runtime 126.890s, pg runtime 13.874s, speedup 0.109x
34, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
35, opt runtime 2.718s, model runtime 128.447s, pg runtime 12.519s, speedup 0.097x
36, opt runtime 2.748s, model runtime 130.366s, pg runtime 11.962s, speedup 0.092x
37, opt runtime 3.090s, model runtime 135.601s, pg runtime 14.431s, speedup 0.106x
38, opt runtime 3.079s, model runtime 99.885s, pg runtime 13.817s, speedup 0.138x
39, opt runtime 2.923s, model runtime 137.862s, pg runtime 13.811s, speedup 0.100x
40, opt runtime 2.833s, model runtime 131.802s, pg runtime 12.441s, speedup 0.094x
====================
JOB best validation speedup epoch: 0, train speedup 0.479, test speedup 0.268, val speedup 0.265
TPCH best validation speedup epoch: 0, train speedup 0.479, test speedup 2.388, val speedup 0.265
TPCH Skew best validation speedup epoch: 0, train speedup 0.479, test speedup 0.563, val speedup 0.265
execution cost 0:20:58.423401
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.978575, and there are 36890 training samples
in channel 9
JOB test speedup 0.23505356414523976
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5527565388872033
Epoch 0/50 |loss: 0.375274| train set 0.480x speedup, test set 0.553x speedup, val set 1.059x speedup, step: 1, train time 24.76 s
JOB test speedup 0.17156470843514882
TPCH test speedup 0.7729551984909703
TPCH skew test speedup 0.6441127721652866
Epoch 1/50 |loss: 0.276964| train set 0.475x speedup, test set 0.644x speedup, val set 0.250x speedup, step: 2, train time 23.19 s
JOB test speedup 0.30137330759158604
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 2/50 |loss: 0.247444| train set 0.484x speedup, test set 0.583x speedup, val set 0.243x speedup, step: 3, train time 23.22 s
JOB test speedup 0.15385400223343207
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 3/50 |loss: 0.230034| train set 0.477x speedup, test set 0.583x speedup, val set 0.240x speedup, step: 4, train time 23.39 s
JOB test speedup 0.19737351081349588
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 4/50 |loss: 0.211798| train set 0.475x speedup, test set 0.583x speedup, val set 0.242x speedup, step: 5, train time 23.22 s
JOB test speedup 0.19906692826959405
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5834278637216542
Epoch 5/50 |loss: 0.202345| train set 0.470x speedup, test set 0.583x speedup, val set 0.242x speedup, step: 6, train time 23.19 s
JOB test speedup 0.20531927148734694
TPCH test speedup 0.7157982833480934
TPCH skew test speedup 0.5834278637216542
Epoch 6/50 |loss: 0.196112| train set 0.474x speedup, test set 0.583x speedup, val set 0.441x speedup, step: 7, train time 23.40 s
JOB test speedup 0.2228640816589446
TPCH test speedup 0.7729551984909703
TPCH skew test speedup 0.5834278637216542
Epoch 7/50 |loss: 0.187976| train set 0.492x speedup, test set 0.583x speedup, val set 0.242x speedup, step: 8, train time 23.49 s
JOB test speedup 0.20622117574298657
TPCH test speedup 0.7175935761495839
TPCH skew test speedup 0.5627681486405565
Epoch 8/50 |loss: 0.180256| train set 0.479x speedup, test set 0.563x speedup, val set 1.108x speedup, step: 1, train time 23.49 s
JOB test speedup 0.19851816700212455
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 9/50 |loss: 0.173971| train set 0.474x speedup, test set 0.583x speedup, val set 0.242x speedup, step: 2, train time 23.64 s
JOB test speedup 0.20492636170925896
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 10/50 |loss: 0.169856| train set 0.468x speedup, test set 0.583x speedup, val set 0.242x speedup, step: 3, train time 23.58 s
JOB test speedup 0.18087086362273244
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5834278637216542
Epoch 11/50 |loss: 0.165300| train set 0.472x speedup, test set 0.583x speedup, val set 0.238x speedup, step: 4, train time 23.50 s
JOB test speedup 0.17639026400876395
TPCH test speedup 2.401436318100766
TPCH skew test speedup 0.5886352622012384
Epoch 12/50 |loss: 0.162481| train set 0.476x speedup, test set 0.589x speedup, val set 0.239x speedup, step: 5, train time 23.40 s
JOB test speedup 0.20949850415105187
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5527565388872033
Epoch 13/50 |loss: 0.158875| train set 0.472x speedup, test set 0.553x speedup, val set 0.238x speedup, step: 6, train time 23.69 s
JOB test speedup 0.19497502957499213
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 14/50 |loss: 0.157921| train set 0.473x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 7, train time 23.49 s
JOB test speedup 0.20067760576970253
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 15/50 |loss: 0.151786| train set 0.472x speedup, test set 0.583x speedup, val set 0.239x speedup, step: 8, train time 24.29 s
JOB test speedup 0.20626693888454453
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 16/50 |loss: 0.149650| train set 0.470x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 9, train time 23.61 s
JOB test speedup 0.19642144831453415
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 17/50 |loss: 0.146765| train set 0.466x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 10, train time 23.71 s
JOB test speedup 0.18306472790042244
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5834278637216542
Epoch 18/50 |loss: 0.144881| train set 0.471x speedup, test set 0.583x speedup, val set 0.239x speedup, step: 11, train time 23.71 s
JOB test speedup 0.23566936602823974
TPCH test speedup 3.154935966888191
TPCH skew test speedup 0.5627681486405565
Epoch 19/50 |loss: 0.141869| train set 0.467x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 12, train time 23.60 s
JOB test speedup 0.20195173155151142
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 20/50 |loss: 0.140072| train set 0.467x speedup, test set 0.563x speedup, val set 0.240x speedup, step: 13, train time 23.79 s
JOB test speedup 0.17698476666084953
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 21/50 |loss: 0.138262| train set 0.467x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 14, train time 24.00 s
JOB test speedup 0.18081614696707082
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 22/50 |loss: 0.134522| train set 0.466x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 15, train time 23.67 s
JOB test speedup 0.19496782970931112
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 23/50 |loss: 0.136916| train set 0.468x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 16, train time 23.90 s
JOB test speedup 0.1762379583885532
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 24/50 |loss: 0.132735| train set 0.472x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 17, train time 23.70 s
JOB test speedup 0.17676187194819493
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.6539419157757496
Epoch 25/50 |loss: 0.131398| train set 0.467x speedup, test set 0.654x speedup, val set 0.240x speedup, step: 18, train time 23.89 s
JOB test speedup 0.17698732065584716
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.6142080917780295
Epoch 26/50 |loss: 0.128616| train set 0.468x speedup, test set 0.614x speedup, val set 0.239x speedup, step: 19, train time 23.80 s
JOB test speedup 0.17577390808612892
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 27/50 |loss: 0.126384| train set 0.471x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 20, train time 23.88 s
JOB test speedup 0.2540661057890837
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 28/50 |loss: 0.128325| train set 0.465x speedup, test set 0.563x speedup, val set 0.240x speedup, step: 21, train time 23.88 s
JOB test speedup 0.17540251485315625
TPCH test speedup 2.215334194284433
TPCH skew test speedup 0.5627681486405565
Epoch 29/50 |loss: 0.124238| train set 0.468x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 22, train time 24.11 s
JOB test speedup 0.2424287182796452
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.6180423512464222
Epoch 30/50 |loss: 0.121957| train set 0.471x speedup, test set 0.618x speedup, val set 0.239x speedup, step: 23, train time 23.91 s
JOB test speedup 0.2397099231223618
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 31/50 |loss: 0.122368| train set 0.473x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 24, train time 23.96 s
JOB test speedup 0.23515201753911222
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 32/50 |loss: 0.121912| train set 0.466x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 25, train time 23.83 s
JOB test speedup 0.2084208873540329
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 33/50 |loss: 0.120680| train set 0.462x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 26, train time 23.99 s
JOB test speedup 0.21707925215787754
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 34/50 |loss: 0.117544| train set 0.469x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 27, train time 23.88 s
JOB test speedup 0.21412561226143578
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 35/50 |loss: 0.116995| train set 0.464x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 28, train time 23.78 s
JOB test speedup 0.21679547449853956
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 36/50 |loss: 0.119195| train set 0.464x speedup, test set 0.563x speedup, val set 0.240x speedup, step: 29, train time 24.00 s
JOB test speedup 0.20600095647552916
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 37/50 |loss: 0.115922| train set 0.468x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 30, train time 24.12 s
JOB test speedup 0.23972755719617747
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 38/50 |loss: 0.114009| train set 0.469x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 31, train time 23.68 s
JOB test speedup 0.20983561390990943
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 39/50 |loss: 0.113999| train set 0.465x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 32, train time 23.81 s
JOB test speedup 0.20908085060507722
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 40/50 |loss: 0.112173| train set 0.468x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 33, train time 24.01 s
JOB test speedup 0.21169499442566198
TPCH test speedup 2.1961381255412165
TPCH skew test speedup 0.5627681486405565
Epoch 41/50 |loss: 0.111213| train set 0.469x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 34, train time 23.97 s
JOB test speedup 0.2097228099051175
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 42/50 |loss: 0.110511| train set 0.463x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 35, train time 24.00 s
JOB test speedup 0.20912403147867148
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 43/50 |loss: 0.110590| train set 0.464x speedup, test set 0.563x speedup, val set 0.240x speedup, step: 36, train time 24.00 s
JOB test speedup 0.20896309670291438
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 44/50 |loss: 0.107482| train set 0.468x speedup, test set 0.563x speedup, val set 0.240x speedup, step: 37, train time 23.87 s
JOB test speedup 0.24052691861180756
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 45/50 |loss: 0.109155| train set 0.465x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 38, train time 23.91 s
JOB test speedup 0.2170976390108461
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 46/50 |loss: 0.109410| train set 0.470x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 39, train time 24.00 s
JOB test speedup 0.21194246548175916
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 47/50 |loss: 0.110357| train set 0.468x speedup, test set 0.563x speedup, val set 0.238x speedup, step: 40, train time 23.88 s
JOB test speedup 0.21427422866816678
TPCH test speedup 3.8393559937807336
TPCH skew test speedup 0.5627681486405565
Epoch 48/50 |loss: 0.109004| train set 0.468x speedup, test set 0.563x speedup, val set 0.239x speedup, step: 41, train time 23.91 s
JOB test speedup 0.22287487789648186
TPCH test speedup 2.421763109412846
TPCH skew test speedup 0.5627681486405565
Epoch 49/50 |loss: 0.105306| train set 0.468x speedup, test set 0.563x speedup, val set 0.240x speedup, step: 42, train time 23.78 s
Training per epoch cost 23.770 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 2.609s, pg runtime 0.189s, speedup 0.073x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 7.526s, pg runtime 0.404s, speedup 0.054x
04, opt runtime 0.637s, model runtime 4.014s, pg runtime 0.637s, speedup 0.159x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.661s, model runtime 5.066s, pg runtime 0.661s, speedup 0.130x
07, opt runtime 1.437s, model runtime 48.127s, pg runtime 1.437s, speedup 0.030x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 4.223s, model runtime 37.578s, pg runtime 18.741s, speedup 0.499x
10, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
11, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
12, opt runtime 3.504s, model runtime 13.563s, pg runtime 6.143s, speedup 0.453x
13, opt runtime 2.593s, model runtime 25.213s, pg runtime 8.283s, speedup 0.329x
14, opt runtime 2.046s, model runtime 6.177s, pg runtime 5.879s, speedup 0.952x
15, opt runtime 1.737s, model runtime 5.445s, pg runtime 5.994s, speedup 1.101x
16, opt runtime 2.324s, model runtime 19.337s, pg runtime 10.605s, speedup 0.548x
17, opt runtime 3.248s, model runtime 19.559s, pg runtime 10.538s, speedup 0.539x
18, opt runtime 0.612s, model runtime 17.609s, pg runtime 1.357s, speedup 0.077x
19, opt runtime 0.189s, model runtime 8.037s, pg runtime 0.189s, speedup 0.024x
20, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
21, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
22, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
23, opt runtime 0.129s, model runtime 0.711s, pg runtime 0.129s, speedup 0.182x
24, opt runtime 0.348s, model runtime 12.974s, pg runtime 0.391s, speedup 0.030x
25, opt runtime 2.755s, model runtime 17.369s, pg runtime 5.521s, speedup 0.318x
26, opt runtime 0.250s, model runtime 5.920s, pg runtime 0.250s, speedup 0.042x
27, opt runtime 0.278s, model runtime 6.001s, pg runtime 0.948s, speedup 0.158x
========== TPCH
01, opt runtime 18.392s, model runtime 57.953s, pg runtime 18.392s, speedup 0.317x
02, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
03, opt runtime 17.779s, model runtime 51.347s, pg runtime 17.779s, speedup 0.346x
04, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
05, opt runtime 14.857s, model runtime 96.106s, pg runtime 14.857s, speedup 0.155x
06, opt runtime 19.263s, model runtime 56.580s, pg runtime 19.263s, speedup 0.340x
07, opt runtime 15.831s, model runtime 47.554s, pg runtime 15.831s, speedup 0.333x
08, opt runtime 9.432s, model runtime 80.143s, pg runtime 9.432s, speedup 0.118x
09, opt runtime 26.874s, model runtime 57.821s, pg runtime 26.874s, speedup 0.465x
10, opt runtime 21.143s, model runtime 44.389s, pg runtime 21.143s, speedup 0.476x
11, opt runtime 7.237s, model runtime 119.588s, pg runtime 17.708s, speedup 0.148x
12, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
13, opt runtime 7.851s, model runtime 91.943s, pg runtime 13.622s, speedup 0.148x
14, opt runtime 7.442s, model runtime 128.345s, pg runtime 14.838s, speedup 0.116x
15, opt runtime 7.110s, model runtime 87.878s, pg runtime 14.286s, speedup 0.163x
16, opt runtime 6.810s, model runtime 136.064s, pg runtime 13.796s, speedup 0.101x
17, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
18, opt runtime 6.656s, model runtime 177.558s, pg runtime 15.260s, speedup 0.086x
19, opt runtime 7.913s, model runtime 131.024s, pg runtime 15.548s, speedup 0.119x
20, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
21, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
22, opt runtime 7.096s, model runtime 7.177s, pg runtime 7.096s, speedup 0.989x
23, opt runtime 7.063s, model runtime 7.159s, pg runtime 7.063s, speedup 0.987x
24, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
25, opt runtime 6.854s, model runtime 7.066s, pg runtime 6.854s, speedup 0.970x
26, opt runtime 6.905s, model runtime 7.091s, pg runtime 6.905s, speedup 0.974x
27, opt runtime 6.663s, model runtime 7.015s, pg runtime 6.663s, speedup 0.950x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 7.066s, model runtime 7.355s, pg runtime 7.533s, speedup 1.024x
30, opt runtime 6.961s, model runtime 7.020s, pg runtime 6.961s, speedup 0.992x
31, opt runtime 16.268s, model runtime 562.147s, pg runtime 432.766s, speedup 0.770x
32, opt runtime 15.120s, model runtime 456.981s, pg runtime 566.078s, speedup 1.239x
33, opt runtime 16.639s, model runtime 700.825s, pg runtime 462.544s, speedup 0.660x
34, opt runtime 16.280s, model runtime 650.160s, pg runtime 634.990s, speedup 0.977x
35, opt runtime 16.528s, model runtime 641.666s, pg runtime 620.762s, speedup 0.967x
36, opt runtime 18.690s, model runtime 786.481s, pg runtime 651.942s, speedup 0.829x
37, opt runtime 16.438s, model runtime 516.443s, pg runtime 546.887s, speedup 1.059x
38, opt runtime 16.138s, model runtime 638.331s, pg runtime 501.793s, speedup 0.786x
39, opt runtime 16.770s, model runtime 600.737s, pg runtime 594.754s, speedup 0.990x
40, opt runtime 16.305s, model runtime 605.422s, pg runtime 436.168s, speedup 0.720x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 67.790s, pg runtime 91.786s, speedup 1.354x
12, opt runtime 33.249s, model runtime 71.275s, pg runtime 103.551s, speedup 1.453x
13, opt runtime 33.759s, model runtime 70.794s, pg runtime 98.290s, speedup 1.388x
14, opt runtime 36.646s, model runtime 66.614s, pg runtime 98.171s, speedup 1.474x
15, opt runtime 32.482s, model runtime 72.642s, pg runtime 123.411s, speedup 1.699x
16, opt runtime 31.996s, model runtime 66.753s, pg runtime 120.854s, speedup 1.810x
17, opt runtime 30.778s, model runtime 68.265s, pg runtime 100.158s, speedup 1.467x
18, opt runtime 30.030s, model runtime 67.656s, pg runtime 85.930s, speedup 1.270x
19, opt runtime 28.776s, model runtime 70.439s, pg runtime 86.923s, speedup 1.234x
20, opt runtime 29.576s, model runtime 71.065s, pg runtime 113.059s, speedup 1.591x
21, opt runtime 10.669s, model runtime 59.523s, pg runtime 29.760s, speedup 0.500x
22, opt runtime 16.844s, model runtime 91.176s, pg runtime 27.164s, speedup 0.298x
23, opt runtime 20.708s, model runtime 47.541s, pg runtime 20.708s, speedup 0.436x
24, opt runtime 30.649s, model runtime 55.174s, pg runtime 30.649s, speedup 0.555x
25, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
26, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
27, opt runtime 28.312s, model runtime 49.880s, pg runtime 28.312s, speedup 0.568x
28, opt runtime 11.965s, model runtime 94.584s, pg runtime 11.965s, speedup 0.127x
29, opt runtime 21.883s, model runtime 70.905s, pg runtime 24.220s, speedup 0.342x
30, opt runtime 13.053s, model runtime 88.741s, pg runtime 13.053s, speedup 0.147x
31, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
32, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
33, opt runtime 3.020s, model runtime 126.890s, pg runtime 13.874s, speedup 0.109x
34, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
35, opt runtime 2.718s, model runtime 128.447s, pg runtime 12.519s, speedup 0.097x
36, opt runtime 2.748s, model runtime 130.366s, pg runtime 11.962s, speedup 0.092x
37, opt runtime 3.090s, model runtime 135.601s, pg runtime 14.431s, speedup 0.106x
38, opt runtime 3.079s, model runtime 99.885s, pg runtime 13.817s, speedup 0.138x
39, opt runtime 2.923s, model runtime 137.862s, pg runtime 13.811s, speedup 0.100x
40, opt runtime 2.833s, model runtime 131.802s, pg runtime 12.441s, speedup 0.094x
====================
JOB best validation speedup epoch: 8, train speedup 0.479, test speedup 0.206, val speedup 1.108
TPCH best validation speedup epoch: 8, train speedup 0.479, test speedup 0.718, val speedup 1.108
TPCH Skew best validation speedup epoch: 8, train speedup 0.479, test speedup 0.563, val speedup 1.108
execution cost 0:20:58.308329
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.348690, and there are 26626 training samples
in channel 9
JOB test speedup 1.022030262041143
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.375138| train set 4.511x speedup, test set 1.069x speedup, val set 0.722x speedup, step: 1, train time 19.18 s
JOB test speedup 0.9622245561269569
TPCH test speedup 5.1073877626365
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.288835| train set 4.698x speedup, test set 0.847x speedup, val set 1.031x speedup, step: 1, train time 17.97 s
JOB test speedup 0.9807574754536494
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.255342| train set 4.908x speedup, test set 0.847x speedup, val set 0.730x speedup, step: 2, train time 17.91 s
JOB test speedup 1.1639336721677078
TPCH test speedup 5.231226861694703
TPCH skew test speedup 0.9876282772378597
Epoch 3/50 |loss: 0.238071| train set 4.915x speedup, test set 0.988x speedup, val set 0.734x speedup, step: 3, train time 17.98 s
JOB test speedup 1.014155231556315
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8467185307037698
Epoch 4/50 |loss: 0.226195| train set 4.908x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 4, train time 18.01 s
JOB test speedup 0.96235037524251
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8267566675404998
Epoch 5/50 |loss: 0.214410| train set 4.697x speedup, test set 0.827x speedup, val set 0.735x speedup, step: 5, train time 18.61 s
JOB test speedup 0.9816367539889035
TPCH test speedup 3.815807075245784
TPCH skew test speedup 0.9876282772378597
Epoch 6/50 |loss: 0.205346| train set 4.916x speedup, test set 0.988x speedup, val set 0.731x speedup, step: 6, train time 18.08 s
JOB test speedup 0.9586567847190444
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.205762| train set 4.821x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 7, train time 18.30 s
JOB test speedup 0.9882932460594801
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 8/50 |loss: 0.198761| train set 4.938x speedup, test set 0.867x speedup, val set 0.850x speedup, step: 8, train time 18.01 s
JOB test speedup 1.0681650963529068
TPCH test speedup 3.3642359576960312
TPCH skew test speedup 0.8467185307037698
Epoch 9/50 |loss: 0.191033| train set 4.931x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 9, train time 18.01 s
JOB test speedup 1.0087641793136313
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.185167| train set 4.901x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 10, train time 18.22 s
JOB test speedup 1.4570433627306445
TPCH test speedup 4.479209434582844
TPCH skew test speedup 1.0684738796627566
Epoch 11/50 |loss: 0.179107| train set 4.887x speedup, test set 1.068x speedup, val set 0.731x speedup, step: 11, train time 18.09 s
JOB test speedup 0.977931217950114
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8467185307037698
Epoch 12/50 |loss: 0.182481| train set 4.829x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 12, train time 17.89 s
JOB test speedup 0.9258441785836583
TPCH test speedup 3.3642359576960312
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.172106| train set 4.900x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 13, train time 17.82 s
JOB test speedup 1.3441868136481314
TPCH test speedup 3.815807075245784
TPCH skew test speedup 1.0690157018936535
Epoch 14/50 |loss: 0.175771| train set 4.899x speedup, test set 1.069x speedup, val set 0.730x speedup, step: 14, train time 17.98 s
JOB test speedup 1.021164576623764
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8463785826525752
Epoch 15/50 |loss: 0.186952| train set 4.908x speedup, test set 0.846x speedup, val set 0.731x speedup, step: 15, train time 18.08 s
JOB test speedup 1.1114342955289596
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8467185307037698
Epoch 16/50 |loss: 0.172707| train set 4.944x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 16, train time 17.86 s
JOB test speedup 0.8970825067413339
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 1.0684738796627566
Epoch 17/50 |loss: 0.164489| train set 4.926x speedup, test set 1.068x speedup, val set 0.737x speedup, step: 17, train time 17.80 s
JOB test speedup 0.990442747098332
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0690157018936535
Epoch 18/50 |loss: 0.162056| train set 4.889x speedup, test set 1.069x speedup, val set 0.729x speedup, step: 18, train time 18.20 s
JOB test speedup 0.9854863145977417
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8463785826525752
Epoch 19/50 |loss: 0.160446| train set 4.862x speedup, test set 0.846x speedup, val set 0.731x speedup, step: 19, train time 17.82 s
JOB test speedup 1.013509917278964
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.159426| train set 4.937x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 20, train time 18.48 s
JOB test speedup 0.9357416692050816
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8467185307037698
Epoch 21/50 |loss: 0.155853| train set 4.822x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 21, train time 18.12 s
JOB test speedup 1.0178882064636334
TPCH test speedup 4.567280210057989
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.155663| train set 4.896x speedup, test set 1.068x speedup, val set 0.731x speedup, step: 22, train time 17.89 s
JOB test speedup 1.101713649299655
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.158854| train set 4.953x speedup, test set 0.847x speedup, val set 0.729x speedup, step: 23, train time 18.12 s
JOB test speedup 0.9341552856397695
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0689993872485233
Epoch 24/50 |loss: 0.150019| train set 4.811x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 24, train time 18.11 s
JOB test speedup 0.9364259061385
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0690157018936535
Epoch 25/50 |loss: 0.148808| train set 4.811x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 25, train time 18.39 s
JOB test speedup 1.0748383224142148
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.146043| train set 4.859x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 26, train time 17.92 s
JOB test speedup 0.9969764781560788
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8463785826525752
Epoch 27/50 |loss: 0.147374| train set 4.933x speedup, test set 0.846x speedup, val set 0.731x speedup, step: 27, train time 18.52 s
JOB test speedup 0.9347380045431832
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 28/50 |loss: 0.148441| train set 4.851x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 28, train time 18.13 s
JOB test speedup 1.032481581346946
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 29/50 |loss: 0.144132| train set 4.947x speedup, test set 1.068x speedup, val set 0.731x speedup, step: 29, train time 18.32 s
JOB test speedup 1.3426377362990098
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8463785826525752
Epoch 30/50 |loss: 0.142005| train set 4.857x speedup, test set 0.846x speedup, val set 0.731x speedup, step: 30, train time 18.22 s
JOB test speedup 0.9746329828125307
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.068438221505668
Epoch 31/50 |loss: 0.140228| train set 4.921x speedup, test set 1.068x speedup, val set 0.731x speedup, step: 31, train time 18.09 s
JOB test speedup 0.9230889702151545
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8463785826525752
Epoch 32/50 |loss: 0.144751| train set 4.935x speedup, test set 0.846x speedup, val set 0.764x speedup, step: 32, train time 18.19 s
JOB test speedup 1.0069462298888365
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8463785826525752
Epoch 33/50 |loss: 0.140202| train set 4.950x speedup, test set 0.846x speedup, val set 0.731x speedup, step: 33, train time 17.91 s
JOB test speedup 1.1490083054956493
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 34/50 |loss: 0.141810| train set 4.943x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 34, train time 18.22 s
JOB test speedup 1.0753643869552516
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8463785826525752
Epoch 35/50 |loss: 0.149041| train set 4.952x speedup, test set 0.846x speedup, val set 0.733x speedup, step: 35, train time 18.18 s
JOB test speedup 0.9942495163639623
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8463785826525752
Epoch 36/50 |loss: 0.148524| train set 4.925x speedup, test set 0.846x speedup, val set 0.729x speedup, step: 36, train time 17.97 s
early stopping at epoch 36
Training per epoch cost 18.123 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.183s, pg runtime 0.189s, speedup 1.037x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.399s, model runtime 0.404s, pg runtime 0.404s, speedup 1.000x
04, opt runtime 0.637s, model runtime 1.164s, pg runtime 0.637s, speedup 0.547x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.661s, model runtime 1.219s, pg runtime 0.661s, speedup 0.542x
07, opt runtime 1.437s, model runtime 3.058s, pg runtime 1.437s, speedup 0.470x
08, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
15, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
16, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
17, opt runtime 3.248s, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
22, opt runtime 0.158s, model runtime 0.256s, pg runtime 0.158s, speedup 0.620x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.961x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
27, opt runtime 0.278s, model runtime 1.016s, pg runtime 0.948s, speedup 0.933x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 69.366s, pg runtime 14.857s, speedup 0.214x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
12, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
13, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
14, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
15, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
16, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
17, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
18, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
19, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
20, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
21, opt runtime 10.669s, model runtime 66.967s, pg runtime 29.760s, speedup 0.444x
22, opt runtime 16.844s, model runtime 62.706s, pg runtime 27.164s, speedup 0.433x
23, opt runtime 20.708s, model runtime 67.187s, pg runtime 20.708s, speedup 0.308x
24, opt runtime 30.649s, model runtime 63.889s, pg runtime 30.649s, speedup 0.480x
25, opt runtime 14.023s, model runtime 58.579s, pg runtime 31.705s, speedup 0.541x
26, opt runtime 30.304s, model runtime 70.753s, pg runtime 30.711s, speedup 0.434x
27, opt runtime 28.312s, model runtime 67.889s, pg runtime 28.312s, speedup 0.417x
28, opt runtime 11.965s, model runtime 68.966s, pg runtime 11.965s, speedup 0.173x
29, opt runtime 21.883s, model runtime 65.849s, pg runtime 24.220s, speedup 0.368x
30, opt runtime 13.053s, model runtime 67.985s, pg runtime 13.053s, speedup 0.192x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 1, train speedup 4.698, test speedup 0.962, val speedup 1.031
TPCH best validation speedup epoch: 1, train speedup 4.698, test speedup 5.107, val speedup 1.031
TPCH Skew best validation speedup epoch: 1, train speedup 4.698, test speedup 0.847, val speedup 1.031
execution cost 0:12:00.506704
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.409422, and there are 26626 training samples
in channel 9
JOB test speedup 1.018382813260587
TPCH test speedup 6.494682644993008
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.376502| train set 4.506x speedup, test set 1.069x speedup, val set 0.720x speedup, step: 1, train time 18.98 s
JOB test speedup 0.9971517741051651
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 1/50 |loss: 0.287382| train set 4.884x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 1, train time 18.30 s
JOB test speedup 1.0169747038174806
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.257811| train set 4.883x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 1, train time 17.98 s
JOB test speedup 1.617812191726265
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 3/50 |loss: 0.238053| train set 4.926x speedup, test set 1.485x speedup, val set 0.857x speedup, step: 1, train time 18.19 s
JOB test speedup 1.0261073112130126
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 4/50 |loss: 0.223139| train set 4.912x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 2, train time 17.88 s
JOB test speedup 1.069494361840977
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 5/50 |loss: 0.212564| train set 4.881x speedup, test set 0.847x speedup, val set 0.730x speedup, step: 3, train time 17.91 s
JOB test speedup 1.0179381554981262
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 6/50 |loss: 0.205907| train set 4.927x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 4, train time 17.88 s
JOB test speedup 0.9980517250417683
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.204778| train set 4.826x speedup, test set 0.847x speedup, val set 0.729x speedup, step: 5, train time 18.09 s
JOB test speedup 0.9959900409168206
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 8/50 |loss: 0.196968| train set 4.885x speedup, test set 1.485x speedup, val set 0.853x speedup, step: 6, train time 18.32 s
JOB test speedup 1.0003613612907323
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 9/50 |loss: 0.190611| train set 4.828x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 7, train time 18.12 s
JOB test speedup 0.9618813554301235
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.184908| train set 4.912x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 8, train time 18.01 s
JOB test speedup 0.9837311043432546
TPCH test speedup 8.114769714678575
TPCH skew test speedup 1.0684738796627566
Epoch 11/50 |loss: 0.180496| train set 4.892x speedup, test set 1.068x speedup, val set 0.734x speedup, step: 9, train time 17.82 s
JOB test speedup 1.0007009567138665
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 12/50 |loss: 0.180234| train set 4.922x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 10, train time 17.98 s
JOB test speedup 0.956286130089551
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.170539| train set 4.891x speedup, test set 0.847x speedup, val set 0.722x speedup, step: 11, train time 18.45 s
JOB test speedup 1.1834956450588185
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 14/50 |loss: 0.174287| train set 4.949x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 12, train time 18.01 s
JOB test speedup 1.022941245148042
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8463785826525752
Epoch 15/50 |loss: 0.190020| train set 4.904x speedup, test set 0.846x speedup, val set 0.743x speedup, step: 13, train time 18.28 s
JOB test speedup 1.012361066952617
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.173988| train set 4.928x speedup, test set 1.088x speedup, val set 0.856x speedup, step: 14, train time 17.88 s
JOB test speedup 0.949909585852175
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 17/50 |loss: 0.163374| train set 4.836x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 15, train time 18.01 s
JOB test speedup 0.9381085821528535
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 18/50 |loss: 0.161846| train set 4.905x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 16, train time 18.31 s
JOB test speedup 0.9926120703690643
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.159529| train set 4.856x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 17, train time 18.21 s
JOB test speedup 0.998722730141567
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.158962| train set 4.944x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 18, train time 18.09 s
JOB test speedup 0.9390236115247325
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 21/50 |loss: 0.157049| train set 4.858x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 19, train time 17.92 s
JOB test speedup 1.0217745255887536
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.154873| train set 4.816x speedup, test set 1.068x speedup, val set 0.731x speedup, step: 20, train time 18.11 s
JOB test speedup 0.9317964758591836
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.155502| train set 4.951x speedup, test set 0.847x speedup, val set 0.744x speedup, step: 21, train time 18.11 s
JOB test speedup 0.9372952597625189
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.150194| train set 4.778x speedup, test set 1.069x speedup, val set 0.722x speedup, step: 22, train time 18.10 s
JOB test speedup 0.9233627258143347
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 25/50 |loss: 0.149696| train set 4.878x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 23, train time 18.11 s
JOB test speedup 0.9988840194683251
TPCH test speedup 5.275536676288792
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.146515| train set 4.935x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 24, train time 18.10 s
JOB test speedup 0.9234391129173357
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.146691| train set 4.933x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 25, train time 18.09 s
JOB test speedup 0.9380241392968254
TPCH test speedup 8.988073339738278
TPCH skew test speedup 0.8467185307037698
Epoch 28/50 |loss: 0.147639| train set 4.815x speedup, test set 0.847x speedup, val set 0.729x speedup, step: 26, train time 18.31 s
JOB test speedup 0.9240054019035021
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0684738796627566
Epoch 29/50 |loss: 0.145063| train set 4.947x speedup, test set 1.068x speedup, val set 0.732x speedup, step: 27, train time 18.11 s
JOB test speedup 0.9232302603651589
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 30/50 |loss: 0.143269| train set 4.866x speedup, test set 0.847x speedup, val set 0.720x speedup, step: 28, train time 18.28 s
JOB test speedup 0.9987882814809919
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 31/50 |loss: 0.142110| train set 4.928x speedup, test set 0.847x speedup, val set 0.720x speedup, step: 29, train time 18.22 s
JOB test speedup 0.9062193034598252
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 32/50 |loss: 0.151313| train set 4.937x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 30, train time 18.13 s
JOB test speedup 0.9397271811080745
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 33/50 |loss: 0.141017| train set 4.954x speedup, test set 0.847x speedup, val set 0.838x speedup, step: 31, train time 18.00 s
JOB test speedup 1.0133714703338892
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 34/50 |loss: 0.142682| train set 4.942x speedup, test set 0.847x speedup, val set 0.852x speedup, step: 32, train time 18.40 s
JOB test speedup 0.9380241392968254
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8463785826525752
Epoch 35/50 |loss: 0.145893| train set 4.900x speedup, test set 0.846x speedup, val set 0.788x speedup, step: 33, train time 18.11 s
JOB test speedup 0.9940011605574723
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 36/50 |loss: 0.141917| train set 4.954x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 34, train time 17.97 s
JOB test speedup 0.9599451808102396
TPCH test speedup 5.275536676288792
TPCH skew test speedup 0.8467185307037698
Epoch 37/50 |loss: 0.138410| train set 4.898x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 35, train time 18.28 s
JOB test speedup 0.9988046700309255
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 38/50 |loss: 0.134946| train set 4.952x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 36, train time 19.09 s
JOB test speedup 1.0124220309700245
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 39/50 |loss: 0.134700| train set 4.949x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 37, train time 18.17 s
JOB test speedup 0.924024207845397
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.136517| train set 4.868x speedup, test set 0.847x speedup, val set 0.806x speedup, step: 38, train time 17.99 s
JOB test speedup 1.0133714703338892
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 41/50 |loss: 0.136841| train set 4.954x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 39, train time 18.22 s
JOB test speedup 0.9836283003019555
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 42/50 |loss: 0.130533| train set 4.952x speedup, test set 0.847x speedup, val set 0.707x speedup, step: 40, train time 18.33 s
JOB test speedup 0.9869556081459112
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 43/50 |loss: 0.136921| train set 4.943x speedup, test set 0.847x speedup, val set 0.793x speedup, step: 41, train time 18.39 s
JOB test speedup 0.9593306199892382
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 44/50 |loss: 0.131579| train set 4.949x speedup, test set 1.069x speedup, val set 0.823x speedup, step: 42, train time 18.30 s
JOB test speedup 1.0124102318277024
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 45/50 |loss: 0.130357| train set 4.865x speedup, test set 1.069x speedup, val set 0.793x speedup, step: 43, train time 18.02 s
JOB test speedup 0.976397665732733
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 46/50 |loss: 0.130494| train set 4.868x speedup, test set 0.847x speedup, val set 0.726x speedup, step: 44, train time 18.13 s
JOB test speedup 0.9960625934055105
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 47/50 |loss: 0.130721| train set 4.949x speedup, test set 0.847x speedup, val set 0.722x speedup, step: 45, train time 18.11 s
JOB test speedup 0.996037590948814
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 48/50 |loss: 0.130125| train set 4.941x speedup, test set 0.847x speedup, val set 0.778x speedup, step: 46, train time 18.11 s
JOB test speedup 0.9906413258926325
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 49/50 |loss: 0.127702| train set 4.954x speedup, test set 0.847x speedup, val set 0.793x speedup, step: 47, train time 18.40 s
Training per epoch cost 18.166 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 0.637s, pg runtime 0.637s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.661s, model runtime 0.661s, pg runtime 0.661s, speedup 1.000x
07, opt runtime 1.437s, model runtime 3.247s, pg runtime 1.437s, speedup 0.442x
08, opt runtime 0.206s, model runtime 2.362s, pg runtime 0.206s, speedup 0.087x
09, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.080s, pg runtime 6.143s, speedup 1.010x
13, opt runtime 2.593s, model runtime 2.593s, pg runtime 8.283s, speedup 3.195x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
17, opt runtime 3.248s, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 3.377s, pg runtime 5.521s, speedup 1.635x
26, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
27, opt runtime 0.278s, model runtime 1.016s, pg runtime 0.948s, speedup 0.933x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 3, train speedup 4.926, test speedup 1.618, val speedup 0.857
TPCH best validation speedup epoch: 3, train speedup 4.926, test speedup 8.646, val speedup 0.857
TPCH Skew best validation speedup epoch: 3, train speedup 4.926, test speedup 1.485, val speedup 0.857
execution cost 0:16:11.200611
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.372482, and there are 26626 training samples
in channel 9
JOB test speedup 1.0450454442004635
TPCH test speedup 6.68149446061608
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.376578| train set 4.422x speedup, test set 1.069x speedup, val set 0.821x speedup, step: 1, train time 19.38 s
JOB test speedup 0.9966057505870418
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 1/50 |loss: 0.287580| train set 4.863x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 2, train time 17.99 s
JOB test speedup 0.9800276179270988
TPCH test speedup 8.560301627357337
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.256795| train set 4.718x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 3, train time 18.28 s
JOB test speedup 1.273181068359456
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 3/50 |loss: 0.238981| train set 4.937x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 4, train time 18.37 s
JOB test speedup 1.0141101720393257
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8467185307037698
Epoch 4/50 |loss: 0.225498| train set 4.906x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 5, train time 17.98 s
JOB test speedup 1.007327931630792
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8187027228300581
Epoch 5/50 |loss: 0.213949| train set 4.650x speedup, test set 0.819x speedup, val set 0.733x speedup, step: 6, train time 17.89 s
JOB test speedup 1.025207877637681
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0690157018936535
Epoch 6/50 |loss: 0.204983| train set 4.917x speedup, test set 1.069x speedup, val set 0.786x speedup, step: 7, train time 18.07 s
JOB test speedup 1.0351752078464822
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.205557| train set 4.822x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 8, train time 18.21 s
JOB test speedup 1.0150780599863591
TPCH test speedup 4.354301022484202
TPCH skew test speedup 0.8671779162364766
Epoch 8/50 |loss: 0.196684| train set 4.895x speedup, test set 0.867x speedup, val set 0.852x speedup, step: 1, train time 18.69 s
JOB test speedup 1.1288401018463001
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 9/50 |loss: 0.190153| train set 4.880x speedup, test set 1.485x speedup, val set 0.861x speedup, step: 1, train time 18.28 s
JOB test speedup 0.9540503174115317
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.184038| train set 4.912x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 2, train time 18.27 s
JOB test speedup 1.2127232747527743
TPCH test speedup 8.336132172163117
TPCH skew test speedup 1.0690157018936535
Epoch 11/50 |loss: 0.177969| train set 4.885x speedup, test set 1.069x speedup, val set 0.805x speedup, step: 3, train time 17.92 s
JOB test speedup 1.0436370536293387
TPCH test speedup 3.6709686233255674
TPCH skew test speedup 0.8467185307037698
Epoch 12/50 |loss: 0.179181| train set 4.911x speedup, test set 0.847x speedup, val set 0.852x speedup, step: 4, train time 18.04 s
JOB test speedup 1.0403010605416494
TPCH test speedup 8.560301627357337
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.171318| train set 4.921x speedup, test set 0.847x speedup, val set 0.772x speedup, step: 5, train time 18.10 s
JOB test speedup 1.2832465804297126
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 14/50 |loss: 0.173927| train set 4.898x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 6, train time 18.19 s
JOB test speedup 1.0049943165148583
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 15/50 |loss: 0.181773| train set 4.929x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 7, train time 18.52 s
JOB test speedup 1.0300851400702813
TPCH test speedup 4.414687710933372
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.173208| train set 4.943x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 8, train time 18.72 s
JOB test speedup 0.9742072498646583
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 17/50 |loss: 0.162906| train set 4.843x speedup, test set 0.847x speedup, val set 0.737x speedup, step: 9, train time 18.67 s
JOB test speedup 1.1681619645918937
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0690157018936535
Epoch 18/50 |loss: 0.162024| train set 4.897x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 10, train time 20.69 s
JOB test speedup 1.1304706003842004
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.157628| train set 4.940x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 11, train time 19.28 s
JOB test speedup 1.3028360229213478
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.159804| train set 4.950x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 12, train time 18.28 s
JOB test speedup 1.135499869838493
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 21/50 |loss: 0.156859| train set 4.822x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 13, train time 18.01 s
JOB test speedup 1.1865205988458944
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8463785826525752
Epoch 22/50 |loss: 0.153114| train set 4.941x speedup, test set 0.846x speedup, val set 0.744x speedup, step: 14, train time 18.21 s
JOB test speedup 1.3171436022983247
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.156368| train set 4.864x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 15, train time 18.78 s
JOB test speedup 1.0620808966420843
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 24/50 |loss: 0.149241| train set 4.838x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 16, train time 17.92 s
JOB test speedup 0.9845206330680703
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 25/50 |loss: 0.148545| train set 4.851x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 17, train time 18.00 s
JOB test speedup 1.1707672501541668
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.145719| train set 4.950x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 18, train time 18.28 s
JOB test speedup 1.0283383584718646
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.145066| train set 4.923x speedup, test set 0.847x speedup, val set 0.744x speedup, step: 19, train time 18.00 s
JOB test speedup 1.0213989032826027
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 28/50 |loss: 0.147649| train set 4.899x speedup, test set 0.847x speedup, val set 0.737x speedup, step: 20, train time 18.39 s
JOB test speedup 1.471658755987378
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0689993872485233
Epoch 29/50 |loss: 0.144054| train set 4.943x speedup, test set 1.069x speedup, val set 0.737x speedup, step: 21, train time 18.02 s
JOB test speedup 1.2607517927178662
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 30/50 |loss: 0.143160| train set 4.859x speedup, test set 0.847x speedup, val set 0.743x speedup, step: 22, train time 17.98 s
JOB test speedup 1.1948546355088823
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8467185307037698
Epoch 31/50 |loss: 0.141273| train set 4.929x speedup, test set 0.847x speedup, val set 0.743x speedup, step: 23, train time 18.02 s
JOB test speedup 0.9802267271321239
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 32/50 |loss: 0.142300| train set 4.861x speedup, test set 0.847x speedup, val set 0.806x speedup, step: 24, train time 17.93 s
JOB test speedup 1.1320021083051999
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 33/50 |loss: 0.138854| train set 4.950x speedup, test set 0.867x speedup, val set 0.731x speedup, step: 25, train time 17.97 s
JOB test speedup 1.2700141151247417
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 34/50 |loss: 0.142773| train set 4.951x speedup, test set 1.088x speedup, val set 0.861x speedup, step: 26, train time 18.20 s
JOB test speedup 1.1815722107386113
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 35/50 |loss: 0.144127| train set 4.904x speedup, test set 0.847x speedup, val set 0.800x speedup, step: 27, train time 18.10 s
JOB test speedup 1.081714472789709
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 36/50 |loss: 0.142128| train set 4.940x speedup, test set 0.867x speedup, val set 0.861x speedup, step: 28, train time 18.27 s
JOB test speedup 1.259739079955523
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8671779162364766
Epoch 37/50 |loss: 0.156881| train set 4.950x speedup, test set 0.867x speedup, val set 0.733x speedup, step: 29, train time 18.00 s
JOB test speedup 1.3433177714963374
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 38/50 |loss: 0.135762| train set 4.948x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 30, train time 18.73 s
JOB test speedup 1.1279914949649374
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8671779162364766
Epoch 39/50 |loss: 0.135713| train set 4.954x speedup, test set 0.867x speedup, val set 0.733x speedup, step: 31, train time 18.59 s
JOB test speedup 1.2014487913661156
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.135449| train set 4.868x speedup, test set 0.847x speedup, val set 0.808x speedup, step: 32, train time 18.33 s
JOB test speedup 1.1919654155036459
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 41/50 |loss: 0.136351| train set 4.956x speedup, test set 0.847x speedup, val set 0.810x speedup, step: 33, train time 18.40 s
JOB test speedup 1.2883744896081775
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 42/50 |loss: 0.130608| train set 4.951x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 34, train time 18.18 s
JOB test speedup 1.023049583823136
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 43/50 |loss: 0.142924| train set 4.946x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 35, train time 18.11 s
JOB test speedup 1.1023714994984044
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 44/50 |loss: 0.129714| train set 4.954x speedup, test set 0.847x speedup, val set 0.747x speedup, step: 36, train time 18.32 s
JOB test speedup 0.9840707582771848
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 45/50 |loss: 0.127303| train set 4.858x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 37, train time 18.11 s
JOB test speedup 1.0156924975385335
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 46/50 |loss: 0.125572| train set 4.871x speedup, test set 0.847x speedup, val set 0.797x speedup, step: 38, train time 18.51 s
JOB test speedup 1.169344535307654
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 47/50 |loss: 0.127057| train set 4.955x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 39, train time 18.19 s
JOB test speedup 1.0098497046504187
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 48/50 |loss: 0.123177| train set 4.940x speedup, test set 0.847x speedup, val set 0.722x speedup, step: 40, train time 18.15 s
JOB test speedup 0.9987952986049916
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 49/50 |loss: 0.126187| train set 4.951x speedup, test set 0.847x speedup, val set 0.778x speedup, step: 41, train time 18.38 s
Training per epoch cost 18.318 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.183s, pg runtime 0.189s, speedup 1.037x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.404s, pg runtime 0.404s, speedup 1.000x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 1.437s, pg runtime 1.437s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 2.593s, pg runtime 8.283s, speedup 3.195x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
17, opt runtime 3.248s, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
22, opt runtime 0.158s, model runtime 0.256s, pg runtime 0.158s, speedup 0.620x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.961x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 1.016s, pg runtime 0.948s, speedup 0.933x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 9, train speedup 4.880, test speedup 1.129, val speedup 0.861
TPCH best validation speedup epoch: 9, train speedup 4.880, test speedup 8.646, val speedup 0.861
TPCH Skew best validation speedup epoch: 9, train speedup 4.880, test speedup 1.485, val speedup 0.861
execution cost 0:16:19.775835
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.328230, and there are 26626 training samples
in channel 9
JOB test speedup 1.0091486513434682
TPCH test speedup 6.494682644993008
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.376226| train set 4.336x speedup, test set 1.069x speedup, val set 0.720x speedup, step: 1, train time 19.33 s
JOB test speedup 0.9613072554158012
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.288158| train set 4.686x speedup, test set 0.847x speedup, val set 0.983x speedup, step: 1, train time 17.80 s
JOB test speedup 0.9814933905351931
TPCH test speedup 8.336132172163117
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.255800| train set 4.890x speedup, test set 0.847x speedup, val set 0.744x speedup, step: 2, train time 17.77 s
JOB test speedup 1.1540734594414532
TPCH test speedup 8.336132172163117
TPCH skew test speedup 1.332162046432323
Epoch 3/50 |loss: 0.237210| train set 4.894x speedup, test set 1.332x speedup, val set 0.857x speedup, step: 3, train time 18.61 s
JOB test speedup 0.9902053341685659
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 4/50 |loss: 0.223998| train set 4.864x speedup, test set 1.485x speedup, val set 1.226x speedup, step: 1, train time 17.83 s
JOB test speedup 0.9728666956748216
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0250705807483314
Epoch 5/50 |loss: 0.213804| train set 4.647x speedup, test set 1.025x speedup, val set 0.853x speedup, step: 2, train time 17.86 s
JOB test speedup 0.9797329128922303
TPCH test speedup 6.259502837019816
TPCH skew test speedup 1.087946618545801
Epoch 6/50 |loss: 0.203569| train set 4.912x speedup, test set 1.088x speedup, val set 0.857x speedup, step: 3, train time 17.87 s
JOB test speedup 0.9731662113991064
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.204148| train set 4.819x speedup, test set 0.847x speedup, val set 0.956x speedup, step: 4, train time 17.88 s
JOB test speedup 1.0015684861684258
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 8/50 |loss: 0.196485| train set 4.934x speedup, test set 1.088x speedup, val set 0.848x speedup, step: 5, train time 18.00 s
JOB test speedup 1.2375930481756634
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.087946618545801
Epoch 9/50 |loss: 0.189859| train set 4.933x speedup, test set 1.088x speedup, val set 0.861x speedup, step: 6, train time 17.73 s
JOB test speedup 0.9610436723949118
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.184328| train set 4.910x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 7, train time 18.10 s
JOB test speedup 1.1400707994554495
TPCH test speedup 8.336132172163117
TPCH skew test speedup 1.0684738796627566
Epoch 11/50 |loss: 0.179830| train set 4.894x speedup, test set 1.068x speedup, val set 0.805x speedup, step: 8, train time 17.92 s
JOB test speedup 1.0260083988313846
TPCH test speedup 8.336132172163117
TPCH skew test speedup 1.087946618545801
Epoch 12/50 |loss: 0.180102| train set 4.919x speedup, test set 1.088x speedup, val set 0.865x speedup, step: 9, train time 17.70 s
JOB test speedup 0.9827675245403528
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.087946618545801
Epoch 13/50 |loss: 0.171735| train set 4.900x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 10, train time 17.19 s
JOB test speedup 1.0836663476996005
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 14/50 |loss: 0.172611| train set 4.904x speedup, test set 1.485x speedup, val set 1.200x speedup, step: 11, train time 17.38 s
JOB test speedup 0.9809094586274877
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.087385441463186
Epoch 15/50 |loss: 0.173463| train set 4.853x speedup, test set 1.087x speedup, val set 0.956x speedup, step: 12, train time 17.89 s
JOB test speedup 1.1279946966624295
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.168982| train set 4.937x speedup, test set 1.088x speedup, val set 1.002x speedup, step: 13, train time 17.98 s
JOB test speedup 0.9541014714947166
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 17/50 |loss: 0.163401| train set 4.921x speedup, test set 1.485x speedup, val set 0.956x speedup, step: 14, train time 17.71 s
JOB test speedup 0.9898080640206075
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 18/50 |loss: 0.163340| train set 4.878x speedup, test set 1.485x speedup, val set 0.930x speedup, step: 15, train time 18.02 s
JOB test speedup 0.9509039854119947
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 19/50 |loss: 0.159673| train set 4.859x speedup, test set 1.088x speedup, val set 0.865x speedup, step: 16, train time 18.37 s
JOB test speedup 1.0947534197585729
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 20/50 |loss: 0.158808| train set 4.887x speedup, test set 1.088x speedup, val set 0.861x speedup, step: 17, train time 18.21 s
JOB test speedup 0.9615027194309771
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 21/50 |loss: 0.156607| train set 4.814x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 18, train time 18.09 s
JOB test speedup 0.9920089759797075
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4835759735630838
Epoch 22/50 |loss: 0.155191| train set 4.858x speedup, test set 1.484x speedup, val set 0.954x speedup, step: 19, train time 17.80 s
JOB test speedup 1.08501518783142
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 23/50 |loss: 0.154033| train set 4.947x speedup, test set 1.088x speedup, val set 0.898x speedup, step: 20, train time 17.82 s
JOB test speedup 0.9288398659388867
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0684738796627566
Epoch 24/50 |loss: 0.149837| train set 4.788x speedup, test set 1.068x speedup, val set 0.956x speedup, step: 21, train time 18.46 s
JOB test speedup 0.9142548605282459
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 25/50 |loss: 0.148140| train set 4.807x speedup, test set 1.485x speedup, val set 1.046x speedup, step: 22, train time 17.88 s
JOB test speedup 1.0063519261328768
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 26/50 |loss: 0.145441| train set 4.943x speedup, test set 1.088x speedup, val set 0.865x speedup, step: 23, train time 17.84 s
JOB test speedup 0.9467521706055483
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087385441463186
Epoch 27/50 |loss: 0.147405| train set 4.926x speedup, test set 1.087x speedup, val set 0.956x speedup, step: 24, train time 17.89 s
JOB test speedup 0.9151907772359438
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.087385441463186
Epoch 28/50 |loss: 0.146619| train set 4.896x speedup, test set 1.087x speedup, val set 0.956x speedup, step: 25, train time 18.12 s
JOB test speedup 1.0185613690741027
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4835759735630838
Epoch 29/50 |loss: 0.143511| train set 4.947x speedup, test set 1.484x speedup, val set 0.956x speedup, step: 26, train time 18.11 s
JOB test speedup 1.029270364694518
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8463785826525752
Epoch 30/50 |loss: 0.142573| train set 4.858x speedup, test set 0.846x speedup, val set 0.805x speedup, step: 27, train time 18.28 s
JOB test speedup 0.9512892235267254
TPCH test speedup 8.103847157079976
TPCH skew test speedup 1.087946618545801
Epoch 31/50 |loss: 0.141916| train set 4.921x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 28, train time 18.51 s
JOB test speedup 0.9362710481482851
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 32/50 |loss: 0.143569| train set 4.890x speedup, test set 1.485x speedup, val set 0.956x speedup, step: 29, train time 18.12 s
JOB test speedup 0.9615502817339941
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 33/50 |loss: 0.139579| train set 4.946x speedup, test set 1.088x speedup, val set 1.002x speedup, step: 30, train time 18.38 s
JOB test speedup 0.9812793230586242
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 34/50 |loss: 0.145180| train set 4.940x speedup, test set 1.088x speedup, val set 0.931x speedup, step: 31, train time 18.53 s
JOB test speedup 0.9670698188033086
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 35/50 |loss: 0.145692| train set 4.951x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 32, train time 17.92 s
JOB test speedup 1.0135689428617154
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 36/50 |loss: 0.151853| train set 4.948x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 33, train time 18.08 s
JOB test speedup 1.0993725127769292
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.0876454455612974
Epoch 37/50 |loss: 0.139976| train set 4.955x speedup, test set 1.088x speedup, val set 0.885x speedup, step: 34, train time 17.87 s
JOB test speedup 0.9553008410438667
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 38/50 |loss: 0.134503| train set 4.952x speedup, test set 1.485x speedup, val set 0.931x speedup, step: 35, train time 18.09 s
JOB test speedup 0.9615865744017358
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8671779162364766
Epoch 39/50 |loss: 0.135971| train set 4.864x speedup, test set 0.867x speedup, val set 0.811x speedup, step: 36, train time 18.01 s
JOB test speedup 0.9796167250750849
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8463785826525752
Epoch 40/50 |loss: 0.135973| train set 4.864x speedup, test set 0.846x speedup, val set 0.795x speedup, step: 37, train time 18.09 s
JOB test speedup 1.1213236301823892
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.4846207759384964
Epoch 41/50 |loss: 0.136771| train set 4.953x speedup, test set 1.485x speedup, val set 0.956x speedup, step: 38, train time 17.88 s
JOB test speedup 0.9151090294831357
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 42/50 |loss: 0.129460| train set 4.951x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 39, train time 18.01 s
JOB test speedup 0.95692046746701
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 43/50 |loss: 0.133161| train set 4.939x speedup, test set 1.088x speedup, val set 0.941x speedup, step: 40, train time 18.00 s
JOB test speedup 0.9343974551432533
TPCH test speedup 6.081043681836761
TPCH skew test speedup 1.0879297209654946
Epoch 44/50 |loss: 0.130430| train set 4.951x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 41, train time 18.60 s
JOB test speedup 0.9878749215440104
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8463785826525752
Epoch 45/50 |loss: 0.126691| train set 4.862x speedup, test set 0.846x speedup, val set 0.941x speedup, step: 42, train time 18.61 s
JOB test speedup 1.0042457258522264
TPCH test speedup 7.095320283450735
TPCH skew test speedup 1.087946618545801
Epoch 46/50 |loss: 0.125837| train set 4.857x speedup, test set 1.088x speedup, val set 0.942x speedup, step: 43, train time 18.09 s
JOB test speedup 1.01178635835593
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 47/50 |loss: 0.128499| train set 4.953x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 44, train time 18.20 s
JOB test speedup 0.9043591958188968
TPCH test speedup 5.125210456209724
TPCH skew test speedup 1.087946618545801
Epoch 48/50 |loss: 0.126070| train set 4.944x speedup, test set 1.088x speedup, val set 0.941x speedup, step: 45, train time 18.32 s
JOB test speedup 0.935884699713506
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 49/50 |loss: 0.125845| train set 4.949x speedup, test set 1.088x speedup, val set 0.941x speedup, step: 46, train time 18.59 s
Training per epoch cost 18.066 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 0.637s, pg runtime 0.637s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.661s, model runtime 0.661s, pg runtime 0.661s, speedup 1.000x
07, opt runtime 1.437s, model runtime 3.247s, pg runtime 1.437s, speedup 0.442x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.080s, pg runtime 6.143s, speedup 1.010x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
17, opt runtime 3.248s, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
22, opt runtime 0.158s, model runtime 0.158s, pg runtime 0.158s, speedup 1.000x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 4, train speedup 4.864, test speedup 0.990, val speedup 1.226
TPCH best validation speedup epoch: 4, train speedup 4.864, test speedup 8.646, val speedup 1.226
TPCH Skew best validation speedup epoch: 4, train speedup 4.864, test speedup 1.485, val speedup 1.226
execution cost 0:16:05.865564
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.377477, and there are 26626 training samples
in channel 9
JOB test speedup 0.9974238000318743
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.375853| train set 4.501x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 1, train time 19.08 s
JOB test speedup 0.9924707289574894
TPCH test speedup 3.7152161142693827
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.286696| train set 4.685x speedup, test set 0.847x speedup, val set 0.983x speedup, step: 1, train time 17.91 s
JOB test speedup 1.0179381554981262
TPCH test speedup 5.014568943674369
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.255942| train set 4.786x speedup, test set 0.847x speedup, val set 0.973x speedup, step: 2, train time 18.32 s
JOB test speedup 1.108673881521524
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.332162046432323
Epoch 3/50 |loss: 0.237839| train set 4.918x speedup, test set 1.332x speedup, val set 1.210x speedup, step: 1, train time 19.01 s
JOB test speedup 1.0050490094683555
TPCH test speedup 8.25604914444693
TPCH skew test speedup 0.8467185307037698
Epoch 4/50 |loss: 0.225596| train set 4.908x speedup, test set 0.847x speedup, val set 0.732x speedup, step: 2, train time 18.86 s
JOB test speedup 0.9922112296547195
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 0.8081396782637893
Epoch 5/50 |loss: 0.215215| train set 4.552x speedup, test set 0.808x speedup, val set 0.732x speedup, step: 3, train time 21.42 s
JOB test speedup 1.0063365286284631
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 6/50 |loss: 0.206021| train set 4.927x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 4, train time 18.72 s
JOB test speedup 1.0275155828076585
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.205735| train set 4.776x speedup, test set 0.847x speedup, val set 0.977x speedup, step: 5, train time 18.38 s
JOB test speedup 1.0005991592526817
TPCH test speedup 4.354301022484202
TPCH skew test speedup 1.087946618545801
Epoch 8/50 |loss: 0.196946| train set 4.939x speedup, test set 1.088x speedup, val set 0.857x speedup, step: 6, train time 18.31 s
JOB test speedup 0.9533521876185767
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.4846207759384964
Epoch 9/50 |loss: 0.190111| train set 4.942x speedup, test set 1.485x speedup, val set 0.962x speedup, step: 7, train time 18.26 s
JOB test speedup 0.9614143416000986
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 10/50 |loss: 0.186349| train set 4.911x speedup, test set 1.069x speedup, val set 0.745x speedup, step: 8, train time 18.12 s
JOB test speedup 1.0124429498360865
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.0690157018936535
Epoch 11/50 |loss: 0.180981| train set 4.886x speedup, test set 1.069x speedup, val set 0.805x speedup, step: 9, train time 18.11 s
JOB test speedup 0.9502908116400408
TPCH test speedup 6.514264503849583
TPCH skew test speedup 1.0690157018936535
Epoch 12/50 |loss: 0.180435| train set 4.901x speedup, test set 1.069x speedup, val set 0.740x speedup, step: 10, train time 18.13 s
JOB test speedup 0.9610017030045062
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.0690157018936535
Epoch 13/50 |loss: 0.171286| train set 4.913x speedup, test set 1.069x speedup, val set 0.805x speedup, step: 11, train time 18.18 s
JOB test speedup 1.12272081923766
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.4846207759384964
Epoch 14/50 |loss: 0.173607| train set 4.891x speedup, test set 1.485x speedup, val set 0.985x speedup, step: 12, train time 17.91 s
JOB test speedup 0.9614512935957243
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 0.8467185307037698
Epoch 15/50 |loss: 0.188657| train set 4.893x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 13, train time 18.02 s
JOB test speedup 1.0068068455558672
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.172189| train set 4.814x speedup, test set 1.088x speedup, val set 0.857x speedup, step: 14, train time 18.08 s
JOB test speedup 0.9545984495453159
TPCH test speedup 6.555690990617225
TPCH skew test speedup 1.0690157018936535
Epoch 17/50 |loss: 0.165012| train set 4.838x speedup, test set 1.069x speedup, val set 0.808x speedup, step: 15, train time 18.02 s
JOB test speedup 0.9159111599524598
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.1018362985470282
Epoch 18/50 |loss: 0.161685| train set 4.894x speedup, test set 1.102x speedup, val set 0.735x speedup, step: 16, train time 18.11 s
JOB test speedup 0.9614889297397836
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8671779162364766
Epoch 19/50 |loss: 0.159100| train set 4.950x speedup, test set 0.867x speedup, val set 0.741x speedup, step: 17, train time 18.46 s
JOB test speedup 1.0241105157338914
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.159629| train set 4.901x speedup, test set 0.847x speedup, val set 0.747x speedup, step: 18, train time 18.29 s
JOB test speedup 0.9397289886880509
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 1.0690157018936535
Epoch 21/50 |loss: 0.156424| train set 4.816x speedup, test set 1.069x speedup, val set 0.805x speedup, step: 19, train time 18.32 s
JOB test speedup 0.9595792897033377
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.1012607048299754
Epoch 22/50 |loss: 0.153076| train set 4.864x speedup, test set 1.101x speedup, val set 0.814x speedup, step: 20, train time 18.43 s
JOB test speedup 0.94859265915964
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.153453| train set 4.948x speedup, test set 0.847x speedup, val set 0.747x speedup, step: 21, train time 18.08 s
JOB test speedup 0.929663052564581
TPCH test speedup 6.514264503849583
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.149013| train set 4.787x speedup, test set 1.069x speedup, val set 0.795x speedup, step: 22, train time 18.15 s
JOB test speedup 0.9623570556650676
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.1018362985470282
Epoch 25/50 |loss: 0.148426| train set 4.863x speedup, test set 1.102x speedup, val set 0.731x speedup, step: 23, train time 18.01 s
JOB test speedup 1.0251536026183434
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 26/50 |loss: 0.146283| train set 4.944x speedup, test set 1.088x speedup, val set 0.870x speedup, step: 24, train time 18.21 s
JOB test speedup 0.9615221703345085
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8671779162364766
Epoch 27/50 |loss: 0.146289| train set 4.927x speedup, test set 0.867x speedup, val set 0.870x speedup, step: 25, train time 18.29 s
JOB test speedup 0.9400999861397622
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 28/50 |loss: 0.146791| train set 4.797x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 26, train time 18.19 s
JOB test speedup 0.9504898447510335
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.4835759735630838
Epoch 29/50 |loss: 0.143348| train set 4.943x speedup, test set 1.484x speedup, val set 0.937x speedup, step: 27, train time 18.73 s
JOB test speedup 0.9340418368691948
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8671779162364766
Epoch 30/50 |loss: 0.144018| train set 4.860x speedup, test set 0.867x speedup, val set 0.940x speedup, step: 28, train time 18.20 s
JOB test speedup 0.9345485858115132
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.4846207759384964
Epoch 31/50 |loss: 0.141369| train set 4.941x speedup, test set 1.485x speedup, val set 0.956x speedup, step: 29, train time 18.21 s
JOB test speedup 0.9725937735723125
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 32/50 |loss: 0.141372| train set 4.861x speedup, test set 1.069x speedup, val set 0.805x speedup, step: 30, train time 18.14 s
JOB test speedup 0.9470633013227993
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8671779162364766
Epoch 33/50 |loss: 0.138816| train set 4.945x speedup, test set 0.867x speedup, val set 0.857x speedup, step: 31, train time 18.49 s
JOB test speedup 0.948827410290829
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 34/50 |loss: 0.143217| train set 4.940x speedup, test set 1.088x speedup, val set 0.873x speedup, step: 32, train time 18.49 s
JOB test speedup 0.9512628394109872
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 35/50 |loss: 0.146275| train set 4.903x speedup, test set 0.847x speedup, val set 0.808x speedup, step: 33, train time 18.29 s
JOB test speedup 0.9443626491905266
TPCH test speedup 6.564019751323381
TPCH skew test speedup 0.8467185307037698
Epoch 36/50 |loss: 0.146308| train set 4.942x speedup, test set 0.847x speedup, val set 0.799x speedup, step: 34, train time 18.78 s
JOB test speedup 0.9645094849317709
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 37/50 |loss: 0.143722| train set 4.949x speedup, test set 1.088x speedup, val set 0.864x speedup, step: 35, train time 18.32 s
JOB test speedup 0.9503515338102998
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.4846207759384964
Epoch 38/50 |loss: 0.134838| train set 4.938x speedup, test set 1.485x speedup, val set 0.864x speedup, step: 36, train time 18.39 s
JOB test speedup 0.9226773915793586
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 39/50 |loss: 0.137578| train set 4.948x speedup, test set 1.088x speedup, val set 0.902x speedup, step: 37, train time 18.70 s
JOB test speedup 0.9460997603861876
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.137004| train set 4.822x speedup, test set 0.847x speedup, val set 0.794x speedup, step: 38, train time 18.40 s
JOB test speedup 0.9621220157414669
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.0690157018936535
Epoch 41/50 |loss: 0.135627| train set 4.866x speedup, test set 1.069x speedup, val set 0.808x speedup, step: 39, train time 18.26 s
JOB test speedup 0.96806799959187
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 42/50 |loss: 0.128865| train set 4.952x speedup, test set 0.847x speedup, val set 0.809x speedup, step: 40, train time 18.42 s
JOB test speedup 0.9154410997829597
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 43/50 |loss: 0.133788| train set 4.944x speedup, test set 0.847x speedup, val set 0.940x speedup, step: 41, train time 18.50 s
JOB test speedup 0.9186889442529296
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.4846207759384964
Epoch 44/50 |loss: 0.131103| train set 4.947x speedup, test set 1.485x speedup, val set 0.864x speedup, step: 42, train time 18.47 s
JOB test speedup 0.9034416959523969
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 45/50 |loss: 0.130262| train set 4.864x speedup, test set 1.069x speedup, val set 0.794x speedup, step: 43, train time 18.39 s
JOB test speedup 0.9911297400006446
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 46/50 |loss: 0.126850| train set 4.952x speedup, test set 0.847x speedup, val set 0.947x speedup, step: 44, train time 18.37 s
JOB test speedup 0.9701686043221096
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 47/50 |loss: 0.129313| train set 4.951x speedup, test set 1.069x speedup, val set 0.960x speedup, step: 45, train time 18.31 s
JOB test speedup 0.904102041386094
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 48/50 |loss: 0.125285| train set 4.942x speedup, test set 1.069x speedup, val set 0.960x speedup, step: 46, train time 18.62 s
JOB test speedup 0.915131949678871
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 49/50 |loss: 0.128249| train set 4.949x speedup, test set 1.088x speedup, val set 0.941x speedup, step: 47, train time 18.48 s
Training per epoch cost 18.407 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 0.637s, pg runtime 0.637s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.661s, model runtime 0.661s, pg runtime 0.661s, speedup 1.000x
07, opt runtime 1.437s, model runtime 3.247s, pg runtime 1.437s, speedup 0.442x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
17, opt runtime 3.248s, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
22, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 3.377s, pg runtime 5.521s, speedup 1.635x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 23.436s, pg runtime 432.766s, speedup 18.466x
32, opt runtime 15.120s, model runtime 23.316s, pg runtime 566.078s, speedup 24.279x
33, opt runtime 16.639s, model runtime 23.017s, pg runtime 462.544s, speedup 20.095x
34, opt runtime 16.280s, model runtime 23.060s, pg runtime 634.990s, speedup 27.537x
35, opt runtime 16.528s, model runtime 23.747s, pg runtime 620.762s, speedup 26.141x
36, opt runtime 18.690s, model runtime 25.079s, pg runtime 651.942s, speedup 25.995x
37, opt runtime 16.438s, model runtime 23.248s, pg runtime 546.887s, speedup 23.524x
38, opt runtime 16.138s, model runtime 23.246s, pg runtime 501.793s, speedup 21.586x
39, opt runtime 16.770s, model runtime 23.336s, pg runtime 594.754s, speedup 25.486x
40, opt runtime 16.305s, model runtime 22.633s, pg runtime 436.168s, speedup 19.271x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 33.855s, pg runtime 29.760s, speedup 0.879x
22, opt runtime 16.844s, model runtime 38.400s, pg runtime 27.164s, speedup 0.707x
23, opt runtime 20.708s, model runtime 36.358s, pg runtime 20.708s, speedup 0.570x
24, opt runtime 30.649s, model runtime 45.895s, pg runtime 30.649s, speedup 0.668x
25, opt runtime 14.023s, model runtime 35.449s, pg runtime 31.705s, speedup 0.894x
26, opt runtime 30.304s, model runtime 39.002s, pg runtime 30.711s, speedup 0.787x
27, opt runtime 28.312s, model runtime 35.405s, pg runtime 28.312s, speedup 0.800x
28, opt runtime 11.965s, model runtime 37.701s, pg runtime 11.965s, speedup 0.317x
29, opt runtime 21.883s, model runtime 37.185s, pg runtime 24.220s, speedup 0.651x
30, opt runtime 13.053s, model runtime 38.482s, pg runtime 13.053s, speedup 0.339x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 3, train speedup 4.918, test speedup 1.109, val speedup 1.210
TPCH best validation speedup epoch: 3, train speedup 4.918, test speedup 8.256, val speedup 1.210
TPCH Skew best validation speedup epoch: 3, train speedup 4.918, test speedup 1.332, val speedup 1.210
execution cost 0:16:25.844655
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.541625, and there are 26626 training samples
in channel 9
JOB test speedup 1.0565848536934443
TPCH test speedup 6.494682644993008
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.374492| train set 4.333x speedup, test set 1.069x speedup, val set 0.942x speedup, step: 1, train time 19.18 s
JOB test speedup 0.9972104356337188
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.287782| train set 4.678x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 2, train time 17.99 s
JOB test speedup 0.9701022546137567
TPCH test speedup 5.044000440187047
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.255942| train set 4.763x speedup, test set 0.847x speedup, val set 0.874x speedup, step: 3, train time 18.18 s
JOB test speedup 1.012398368288568
TPCH test speedup 5.477986135751683
TPCH skew test speedup 1.332162046432323
Epoch 3/50 |loss: 0.237545| train set 4.920x speedup, test set 1.332x speedup, val set 0.857x speedup, step: 4, train time 19.00 s
JOB test speedup 1.0167861723873362
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8467185307037698
Epoch 4/50 |loss: 0.224030| train set 4.906x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 5, train time 18.39 s
JOB test speedup 0.9983870444064423
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8081396782637893
Epoch 5/50 |loss: 0.213676| train set 4.649x speedup, test set 0.808x speedup, val set 0.730x speedup, step: 6, train time 18.48 s
JOB test speedup 1.0381894083621677
TPCH test speedup 5.231226861694703
TPCH skew test speedup 1.2292278956435643
Epoch 6/50 |loss: 0.205025| train set 4.908x speedup, test set 1.229x speedup, val set 0.852x speedup, step: 7, train time 18.32 s
JOB test speedup 1.0283704698995235
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.205235| train set 4.830x speedup, test set 0.847x speedup, val set 0.729x speedup, step: 8, train time 18.39 s
JOB test speedup 0.9966130103217956
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 8/50 |loss: 0.196829| train set 4.942x speedup, test set 1.088x speedup, val set 0.854x speedup, step: 9, train time 18.51 s
JOB test speedup 1.0184072329358398
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 9/50 |loss: 0.189704| train set 4.837x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 10, train time 18.77 s
JOB test speedup 0.9436497124615489
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 10/50 |loss: 0.183985| train set 4.901x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 11, train time 18.30 s
JOB test speedup 1.1807019784643622
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 11/50 |loss: 0.179076| train set 4.895x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 12, train time 18.30 s
JOB test speedup 1.0438342063203658
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 12/50 |loss: 0.180103| train set 4.894x speedup, test set 1.069x speedup, val set 0.709x speedup, step: 13, train time 18.62 s
JOB test speedup 0.959434457359343
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.171360| train set 4.901x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 14, train time 19.02 s
JOB test speedup 1.529884937017157
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 14/50 |loss: 0.175169| train set 4.937x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 15, train time 18.65 s
JOB test speedup 0.9775492832062632
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 15/50 |loss: 0.194573| train set 4.837x speedup, test set 0.847x speedup, val set 0.739x speedup, step: 16, train time 18.51 s
JOB test speedup 1.2141331938481366
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 16/50 |loss: 0.174565| train set 4.937x speedup, test set 1.485x speedup, val set 0.856x speedup, step: 17, train time 18.71 s
JOB test speedup 0.9542805470974128
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 17/50 |loss: 0.164044| train set 4.926x speedup, test set 1.068x speedup, val set 0.746x speedup, step: 18, train time 18.31 s
JOB test speedup 1.0845223186379567
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 18/50 |loss: 0.161455| train set 4.875x speedup, test set 1.069x speedup, val set 0.853x speedup, step: 19, train time 18.42 s
JOB test speedup 0.9386389511086703
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.158842| train set 4.861x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 20, train time 18.48 s
JOB test speedup 1.2378017499026401
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.160763| train set 4.903x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 21, train time 18.32 s
JOB test speedup 1.0755127132982312
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 21/50 |loss: 0.156624| train set 4.824x speedup, test set 0.847x speedup, val set 0.739x speedup, step: 22, train time 18.60 s
JOB test speedup 1.086540738798629
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.153279| train set 4.866x speedup, test set 1.068x speedup, val set 0.872x speedup, step: 23, train time 18.86 s
JOB test speedup 1.1068420650241402
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.152762| train set 4.867x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 24, train time 18.51 s
JOB test speedup 1.0791893904402203
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.151083| train set 4.818x speedup, test set 1.069x speedup, val set 0.721x speedup, step: 25, train time 18.66 s
JOB test speedup 1.0883756664373492
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 1.0690157018936535
Epoch 25/50 |loss: 0.148354| train set 4.806x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 26, train time 18.31 s
JOB test speedup 1.1817158662797598
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.145695| train set 4.932x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 27, train time 18.37 s
JOB test speedup 1.1588813140542598
TPCH test speedup 4.395606314593704
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.147278| train set 4.938x speedup, test set 0.847x speedup, val set 0.756x speedup, step: 28, train time 18.42 s
JOB test speedup 1.0872245858847103
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8467185307037698
Epoch 28/50 |loss: 0.144796| train set 4.808x speedup, test set 0.847x speedup, val set 0.768x speedup, step: 29, train time 18.18 s
JOB test speedup 1.2088731321848638
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 29/50 |loss: 0.142919| train set 4.943x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 30, train time 19.12 s
JOB test speedup 1.2285373572140672
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8463785826525752
Epoch 30/50 |loss: 0.142354| train set 4.858x speedup, test set 0.846x speedup, val set 0.747x speedup, step: 31, train time 18.29 s
JOB test speedup 1.0223507556918974
TPCH test speedup 6.459913647635446
TPCH skew test speedup 1.0727514430351917
Epoch 31/50 |loss: 0.141175| train set 4.940x speedup, test set 1.073x speedup, val set 0.767x speedup, step: 32, train time 18.51 s
JOB test speedup 1.0284997659780277
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8465360967685259
Epoch 32/50 |loss: 0.144554| train set 4.940x speedup, test set 0.847x speedup, val set 0.808x speedup, step: 33, train time 18.40 s
JOB test speedup 1.0309316459973445
TPCH test speedup 4.869756363891166
TPCH skew test speedup 0.8467185307037698
Epoch 33/50 |loss: 0.140096| train set 4.934x speedup, test set 0.847x speedup, val set 0.791x speedup, step: 34, train time 18.68 s
JOB test speedup 1.460421444252655
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 34/50 |loss: 0.141734| train set 4.872x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 35, train time 18.90 s
JOB test speedup 0.9436352974100006
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 35/50 |loss: 0.147619| train set 4.899x speedup, test set 0.847x speedup, val set 0.808x speedup, step: 36, train time 18.59 s
JOB test speedup 0.9545329843655842
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 36/50 |loss: 0.142698| train set 4.922x speedup, test set 0.847x speedup, val set 0.808x speedup, step: 37, train time 18.53 s
JOB test speedup 1.1872303998881484
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 37/50 |loss: 0.148475| train set 4.892x speedup, test set 0.847x speedup, val set 0.806x speedup, step: 38, train time 18.21 s
JOB test speedup 1.344441535309378
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 38/50 |loss: 0.135685| train set 4.950x speedup, test set 0.867x speedup, val set 0.864x speedup, step: 39, train time 18.20 s
JOB test speedup 1.0881271283398974
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8671779162364766
Epoch 39/50 |loss: 0.135766| train set 4.953x speedup, test set 0.867x speedup, val set 0.808x speedup, step: 40, train time 18.91 s
JOB test speedup 0.9971717278875321
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.135859| train set 4.819x speedup, test set 0.847x speedup, val set 0.806x speedup, step: 41, train time 18.02 s
JOB test speedup 1.2747524210144976
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8467185307037698
Epoch 41/50 |loss: 0.135726| train set 4.939x speedup, test set 0.847x speedup, val set 0.809x speedup, step: 42, train time 18.21 s
JOB test speedup 0.9544988685751892
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8671779162364766
Epoch 42/50 |loss: 0.131070| train set 4.953x speedup, test set 0.867x speedup, val set 0.737x speedup, step: 43, train time 18.41 s
JOB test speedup 0.9981938358053424
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 43/50 |loss: 0.135105| train set 4.949x speedup, test set 0.867x speedup, val set 0.808x speedup, step: 44, train time 18.28 s
JOB test speedup 1.3357760205783862
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.1018362985470282
Epoch 44/50 |loss: 0.130311| train set 4.949x speedup, test set 1.102x speedup, val set 0.765x speedup, step: 45, train time 18.63 s
JOB test speedup 0.939857672370814
TPCH test speedup 4.567280210057989
TPCH skew test speedup 1.0690157018936535
Epoch 45/50 |loss: 0.131550| train set 4.871x speedup, test set 1.069x speedup, val set 0.808x speedup, step: 46, train time 18.21 s
JOB test speedup 0.9249364309477212
TPCH test speedup 3.3642359576960312
TPCH skew test speedup 0.8671779162364766
Epoch 46/50 |loss: 0.128631| train set 4.872x speedup, test set 0.867x speedup, val set 0.960x speedup, step: 1, train time 18.08 s
JOB test speedup 1.067345086243063
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8671779162364766
Epoch 47/50 |loss: 0.127510| train set 4.953x speedup, test set 0.867x speedup, val set 0.874x speedup, step: 2, train time 18.07 s
JOB test speedup 0.9977546773823351
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8467185307037698
Epoch 48/50 |loss: 0.126022| train set 4.941x speedup, test set 0.847x speedup, val set 0.808x speedup, step: 3, train time 18.08 s
JOB test speedup 0.9572515030756937
TPCH test speedup 4.286860124122746
TPCH skew test speedup 0.8671779162364766
Epoch 49/50 |loss: 0.125784| train set 4.953x speedup, test set 0.867x speedup, val set 0.960x speedup, step: 1, train time 18.22 s
Training per epoch cost 18.466 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 1.164s, pg runtime 0.637s, speedup 0.547x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.661s, model runtime 1.219s, pg runtime 0.661s, speedup 0.542x
07, opt runtime 1.437s, model runtime 3.430s, pg runtime 1.437s, speedup 0.419x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
17, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
18, opt runtime 0.612s, model runtime 1.363s, pg runtime 1.357s, speedup 0.996x
19, opt runtime 0.189s, model runtime 0.654s, pg runtime 0.189s, speedup 0.289x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
22, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.353s, pg runtime 0.391s, speedup 1.108x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 70.813s, pg runtime 18.392s, speedup 0.260x
02, opt runtime 23.961s, model runtime 65.782s, pg runtime 32.278s, speedup 0.491x
03, opt runtime 17.779s, model runtime 67.652s, pg runtime 17.779s, speedup 0.263x
04, opt runtime 25.597s, model runtime 61.712s, pg runtime 27.136s, speedup 0.440x
05, opt runtime 14.857s, model runtime 69.366s, pg runtime 14.857s, speedup 0.214x
06, opt runtime 19.263s, model runtime 66.156s, pg runtime 19.263s, speedup 0.291x
07, opt runtime 15.831s, model runtime 58.181s, pg runtime 15.831s, speedup 0.272x
08, opt runtime 9.432s, model runtime 67.176s, pg runtime 9.432s, speedup 0.140x
09, opt runtime 26.874s, model runtime 71.579s, pg runtime 26.874s, speedup 0.375x
10, opt runtime 21.143s, model runtime 66.849s, pg runtime 21.143s, speedup 0.316x
11, opt runtime 7.237s, model runtime 39.132s, pg runtime 17.708s, speedup 0.453x
12, opt runtime 6.284s, model runtime 34.601s, pg runtime 31.019s, speedup 0.896x
13, opt runtime 7.851s, model runtime 41.660s, pg runtime 13.622s, speedup 0.327x
14, opt runtime 7.442s, model runtime 44.434s, pg runtime 14.838s, speedup 0.334x
15, opt runtime 7.110s, model runtime 35.678s, pg runtime 14.286s, speedup 0.400x
16, opt runtime 6.810s, model runtime 35.959s, pg runtime 13.796s, speedup 0.384x
17, opt runtime 6.460s, model runtime 39.889s, pg runtime 16.134s, speedup 0.404x
18, opt runtime 6.656s, model runtime 35.184s, pg runtime 15.260s, speedup 0.434x
19, opt runtime 7.913s, model runtime 31.007s, pg runtime 15.548s, speedup 0.501x
20, opt runtime 7.377s, model runtime 34.537s, pg runtime 28.655s, speedup 0.830x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
12, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
13, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
14, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
15, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
16, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
17, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
18, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
19, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
20, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
21, opt runtime 10.669s, model runtime 66.967s, pg runtime 29.760s, speedup 0.444x
22, opt runtime 16.844s, model runtime 62.706s, pg runtime 27.164s, speedup 0.433x
23, opt runtime 20.708s, model runtime 67.187s, pg runtime 20.708s, speedup 0.308x
24, opt runtime 30.649s, model runtime 63.889s, pg runtime 30.649s, speedup 0.480x
25, opt runtime 14.023s, model runtime 58.579s, pg runtime 31.705s, speedup 0.541x
26, opt runtime 30.304s, model runtime 70.753s, pg runtime 30.711s, speedup 0.434x
27, opt runtime 28.312s, model runtime 67.889s, pg runtime 28.312s, speedup 0.417x
28, opt runtime 11.965s, model runtime 68.966s, pg runtime 11.965s, speedup 0.173x
29, opt runtime 21.883s, model runtime 65.849s, pg runtime 24.220s, speedup 0.368x
30, opt runtime 13.053s, model runtime 67.985s, pg runtime 13.053s, speedup 0.192x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 49, train speedup 4.953, test speedup 0.957, val speedup 0.960
TPCH best validation speedup epoch: 49, train speedup 4.953, test speedup 4.287, val speedup 0.960
TPCH Skew best validation speedup epoch: 49, train speedup 4.953, test speedup 0.867, val speedup 0.960
execution cost 0:16:28.431438
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.412634, and there are 26626 training samples
in channel 9
JOB test speedup 1.0360101276229503
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.4846207759384964
Epoch 0/50 |loss: 0.375492| train set 4.633x speedup, test set 1.485x speedup, val set 0.852x speedup, step: 1, train time 19.04 s
JOB test speedup 0.9618424627009403
TPCH test speedup 4.335289429174345
TPCH skew test speedup 0.9876282772378597
Epoch 1/50 |loss: 0.288523| train set 4.875x speedup, test set 0.988x speedup, val set 0.731x speedup, step: 2, train time 17.80 s
JOB test speedup 0.9809540640927575
TPCH test speedup 3.7152161142693827
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.256241| train set 4.891x speedup, test set 0.847x speedup, val set 0.746x speedup, step: 3, train time 18.28 s
JOB test speedup 1.2382069780899754
TPCH test speedup 6.259502837019816
TPCH skew test speedup 1.332162046432323
Epoch 3/50 |loss: 0.238831| train set 4.922x speedup, test set 1.332x speedup, val set 0.857x speedup, step: 1, train time 18.11 s
JOB test speedup 0.9815966509956735
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 4/50 |loss: 0.223798| train set 4.892x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 2, train time 17.98 s
JOB test speedup 0.991117732780368
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8081396782637893
Epoch 5/50 |loss: 0.214390| train set 4.647x speedup, test set 0.808x speedup, val set 0.731x speedup, step: 3, train time 17.92 s
JOB test speedup 1.0180585475849404
TPCH test speedup 6.259502837019816
TPCH skew test speedup 0.8467185307037698
Epoch 6/50 |loss: 0.205339| train set 4.938x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 4, train time 17.99 s
JOB test speedup 0.9967633677624383
TPCH test speedup 4.850600288406774
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.204761| train set 4.830x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 5, train time 26.41 s
JOB test speedup 1.0207562585974734
TPCH test speedup 5.044000440187047
TPCH skew test speedup 0.8467185307037698
Epoch 8/50 |loss: 0.198418| train set 4.891x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 6, train time 24.22 s
JOB test speedup 1.0079992779668974
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 9/50 |loss: 0.190269| train set 4.932x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 7, train time 23.61 s
JOB test speedup 0.9548465218249252
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.185271| train set 4.914x speedup, test set 0.847x speedup, val set 0.730x speedup, step: 8, train time 24.41 s
JOB test speedup 1.0952277836786908
TPCH test speedup 8.6319809315242
TPCH skew test speedup 0.8463785826525752
Epoch 11/50 |loss: 0.179717| train set 4.881x speedup, test set 0.846x speedup, val set 0.808x speedup, step: 9, train time 23.43 s
JOB test speedup 1.0231796617478657
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 12/50 |loss: 0.182797| train set 4.929x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 10, train time 23.82 s
JOB test speedup 0.9812469818661887
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.172002| train set 4.898x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 11, train time 21.58 s
JOB test speedup 1.0170520845973365
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 14/50 |loss: 0.172878| train set 4.900x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 12, train time 26.01 s
JOB test speedup 0.9898762983753339
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8470304326735105
Epoch 15/50 |loss: 0.179527| train set 4.844x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 13, train time 26.30 s
JOB test speedup 1.035456790724859
TPCH test speedup 5.150818842961407
TPCH skew test speedup 0.8467185307037698
Epoch 16/50 |loss: 0.169902| train set 4.936x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 14, train time 24.22 s
JOB test speedup 1.035685529739244
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 17/50 |loss: 0.162768| train set 4.843x speedup, test set 0.847x speedup, val set 0.806x speedup, step: 15, train time 21.21 s
JOB test speedup 1.041562220078851
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 18/50 |loss: 0.160493| train set 4.874x speedup, test set 0.847x speedup, val set 0.729x speedup, step: 16, train time 21.91 s
JOB test speedup 1.0354371099792001
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.159466| train set 4.936x speedup, test set 0.847x speedup, val set 0.772x speedup, step: 17, train time 21.11 s
JOB test speedup 1.0353188085557845
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.157893| train set 4.883x speedup, test set 0.847x speedup, val set 0.739x speedup, step: 18, train time 20.27 s
JOB test speedup 0.9734725798170232
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 21/50 |loss: 0.156536| train set 4.866x speedup, test set 0.847x speedup, val set 0.786x speedup, step: 19, train time 18.89 s
JOB test speedup 1.019076576732058
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.154112| train set 4.866x speedup, test set 1.068x speedup, val set 0.794x speedup, step: 20, train time 19.40 s
JOB test speedup 1.2563940559448388
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.157003| train set 4.863x speedup, test set 0.847x speedup, val set 0.746x speedup, step: 21, train time 18.99 s
JOB test speedup 1.0176689829563685
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.148530| train set 4.804x speedup, test set 1.069x speedup, val set 0.795x speedup, step: 22, train time 19.77 s
JOB test speedup 1.0073956881339745
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 25/50 |loss: 0.147399| train set 4.790x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 23, train time 19.20 s
JOB test speedup 1.0506745895044778
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.144341| train set 4.951x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 24, train time 19.01 s
JOB test speedup 1.0127018218281212
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.146791| train set 4.929x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 25, train time 18.87 s
JOB test speedup 0.9999586602164827
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 28/50 |loss: 0.147656| train set 4.818x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 26, train time 18.69 s
JOB test speedup 0.9695531657156677
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8463785826525752
Epoch 29/50 |loss: 0.143123| train set 4.864x speedup, test set 0.846x speedup, val set 0.808x speedup, step: 27, train time 19.89 s
JOB test speedup 1.216517309445258
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8463785826525752
Epoch 30/50 |loss: 0.142439| train set 4.856x speedup, test set 0.846x speedup, val set 0.795x speedup, step: 28, train time 20.15 s
JOB test speedup 1.0245082181173906
TPCH test speedup 8.103847157079976
TPCH skew test speedup 0.8467185307037698
Epoch 31/50 |loss: 0.139829| train set 4.941x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 29, train time 19.21 s
JOB test speedup 1.0195498393249371
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8463785826525752
Epoch 32/50 |loss: 0.144985| train set 4.810x speedup, test set 0.846x speedup, val set 0.795x speedup, step: 30, train time 19.41 s
JOB test speedup 0.9500213093672998
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 33/50 |loss: 0.138290| train set 4.947x speedup, test set 0.847x speedup, val set 0.792x speedup, step: 31, train time 20.09 s
JOB test speedup 1.1134726889586546
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 34/50 |loss: 0.141912| train set 4.853x speedup, test set 0.847x speedup, val set 0.721x speedup, step: 32, train time 18.28 s
JOB test speedup 1.0086333165422996
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8472177733037048
Epoch 35/50 |loss: 0.148063| train set 4.942x speedup, test set 0.847x speedup, val set 0.806x speedup, step: 33, train time 19.09 s
JOB test speedup 0.9389408862924399
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 36/50 |loss: 0.138871| train set 4.944x speedup, test set 0.847x speedup, val set 0.792x speedup, step: 34, train time 19.67 s
JOB test speedup 0.9250765680006935
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8465360967685259
Epoch 37/50 |loss: 0.137768| train set 4.950x speedup, test set 0.847x speedup, val set 0.779x speedup, step: 35, train time 19.90 s
JOB test speedup 1.0300680008426542
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 38/50 |loss: 0.133412| train set 4.950x speedup, test set 0.847x speedup, val set 0.746x speedup, step: 36, train time 19.90 s
JOB test speedup 1.0170998445591894
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 39/50 |loss: 0.135461| train set 4.863x speedup, test set 0.847x speedup, val set 0.779x speedup, step: 37, train time 20.00 s
JOB test speedup 0.9950833585135475
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.134996| train set 4.946x speedup, test set 0.847x speedup, val set 0.792x speedup, step: 38, train time 19.66 s
JOB test speedup 1.0434010577798805
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 41/50 |loss: 0.134347| train set 4.949x speedup, test set 0.847x speedup, val set 0.808x speedup, step: 39, train time 19.41 s
JOB test speedup 1.0062673453587698
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 42/50 |loss: 0.127666| train set 4.951x speedup, test set 0.847x speedup, val set 0.740x speedup, step: 40, train time 19.00 s
JOB test speedup 1.0073537295075472
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 43/50 |loss: 0.136363| train set 4.942x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 41, train time 19.12 s
JOB test speedup 0.991209429398812
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 44/50 |loss: 0.129293| train set 4.949x speedup, test set 0.847x speedup, val set 0.790x speedup, step: 42, train time 18.92 s
JOB test speedup 1.0437069483219505
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 45/50 |loss: 0.127054| train set 4.861x speedup, test set 0.847x speedup, val set 0.808x speedup, step: 43, train time 18.61 s
JOB test speedup 0.9949990470576142
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 46/50 |loss: 0.127731| train set 4.947x speedup, test set 0.847x speedup, val set 0.777x speedup, step: 44, train time 18.21 s
JOB test speedup 1.0129984359572548
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 47/50 |loss: 0.127277| train set 4.956x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 45, train time 18.12 s
JOB test speedup 0.995164907247789
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 48/50 |loss: 0.125263| train set 4.939x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 46, train time 19.28 s
JOB test speedup 0.9535220141059716
TPCH test speedup 5.150818842961407
TPCH skew test speedup 0.8467185307037698
Epoch 49/50 |loss: 0.125123| train set 4.949x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 47, train time 19.87 s
Training per epoch cost 20.285 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.183s, pg runtime 0.189s, speedup 1.037x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.404s, pg runtime 0.404s, speedup 1.000x
04, opt runtime 0.637s, model runtime 0.637s, pg runtime 0.637s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.661s, model runtime 0.661s, pg runtime 0.661s, speedup 1.000x
07, opt runtime 1.437s, model runtime 3.247s, pg runtime 1.437s, speedup 0.442x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
17, opt runtime 3.248s, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
22, opt runtime 0.158s, model runtime 0.256s, pg runtime 0.158s, speedup 0.620x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.961x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 3.377s, pg runtime 5.521s, speedup 1.635x
26, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
27, opt runtime 0.278s, model runtime 1.016s, pg runtime 0.948s, speedup 0.933x
========== TPCH
01, opt runtime 18.392s, model runtime 48.604s, pg runtime 18.392s, speedup 0.378x
02, opt runtime 23.961s, model runtime 45.739s, pg runtime 32.278s, speedup 0.706x
03, opt runtime 17.779s, model runtime 47.365s, pg runtime 17.779s, speedup 0.375x
04, opt runtime 25.597s, model runtime 39.374s, pg runtime 27.136s, speedup 0.689x
05, opt runtime 14.857s, model runtime 47.524s, pg runtime 14.857s, speedup 0.313x
06, opt runtime 19.263s, model runtime 48.427s, pg runtime 19.263s, speedup 0.398x
07, opt runtime 15.831s, model runtime 49.113s, pg runtime 15.831s, speedup 0.322x
08, opt runtime 9.432s, model runtime 48.050s, pg runtime 9.432s, speedup 0.196x
09, opt runtime 26.874s, model runtime 45.968s, pg runtime 26.874s, speedup 0.585x
10, opt runtime 21.143s, model runtime 43.215s, pg runtime 21.143s, speedup 0.489x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 33.855s, pg runtime 29.760s, speedup 0.879x
22, opt runtime 16.844s, model runtime 38.400s, pg runtime 27.164s, speedup 0.707x
23, opt runtime 20.708s, model runtime 36.358s, pg runtime 20.708s, speedup 0.570x
24, opt runtime 30.649s, model runtime 45.895s, pg runtime 30.649s, speedup 0.668x
25, opt runtime 14.023s, model runtime 35.449s, pg runtime 31.705s, speedup 0.894x
26, opt runtime 30.304s, model runtime 39.002s, pg runtime 30.711s, speedup 0.787x
27, opt runtime 28.312s, model runtime 35.405s, pg runtime 28.312s, speedup 0.800x
28, opt runtime 11.965s, model runtime 37.701s, pg runtime 11.965s, speedup 0.317x
29, opt runtime 21.883s, model runtime 37.185s, pg runtime 24.220s, speedup 0.651x
30, opt runtime 13.053s, model runtime 38.482s, pg runtime 13.053s, speedup 0.339x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 3, train speedup 4.922, test speedup 1.238, val speedup 0.857
TPCH best validation speedup epoch: 3, train speedup 4.922, test speedup 6.260, val speedup 0.857
TPCH Skew best validation speedup epoch: 3, train speedup 4.922, test speedup 1.332, val speedup 0.857
execution cost 0:18:08.400110
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.403045, and there are 26626 training samples
in channel 9
JOB test speedup 0.9959555661645685
TPCH test speedup 6.68149446061608
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.375965| train set 3.944x speedup, test set 1.069x speedup, val set 0.720x speedup, step: 1, train time 21.88 s
JOB test speedup 0.9843826992222171
TPCH test speedup 3.7152161142693827
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.290045| train set 4.870x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 1, train time 21.40 s
JOB test speedup 0.9807068337617925
TPCH test speedup 4.305376260389269
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.255591| train set 4.795x speedup, test set 0.847x speedup, val set 0.740x speedup, step: 1, train time 19.03 s
JOB test speedup 1.1005619891634957
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 3/50 |loss: 0.238654| train set 4.921x speedup, test set 1.485x speedup, val set 0.857x speedup, step: 1, train time 19.10 s
JOB test speedup 1.0336454160960495
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 4/50 |loss: 0.226747| train set 4.908x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 2, train time 19.19 s
JOB test speedup 0.9856284539381716
TPCH test speedup 6.564019751323381
TPCH skew test speedup 0.8671779162364766
Epoch 5/50 |loss: 0.214270| train set 4.773x speedup, test set 0.867x speedup, val set 0.735x speedup, step: 3, train time 18.38 s
JOB test speedup 0.9706578535913901
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 6/50 |loss: 0.206479| train set 4.925x speedup, test set 1.485x speedup, val set 0.857x speedup, step: 1, train time 18.32 s
JOB test speedup 1.0531719611673822
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.206328| train set 4.826x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 2, train time 19.67 s
JOB test speedup 1.1743539650812638
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8671779162364766
Epoch 8/50 |loss: 0.197981| train set 4.903x speedup, test set 0.867x speedup, val set 0.857x speedup, step: 3, train time 19.41 s
JOB test speedup 1.1911053496482842
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.1018362985470282
Epoch 9/50 |loss: 0.191291| train set 4.940x speedup, test set 1.102x speedup, val set 0.752x speedup, step: 4, train time 19.58 s
JOB test speedup 0.9640359778909559
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8671779162364766
Epoch 10/50 |loss: 0.186995| train set 4.916x speedup, test set 0.867x speedup, val set 0.738x speedup, step: 5, train time 18.08 s
JOB test speedup 1.1729457027909016
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8671779162364766
Epoch 11/50 |loss: 0.180436| train set 4.891x speedup, test set 0.867x speedup, val set 0.771x speedup, step: 6, train time 17.07 s
JOB test speedup 1.063017476591961
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8671779162364766
Epoch 12/50 |loss: 0.182472| train set 4.913x speedup, test set 0.867x speedup, val set 0.735x speedup, step: 7, train time 17.17 s
JOB test speedup 0.9365876298724207
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8671779162364766
Epoch 13/50 |loss: 0.172425| train set 4.900x speedup, test set 0.867x speedup, val set 0.810x speedup, step: 8, train time 17.20 s
JOB test speedup 1.4370098443771708
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.1018362985470282
Epoch 14/50 |loss: 0.174237| train set 4.899x speedup, test set 1.102x speedup, val set 0.739x speedup, step: 9, train time 17.10 s
JOB test speedup 0.9774016788139361
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 15/50 |loss: 0.183330| train set 4.919x speedup, test set 1.069x speedup, val set 0.764x speedup, step: 10, train time 17.09 s
JOB test speedup 1.411286043649679
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 16/50 |loss: 0.172532| train set 4.828x speedup, test set 1.485x speedup, val set 0.857x speedup, step: 11, train time 17.11 s
JOB test speedup 0.9214017258340778
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.1018362985470282
Epoch 17/50 |loss: 0.165077| train set 4.849x speedup, test set 1.102x speedup, val set 0.797x speedup, step: 12, train time 17.01 s
JOB test speedup 1.0509104059368288
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.1018362985470282
Epoch 18/50 |loss: 0.162643| train set 4.890x speedup, test set 1.102x speedup, val set 0.733x speedup, step: 13, train time 17.18 s
JOB test speedup 1.1940046777154107
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8671779162364766
Epoch 19/50 |loss: 0.160724| train set 4.950x speedup, test set 0.867x speedup, val set 0.739x speedup, step: 14, train time 17.29 s
JOB test speedup 1.274936683163871
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.1018362985470282
Epoch 20/50 |loss: 0.159836| train set 4.892x speedup, test set 1.102x speedup, val set 0.873x speedup, step: 1, train time 16.98 s
JOB test speedup 0.9423112249063139
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 21/50 |loss: 0.155989| train set 4.819x speedup, test set 0.867x speedup, val set 0.799x speedup, step: 2, train time 17.17 s
JOB test speedup 1.4394097060222688
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.1012607048299754
Epoch 22/50 |loss: 0.154704| train set 4.864x speedup, test set 1.101x speedup, val set 0.813x speedup, step: 3, train time 17.06 s
JOB test speedup 1.4366642933664104
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 23/50 |loss: 0.157578| train set 4.866x speedup, test set 0.867x speedup, val set 0.932x speedup, step: 1, train time 17.08 s
JOB test speedup 0.9214467556580433
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.1018362985470282
Epoch 24/50 |loss: 0.150093| train set 4.786x speedup, test set 1.102x speedup, val set 0.784x speedup, step: 2, train time 17.26 s
JOB test speedup 1.0258932035663495
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.1018362985470282
Epoch 25/50 |loss: 0.148394| train set 4.804x speedup, test set 1.102x speedup, val set 0.955x speedup, step: 1, train time 17.16 s
JOB test speedup 1.190223758802261
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8671779162364766
Epoch 26/50 |loss: 0.144915| train set 4.944x speedup, test set 0.867x speedup, val set 0.747x speedup, step: 2, train time 17.09 s
JOB test speedup 1.0320967028068428
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 27/50 |loss: 0.146042| train set 4.940x speedup, test set 0.867x speedup, val set 0.889x speedup, step: 3, train time 17.12 s
JOB test speedup 1.0491354646581161
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 28/50 |loss: 0.145621| train set 4.853x speedup, test set 1.088x speedup, val set 0.957x speedup, step: 1, train time 16.98 s
JOB test speedup 1.659344644817937
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 29/50 |loss: 0.143842| train set 4.864x speedup, test set 1.485x speedup, val set 1.227x speedup, step: 1, train time 17.03 s
JOB test speedup 1.4031202357963208
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8668213447327278
Epoch 30/50 |loss: 0.140505| train set 4.860x speedup, test set 0.867x speedup, val set 0.914x speedup, step: 2, train time 17.20 s
JOB test speedup 1.3475138495073489
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.1018362985470282
Epoch 31/50 |loss: 0.140661| train set 4.924x speedup, test set 1.102x speedup, val set 0.811x speedup, step: 3, train time 17.19 s
JOB test speedup 1.0134750615531714
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.1012607048299754
Epoch 32/50 |loss: 0.140975| train set 4.851x speedup, test set 1.101x speedup, val set 0.791x speedup, step: 4, train time 17.16 s
JOB test speedup 1.3444536521133452
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 33/50 |loss: 0.138550| train set 4.903x speedup, test set 0.867x speedup, val set 0.781x speedup, step: 5, train time 17.09 s
JOB test speedup 1.3321341018613349
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 34/50 |loss: 0.141312| train set 4.860x speedup, test set 1.088x speedup, val set 0.957x speedup, step: 6, train time 16.99 s
JOB test speedup 1.4075596174578782
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 35/50 |loss: 0.143364| train set 4.902x speedup, test set 0.847x speedup, val set 0.957x speedup, step: 7, train time 17.11 s
JOB test speedup 1.383851204316109
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 36/50 |loss: 0.140315| train set 4.944x speedup, test set 1.069x speedup, val set 0.792x speedup, step: 8, train time 17.10 s
JOB test speedup 1.3356512342985294
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 37/50 |loss: 0.139138| train set 4.955x speedup, test set 0.867x speedup, val set 0.781x speedup, step: 9, train time 17.28 s
JOB test speedup 1.4293929874608187
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 38/50 |loss: 0.133679| train set 4.952x speedup, test set 0.867x speedup, val set 0.782x speedup, step: 10, train time 17.08 s
JOB test speedup 1.3727820896342968
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 39/50 |loss: 0.135497| train set 4.904x speedup, test set 0.867x speedup, val set 0.781x speedup, step: 11, train time 17.09 s
JOB test speedup 1.152971867447103
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.134977| train set 4.863x speedup, test set 0.847x speedup, val set 0.792x speedup, step: 12, train time 17.18 s
JOB test speedup 1.4113323883869588
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 41/50 |loss: 0.134227| train set 4.954x speedup, test set 0.867x speedup, val set 0.957x speedup, step: 13, train time 17.09 s
JOB test speedup 1.342399133892391
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 42/50 |loss: 0.129381| train set 4.951x speedup, test set 0.867x speedup, val set 0.811x speedup, step: 14, train time 17.18 s
JOB test speedup 0.9252434718256866
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 43/50 |loss: 0.139667| train set 4.938x speedup, test set 0.867x speedup, val set 0.796x speedup, step: 15, train time 17.09 s
JOB test speedup 1.309876676070205
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 44/50 |loss: 0.131609| train set 4.948x speedup, test set 1.485x speedup, val set 0.957x speedup, step: 16, train time 17.09 s
JOB test speedup 0.9192021335491022
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 45/50 |loss: 0.128694| train set 4.866x speedup, test set 1.068x speedup, val set 0.792x speedup, step: 17, train time 17.21 s
JOB test speedup 1.1629876969877155
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8671779162364766
Epoch 46/50 |loss: 0.126429| train set 4.872x speedup, test set 0.867x speedup, val set 0.813x speedup, step: 18, train time 17.03 s
JOB test speedup 1.073449958273279
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 47/50 |loss: 0.127752| train set 4.956x speedup, test set 0.867x speedup, val set 0.813x speedup, step: 19, train time 17.07 s
JOB test speedup 1.1400212599697848
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8467185307037698
Epoch 48/50 |loss: 0.126734| train set 4.943x speedup, test set 0.847x speedup, val set 0.782x speedup, step: 20, train time 17.10 s
JOB test speedup 0.9977976719815229
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 49/50 |loss: 0.126745| train set 4.949x speedup, test set 0.867x speedup, val set 0.797x speedup, step: 21, train time 17.18 s
Training per epoch cost 17.634 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.430s, pg runtime 1.437s, speedup 0.419x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 2.593s, pg runtime 8.283s, speedup 3.195x
14, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
15, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
16, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
17, opt runtime 3.248s, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
18, opt runtime 0.612s, model runtime 1.281s, pg runtime 1.357s, speedup 1.059x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 4.251s, pg runtime 3.112s, speedup 0.732x
21, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
22, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.961x
24, opt runtime 0.348s, model runtime 0.353s, pg runtime 0.391s, speedup 1.108x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 36.429s, pg runtime 17.708s, speedup 0.486x
12, opt runtime 6.284s, model runtime 39.704s, pg runtime 31.019s, speedup 0.781x
13, opt runtime 7.851s, model runtime 30.956s, pg runtime 13.622s, speedup 0.440x
14, opt runtime 7.442s, model runtime 32.816s, pg runtime 14.838s, speedup 0.452x
15, opt runtime 7.110s, model runtime 38.849s, pg runtime 14.286s, speedup 0.368x
16, opt runtime 6.810s, model runtime 39.840s, pg runtime 13.796s, speedup 0.346x
17, opt runtime 6.460s, model runtime 33.445s, pg runtime 16.134s, speedup 0.482x
18, opt runtime 6.656s, model runtime 39.236s, pg runtime 15.260s, speedup 0.389x
19, opt runtime 7.913s, model runtime 32.779s, pg runtime 15.548s, speedup 0.474x
20, opt runtime 7.377s, model runtime 42.222s, pg runtime 28.655s, speedup 0.679x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 29, train speedup 4.864, test speedup 1.659, val speedup 1.227
TPCH best validation speedup epoch: 29, train speedup 4.864, test speedup 6.800, val speedup 1.227
TPCH Skew best validation speedup epoch: 29, train speedup 4.864, test speedup 1.485, val speedup 1.227
execution cost 0:15:43.064235
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.354254, and there are 26626 training samples
in channel 9
JOB test speedup 1.0062413986545338
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.375761| train set 4.298x speedup, test set 1.069x speedup, val set 0.838x speedup, step: 1, train time 18.32 s
JOB test speedup 0.9853693905001382
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.288663| train set 4.824x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 2, train time 16.71 s
JOB test speedup 1.0178770300576554
TPCH test speedup 8.25604914444693
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.255935| train set 4.890x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 3, train time 16.80 s
JOB test speedup 1.2966233735871315
TPCH test speedup 6.259502837019816
TPCH skew test speedup 1.332162046432323
Epoch 3/50 |loss: 0.238040| train set 4.920x speedup, test set 1.332x speedup, val set 0.857x speedup, step: 1, train time 16.69 s
JOB test speedup 1.003035217872324
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 4/50 |loss: 0.224810| train set 4.901x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 2, train time 16.87 s
JOB test speedup 1.1582266379132002
TPCH test speedup 3.8410024397766
TPCH skew test speedup 1.0250705807483314
Epoch 5/50 |loss: 0.215434| train set 4.635x speedup, test set 1.025x speedup, val set 0.853x speedup, step: 3, train time 17.10 s
JOB test speedup 1.017423794930897
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.087946618545801
Epoch 6/50 |loss: 0.206102| train set 4.905x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 4, train time 17.11 s
JOB test speedup 1.2851234305812493
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.204778| train set 4.827x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 5, train time 16.88 s
JOB test speedup 1.0089275312789614
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 8/50 |loss: 0.198486| train set 4.933x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 6, train time 16.79 s
JOB test speedup 1.1648443720523862
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 9/50 |loss: 0.190938| train set 4.823x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 7, train time 16.87 s
JOB test speedup 0.9500631680378574
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.186390| train set 4.898x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 8, train time 16.73 s
JOB test speedup 1.5141154988177286
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 11/50 |loss: 0.179876| train set 4.887x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 9, train time 17.20 s
JOB test speedup 1.0260219943336988
TPCH test speedup 4.335736971461483
TPCH skew test speedup 1.087946618545801
Epoch 12/50 |loss: 0.181605| train set 4.900x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 10, train time 16.88 s
JOB test speedup 0.9481975225088319
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.171949| train set 4.901x speedup, test set 0.847x speedup, val set 0.730x speedup, step: 11, train time 16.89 s
JOB test speedup 1.4669227870618877
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 14/50 |loss: 0.174810| train set 4.896x speedup, test set 1.088x speedup, val set 0.853x speedup, step: 12, train time 16.99 s
JOB test speedup 0.9769215598447468
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8463785826525752
Epoch 15/50 |loss: 0.180100| train set 4.919x speedup, test set 0.846x speedup, val set 0.731x speedup, step: 13, train time 16.79 s
JOB test speedup 1.1458343777570164
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.171810| train set 4.951x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 14, train time 17.29 s
JOB test speedup 0.9761174013094971
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8463785826525752
Epoch 17/50 |loss: 0.164596| train set 4.936x speedup, test set 0.846x speedup, val set 0.731x speedup, step: 15, train time 16.98 s
JOB test speedup 1.180587959648558
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 18/50 |loss: 0.162562| train set 4.903x speedup, test set 0.847x speedup, val set 0.856x speedup, step: 16, train time 16.99 s
JOB test speedup 1.225655147871145
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 19/50 |loss: 0.159375| train set 4.815x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 17, train time 17.08 s
JOB test speedup 1.1625496619023363
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.158262| train set 4.887x speedup, test set 0.847x speedup, val set 0.856x speedup, step: 18, train time 16.80 s
JOB test speedup 1.063362355278311
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8463785826525752
Epoch 21/50 |loss: 0.155640| train set 4.817x speedup, test set 0.846x speedup, val set 0.852x speedup, step: 19, train time 17.29 s
JOB test speedup 1.3941777958967654
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8463785826525752
Epoch 22/50 |loss: 0.154697| train set 4.942x speedup, test set 0.846x speedup, val set 0.852x speedup, step: 20, train time 17.01 s
JOB test speedup 1.3374328797654886
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 23/50 |loss: 0.159647| train set 4.905x speedup, test set 1.088x speedup, val set 0.848x speedup, step: 21, train time 17.18 s
JOB test speedup 0.9614036174445009
TPCH test speedup 6.419138565979257
TPCH skew test speedup 0.8467185307037698
Epoch 24/50 |loss: 0.155298| train set 4.794x speedup, test set 0.847x speedup, val set 0.722x speedup, step: 22, train time 17.00 s
JOB test speedup 0.9659466596324234
TPCH test speedup 6.419138565979257
TPCH skew test speedup 1.087946618545801
Epoch 25/50 |loss: 0.148244| train set 4.842x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 23, train time 16.99 s
JOB test speedup 1.0245490481245045
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 26/50 |loss: 0.145575| train set 4.950x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 24, train time 17.09 s
JOB test speedup 0.9510661694792569
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 27/50 |loss: 0.146812| train set 4.939x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 25, train time 17.58 s
JOB test speedup 0.9723184227837919
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087385441463186
Epoch 28/50 |loss: 0.145791| train set 4.818x speedup, test set 1.087x speedup, val set 0.852x speedup, step: 26, train time 17.10 s
JOB test speedup 1.1658650696729773
TPCH test speedup 6.419138565979257
TPCH skew test speedup 0.8463785826525752
Epoch 29/50 |loss: 0.144453| train set 4.946x speedup, test set 0.846x speedup, val set 0.840x speedup, step: 27, train time 17.20 s
JOB test speedup 1.3731102433087032
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087385441463186
Epoch 30/50 |loss: 0.141890| train set 4.863x speedup, test set 1.087x speedup, val set 0.853x speedup, step: 28, train time 17.22 s
JOB test speedup 1.0199266204532356
TPCH test speedup 6.419138565979257
TPCH skew test speedup 0.8467185307037698
Epoch 31/50 |loss: 0.140448| train set 4.942x speedup, test set 0.847x speedup, val set 0.852x speedup, step: 29, train time 17.19 s
JOB test speedup 1.1776639781873575
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087385441463186
Epoch 32/50 |loss: 0.140247| train set 4.938x speedup, test set 1.087x speedup, val set 0.861x speedup, step: 1, train time 17.54 s
JOB test speedup 1.030480370817613
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 33/50 |loss: 0.139979| train set 4.947x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 2, train time 17.18 s
JOB test speedup 1.1105952940150627
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 34/50 |loss: 0.142289| train set 4.944x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 3, train time 17.28 s
JOB test speedup 1.2965469399539589
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087385441463186
Epoch 35/50 |loss: 0.148814| train set 4.941x speedup, test set 1.087x speedup, val set 0.852x speedup, step: 4, train time 17.40 s
JOB test speedup 1.2505949613636045
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 36/50 |loss: 0.143488| train set 4.947x speedup, test set 1.088x speedup, val set 0.853x speedup, step: 5, train time 17.22 s
JOB test speedup 1.119668852430655
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 37/50 |loss: 0.152409| train set 4.950x speedup, test set 1.088x speedup, val set 0.840x speedup, step: 6, train time 17.49 s
JOB test speedup 1.3568054947888275
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 38/50 |loss: 0.137655| train set 4.943x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 7, train time 17.30 s
JOB test speedup 1.0594611679414079
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 39/50 |loss: 0.138582| train set 4.946x speedup, test set 0.847x speedup, val set 0.840x speedup, step: 8, train time 17.20 s
JOB test speedup 1.022925591991959
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.137222| train set 4.871x speedup, test set 0.847x speedup, val set 0.743x speedup, step: 9, train time 17.49 s
JOB test speedup 1.138480415890678
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 41/50 |loss: 0.132694| train set 4.955x speedup, test set 0.847x speedup, val set 0.852x speedup, step: 10, train time 17.38 s
JOB test speedup 0.9772566499055337
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 42/50 |loss: 0.128433| train set 4.952x speedup, test set 1.088x speedup, val set 0.853x speedup, step: 11, train time 17.59 s
JOB test speedup 0.952990875617357
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 43/50 |loss: 0.131231| train set 4.933x speedup, test set 0.847x speedup, val set 0.722x speedup, step: 12, train time 17.40 s
JOB test speedup 1.139245011879616
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 44/50 |loss: 0.129583| train set 4.948x speedup, test set 0.847x speedup, val set 0.853x speedup, step: 13, train time 17.41 s
JOB test speedup 1.1594946738358354
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 45/50 |loss: 0.129484| train set 4.868x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 14, train time 17.27 s
JOB test speedup 1.1363967302798308
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 46/50 |loss: 0.125416| train set 4.868x speedup, test set 0.847x speedup, val set 0.858x speedup, step: 15, train time 17.29 s
JOB test speedup 1.1659849845617654
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 47/50 |loss: 0.129137| train set 4.954x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 16, train time 17.61 s
JOB test speedup 1.0205241691861966
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 48/50 |loss: 0.127147| train set 4.942x speedup, test set 0.847x speedup, val set 0.853x speedup, step: 17, train time 17.52 s
JOB test speedup 1.0383916135745557
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087385441463186
Epoch 49/50 |loss: 0.125536| train set 4.941x speedup, test set 1.087x speedup, val set 0.848x speedup, step: 18, train time 17.57 s
Training per epoch cost 17.175 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.404s, pg runtime 0.404s, speedup 1.000x
04, opt runtime 0.637s, model runtime 0.752s, pg runtime 0.637s, speedup 0.847x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.661s, model runtime 0.739s, pg runtime 0.661s, speedup 0.894x
07, opt runtime 1.437s, model runtime 3.430s, pg runtime 1.437s, speedup 0.419x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 3.504s, pg runtime 6.143s, speedup 1.753x
13, opt runtime 2.593s, model runtime 2.593s, pg runtime 8.283s, speedup 3.195x
14, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
15, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
16, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
17, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
18, opt runtime 0.612s, model runtime 1.281s, pg runtime 1.357s, speedup 1.059x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
22, opt runtime 0.158s, model runtime 0.256s, pg runtime 0.158s, speedup 0.620x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.391s, pg runtime 0.391s, speedup 1.000x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 70.813s, pg runtime 18.392s, speedup 0.260x
02, opt runtime 23.961s, model runtime 65.782s, pg runtime 32.278s, speedup 0.491x
03, opt runtime 17.779s, model runtime 67.652s, pg runtime 17.779s, speedup 0.263x
04, opt runtime 25.597s, model runtime 61.712s, pg runtime 27.136s, speedup 0.440x
05, opt runtime 14.857s, model runtime 69.366s, pg runtime 14.857s, speedup 0.214x
06, opt runtime 19.263s, model runtime 66.156s, pg runtime 19.263s, speedup 0.291x
07, opt runtime 15.831s, model runtime 58.181s, pg runtime 15.831s, speedup 0.272x
08, opt runtime 9.432s, model runtime 67.176s, pg runtime 9.432s, speedup 0.140x
09, opt runtime 26.874s, model runtime 71.579s, pg runtime 26.874s, speedup 0.375x
10, opt runtime 21.143s, model runtime 66.849s, pg runtime 21.143s, speedup 0.316x
11, opt runtime 7.237s, model runtime 39.132s, pg runtime 17.708s, speedup 0.453x
12, opt runtime 6.284s, model runtime 34.601s, pg runtime 31.019s, speedup 0.896x
13, opt runtime 7.851s, model runtime 41.660s, pg runtime 13.622s, speedup 0.327x
14, opt runtime 7.442s, model runtime 44.434s, pg runtime 14.838s, speedup 0.334x
15, opt runtime 7.110s, model runtime 35.678s, pg runtime 14.286s, speedup 0.400x
16, opt runtime 6.810s, model runtime 35.959s, pg runtime 13.796s, speedup 0.384x
17, opt runtime 6.460s, model runtime 39.889s, pg runtime 16.134s, speedup 0.404x
18, opt runtime 6.656s, model runtime 35.184s, pg runtime 15.260s, speedup 0.434x
19, opt runtime 7.913s, model runtime 31.007s, pg runtime 15.548s, speedup 0.501x
20, opt runtime 7.377s, model runtime 34.537s, pg runtime 28.655s, speedup 0.830x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 66.967s, pg runtime 29.760s, speedup 0.444x
22, opt runtime 16.844s, model runtime 62.706s, pg runtime 27.164s, speedup 0.433x
23, opt runtime 20.708s, model runtime 67.187s, pg runtime 20.708s, speedup 0.308x
24, opt runtime 30.649s, model runtime 63.889s, pg runtime 30.649s, speedup 0.480x
25, opt runtime 14.023s, model runtime 58.579s, pg runtime 31.705s, speedup 0.541x
26, opt runtime 30.304s, model runtime 70.753s, pg runtime 30.711s, speedup 0.434x
27, opt runtime 28.312s, model runtime 67.889s, pg runtime 28.312s, speedup 0.417x
28, opt runtime 11.965s, model runtime 68.966s, pg runtime 11.965s, speedup 0.173x
29, opt runtime 21.883s, model runtime 65.849s, pg runtime 24.220s, speedup 0.368x
30, opt runtime 13.053s, model runtime 67.985s, pg runtime 13.053s, speedup 0.192x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 32, train speedup 4.938, test speedup 1.178, val speedup 0.861
TPCH best validation speedup epoch: 32, train speedup 4.938, test speedup 4.418, val speedup 0.861
TPCH Skew best validation speedup epoch: 32, train speedup 4.938, test speedup 1.087, val speedup 0.861
execution cost 0:15:17.723248
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.367091, and there are 26626 training samples
in channel 9
JOB test speedup 0.9973802149934102
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.1018362985470282
Epoch 0/50 |loss: 0.377658| train set 3.903x speedup, test set 1.102x speedup, val set 0.724x speedup, step: 1, train time 18.32 s
JOB test speedup 0.9957719638502497
TPCH test speedup 8.25604914444693
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.289272| train set 4.804x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 1, train time 16.82 s
JOB test speedup 0.980069699526221
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.0690157018936535
Epoch 2/50 |loss: 0.255931| train set 4.696x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 1, train time 17.21 s
JOB test speedup 1.013440117497756
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 3/50 |loss: 0.239511| train set 4.927x speedup, test set 1.485x speedup, val set 0.857x speedup, step: 1, train time 17.06 s
JOB test speedup 0.9928090497557234
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 4/50 |loss: 0.225849| train set 4.909x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 2, train time 16.99 s
JOB test speedup 0.992436268702769
TPCH test speedup 5.014568943674369
TPCH skew test speedup 0.8267566675404998
Epoch 5/50 |loss: 0.215090| train set 4.692x speedup, test set 0.827x speedup, val set 0.736x speedup, step: 3, train time 17.10 s
JOB test speedup 1.0061148148973809
TPCH test speedup 8.336132172163117
TPCH skew test speedup 1.0690157018936535
Epoch 6/50 |loss: 0.206026| train set 4.907x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 4, train time 17.18 s
JOB test speedup 0.9845217706307978
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.206986| train set 4.827x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 5, train time 17.02 s
JOB test speedup 0.9838803213764471
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 8/50 |loss: 0.201136| train set 4.893x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 6, train time 17.49 s
JOB test speedup 1.0892824097476348
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 9/50 |loss: 0.193025| train set 4.849x speedup, test set 1.069x speedup, val set 0.776x speedup, step: 7, train time 17.12 s
JOB test speedup 0.9548271651901651
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.185328| train set 4.911x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 8, train time 17.27 s
JOB test speedup 1.0253206610471393
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 11/50 |loss: 0.181703| train set 4.894x speedup, test set 0.847x speedup, val set 0.810x speedup, step: 9, train time 17.10 s
JOB test speedup 1.0328668035869382
TPCH test speedup 4.335736971461483
TPCH skew test speedup 0.8467185307037698
Epoch 12/50 |loss: 0.182937| train set 4.838x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 10, train time 17.19 s
JOB test speedup 0.9341975926388404
TPCH test speedup 4.395606314593704
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.170722| train set 4.901x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 11, train time 17.40 s
JOB test speedup 1.0187890823491024
TPCH test speedup 6.606662320739053
TPCH skew test speedup 1.0690157018936535
Epoch 14/50 |loss: 0.174470| train set 4.945x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 12, train time 17.58 s
JOB test speedup 1.0103923583235093
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8463785826525752
Epoch 15/50 |loss: 0.184963| train set 4.929x speedup, test set 0.846x speedup, val set 0.731x speedup, step: 13, train time 17.31 s
JOB test speedup 0.9654941735145717
TPCH test speedup 5.044000440187047
TPCH skew test speedup 0.8467185307037698
Epoch 16/50 |loss: 0.172546| train set 4.828x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 14, train time 17.41 s
JOB test speedup 0.9289843968099576
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8463785826525752
Epoch 17/50 |loss: 0.162824| train set 4.840x speedup, test set 0.846x speedup, val set 0.744x speedup, step: 15, train time 17.42 s
JOB test speedup 1.005988102068587
TPCH test speedup 6.606662320739053
TPCH skew test speedup 1.0690157018936535
Epoch 18/50 |loss: 0.161951| train set 4.890x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 16, train time 17.86 s
JOB test speedup 1.2315408830588797
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.158116| train set 4.868x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 17, train time 17.48 s
JOB test speedup 1.3131027676655973
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.159283| train set 4.895x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 18, train time 17.40 s
JOB test speedup 0.9510361361227063
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 21/50 |loss: 0.155021| train set 4.823x speedup, test set 0.847x speedup, val set 0.730x speedup, step: 19, train time 17.40 s
JOB test speedup 1.5888767510043564
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8463785826525752
Epoch 22/50 |loss: 0.153923| train set 4.948x speedup, test set 0.846x speedup, val set 0.734x speedup, step: 20, train time 17.18 s
JOB test speedup 0.9501875880846674
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.155400| train set 4.951x speedup, test set 0.847x speedup, val set 0.732x speedup, step: 21, train time 17.20 s
JOB test speedup 0.9770068490673331
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.149443| train set 4.807x speedup, test set 1.069x speedup, val set 0.715x speedup, step: 22, train time 17.41 s
JOB test speedup 1.219689254963985
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 25/50 |loss: 0.146790| train set 4.803x speedup, test set 1.069x speedup, val set 0.729x speedup, step: 23, train time 17.39 s
JOB test speedup 1.006312208994935
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.146297| train set 4.941x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 24, train time 17.38 s
JOB test speedup 1.0286341311292984
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.146459| train set 4.934x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 25, train time 17.30 s
JOB test speedup 1.0460777570767612
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 28/50 |loss: 0.145183| train set 4.937x speedup, test set 0.847x speedup, val set 0.743x speedup, step: 26, train time 17.29 s
JOB test speedup 1.3212103263869983
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 29/50 |loss: 0.142565| train set 4.940x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 27, train time 17.49 s
JOB test speedup 1.5508264102127527
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8463785826525752
Epoch 30/50 |loss: 0.142820| train set 4.861x speedup, test set 0.846x speedup, val set 0.779x speedup, step: 28, train time 17.38 s
JOB test speedup 1.0118998543976292
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.0690157018936535
Epoch 31/50 |loss: 0.140890| train set 4.941x speedup, test set 1.069x speedup, val set 0.796x speedup, step: 29, train time 17.58 s
JOB test speedup 1.0839932102185228
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8463785826525752
Epoch 32/50 |loss: 0.144162| train set 4.941x speedup, test set 0.846x speedup, val set 0.806x speedup, step: 30, train time 17.57 s
JOB test speedup 1.1114986618730989
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 33/50 |loss: 0.138705| train set 4.951x speedup, test set 0.847x speedup, val set 0.713x speedup, step: 31, train time 17.33 s
JOB test speedup 1.298249153508935
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 34/50 |loss: 0.142745| train set 4.865x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 32, train time 17.49 s
JOB test speedup 1.0718396010818259
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 35/50 |loss: 0.144668| train set 4.948x speedup, test set 0.847x speedup, val set 0.735x speedup, step: 33, train time 17.38 s
JOB test speedup 1.081623178381253
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 36/50 |loss: 0.141283| train set 4.953x speedup, test set 1.069x speedup, val set 0.729x speedup, step: 34, train time 17.40 s
JOB test speedup 1.0385661644631026
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 37/50 |loss: 0.141923| train set 4.950x speedup, test set 0.847x speedup, val set 0.707x speedup, step: 35, train time 17.32 s
JOB test speedup 1.1050429934906116
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 38/50 |loss: 0.132104| train set 4.946x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 36, train time 18.11 s
JOB test speedup 1.4480714109391633
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 39/50 |loss: 0.134497| train set 4.944x speedup, test set 0.847x speedup, val set 0.732x speedup, step: 37, train time 17.48 s
JOB test speedup 1.0195543151191362
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.134664| train set 4.869x speedup, test set 0.847x speedup, val set 0.792x speedup, step: 38, train time 17.79 s
JOB test speedup 1.084062534630047
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 41/50 |loss: 0.133218| train set 4.954x speedup, test set 1.069x speedup, val set 0.737x speedup, step: 39, train time 17.51 s
JOB test speedup 1.1546330718850306
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 42/50 |loss: 0.129716| train set 4.952x speedup, test set 0.847x speedup, val set 0.790x speedup, step: 40, train time 17.29 s
JOB test speedup 0.9878862025183905
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 43/50 |loss: 0.143227| train set 4.949x speedup, test set 0.847x speedup, val set 0.707x speedup, step: 41, train time 17.32 s
JOB test speedup 1.5809075978056029
TPCH test speedup 4.696587121366315
TPCH skew test speedup 0.8467185307037698
Epoch 44/50 |loss: 0.131160| train set 4.942x speedup, test set 0.847x speedup, val set 0.735x speedup, step: 42, train time 17.48 s
JOB test speedup 1.2044764455049404
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 45/50 |loss: 0.126952| train set 4.864x speedup, test set 1.069x speedup, val set 0.795x speedup, step: 43, train time 17.49 s
JOB test speedup 1.1478956447922146
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 46/50 |loss: 0.126717| train set 4.951x speedup, test set 0.847x speedup, val set 0.745x speedup, step: 44, train time 17.39 s
JOB test speedup 1.0176683347150117
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 47/50 |loss: 0.128932| train set 4.954x speedup, test set 0.847x speedup, val set 0.764x speedup, step: 45, train time 17.49 s
JOB test speedup 1.019957289705799
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 48/50 |loss: 0.126267| train set 4.948x speedup, test set 0.847x speedup, val set 0.729x speedup, step: 46, train time 17.33 s
JOB test speedup 1.0854216955889604
TPCH test speedup 6.081043681836761
TPCH skew test speedup 0.8467185307037698
Epoch 49/50 |loss: 0.126468| train set 4.947x speedup, test set 0.847x speedup, val set 0.779x speedup, step: 47, train time 17.59 s
Training per epoch cost 17.389 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 0.752s, pg runtime 0.637s, speedup 0.847x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.661s, model runtime 0.739s, pg runtime 0.661s, speedup 0.894x
07, opt runtime 1.437s, model runtime 3.247s, pg runtime 1.437s, speedup 0.442x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
17, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
22, opt runtime 0.158s, model runtime 0.261s, pg runtime 0.158s, speedup 0.607x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 1.016s, pg runtime 0.948s, speedup 0.933x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 3, train speedup 4.927, test speedup 1.013, val speedup 0.857
TPCH best validation speedup epoch: 3, train speedup 4.927, test speedup 8.646, val speedup 0.857
TPCH Skew best validation speedup epoch: 3, train speedup 4.927, test speedup 1.485, val speedup 0.857
execution cost 0:15:27.762417
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.407800, and there are 26626 training samples
in channel 9
JOB test speedup 1.0073299010637269
TPCH test speedup 6.68149446061608
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.374853| train set 4.602x speedup, test set 1.069x speedup, val set 0.720x speedup, step: 1, train time 18.31 s
JOB test speedup 0.9833807698292355
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 1/50 |loss: 0.287915| train set 4.870x speedup, test set 1.069x speedup, val set 0.856x speedup, step: 1, train time 16.87 s
JOB test speedup 0.9806543914649658
TPCH test speedup 5.014568943674369
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.256486| train set 4.892x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 2, train time 17.08 s
JOB test speedup 1.1279997706034035
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.4846207759384964
Epoch 3/50 |loss: 0.238341| train set 4.903x speedup, test set 1.485x speedup, val set 0.903x speedup, step: 1, train time 16.68 s
JOB test speedup 1.015247134002276
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.4846207759384964
Epoch 4/50 |loss: 0.223583| train set 4.906x speedup, test set 1.485x speedup, val set 0.853x speedup, step: 2, train time 16.88 s
JOB test speedup 0.9915301463937503
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.3699521174074574
Epoch 5/50 |loss: 0.213123| train set 4.649x speedup, test set 1.370x speedup, val set 0.853x speedup, step: 3, train time 17.08 s
JOB test speedup 1.006174535772128
TPCH test speedup 4.335289429174345
TPCH skew test speedup 1.332162046432323
Epoch 6/50 |loss: 0.204944| train set 4.935x speedup, test set 1.332x speedup, val set 0.852x speedup, step: 4, train time 16.98 s
JOB test speedup 0.9908439613354993
TPCH test speedup 5.125210456209724
TPCH skew test speedup 1.087946618545801
Epoch 7/50 |loss: 0.205971| train set 4.825x speedup, test set 1.088x speedup, val set 0.850x speedup, step: 5, train time 16.98 s
JOB test speedup 1.0126611515534025
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.087946618545801
Epoch 8/50 |loss: 0.198008| train set 4.938x speedup, test set 1.088x speedup, val set 0.856x speedup, step: 6, train time 16.79 s
JOB test speedup 1.0216371783065157
TPCH test speedup 9.777287854923872
TPCH skew test speedup 1.087946618545801
Epoch 9/50 |loss: 0.188707| train set 4.825x speedup, test set 1.088x speedup, val set 0.948x speedup, step: 1, train time 16.88 s
JOB test speedup 0.9589225759081402
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.184290| train set 4.938x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 2, train time 16.97 s
JOB test speedup 1.0755600837127184
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.0690157018936535
Epoch 11/50 |loss: 0.179387| train set 4.898x speedup, test set 1.069x speedup, val set 0.809x speedup, step: 3, train time 16.90 s
JOB test speedup 0.9662334861215885
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.0690157018936535
Epoch 12/50 |loss: 0.179626| train set 4.900x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 4, train time 16.87 s
JOB test speedup 0.9441367476941982
TPCH test speedup 6.214241064247481
TPCH skew test speedup 0.9876282772378597
Epoch 13/50 |loss: 0.168879| train set 4.901x speedup, test set 0.988x speedup, val set 0.805x speedup, step: 5, train time 16.89 s
JOB test speedup 1.3039131835195164
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.4846207759384964
Epoch 14/50 |loss: 0.175160| train set 4.895x speedup, test set 1.485x speedup, val set 0.887x speedup, step: 6, train time 16.89 s
JOB test speedup 0.9706270219374723
TPCH test speedup 5.636750683773882
TPCH skew test speedup 0.8467185307037698
Epoch 15/50 |loss: 0.195618| train set 4.929x speedup, test set 0.847x speedup, val set 0.743x speedup, step: 7, train time 17.01 s
JOB test speedup 1.0298387033890066
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.176334| train set 4.932x speedup, test set 1.088x speedup, val set 0.856x speedup, step: 8, train time 16.98 s
JOB test speedup 0.9477965932509487
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0684738796627566
Epoch 17/50 |loss: 0.164990| train set 4.841x speedup, test set 1.068x speedup, val set 0.767x speedup, step: 9, train time 17.08 s
JOB test speedup 1.0172874554068716
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0690157018936535
Epoch 18/50 |loss: 0.162640| train set 4.886x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 10, train time 16.89 s
JOB test speedup 1.0164464109324958
TPCH test speedup 6.746683991459375
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.159686| train set 4.952x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 11, train time 16.98 s
JOB test speedup 0.9787529674582811
TPCH test speedup 6.746683991459375
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.158770| train set 4.912x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 12, train time 17.00 s
JOB test speedup 0.949662961086554
TPCH test speedup 6.746683991459375
TPCH skew test speedup 0.8463785826525752
Epoch 21/50 |loss: 0.156870| train set 4.824x speedup, test set 0.846x speedup, val set 0.733x speedup, step: 13, train time 16.97 s
JOB test speedup 1.022453481182022
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.154142| train set 4.948x speedup, test set 1.068x speedup, val set 0.733x speedup, step: 14, train time 17.01 s
JOB test speedup 1.115816135950848
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.158710| train set 4.950x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 15, train time 16.96 s
JOB test speedup 0.9431881282458311
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.150024| train set 4.786x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 16, train time 17.00 s
JOB test speedup 0.9350201947687596
TPCH test speedup 9.667304384974594
TPCH skew test speedup 1.0690157018936535
Epoch 25/50 |loss: 0.148618| train set 4.802x speedup, test set 1.069x speedup, val set 0.746x speedup, step: 17, train time 16.90 s
JOB test speedup 0.9334548282761599
TPCH test speedup 5.502454513202343
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.145125| train set 4.939x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 18, train time 16.92 s
JOB test speedup 0.9557821806179402
TPCH test speedup 6.746683991459375
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.146697| train set 4.928x speedup, test set 0.847x speedup, val set 0.740x speedup, step: 19, train time 16.89 s
JOB test speedup 0.9477335765057568
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0690157018936535
Epoch 28/50 |loss: 0.146647| train set 4.817x speedup, test set 1.069x speedup, val set 0.746x speedup, step: 20, train time 17.17 s
JOB test speedup 1.0138290759246797
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0690157018936535
Epoch 29/50 |loss: 0.142659| train set 4.869x speedup, test set 1.069x speedup, val set 0.866x speedup, step: 21, train time 16.99 s
JOB test speedup 1.6369784915120054
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0684738796627566
Epoch 30/50 |loss: 0.143144| train set 4.856x speedup, test set 1.068x speedup, val set 0.808x speedup, step: 22, train time 16.91 s
JOB test speedup 1.0138672067597214
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 31/50 |loss: 0.140792| train set 4.940x speedup, test set 1.069x speedup, val set 0.746x speedup, step: 23, train time 16.90 s
JOB test speedup 0.9477009152016275
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0684738796627566
Epoch 32/50 |loss: 0.143237| train set 4.944x speedup, test set 1.068x speedup, val set 0.733x speedup, step: 24, train time 17.00 s
JOB test speedup 1.004972348214264
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 1.087946618545801
Epoch 33/50 |loss: 0.140754| train set 4.947x speedup, test set 1.088x speedup, val set 0.864x speedup, step: 25, train time 16.89 s
JOB test speedup 1.0963708588374736
TPCH test speedup 3.77560307991202
TPCH skew test speedup 1.087946618545801
Epoch 34/50 |loss: 0.143542| train set 4.864x speedup, test set 1.088x speedup, val set 0.856x speedup, step: 26, train time 17.18 s
JOB test speedup 1.0224031091582357
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 35/50 |loss: 0.147448| train set 4.907x speedup, test set 0.847x speedup, val set 0.746x speedup, step: 27, train time 16.89 s
JOB test speedup 1.0297821678067278
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 36/50 |loss: 0.147692| train set 4.950x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 28, train time 16.80 s
early stopping at epoch 36
Training per epoch cost 16.984 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.430s, pg runtime 1.437s, speedup 0.419x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
17, opt runtime 3.248s, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
22, opt runtime 0.158s, model runtime 0.256s, pg runtime 0.158s, speedup 0.620x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.961x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 1.016s, pg runtime 0.948s, speedup 0.933x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 9.171s, pg runtime 17.708s, speedup 1.931x
12, opt runtime 6.284s, model runtime 9.232s, pg runtime 31.019s, speedup 3.360x
13, opt runtime 7.851s, model runtime 12.431s, pg runtime 13.622s, speedup 1.096x
14, opt runtime 7.442s, model runtime 9.800s, pg runtime 14.838s, speedup 1.514x
15, opt runtime 7.110s, model runtime 12.431s, pg runtime 14.286s, speedup 1.149x
16, opt runtime 6.810s, model runtime 11.534s, pg runtime 13.796s, speedup 1.196x
17, opt runtime 6.460s, model runtime 10.619s, pg runtime 16.134s, speedup 1.519x
18, opt runtime 6.656s, model runtime 8.786s, pg runtime 15.260s, speedup 1.737x
19, opt runtime 7.913s, model runtime 9.315s, pg runtime 15.548s, speedup 1.669x
20, opt runtime 7.377s, model runtime 8.566s, pg runtime 28.655s, speedup 3.345x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 66.967s, pg runtime 29.760s, speedup 0.444x
22, opt runtime 16.844s, model runtime 62.706s, pg runtime 27.164s, speedup 0.433x
23, opt runtime 20.708s, model runtime 67.187s, pg runtime 20.708s, speedup 0.308x
24, opt runtime 30.649s, model runtime 63.889s, pg runtime 30.649s, speedup 0.480x
25, opt runtime 14.023s, model runtime 58.579s, pg runtime 31.705s, speedup 0.541x
26, opt runtime 30.304s, model runtime 70.753s, pg runtime 30.711s, speedup 0.434x
27, opt runtime 28.312s, model runtime 67.889s, pg runtime 28.312s, speedup 0.417x
28, opt runtime 11.965s, model runtime 68.966s, pg runtime 11.965s, speedup 0.173x
29, opt runtime 21.883s, model runtime 65.849s, pg runtime 24.220s, speedup 0.368x
30, opt runtime 13.053s, model runtime 67.985s, pg runtime 13.053s, speedup 0.192x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 9, train speedup 4.825, test speedup 1.022, val speedup 0.948
TPCH best validation speedup epoch: 9, train speedup 4.825, test speedup 9.777, val speedup 0.948
TPCH Skew best validation speedup epoch: 9, train speedup 4.825, test speedup 1.088, val speedup 0.948
execution cost 0:11:14.516088
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.339029, and there are 26626 training samples
in channel 9
JOB test speedup 0.9979677845997361
TPCH test speedup 6.68149446061608
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.374375| train set 4.636x speedup, test set 1.069x speedup, val set 0.722x speedup, step: 1, train time 18.31 s
JOB test speedup 0.9975818920964813
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.0690157018936535
Epoch 1/50 |loss: 0.289727| train set 4.649x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 1, train time 16.90 s
JOB test speedup 0.980603525004518
TPCH test speedup 5.014568943674369
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.257613| train set 4.764x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 1, train time 16.88 s
JOB test speedup 0.9770424097128205
TPCH test speedup 8.560301627357337
TPCH skew test speedup 0.8467185307037698
Epoch 3/50 |loss: 0.240448| train set 4.900x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 1, train time 16.88 s
JOB test speedup 0.9815687145945893
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 4/50 |loss: 0.227295| train set 4.863x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 2, train time 16.69 s
JOB test speedup 0.955119885758425
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8671779162364766
Epoch 5/50 |loss: 0.217038| train set 4.897x speedup, test set 0.867x speedup, val set 0.735x speedup, step: 1, train time 16.77 s
JOB test speedup 0.9706080735455617
TPCH test speedup 6.214241064247481
TPCH skew test speedup 1.332162046432323
Epoch 6/50 |loss: 0.207584| train set 4.907x speedup, test set 1.332x speedup, val set 0.852x speedup, step: 1, train time 16.88 s
JOB test speedup 0.9729618052998601
TPCH test speedup 5.014568943674369
TPCH skew test speedup 1.087946618545801
Epoch 7/50 |loss: 0.207714| train set 4.827x speedup, test set 1.088x speedup, val set 0.853x speedup, step: 1, train time 16.96 s
JOB test speedup 0.9876424775306737
TPCH test speedup 4.3323504600035845
TPCH skew test speedup 1.087946618545801
Epoch 8/50 |loss: 0.197745| train set 4.889x speedup, test set 1.088x speedup, val set 0.849x speedup, step: 2, train time 16.88 s
JOB test speedup 1.0379572998047082
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.3699521174074574
Epoch 9/50 |loss: 0.192269| train set 4.616x speedup, test set 1.370x speedup, val set 0.956x speedup, step: 1, train time 17.07 s
JOB test speedup 0.9647998093913845
TPCH test speedup 3.7152161142693827
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.187749| train set 4.911x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 2, train time 17.06 s
JOB test speedup 1.0697666642648502
TPCH test speedup 8.336132172163117
TPCH skew test speedup 1.1018362985470282
Epoch 11/50 |loss: 0.180707| train set 4.893x speedup, test set 1.102x speedup, val set 0.876x speedup, step: 3, train time 17.18 s
JOB test speedup 0.9932278869069788
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.4846207759384964
Epoch 12/50 |loss: 0.182597| train set 4.897x speedup, test set 1.485x speedup, val set 0.884x speedup, step: 4, train time 17.39 s
JOB test speedup 0.9177407481965237
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.087946618545801
Epoch 13/50 |loss: 0.172608| train set 4.623x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 5, train time 17.29 s
JOB test speedup 1.2435341379029488
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0690157018936535
Epoch 14/50 |loss: 0.174753| train set 4.949x speedup, test set 1.069x speedup, val set 0.729x speedup, step: 6, train time 17.22 s
JOB test speedup 0.9117867127551788
TPCH test speedup 4.977972379363483
TPCH skew test speedup 0.8467185307037698
Epoch 15/50 |loss: 0.177158| train set 4.929x speedup, test set 0.847x speedup, val set 0.806x speedup, step: 7, train time 17.29 s
JOB test speedup 1.2286301824456645
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.172251| train set 4.948x speedup, test set 1.088x speedup, val set 1.293x speedup, step: 1, train time 17.19 s
JOB test speedup 0.9222127133871743
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0684738796627566
Epoch 17/50 |loss: 0.163659| train set 4.838x speedup, test set 1.068x speedup, val set 0.804x speedup, step: 2, train time 17.39 s
JOB test speedup 1.0428356085501758
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 18/50 |loss: 0.162019| train set 4.891x speedup, test set 1.485x speedup, val set 1.286x speedup, step: 3, train time 17.46 s
JOB test speedup 1.0105629446836817
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.087946618545801
Epoch 19/50 |loss: 0.160613| train set 4.943x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 4, train time 17.29 s
JOB test speedup 0.9475558344618896
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.9227006803720882
Epoch 20/50 |loss: 0.160133| train set 4.901x speedup, test set 0.923x speedup, val set 1.211x speedup, step: 5, train time 17.31 s
JOB test speedup 0.9221873443929155
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 21/50 |loss: 0.157959| train set 4.822x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 6, train time 17.55 s
JOB test speedup 0.9289187822999097
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.155256| train set 4.899x speedup, test set 1.068x speedup, val set 0.803x speedup, step: 7, train time 17.32 s
JOB test speedup 1.0253916027989334
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.156046| train set 4.948x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 8, train time 17.30 s
JOB test speedup 0.9502375402525839
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.151537| train set 4.787x speedup, test set 1.069x speedup, val set 0.805x speedup, step: 9, train time 17.67 s
JOB test speedup 0.9495042883570478
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 25/50 |loss: 0.150332| train set 4.887x speedup, test set 1.485x speedup, val set 1.024x speedup, step: 10, train time 17.60 s
JOB test speedup 1.0240538079838077
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 26/50 |loss: 0.145951| train set 4.944x speedup, test set 1.088x speedup, val set 1.291x speedup, step: 11, train time 17.57 s
JOB test speedup 0.9498116728689487
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 27/50 |loss: 0.147207| train set 4.931x speedup, test set 1.088x speedup, val set 0.982x speedup, step: 12, train time 17.49 s
JOB test speedup 0.9609742762810318
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 28/50 |loss: 0.146826| train set 4.854x speedup, test set 1.485x speedup, val set 1.007x speedup, step: 13, train time 17.59 s
JOB test speedup 0.9220509673111622
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 29/50 |loss: 0.143995| train set 4.950x speedup, test set 1.069x speedup, val set 0.806x speedup, step: 14, train time 17.43 s
JOB test speedup 1.155228549369937
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0684738796627566
Epoch 30/50 |loss: 0.144191| train set 4.864x speedup, test set 1.068x speedup, val set 0.805x speedup, step: 15, train time 17.21 s
JOB test speedup 1.005721530256163
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 31/50 |loss: 0.146008| train set 4.910x speedup, test set 1.485x speedup, val set 0.806x speedup, step: 16, train time 17.18 s
JOB test speedup 0.9759617403161697
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0684738796627566
Epoch 32/50 |loss: 0.141204| train set 4.878x speedup, test set 1.068x speedup, val set 0.806x speedup, step: 17, train time 17.48 s
JOB test speedup 0.9583514032602806
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.087946618545801
Epoch 33/50 |loss: 0.140345| train set 4.940x speedup, test set 1.088x speedup, val set 0.966x speedup, step: 18, train time 17.37 s
JOB test speedup 1.1874314385695577
TPCH test speedup 3.77560307991202
TPCH skew test speedup 1.087946618545801
Epoch 34/50 |loss: 0.142634| train set 4.864x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 19, train time 17.48 s
JOB test speedup 0.9613459695850981
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 35/50 |loss: 0.147886| train set 4.904x speedup, test set 1.485x speedup, val set 0.956x speedup, step: 20, train time 17.58 s
JOB test speedup 0.9612607992633425
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 36/50 |loss: 0.143136| train set 4.941x speedup, test set 1.485x speedup, val set 0.956x speedup, step: 21, train time 17.39 s
JOB test speedup 1.0060331528269975
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 37/50 |loss: 0.149959| train set 4.943x speedup, test set 1.088x speedup, val set 0.956x speedup, step: 22, train time 17.40 s
JOB test speedup 1.0277084636870042
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 38/50 |loss: 0.135824| train set 4.948x speedup, test set 1.069x speedup, val set 0.744x speedup, step: 23, train time 17.38 s
JOB test speedup 1.0059737450147013
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 39/50 |loss: 0.134969| train set 4.946x speedup, test set 0.867x speedup, val set 0.952x speedup, step: 24, train time 17.49 s
JOB test speedup 0.9609869487384215
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 40/50 |loss: 0.133248| train set 4.871x speedup, test set 1.069x speedup, val set 0.795x speedup, step: 25, train time 17.47 s
JOB test speedup 0.9696477780362094
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 41/50 |loss: 0.135346| train set 4.956x speedup, test set 1.069x speedup, val set 0.806x speedup, step: 26, train time 17.39 s
JOB test speedup 1.1010300376962878
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 42/50 |loss: 0.127913| train set 4.953x speedup, test set 0.847x speedup, val set 0.806x speedup, step: 27, train time 17.39 s
JOB test speedup 0.9545783877197865
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 1.1880171125468597
Epoch 43/50 |loss: 0.130463| train set 4.937x speedup, test set 1.188x speedup, val set 0.941x speedup, step: 28, train time 17.39 s
JOB test speedup 1.2195304234823237
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.1012607048299754
Epoch 44/50 |loss: 0.130448| train set 4.942x speedup, test set 1.101x speedup, val set 0.765x speedup, step: 29, train time 17.30 s
JOB test speedup 1.0130564798518493
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0684738796627566
Epoch 45/50 |loss: 0.128352| train set 4.861x speedup, test set 1.068x speedup, val set 0.795x speedup, step: 30, train time 17.39 s
JOB test speedup 1.1382636633409038
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 46/50 |loss: 0.125674| train set 4.948x speedup, test set 1.069x speedup, val set 0.805x speedup, step: 31, train time 17.49 s
JOB test speedup 1.0022225464885577
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 47/50 |loss: 0.126418| train set 4.874x speedup, test set 1.069x speedup, val set 0.805x speedup, step: 32, train time 17.22 s
JOB test speedup 0.9545783877197865
TPCH test speedup 8.157313570960582
TPCH skew test speedup 1.0690157018936535
Epoch 48/50 |loss: 0.124707| train set 4.947x speedup, test set 1.069x speedup, val set 0.795x speedup, step: 33, train time 17.59 s
JOB test speedup 1.0214223197445917
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 49/50 |loss: 0.124909| train set 4.940x speedup, test set 1.069x speedup, val set 0.795x speedup, step: 34, train time 17.61 s
Training per epoch cost 17.320 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 0.637s, pg runtime 0.637s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.661s, model runtime 0.661s, pg runtime 0.661s, speedup 1.000x
07, opt runtime 1.437s, model runtime 3.430s, pg runtime 1.437s, speedup 0.419x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 2.593s, pg runtime 8.283s, speedup 3.195x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
17, opt runtime 3.248s, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
22, opt runtime 0.158s, model runtime 0.256s, pg runtime 0.158s, speedup 0.620x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.961x
24, opt runtime 0.348s, model runtime 0.391s, pg runtime 0.391s, speedup 1.000x
25, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 70.813s, pg runtime 18.392s, speedup 0.260x
02, opt runtime 23.961s, model runtime 65.782s, pg runtime 32.278s, speedup 0.491x
03, opt runtime 17.779s, model runtime 67.652s, pg runtime 17.779s, speedup 0.263x
04, opt runtime 25.597s, model runtime 61.712s, pg runtime 27.136s, speedup 0.440x
05, opt runtime 14.857s, model runtime 69.366s, pg runtime 14.857s, speedup 0.214x
06, opt runtime 19.263s, model runtime 66.156s, pg runtime 19.263s, speedup 0.291x
07, opt runtime 15.831s, model runtime 58.181s, pg runtime 15.831s, speedup 0.272x
08, opt runtime 9.432s, model runtime 67.176s, pg runtime 9.432s, speedup 0.140x
09, opt runtime 26.874s, model runtime 71.579s, pg runtime 26.874s, speedup 0.375x
10, opt runtime 21.143s, model runtime 66.849s, pg runtime 21.143s, speedup 0.316x
11, opt runtime 7.237s, model runtime 36.429s, pg runtime 17.708s, speedup 0.486x
12, opt runtime 6.284s, model runtime 39.704s, pg runtime 31.019s, speedup 0.781x
13, opt runtime 7.851s, model runtime 30.956s, pg runtime 13.622s, speedup 0.440x
14, opt runtime 7.442s, model runtime 32.816s, pg runtime 14.838s, speedup 0.452x
15, opt runtime 7.110s, model runtime 38.849s, pg runtime 14.286s, speedup 0.368x
16, opt runtime 6.810s, model runtime 39.840s, pg runtime 13.796s, speedup 0.346x
17, opt runtime 6.460s, model runtime 33.445s, pg runtime 16.134s, speedup 0.482x
18, opt runtime 6.656s, model runtime 39.236s, pg runtime 15.260s, speedup 0.389x
19, opt runtime 7.913s, model runtime 32.779s, pg runtime 15.548s, speedup 0.474x
20, opt runtime 7.377s, model runtime 42.222s, pg runtime 28.655s, speedup 0.679x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 66.967s, pg runtime 29.760s, speedup 0.444x
22, opt runtime 16.844s, model runtime 62.706s, pg runtime 27.164s, speedup 0.433x
23, opt runtime 20.708s, model runtime 67.187s, pg runtime 20.708s, speedup 0.308x
24, opt runtime 30.649s, model runtime 63.889s, pg runtime 30.649s, speedup 0.480x
25, opt runtime 14.023s, model runtime 58.579s, pg runtime 31.705s, speedup 0.541x
26, opt runtime 30.304s, model runtime 70.753s, pg runtime 30.711s, speedup 0.434x
27, opt runtime 28.312s, model runtime 67.889s, pg runtime 28.312s, speedup 0.417x
28, opt runtime 11.965s, model runtime 68.966s, pg runtime 11.965s, speedup 0.173x
29, opt runtime 21.883s, model runtime 65.849s, pg runtime 24.220s, speedup 0.368x
30, opt runtime 13.053s, model runtime 67.985s, pg runtime 13.053s, speedup 0.192x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 16, train speedup 4.948, test speedup 1.229, val speedup 1.293
TPCH best validation speedup epoch: 16, train speedup 4.948, test speedup 4.437, val speedup 1.293
TPCH Skew best validation speedup epoch: 16, train speedup 4.948, test speedup 1.088, val speedup 1.293
execution cost 0:15:25.076897
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.358272, and there are 26626 training samples
in channel 9
JOB test speedup 0.9970225217484052
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.376296| train set 4.512x speedup, test set 1.069x speedup, val set 0.720x speedup, step: 1, train time 18.21 s
JOB test speedup 0.9962556967136716
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.287660| train set 4.828x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 1, train time 17.71 s
JOB test speedup 1.017603582701652
TPCH test speedup 5.014568943674369
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.256282| train set 4.517x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 1, train time 17.39 s
JOB test speedup 1.1079625931717867
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 3/50 |loss: 0.237918| train set 4.907x speedup, test set 0.847x speedup, val set 0.857x speedup, step: 1, train time 17.57 s
JOB test speedup 1.0015434900913407
TPCH test speedup 5.014568943674369
TPCH skew test speedup 0.8467185307037698
Epoch 4/50 |loss: 0.224288| train set 4.911x speedup, test set 0.847x speedup, val set 0.729x speedup, step: 2, train time 17.37 s
JOB test speedup 1.006174535772128
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8081396782637893
Epoch 5/50 |loss: 0.213739| train set 4.692x speedup, test set 0.808x speedup, val set 0.732x speedup, step: 3, train time 17.29 s
JOB test speedup 1.0176129288142337
TPCH test speedup 6.214241064247481
TPCH skew test speedup 1.0155763196657097
Epoch 6/50 |loss: 0.204576| train set 4.918x speedup, test set 1.016x speedup, val set 0.735x speedup, step: 4, train time 17.28 s
JOB test speedup 0.9588061689939422
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.204143| train set 4.814x speedup, test set 0.847x speedup, val set 0.775x speedup, step: 5, train time 17.48 s
JOB test speedup 0.9957946754947977
TPCH test speedup 4.3323504600035845
TPCH skew test speedup 0.9227006803720882
Epoch 8/50 |loss: 0.196550| train set 4.886x speedup, test set 0.923x speedup, val set 0.852x speedup, step: 6, train time 17.28 s
JOB test speedup 1.00120927322919
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.0690157018936535
Epoch 9/50 |loss: 0.189838| train set 4.933x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 7, train time 17.30 s
JOB test speedup 0.9705071761288555
TPCH test speedup 5.085736812636633
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.183588| train set 4.903x speedup, test set 0.847x speedup, val set 0.732x speedup, step: 8, train time 17.28 s
JOB test speedup 0.9812818748665298
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.1052256270582081
Epoch 11/50 |loss: 0.178327| train set 4.924x speedup, test set 1.105x speedup, val set 0.748x speedup, step: 9, train time 17.10 s
JOB test speedup 1.0303613798863354
TPCH test speedup 8.25604914444693
TPCH skew test speedup 0.8467185307037698
Epoch 12/50 |loss: 0.180426| train set 4.911x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 10, train time 17.22 s
JOB test speedup 0.9457079682617122
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.0690157018936535
Epoch 13/50 |loss: 0.169289| train set 4.901x speedup, test set 1.069x speedup, val set 0.743x speedup, step: 11, train time 17.18 s
JOB test speedup 1.1950176429521648
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.1018362985470282
Epoch 14/50 |loss: 0.172438| train set 4.939x speedup, test set 1.102x speedup, val set 0.735x speedup, step: 12, train time 17.29 s
JOB test speedup 0.9547947379125415
TPCH test speedup 8.25604914444693
TPCH skew test speedup 0.8467185307037698
Epoch 15/50 |loss: 0.176913| train set 4.929x speedup, test set 0.847x speedup, val set 0.744x speedup, step: 13, train time 17.10 s
JOB test speedup 1.002549111961574
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.1018362985470282
Epoch 16/50 |loss: 0.170860| train set 4.928x speedup, test set 1.102x speedup, val set 0.735x speedup, step: 14, train time 16.92 s
JOB test speedup 0.9447572492069742
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.0690157018936535
Epoch 17/50 |loss: 0.161568| train set 4.848x speedup, test set 1.069x speedup, val set 0.742x speedup, step: 15, train time 17.19 s
JOB test speedup 0.9787404966603452
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.0690157018936535
Epoch 18/50 |loss: 0.160663| train set 4.885x speedup, test set 1.069x speedup, val set 0.730x speedup, step: 16, train time 17.09 s
JOB test speedup 0.9087857155546135
TPCH test speedup 4.3323504600035845
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.157486| train set 4.864x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 17, train time 17.39 s
JOB test speedup 1.0715774378623353
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.157903| train set 4.892x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 18, train time 17.20 s
JOB test speedup 0.9255146998543384
TPCH test speedup 6.595782210470604
TPCH skew test speedup 1.0690157018936535
Epoch 21/50 |loss: 0.155169| train set 4.868x speedup, test set 1.069x speedup, val set 0.737x speedup, step: 19, train time 17.38 s
JOB test speedup 1.2196606413691435
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.154232| train set 4.865x speedup, test set 1.068x speedup, val set 0.797x speedup, step: 20, train time 17.39 s
JOB test speedup 1.0674353838028066
TPCH test speedup 5.085736812636633
TPCH skew test speedup 0.9876282772378597
Epoch 23/50 |loss: 0.152217| train set 4.953x speedup, test set 0.988x speedup, val set 0.733x speedup, step: 21, train time 17.41 s
JOB test speedup 0.936466232233516
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.147919| train set 4.815x speedup, test set 1.069x speedup, val set 0.743x speedup, step: 22, train time 17.20 s
JOB test speedup 0.9353293290107394
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 25/50 |loss: 0.146751| train set 4.875x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 23, train time 17.20 s
JOB test speedup 0.9706112787178551
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.144104| train set 4.926x speedup, test set 0.847x speedup, val set 0.768x speedup, step: 24, train time 17.38 s
JOB test speedup 0.9349330815789507
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.145240| train set 4.930x speedup, test set 0.847x speedup, val set 0.737x speedup, step: 25, train time 17.20 s
JOB test speedup 0.9948839443462861
TPCH test speedup 5.987508062807358
TPCH skew test speedup 0.8467185307037698
Epoch 28/50 |loss: 0.145186| train set 4.890x speedup, test set 0.847x speedup, val set 0.743x speedup, step: 26, train time 17.47 s
JOB test speedup 0.9670943087036122
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 29/50 |loss: 0.141825| train set 4.864x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 27, train time 17.29 s
JOB test speedup 1.2761894898971093
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 30/50 |loss: 0.141693| train set 4.861x speedup, test set 1.069x speedup, val set 0.788x speedup, step: 28, train time 17.27 s
JOB test speedup 0.9505616207999595
TPCH test speedup 8.322703871237582
TPCH skew test speedup 1.0690157018936535
Epoch 31/50 |loss: 0.142373| train set 4.925x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 29, train time 17.31 s
JOB test speedup 1.0779821744907103
TPCH test speedup 8.336132172163117
TPCH skew test speedup 1.0690157018936535
Epoch 32/50 |loss: 0.155717| train set 4.881x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 30, train time 17.30 s
JOB test speedup 0.9361427209303899
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 33/50 |loss: 0.141324| train set 4.948x speedup, test set 1.069x speedup, val set 0.737x speedup, step: 31, train time 17.47 s
JOB test speedup 0.9514670255766595
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 34/50 |loss: 0.143369| train set 4.860x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 32, train time 17.29 s
JOB test speedup 0.9836868711835149
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0690157018936535
Epoch 35/50 |loss: 0.147699| train set 4.898x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 33, train time 17.38 s
JOB test speedup 0.9551584876990943
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0690157018936535
Epoch 36/50 |loss: 0.145901| train set 4.942x speedup, test set 1.069x speedup, val set 0.737x speedup, step: 34, train time 17.40 s
early stopping at epoch 36
Training per epoch cost 17.328 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 0.637s, pg runtime 0.637s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.661s, model runtime 0.661s, pg runtime 0.661s, speedup 1.000x
07, opt runtime 1.437s, model runtime 3.247s, pg runtime 1.437s, speedup 0.442x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.080s, pg runtime 6.143s, speedup 1.010x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
17, opt runtime 3.248s, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
22, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 3.377s, pg runtime 5.521s, speedup 1.635x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 1.047s, pg runtime 0.948s, speedup 0.905x
========== TPCH
01, opt runtime 18.392s, model runtime 70.813s, pg runtime 18.392s, speedup 0.260x
02, opt runtime 23.961s, model runtime 65.782s, pg runtime 32.278s, speedup 0.491x
03, opt runtime 17.779s, model runtime 67.652s, pg runtime 17.779s, speedup 0.263x
04, opt runtime 25.597s, model runtime 61.712s, pg runtime 27.136s, speedup 0.440x
05, opt runtime 14.857s, model runtime 69.366s, pg runtime 14.857s, speedup 0.214x
06, opt runtime 19.263s, model runtime 66.156s, pg runtime 19.263s, speedup 0.291x
07, opt runtime 15.831s, model runtime 58.181s, pg runtime 15.831s, speedup 0.272x
08, opt runtime 9.432s, model runtime 67.176s, pg runtime 9.432s, speedup 0.140x
09, opt runtime 26.874s, model runtime 71.579s, pg runtime 26.874s, speedup 0.375x
10, opt runtime 21.143s, model runtime 66.849s, pg runtime 21.143s, speedup 0.316x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 23.436s, pg runtime 432.766s, speedup 18.466x
32, opt runtime 15.120s, model runtime 23.316s, pg runtime 566.078s, speedup 24.279x
33, opt runtime 16.639s, model runtime 23.017s, pg runtime 462.544s, speedup 20.095x
34, opt runtime 16.280s, model runtime 23.060s, pg runtime 634.990s, speedup 27.537x
35, opt runtime 16.528s, model runtime 23.747s, pg runtime 620.762s, speedup 26.141x
36, opt runtime 18.690s, model runtime 25.079s, pg runtime 651.942s, speedup 25.995x
37, opt runtime 16.438s, model runtime 23.248s, pg runtime 546.887s, speedup 23.524x
38, opt runtime 16.138s, model runtime 23.246s, pg runtime 501.793s, speedup 21.586x
39, opt runtime 16.770s, model runtime 23.336s, pg runtime 594.754s, speedup 25.486x
40, opt runtime 16.305s, model runtime 22.633s, pg runtime 436.168s, speedup 19.271x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
12, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
13, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
14, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
15, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
16, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
17, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
18, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
19, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
20, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
21, opt runtime 10.669s, model runtime 66.967s, pg runtime 29.760s, speedup 0.444x
22, opt runtime 16.844s, model runtime 62.706s, pg runtime 27.164s, speedup 0.433x
23, opt runtime 20.708s, model runtime 67.187s, pg runtime 20.708s, speedup 0.308x
24, opt runtime 30.649s, model runtime 63.889s, pg runtime 30.649s, speedup 0.480x
25, opt runtime 14.023s, model runtime 58.579s, pg runtime 31.705s, speedup 0.541x
26, opt runtime 30.304s, model runtime 70.753s, pg runtime 30.711s, speedup 0.434x
27, opt runtime 28.312s, model runtime 67.889s, pg runtime 28.312s, speedup 0.417x
28, opt runtime 11.965s, model runtime 68.966s, pg runtime 11.965s, speedup 0.173x
29, opt runtime 21.883s, model runtime 65.849s, pg runtime 24.220s, speedup 0.368x
30, opt runtime 13.053s, model runtime 67.985s, pg runtime 13.053s, speedup 0.192x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 3, train speedup 4.907, test speedup 1.108, val speedup 0.857
TPCH best validation speedup epoch: 3, train speedup 4.907, test speedup 5.125, val speedup 0.857
TPCH Skew best validation speedup epoch: 3, train speedup 4.907, test speedup 0.847, val speedup 0.857
execution cost 0:11:27.196585
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.372454, and there are 26626 training samples
in channel 9
JOB test speedup 1.0141506395022597
TPCH test speedup 6.494682644993008
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.378062| train set 4.463x speedup, test set 1.069x speedup, val set 1.010x speedup, step: 1, train time 18.03 s
JOB test speedup 0.9691106687695579
TPCH test speedup 4.386681781337258
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.287911| train set 4.828x speedup, test set 0.847x speedup, val set 0.983x speedup, step: 2, train time 16.97 s
JOB test speedup 0.9815502241396312
TPCH test speedup 5.014568943674369
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.255788| train set 4.885x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 3, train time 17.00 s
JOB test speedup 1.105454156936647
TPCH test speedup 6.0952532120345735
TPCH skew test speedup 1.332162046432323
Epoch 3/50 |loss: 0.235964| train set 4.920x speedup, test set 1.332x speedup, val set 0.857x speedup, step: 4, train time 16.91 s
JOB test speedup 0.9780846153056395
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 4/50 |loss: 0.225481| train set 4.887x speedup, test set 1.069x speedup, val set 0.979x speedup, step: 5, train time 16.80 s
JOB test speedup 1.0142971436688484
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 0.8081396782637893
Epoch 5/50 |loss: 0.214140| train set 4.690x speedup, test set 0.808x speedup, val set 0.821x speedup, step: 6, train time 16.89 s
JOB test speedup 1.0181542114454845
TPCH test speedup 6.540550818973143
TPCH skew test speedup 1.332162046432323
Epoch 6/50 |loss: 0.205782| train set 4.938x speedup, test set 1.332x speedup, val set 0.857x speedup, step: 7, train time 16.91 s
JOB test speedup 0.9928190231761755
TPCH test speedup 5.014568943674369
TPCH skew test speedup 1.087946618545801
Epoch 7/50 |loss: 0.205630| train set 4.769x speedup, test set 1.088x speedup, val set 0.853x speedup, step: 8, train time 16.90 s
JOB test speedup 0.9962159859683369
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.087946618545801
Epoch 8/50 |loss: 0.197843| train set 4.902x speedup, test set 1.088x speedup, val set 0.858x speedup, step: 9, train time 16.90 s
JOB test speedup 1.0383464373479376
TPCH test speedup 6.564019751323381
TPCH skew test speedup 1.4846207759384964
Epoch 9/50 |loss: 0.191520| train set 4.850x speedup, test set 1.485x speedup, val set 0.857x speedup, step: 10, train time 16.87 s
JOB test speedup 0.9620111910920273
TPCH test speedup 3.855564537334527
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.185675| train set 4.865x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 11, train time 16.70 s
JOB test speedup 1.0986734406179097
TPCH test speedup 6.514264503849583
TPCH skew test speedup 1.4835759735630838
Epoch 11/50 |loss: 0.180015| train set 4.897x speedup, test set 1.484x speedup, val set 0.960x speedup, step: 12, train time 16.80 s
JOB test speedup 0.9770659640424082
TPCH test speedup 4.313972709525779
TPCH skew test speedup 1.087946618545801
Epoch 12/50 |loss: 0.182365| train set 4.909x speedup, test set 1.088x speedup, val set 0.856x speedup, step: 13, train time 16.68 s
JOB test speedup 0.961787314018849
TPCH test speedup 4.395606314593704
TPCH skew test speedup 1.087385441463186
Epoch 13/50 |loss: 0.172017| train set 4.896x speedup, test set 1.087x speedup, val set 0.928x speedup, step: 14, train time 16.89 s
JOB test speedup 0.996191905058743
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.4846207759384964
Epoch 14/50 |loss: 0.175226| train set 4.945x speedup, test set 1.485x speedup, val set 0.852x speedup, step: 15, train time 16.76 s
JOB test speedup 1.005565635677757
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8463785826525752
Epoch 15/50 |loss: 0.190584| train set 4.932x speedup, test set 0.846x speedup, val set 0.722x speedup, step: 16, train time 16.68 s
JOB test speedup 1.0305918403733303
TPCH test speedup 3.855564537334527
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.175019| train set 4.936x speedup, test set 1.088x speedup, val set 0.856x speedup, step: 17, train time 16.79 s
JOB test speedup 0.9614484286004926
TPCH test speedup 5.627858019616518
TPCH skew test speedup 1.0684738796627566
Epoch 17/50 |loss: 0.165789| train set 4.844x speedup, test set 1.068x speedup, val set 0.746x speedup, step: 18, train time 16.80 s
JOB test speedup 1.0086121054827861
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.4846207759384964
Epoch 18/50 |loss: 0.162623| train set 4.903x speedup, test set 1.485x speedup, val set 0.856x speedup, step: 19, train time 17.00 s
JOB test speedup 0.9500134733784629
TPCH test speedup 4.414687710933372
TPCH skew test speedup 1.087946618545801
Epoch 19/50 |loss: 0.160933| train set 4.941x speedup, test set 1.088x speedup, val set 0.856x speedup, step: 20, train time 16.79 s
JOB test speedup 1.0265314728557102
TPCH test speedup 4.414687710933372
TPCH skew test speedup 1.087946618545801
Epoch 20/50 |loss: 0.159129| train set 4.885x speedup, test set 1.088x speedup, val set 0.856x speedup, step: 21, train time 16.81 s
JOB test speedup 0.9511895142382812
TPCH test speedup 4.414687710933372
TPCH skew test speedup 1.087946618545801
Epoch 21/50 |loss: 0.156887| train set 4.815x speedup, test set 1.088x speedup, val set 0.840x speedup, step: 22, train time 16.89 s
JOB test speedup 0.9342364449753852
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 1.4835759735630838
Epoch 22/50 |loss: 0.154905| train set 4.862x speedup, test set 1.484x speedup, val set 0.858x speedup, step: 23, train time 16.69 s
JOB test speedup 0.9494480199663056
TPCH test speedup 4.414687710933372
TPCH skew test speedup 1.087946618545801
Epoch 23/50 |loss: 0.154204| train set 4.948x speedup, test set 1.088x speedup, val set 0.857x speedup, step: 24, train time 16.78 s
JOB test speedup 0.9494480199663056
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 1.4846207759384964
Epoch 24/50 |loss: 0.150047| train set 4.803x speedup, test set 1.485x speedup, val set 0.941x speedup, step: 25, train time 16.77 s
JOB test speedup 1.0144751292995065
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 25/50 |loss: 0.147897| train set 4.797x speedup, test set 0.847x speedup, val set 0.896x speedup, step: 26, train time 16.87 s
JOB test speedup 0.9667149524644041
TPCH test speedup 4.395606314593704
TPCH skew test speedup 1.087946618545801
Epoch 26/50 |loss: 0.146148| train set 4.937x speedup, test set 1.088x speedup, val set 0.856x speedup, step: 27, train time 16.88 s
JOB test speedup 0.9511596192278247
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.9128134841458692
Epoch 27/50 |loss: 0.147310| train set 4.927x speedup, test set 0.913x speedup, val set 0.941x speedup, step: 28, train time 16.88 s
JOB test speedup 0.9709639198433743
TPCH test speedup 4.414687710933372
TPCH skew test speedup 1.087946618545801
Epoch 28/50 |loss: 0.146585| train set 4.855x speedup, test set 1.088x speedup, val set 0.875x speedup, step: 29, train time 16.90 s
JOB test speedup 0.9946069700488361
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.4750128069272856
Epoch 29/50 |loss: 0.142331| train set 4.857x speedup, test set 1.475x speedup, val set 0.941x speedup, step: 30, train time 16.68 s
JOB test speedup 0.9602135556310191
TPCH test speedup 4.395606314593704
TPCH skew test speedup 0.8467185307037698
Epoch 30/50 |loss: 0.142082| train set 4.864x speedup, test set 0.847x speedup, val set 0.941x speedup, step: 31, train time 16.69 s
JOB test speedup 0.9962755144439656
TPCH test speedup 6.514264503849583
TPCH skew test speedup 1.4846207759384964
Epoch 31/50 |loss: 0.141731| train set 4.940x speedup, test set 1.485x speedup, val set 0.941x speedup, step: 32, train time 16.78 s
JOB test speedup 0.9890013876448537
TPCH test speedup 4.395606314593704
TPCH skew test speedup 0.8467185307037698
Epoch 32/50 |loss: 0.144301| train set 4.946x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 33, train time 16.70 s
JOB test speedup 0.9511394619359668
TPCH test speedup 4.395606314593704
TPCH skew test speedup 1.087946618545801
Epoch 33/50 |loss: 0.139784| train set 4.950x speedup, test set 1.088x speedup, val set 0.941x speedup, step: 34, train time 16.88 s
JOB test speedup 1.0070916018175968
TPCH test speedup 4.414687710933372
TPCH skew test speedup 1.087946618545801
Epoch 34/50 |loss: 0.141673| train set 4.939x speedup, test set 1.088x speedup, val set 0.941x speedup, step: 35, train time 16.98 s
JOB test speedup 0.9540940321472423
TPCH test speedup 4.414687710933372
TPCH skew test speedup 1.087946618545801
Epoch 35/50 |loss: 0.145143| train set 4.904x speedup, test set 1.088x speedup, val set 0.960x speedup, step: 36, train time 16.77 s
JOB test speedup 0.9657404751101942
TPCH test speedup 4.414687710933372
TPCH skew test speedup 1.087946618545801
Epoch 36/50 |loss: 0.153279| train set 4.930x speedup, test set 1.088x speedup, val set 0.941x speedup, step: 37, train time 16.94 s
JOB test speedup 0.9642899611310296
TPCH test speedup 4.395606314593704
TPCH skew test speedup 0.8671779162364766
Epoch 37/50 |loss: 0.160977| train set 4.953x speedup, test set 0.867x speedup, val set 0.940x speedup, step: 38, train time 16.98 s
early stopping at epoch 37
Training per epoch cost 16.867 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 1.164s, pg runtime 0.637s, speedup 0.547x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.661s, model runtime 1.219s, pg runtime 0.661s, speedup 0.542x
07, opt runtime 1.437s, model runtime 3.247s, pg runtime 1.437s, speedup 0.442x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.080s, pg runtime 6.143s, speedup 1.010x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
17, opt runtime 3.248s, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
22, opt runtime 0.158s, model runtime 0.256s, pg runtime 0.158s, speedup 0.620x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.353s, pg runtime 0.391s, speedup 1.108x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 42.788s, pg runtime 432.766s, speedup 10.114x
32, opt runtime 15.120s, model runtime 42.444s, pg runtime 566.078s, speedup 13.337x
33, opt runtime 16.639s, model runtime 42.154s, pg runtime 462.544s, speedup 10.973x
34, opt runtime 16.280s, model runtime 43.992s, pg runtime 634.990s, speedup 14.434x
35, opt runtime 16.528s, model runtime 42.465s, pg runtime 620.762s, speedup 14.618x
36, opt runtime 18.690s, model runtime 43.980s, pg runtime 651.942s, speedup 14.824x
37, opt runtime 16.438s, model runtime 43.087s, pg runtime 546.887s, speedup 12.693x
38, opt runtime 16.138s, model runtime 41.893s, pg runtime 501.793s, speedup 11.978x
39, opt runtime 16.770s, model runtime 42.663s, pg runtime 594.754s, speedup 13.941x
40, opt runtime 16.305s, model runtime 42.603s, pg runtime 436.168s, speedup 10.238x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
12, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
13, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
14, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
15, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
16, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
17, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
18, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
19, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
20, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 0, train speedup 4.463, test speedup 1.014, val speedup 1.010
TPCH best validation speedup epoch: 0, train speedup 4.463, test speedup 6.495, val speedup 1.010
TPCH Skew best validation speedup epoch: 0, train speedup 4.463, test speedup 1.069, val speedup 1.010
execution cost 0:11:28.161165
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.369886, and there are 26626 training samples
in channel 9
JOB test speedup 1.0331646323363297
TPCH test speedup 6.494682644993008
TPCH skew test speedup 1.4846207759384964
Epoch 0/50 |loss: 0.375807| train set 4.473x speedup, test set 1.485x speedup, val set 0.838x speedup, step: 1, train time 18.03 s
JOB test speedup 1.009143734397942
TPCH test speedup 4.255860577687987
TPCH skew test speedup 0.9876282772378597
Epoch 1/50 |loss: 0.289674| train set 4.874x speedup, test set 0.988x speedup, val set 0.994x speedup, step: 1, train time 16.66 s
JOB test speedup 0.9815502241396312
TPCH test speedup 5.014568943674369
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.257467| train set 4.808x speedup, test set 0.847x speedup, val set 0.740x speedup, step: 2, train time 16.71 s
JOB test speedup 1.0959085143840843
TPCH test speedup 6.259502837019816
TPCH skew test speedup 1.332162046432323
Epoch 3/50 |loss: 0.237319| train set 4.909x speedup, test set 1.332x speedup, val set 0.857x speedup, step: 3, train time 16.67 s
JOB test speedup 1.0261073112130126
TPCH test speedup 5.125210456209724
TPCH skew test speedup 1.087946618545801
Epoch 4/50 |loss: 0.224315| train set 4.725x speedup, test set 1.088x speedup, val set 0.857x speedup, step: 4, train time 16.60 s
JOB test speedup 0.999612998612513
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8267566675404998
Epoch 5/50 |loss: 0.214444| train set 4.696x speedup, test set 0.827x speedup, val set 0.735x speedup, step: 5, train time 16.80 s
JOB test speedup 0.9817060141506044
TPCH test speedup 6.746683991459375
TPCH skew test speedup 0.8671779162364766
Epoch 6/50 |loss: 0.206991| train set 4.916x speedup, test set 0.867x speedup, val set 0.739x speedup, step: 6, train time 16.69 s
JOB test speedup 1.0052123487663716
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.205646| train set 4.829x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 7, train time 16.78 s
JOB test speedup 1.008009217837885
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 0.8671779162364766
Epoch 8/50 |loss: 0.196699| train set 4.941x speedup, test set 0.867x speedup, val set 0.739x speedup, step: 8, train time 16.98 s
JOB test speedup 1.0755770388097434
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.1018362985470282
Epoch 9/50 |loss: 0.189916| train set 4.939x speedup, test set 1.102x speedup, val set 0.739x speedup, step: 9, train time 16.79 s
JOB test speedup 1.0082549688439142
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.186869| train set 4.916x speedup, test set 0.847x speedup, val set 0.739x speedup, step: 10, train time 16.87 s
JOB test speedup 1.0085764227958358
TPCH test speedup 8.336132172163117
TPCH skew test speedup 1.0684738796627566
Epoch 11/50 |loss: 0.178720| train set 4.930x speedup, test set 1.068x speedup, val set 0.764x speedup, step: 11, train time 16.80 s
JOB test speedup 1.005482467944171
TPCH test speedup 5.155959016283291
TPCH skew test speedup 1.087946618545801
Epoch 12/50 |loss: 0.181204| train set 4.819x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 12, train time 16.62 s
JOB test speedup 0.9873758658264097
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.172760| train set 4.892x speedup, test set 0.847x speedup, val set 0.776x speedup, step: 13, train time 16.79 s
JOB test speedup 1.215056833190268
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0690157018936535
Epoch 14/50 |loss: 0.174106| train set 4.901x speedup, test set 1.069x speedup, val set 0.857x speedup, step: 14, train time 16.89 s
JOB test speedup 1.0019494781735012
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8463785826525752
Epoch 15/50 |loss: 0.180540| train set 4.845x speedup, test set 0.846x speedup, val set 0.805x speedup, step: 15, train time 16.77 s
JOB test speedup 1.0243727012946662
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 16/50 |loss: 0.171687| train set 4.939x speedup, test set 0.867x speedup, val set 0.738x speedup, step: 16, train time 16.89 s
JOB test speedup 0.962417249099152
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8463785826525752
Epoch 17/50 |loss: 0.162288| train set 4.835x speedup, test set 0.846x speedup, val set 0.721x speedup, step: 17, train time 16.96 s
JOB test speedup 1.028250860939135
TPCH test speedup 5.116012155645062
TPCH skew test speedup 0.8467185307037698
Epoch 18/50 |loss: 0.161843| train set 4.895x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 18, train time 16.78 s
JOB test speedup 1.2064667087270777
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.159243| train set 4.895x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 19, train time 16.79 s
JOB test speedup 1.0465274027967937
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.158347| train set 4.866x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 20, train time 16.78 s
JOB test speedup 0.9605563773963507
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 21/50 |loss: 0.156975| train set 4.851x speedup, test set 0.847x speedup, val set 0.743x speedup, step: 21, train time 16.78 s
JOB test speedup 1.1679586143301484
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8463785826525752
Epoch 22/50 |loss: 0.154402| train set 4.860x speedup, test set 0.846x speedup, val set 0.791x speedup, step: 22, train time 16.71 s
JOB test speedup 1.0311739659319905
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.158302| train set 4.940x speedup, test set 0.847x speedup, val set 0.768x speedup, step: 23, train time 16.80 s
JOB test speedup 0.9614481836301944
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 24/50 |loss: 0.149616| train set 4.784x speedup, test set 0.847x speedup, val set 0.763x speedup, step: 24, train time 16.99 s
JOB test speedup 0.9469845335741682
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 25/50 |loss: 0.150188| train set 4.818x speedup, test set 0.847x speedup, val set 0.713x speedup, step: 25, train time 16.89 s
JOB test speedup 1.0027061812810742
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8671779162364766
Epoch 26/50 |loss: 0.146461| train set 4.862x speedup, test set 0.867x speedup, val set 0.737x speedup, step: 26, train time 16.91 s
JOB test speedup 0.9617790212500789
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.147556| train set 4.928x speedup, test set 0.847x speedup, val set 0.771x speedup, step: 27, train time 16.89 s
JOB test speedup 0.9776620669014777
TPCH test speedup 6.1459267032429645
TPCH skew test speedup 0.8467185307037698
Epoch 28/50 |loss: 0.145968| train set 4.863x speedup, test set 0.847x speedup, val set 0.788x speedup, step: 28, train time 16.86 s
JOB test speedup 0.9778252811171014
TPCH test speedup 5.231226861694703
TPCH skew test speedup 0.9871657977855145
Epoch 29/50 |loss: 0.144146| train set 4.945x speedup, test set 0.987x speedup, val set 0.779x speedup, step: 29, train time 16.59 s
JOB test speedup 1.082799603050474
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8463785826525752
Epoch 30/50 |loss: 0.143709| train set 4.860x speedup, test set 0.846x speedup, val set 0.779x speedup, step: 30, train time 16.78 s
JOB test speedup 1.0550514337298007
TPCH test speedup 8.103847157079976
TPCH skew test speedup 1.0727514430351917
Epoch 31/50 |loss: 0.141411| train set 4.941x speedup, test set 1.073x speedup, val set 0.748x speedup, step: 31, train time 16.97 s
JOB test speedup 1.0124146891341688
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8463785826525752
Epoch 32/50 |loss: 0.144675| train set 4.931x speedup, test set 0.846x speedup, val set 0.779x speedup, step: 32, train time 16.70 s
JOB test speedup 0.9618001316708317
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 33/50 |loss: 0.141490| train set 4.946x speedup, test set 0.847x speedup, val set 0.721x speedup, step: 33, train time 16.98 s
JOB test speedup 1.0505386639401506
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 34/50 |loss: 0.143149| train set 4.938x speedup, test set 0.847x speedup, val set 0.746x speedup, step: 34, train time 16.87 s
JOB test speedup 1.0012341666018045
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 35/50 |loss: 0.147815| train set 4.904x speedup, test set 0.847x speedup, val set 0.779x speedup, step: 35, train time 16.91 s
JOB test speedup 0.9760663455720043
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8671779162364766
Epoch 36/50 |loss: 0.148434| train set 4.943x speedup, test set 0.867x speedup, val set 0.725x speedup, step: 36, train time 16.97 s
early stopping at epoch 36
Training per epoch cost 16.845 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.183s, pg runtime 0.189s, speedup 1.037x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.404s, pg runtime 0.404s, speedup 1.000x
04, opt runtime 0.637s, model runtime 0.637s, pg runtime 0.637s, speedup 1.000x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.661s, model runtime 0.661s, pg runtime 0.661s, speedup 1.000x
07, opt runtime 1.437s, model runtime 3.058s, pg runtime 1.437s, speedup 0.470x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
17, opt runtime 3.248s, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
22, opt runtime 0.158s, model runtime 0.158s, pg runtime 0.158s, speedup 1.000x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
27, opt runtime 0.278s, model runtime 1.016s, pg runtime 0.948s, speedup 0.933x
========== TPCH
01, opt runtime 18.392s, model runtime 48.604s, pg runtime 18.392s, speedup 0.378x
02, opt runtime 23.961s, model runtime 45.739s, pg runtime 32.278s, speedup 0.706x
03, opt runtime 17.779s, model runtime 47.365s, pg runtime 17.779s, speedup 0.375x
04, opt runtime 25.597s, model runtime 39.374s, pg runtime 27.136s, speedup 0.689x
05, opt runtime 14.857s, model runtime 47.524s, pg runtime 14.857s, speedup 0.313x
06, opt runtime 19.263s, model runtime 48.427s, pg runtime 19.263s, speedup 0.398x
07, opt runtime 15.831s, model runtime 49.113s, pg runtime 15.831s, speedup 0.322x
08, opt runtime 9.432s, model runtime 48.050s, pg runtime 9.432s, speedup 0.196x
09, opt runtime 26.874s, model runtime 45.968s, pg runtime 26.874s, speedup 0.585x
10, opt runtime 21.143s, model runtime 43.215s, pg runtime 21.143s, speedup 0.489x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
12, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
13, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
14, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
15, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
16, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
17, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
18, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
19, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
20, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
21, opt runtime 10.669s, model runtime 33.855s, pg runtime 29.760s, speedup 0.879x
22, opt runtime 16.844s, model runtime 38.400s, pg runtime 27.164s, speedup 0.707x
23, opt runtime 20.708s, model runtime 36.358s, pg runtime 20.708s, speedup 0.570x
24, opt runtime 30.649s, model runtime 45.895s, pg runtime 30.649s, speedup 0.668x
25, opt runtime 14.023s, model runtime 35.449s, pg runtime 31.705s, speedup 0.894x
26, opt runtime 30.304s, model runtime 39.002s, pg runtime 30.711s, speedup 0.787x
27, opt runtime 28.312s, model runtime 35.405s, pg runtime 28.312s, speedup 0.800x
28, opt runtime 11.965s, model runtime 37.701s, pg runtime 11.965s, speedup 0.317x
29, opt runtime 21.883s, model runtime 37.185s, pg runtime 24.220s, speedup 0.651x
30, opt runtime 13.053s, model runtime 38.482s, pg runtime 13.053s, speedup 0.339x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 1, train speedup 4.874, test speedup 1.009, val speedup 0.994
TPCH best validation speedup epoch: 1, train speedup 4.874, test speedup 4.256, val speedup 0.994
TPCH Skew best validation speedup epoch: 1, train speedup 4.874, test speedup 0.988, val speedup 0.994
execution cost 0:11:09.074575
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.411203, and there are 26626 training samples
in channel 9
JOB test speedup 1.0072731670647677
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.1018362985470282
Epoch 0/50 |loss: 0.375694| train set 4.764x speedup, test set 1.102x speedup, val set 0.724x speedup, step: 1, train time 17.84 s
JOB test speedup 0.9969010408848474
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.288580| train set 4.770x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 1, train time 16.92 s
JOB test speedup 1.030260402657144
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.253996| train set 4.170x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 1, train time 17.11 s
JOB test speedup 1.1643923480836595
TPCH test speedup 5.231226861694703
TPCH skew test speedup 1.332162046432323
Epoch 3/50 |loss: 0.237064| train set 4.897x speedup, test set 1.332x speedup, val set 0.857x speedup, step: 1, train time 16.87 s
JOB test speedup 1.003035217872324
TPCH test speedup 5.110242938957844
TPCH skew test speedup 0.8467185307037698
Epoch 4/50 |loss: 0.222068| train set 4.905x speedup, test set 0.847x speedup, val set 0.853x speedup, step: 2, train time 16.88 s
JOB test speedup 1.1477281693378107
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8081396782637893
Epoch 5/50 |loss: 0.213686| train set 4.650x speedup, test set 0.808x speedup, val set 0.731x speedup, step: 3, train time 16.99 s
JOB test speedup 1.0061148148973809
TPCH test speedup 5.231226861694703
TPCH skew test speedup 1.332162046432323
Epoch 6/50 |loss: 0.204363| train set 4.934x speedup, test set 1.332x speedup, val set 0.852x speedup, step: 4, train time 17.13 s
JOB test speedup 0.954655813125644
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.205296| train set 4.827x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 5, train time 16.91 s
JOB test speedup 1.1253323967551723
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 8/50 |loss: 0.196159| train set 4.897x speedup, test set 1.088x speedup, val set 0.857x speedup, step: 1, train time 16.97 s
JOB test speedup 1.2083194932576384
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 9/50 |loss: 0.188449| train set 4.934x speedup, test set 1.485x speedup, val set 0.852x speedup, step: 2, train time 16.97 s
JOB test speedup 0.9613000367973533
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.183597| train set 4.911x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 3, train time 17.09 s
JOB test speedup 1.0081762682834952
TPCH test speedup 6.606662320739053
TPCH skew test speedup 0.8621649728594788
Epoch 11/50 |loss: 0.177842| train set 4.930x speedup, test set 0.862x speedup, val set 0.734x speedup, step: 4, train time 17.00 s
JOB test speedup 1.0218946672199722
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8467185307037698
Epoch 12/50 |loss: 0.179222| train set 4.820x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 5, train time 17.20 s
JOB test speedup 1.0476040999306029
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.170505| train set 4.900x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 6, train time 17.01 s
JOB test speedup 1.4984506524074397
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 14/50 |loss: 0.170858| train set 4.899x speedup, test set 1.485x speedup, val set 0.857x speedup, step: 1, train time 17.32 s
JOB test speedup 1.022229169659311
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8463785826525752
Epoch 15/50 |loss: 0.176408| train set 4.925x speedup, test set 0.846x speedup, val set 0.744x speedup, step: 2, train time 16.98 s
JOB test speedup 1.3693215496620104
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.167530| train set 4.936x speedup, test set 1.088x speedup, val set 0.857x speedup, step: 3, train time 16.98 s
JOB test speedup 0.9587345692521874
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 17/50 |loss: 0.162232| train set 4.834x speedup, test set 1.068x speedup, val set 0.733x speedup, step: 4, train time 17.18 s
JOB test speedup 1.2372702151532777
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 18/50 |loss: 0.159103| train set 4.892x speedup, test set 1.485x speedup, val set 0.852x speedup, step: 5, train time 16.90 s
JOB test speedup 1.0469720929503856
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.156684| train set 4.847x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 6, train time 17.01 s
JOB test speedup 1.3082551782893415
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.156962| train set 4.899x speedup, test set 0.847x speedup, val set 0.856x speedup, step: 7, train time 17.19 s
JOB test speedup 1.0384687142332079
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.087946618545801
Epoch 21/50 |loss: 0.154238| train set 4.819x speedup, test set 1.088x speedup, val set 0.857x speedup, step: 8, train time 16.97 s
JOB test speedup 1.0407468299169056
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.152074| train set 4.947x speedup, test set 1.068x speedup, val set 0.715x speedup, step: 9, train time 17.08 s
JOB test speedup 1.043455168977883
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.153396| train set 4.936x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 10, train time 16.89 s
JOB test speedup 0.9541231262161658
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.147831| train set 4.808x speedup, test set 1.069x speedup, val set 0.709x speedup, step: 11, train time 17.09 s
JOB test speedup 0.9759387103605524
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 25/50 |loss: 0.146315| train set 4.806x speedup, test set 1.069x speedup, val set 0.709x speedup, step: 12, train time 17.09 s
JOB test speedup 1.0489861367746045
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.144193| train set 4.860x speedup, test set 0.847x speedup, val set 0.823x speedup, step: 13, train time 17.09 s
JOB test speedup 1.0261220361078252
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 27/50 |loss: 0.143562| train set 4.923x speedup, test set 1.068x speedup, val set 0.840x speedup, step: 14, train time 17.21 s
JOB test speedup 0.9966580225366721
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 28/50 |loss: 0.144539| train set 4.863x speedup, test set 1.068x speedup, val set 0.840x speedup, step: 15, train time 16.98 s
JOB test speedup 1.2663686205901798
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 29/50 |loss: 0.142447| train set 4.943x speedup, test set 1.068x speedup, val set 0.858x speedup, step: 1, train time 16.89 s
JOB test speedup 1.24564982983755
TPCH test speedup 6.800067512589705
TPCH skew test speedup 0.8463785826525752
Epoch 30/50 |loss: 0.140436| train set 4.859x speedup, test set 0.846x speedup, val set 0.823x speedup, step: 2, train time 17.10 s
JOB test speedup 1.033677382499343
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 31/50 |loss: 0.137935| train set 4.940x speedup, test set 0.847x speedup, val set 0.754x speedup, step: 3, train time 16.99 s
JOB test speedup 1.0351516055069918
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0684738796627566
Epoch 32/50 |loss: 0.142098| train set 4.949x speedup, test set 1.068x speedup, val set 0.765x speedup, step: 4, train time 16.97 s
JOB test speedup 0.9526355429229332
TPCH test speedup 4.418204220589448
TPCH skew test speedup 1.087946618545801
Epoch 33/50 |loss: 0.138961| train set 4.937x speedup, test set 1.088x speedup, val set 0.823x speedup, step: 5, train time 17.07 s
JOB test speedup 1.24343156638321
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 34/50 |loss: 0.139702| train set 4.858x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 6, train time 16.98 s
JOB test speedup 0.9850724343863418
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8463785826525752
Epoch 35/50 |loss: 0.139661| train set 4.944x speedup, test set 0.846x speedup, val set 0.823x speedup, step: 7, train time 17.08 s
JOB test speedup 0.9785101704465942
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8463785826525752
Epoch 36/50 |loss: 0.143376| train set 4.919x speedup, test set 0.846x speedup, val set 0.722x speedup, step: 8, train time 17.09 s
JOB test speedup 1.0122471958920738
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8463785826525752
Epoch 37/50 |loss: 0.159190| train set 4.903x speedup, test set 0.846x speedup, val set 0.709x speedup, step: 9, train time 17.10 s
JOB test speedup 0.9990510767330935
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 38/50 |loss: 0.135989| train set 4.948x speedup, test set 0.847x speedup, val set 0.823x speedup, step: 10, train time 17.83 s
JOB test speedup 1.2638505549351278
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8604923330496457
Epoch 39/50 |loss: 0.136515| train set 4.949x speedup, test set 0.860x speedup, val set 0.823x speedup, step: 11, train time 17.09 s
JOB test speedup 0.9639916968546168
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.134691| train set 4.870x speedup, test set 0.847x speedup, val set 0.786x speedup, step: 12, train time 17.08 s
JOB test speedup 1.1178424688220003
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 41/50 |loss: 0.134614| train set 4.954x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 13, train time 17.17 s
JOB test speedup 1.2226979838869625
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 42/50 |loss: 0.130739| train set 4.952x speedup, test set 1.485x speedup, val set 0.823x speedup, step: 14, train time 17.17 s
JOB test speedup 1.0087954625960476
TPCH test speedup 5.537911850816908
TPCH skew test speedup 1.087946618545801
Epoch 43/50 |loss: 0.146740| train set 4.950x speedup, test set 1.088x speedup, val set 0.840x speedup, step: 15, train time 17.10 s
JOB test speedup 1.1148333991075252
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 44/50 |loss: 0.131874| train set 4.942x speedup, test set 1.485x speedup, val set 0.823x speedup, step: 16, train time 17.02 s
JOB test speedup 1.0125976277714623
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 45/50 |loss: 0.129338| train set 4.862x speedup, test set 1.485x speedup, val set 0.840x speedup, step: 17, train time 16.92 s
JOB test speedup 1.1260778188585934
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 46/50 |loss: 0.126460| train set 4.869x speedup, test set 1.485x speedup, val set 0.823x speedup, step: 18, train time 17.07 s
JOB test speedup 1.0073669017117595
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.087946618545801
Epoch 47/50 |loss: 0.127175| train set 4.955x speedup, test set 1.088x speedup, val set 0.840x speedup, step: 19, train time 17.01 s
JOB test speedup 1.011913825457668
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.4846207759384964
Epoch 48/50 |loss: 0.128238| train set 4.934x speedup, test set 1.485x speedup, val set 0.849x speedup, step: 20, train time 16.90 s
JOB test speedup 0.9603540353044342
TPCH test speedup 9.777287854923872
TPCH skew test speedup 1.4846207759384964
Epoch 49/50 |loss: 0.126679| train set 4.950x speedup, test set 1.485x speedup, val set 0.848x speedup, step: 21, train time 17.08 s
Training per epoch cost 17.071 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 0.637s, pg runtime 0.637s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.661s, model runtime 0.661s, pg runtime 0.661s, speedup 1.000x
07, opt runtime 1.437s, model runtime 3.430s, pg runtime 1.437s, speedup 0.419x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 3.504s, pg runtime 6.143s, speedup 1.753x
13, opt runtime 2.593s, model runtime 2.593s, pg runtime 8.283s, speedup 3.195x
14, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
15, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
16, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
17, opt runtime 3.248s, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
22, opt runtime 0.158s, model runtime 0.261s, pg runtime 0.158s, speedup 0.607x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.353s, pg runtime 0.391s, speedup 1.108x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 1.016s, pg runtime 0.948s, speedup 0.933x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 36.429s, pg runtime 17.708s, speedup 0.486x
12, opt runtime 6.284s, model runtime 39.704s, pg runtime 31.019s, speedup 0.781x
13, opt runtime 7.851s, model runtime 30.956s, pg runtime 13.622s, speedup 0.440x
14, opt runtime 7.442s, model runtime 32.816s, pg runtime 14.838s, speedup 0.452x
15, opt runtime 7.110s, model runtime 38.849s, pg runtime 14.286s, speedup 0.368x
16, opt runtime 6.810s, model runtime 39.840s, pg runtime 13.796s, speedup 0.346x
17, opt runtime 6.460s, model runtime 33.445s, pg runtime 16.134s, speedup 0.482x
18, opt runtime 6.656s, model runtime 39.236s, pg runtime 15.260s, speedup 0.389x
19, opt runtime 7.913s, model runtime 32.779s, pg runtime 15.548s, speedup 0.474x
20, opt runtime 7.377s, model runtime 42.222s, pg runtime 28.655s, speedup 0.679x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
12, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
13, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
14, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
15, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
16, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
17, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
18, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
19, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
20, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 29, train speedup 4.943, test speedup 1.266, val speedup 0.858
TPCH best validation speedup epoch: 29, train speedup 4.943, test speedup 6.800, val speedup 0.858
TPCH Skew best validation speedup epoch: 29, train speedup 4.943, test speedup 1.068, val speedup 0.858
execution cost 0:15:12.064888
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.340330, and there are 26626 training samples
in channel 9
JOB test speedup 1.0063662300800535
TPCH test speedup 6.494682644993008
TPCH skew test speedup 1.4846207759384964
Epoch 0/50 |loss: 0.375161| train set 4.720x speedup, test set 1.485x speedup, val set 0.838x speedup, step: 1, train time 17.93 s
JOB test speedup 0.9965222236175008
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 1/50 |loss: 0.287586| train set 4.873x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 2, train time 16.78 s
JOB test speedup 0.9815502241396312
TPCH test speedup 8.25604914444693
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.255159| train set 4.789x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 3, train time 16.81 s
JOB test speedup 0.9674462905961215
TPCH test speedup 8.596901038083626
TPCH skew test speedup 1.4846207759384964
Epoch 3/50 |loss: 0.237579| train set 4.923x speedup, test set 1.485x speedup, val set 0.857x speedup, step: 1, train time 16.78 s
JOB test speedup 0.9665873434652384
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 4/50 |loss: 0.222514| train set 4.905x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 2, train time 16.78 s
JOB test speedup 0.9559986939748685
TPCH test speedup 8.322703871237582
TPCH skew test speedup 1.037392100692954
Epoch 5/50 |loss: 0.215701| train set 4.538x speedup, test set 1.037x speedup, val set 0.735x speedup, step: 3, train time 16.78 s
JOB test speedup 0.9707588156404684
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 6/50 |loss: 0.206480| train set 4.928x speedup, test set 1.069x speedup, val set 0.853x speedup, step: 4, train time 16.78 s
JOB test speedup 0.9586567847190444
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.204333| train set 4.827x speedup, test set 0.847x speedup, val set 0.853x speedup, step: 5, train time 16.67 s
JOB test speedup 0.9962567538397873
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.4846207759384964
Epoch 8/50 |loss: 0.198913| train set 4.941x speedup, test set 1.485x speedup, val set 0.857x speedup, step: 1, train time 16.89 s
JOB test speedup 0.953205763720986
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.1018362985470282
Epoch 9/50 |loss: 0.189369| train set 4.818x speedup, test set 1.102x speedup, val set 0.735x speedup, step: 2, train time 16.67 s
JOB test speedup 0.9540156687251843
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 10/50 |loss: 0.184547| train set 4.925x speedup, test set 1.069x speedup, val set 0.735x speedup, step: 3, train time 16.72 s
JOB test speedup 0.9531721761225413
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 11/50 |loss: 0.179643| train set 4.888x speedup, test set 1.069x speedup, val set 0.739x speedup, step: 4, train time 16.69 s
JOB test speedup 0.9961510147643899
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.4846207759384964
Epoch 12/50 |loss: 0.180886| train set 4.901x speedup, test set 1.485x speedup, val set 0.852x speedup, step: 5, train time 16.70 s
JOB test speedup 0.9367108726939845
TPCH test speedup 8.560301627357337
TPCH skew test speedup 0.8671779162364766
Epoch 13/50 |loss: 0.171182| train set 4.899x speedup, test set 0.867x speedup, val set 0.738x speedup, step: 6, train time 16.69 s
JOB test speedup 1.0829653472887457
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 1.1018362985470282
Epoch 14/50 |loss: 0.172901| train set 4.950x speedup, test set 1.102x speedup, val set 0.735x speedup, step: 7, train time 16.67 s
JOB test speedup 0.9407974453110407
TPCH test speedup 4.567280210057989
TPCH skew test speedup 1.0684738796627566
Epoch 15/50 |loss: 0.185862| train set 4.847x speedup, test set 1.068x speedup, val set 0.772x speedup, step: 8, train time 16.69 s
JOB test speedup 1.0016366677732533
TPCH test speedup 6.514264503849583
TPCH skew test speedup 0.8671779162364766
Epoch 16/50 |loss: 0.173293| train set 4.934x speedup, test set 0.867x speedup, val set 0.737x speedup, step: 9, train time 16.69 s
JOB test speedup 0.911134625576634
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 1.0684738796627566
Epoch 17/50 |loss: 0.163828| train set 4.847x speedup, test set 1.068x speedup, val set 0.751x speedup, step: 10, train time 16.81 s
JOB test speedup 0.9042403273176906
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.0690157018936535
Epoch 18/50 |loss: 0.162125| train set 4.904x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 11, train time 16.92 s
JOB test speedup 0.9506144107967379
TPCH test speedup 5.360127563874363
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.158294| train set 4.870x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 12, train time 16.92 s
JOB test speedup 0.9663846731646074
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.157885| train set 4.874x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 13, train time 16.77 s
JOB test speedup 0.9050183678508141
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 21/50 |loss: 0.155862| train set 4.818x speedup, test set 0.847x speedup, val set 0.852x speedup, step: 14, train time 16.78 s
JOB test speedup 0.9188053139199523
TPCH test speedup 4.567280210057989
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.153112| train set 4.941x speedup, test set 1.068x speedup, val set 0.739x speedup, step: 15, train time 16.79 s
JOB test speedup 0.9960992692849666
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.153769| train set 4.863x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 16, train time 16.66 s
JOB test speedup 0.9502810521411839
TPCH test speedup 4.567280210057989
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.148463| train set 4.794x speedup, test set 1.069x speedup, val set 0.737x speedup, step: 17, train time 16.77 s
JOB test speedup 0.9358162369494972
TPCH test speedup 6.68149446061608
TPCH skew test speedup 1.0690157018936535
Epoch 25/50 |loss: 0.149685| train set 4.808x speedup, test set 1.069x speedup, val set 0.739x speedup, step: 18, train time 16.71 s
JOB test speedup 0.8916292154460368
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8671779162364766
Epoch 26/50 |loss: 0.144641| train set 4.944x speedup, test set 0.867x speedup, val set 0.737x speedup, step: 19, train time 16.98 s
JOB test speedup 0.9507461639128721
TPCH test speedup 3.3642359576960312
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.146947| train set 4.933x speedup, test set 0.847x speedup, val set 0.741x speedup, step: 20, train time 16.79 s
JOB test speedup 1.007187791292583
TPCH test speedup 3.7665659723791154
TPCH skew test speedup 0.8467185307037698
Epoch 28/50 |loss: 0.145688| train set 4.814x speedup, test set 0.847x speedup, val set 0.743x speedup, step: 21, train time 16.89 s
JOB test speedup 0.9842031699102328
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 1.0684738796627566
Epoch 29/50 |loss: 0.143262| train set 4.942x speedup, test set 1.068x speedup, val set 0.767x speedup, step: 22, train time 17.03 s
JOB test speedup 1.0332065324476092
TPCH test speedup 6.7022208158641385
TPCH skew test speedup 0.8467185307037698
Epoch 30/50 |loss: 0.142877| train set 4.858x speedup, test set 0.847x speedup, val set 0.775x speedup, step: 23, train time 16.82 s
JOB test speedup 0.9841564961701598
TPCH test speedup 6.412501180194369
TPCH skew test speedup 0.8467185307037698
Epoch 31/50 |loss: 0.140507| train set 4.930x speedup, test set 0.847x speedup, val set 0.746x speedup, step: 24, train time 16.97 s
JOB test speedup 0.964983111862555
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8467185307037698
Epoch 32/50 |loss: 0.145561| train set 4.950x speedup, test set 0.847x speedup, val set 0.788x speedup, step: 25, train time 16.87 s
JOB test speedup 0.9185124700565568
TPCH test speedup 3.3642359576960312
TPCH skew test speedup 0.8467185307037698
Epoch 33/50 |loss: 0.139847| train set 4.938x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 26, train time 16.80 s
JOB test speedup 0.971423627806093
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 34/50 |loss: 0.142515| train set 4.944x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 27, train time 16.95 s
JOB test speedup 0.9997450324365588
TPCH test speedup 3.3642359576960312
TPCH skew test speedup 0.8467185307037698
Epoch 35/50 |loss: 0.143440| train set 4.951x speedup, test set 0.847x speedup, val set 0.739x speedup, step: 28, train time 17.18 s
JOB test speedup 0.9614647462365017
TPCH test speedup 4.567280210057989
TPCH skew test speedup 1.0690157018936535
Epoch 36/50 |loss: 0.145289| train set 4.950x speedup, test set 1.069x speedup, val set 0.737x speedup, step: 29, train time 16.98 s
JOB test speedup 0.9394673430871391
TPCH test speedup 3.3642359576960312
TPCH skew test speedup 0.8467185307037698
Epoch 37/50 |loss: 0.140337| train set 4.955x speedup, test set 0.847x speedup, val set 0.739x speedup, step: 30, train time 16.91 s
JOB test speedup 1.006462459998595
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.1018362985470282
Epoch 38/50 |loss: 0.134985| train set 4.944x speedup, test set 1.102x speedup, val set 0.737x speedup, step: 31, train time 16.99 s
JOB test speedup 0.9568191999470187
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 39/50 |loss: 0.137315| train set 4.948x speedup, test set 0.847x speedup, val set 0.737x speedup, step: 32, train time 17.07 s
JOB test speedup 0.9656825295948033
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.136986| train set 4.871x speedup, test set 0.847x speedup, val set 0.747x speedup, step: 33, train time 17.09 s
JOB test speedup 0.9960511524660988
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 41/50 |loss: 0.136114| train set 4.950x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 34, train time 17.28 s
JOB test speedup 1.0256036878732342
TPCH test speedup 3.3642359576960312
TPCH skew test speedup 0.8467185307037698
Epoch 42/50 |loss: 0.128949| train set 4.952x speedup, test set 0.847x speedup, val set 0.744x speedup, step: 35, train time 17.17 s
JOB test speedup 0.9357374879815609
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 43/50 |loss: 0.133278| train set 4.940x speedup, test set 0.847x speedup, val set 0.754x speedup, step: 36, train time 17.29 s
JOB test speedup 0.9184748208391932
TPCH test speedup 4.411268699363658
TPCH skew test speedup 1.0930813356976172
Epoch 44/50 |loss: 0.129559| train set 4.950x speedup, test set 1.093x speedup, val set 0.741x speedup, step: 37, train time 16.99 s
JOB test speedup 1.0019377723814944
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 45/50 |loss: 0.127957| train set 4.861x speedup, test set 1.069x speedup, val set 0.764x speedup, step: 38, train time 17.09 s
JOB test speedup 0.9818986129470378
TPCH test speedup 3.3642359576960312
TPCH skew test speedup 0.8467185307037698
Epoch 46/50 |loss: 0.126442| train set 4.861x speedup, test set 0.847x speedup, val set 0.767x speedup, step: 39, train time 17.18 s
JOB test speedup 0.9647602128179422
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8467185307037698
Epoch 47/50 |loss: 0.127045| train set 4.956x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 40, train time 17.09 s
JOB test speedup 0.9388827036371735
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8671779162364766
Epoch 48/50 |loss: 0.124377| train set 4.941x speedup, test set 0.867x speedup, val set 0.801x speedup, step: 41, train time 17.20 s
JOB test speedup 0.999180666633671
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8671779162364766
Epoch 49/50 |loss: 0.125264| train set 4.941x speedup, test set 0.867x speedup, val set 0.750x speedup, step: 42, train time 17.20 s
Training per epoch cost 16.913 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.183s, pg runtime 0.189s, speedup 1.037x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.247s, pg runtime 1.437s, speedup 0.442x
08, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
15, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
16, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
17, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
22, opt runtime 0.158s, model runtime 0.256s, pg runtime 0.158s, speedup 0.620x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.961x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 23.436s, pg runtime 432.766s, speedup 18.466x
32, opt runtime 15.120s, model runtime 23.316s, pg runtime 566.078s, speedup 24.279x
33, opt runtime 16.639s, model runtime 23.017s, pg runtime 462.544s, speedup 20.095x
34, opt runtime 16.280s, model runtime 23.060s, pg runtime 634.990s, speedup 27.537x
35, opt runtime 16.528s, model runtime 23.747s, pg runtime 620.762s, speedup 26.141x
36, opt runtime 18.690s, model runtime 25.079s, pg runtime 651.942s, speedup 25.995x
37, opt runtime 16.438s, model runtime 23.248s, pg runtime 546.887s, speedup 23.524x
38, opt runtime 16.138s, model runtime 23.246s, pg runtime 501.793s, speedup 21.586x
39, opt runtime 16.770s, model runtime 23.336s, pg runtime 594.754s, speedup 25.486x
40, opt runtime 16.305s, model runtime 22.633s, pg runtime 436.168s, speedup 19.271x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 8, train speedup 4.941, test speedup 0.996, val speedup 0.857
TPCH best validation speedup epoch: 8, train speedup 4.941, test speedup 8.256, val speedup 0.857
TPCH Skew best validation speedup epoch: 8, train speedup 4.941, test speedup 1.485, val speedup 0.857
execution cost 0:15:04.116091
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.366719, and there are 26626 training samples
in channel 9
JOB test speedup 0.9972104356337188
TPCH test speedup 6.494682644993008
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.375281| train set 4.588x speedup, test set 1.069x speedup, val set 0.729x speedup, step: 1, train time 18.24 s
JOB test speedup 1.005746477466034
TPCH test speedup 6.05232747179417
TPCH skew test speedup 0.9876282772378597
Epoch 1/50 |loss: 0.289426| train set 4.849x speedup, test set 0.988x speedup, val set 0.734x speedup, step: 1, train time 16.71 s
JOB test speedup 0.9806543914649658
TPCH test speedup 5.014568943674369
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.255099| train set 4.813x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 2, train time 16.59 s
JOB test speedup 1.276476073651256
TPCH test speedup 6.746683991459375
TPCH skew test speedup 0.8467185307037698
Epoch 3/50 |loss: 0.239220| train set 4.909x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 3, train time 16.68 s
JOB test speedup 0.9892460110972433
TPCH test speedup 4.414687710933372
TPCH skew test speedup 1.087946618545801
Epoch 4/50 |loss: 0.224360| train set 4.907x speedup, test set 1.088x speedup, val set 0.857x speedup, step: 1, train time 16.90 s
JOB test speedup 1.256345289169265
TPCH test speedup 4.3323504600035845
TPCH skew test speedup 0.8467185307037698
Epoch 5/50 |loss: 0.212191| train set 4.879x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 2, train time 16.97 s
JOB test speedup 0.9707415174454254
TPCH test speedup 6.5562609942645995
TPCH skew test speedup 0.8467185307037698
Epoch 6/50 |loss: 0.203863| train set 4.925x speedup, test set 0.847x speedup, val set 0.852x speedup, step: 3, train time 16.88 s
JOB test speedup 0.9588857507301418
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.204734| train set 4.821x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 4, train time 16.80 s
JOB test speedup 0.9542768398030009
TPCH test speedup 4.354301022484202
TPCH skew test speedup 0.8467185307037698
Epoch 8/50 |loss: 0.197118| train set 4.893x speedup, test set 0.847x speedup, val set 0.735x speedup, step: 5, train time 16.79 s
JOB test speedup 1.194752727999678
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8467185307037698
Epoch 9/50 |loss: 0.189183| train set 4.932x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 6, train time 17.08 s
JOB test speedup 0.9222165105925386
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.183684| train set 4.902x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 7, train time 17.02 s
JOB test speedup 1.094311152640021
TPCH test speedup 6.606662320739053
TPCH skew test speedup 0.8463785826525752
Epoch 11/50 |loss: 0.180085| train set 4.893x speedup, test set 0.846x speedup, val set 0.733x speedup, step: 8, train time 16.81 s
JOB test speedup 0.9288848308766585
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 12/50 |loss: 0.180315| train set 4.830x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 9, train time 16.98 s
JOB test speedup 0.9289673290886764
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.170669| train set 4.909x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 10, train time 17.19 s
JOB test speedup 1.4036161005249186
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 14/50 |loss: 0.173119| train set 4.894x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 11, train time 17.28 s
JOB test speedup 0.9657296165637544
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 15/50 |loss: 0.180338| train set 4.926x speedup, test set 0.847x speedup, val set 0.722x speedup, step: 12, train time 17.28 s
JOB test speedup 0.9542823490413676
TPCH test speedup 4.437482747228825
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.171468| train set 4.938x speedup, test set 1.088x speedup, val set 0.857x speedup, step: 13, train time 17.08 s
JOB test speedup 0.9541789804051392
TPCH test speedup 6.746683991459375
TPCH skew test speedup 1.0690157018936535
Epoch 17/50 |loss: 0.161225| train set 4.822x speedup, test set 1.069x speedup, val set 0.740x speedup, step: 14, train time 17.20 s
JOB test speedup 1.048941403071385
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 18/50 |loss: 0.160940| train set 4.895x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 15, train time 17.26 s
JOB test speedup 0.9152679240324877
TPCH test speedup 4.287103852582366
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.157956| train set 4.955x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 16, train time 16.99 s
JOB test speedup 0.9761701050316581
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.156985| train set 4.899x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 17, train time 17.19 s
JOB test speedup 0.9398684830658501
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 21/50 |loss: 0.155643| train set 4.807x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 18, train time 17.28 s
JOB test speedup 0.9685289510085533
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.151986| train set 4.859x speedup, test set 1.068x speedup, val set 0.733x speedup, step: 19, train time 17.58 s
JOB test speedup 0.950013209143883
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.154117| train set 4.859x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 20, train time 17.49 s
JOB test speedup 0.9512124916531974
TPCH test speedup 4.567280210057989
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.148668| train set 4.794x speedup, test set 1.069x speedup, val set 0.722x speedup, step: 21, train time 17.41 s
JOB test speedup 0.9515145667648599
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 25/50 |loss: 0.146979| train set 4.800x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 22, train time 17.27 s
JOB test speedup 0.9614077442448208
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.144077| train set 4.944x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 23, train time 17.29 s
JOB test speedup 0.9622723254211691
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.145336| train set 4.937x speedup, test set 0.847x speedup, val set 0.722x speedup, step: 24, train time 17.27 s
JOB test speedup 0.946877956080191
TPCH test speedup 4.287103852582366
TPCH skew test speedup 0.8467185307037698
Epoch 28/50 |loss: 0.144071| train set 4.824x speedup, test set 0.847x speedup, val set 0.734x speedup, step: 25, train time 17.48 s
JOB test speedup 0.9706190706085149
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0690157018936535
Epoch 29/50 |loss: 0.139699| train set 4.861x speedup, test set 1.069x speedup, val set 0.810x speedup, step: 26, train time 17.41 s
JOB test speedup 1.3565601911651934
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8467185307037698
Epoch 30/50 |loss: 0.140990| train set 4.866x speedup, test set 0.847x speedup, val set 0.778x speedup, step: 27, train time 17.51 s
JOB test speedup 0.9990267351378292
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0690157018936535
Epoch 31/50 |loss: 0.139993| train set 4.906x speedup, test set 1.069x speedup, val set 0.728x speedup, step: 28, train time 17.40 s
JOB test speedup 0.9552333841327411
TPCH test speedup 6.4938426532370075
TPCH skew test speedup 1.0690157018936535
Epoch 32/50 |loss: 0.147383| train set 4.822x speedup, test set 1.069x speedup, val set 0.776x speedup, step: 29, train time 17.69 s
JOB test speedup 0.9500147353283976
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 33/50 |loss: 0.138727| train set 4.938x speedup, test set 0.847x speedup, val set 0.735x speedup, step: 30, train time 17.42 s
JOB test speedup 1.1529793829928918
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 34/50 |loss: 0.139800| train set 4.865x speedup, test set 0.847x speedup, val set 0.746x speedup, step: 31, train time 17.31 s
JOB test speedup 0.9481577952839508
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 35/50 |loss: 0.142903| train set 4.948x speedup, test set 0.847x speedup, val set 0.808x speedup, step: 32, train time 17.38 s
JOB test speedup 0.9712027312190276
TPCH test speedup 4.3050071125651925
TPCH skew test speedup 0.8467185307037698
Epoch 36/50 |loss: 0.141168| train set 4.933x speedup, test set 0.847x speedup, val set 0.754x speedup, step: 33, train time 17.51 s
JOB test speedup 0.944510261617508
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 37/50 |loss: 0.140379| train set 4.950x speedup, test set 0.847x speedup, val set 0.746x speedup, step: 34, train time 17.47 s
JOB test speedup 0.9510141305195172
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 38/50 |loss: 0.133849| train set 4.952x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 35, train time 17.68 s
JOB test speedup 0.9435504948523415
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 39/50 |loss: 0.134226| train set 4.946x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 36, train time 17.57 s
JOB test speedup 0.9592367283044746
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.133641| train set 4.869x speedup, test set 0.847x speedup, val set 0.792x speedup, step: 37, train time 17.58 s
JOB test speedup 1.094746362812237
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0690157018936535
Epoch 41/50 |loss: 0.136113| train set 4.952x speedup, test set 1.069x speedup, val set 0.775x speedup, step: 38, train time 17.59 s
JOB test speedup 0.9561947556178948
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 42/50 |loss: 0.127297| train set 4.953x speedup, test set 0.847x speedup, val set 0.808x speedup, step: 39, train time 17.51 s
JOB test speedup 0.9517398407525604
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8467185307037698
Epoch 43/50 |loss: 0.128541| train set 4.913x speedup, test set 0.847x speedup, val set 0.793x speedup, step: 40, train time 17.48 s
JOB test speedup 0.9403951907324356
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.4846207759384964
Epoch 44/50 |loss: 0.128032| train set 4.941x speedup, test set 1.485x speedup, val set 0.907x speedup, step: 1, train time 17.58 s
JOB test speedup 1.017063906029905
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 45/50 |loss: 0.128480| train set 4.867x speedup, test set 0.847x speedup, val set 0.793x speedup, step: 2, train time 17.36 s
JOB test speedup 1.1976170362000786
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 46/50 |loss: 0.125086| train set 4.950x speedup, test set 1.069x speedup, val set 0.747x speedup, step: 3, train time 17.18 s
JOB test speedup 0.9538536322922906
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 47/50 |loss: 0.125035| train set 4.953x speedup, test set 1.069x speedup, val set 0.875x speedup, step: 4, train time 17.15 s
JOB test speedup 1.0118103541783432
TPCH test speedup 4.567280210057989
TPCH skew test speedup 1.0690157018936535
Epoch 48/50 |loss: 0.122804| train set 4.945x speedup, test set 1.069x speedup, val set 0.795x speedup, step: 5, train time 17.41 s
JOB test speedup 0.9670144773775379
TPCH test speedup 4.567280210057989
TPCH skew test speedup 0.8467185307037698
Epoch 49/50 |loss: 0.123371| train set 4.949x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 6, train time 17.52 s
Training per epoch cost 17.274 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.404s, pg runtime 0.404s, speedup 1.000x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.430s, pg runtime 1.437s, speedup 0.419x
08, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.080s, pg runtime 6.143s, speedup 1.010x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
17, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
18, opt runtime 0.612s, model runtime 1.281s, pg runtime 1.357s, speedup 1.059x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 4.251s, pg runtime 3.112s, speedup 0.732x
21, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
22, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.353s, pg runtime 0.391s, speedup 1.108x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 39.132s, pg runtime 17.708s, speedup 0.453x
12, opt runtime 6.284s, model runtime 34.601s, pg runtime 31.019s, speedup 0.896x
13, opt runtime 7.851s, model runtime 41.660s, pg runtime 13.622s, speedup 0.327x
14, opt runtime 7.442s, model runtime 44.434s, pg runtime 14.838s, speedup 0.334x
15, opt runtime 7.110s, model runtime 35.678s, pg runtime 14.286s, speedup 0.400x
16, opt runtime 6.810s, model runtime 35.959s, pg runtime 13.796s, speedup 0.384x
17, opt runtime 6.460s, model runtime 39.889s, pg runtime 16.134s, speedup 0.404x
18, opt runtime 6.656s, model runtime 35.184s, pg runtime 15.260s, speedup 0.434x
19, opt runtime 7.913s, model runtime 31.007s, pg runtime 15.548s, speedup 0.501x
20, opt runtime 7.377s, model runtime 34.537s, pg runtime 28.655s, speedup 0.830x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 44, train speedup 4.941, test speedup 0.940, val speedup 0.907
TPCH best validation speedup epoch: 44, train speedup 4.941, test speedup 6.755, val speedup 0.907
TPCH Skew best validation speedup epoch: 44, train speedup 4.941, test speedup 1.485, val speedup 0.907
execution cost 0:15:22.771580
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.368535, and there are 26626 training samples
in channel 9
JOB test speedup 1.0086252669672728
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.377542| train set 3.781x speedup, test set 1.069x speedup, val set 0.720x speedup, step: 1, train time 17.95 s
JOB test speedup 0.9967535305870585
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 1/50 |loss: 0.289099| train set 4.882x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 1, train time 16.66 s
JOB test speedup 1.0359649200054535
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 2/50 |loss: 0.257075| train set 4.806x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 2, train time 16.88 s
JOB test speedup 1.0029800431120908
TPCH test speedup 4.335289429174345
TPCH skew test speedup 1.332162046432323
Epoch 3/50 |loss: 0.238914| train set 4.718x speedup, test set 1.332x speedup, val set 0.852x speedup, step: 1, train time 16.88 s
JOB test speedup 1.0054393239301713
TPCH test speedup 8.51175495725713
TPCH skew test speedup 1.0690157018936535
Epoch 4/50 |loss: 0.224517| train set 4.905x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 2, train time 16.59 s
JOB test speedup 0.9857355096208776
TPCH test speedup 7.50620610391988
TPCH skew test speedup 1.0250705807483314
Epoch 5/50 |loss: 0.212172| train set 4.649x speedup, test set 1.025x speedup, val set 0.852x speedup, step: 3, train time 17.01 s
JOB test speedup 0.9962400229529502
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 6/50 |loss: 0.204342| train set 4.924x speedup, test set 1.069x speedup, val set 0.821x speedup, step: 4, train time 16.78 s
JOB test speedup 0.9671389106539346
TPCH test speedup 5.125210456209724
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.204994| train set 4.813x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 5, train time 16.88 s
JOB test speedup 0.9854063001958635
TPCH test speedup 5.014568943674369
TPCH skew test speedup 0.8467185307037698
Epoch 8/50 |loss: 0.195612| train set 4.895x speedup, test set 0.847x speedup, val set 0.852x speedup, step: 1, train time 16.88 s
JOB test speedup 1.1649608230386597
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0082476765440922
Epoch 9/50 |loss: 0.188321| train set 4.693x speedup, test set 1.008x speedup, val set 0.735x speedup, step: 2, train time 16.58 s
JOB test speedup 0.9888522915464748
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.183059| train set 4.910x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 3, train time 16.77 s
JOB test speedup 0.9882472311877463
TPCH test speedup 8.336132172163117
TPCH skew test speedup 1.0690157018936535
Epoch 11/50 |loss: 0.177867| train set 4.900x speedup, test set 1.069x speedup, val set 0.737x speedup, step: 4, train time 16.89 s
JOB test speedup 1.0133779785071044
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0690157018936535
Epoch 12/50 |loss: 0.178334| train set 4.898x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 5, train time 16.79 s
JOB test speedup 0.9735130478825768
TPCH test speedup 8.6319809315242
TPCH skew test speedup 0.8467185307037698
Epoch 13/50 |loss: 0.169867| train set 4.893x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 6, train time 16.81 s
JOB test speedup 1.1287555779461302
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 14/50 |loss: 0.173159| train set 4.899x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 7, train time 16.88 s
JOB test speedup 0.9697593866021238
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.0684738796627566
Epoch 15/50 |loss: 0.181165| train set 4.926x speedup, test set 1.068x speedup, val set 0.796x speedup, step: 8, train time 16.87 s
JOB test speedup 1.01860491075962
TPCH test speedup 8.646426650596032
TPCH skew test speedup 0.8467185307037698
Epoch 16/50 |loss: 0.168870| train set 4.943x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 9, train time 16.80 s
JOB test speedup 0.950300942859201
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0684738796627566
Epoch 17/50 |loss: 0.163099| train set 4.850x speedup, test set 1.068x speedup, val set 0.805x speedup, step: 10, train time 16.79 s
JOB test speedup 0.950209719528608
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 18/50 |loss: 0.160135| train set 4.904x speedup, test set 1.069x speedup, val set 0.730x speedup, step: 11, train time 16.70 s
JOB test speedup 0.9502589561183826
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 19/50 |loss: 0.158170| train set 4.861x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 12, train time 16.80 s
JOB test speedup 1.01860315624157
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 20/50 |loss: 0.158635| train set 4.883x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 13, train time 16.69 s
JOB test speedup 0.9501129863713408
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 21/50 |loss: 0.155620| train set 4.821x speedup, test set 0.847x speedup, val set 0.730x speedup, step: 14, train time 16.68 s
JOB test speedup 1.0058376632555435
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0684738796627566
Epoch 22/50 |loss: 0.153385| train set 4.864x speedup, test set 1.068x speedup, val set 0.746x speedup, step: 15, train time 16.70 s
JOB test speedup 0.995951275138753
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 23/50 |loss: 0.153531| train set 4.869x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 16, train time 16.59 s
JOB test speedup 0.9695015773445574
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.149930| train set 4.799x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 17, train time 16.70 s
JOB test speedup 0.9686592993014947
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 25/50 |loss: 0.147914| train set 4.806x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 18, train time 16.71 s
JOB test speedup 0.9696622916059785
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 26/50 |loss: 0.144970| train set 4.943x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 19, train time 16.71 s
JOB test speedup 0.9704639577787698
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 27/50 |loss: 0.146774| train set 4.936x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 20, train time 16.71 s
JOB test speedup 0.9695528335586757
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 28/50 |loss: 0.146763| train set 4.864x speedup, test set 1.069x speedup, val set 0.743x speedup, step: 21, train time 16.99 s
JOB test speedup 1.0056387553350463
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 29/50 |loss: 0.142614| train set 4.863x speedup, test set 1.069x speedup, val set 0.800x speedup, step: 22, train time 16.80 s
JOB test speedup 1.075860461057503
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 30/50 |loss: 0.141982| train set 4.867x speedup, test set 1.069x speedup, val set 0.805x speedup, step: 23, train time 16.88 s
JOB test speedup 1.0112452315993328
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 31/50 |loss: 0.140677| train set 4.939x speedup, test set 1.069x speedup, val set 0.743x speedup, step: 24, train time 16.68 s
JOB test speedup 1.0010216981268838
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0684738796627566
Epoch 32/50 |loss: 0.142650| train set 4.947x speedup, test set 1.068x speedup, val set 0.805x speedup, step: 25, train time 16.80 s
JOB test speedup 0.9537561168062489
TPCH test speedup 6.754900273726505
TPCH skew test speedup 0.8467185307037698
Epoch 33/50 |loss: 0.137997| train set 4.936x speedup, test set 0.847x speedup, val set 0.715x speedup, step: 26, train time 16.78 s
JOB test speedup 0.988654574824279
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 34/50 |loss: 0.140638| train set 4.953x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 27, train time 16.78 s
JOB test speedup 1.0203238487198625
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 35/50 |loss: 0.145374| train set 4.905x speedup, test set 0.847x speedup, val set 0.791x speedup, step: 28, train time 16.88 s
JOB test speedup 0.96182862590468
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 36/50 |loss: 0.149013| train set 4.950x speedup, test set 1.069x speedup, val set 0.764x speedup, step: 29, train time 16.70 s
JOB test speedup 0.9537331931146072
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 37/50 |loss: 0.137084| train set 4.955x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 30, train time 16.90 s
JOB test speedup 0.995927096875807
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 38/50 |loss: 0.133408| train set 4.949x speedup, test set 1.069x speedup, val set 0.956x speedup, step: 1, train time 16.78 s
JOB test speedup 1.0122960755541002
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 39/50 |loss: 0.136158| train set 4.863x speedup, test set 0.847x speedup, val set 0.743x speedup, step: 2, train time 16.95 s
JOB test speedup 0.9968174844755265
TPCH test speedup 5.539104207378156
TPCH skew test speedup 0.8467185307037698
Epoch 40/50 |loss: 0.134380| train set 4.871x speedup, test set 0.847x speedup, val set 0.795x speedup, step: 3, train time 16.80 s
JOB test speedup 1.0009964460937357
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 41/50 |loss: 0.134324| train set 4.870x speedup, test set 1.069x speedup, val set 0.805x speedup, step: 4, train time 16.92 s
JOB test speedup 1.0018959251450144
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 42/50 |loss: 0.129375| train set 4.951x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 5, train time 16.88 s
JOB test speedup 1.000019320832725
TPCH test speedup 4.418204220589448
TPCH skew test speedup 0.8467185307037698
Epoch 43/50 |loss: 0.136425| train set 4.942x speedup, test set 0.847x speedup, val set 0.709x speedup, step: 6, train time 16.75 s
JOB test speedup 0.9916230634483814
TPCH test speedup 6.754900273726505
TPCH skew test speedup 1.0690157018936535
Epoch 44/50 |loss: 0.128661| train set 4.953x speedup, test set 1.069x speedup, val set 0.840x speedup, step: 7, train time 16.90 s
JOB test speedup 1.001841192300427
TPCH test speedup 1.1923241369006001
TPCH skew test speedup 0.8467185307037698
Epoch 45/50 |loss: 0.127486| train set 4.868x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 8, train time 16.68 s
JOB test speedup 0.9895320004842915
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 46/50 |loss: 0.126098| train set 4.950x speedup, test set 0.847x speedup, val set 0.775x speedup, step: 9, train time 16.81 s
JOB test speedup 0.9959520937855147
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8467185307037698
Epoch 47/50 |loss: 0.127749| train set 4.955x speedup, test set 0.847x speedup, val set 0.805x speedup, step: 10, train time 16.99 s
JOB test speedup 0.988654574824279
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.0690157018936535
Epoch 48/50 |loss: 0.126509| train set 4.933x speedup, test set 1.069x speedup, val set 0.788x speedup, step: 11, train time 16.99 s
JOB test speedup 0.9886792079943425
TPCH test speedup 5.155959016283291
TPCH skew test speedup 0.8467185307037698
Epoch 49/50 |loss: 0.125324| train set 4.948x speedup, test set 0.847x speedup, val set 0.794x speedup, step: 12, train time 17.11 s
Training per epoch cost 16.829 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 1.437s, pg runtime 1.437s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
13, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
17, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 4.251s, pg runtime 3.112s, speedup 0.732x
21, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
22, opt runtime 0.158s, model runtime 0.256s, pg runtime 0.158s, speedup 0.620x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.962x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 17.708s, pg runtime 17.708s, speedup 1.000x
12, opt runtime 6.284s, model runtime 31.019s, pg runtime 31.019s, speedup 1.000x
13, opt runtime 7.851s, model runtime 13.622s, pg runtime 13.622s, speedup 1.000x
14, opt runtime 7.442s, model runtime 14.838s, pg runtime 14.838s, speedup 1.000x
15, opt runtime 7.110s, model runtime 14.286s, pg runtime 14.286s, speedup 1.000x
16, opt runtime 6.810s, model runtime 13.796s, pg runtime 13.796s, speedup 1.000x
17, opt runtime 6.460s, model runtime 16.134s, pg runtime 16.134s, speedup 1.000x
18, opt runtime 6.656s, model runtime 15.260s, pg runtime 15.260s, speedup 1.000x
19, opt runtime 7.913s, model runtime 15.548s, pg runtime 15.548s, speedup 1.000x
20, opt runtime 7.377s, model runtime 28.655s, pg runtime 28.655s, speedup 1.000x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
12, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
13, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
14, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
15, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
16, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
17, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
18, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
19, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
20, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 38, train speedup 4.949, test speedup 0.996, val speedup 0.956
TPCH best validation speedup epoch: 38, train speedup 4.949, test speedup 8.646, val speedup 0.956
TPCH Skew best validation speedup epoch: 38, train speedup 4.949, test speedup 1.069, val speedup 0.956
execution cost 0:15:00.049080
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
(218, 49)
(218, 49)
construct training samples cost 0:00:01.322216, and there are 26626 training samples
in channel 9
JOB test speedup 1.0147527789981587
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 0/50 |loss: 0.374893| train set 4.049x speedup, test set 1.069x speedup, val set 0.720x speedup, step: 1, train time 18.10 s
JOB test speedup 0.9747761500035741
TPCH test speedup 5.360127563874363
TPCH skew test speedup 0.8467185307037698
Epoch 1/50 |loss: 0.288213| train set 4.837x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 1, train time 16.81 s
JOB test speedup 0.9806543914649658
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.0690157018936535
Epoch 2/50 |loss: 0.258576| train set 4.889x speedup, test set 1.069x speedup, val set 0.733x speedup, step: 1, train time 16.81 s
JOB test speedup 1.052819968356207
TPCH test speedup 6.259502837019816
TPCH skew test speedup 1.332162046432323
Epoch 3/50 |loss: 0.240499| train set 4.926x speedup, test set 1.332x speedup, val set 0.857x speedup, step: 1, train time 16.61 s
JOB test speedup 0.9695606701517938
TPCH test speedup 4.414687710933372
TPCH skew test speedup 0.8467185307037698
Epoch 4/50 |loss: 0.226487| train set 4.909x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 2, train time 16.87 s
JOB test speedup 0.9905916297690688
TPCH test speedup 3.327056336481029
TPCH skew test speedup 1.087946618545801
Epoch 5/50 |loss: 0.216276| train set 4.896x speedup, test set 1.088x speedup, val set 0.855x speedup, step: 3, train time 16.79 s
JOB test speedup 0.9940653802458842
TPCH test speedup 4.335289429174345
TPCH skew test speedup 1.332162046432323
Epoch 6/50 |loss: 0.206277| train set 4.935x speedup, test set 1.332x speedup, val set 0.856x speedup, step: 4, train time 17.01 s
JOB test speedup 0.9378403302735038
TPCH test speedup 3.77560307991202
TPCH skew test speedup 0.8467185307037698
Epoch 7/50 |loss: 0.204621| train set 4.820x speedup, test set 0.847x speedup, val set 0.852x speedup, step: 5, train time 16.99 s
JOB test speedup 0.9777816546740469
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.087946618545801
Epoch 8/50 |loss: 0.199073| train set 4.940x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 6, train time 16.98 s
JOB test speedup 1.0771774136034964
TPCH test speedup 8.646426650596032
TPCH skew test speedup 1.3699521174074574
Epoch 9/50 |loss: 0.190340| train set 4.690x speedup, test set 1.370x speedup, val set 0.823x speedup, step: 7, train time 17.18 s
JOB test speedup 0.9663406946130455
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8467185307037698
Epoch 10/50 |loss: 0.187794| train set 4.912x speedup, test set 0.847x speedup, val set 0.731x speedup, step: 8, train time 17.08 s
JOB test speedup 1.2343722793507823
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.0690157018936535
Epoch 11/50 |loss: 0.180685| train set 4.894x speedup, test set 1.069x speedup, val set 0.870x speedup, step: 1, train time 16.97 s
JOB test speedup 1.0157302062254863
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.087946618545801
Epoch 12/50 |loss: 0.180878| train set 4.851x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 2, train time 17.00 s
JOB test speedup 0.9359742301334043
TPCH test speedup 8.560301627357337
TPCH skew test speedup 1.087946618545801
Epoch 13/50 |loss: 0.170116| train set 4.921x speedup, test set 1.088x speedup, val set 0.870x speedup, step: 3, train time 17.11 s
JOB test speedup 1.102631362676934
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.4846207759384964
Epoch 14/50 |loss: 0.175853| train set 4.893x speedup, test set 1.485x speedup, val set 0.852x speedup, step: 4, train time 17.09 s
JOB test speedup 1.021164576623764
TPCH test speedup 4.75610743448809
TPCH skew test speedup 0.8467185307037698
Epoch 15/50 |loss: 0.187418| train set 4.845x speedup, test set 0.847x speedup, val set 0.737x speedup, step: 5, train time 17.09 s
JOB test speedup 1.1486993625664288
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.087946618545801
Epoch 16/50 |loss: 0.173102| train set 4.946x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 6, train time 17.07 s
JOB test speedup 0.9721410793574796
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.0684738796627566
Epoch 17/50 |loss: 0.163289| train set 4.850x speedup, test set 1.068x speedup, val set 0.746x speedup, step: 7, train time 16.97 s
JOB test speedup 0.975558923393472
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 18/50 |loss: 0.162103| train set 4.898x speedup, test set 1.485x speedup, val set 0.856x speedup, step: 8, train time 17.10 s
JOB test speedup 1.0813888028221235
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 0.8467185307037698
Epoch 19/50 |loss: 0.158408| train set 4.869x speedup, test set 0.847x speedup, val set 0.733x speedup, step: 9, train time 17.10 s
JOB test speedup 1.0252503950056213
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.087946618545801
Epoch 20/50 |loss: 0.158645| train set 4.899x speedup, test set 1.088x speedup, val set 0.856x speedup, step: 10, train time 17.10 s
JOB test speedup 0.9434512239695845
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 1.087946618545801
Epoch 21/50 |loss: 0.155174| train set 4.908x speedup, test set 1.088x speedup, val set 0.840x speedup, step: 11, train time 17.10 s
JOB test speedup 1.0248626458310786
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.4835759735630838
Epoch 22/50 |loss: 0.154920| train set 4.858x speedup, test set 1.484x speedup, val set 0.931x speedup, step: 1, train time 17.20 s
JOB test speedup 1.0167132177244105
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.087946618545801
Epoch 23/50 |loss: 0.159076| train set 4.868x speedup, test set 1.088x speedup, val set 0.861x speedup, step: 2, train time 17.17 s
JOB test speedup 0.935236603922895
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0690157018936535
Epoch 24/50 |loss: 0.148746| train set 4.804x speedup, test set 1.069x speedup, val set 0.734x speedup, step: 3, train time 17.17 s
JOB test speedup 0.9539646731386304
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0690157018936535
Epoch 25/50 |loss: 0.147712| train set 4.797x speedup, test set 1.069x speedup, val set 0.731x speedup, step: 4, train time 17.10 s
JOB test speedup 1.0273472729915716
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 1.087946618545801
Epoch 26/50 |loss: 0.144481| train set 4.945x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 5, train time 16.99 s
JOB test speedup 0.9463239239677046
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.087946618545801
Epoch 27/50 |loss: 0.146642| train set 4.924x speedup, test set 1.088x speedup, val set 0.852x speedup, step: 6, train time 17.08 s
JOB test speedup 0.9755616401022154
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.4846207759384964
Epoch 28/50 |loss: 0.145338| train set 4.863x speedup, test set 1.485x speedup, val set 0.898x speedup, step: 7, train time 17.10 s
JOB test speedup 1.0350987144281414
TPCH test speedup 6.800067512589705
TPCH skew test speedup 1.4846207759384964
Epoch 29/50 |loss: 0.142844| train set 4.864x speedup, test set 1.485x speedup, val set 0.960x speedup, step: 1, train time 17.11 s
JOB test speedup 0.9780582860192145
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0684738796627566
Epoch 30/50 |loss: 0.140716| train set 4.863x speedup, test set 1.068x speedup, val set 0.795x speedup, step: 2, train time 16.97 s
JOB test speedup 0.988792232868617
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.0690157018936535
Epoch 31/50 |loss: 0.140045| train set 4.944x speedup, test set 1.069x speedup, val set 0.786x speedup, step: 3, train time 17.00 s
JOB test speedup 0.9785831327334216
TPCH test speedup 5.360127563874363
TPCH skew test speedup 1.4835759735630838
Epoch 32/50 |loss: 0.139692| train set 4.941x speedup, test set 1.484x speedup, val set 0.941x speedup, step: 4, train time 17.11 s
JOB test speedup 0.9786154073341629
TPCH test speedup 4.5878846837977685
TPCH skew test speedup 1.087946618545801
Epoch 33/50 |loss: 0.137944| train set 4.949x speedup, test set 1.088x speedup, val set 0.839x speedup, step: 5, train time 17.07 s
JOB test speedup 1.0049897152770053
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 1.087946618545801
Epoch 34/50 |loss: 0.141697| train set 4.946x speedup, test set 1.088x speedup, val set 0.864x speedup, step: 6, train time 17.07 s
JOB test speedup 1.0139309288574307
TPCH test speedup 4.437482747228825
TPCH skew test speedup 0.8463785826525752
Epoch 35/50 |loss: 0.149738| train set 4.886x speedup, test set 0.846x speedup, val set 0.791x speedup, step: 7, train time 17.10 s
JOB test speedup 1.0465073736024
TPCH test speedup 3.3754021047066156
TPCH skew test speedup 1.4846207759384964
Epoch 36/50 |loss: 0.154064| train set 4.951x speedup, test set 1.485x speedup, val set 0.857x speedup, step: 8, train time 16.98 s
early stopping at epoch 36
Training per epoch cost 17.058 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.399s, model runtime 0.399s, pg runtime 0.404s, speedup 1.013x
04, opt runtime 0.637s, model runtime 1.164s, pg runtime 0.637s, speedup 0.547x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.661s, model runtime 1.219s, pg runtime 0.661s, speedup 0.542x
07, opt runtime 1.437s, model runtime 1.437s, pg runtime 1.437s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
10, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
11, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
12, opt runtime 3.504s, model runtime 3.504s, pg runtime 6.143s, speedup 1.753x
13, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
14, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
15, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
16, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
17, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
18, opt runtime 0.612s, model runtime 2.907s, pg runtime 1.357s, speedup 0.467x
19, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
20, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
21, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
22, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
23, opt runtime 0.129s, model runtime 0.135s, pg runtime 0.129s, speedup 0.961x
24, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.391s, speedup 1.125x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 36.429s, pg runtime 17.708s, speedup 0.486x
12, opt runtime 6.284s, model runtime 39.704s, pg runtime 31.019s, speedup 0.781x
13, opt runtime 7.851s, model runtime 30.956s, pg runtime 13.622s, speedup 0.440x
14, opt runtime 7.442s, model runtime 32.816s, pg runtime 14.838s, speedup 0.452x
15, opt runtime 7.110s, model runtime 38.849s, pg runtime 14.286s, speedup 0.368x
16, opt runtime 6.810s, model runtime 39.840s, pg runtime 13.796s, speedup 0.346x
17, opt runtime 6.460s, model runtime 33.445s, pg runtime 16.134s, speedup 0.482x
18, opt runtime 6.656s, model runtime 39.236s, pg runtime 15.260s, speedup 0.389x
19, opt runtime 7.913s, model runtime 32.779s, pg runtime 15.548s, speedup 0.474x
20, opt runtime 7.377s, model runtime 42.222s, pg runtime 28.655s, speedup 0.679x
21, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
22, opt runtime 7.096s, model runtime 7.096s, pg runtime 7.096s, speedup 1.000x
23, opt runtime 7.063s, model runtime 7.063s, pg runtime 7.063s, speedup 1.000x
24, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
25, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
26, opt runtime 6.905s, model runtime 6.905s, pg runtime 6.905s, speedup 1.000x
27, opt runtime 6.663s, model runtime 6.663s, pg runtime 6.663s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
30, opt runtime 6.961s, model runtime 6.961s, pg runtime 6.961s, speedup 1.000x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 23.619s, model runtime 23.619s, pg runtime 23.619s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
04, opt runtime 22.802s, model runtime 22.802s, pg runtime 22.802s, speedup 1.000x
05, opt runtime 19.407s, model runtime 19.407s, pg runtime 19.407s, speedup 1.000x
06, opt runtime 34.077s, model runtime 34.077s, pg runtime 34.077s, speedup 1.000x
07, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
08, opt runtime 18.839s, model runtime 18.839s, pg runtime 18.839s, speedup 1.000x
09, opt runtime 30.267s, model runtime 30.267s, pg runtime 30.267s, speedup 1.000x
10, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
11, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
12, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
13, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
14, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
15, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
16, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
17, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
18, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
19, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
20, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
32, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
33, opt runtime 3.020s, model runtime 3.458s, pg runtime 13.874s, speedup 4.012x
34, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
35, opt runtime 2.718s, model runtime 2.718s, pg runtime 12.519s, speedup 4.606x
36, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
37, opt runtime 3.090s, model runtime 4.364s, pg runtime 14.431s, speedup 3.306x
38, opt runtime 3.079s, model runtime 3.080s, pg runtime 13.817s, speedup 4.487x
39, opt runtime 2.923s, model runtime 2.923s, pg runtime 13.811s, speedup 4.725x
40, opt runtime 2.833s, model runtime 2.833s, pg runtime 12.441s, speedup 4.391x
====================
JOB best validation speedup epoch: 29, train speedup 4.864, test speedup 1.035, val speedup 0.960
TPCH best validation speedup epoch: 29, train speedup 4.864, test speedup 6.800, val speedup 0.960
TPCH Skew best validation speedup epoch: 29, train speedup 4.864, test speedup 1.485, val speedup 0.960
execution cost 0:11:16.959661
==================================================
