all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.799493, and there are 34391 training samples
in channel 9
JOB test speedup 0.22271532725890753
TPCH test speedup 0.5125595838480884
TPCH skew test speedup 0.5152978666857573
Epoch 0/50 |loss: 0.413335| train set 0.483x speedup, test set 0.515x speedup, val set 0.491x speedup, step: 1, train time 23.11 s
JOB test speedup 0.23174875001663425
TPCH test speedup 0.5014480683498991
TPCH skew test speedup 0.5145187237505593
Epoch 1/50 |loss: 0.301802| train set 0.471x speedup, test set 0.515x speedup, val set 0.481x speedup, step: 2, train time 21.69 s
JOB test speedup 0.21665912639520818
TPCH test speedup 0.4956431106074915
TPCH skew test speedup 0.5091557176103433
Epoch 2/50 |loss: 0.262068| train set 0.463x speedup, test set 0.509x speedup, val set 0.473x speedup, step: 3, train time 21.77 s
JOB test speedup 0.21457395197595236
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 3/50 |loss: 0.237047| train set 0.457x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 4, train time 21.87 s
JOB test speedup 0.2316428222773079
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 4/50 |loss: 0.218990| train set 0.458x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 5, train time 21.85 s
JOB test speedup 0.22027588712674626
TPCH test speedup 0.5101362067890884
TPCH skew test speedup 0.5184176613805831
Epoch 5/50 |loss: 0.206087| train set 0.468x speedup, test set 0.518x speedup, val set 0.485x speedup, step: 6, train time 21.96 s
JOB test speedup 0.21836863214289126
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 6/50 |loss: 0.196539| train set 0.457x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 7, train time 22.24 s
JOB test speedup 0.22074365911289118
TPCH test speedup 0.5019424696912874
TPCH skew test speedup 0.5160191104215534
Epoch 7/50 |loss: 0.186562| train set 0.457x speedup, test set 0.516x speedup, val set 0.480x speedup, step: 8, train time 22.00 s
JOB test speedup 0.23840219009031333
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 8/50 |loss: 0.177488| train set 0.458x speedup, test set 0.504x speedup, val set 0.472x speedup, step: 9, train time 21.87 s
JOB test speedup 0.21470676780064482
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 9/50 |loss: 0.171010| train set 0.460x speedup, test set 0.448x speedup, val set 0.470x speedup, step: 10, train time 21.88 s
JOB test speedup 0.23671272775135027
TPCH test speedup 0.5028162307777263
TPCH skew test speedup 0.5135428264944149
Epoch 10/50 |loss: 0.169393| train set 0.459x speedup, test set 0.514x speedup, val set 0.472x speedup, step: 11, train time 21.86 s
JOB test speedup 0.22993510063505387
TPCH test speedup 0.5001543423738246
TPCH skew test speedup 0.5123434853579222
Epoch 11/50 |loss: 0.163783| train set 0.461x speedup, test set 0.512x speedup, val set 0.476x speedup, step: 12, train time 22.04 s
JOB test speedup 0.22747133054766572
TPCH test speedup 0.5099220644658
TPCH skew test speedup 0.5177831752487883
Epoch 12/50 |loss: 0.153673| train set 0.462x speedup, test set 0.518x speedup, val set 0.487x speedup, step: 13, train time 21.89 s
JOB test speedup 0.21639643604428002
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 13/50 |loss: 0.152930| train set 0.452x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 14, train time 21.97 s
JOB test speedup 0.212243196874621
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 14/50 |loss: 0.150605| train set 0.456x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 15, train time 22.21 s
JOB test speedup 0.2165522131946523
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 15/50 |loss: 0.145719| train set 0.458x speedup, test set 0.505x speedup, val set 0.473x speedup, step: 16, train time 22.25 s
JOB test speedup 0.2145995174572724
TPCH test speedup 0.49780161662342953
TPCH skew test speedup 0.44527604069458615
Epoch 16/50 |loss: 0.144373| train set 0.454x speedup, test set 0.445x speedup, val set 0.480x speedup, step: 17, train time 22.00 s
JOB test speedup 0.22321385982114583
TPCH test speedup 0.4996253383425397
TPCH skew test speedup 0.5089160253621051
Epoch 17/50 |loss: 0.142426| train set 0.456x speedup, test set 0.509x speedup, val set 0.474x speedup, step: 18, train time 22.25 s
JOB test speedup 0.22749137350609094
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 18/50 |loss: 0.139042| train set 0.451x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 19, train time 22.20 s
JOB test speedup 0.21877468165965944
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 19/50 |loss: 0.135894| train set 0.457x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 20, train time 22.27 s
JOB test speedup 0.226366163122407
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 20/50 |loss: 0.129854| train set 0.454x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 21, train time 22.62 s
JOB test speedup 0.21883523506563077
TPCH test speedup 0.49866690967498883
TPCH skew test speedup 0.5113661554816125
Epoch 21/50 |loss: 0.129961| train set 0.391x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 22, train time 22.31 s
JOB test speedup 0.2240620859661654
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 22/50 |loss: 0.130766| train set 0.456x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 23, train time 22.01 s
JOB test speedup 0.2355135413531217
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 23/50 |loss: 0.126702| train set 0.454x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 24, train time 22.38 s
JOB test speedup 0.2135583594998483
TPCH test speedup 0.4808016738988554
TPCH skew test speedup 0.45042765571631466
Epoch 24/50 |loss: 0.123756| train set 0.461x speedup, test set 0.450x speedup, val set 0.471x speedup, step: 25, train time 22.27 s
JOB test speedup 0.2182850453942633
TPCH test speedup 0.4983267637550733
TPCH skew test speedup 0.4478976815186837
Epoch 25/50 |loss: 0.125030| train set 0.452x speedup, test set 0.448x speedup, val set 0.480x speedup, step: 26, train time 22.40 s
JOB test speedup 0.21261288835945572
TPCH test speedup 0.4983267637550733
TPCH skew test speedup 0.4478976815186837
Epoch 26/50 |loss: 0.123938| train set 0.455x speedup, test set 0.448x speedup, val set 0.480x speedup, step: 27, train time 22.81 s
JOB test speedup 0.20945041052281935
TPCH test speedup 0.5001214092292645
TPCH skew test speedup 0.5124049337024402
Epoch 27/50 |loss: 0.119874| train set 0.458x speedup, test set 0.512x speedup, val set 0.469x speedup, step: 28, train time 22.40 s
JOB test speedup 0.2283122364509329
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 28/50 |loss: 0.118620| train set 0.394x speedup, test set 0.448x speedup, val set 0.468x speedup, step: 29, train time 22.60 s
JOB test speedup 0.20804250075718175
TPCH test speedup 0.4956107688572643
TPCH skew test speedup 0.5090880024055386
Epoch 29/50 |loss: 0.119584| train set 0.390x speedup, test set 0.509x speedup, val set 0.471x speedup, step: 30, train time 22.57 s
JOB test speedup 0.2022329437458112
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 30/50 |loss: 0.115518| train set 0.458x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 31, train time 22.31 s
JOB test speedup 0.2182970920228125
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 31/50 |loss: 0.116353| train set 0.455x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 32, train time 22.40 s
JOB test speedup 0.21438791487098272
TPCH test speedup 0.49418235004745853
TPCH skew test speedup 0.5081723563248334
Epoch 32/50 |loss: 0.111726| train set 0.452x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 33, train time 22.60 s
JOB test speedup 0.2135288341156428
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 33/50 |loss: 0.110610| train set 0.456x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 34, train time 22.57 s
JOB test speedup 0.1891984298400731
TPCH test speedup 0.49823121822239896
TPCH skew test speedup 0.44791177648280367
Epoch 34/50 |loss: 0.113494| train set 0.455x speedup, test set 0.448x speedup, val set 0.483x speedup, step: 35, train time 22.38 s
JOB test speedup 0.21684684333850437
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 35/50 |loss: 0.108992| train set 0.452x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 36, train time 22.56 s
JOB test speedup 0.20945180672846334
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 36/50 |loss: 0.109063| train set 0.456x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 37, train time 22.37 s
JOB test speedup 0.21680642473620085
TPCH test speedup 0.4936658970058442
TPCH skew test speedup 0.5048181971736246
Epoch 37/50 |loss: 0.109419| train set 0.453x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 38, train time 22.37 s
JOB test speedup 0.22869835225391666
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 38/50 |loss: 0.110661| train set 0.389x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 39, train time 22.38 s
JOB test speedup 0.19510146396100853
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 39/50 |loss: 0.108147| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 40, train time 22.17 s
JOB test speedup 0.20625438018781528
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 40/50 |loss: 0.105344| train set 0.453x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 41, train time 22.31 s
JOB test speedup 0.19707009634579759
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 41/50 |loss: 0.105988| train set 0.391x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 42, train time 22.32 s
JOB test speedup 0.19566930655748552
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 42/50 |loss: 0.102974| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 43, train time 22.38 s
JOB test speedup 0.20657748772993367
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 43/50 |loss: 0.104900| train set 0.391x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 44, train time 22.46 s
JOB test speedup 0.1982113652010811
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 44/50 |loss: 0.105280| train set 0.389x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 45, train time 22.41 s
JOB test speedup 0.2083842297698739
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 45/50 |loss: 0.099817| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 46, train time 22.51 s
JOB test speedup 0.19430059488726312
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 46/50 |loss: 0.101814| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 47, train time 22.47 s
JOB test speedup 0.18929789057202487
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 47/50 |loss: 0.101309| train set 0.455x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 48, train time 22.50 s
JOB test speedup 0.20867458897497573
TPCH test speedup 0.4956107688572643
TPCH skew test speedup 0.5090880024055386
Epoch 48/50 |loss: 0.101295| train set 0.392x speedup, test set 0.509x speedup, val set 0.471x speedup, step: 49, train time 22.50 s
JOB test speedup 0.20708941163508154
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 49/50 |loss: 0.101306| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 50, train time 22.72 s
Training per epoch cost 22.285 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 1.770s, pg runtime 0.072s, speedup 0.041x
02, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
03, opt runtime 0.014s, model runtime 3.462s, pg runtime 0.014s, speedup 0.004x
04, opt runtime 0.348s, model runtime 2.639s, pg runtime 0.348s, speedup 0.132x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 14.065s, pg runtime 0.802s, speedup 0.057x
07, opt runtime 0.919s, model runtime 2.785s, pg runtime 0.942s, speedup 0.338x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
10, opt runtime 2.959s, model runtime 34.126s, pg runtime 2.959s, speedup 0.087x
11, opt runtime 0.294s, model runtime 9.920s, pg runtime 2.352s, speedup 0.237x
12, opt runtime 0.463s, model runtime 12.952s, pg runtime 0.557s, speedup 0.043x
13, opt runtime 1.829s, model runtime 9.516s, pg runtime 53.885s, speedup 5.662x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 0.313s, model runtime 6.719s, pg runtime 0.313s, speedup 0.047x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 12.209s, pg runtime 0.354s, speedup 0.029x
18, opt runtime 2.599s, model runtime 25.102s, pg runtime 2.599s, speedup 0.104x
19, opt runtime 1.923s, model runtime 16.009s, pg runtime 3.540s, speedup 0.221x
20, opt runtime 0.061s, model runtime 7.531s, pg runtime 0.086s, speedup 0.011x
21, opt runtime 0.626s, model runtime 12.950s, pg runtime 2.558s, speedup 0.198x
22, opt runtime 0.136s, model runtime 25.280s, pg runtime 0.891s, speedup 0.035x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 0.189s, model runtime 17.996s, pg runtime 0.189s, speedup 0.011x
25, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
26, opt runtime 0.020s, model runtime 1.552s, pg runtime 0.020s, speedup 0.013x
27, opt runtime 0.060s, model runtime 1.196s, pg runtime 0.112s, speedup 0.094x
28, opt runtime 0.154s, model runtime 11.740s, pg runtime 0.154s, speedup 0.013x
29, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
30, opt runtime 0.023s, model runtime 11.896s, pg runtime 0.023s, speedup 0.002x
31, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
32, opt runtime 1.315s, model runtime 8.994s, pg runtime 1.315s, speedup 0.146x
33, opt runtime 0.250s, model runtime 7.361s, pg runtime 0.250s, speedup 0.034x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
04, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
05, opt runtime 23.961s, model runtime 49.702s, pg runtime 32.278s, speedup 0.649x
06, opt runtime 21.143s, model runtime 55.527s, pg runtime 21.143s, speedup 0.381x
07, opt runtime 6.460s, model runtime 68.184s, pg runtime 16.134s, speedup 0.237x
08, opt runtime 6.284s, model runtime 81.870s, pg runtime 31.019s, speedup 0.379x
09, opt runtime 3.944s, model runtime 12.042s, pg runtime 3.944s, speedup 0.328x
10, opt runtime 3.603s, model runtime 12.640s, pg runtime 3.603s, speedup 0.285x
11, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
12, opt runtime 25.043s, model runtime 115.186s, pg runtime 73.019s, speedup 0.634x
13, opt runtime 2.995s, model runtime 96.797s, pg runtime 14.646s, speedup 0.151x
14, opt runtime 3.449s, model runtime 104.561s, pg runtime 14.824s, speedup 0.142x
15, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
16, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
17, opt runtime 7.469s, model runtime 153.196s, pg runtime 23.223s, speedup 0.152x
18, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
19, opt runtime 1.148s, model runtime 44.628s, pg runtime 1.214s, speedup 0.027x
20, opt runtime 1.353s, model runtime 45.705s, pg runtime 1.380s, speedup 0.030x
21, opt runtime 22.482s, model runtime 54.406s, pg runtime 22.482s, speedup 0.413x
22, opt runtime 6.519s, model runtime 91.130s, pg runtime 6.519s, speedup 0.072x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 5.961s, model runtime 92.708s, pg runtime 31.210s, speedup 0.337x
25, opt runtime 1.642s, model runtime 3.569s, pg runtime 1.752s, speedup 0.491x
26, opt runtime 1.404s, model runtime 3.441s, pg runtime 1.404s, speedup 0.408x
27, opt runtime 7.268s, model runtime 10.668s, pg runtime 7.268s, speedup 0.681x
28, opt runtime 6.854s, model runtime 10.444s, pg runtime 6.854s, speedup 0.656x
29, opt runtime 5.362s, model runtime 26.693s, pg runtime 5.362s, speedup 0.201x
30, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
31, opt runtime 24.079s, model runtime 663.875s, pg runtime 608.707s, speedup 0.917x
32, opt runtime 24.706s, model runtime 660.594s, pg runtime 610.808s, speedup 0.925x
33, opt runtime 38.718s, model runtime 104.379s, pg runtime 69.421s, speedup 0.665x
34, opt runtime 35.527s, model runtime 140.312s, pg runtime 71.730s, speedup 0.511x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.639s, model runtime 576.339s, pg runtime 462.544s, speedup 0.803x
37, opt runtime 11.120s, model runtime 278.146s, pg runtime 11.120s, speedup 0.040x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 0.912s, model runtime 26.810s, pg runtime 0.912s, speedup 0.034x
40, opt runtime 0.873s, model runtime 25.962s, pg runtime 0.873s, speedup 0.034x
========== TPCH skew
01, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
02, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
03, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 20.708s, model runtime 68.822s, pg runtime 20.708s, speedup 0.301x
06, opt runtime 11.965s, model runtime 75.033s, pg runtime 11.965s, speedup 0.159x
07, opt runtime 5.471s, model runtime 67.587s, pg runtime 13.410s, speedup 0.198x
08, opt runtime 6.497s, model runtime 69.526s, pg runtime 12.849s, speedup 0.185x
09, opt runtime 3.612s, model runtime 11.335s, pg runtime 3.612s, speedup 0.319x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 25.045s, model runtime 118.748s, pg runtime 64.291s, speedup 0.541x
12, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
15, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
16, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
17, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
18, opt runtime 7.915s, model runtime 150.640s, pg runtime 29.436s, speedup 0.195x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.316s, model runtime 32.538s, pg runtime 1.352s, speedup 0.042x
21, opt runtime 23.119s, model runtime 88.588s, pg runtime 23.119s, speedup 0.261x
22, opt runtime 22.332s, model runtime 70.102s, pg runtime 22.449s, speedup 0.320x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 3.331s, pg runtime 1.433s, speedup 0.430x
26, opt runtime 1.187s, model runtime 3.327s, pg runtime 1.187s, speedup 0.357x
27, opt runtime 6.749s, model runtime 10.149s, pg runtime 6.749s, speedup 0.665x
28, opt runtime 7.213s, model runtime 11.120s, pg runtime 7.213s, speedup 0.649x
29, opt runtime 5.223s, model runtime 26.755s, pg runtime 5.223s, speedup 0.195x
30, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
31, opt runtime 24.136s, model runtime 676.182s, pg runtime 609.432s, speedup 0.901x
32, opt runtime 24.451s, model runtime 664.233s, pg runtime 628.615s, speedup 0.946x
33, opt runtime 39.254s, model runtime 119.051s, pg runtime 58.921s, speedup 0.495x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
36, opt runtime 14.422s, model runtime 584.445s, pg runtime 497.542s, speedup 0.851x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 23.543s, model runtime 270.128s, pg runtime 23.543s, speedup 0.087x
39, opt runtime 0.876s, model runtime 25.437s, pg runtime 0.938s, speedup 0.037x
40, opt runtime 0.967s, model runtime 28.908s, pg runtime 0.967s, speedup 0.033x
====================
JOB best validation speedup epoch: 0, train speedup 0.483, test speedup 0.223, val speedup 0.491
TPCH best validation speedup epoch: 0, train speedup 0.483, test speedup 0.513, val speedup 0.491
TPCH Skew best validation speedup epoch: 0, train speedup 0.483, test speedup 0.515, val speedup 0.491
execution cost 0:19:41.295018
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.769402, and there are 34391 training samples
in channel 9
JOB test speedup 0.21976239102068962
TPCH test speedup 0.5111324660977048
TPCH skew test speedup 0.5143597668123591
Epoch 0/50 |loss: 0.415453| train set 0.479x speedup, test set 0.514x speedup, val set 0.489x speedup, step: 1, train time 23.38 s
JOB test speedup 0.22543005653610612
TPCH test speedup 0.48326104617554677
TPCH skew test speedup 0.4513543736071189
Epoch 1/50 |loss: 0.300407| train set 0.478x speedup, test set 0.451x speedup, val set 0.482x speedup, step: 2, train time 22.20 s
JOB test speedup 0.22679313682848004
TPCH test speedup 0.5028162307777263
TPCH skew test speedup 0.5135428264944149
Epoch 2/50 |loss: 0.263066| train set 0.468x speedup, test set 0.514x speedup, val set 0.483x speedup, step: 3, train time 22.27 s
JOB test speedup 0.22809715147536105
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 3/50 |loss: 0.237559| train set 0.467x speedup, test set 0.508x speedup, val set 0.482x speedup, step: 4, train time 22.21 s
JOB test speedup 0.2195519251264285
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 4/50 |loss: 0.219453| train set 0.458x speedup, test set 0.508x speedup, val set 0.474x speedup, step: 5, train time 22.35 s
JOB test speedup 0.22144432702704883
TPCH test speedup 0.5012221166769111
TPCH skew test speedup 0.5108031329800211
Epoch 5/50 |loss: 0.204272| train set 0.462x speedup, test set 0.511x speedup, val set 0.473x speedup, step: 6, train time 22.23 s
JOB test speedup 0.23212969696753585
TPCH test speedup 0.4972470477428705
TPCH skew test speedup 0.5111128432943234
Epoch 6/50 |loss: 0.194211| train set 0.461x speedup, test set 0.511x speedup, val set 0.475x speedup, step: 7, train time 22.34 s
JOB test speedup 0.23367861904528464
TPCH test speedup 0.5010484422637528
TPCH skew test speedup 0.5102551455186499
Epoch 7/50 |loss: 0.187867| train set 0.462x speedup, test set 0.510x speedup, val set 0.476x speedup, step: 8, train time 22.16 s
JOB test speedup 0.2354282387694534
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 8/50 |loss: 0.175948| train set 0.455x speedup, test set 0.504x speedup, val set 0.470x speedup, step: 9, train time 22.31 s
JOB test speedup 0.2210458546435057
TPCH test speedup 0.47612105587332615
TPCH skew test speedup 0.44528775493789347
Epoch 9/50 |loss: 0.170733| train set 0.460x speedup, test set 0.445x speedup, val set 0.470x speedup, step: 10, train time 22.30 s
JOB test speedup 0.23758783619031137
TPCH test speedup 0.5074256931215738
TPCH skew test speedup 0.5167161804378332
Epoch 10/50 |loss: 0.169234| train set 0.471x speedup, test set 0.517x speedup, val set 0.485x speedup, step: 11, train time 22.40 s
JOB test speedup 0.24985265363242892
TPCH test speedup 0.4951236014766133
TPCH skew test speedup 0.5057706348957897
Epoch 11/50 |loss: 0.163626| train set 0.460x speedup, test set 0.506x speedup, val set 0.478x speedup, step: 12, train time 22.21 s
JOB test speedup 0.22767651390907578
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 12/50 |loss: 0.154116| train set 0.455x speedup, test set 0.511x speedup, val set 0.473x speedup, step: 13, train time 22.31 s
JOB test speedup 0.222164786484515
TPCH test speedup 0.4996253383425397
TPCH skew test speedup 0.5089160253621051
Epoch 13/50 |loss: 0.153075| train set 0.457x speedup, test set 0.509x speedup, val set 0.474x speedup, step: 14, train time 22.30 s
JOB test speedup 0.2245709829911738
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 14/50 |loss: 0.149717| train set 0.458x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 15, train time 22.31 s
JOB test speedup 0.22357226824852905
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 15/50 |loss: 0.146111| train set 0.457x speedup, test set 0.505x speedup, val set 0.471x speedup, step: 16, train time 22.21 s
JOB test speedup 0.2175052228567504
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 16/50 |loss: 0.146105| train set 0.456x speedup, test set 0.505x speedup, val set 0.472x speedup, step: 17, train time 22.30 s
JOB test speedup 0.22251599587235643
TPCH test speedup 0.5015505091204286
TPCH skew test speedup 0.5083516859427682
Epoch 17/50 |loss: 0.140347| train set 0.458x speedup, test set 0.508x speedup, val set 0.475x speedup, step: 18, train time 22.41 s
JOB test speedup 0.23581790559308818
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 18/50 |loss: 0.137673| train set 0.454x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 19, train time 22.31 s
JOB test speedup 0.2253236539493386
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 19/50 |loss: 0.138488| train set 0.455x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 20, train time 22.44 s
JOB test speedup 0.2318273408297703
TPCH test speedup 0.5060606972659583
TPCH skew test speedup 0.5158424194624914
Epoch 20/50 |loss: 0.130717| train set 0.462x speedup, test set 0.516x speedup, val set 0.481x speedup, step: 21, train time 22.84 s
JOB test speedup 0.22627818909503455
TPCH test speedup 0.49866690967498883
TPCH skew test speedup 0.5113661554816125
Epoch 21/50 |loss: 0.129671| train set 0.457x speedup, test set 0.511x speedup, val set 0.472x speedup, step: 22, train time 22.41 s
JOB test speedup 0.2305122507928711
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 22/50 |loss: 0.130683| train set 0.456x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 23, train time 22.31 s
JOB test speedup 0.23153331743051261
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 23/50 |loss: 0.125293| train set 0.457x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 24, train time 22.36 s
JOB test speedup 0.2369316530918619
TPCH test speedup 0.48031279576819425
TPCH skew test speedup 0.447776401942961
Epoch 24/50 |loss: 0.125262| train set 0.460x speedup, test set 0.448x speedup, val set 0.471x speedup, step: 25, train time 22.28 s
JOB test speedup 0.23310812998233782
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 25/50 |loss: 0.125341| train set 0.456x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 26, train time 22.27 s
JOB test speedup 0.22919141434681736
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 26/50 |loss: 0.122985| train set 0.452x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 27, train time 22.16 s
JOB test speedup 0.23033117501757452
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 27/50 |loss: 0.120667| train set 0.455x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 28, train time 22.30 s
JOB test speedup 0.24229048647037263
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.5055447614602365
Epoch 28/50 |loss: 0.117025| train set 0.395x speedup, test set 0.506x speedup, val set 0.468x speedup, step: 29, train time 22.31 s
JOB test speedup 0.21715165872366207
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 29/50 |loss: 0.117183| train set 0.391x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 30, train time 22.33 s
JOB test speedup 0.2293780621126183
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 30/50 |loss: 0.118858| train set 0.459x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 31, train time 22.37 s
JOB test speedup 0.23868579400641096
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 31/50 |loss: 0.115590| train set 0.457x speedup, test set 0.511x speedup, val set 0.473x speedup, step: 32, train time 22.38 s
JOB test speedup 0.23460862452271367
TPCH test speedup 0.5110284772410049
TPCH skew test speedup 0.5184280629884743
Epoch 32/50 |loss: 0.111981| train set 0.452x speedup, test set 0.518x speedup, val set 0.469x speedup, step: 33, train time 22.31 s
JOB test speedup 0.21910025092140384
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 33/50 |loss: 0.111955| train set 0.456x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 34, train time 22.40 s
JOB test speedup 0.20892821381645899
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 34/50 |loss: 0.113177| train set 0.454x speedup, test set 0.505x speedup, val set 0.471x speedup, step: 35, train time 22.31 s
JOB test speedup 0.22029731840361433
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 35/50 |loss: 0.109399| train set 0.453x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 36, train time 22.44 s
JOB test speedup 0.2280487934471488
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 36/50 |loss: 0.109440| train set 0.457x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 37, train time 22.40 s
JOB test speedup 0.2375895700090804
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 37/50 |loss: 0.109991| train set 0.456x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 38, train time 22.47 s
JOB test speedup 0.24100534090367431
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 38/50 |loss: 0.109550| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 39, train time 22.51 s
JOB test speedup 0.20370315799113045
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 39/50 |loss: 0.108073| train set 0.450x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 40, train time 22.36 s
JOB test speedup 0.2227267923277313
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 40/50 |loss: 0.103168| train set 0.453x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 41, train time 22.31 s
JOB test speedup 0.2242228575202349
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 41/50 |loss: 0.107126| train set 0.455x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 42, train time 22.45 s
JOB test speedup 0.21760522172523503
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 42/50 |loss: 0.103304| train set 0.389x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 43, train time 22.32 s
JOB test speedup 0.21974264743763963
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 43/50 |loss: 0.105410| train set 0.391x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 44, train time 22.47 s
JOB test speedup 0.21974264743763963
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 44/50 |loss: 0.103665| train set 0.451x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 45, train time 22.50 s
JOB test speedup 0.22179058446966976
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 45/50 |loss: 0.101384| train set 0.452x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 46, train time 22.21 s
JOB test speedup 0.2242317997756549
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 46/50 |loss: 0.102199| train set 0.460x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 47, train time 22.41 s
JOB test speedup 0.21615008503260788
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 47/50 |loss: 0.100896| train set 0.455x speedup, test set 0.511x speedup, val set 0.469x speedup, step: 48, train time 22.41 s
JOB test speedup 0.22050757629043782
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 48/50 |loss: 0.101283| train set 0.392x speedup, test set 0.511x speedup, val set 0.469x speedup, step: 49, train time 22.50 s
JOB test speedup 0.22296468717343162
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 49/50 |loss: 0.101725| train set 0.389x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 50, train time 22.80 s
Training per epoch cost 22.377 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 2.199s, pg runtime 0.072s, speedup 0.033x
02, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
03, opt runtime 0.014s, model runtime 3.462s, pg runtime 0.014s, speedup 0.004x
04, opt runtime 0.348s, model runtime 2.639s, pg runtime 0.348s, speedup 0.132x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 14.065s, pg runtime 0.802s, speedup 0.057x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 0.206s, model runtime 9.661s, pg runtime 0.206s, speedup 0.021x
09, opt runtime 2.324s, model runtime 19.337s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.959s, model runtime 34.126s, pg runtime 2.959s, speedup 0.087x
11, opt runtime 0.294s, model runtime 11.106s, pg runtime 2.352s, speedup 0.212x
12, opt runtime 0.463s, model runtime 12.952s, pg runtime 0.557s, speedup 0.043x
13, opt runtime 1.829s, model runtime 7.190s, pg runtime 53.885s, speedup 7.495x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 0.313s, model runtime 6.719s, pg runtime 0.313s, speedup 0.047x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.599s, model runtime 25.102s, pg runtime 2.599s, speedup 0.104x
19, opt runtime 1.923s, model runtime 29.556s, pg runtime 3.540s, speedup 0.120x
20, opt runtime 0.061s, model runtime 7.531s, pg runtime 0.086s, speedup 0.011x
21, opt runtime 0.626s, model runtime 12.350s, pg runtime 2.558s, speedup 0.207x
22, opt runtime 0.136s, model runtime 25.280s, pg runtime 0.891s, speedup 0.035x
23, opt runtime 0.389s, model runtime 8.892s, pg runtime 0.389s, speedup 0.044x
24, opt runtime 0.189s, model runtime 17.996s, pg runtime 0.189s, speedup 0.011x
25, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
26, opt runtime 0.020s, model runtime 1.552s, pg runtime 0.020s, speedup 0.013x
27, opt runtime 0.060s, model runtime 1.196s, pg runtime 0.112s, speedup 0.094x
28, opt runtime 0.154s, model runtime 11.740s, pg runtime 0.154s, speedup 0.013x
29, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
30, opt runtime 0.023s, model runtime 11.896s, pg runtime 0.023s, speedup 0.002x
31, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
32, opt runtime 1.315s, model runtime 8.994s, pg runtime 1.315s, speedup 0.146x
33, opt runtime 0.250s, model runtime 7.361s, pg runtime 0.250s, speedup 0.034x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
04, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
05, opt runtime 23.961s, model runtime 49.702s, pg runtime 32.278s, speedup 0.649x
06, opt runtime 21.143s, model runtime 55.527s, pg runtime 21.143s, speedup 0.381x
07, opt runtime 6.460s, model runtime 68.184s, pg runtime 16.134s, speedup 0.237x
08, opt runtime 6.284s, model runtime 81.870s, pg runtime 31.019s, speedup 0.379x
09, opt runtime 3.944s, model runtime 12.042s, pg runtime 3.944s, speedup 0.328x
10, opt runtime 3.603s, model runtime 12.640s, pg runtime 3.603s, speedup 0.285x
11, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
12, opt runtime 25.043s, model runtime 115.186s, pg runtime 73.019s, speedup 0.634x
13, opt runtime 2.995s, model runtime 96.797s, pg runtime 14.646s, speedup 0.151x
14, opt runtime 3.449s, model runtime 104.561s, pg runtime 14.824s, speedup 0.142x
15, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
16, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
17, opt runtime 7.469s, model runtime 153.196s, pg runtime 23.223s, speedup 0.152x
18, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
19, opt runtime 1.148s, model runtime 44.628s, pg runtime 1.214s, speedup 0.027x
20, opt runtime 1.353s, model runtime 45.705s, pg runtime 1.380s, speedup 0.030x
21, opt runtime 22.482s, model runtime 54.406s, pg runtime 22.482s, speedup 0.413x
22, opt runtime 6.519s, model runtime 91.130s, pg runtime 6.519s, speedup 0.072x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 5.961s, model runtime 92.708s, pg runtime 31.210s, speedup 0.337x
25, opt runtime 1.642s, model runtime 3.569s, pg runtime 1.752s, speedup 0.491x
26, opt runtime 1.404s, model runtime 3.441s, pg runtime 1.404s, speedup 0.408x
27, opt runtime 7.268s, model runtime 10.668s, pg runtime 7.268s, speedup 0.681x
28, opt runtime 6.854s, model runtime 10.444s, pg runtime 6.854s, speedup 0.656x
29, opt runtime 5.362s, model runtime 26.693s, pg runtime 5.362s, speedup 0.201x
30, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
31, opt runtime 24.079s, model runtime 663.875s, pg runtime 608.707s, speedup 0.917x
32, opt runtime 24.706s, model runtime 660.594s, pg runtime 610.808s, speedup 0.925x
33, opt runtime 38.718s, model runtime 104.379s, pg runtime 69.421s, speedup 0.665x
34, opt runtime 35.527s, model runtime 140.312s, pg runtime 71.730s, speedup 0.511x
35, opt runtime 18.690s, model runtime 664.045s, pg runtime 651.942s, speedup 0.982x
36, opt runtime 16.639s, model runtime 568.411s, pg runtime 462.544s, speedup 0.814x
37, opt runtime 11.120s, model runtime 278.146s, pg runtime 11.120s, speedup 0.040x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 0.912s, model runtime 26.810s, pg runtime 0.912s, speedup 0.034x
40, opt runtime 0.873s, model runtime 25.962s, pg runtime 0.873s, speedup 0.034x
========== TPCH skew
01, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
02, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
03, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 20.708s, model runtime 68.822s, pg runtime 20.708s, speedup 0.301x
06, opt runtime 11.965s, model runtime 75.033s, pg runtime 11.965s, speedup 0.159x
07, opt runtime 5.471s, model runtime 67.587s, pg runtime 13.410s, speedup 0.198x
08, opt runtime 6.497s, model runtime 69.526s, pg runtime 12.849s, speedup 0.185x
09, opt runtime 3.612s, model runtime 11.335s, pg runtime 3.612s, speedup 0.319x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 25.045s, model runtime 118.748s, pg runtime 64.291s, speedup 0.541x
12, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
15, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
16, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
17, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
18, opt runtime 7.915s, model runtime 150.640s, pg runtime 29.436s, speedup 0.195x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.316s, model runtime 32.538s, pg runtime 1.352s, speedup 0.042x
21, opt runtime 23.119s, model runtime 88.588s, pg runtime 23.119s, speedup 0.261x
22, opt runtime 22.332s, model runtime 70.102s, pg runtime 22.449s, speedup 0.320x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 3.331s, pg runtime 1.433s, speedup 0.430x
26, opt runtime 1.187s, model runtime 3.327s, pg runtime 1.187s, speedup 0.357x
27, opt runtime 6.749s, model runtime 10.149s, pg runtime 6.749s, speedup 0.665x
28, opt runtime 7.213s, model runtime 11.120s, pg runtime 7.213s, speedup 0.649x
29, opt runtime 5.223s, model runtime 26.755s, pg runtime 5.223s, speedup 0.195x
30, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
31, opt runtime 24.136s, model runtime 676.182s, pg runtime 609.432s, speedup 0.901x
32, opt runtime 24.451s, model runtime 664.233s, pg runtime 628.615s, speedup 0.946x
33, opt runtime 39.254s, model runtime 119.051s, pg runtime 58.921s, speedup 0.495x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.482s, model runtime 635.181s, pg runtime 622.915s, speedup 0.981x
36, opt runtime 14.422s, model runtime 582.751s, pg runtime 497.542s, speedup 0.854x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 23.543s, model runtime 270.128s, pg runtime 23.543s, speedup 0.087x
39, opt runtime 0.876s, model runtime 25.437s, pg runtime 0.938s, speedup 0.037x
40, opt runtime 0.967s, model runtime 28.908s, pg runtime 0.967s, speedup 0.033x
====================
JOB best validation speedup epoch: 0, train speedup 0.479, test speedup 0.220, val speedup 0.489
TPCH best validation speedup epoch: 0, train speedup 0.479, test speedup 0.511, val speedup 0.489
TPCH Skew best validation speedup epoch: 0, train speedup 0.479, test speedup 0.514, val speedup 0.489
execution cost 0:19:46.254498
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.765916, and there are 34391 training samples
in channel 9
JOB test speedup 0.2654600056950404
TPCH test speedup 0.4991975481366937
TPCH skew test speedup 0.5104275680634484
Epoch 0/50 |loss: 0.414099| train set 0.472x speedup, test set 0.510x speedup, val set 0.478x speedup, step: 1, train time 23.29 s
JOB test speedup 0.21177944846512864
TPCH test speedup 0.5113759580325195
TPCH skew test speedup 0.5236160969650591
Epoch 1/50 |loss: 0.301144| train set 0.483x speedup, test set 0.524x speedup, val set 0.497x speedup, step: 1, train time 21.79 s
JOB test speedup 0.22563831558171218
TPCH test speedup 0.4951236014766133
TPCH skew test speedup 0.5057706348957897
Epoch 2/50 |loss: 0.262583| train set 0.459x speedup, test set 0.506x speedup, val set 0.473x speedup, step: 2, train time 21.80 s
JOB test speedup 0.22975225585846917
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 3/50 |loss: 0.237249| train set 0.460x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 3, train time 21.86 s
JOB test speedup 0.2237897053423897
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 4/50 |loss: 0.217616| train set 0.462x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 4, train time 21.71 s
JOB test speedup 0.2363810686238831
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 5/50 |loss: 0.204707| train set 0.469x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 5, train time 21.81 s
JOB test speedup 0.22000216843589057
TPCH test speedup 0.4967241726065199
TPCH skew test speedup 0.5077017741363951
Epoch 6/50 |loss: 0.192235| train set 0.461x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 6, train time 21.75 s
JOB test speedup 0.22370722120533457
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 7/50 |loss: 0.183128| train set 0.459x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 7, train time 21.74 s
JOB test speedup 0.2387499395834999
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 8/50 |loss: 0.174794| train set 0.455x speedup, test set 0.504x speedup, val set 0.470x speedup, step: 8, train time 21.85 s
JOB test speedup 0.2406336131060109
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 9/50 |loss: 0.167266| train set 0.461x speedup, test set 0.448x speedup, val set 0.471x speedup, step: 9, train time 21.70 s
JOB test speedup 0.2398073781487049
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 10/50 |loss: 0.165943| train set 0.462x speedup, test set 0.508x speedup, val set 0.476x speedup, step: 10, train time 21.66 s
JOB test speedup 0.2271150024247625
TPCH test speedup 0.4956431106074915
TPCH skew test speedup 0.5092841530026005
Epoch 11/50 |loss: 0.160167| train set 0.458x speedup, test set 0.509x speedup, val set 0.473x speedup, step: 11, train time 21.96 s
JOB test speedup 0.2356621044539851
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 12/50 |loss: 0.152175| train set 0.456x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 12, train time 21.65 s
JOB test speedup 0.2370481720477128
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048002932886377
Epoch 13/50 |loss: 0.150073| train set 0.454x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 13, train time 21.68 s
JOB test speedup 0.2300445887680873
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 14/50 |loss: 0.148267| train set 0.455x speedup, test set 0.505x speedup, val set 0.468x speedup, step: 14, train time 21.74 s
JOB test speedup 0.2300949115912849
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 15/50 |loss: 0.143447| train set 0.455x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 15, train time 21.94 s
JOB test speedup 0.23597055717757223
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 16/50 |loss: 0.144673| train set 0.461x speedup, test set 0.504x speedup, val set 0.470x speedup, step: 16, train time 21.67 s
JOB test speedup 0.25547942622359154
TPCH test speedup 0.4942927265458782
TPCH skew test speedup 0.5053423981545686
Epoch 17/50 |loss: 0.138691| train set 0.456x speedup, test set 0.505x speedup, val set 0.472x speedup, step: 17, train time 21.91 s
JOB test speedup 0.23735175442768627
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 18/50 |loss: 0.137585| train set 0.453x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 18, train time 21.90 s
JOB test speedup 0.23429974865487074
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 19/50 |loss: 0.135130| train set 0.452x speedup, test set 0.505x speedup, val set 0.468x speedup, step: 19, train time 22.15 s
JOB test speedup 0.24693725972036876
TPCH test speedup 0.4996253383425397
TPCH skew test speedup 0.5089160253621051
Epoch 20/50 |loss: 0.129747| train set 0.459x speedup, test set 0.509x speedup, val set 0.471x speedup, step: 20, train time 22.45 s
JOB test speedup 0.2286404891746826
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 21/50 |loss: 0.129523| train set 0.392x speedup, test set 0.505x speedup, val set 0.468x speedup, step: 21, train time 22.18 s
JOB test speedup 0.2283364750494179
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 22/50 |loss: 0.130481| train set 0.455x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 22, train time 22.11 s
JOB test speedup 0.2330959275048259
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 23/50 |loss: 0.124297| train set 0.456x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 23, train time 22.14 s
JOB test speedup 0.23520197327323158
TPCH test speedup 0.4808016738988554
TPCH skew test speedup 0.45042765571631466
Epoch 24/50 |loss: 0.124448| train set 0.459x speedup, test set 0.450x speedup, val set 0.472x speedup, step: 24, train time 22.10 s
JOB test speedup 0.23545799783053376
TPCH test speedup 0.4766313422848723
TPCH skew test speedup 0.44796195134849837
Epoch 25/50 |loss: 0.123696| train set 0.393x speedup, test set 0.448x speedup, val set 0.467x speedup, step: 25, train time 22.12 s
JOB test speedup 0.24603210545145082
TPCH test speedup 0.4950913274867633
TPCH skew test speedup 0.505830516620888
Epoch 26/50 |loss: 0.122683| train set 0.456x speedup, test set 0.506x speedup, val set 0.474x speedup, step: 26, train time 22.07 s
JOB test speedup 0.22991162627637274
TPCH test speedup 0.49409613990814716
TPCH skew test speedup 0.504177686586334
Epoch 27/50 |loss: 0.120605| train set 0.456x speedup, test set 0.504x speedup, val set 0.470x speedup, step: 27, train time 22.20 s
JOB test speedup 0.25306448989821784
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 28/50 |loss: 0.117547| train set 0.455x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 28, train time 22.12 s
JOB test speedup 0.23234654374617644
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 29/50 |loss: 0.118679| train set 0.391x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 29, train time 22.25 s
JOB test speedup 0.23500355761806963
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 30/50 |loss: 0.120399| train set 0.457x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 30, train time 22.08 s
JOB test speedup 0.2615824660275368
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 31/50 |loss: 0.116229| train set 0.457x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 31, train time 22.44 s
JOB test speedup 0.23597669747825262
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 32/50 |loss: 0.111936| train set 0.390x speedup, test set 0.505x speedup, val set 0.471x speedup, step: 32, train time 22.18 s
JOB test speedup 0.23906171747495422
TPCH test speedup 0.4802824236864065
TPCH skew test speedup 0.4477240281154304
Epoch 33/50 |loss: 0.111526| train set 0.455x speedup, test set 0.448x speedup, val set 0.470x speedup, step: 33, train time 22.41 s
JOB test speedup 0.22264909086440268
TPCH test speedup 0.49369798541541415
TPCH skew test speedup 0.5048847811903103
Epoch 34/50 |loss: 0.113142| train set 0.455x speedup, test set 0.505x speedup, val set 0.472x speedup, step: 34, train time 21.95 s
JOB test speedup 0.22854143382299594
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 35/50 |loss: 0.110181| train set 0.452x speedup, test set 0.505x speedup, val set 0.468x speedup, step: 35, train time 22.44 s
JOB test speedup 0.26835239499357894
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 36/50 |loss: 0.109624| train set 0.458x speedup, test set 0.508x speedup, val set 0.475x speedup, step: 36, train time 22.60 s
JOB test speedup 0.23451083920834778
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 37/50 |loss: 0.109457| train set 0.455x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 37, train time 22.30 s
JOB test speedup 0.2387605501602027
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 38/50 |loss: 0.109658| train set 0.390x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 38, train time 22.50 s
JOB test speedup 0.2171526093835036
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 39/50 |loss: 0.110031| train set 0.391x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 39, train time 22.21 s
JOB test speedup 0.23581341178800383
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 40/50 |loss: 0.105026| train set 0.453x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 40, train time 22.40 s
JOB test speedup 0.2378387711476713
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 41/50 |loss: 0.107414| train set 0.453x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 41, train time 22.21 s
JOB test speedup 0.24034564501646205
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 42/50 |loss: 0.103349| train set 0.390x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 42, train time 22.57 s
JOB test speedup 0.22597957427628315
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 43/50 |loss: 0.105508| train set 0.392x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 43, train time 22.27 s
JOB test speedup 0.22265796065529694
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 44/50 |loss: 0.104634| train set 0.391x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 44, train time 22.40 s
JOB test speedup 0.2564533534895911
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 45/50 |loss: 0.101629| train set 0.452x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 45, train time 22.41 s
JOB test speedup 0.2200069513651628
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 46/50 |loss: 0.102970| train set 0.390x speedup, test set 0.505x speedup, val set 0.473x speedup, step: 46, train time 22.39 s
JOB test speedup 0.25279905169208094
TPCH test speedup 0.5015871601035476
TPCH skew test speedup 0.5108707300370384
Epoch 47/50 |loss: 0.100541| train set 0.454x speedup, test set 0.511x speedup, val set 0.480x speedup, step: 47, train time 22.41 s
JOB test speedup 0.23412602617453226
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 48/50 |loss: 0.101391| train set 0.392x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 48, train time 22.20 s
JOB test speedup 0.22275159139889855
TPCH test speedup 0.49701763580288233
TPCH skew test speedup 0.507633877139023
Epoch 49/50 |loss: 0.101710| train set 0.389x speedup, test set 0.508x speedup, val set 0.475x speedup, step: 49, train time 22.88 s
Training per epoch cost 22.131 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.858s, pg runtime 0.072s, speedup 0.084x
02, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
03, opt runtime 0.014s, model runtime 3.462s, pg runtime 0.014s, speedup 0.004x
04, opt runtime 0.348s, model runtime 2.639s, pg runtime 0.348s, speedup 0.132x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 14.065s, pg runtime 0.802s, speedup 0.057x
07, opt runtime 0.919s, model runtime 4.380s, pg runtime 0.942s, speedup 0.215x
08, opt runtime 0.206s, model runtime 9.661s, pg runtime 0.206s, speedup 0.021x
09, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
10, opt runtime 2.959s, model runtime 34.126s, pg runtime 2.959s, speedup 0.087x
11, opt runtime 0.294s, model runtime 11.106s, pg runtime 2.352s, speedup 0.212x
12, opt runtime 0.463s, model runtime 12.952s, pg runtime 0.557s, speedup 0.043x
13, opt runtime 1.829s, model runtime 29.394s, pg runtime 53.885s, speedup 1.833x
14, opt runtime 0.113s, model runtime 2.542s, pg runtime 0.153s, speedup 0.060x
15, opt runtime 0.313s, model runtime 5.357s, pg runtime 0.313s, speedup 0.058x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 10.038s, pg runtime 0.354s, speedup 0.035x
18, opt runtime 2.599s, model runtime 26.459s, pg runtime 2.599s, speedup 0.098x
19, opt runtime 1.923s, model runtime 29.556s, pg runtime 3.540s, speedup 0.120x
20, opt runtime 0.061s, model runtime 2.694s, pg runtime 0.086s, speedup 0.032x
21, opt runtime 0.626s, model runtime 12.350s, pg runtime 2.558s, speedup 0.207x
22, opt runtime 0.136s, model runtime 25.280s, pg runtime 0.891s, speedup 0.035x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 0.189s, model runtime 17.996s, pg runtime 0.189s, speedup 0.011x
25, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
26, opt runtime 0.020s, model runtime 1.552s, pg runtime 0.020s, speedup 0.013x
27, opt runtime 0.060s, model runtime 1.196s, pg runtime 0.112s, speedup 0.094x
28, opt runtime 0.154s, model runtime 11.740s, pg runtime 0.154s, speedup 0.013x
29, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
30, opt runtime 0.023s, model runtime 11.896s, pg runtime 0.023s, speedup 0.002x
31, opt runtime 0.965s, model runtime 9.814s, pg runtime 0.965s, speedup 0.098x
32, opt runtime 1.315s, model runtime 8.994s, pg runtime 1.315s, speedup 0.146x
33, opt runtime 0.250s, model runtime 7.361s, pg runtime 0.250s, speedup 0.034x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
04, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 21.143s, model runtime 66.875s, pg runtime 21.143s, speedup 0.316x
07, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
08, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
09, opt runtime 3.944s, model runtime 12.042s, pg runtime 3.944s, speedup 0.328x
10, opt runtime 3.603s, model runtime 12.640s, pg runtime 3.603s, speedup 0.285x
11, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
12, opt runtime 25.043s, model runtime 115.186s, pg runtime 73.019s, speedup 0.634x
13, opt runtime 2.995s, model runtime 96.797s, pg runtime 14.646s, speedup 0.151x
14, opt runtime 3.449s, model runtime 104.561s, pg runtime 14.824s, speedup 0.142x
15, opt runtime 49.511s, model runtime 698.879s, pg runtime 87.329s, speedup 0.125x
16, opt runtime 48.784s, model runtime 648.484s, pg runtime 78.349s, speedup 0.121x
17, opt runtime 7.469s, model runtime 153.196s, pg runtime 23.223s, speedup 0.152x
18, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
19, opt runtime 1.148s, model runtime 44.628s, pg runtime 1.214s, speedup 0.027x
20, opt runtime 1.353s, model runtime 45.705s, pg runtime 1.380s, speedup 0.030x
21, opt runtime 22.482s, model runtime 54.406s, pg runtime 22.482s, speedup 0.413x
22, opt runtime 6.519s, model runtime 91.130s, pg runtime 6.519s, speedup 0.072x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 5.961s, model runtime 92.708s, pg runtime 31.210s, speedup 0.337x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.404s, model runtime 30.252s, pg runtime 1.404s, speedup 0.046x
27, opt runtime 7.268s, model runtime 11.857s, pg runtime 7.268s, speedup 0.613x
28, opt runtime 6.854s, model runtime 12.460s, pg runtime 6.854s, speedup 0.550x
29, opt runtime 5.362s, model runtime 26.693s, pg runtime 5.362s, speedup 0.201x
30, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
31, opt runtime 24.079s, model runtime 608.707s, pg runtime 608.707s, speedup 1.000x
32, opt runtime 24.706s, model runtime 610.808s, pg runtime 610.808s, speedup 1.000x
33, opt runtime 38.718s, model runtime 104.379s, pg runtime 69.421s, speedup 0.665x
34, opt runtime 35.527s, model runtime 140.312s, pg runtime 71.730s, speedup 0.511x
35, opt runtime 18.690s, model runtime 664.045s, pg runtime 651.942s, speedup 0.982x
36, opt runtime 16.639s, model runtime 568.411s, pg runtime 462.544s, speedup 0.814x
37, opt runtime 11.120s, model runtime 278.146s, pg runtime 11.120s, speedup 0.040x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 0.912s, model runtime 26.810s, pg runtime 0.912s, speedup 0.034x
40, opt runtime 0.873s, model runtime 25.962s, pg runtime 0.873s, speedup 0.034x
========== TPCH skew
01, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
02, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
03, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 20.708s, model runtime 74.186s, pg runtime 20.708s, speedup 0.279x
06, opt runtime 11.965s, model runtime 62.207s, pg runtime 11.965s, speedup 0.192x
07, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
08, opt runtime 6.497s, model runtime 104.488s, pg runtime 12.849s, speedup 0.123x
09, opt runtime 3.612s, model runtime 11.335s, pg runtime 3.612s, speedup 0.319x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 25.045s, model runtime 118.748s, pg runtime 64.291s, speedup 0.541x
12, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
15, opt runtime 47.844s, model runtime 609.493s, pg runtime 80.007s, speedup 0.131x
16, opt runtime 54.335s, model runtime 618.380s, pg runtime 95.799s, speedup 0.155x
17, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
18, opt runtime 7.915s, model runtime 150.640s, pg runtime 29.436s, speedup 0.195x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.316s, model runtime 32.538s, pg runtime 1.352s, speedup 0.042x
21, opt runtime 23.119s, model runtime 88.588s, pg runtime 23.119s, speedup 0.261x
22, opt runtime 22.332s, model runtime 70.102s, pg runtime 22.449s, speedup 0.320x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.187s, model runtime 13.453s, pg runtime 1.187s, speedup 0.088x
27, opt runtime 6.749s, model runtime 12.585s, pg runtime 6.749s, speedup 0.536x
28, opt runtime 7.213s, model runtime 11.999s, pg runtime 7.213s, speedup 0.601x
29, opt runtime 5.223s, model runtime 26.755s, pg runtime 5.223s, speedup 0.195x
30, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
31, opt runtime 24.136s, model runtime 609.432s, pg runtime 609.432s, speedup 1.000x
32, opt runtime 24.451s, model runtime 628.615s, pg runtime 628.615s, speedup 1.000x
33, opt runtime 39.254s, model runtime 119.051s, pg runtime 58.921s, speedup 0.495x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.482s, model runtime 635.181s, pg runtime 622.915s, speedup 0.981x
36, opt runtime 14.422s, model runtime 582.751s, pg runtime 497.542s, speedup 0.854x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 23.543s, model runtime 270.128s, pg runtime 23.543s, speedup 0.087x
39, opt runtime 0.876s, model runtime 25.437s, pg runtime 0.938s, speedup 0.037x
40, opt runtime 0.967s, model runtime 28.908s, pg runtime 0.967s, speedup 0.033x
====================
JOB best validation speedup epoch: 1, train speedup 0.483, test speedup 0.212, val speedup 0.497
TPCH best validation speedup epoch: 1, train speedup 0.483, test speedup 0.511, val speedup 0.497
TPCH Skew best validation speedup epoch: 1, train speedup 0.483, test speedup 0.524, val speedup 0.497
execution cost 0:19:34.683246
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.695754, and there are 34391 training samples
in channel 9
JOB test speedup 0.26291787154330937
TPCH test speedup 0.5215744713982918
TPCH skew test speedup 0.5291789300363378
Epoch 0/50 |loss: 0.412257| train set 0.481x speedup, test set 0.529x speedup, val set 0.503x speedup, step: 1, train time 23.54 s
JOB test speedup 0.22446817705692568
TPCH test speedup 0.48237336577223
TPCH skew test speedup 0.45206727076560194
Epoch 1/50 |loss: 0.300504| train set 0.473x speedup, test set 0.452x speedup, val set 0.480x speedup, step: 2, train time 22.31 s
JOB test speedup 0.22072656294397042
TPCH test speedup 0.5089661004550617
TPCH skew test speedup 0.5190673546032559
Epoch 2/50 |loss: 0.258261| train set 0.471x speedup, test set 0.519x speedup, val set 0.488x speedup, step: 3, train time 22.15 s
JOB test speedup 0.21406740870782032
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 3/50 |loss: 0.233703| train set 0.458x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 4, train time 22.04 s
JOB test speedup 0.23189993854900906
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 4/50 |loss: 0.213043| train set 0.460x speedup, test set 0.505x speedup, val set 0.473x speedup, step: 5, train time 22.16 s
JOB test speedup 0.214076772436827
TPCH test speedup 0.5026276155074948
TPCH skew test speedup 0.5117967121741477
Epoch 5/50 |loss: 0.201279| train set 0.465x speedup, test set 0.512x speedup, val set 0.478x speedup, step: 6, train time 21.94 s
JOB test speedup 0.21799557729118435
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 6/50 |loss: 0.191732| train set 0.458x speedup, test set 0.505x speedup, val set 0.471x speedup, step: 7, train time 22.17 s
JOB test speedup 0.2304658936346528
TPCH test speedup 0.4995924748244091
TPCH skew test speedup 0.5088483738938367
Epoch 7/50 |loss: 0.181241| train set 0.460x speedup, test set 0.509x speedup, val set 0.474x speedup, step: 8, train time 22.61 s
JOB test speedup 0.23623146302833575
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 8/50 |loss: 0.171844| train set 0.458x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 9, train time 22.30 s
JOB test speedup 0.22771078330399594
TPCH test speedup 0.4802824236864065
TPCH skew test speedup 0.4477240281154304
Epoch 9/50 |loss: 0.164907| train set 0.464x speedup, test set 0.448x speedup, val set 0.471x speedup, step: 10, train time 22.47 s
JOB test speedup 0.22579771125103076
TPCH test speedup 0.5028162307777263
TPCH skew test speedup 0.5135428264944149
Epoch 10/50 |loss: 0.164718| train set 0.469x speedup, test set 0.514x speedup, val set 0.484x speedup, step: 11, train time 22.31 s
JOB test speedup 0.21607208726716426
TPCH test speedup 0.4956431106074915
TPCH skew test speedup 0.5091557176103433
Epoch 11/50 |loss: 0.158457| train set 0.460x speedup, test set 0.509x speedup, val set 0.472x speedup, step: 12, train time 22.38 s
JOB test speedup 0.22547306411002352
TPCH test speedup 0.49652114009068415
TPCH skew test speedup 0.5070932316482127
Epoch 12/50 |loss: 0.150362| train set 0.456x speedup, test set 0.507x speedup, val set 0.474x speedup, step: 13, train time 22.08 s
JOB test speedup 0.23098723593454237
TPCH test speedup 0.4951236014766133
TPCH skew test speedup 0.5057706348957897
Epoch 13/50 |loss: 0.150025| train set 0.454x speedup, test set 0.506x speedup, val set 0.472x speedup, step: 14, train time 22.47 s
JOB test speedup 0.2153349656683863
TPCH test speedup 0.49704358764652545
TPCH skew test speedup 0.5104961011383958
Epoch 14/50 |loss: 0.147240| train set 0.457x speedup, test set 0.510x speedup, val set 0.472x speedup, step: 15, train time 22.35 s
JOB test speedup 0.2126354878784223
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 15/50 |loss: 0.142915| train set 0.456x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 16, train time 22.51 s
JOB test speedup 0.21787691645393253
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 16/50 |loss: 0.142519| train set 0.458x speedup, test set 0.511x speedup, val set 0.469x speedup, step: 17, train time 22.51 s
JOB test speedup 0.22192614798434826
TPCH test speedup 0.49877929875932675
TPCH skew test speedup 0.5084824479279717
Epoch 17/50 |loss: 0.136903| train set 0.455x speedup, test set 0.508x speedup, val set 0.475x speedup, step: 18, train time 22.48 s
JOB test speedup 0.22249417336783578
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 18/50 |loss: 0.136058| train set 0.453x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 19, train time 22.50 s
JOB test speedup 0.22561850912020198
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 19/50 |loss: 0.134284| train set 0.455x speedup, test set 0.508x speedup, val set 0.468x speedup, step: 20, train time 22.56 s
JOB test speedup 0.21403688167271614
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 20/50 |loss: 0.127664| train set 0.393x speedup, test set 0.511x speedup, val set 0.468x speedup, step: 21, train time 23.07 s
JOB test speedup 0.21838219498173947
TPCH test speedup 0.49866690967498883
TPCH skew test speedup 0.5113661554816125
Epoch 21/50 |loss: 0.127186| train set 0.392x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 22, train time 22.28 s
JOB test speedup 0.22467250200106675
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 22/50 |loss: 0.128341| train set 0.457x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 23, train time 22.20 s
JOB test speedup 0.22389629843800482
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 23/50 |loss: 0.122888| train set 0.458x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 24, train time 22.16 s
JOB test speedup 0.2261607914931814
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 24/50 |loss: 0.122825| train set 0.455x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 25, train time 22.48 s
JOB test speedup 0.21214191064508547
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 25/50 |loss: 0.122396| train set 0.456x speedup, test set 0.448x speedup, val set 0.466x speedup, step: 26, train time 22.41 s
JOB test speedup 0.221440574711789
TPCH test speedup 0.49835946096009537
TPCH skew test speedup 0.4479500959837006
Epoch 26/50 |loss: 0.120065| train set 0.453x speedup, test set 0.448x speedup, val set 0.480x speedup, step: 27, train time 22.51 s
JOB test speedup 0.2150417330995434
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 27/50 |loss: 0.119623| train set 0.456x speedup, test set 0.511x speedup, val set 0.469x speedup, step: 28, train time 22.30 s
JOB test speedup 0.2265715709574341
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 28/50 |loss: 0.118402| train set 0.458x speedup, test set 0.448x speedup, val set 0.468x speedup, step: 29, train time 22.26 s
JOB test speedup 0.208597807343617
TPCH test speedup 0.498425717457697
TPCH skew test speedup 0.5114884850966982
Epoch 29/50 |loss: 0.116279| train set 0.391x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 30, train time 22.46 s
JOB test speedup 0.2083410961305489
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 30/50 |loss: 0.115736| train set 0.457x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 31, train time 22.57 s
JOB test speedup 0.21933976453581627
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 31/50 |loss: 0.113860| train set 0.458x speedup, test set 0.511x speedup, val set 0.473x speedup, step: 32, train time 22.40 s
JOB test speedup 0.22631515881420797
TPCH test speedup 0.5015804657603498
TPCH skew test speedup 0.5137007277842613
Epoch 32/50 |loss: 0.109938| train set 0.455x speedup, test set 0.514x speedup, val set 0.471x speedup, step: 33, train time 22.04 s
JOB test speedup 0.19931826515510795
TPCH test speedup 0.4995924748244091
TPCH skew test speedup 0.5088483738938367
Epoch 33/50 |loss: 0.108017| train set 0.454x speedup, test set 0.509x speedup, val set 0.473x speedup, step: 34, train time 22.31 s
JOB test speedup 0.192246193978292
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 34/50 |loss: 0.111492| train set 0.455x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 35, train time 22.20 s
JOB test speedup 0.22071241247188886
TPCH test speedup 0.49707611667425233
TPCH skew test speedup 0.5105641914765179
Epoch 35/50 |loss: 0.107407| train set 0.453x speedup, test set 0.511x speedup, val set 0.472x speedup, step: 36, train time 22.27 s
JOB test speedup 0.19390023649902705
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 36/50 |loss: 0.108478| train set 0.459x speedup, test set 0.511x speedup, val set 0.473x speedup, step: 37, train time 22.25 s
JOB test speedup 0.20660158077388585
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 37/50 |loss: 0.106369| train set 0.394x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 38, train time 22.31 s
JOB test speedup 0.22780842352097547
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 38/50 |loss: 0.108579| train set 0.392x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 39, train time 22.50 s
JOB test speedup 0.1923181646408738
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 39/50 |loss: 0.106581| train set 0.391x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 40, train time 22.51 s
JOB test speedup 0.20145428196198645
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 40/50 |loss: 0.104483| train set 0.453x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 41, train time 22.21 s
JOB test speedup 0.22357475507488525
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 41/50 |loss: 0.102458| train set 0.391x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 42, train time 22.41 s
JOB test speedup 0.20409525038992754
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 42/50 |loss: 0.101639| train set 0.389x speedup, test set 0.505x speedup, val set 0.467x speedup, step: 43, train time 22.47 s
JOB test speedup 0.2220141345553923
TPCH test speedup 0.49739521002009107
TPCH skew test speedup 0.5075016830660201
Epoch 43/50 |loss: 0.103967| train set 0.391x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 44, train time 22.51 s
JOB test speedup 0.20176994259751202
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 44/50 |loss: 0.102391| train set 0.390x speedup, test set 0.511x speedup, val set 0.469x speedup, step: 45, train time 22.47 s
JOB test speedup 0.21107683225918344
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 45/50 |loss: 0.099325| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 46, train time 22.42 s
JOB test speedup 0.20907567777537592
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 46/50 |loss: 0.102161| train set 0.452x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 47, train time 22.46 s
JOB test speedup 0.19595548336133883
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 47/50 |loss: 0.098449| train set 0.454x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 48, train time 22.28 s
JOB test speedup 0.2170889984697929
TPCH test speedup 0.4995924748244091
TPCH skew test speedup 0.5088483738938367
Epoch 48/50 |loss: 0.099432| train set 0.391x speedup, test set 0.509x speedup, val set 0.473x speedup, step: 49, train time 22.38 s
JOB test speedup 0.21604098182594725
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 49/50 |loss: 0.102222| train set 0.390x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 50, train time 23.11 s
Training per epoch cost 22.401 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 2.199s, pg runtime 0.072s, speedup 0.033x
02, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
03, opt runtime 0.014s, model runtime 3.462s, pg runtime 0.014s, speedup 0.004x
04, opt runtime 0.348s, model runtime 2.639s, pg runtime 0.348s, speedup 0.132x
05, opt runtime 2.262s, model runtime 4.922s, pg runtime 3.549s, speedup 0.721x
06, opt runtime 0.756s, model runtime 4.265s, pg runtime 0.802s, speedup 0.188x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 2.324s, model runtime 19.337s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.959s, model runtime 13.067s, pg runtime 2.959s, speedup 0.226x
11, opt runtime 0.294s, model runtime 11.106s, pg runtime 2.352s, speedup 0.212x
12, opt runtime 0.463s, model runtime 12.952s, pg runtime 0.557s, speedup 0.043x
13, opt runtime 1.829s, model runtime 9.516s, pg runtime 53.885s, speedup 5.662x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 0.313s, model runtime 6.719s, pg runtime 0.313s, speedup 0.047x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.599s, model runtime 25.102s, pg runtime 2.599s, speedup 0.104x
19, opt runtime 1.923s, model runtime 29.556s, pg runtime 3.540s, speedup 0.120x
20, opt runtime 0.061s, model runtime 7.531s, pg runtime 0.086s, speedup 0.011x
21, opt runtime 0.626s, model runtime 12.350s, pg runtime 2.558s, speedup 0.207x
22, opt runtime 0.136s, model runtime 25.280s, pg runtime 0.891s, speedup 0.035x
23, opt runtime 0.389s, model runtime 8.892s, pg runtime 0.389s, speedup 0.044x
24, opt runtime 0.189s, model runtime 17.996s, pg runtime 0.189s, speedup 0.011x
25, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
26, opt runtime 0.020s, model runtime 1.552s, pg runtime 0.020s, speedup 0.013x
27, opt runtime 0.060s, model runtime 1.196s, pg runtime 0.112s, speedup 0.094x
28, opt runtime 0.154s, model runtime 11.740s, pg runtime 0.154s, speedup 0.013x
29, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
30, opt runtime 0.023s, model runtime 11.896s, pg runtime 0.023s, speedup 0.002x
31, opt runtime 0.965s, model runtime 9.814s, pg runtime 0.965s, speedup 0.098x
32, opt runtime 1.315s, model runtime 8.994s, pg runtime 1.315s, speedup 0.146x
33, opt runtime 0.250s, model runtime 7.361s, pg runtime 0.250s, speedup 0.034x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
04, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 21.143s, model runtime 66.875s, pg runtime 21.143s, speedup 0.316x
07, opt runtime 6.460s, model runtime 68.184s, pg runtime 16.134s, speedup 0.237x
08, opt runtime 6.284s, model runtime 81.870s, pg runtime 31.019s, speedup 0.379x
09, opt runtime 3.944s, model runtime 12.042s, pg runtime 3.944s, speedup 0.328x
10, opt runtime 3.603s, model runtime 12.640s, pg runtime 3.603s, speedup 0.285x
11, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
12, opt runtime 25.043s, model runtime 115.186s, pg runtime 73.019s, speedup 0.634x
13, opt runtime 2.995s, model runtime 57.356s, pg runtime 14.646s, speedup 0.255x
14, opt runtime 3.449s, model runtime 53.927s, pg runtime 14.824s, speedup 0.275x
15, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
16, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
17, opt runtime 7.469s, model runtime 153.196s, pg runtime 23.223s, speedup 0.152x
18, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
19, opt runtime 1.148s, model runtime 44.628s, pg runtime 1.214s, speedup 0.027x
20, opt runtime 1.353s, model runtime 45.705s, pg runtime 1.380s, speedup 0.030x
21, opt runtime 22.482s, model runtime 54.406s, pg runtime 22.482s, speedup 0.413x
22, opt runtime 6.519s, model runtime 91.130s, pg runtime 6.519s, speedup 0.072x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 5.961s, model runtime 92.708s, pg runtime 31.210s, speedup 0.337x
25, opt runtime 1.642s, model runtime 3.569s, pg runtime 1.752s, speedup 0.491x
26, opt runtime 1.404s, model runtime 3.441s, pg runtime 1.404s, speedup 0.408x
27, opt runtime 7.268s, model runtime 11.857s, pg runtime 7.268s, speedup 0.613x
28, opt runtime 6.854s, model runtime 12.460s, pg runtime 6.854s, speedup 0.550x
29, opt runtime 5.362s, model runtime 26.693s, pg runtime 5.362s, speedup 0.201x
30, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
31, opt runtime 24.079s, model runtime 663.875s, pg runtime 608.707s, speedup 0.917x
32, opt runtime 24.706s, model runtime 660.594s, pg runtime 610.808s, speedup 0.925x
33, opt runtime 38.718s, model runtime 85.791s, pg runtime 69.421s, speedup 0.809x
34, opt runtime 35.527s, model runtime 105.138s, pg runtime 71.730s, speedup 0.682x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.639s, model runtime 576.339s, pg runtime 462.544s, speedup 0.803x
37, opt runtime 11.120s, model runtime 278.146s, pg runtime 11.120s, speedup 0.040x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 0.912s, model runtime 26.810s, pg runtime 0.912s, speedup 0.034x
40, opt runtime 0.873s, model runtime 25.962s, pg runtime 0.873s, speedup 0.034x
========== TPCH skew
01, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
02, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
03, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 20.708s, model runtime 74.186s, pg runtime 20.708s, speedup 0.279x
06, opt runtime 11.965s, model runtime 62.207s, pg runtime 11.965s, speedup 0.192x
07, opt runtime 5.471s, model runtime 67.587s, pg runtime 13.410s, speedup 0.198x
08, opt runtime 6.497s, model runtime 69.526s, pg runtime 12.849s, speedup 0.185x
09, opt runtime 3.612s, model runtime 11.335s, pg runtime 3.612s, speedup 0.319x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 25.045s, model runtime 118.748s, pg runtime 64.291s, speedup 0.541x
12, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
13, opt runtime 3.004s, model runtime 65.305s, pg runtime 17.818s, speedup 0.273x
14, opt runtime 2.983s, model runtime 61.312s, pg runtime 11.844s, speedup 0.193x
15, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
16, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
17, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
18, opt runtime 7.915s, model runtime 150.640s, pg runtime 29.436s, speedup 0.195x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.316s, model runtime 32.538s, pg runtime 1.352s, speedup 0.042x
21, opt runtime 23.119s, model runtime 88.588s, pg runtime 23.119s, speedup 0.261x
22, opt runtime 22.332s, model runtime 70.102s, pg runtime 22.449s, speedup 0.320x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 3.331s, pg runtime 1.433s, speedup 0.430x
26, opt runtime 1.187s, model runtime 3.327s, pg runtime 1.187s, speedup 0.357x
27, opt runtime 6.749s, model runtime 12.585s, pg runtime 6.749s, speedup 0.536x
28, opt runtime 7.213s, model runtime 11.999s, pg runtime 7.213s, speedup 0.601x
29, opt runtime 5.223s, model runtime 26.755s, pg runtime 5.223s, speedup 0.195x
30, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
31, opt runtime 24.136s, model runtime 676.182s, pg runtime 609.432s, speedup 0.901x
32, opt runtime 24.451s, model runtime 664.233s, pg runtime 628.615s, speedup 0.946x
33, opt runtime 39.254s, model runtime 67.994s, pg runtime 58.921s, speedup 0.867x
34, opt runtime 41.237s, model runtime 113.893s, pg runtime 78.181s, speedup 0.686x
35, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
36, opt runtime 14.422s, model runtime 584.445s, pg runtime 497.542s, speedup 0.851x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 23.543s, model runtime 270.128s, pg runtime 23.543s, speedup 0.087x
39, opt runtime 0.876s, model runtime 25.437s, pg runtime 0.938s, speedup 0.037x
40, opt runtime 0.967s, model runtime 28.908s, pg runtime 0.967s, speedup 0.033x
====================
JOB best validation speedup epoch: 0, train speedup 0.481, test speedup 0.263, val speedup 0.503
TPCH best validation speedup epoch: 0, train speedup 0.481, test speedup 0.522, val speedup 0.503
TPCH Skew best validation speedup epoch: 0, train speedup 0.481, test speedup 0.529, val speedup 0.503
execution cost 0:19:46.814404
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.721025, and there are 34391 training samples
in channel 9
JOB test speedup 0.21746089627832063
TPCH test speedup 0.5123118520551984
TPCH skew test speedup 0.515040731456628
Epoch 0/50 |loss: 0.418163| train set 0.481x speedup, test set 0.515x speedup, val set 0.491x speedup, step: 1, train time 23.06 s
JOB test speedup 0.28493257504202846
TPCH test speedup 0.5104223126837455
TPCH skew test speedup 0.5126111000640647
Epoch 1/50 |loss: 0.302127| train set 0.474x speedup, test set 0.513x speedup, val set 0.487x speedup, step: 2, train time 21.70 s
JOB test speedup 0.2189104575159156
TPCH test speedup 0.5030215459820312
TPCH skew test speedup 0.5137295121851307
Epoch 2/50 |loss: 0.262419| train set 0.468x speedup, test set 0.514x speedup, val set 0.483x speedup, step: 3, train time 21.77 s
JOB test speedup 0.21346828493042988
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 3/50 |loss: 0.237119| train set 0.458x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 4, train time 21.70 s
JOB test speedup 0.21761823574295008
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 4/50 |loss: 0.217465| train set 0.460x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 5, train time 21.59 s
JOB test speedup 0.2146223209799316
TPCH test speedup 0.5012551949496192
TPCH skew test speedup 0.510871305252499
Epoch 5/50 |loss: 0.206653| train set 0.463x speedup, test set 0.511x speedup, val set 0.473x speedup, step: 6, train time 21.67 s
JOB test speedup 0.22434766627811348
TPCH test speedup 0.4972470477428705
TPCH skew test speedup 0.5111128432943234
Epoch 6/50 |loss: 0.194078| train set 0.461x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 7, train time 21.80 s
JOB test speedup 0.22441390317920304
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 7/50 |loss: 0.186839| train set 0.455x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 8, train time 21.88 s
JOB test speedup 0.23754407157456317
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 8/50 |loss: 0.177068| train set 0.455x speedup, test set 0.504x speedup, val set 0.471x speedup, step: 9, train time 21.74 s
JOB test speedup 0.22557216817810566
TPCH test speedup 0.47612105587332615
TPCH skew test speedup 0.44528775493789347
Epoch 9/50 |loss: 0.169559| train set 0.459x speedup, test set 0.445x speedup, val set 0.468x speedup, step: 10, train time 22.08 s
JOB test speedup 0.23630465072390588
TPCH test speedup 0.4996253383425397
TPCH skew test speedup 0.5089160253621051
Epoch 10/50 |loss: 0.168122| train set 0.464x speedup, test set 0.509x speedup, val set 0.472x speedup, step: 11, train time 21.87 s
JOB test speedup 0.23011938490926973
TPCH test speedup 0.5001543423738246
TPCH skew test speedup 0.5123434853579222
Epoch 11/50 |loss: 0.165394| train set 0.462x speedup, test set 0.512x speedup, val set 0.474x speedup, step: 12, train time 21.83 s
JOB test speedup 0.2276641718710251
TPCH test speedup 0.498393011558247
TPCH skew test speedup 0.511549728509743
Epoch 12/50 |loss: 0.154831| train set 0.459x speedup, test set 0.512x speedup, val set 0.474x speedup, step: 13, train time 21.98 s
JOB test speedup 0.22701849619250797
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 13/50 |loss: 0.152389| train set 0.452x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 14, train time 21.91 s
JOB test speedup 0.22442350590473167
TPCH test speedup 0.4956107688572643
TPCH skew test speedup 0.5090880024055386
Epoch 14/50 |loss: 0.147837| train set 0.454x speedup, test set 0.509x speedup, val set 0.471x speedup, step: 15, train time 22.11 s
JOB test speedup 0.2190323073539269
TPCH test speedup 0.4951236014766133
TPCH skew test speedup 0.5058973679668491
Epoch 15/50 |loss: 0.145079| train set 0.457x speedup, test set 0.506x speedup, val set 0.472x speedup, step: 16, train time 22.21 s
JOB test speedup 0.22336251506469182
TPCH test speedup 0.5023856344348532
TPCH skew test speedup 0.4477645563971723
Epoch 16/50 |loss: 0.145317| train set 0.462x speedup, test set 0.448x speedup, val set 0.482x speedup, step: 17, train time 22.23 s
JOB test speedup 0.2344207274086971
TPCH test speedup 0.4996253383425397
TPCH skew test speedup 0.5089160253621051
Epoch 17/50 |loss: 0.140935| train set 0.457x speedup, test set 0.509x speedup, val set 0.473x speedup, step: 18, train time 22.25 s
JOB test speedup 0.24813953821043777
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 18/50 |loss: 0.138153| train set 0.452x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 19, train time 22.27 s
JOB test speedup 0.2346144390454829
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 19/50 |loss: 0.137947| train set 0.452x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 20, train time 22.34 s
JOB test speedup 0.24168295776545196
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 20/50 |loss: 0.129913| train set 0.458x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 21, train time 22.97 s
JOB test speedup 0.22894015141940732
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 21/50 |loss: 0.131284| train set 0.391x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 22, train time 22.51 s
JOB test speedup 0.22406709746653714
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 22/50 |loss: 0.130376| train set 0.459x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 23, train time 22.51 s
JOB test speedup 0.24220876745680245
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 23/50 |loss: 0.125757| train set 0.456x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 24, train time 22.50 s
JOB test speedup 0.2185228927481514
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 24/50 |loss: 0.125617| train set 0.457x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 25, train time 22.49 s
JOB test speedup 0.23943731349201475
TPCH test speedup 0.4766313422848723
TPCH skew test speedup 0.44796195134849837
Epoch 25/50 |loss: 0.123648| train set 0.456x speedup, test set 0.448x speedup, val set 0.468x speedup, step: 26, train time 22.51 s
JOB test speedup 0.23326489246776758
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 26/50 |loss: 0.122358| train set 0.453x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 27, train time 22.47 s
JOB test speedup 0.22602064192267238
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 27/50 |loss: 0.119947| train set 0.454x speedup, test set 0.508x speedup, val set 0.468x speedup, step: 28, train time 22.48 s
JOB test speedup 0.2312732309070251
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 28/50 |loss: 0.118266| train set 0.392x speedup, test set 0.448x speedup, val set 0.466x speedup, step: 29, train time 22.31 s
JOB test speedup 0.21810164201739188
TPCH test speedup 0.4956107688572643
TPCH skew test speedup 0.5090880024055386
Epoch 29/50 |loss: 0.119218| train set 0.391x speedup, test set 0.509x speedup, val set 0.471x speedup, step: 30, train time 22.50 s
JOB test speedup 0.22602064192267238
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 30/50 |loss: 0.115772| train set 0.394x speedup, test set 0.511x speedup, val set 0.469x speedup, step: 31, train time 22.46 s
JOB test speedup 0.22395311203302926
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 31/50 |loss: 0.116738| train set 0.458x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 32, train time 22.36 s
JOB test speedup 0.23462638065109517
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 32/50 |loss: 0.112139| train set 0.452x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 33, train time 22.41 s
JOB test speedup 0.22885946326038195
TPCH test speedup 0.48077123996015775
TPCH skew test speedup 0.4503746598856163
Epoch 33/50 |loss: 0.110169| train set 0.459x speedup, test set 0.450x speedup, val set 0.472x speedup, step: 34, train time 22.46 s
JOB test speedup 0.22303694987288292
TPCH test speedup 0.49780161662342953
TPCH skew test speedup 0.44527604069458615
Epoch 34/50 |loss: 0.111782| train set 0.391x speedup, test set 0.445x speedup, val set 0.469x speedup, step: 35, train time 22.57 s
JOB test speedup 0.2246716157440457
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 35/50 |loss: 0.107625| train set 0.453x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 36, train time 22.48 s
JOB test speedup 0.2274195849286316
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 36/50 |loss: 0.109357| train set 0.457x speedup, test set 0.511x speedup, val set 0.472x speedup, step: 37, train time 22.50 s
JOB test speedup 0.23599177300232882
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 37/50 |loss: 0.109659| train set 0.393x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 38, train time 22.60 s
JOB test speedup 0.2273523569566057
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 38/50 |loss: 0.109056| train set 0.390x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 39, train time 22.51 s
JOB test speedup 0.23083834154211355
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 39/50 |loss: 0.106612| train set 0.389x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 40, train time 22.61 s
JOB test speedup 0.22543716054278656
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 40/50 |loss: 0.105277| train set 0.454x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 41, train time 22.41 s
JOB test speedup 0.2371553529579026
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 41/50 |loss: 0.104041| train set 0.391x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 42, train time 22.61 s
JOB test speedup 0.22369252625800362
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 42/50 |loss: 0.103839| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 43, train time 22.61 s
JOB test speedup 0.2215725266508493
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 43/50 |loss: 0.103604| train set 0.390x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 44, train time 22.57 s
JOB test speedup 0.22550582519354256
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5077400445831092
Epoch 44/50 |loss: 0.103624| train set 0.391x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 45, train time 22.65 s
JOB test speedup 0.22098381851743573
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 45/50 |loss: 0.100587| train set 0.451x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 46, train time 22.51 s
JOB test speedup 0.23023199406167022
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 46/50 |loss: 0.102727| train set 0.454x speedup, test set 0.504x speedup, val set 0.472x speedup, step: 47, train time 22.65 s
JOB test speedup 0.20952281739296774
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 47/50 |loss: 0.100598| train set 0.455x speedup, test set 0.511x speedup, val set 0.473x speedup, step: 48, train time 22.46 s
JOB test speedup 0.22369669551413182
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 48/50 |loss: 0.100118| train set 0.391x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 49, train time 22.56 s
JOB test speedup 0.21503806244835771
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 49/50 |loss: 0.102497| train set 0.389x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 50, train time 22.87 s
Training per epoch cost 22.322 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 1.770s, pg runtime 0.072s, speedup 0.041x
02, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
03, opt runtime 0.014s, model runtime 3.462s, pg runtime 0.014s, speedup 0.004x
04, opt runtime 0.348s, model runtime 2.639s, pg runtime 0.348s, speedup 0.132x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 14.065s, pg runtime 0.802s, speedup 0.057x
07, opt runtime 0.919s, model runtime 12.945s, pg runtime 0.942s, speedup 0.073x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 2.324s, model runtime 19.354s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.959s, model runtime 34.126s, pg runtime 2.959s, speedup 0.087x
11, opt runtime 0.294s, model runtime 11.106s, pg runtime 2.352s, speedup 0.212x
12, opt runtime 0.463s, model runtime 12.952s, pg runtime 0.557s, speedup 0.043x
13, opt runtime 1.829s, model runtime 7.190s, pg runtime 53.885s, speedup 7.495x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 0.313s, model runtime 6.719s, pg runtime 0.313s, speedup 0.047x
16, opt runtime 0.441s, model runtime 2.685s, pg runtime 0.453s, speedup 0.169x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.599s, model runtime 25.102s, pg runtime 2.599s, speedup 0.104x
19, opt runtime 1.923s, model runtime 29.556s, pg runtime 3.540s, speedup 0.120x
20, opt runtime 0.061s, model runtime 7.531s, pg runtime 0.086s, speedup 0.011x
21, opt runtime 0.626s, model runtime 12.950s, pg runtime 2.558s, speedup 0.198x
22, opt runtime 0.136s, model runtime 25.280s, pg runtime 0.891s, speedup 0.035x
23, opt runtime 0.389s, model runtime 8.892s, pg runtime 0.389s, speedup 0.044x
24, opt runtime 0.189s, model runtime 17.996s, pg runtime 0.189s, speedup 0.011x
25, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
26, opt runtime 0.020s, model runtime 1.552s, pg runtime 0.020s, speedup 0.013x
27, opt runtime 0.060s, model runtime 1.196s, pg runtime 0.112s, speedup 0.094x
28, opt runtime 0.154s, model runtime 11.740s, pg runtime 0.154s, speedup 0.013x
29, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
30, opt runtime 0.023s, model runtime 11.896s, pg runtime 0.023s, speedup 0.002x
31, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
32, opt runtime 1.315s, model runtime 8.994s, pg runtime 1.315s, speedup 0.146x
33, opt runtime 0.250s, model runtime 5.880s, pg runtime 0.250s, speedup 0.043x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
04, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
05, opt runtime 23.961s, model runtime 49.702s, pg runtime 32.278s, speedup 0.649x
06, opt runtime 21.143s, model runtime 55.527s, pg runtime 21.143s, speedup 0.381x
07, opt runtime 6.460s, model runtime 68.184s, pg runtime 16.134s, speedup 0.237x
08, opt runtime 6.284s, model runtime 81.870s, pg runtime 31.019s, speedup 0.379x
09, opt runtime 3.944s, model runtime 12.042s, pg runtime 3.944s, speedup 0.328x
10, opt runtime 3.603s, model runtime 12.640s, pg runtime 3.603s, speedup 0.285x
11, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
12, opt runtime 25.043s, model runtime 115.186s, pg runtime 73.019s, speedup 0.634x
13, opt runtime 2.995s, model runtime 96.797s, pg runtime 14.646s, speedup 0.151x
14, opt runtime 3.449s, model runtime 104.561s, pg runtime 14.824s, speedup 0.142x
15, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
16, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
17, opt runtime 7.469s, model runtime 153.196s, pg runtime 23.223s, speedup 0.152x
18, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
19, opt runtime 1.148s, model runtime 44.628s, pg runtime 1.214s, speedup 0.027x
20, opt runtime 1.353s, model runtime 45.705s, pg runtime 1.380s, speedup 0.030x
21, opt runtime 22.482s, model runtime 54.406s, pg runtime 22.482s, speedup 0.413x
22, opt runtime 6.519s, model runtime 91.130s, pg runtime 6.519s, speedup 0.072x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 5.961s, model runtime 92.708s, pg runtime 31.210s, speedup 0.337x
25, opt runtime 1.642s, model runtime 3.569s, pg runtime 1.752s, speedup 0.491x
26, opt runtime 1.404s, model runtime 3.441s, pg runtime 1.404s, speedup 0.408x
27, opt runtime 7.268s, model runtime 11.857s, pg runtime 7.268s, speedup 0.613x
28, opt runtime 6.854s, model runtime 12.460s, pg runtime 6.854s, speedup 0.550x
29, opt runtime 5.362s, model runtime 26.693s, pg runtime 5.362s, speedup 0.201x
30, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
31, opt runtime 24.079s, model runtime 663.875s, pg runtime 608.707s, speedup 0.917x
32, opt runtime 24.706s, model runtime 660.594s, pg runtime 610.808s, speedup 0.925x
33, opt runtime 38.718s, model runtime 104.379s, pg runtime 69.421s, speedup 0.665x
34, opt runtime 35.527s, model runtime 140.312s, pg runtime 71.730s, speedup 0.511x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.639s, model runtime 576.339s, pg runtime 462.544s, speedup 0.803x
37, opt runtime 11.120s, model runtime 278.146s, pg runtime 11.120s, speedup 0.040x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 0.912s, model runtime 26.810s, pg runtime 0.912s, speedup 0.034x
40, opt runtime 0.873s, model runtime 25.962s, pg runtime 0.873s, speedup 0.034x
========== TPCH skew
01, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
02, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
03, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 20.708s, model runtime 68.822s, pg runtime 20.708s, speedup 0.301x
06, opt runtime 11.965s, model runtime 75.033s, pg runtime 11.965s, speedup 0.159x
07, opt runtime 5.471s, model runtime 67.587s, pg runtime 13.410s, speedup 0.198x
08, opt runtime 6.497s, model runtime 69.526s, pg runtime 12.849s, speedup 0.185x
09, opt runtime 3.612s, model runtime 11.335s, pg runtime 3.612s, speedup 0.319x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 25.045s, model runtime 118.748s, pg runtime 64.291s, speedup 0.541x
12, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
15, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
16, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
17, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
18, opt runtime 7.915s, model runtime 150.640s, pg runtime 29.436s, speedup 0.195x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.316s, model runtime 32.538s, pg runtime 1.352s, speedup 0.042x
21, opt runtime 23.119s, model runtime 88.588s, pg runtime 23.119s, speedup 0.261x
22, opt runtime 22.332s, model runtime 70.102s, pg runtime 22.449s, speedup 0.320x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 3.331s, pg runtime 1.433s, speedup 0.430x
26, opt runtime 1.187s, model runtime 3.327s, pg runtime 1.187s, speedup 0.357x
27, opt runtime 6.749s, model runtime 12.585s, pg runtime 6.749s, speedup 0.536x
28, opt runtime 7.213s, model runtime 11.999s, pg runtime 7.213s, speedup 0.601x
29, opt runtime 5.223s, model runtime 26.755s, pg runtime 5.223s, speedup 0.195x
30, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
31, opt runtime 24.136s, model runtime 676.182s, pg runtime 609.432s, speedup 0.901x
32, opt runtime 24.451s, model runtime 664.233s, pg runtime 628.615s, speedup 0.946x
33, opt runtime 39.254s, model runtime 119.051s, pg runtime 58.921s, speedup 0.495x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
36, opt runtime 14.422s, model runtime 584.445s, pg runtime 497.542s, speedup 0.851x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 23.543s, model runtime 270.128s, pg runtime 23.543s, speedup 0.087x
39, opt runtime 0.876s, model runtime 25.437s, pg runtime 0.938s, speedup 0.037x
40, opt runtime 0.967s, model runtime 28.908s, pg runtime 0.967s, speedup 0.033x
====================
JOB best validation speedup epoch: 0, train speedup 0.481, test speedup 0.217, val speedup 0.491
TPCH best validation speedup epoch: 0, train speedup 0.481, test speedup 0.512, val speedup 0.491
TPCH Skew best validation speedup epoch: 0, train speedup 0.481, test speedup 0.515, val speedup 0.491
execution cost 0:19:42.807682
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.787994, and there are 34391 training samples
in channel 9
JOB test speedup 0.22475084171951457
TPCH test speedup 0.5105491395869332
TPCH skew test speedup 0.5158777426763148
Epoch 0/50 |loss: 0.417666| train set 0.475x speedup, test set 0.516x speedup, val set 0.491x speedup, step: 1, train time 23.02 s
JOB test speedup 0.2194891434660091
TPCH test speedup 0.5006274017365617
TPCH skew test speedup 0.5140168476447409
Epoch 1/50 |loss: 0.302294| train set 0.471x speedup, test set 0.514x speedup, val set 0.483x speedup, step: 2, train time 21.90 s
JOB test speedup 0.22802058870896566
TPCH test speedup 0.5060649021923554
TPCH skew test speedup 0.5166651067412428
Epoch 2/50 |loss: 0.264683| train set 0.467x speedup, test set 0.517x speedup, val set 0.485x speedup, step: 3, train time 21.55 s
JOB test speedup 0.21932638522867637
TPCH test speedup 0.4972470477428705
TPCH skew test speedup 0.509005549804057
Epoch 3/50 |loss: 0.238552| train set 0.458x speedup, test set 0.509x speedup, val set 0.472x speedup, step: 4, train time 21.74 s
JOB test speedup 0.2143628722030385
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 4/50 |loss: 0.221313| train set 0.461x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 5, train time 21.65 s
JOB test speedup 0.2387493376470069
TPCH test speedup 0.5012551949496192
TPCH skew test speedup 0.510871305252499
Epoch 5/50 |loss: 0.206547| train set 0.463x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 6, train time 21.75 s
JOB test speedup 0.22740570513059796
TPCH test speedup 0.4972470477428705
TPCH skew test speedup 0.5111128432943234
Epoch 6/50 |loss: 0.195325| train set 0.463x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 7, train time 21.61 s
JOB test speedup 0.219041562271338
TPCH test speedup 0.5018209547026421
TPCH skew test speedup 0.5153835478954082
Epoch 7/50 |loss: 0.188842| train set 0.460x speedup, test set 0.515x speedup, val set 0.478x speedup, step: 8, train time 21.76 s
JOB test speedup 0.2344389543689638
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 8/50 |loss: 0.177610| train set 0.456x speedup, test set 0.504x speedup, val set 0.469x speedup, step: 9, train time 21.85 s
JOB test speedup 0.22634748175366923
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 9/50 |loss: 0.172595| train set 0.461x speedup, test set 0.448x speedup, val set 0.466x speedup, step: 10, train time 21.75 s
JOB test speedup 0.23767116774720706
TPCH test speedup 0.5060606972659583
TPCH skew test speedup 0.5158424194624914
Epoch 10/50 |loss: 0.168689| train set 0.468x speedup, test set 0.516x speedup, val set 0.483x speedup, step: 11, train time 21.81 s
JOB test speedup 0.22241798492834766
TPCH test speedup 0.4996253383425397
TPCH skew test speedup 0.5089160253621051
Epoch 11/50 |loss: 0.163803| train set 0.461x speedup, test set 0.509x speedup, val set 0.475x speedup, step: 12, train time 21.88 s
JOB test speedup 0.22428876069544326
TPCH test speedup 0.5029096565170746
TPCH skew test speedup 0.5156386051536777
Epoch 12/50 |loss: 0.154651| train set 0.456x speedup, test set 0.516x speedup, val set 0.470x speedup, step: 13, train time 21.84 s
JOB test speedup 0.23266181655229123
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 13/50 |loss: 0.151878| train set 0.453x speedup, test set 0.505x speedup, val set 0.467x speedup, step: 14, train time 21.94 s
JOB test speedup 0.2194777573967664
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 14/50 |loss: 0.149941| train set 0.454x speedup, test set 0.505x speedup, val set 0.467x speedup, step: 15, train time 21.86 s
JOB test speedup 0.2154984471215926
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 15/50 |loss: 0.144895| train set 0.456x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 16, train time 21.64 s
JOB test speedup 0.2149406102726548
TPCH test speedup 0.5023856344348532
TPCH skew test speedup 0.4477645563971723
Epoch 16/50 |loss: 0.143568| train set 0.463x speedup, test set 0.448x speedup, val set 0.481x speedup, step: 17, train time 21.78 s
JOB test speedup 0.24015980353463845
TPCH test speedup 0.4951236014766133
TPCH skew test speedup 0.5057706348957897
Epoch 17/50 |loss: 0.138996| train set 0.456x speedup, test set 0.506x speedup, val set 0.472x speedup, step: 18, train time 21.87 s
JOB test speedup 0.23289619564288355
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 18/50 |loss: 0.138256| train set 0.452x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 19, train time 22.00 s
JOB test speedup 0.22800367187199652
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 19/50 |loss: 0.135465| train set 0.452x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 20, train time 21.97 s
JOB test speedup 0.23437076135321644
TPCH test speedup 0.4951236014766133
TPCH skew test speedup 0.5057706348957897
Epoch 20/50 |loss: 0.130006| train set 0.455x speedup, test set 0.506x speedup, val set 0.471x speedup, step: 21, train time 22.57 s
JOB test speedup 0.2247214987198234
TPCH test speedup 0.5019424696912874
TPCH skew test speedup 0.5160191104215534
Epoch 21/50 |loss: 0.129843| train set 0.391x speedup, test set 0.516x speedup, val set 0.479x speedup, step: 22, train time 22.11 s
JOB test speedup 0.21468124924153303
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 22/50 |loss: 0.129343| train set 0.457x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 23, train time 22.27 s
JOB test speedup 0.21589163007885653
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 23/50 |loss: 0.124977| train set 0.457x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 24, train time 22.15 s
JOB test speedup 0.2230106112632671
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 24/50 |loss: 0.124759| train set 0.460x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 25, train time 22.04 s
JOB test speedup 0.2261744762416968
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 25/50 |loss: 0.126369| train set 0.458x speedup, test set 0.448x speedup, val set 0.468x speedup, step: 26, train time 22.30 s
JOB test speedup 0.22529742040335834
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 26/50 |loss: 0.125507| train set 0.452x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 27, train time 22.21 s
JOB test speedup 0.22135949119252574
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 27/50 |loss: 0.119244| train set 0.454x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 28, train time 22.12 s
JOB test speedup 0.22548468412685246
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 28/50 |loss: 0.118668| train set 0.392x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 29, train time 22.31 s
JOB test speedup 0.21304991137511506
TPCH test speedup 0.4956431106074915
TPCH skew test speedup 0.5092841530026005
Epoch 29/50 |loss: 0.120613| train set 0.453x speedup, test set 0.509x speedup, val set 0.472x speedup, step: 30, train time 22.21 s
JOB test speedup 0.22514468680754107
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 30/50 |loss: 0.116624| train set 0.457x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 31, train time 22.37 s
JOB test speedup 0.2130161983931191
TPCH test speedup 0.5110284772410049
TPCH skew test speedup 0.5184280629884743
Epoch 31/50 |loss: 0.117823| train set 0.456x speedup, test set 0.518x speedup, val set 0.473x speedup, step: 32, train time 22.17 s
JOB test speedup 0.21946274407990643
TPCH test speedup 0.49418235004745853
TPCH skew test speedup 0.5081905002087279
Epoch 32/50 |loss: 0.112754| train set 0.451x speedup, test set 0.508x speedup, val set 0.468x speedup, step: 33, train time 22.34 s
JOB test speedup 0.22105883969082823
TPCH test speedup 0.5079713531700174
TPCH skew test speedup 0.520249875713606
Epoch 33/50 |loss: 0.110368| train set 0.466x speedup, test set 0.520x speedup, val set 0.482x speedup, step: 34, train time 22.50 s
JOB test speedup 0.1979691638913381
TPCH test speedup 0.4936658970058442
TPCH skew test speedup 0.5048181971736246
Epoch 34/50 |loss: 0.113255| train set 0.454x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 35, train time 22.37 s
JOB test speedup 0.21618823532022638
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 35/50 |loss: 0.110429| train set 0.454x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 36, train time 22.50 s
JOB test speedup 0.20948084602963943
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 36/50 |loss: 0.109128| train set 0.457x speedup, test set 0.511x speedup, val set 0.473x speedup, step: 37, train time 22.11 s
JOB test speedup 0.21113064494350017
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 37/50 |loss: 0.110824| train set 0.392x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 38, train time 22.41 s
JOB test speedup 0.19916210303943044
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 38/50 |loss: 0.112103| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 39, train time 22.51 s
JOB test speedup 0.22313070284525494
TPCH test speedup 0.5065696361140172
TPCH skew test speedup 0.519293675666622
Epoch 39/50 |loss: 0.109282| train set 0.455x speedup, test set 0.519x speedup, val set 0.480x speedup, step: 40, train time 22.42 s
JOB test speedup 0.21787295834062675
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 40/50 |loss: 0.106447| train set 0.451x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 41, train time 22.46 s
JOB test speedup 0.22565261989538654
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 41/50 |loss: 0.106918| train set 0.392x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 42, train time 22.50 s
JOB test speedup 0.2233423307422581
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 42/50 |loss: 0.105071| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 43, train time 22.67 s
JOB test speedup 0.2148163837746069
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 43/50 |loss: 0.105356| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 44, train time 22.55 s
JOB test speedup 0.2132904052228656
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 44/50 |loss: 0.105470| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 45, train time 22.53 s
JOB test speedup 0.21054132373326623
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 45/50 |loss: 0.101472| train set 0.452x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 46, train time 22.41 s
JOB test speedup 0.21652557841215642
TPCH test speedup 0.5019424696912874
TPCH skew test speedup 0.5160191104215534
Epoch 46/50 |loss: 0.103504| train set 0.391x speedup, test set 0.516x speedup, val set 0.478x speedup, step: 47, train time 22.51 s
JOB test speedup 0.22057366145867888
TPCH test speedup 0.5110284772410049
TPCH skew test speedup 0.5184280629884743
Epoch 47/50 |loss: 0.102303| train set 0.456x speedup, test set 0.518x speedup, val set 0.470x speedup, step: 48, train time 22.31 s
JOB test speedup 0.2046658750040177
TPCH test speedup 0.4950913274867633
TPCH skew test speedup 0.5057038170374734
Epoch 48/50 |loss: 0.101862| train set 0.452x speedup, test set 0.506x speedup, val set 0.471x speedup, step: 49, train time 22.37 s
JOB test speedup 0.2081571454190692
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 49/50 |loss: 0.102136| train set 0.389x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 50, train time 22.90 s
Training per epoch cost 22.168 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 1.770s, pg runtime 0.072s, speedup 0.041x
02, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
03, opt runtime 0.014s, model runtime 3.462s, pg runtime 0.014s, speedup 0.004x
04, opt runtime 0.348s, model runtime 2.639s, pg runtime 0.348s, speedup 0.132x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 14.065s, pg runtime 0.802s, speedup 0.057x
07, opt runtime 0.919s, model runtime 12.945s, pg runtime 0.942s, speedup 0.073x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
10, opt runtime 2.959s, model runtime 13.067s, pg runtime 2.959s, speedup 0.226x
11, opt runtime 0.294s, model runtime 11.106s, pg runtime 2.352s, speedup 0.212x
12, opt runtime 0.463s, model runtime 12.952s, pg runtime 0.557s, speedup 0.043x
13, opt runtime 1.829s, model runtime 9.516s, pg runtime 53.885s, speedup 5.662x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 0.313s, model runtime 6.719s, pg runtime 0.313s, speedup 0.047x
16, opt runtime 0.441s, model runtime 3.268s, pg runtime 0.453s, speedup 0.139x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.599s, model runtime 25.102s, pg runtime 2.599s, speedup 0.104x
19, opt runtime 1.923s, model runtime 29.556s, pg runtime 3.540s, speedup 0.120x
20, opt runtime 0.061s, model runtime 0.251s, pg runtime 0.086s, speedup 0.342x
21, opt runtime 0.626s, model runtime 11.639s, pg runtime 2.558s, speedup 0.220x
22, opt runtime 0.136s, model runtime 25.280s, pg runtime 0.891s, speedup 0.035x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 0.189s, model runtime 17.996s, pg runtime 0.189s, speedup 0.011x
25, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
26, opt runtime 0.020s, model runtime 1.552s, pg runtime 0.020s, speedup 0.013x
27, opt runtime 0.060s, model runtime 0.899s, pg runtime 0.112s, speedup 0.125x
28, opt runtime 0.154s, model runtime 11.740s, pg runtime 0.154s, speedup 0.013x
29, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
30, opt runtime 0.023s, model runtime 11.896s, pg runtime 0.023s, speedup 0.002x
31, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
32, opt runtime 1.315s, model runtime 8.994s, pg runtime 1.315s, speedup 0.146x
33, opt runtime 0.250s, model runtime 7.361s, pg runtime 0.250s, speedup 0.034x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
04, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 21.143s, model runtime 66.875s, pg runtime 21.143s, speedup 0.316x
07, opt runtime 6.460s, model runtime 68.184s, pg runtime 16.134s, speedup 0.237x
08, opt runtime 6.284s, model runtime 81.870s, pg runtime 31.019s, speedup 0.379x
09, opt runtime 3.944s, model runtime 12.042s, pg runtime 3.944s, speedup 0.328x
10, opt runtime 3.603s, model runtime 12.640s, pg runtime 3.603s, speedup 0.285x
11, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
12, opt runtime 25.043s, model runtime 115.186s, pg runtime 73.019s, speedup 0.634x
13, opt runtime 2.995s, model runtime 96.797s, pg runtime 14.646s, speedup 0.151x
14, opt runtime 3.449s, model runtime 104.561s, pg runtime 14.824s, speedup 0.142x
15, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
16, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
17, opt runtime 7.469s, model runtime 153.196s, pg runtime 23.223s, speedup 0.152x
18, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
19, opt runtime 1.148s, model runtime 44.628s, pg runtime 1.214s, speedup 0.027x
20, opt runtime 1.353s, model runtime 45.705s, pg runtime 1.380s, speedup 0.030x
21, opt runtime 22.482s, model runtime 54.406s, pg runtime 22.482s, speedup 0.413x
22, opt runtime 6.519s, model runtime 91.130s, pg runtime 6.519s, speedup 0.072x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 5.961s, model runtime 92.708s, pg runtime 31.210s, speedup 0.337x
25, opt runtime 1.642s, model runtime 3.569s, pg runtime 1.752s, speedup 0.491x
26, opt runtime 1.404s, model runtime 3.441s, pg runtime 1.404s, speedup 0.408x
27, opt runtime 7.268s, model runtime 10.668s, pg runtime 7.268s, speedup 0.681x
28, opt runtime 6.854s, model runtime 10.444s, pg runtime 6.854s, speedup 0.656x
29, opt runtime 5.362s, model runtime 26.693s, pg runtime 5.362s, speedup 0.201x
30, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
31, opt runtime 24.079s, model runtime 663.875s, pg runtime 608.707s, speedup 0.917x
32, opt runtime 24.706s, model runtime 660.594s, pg runtime 610.808s, speedup 0.925x
33, opt runtime 38.718s, model runtime 104.379s, pg runtime 69.421s, speedup 0.665x
34, opt runtime 35.527s, model runtime 140.312s, pg runtime 71.730s, speedup 0.511x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.639s, model runtime 576.339s, pg runtime 462.544s, speedup 0.803x
37, opt runtime 11.120s, model runtime 278.146s, pg runtime 11.120s, speedup 0.040x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 0.912s, model runtime 26.810s, pg runtime 0.912s, speedup 0.034x
40, opt runtime 0.873s, model runtime 25.962s, pg runtime 0.873s, speedup 0.034x
========== TPCH skew
01, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
02, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
03, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 20.708s, model runtime 74.186s, pg runtime 20.708s, speedup 0.279x
06, opt runtime 11.965s, model runtime 62.207s, pg runtime 11.965s, speedup 0.192x
07, opt runtime 5.471s, model runtime 67.587s, pg runtime 13.410s, speedup 0.198x
08, opt runtime 6.497s, model runtime 69.526s, pg runtime 12.849s, speedup 0.185x
09, opt runtime 3.612s, model runtime 11.335s, pg runtime 3.612s, speedup 0.319x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 25.045s, model runtime 118.748s, pg runtime 64.291s, speedup 0.541x
12, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
15, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
16, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
17, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
18, opt runtime 7.915s, model runtime 150.640s, pg runtime 29.436s, speedup 0.195x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.316s, model runtime 32.538s, pg runtime 1.352s, speedup 0.042x
21, opt runtime 23.119s, model runtime 88.588s, pg runtime 23.119s, speedup 0.261x
22, opt runtime 22.332s, model runtime 70.102s, pg runtime 22.449s, speedup 0.320x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 3.331s, pg runtime 1.433s, speedup 0.430x
26, opt runtime 1.187s, model runtime 3.327s, pg runtime 1.187s, speedup 0.357x
27, opt runtime 6.749s, model runtime 10.149s, pg runtime 6.749s, speedup 0.665x
28, opt runtime 7.213s, model runtime 11.120s, pg runtime 7.213s, speedup 0.649x
29, opt runtime 5.223s, model runtime 26.755s, pg runtime 5.223s, speedup 0.195x
30, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
31, opt runtime 24.136s, model runtime 676.182s, pg runtime 609.432s, speedup 0.901x
32, opt runtime 24.451s, model runtime 664.233s, pg runtime 628.615s, speedup 0.946x
33, opt runtime 39.254s, model runtime 119.051s, pg runtime 58.921s, speedup 0.495x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
36, opt runtime 14.422s, model runtime 584.445s, pg runtime 497.542s, speedup 0.851x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 23.543s, model runtime 270.128s, pg runtime 23.543s, speedup 0.087x
39, opt runtime 0.876s, model runtime 25.437s, pg runtime 0.938s, speedup 0.037x
40, opt runtime 0.967s, model runtime 28.908s, pg runtime 0.967s, speedup 0.033x
====================
JOB best validation speedup epoch: 0, train speedup 0.475, test speedup 0.225, val speedup 0.491
TPCH best validation speedup epoch: 0, train speedup 0.475, test speedup 0.511, val speedup 0.491
TPCH Skew best validation speedup epoch: 0, train speedup 0.475, test speedup 0.516, val speedup 0.491
execution cost 0:19:35.663730
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.701183, and there are 34391 training samples
in channel 9
JOB test speedup 0.2128460744792029
TPCH test speedup 0.5160814621001782
TPCH skew test speedup 0.522724429834143
Epoch 0/50 |loss: 0.417673| train set 0.484x speedup, test set 0.523x speedup, val set 0.493x speedup, step: 1, train time 23.16 s
JOB test speedup 0.21721743080676445
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 1/50 |loss: 0.303142| train set 0.465x speedup, test set 0.505x speedup, val set 0.472x speedup, step: 2, train time 21.70 s
JOB test speedup 0.21792431876220433
TPCH test speedup 0.4950913274867633
TPCH skew test speedup 0.5057038170374734
Epoch 2/50 |loss: 0.262024| train set 0.459x speedup, test set 0.506x speedup, val set 0.471x speedup, step: 3, train time 21.85 s
JOB test speedup 0.2152250632611247
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 3/50 |loss: 0.239049| train set 0.458x speedup, test set 0.505x speedup, val set 0.471x speedup, step: 4, train time 21.73 s
JOB test speedup 0.21255391991373093
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 4/50 |loss: 0.219989| train set 0.459x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 5, train time 21.76 s
JOB test speedup 0.21379319936448857
TPCH test speedup 0.5012551949496192
TPCH skew test speedup 0.510871305252499
Epoch 5/50 |loss: 0.204824| train set 0.462x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 6, train time 21.77 s
JOB test speedup 0.2221125531946393
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 6/50 |loss: 0.195359| train set 0.459x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 7, train time 21.64 s
JOB test speedup 0.2197721182708766
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 7/50 |loss: 0.184934| train set 0.460x speedup, test set 0.508x speedup, val set 0.474x speedup, step: 8, train time 21.76 s
JOB test speedup 0.2293509963668306
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 8/50 |loss: 0.175168| train set 0.459x speedup, test set 0.504x speedup, val set 0.471x speedup, step: 9, train time 21.87 s
JOB test speedup 0.21130953875832273
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 9/50 |loss: 0.168973| train set 0.459x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 10, train time 22.15 s
JOB test speedup 0.2501636388748959
TPCH test speedup 0.5074256931215738
TPCH skew test speedup 0.5167161804378332
Epoch 10/50 |loss: 0.166230| train set 0.472x speedup, test set 0.517x speedup, val set 0.485x speedup, step: 11, train time 21.86 s
JOB test speedup 0.21347207689480227
TPCH test speedup 0.49835946096009537
TPCH skew test speedup 0.4479500959837006
Epoch 11/50 |loss: 0.160116| train set 0.458x speedup, test set 0.448x speedup, val set 0.472x speedup, step: 12, train time 21.68 s
JOB test speedup 0.21654587494554886
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 12/50 |loss: 0.151362| train set 0.458x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 13, train time 21.87 s
JOB test speedup 0.21655725140424273
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 13/50 |loss: 0.150113| train set 0.454x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 14, train time 21.96 s
JOB test speedup 0.21416462292541005
TPCH test speedup 0.4951236014766133
TPCH skew test speedup 0.5057706348957897
Epoch 14/50 |loss: 0.147460| train set 0.456x speedup, test set 0.506x speedup, val set 0.471x speedup, step: 15, train time 21.97 s
JOB test speedup 0.20723939050834522
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 15/50 |loss: 0.144147| train set 0.457x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 16, train time 21.95 s
JOB test speedup 0.21241639417734323
TPCH test speedup 0.5015302287469213
TPCH skew test speedup 0.44742888193174746
Epoch 16/50 |loss: 0.142855| train set 0.460x speedup, test set 0.447x speedup, val set 0.483x speedup, step: 17, train time 22.01 s
JOB test speedup 0.2353622291098259
TPCH test speedup 0.4996253383425397
TPCH skew test speedup 0.5089160253621051
Epoch 17/50 |loss: 0.136926| train set 0.460x speedup, test set 0.509x speedup, val set 0.474x speedup, step: 18, train time 22.21 s
JOB test speedup 0.23168850013875228
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 18/50 |loss: 0.136164| train set 0.451x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 19, train time 22.10 s
JOB test speedup 0.22854227676802408
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 19/50 |loss: 0.134580| train set 0.453x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 20, train time 22.20 s
JOB test speedup 0.22698576929583214
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 20/50 |loss: 0.127188| train set 0.454x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 21, train time 22.76 s
JOB test speedup 0.20110513741457237
TPCH test speedup 0.4956107688572643
TPCH skew test speedup 0.5090880024055386
Epoch 21/50 |loss: 0.129162| train set 0.393x speedup, test set 0.509x speedup, val set 0.472x speedup, step: 22, train time 22.11 s
JOB test speedup 0.22944945636617653
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 22/50 |loss: 0.126491| train set 0.455x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 23, train time 22.17 s
JOB test speedup 0.20754193738442964
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 23/50 |loss: 0.124715| train set 0.456x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 24, train time 22.17 s
JOB test speedup 0.20748763889199578
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 24/50 |loss: 0.123729| train set 0.458x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 25, train time 22.31 s
JOB test speedup 0.2290646267302153
TPCH test speedup 0.4877892782948858
TPCH skew test speedup 0.45333269932278036
Epoch 25/50 |loss: 0.124179| train set 0.394x speedup, test set 0.453x speedup, val set 0.468x speedup, step: 26, train time 22.20 s
JOB test speedup 0.22995509303199316
TPCH test speedup 0.4956107688572643
TPCH skew test speedup 0.5092164036332097
Epoch 26/50 |loss: 0.120484| train set 0.455x speedup, test set 0.509x speedup, val set 0.469x speedup, step: 27, train time 22.21 s
JOB test speedup 0.21314385764074228
TPCH test speedup 0.5001214092292645
TPCH skew test speedup 0.5122749196410135
Epoch 27/50 |loss: 0.119072| train set 0.455x speedup, test set 0.512x speedup, val set 0.470x speedup, step: 28, train time 22.32 s
JOB test speedup 0.21585170248004915
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 28/50 |loss: 0.116668| train set 0.452x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 29, train time 22.40 s
JOB test speedup 0.2121082357559682
TPCH test speedup 0.4956107688572643
TPCH skew test speedup 0.5090880024055386
Epoch 29/50 |loss: 0.117234| train set 0.453x speedup, test set 0.509x speedup, val set 0.471x speedup, step: 30, train time 22.31 s
JOB test speedup 0.21722885873954845
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 30/50 |loss: 0.116872| train set 0.458x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 31, train time 22.21 s
JOB test speedup 0.19753577584415852
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 31/50 |loss: 0.113874| train set 0.456x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 32, train time 22.30 s
JOB test speedup 0.20725585020446627
TPCH test speedup 0.49418235004745853
TPCH skew test speedup 0.5081905002087279
Epoch 32/50 |loss: 0.111771| train set 0.451x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 33, train time 22.11 s
JOB test speedup 0.2211439840705638
TPCH test speedup 0.5001214092292645
TPCH skew test speedup 0.5122749196410135
Epoch 33/50 |loss: 0.110745| train set 0.456x speedup, test set 0.512x speedup, val set 0.472x speedup, step: 34, train time 22.27 s
JOB test speedup 0.19316253363501587
TPCH test speedup 0.4936658970058442
TPCH skew test speedup 0.5048181971736246
Epoch 34/50 |loss: 0.112339| train set 0.453x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 35, train time 22.31 s
JOB test speedup 0.19568563744636103
TPCH test speedup 0.4956431106074915
TPCH skew test speedup 0.5091557176103433
Epoch 35/50 |loss: 0.107777| train set 0.453x speedup, test set 0.509x speedup, val set 0.471x speedup, step: 36, train time 22.20 s
JOB test speedup 0.2005579726987725
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 36/50 |loss: 0.108718| train set 0.461x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 37, train time 22.07 s
JOB test speedup 0.21571496992356726
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 37/50 |loss: 0.108553| train set 0.457x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 38, train time 21.86 s
JOB test speedup 0.2233776648429013
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 38/50 |loss: 0.108580| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 39, train time 22.17 s
JOB test speedup 0.20101460288708278
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 39/50 |loss: 0.105649| train set 0.454x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 40, train time 22.01 s
JOB test speedup 0.2178445375891641
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 40/50 |loss: 0.104314| train set 0.454x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 41, train time 22.17 s
JOB test speedup 0.20240999124809184
TPCH test speedup 0.5001214092292645
TPCH skew test speedup 0.5124049337024402
Epoch 41/50 |loss: 0.104289| train set 0.392x speedup, test set 0.512x speedup, val set 0.471x speedup, step: 42, train time 22.41 s
JOB test speedup 0.19801352286443885
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 42/50 |loss: 0.102464| train set 0.389x speedup, test set 0.508x speedup, val set 0.468x speedup, step: 43, train time 22.40 s
JOB test speedup 0.21585092794886374
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 43/50 |loss: 0.103201| train set 0.390x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 44, train time 22.37 s
JOB test speedup 0.20200202460225175
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 44/50 |loss: 0.103371| train set 0.390x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 45, train time 22.47 s
JOB test speedup 0.19590154511878438
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 45/50 |loss: 0.098598| train set 0.451x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 46, train time 22.31 s
JOB test speedup 0.20173523931066673
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 46/50 |loss: 0.101820| train set 0.452x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 47, train time 22.41 s
JOB test speedup 0.2053528454721427
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 47/50 |loss: 0.099457| train set 0.457x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 48, train time 22.20 s
JOB test speedup 0.21467113786459824
TPCH test speedup 0.5001214092292645
TPCH skew test speedup 0.5126241435497516
Epoch 48/50 |loss: 0.100034| train set 0.393x speedup, test set 0.513x speedup, val set 0.472x speedup, step: 49, train time 22.31 s
JOB test speedup 0.20375718700376974
TPCH test speedup 0.49780161662342953
TPCH skew test speedup 0.44527604069458615
Epoch 49/50 |loss: 0.100142| train set 0.389x speedup, test set 0.445x speedup, val set 0.469x speedup, step: 50, train time 23.00 s
Training per epoch cost 22.155 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.783s, pg runtime 0.072s, speedup 0.092x
02, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
03, opt runtime 0.014s, model runtime 3.462s, pg runtime 0.014s, speedup 0.004x
04, opt runtime 0.348s, model runtime 2.639s, pg runtime 0.348s, speedup 0.132x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 14.065s, pg runtime 0.802s, speedup 0.057x
07, opt runtime 0.919s, model runtime 12.945s, pg runtime 0.942s, speedup 0.073x
08, opt runtime 0.206s, model runtime 11.702s, pg runtime 0.206s, speedup 0.018x
09, opt runtime 2.324s, model runtime 19.337s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.959s, model runtime 34.126s, pg runtime 2.959s, speedup 0.087x
11, opt runtime 0.294s, model runtime 10.126s, pg runtime 2.352s, speedup 0.232x
12, opt runtime 0.463s, model runtime 12.952s, pg runtime 0.557s, speedup 0.043x
13, opt runtime 1.829s, model runtime 29.394s, pg runtime 53.885s, speedup 1.833x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 0.313s, model runtime 6.719s, pg runtime 0.313s, speedup 0.047x
16, opt runtime 0.441s, model runtime 3.999s, pg runtime 0.453s, speedup 0.113x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.599s, model runtime 25.102s, pg runtime 2.599s, speedup 0.104x
19, opt runtime 1.923s, model runtime 29.556s, pg runtime 3.540s, speedup 0.120x
20, opt runtime 0.061s, model runtime 0.497s, pg runtime 0.086s, speedup 0.173x
21, opt runtime 0.626s, model runtime 3.830s, pg runtime 2.558s, speedup 0.668x
22, opt runtime 0.136s, model runtime 25.280s, pg runtime 0.891s, speedup 0.035x
23, opt runtime 0.389s, model runtime 8.892s, pg runtime 0.389s, speedup 0.044x
24, opt runtime 0.189s, model runtime 17.996s, pg runtime 0.189s, speedup 0.011x
25, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
26, opt runtime 0.020s, model runtime 1.552s, pg runtime 0.020s, speedup 0.013x
27, opt runtime 0.060s, model runtime 1.196s, pg runtime 0.112s, speedup 0.094x
28, opt runtime 0.154s, model runtime 11.740s, pg runtime 0.154s, speedup 0.013x
29, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
30, opt runtime 0.023s, model runtime 11.896s, pg runtime 0.023s, speedup 0.002x
31, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
32, opt runtime 1.315s, model runtime 8.994s, pg runtime 1.315s, speedup 0.146x
33, opt runtime 0.250s, model runtime 7.361s, pg runtime 0.250s, speedup 0.034x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
04, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 21.143s, model runtime 66.875s, pg runtime 21.143s, speedup 0.316x
07, opt runtime 6.460s, model runtime 68.184s, pg runtime 16.134s, speedup 0.237x
08, opt runtime 6.284s, model runtime 81.870s, pg runtime 31.019s, speedup 0.379x
09, opt runtime 3.944s, model runtime 12.042s, pg runtime 3.944s, speedup 0.328x
10, opt runtime 3.603s, model runtime 12.640s, pg runtime 3.603s, speedup 0.285x
11, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
12, opt runtime 25.043s, model runtime 115.186s, pg runtime 73.019s, speedup 0.634x
13, opt runtime 2.995s, model runtime 96.797s, pg runtime 14.646s, speedup 0.151x
14, opt runtime 3.449s, model runtime 104.561s, pg runtime 14.824s, speedup 0.142x
15, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
16, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
17, opt runtime 7.469s, model runtime 153.196s, pg runtime 23.223s, speedup 0.152x
18, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
19, opt runtime 1.148s, model runtime 44.628s, pg runtime 1.214s, speedup 0.027x
20, opt runtime 1.353s, model runtime 45.705s, pg runtime 1.380s, speedup 0.030x
21, opt runtime 22.482s, model runtime 29.303s, pg runtime 22.482s, speedup 0.767x
22, opt runtime 6.519s, model runtime 44.915s, pg runtime 6.519s, speedup 0.145x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 5.961s, model runtime 92.708s, pg runtime 31.210s, speedup 0.337x
25, opt runtime 1.642s, model runtime 3.569s, pg runtime 1.752s, speedup 0.491x
26, opt runtime 1.404s, model runtime 3.441s, pg runtime 1.404s, speedup 0.408x
27, opt runtime 7.268s, model runtime 10.668s, pg runtime 7.268s, speedup 0.681x
28, opt runtime 6.854s, model runtime 10.444s, pg runtime 6.854s, speedup 0.656x
29, opt runtime 5.362s, model runtime 26.693s, pg runtime 5.362s, speedup 0.201x
30, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
31, opt runtime 24.079s, model runtime 663.875s, pg runtime 608.707s, speedup 0.917x
32, opt runtime 24.706s, model runtime 660.594s, pg runtime 610.808s, speedup 0.925x
33, opt runtime 38.718s, model runtime 104.379s, pg runtime 69.421s, speedup 0.665x
34, opt runtime 35.527s, model runtime 140.312s, pg runtime 71.730s, speedup 0.511x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.639s, model runtime 576.339s, pg runtime 462.544s, speedup 0.803x
37, opt runtime 11.120s, model runtime 278.146s, pg runtime 11.120s, speedup 0.040x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 0.912s, model runtime 26.810s, pg runtime 0.912s, speedup 0.034x
40, opt runtime 0.873s, model runtime 25.962s, pg runtime 0.873s, speedup 0.034x
========== TPCH skew
01, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
02, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
03, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 20.708s, model runtime 74.186s, pg runtime 20.708s, speedup 0.279x
06, opt runtime 11.965s, model runtime 62.207s, pg runtime 11.965s, speedup 0.192x
07, opt runtime 5.471s, model runtime 67.587s, pg runtime 13.410s, speedup 0.198x
08, opt runtime 6.497s, model runtime 69.526s, pg runtime 12.849s, speedup 0.185x
09, opt runtime 3.612s, model runtime 11.335s, pg runtime 3.612s, speedup 0.319x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 25.045s, model runtime 118.748s, pg runtime 64.291s, speedup 0.541x
12, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
15, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
16, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
17, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
18, opt runtime 7.915s, model runtime 150.640s, pg runtime 29.436s, speedup 0.195x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.316s, model runtime 32.538s, pg runtime 1.352s, speedup 0.042x
21, opt runtime 23.119s, model runtime 44.941s, pg runtime 23.119s, speedup 0.514x
22, opt runtime 22.332s, model runtime 26.891s, pg runtime 22.449s, speedup 0.835x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 3.331s, pg runtime 1.433s, speedup 0.430x
26, opt runtime 1.187s, model runtime 3.327s, pg runtime 1.187s, speedup 0.357x
27, opt runtime 6.749s, model runtime 10.149s, pg runtime 6.749s, speedup 0.665x
28, opt runtime 7.213s, model runtime 11.120s, pg runtime 7.213s, speedup 0.649x
29, opt runtime 5.223s, model runtime 26.755s, pg runtime 5.223s, speedup 0.195x
30, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
31, opt runtime 24.136s, model runtime 676.182s, pg runtime 609.432s, speedup 0.901x
32, opt runtime 24.451s, model runtime 664.233s, pg runtime 628.615s, speedup 0.946x
33, opt runtime 39.254s, model runtime 119.051s, pg runtime 58.921s, speedup 0.495x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
36, opt runtime 14.422s, model runtime 584.445s, pg runtime 497.542s, speedup 0.851x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 23.543s, model runtime 270.128s, pg runtime 23.543s, speedup 0.087x
39, opt runtime 0.876s, model runtime 25.437s, pg runtime 0.938s, speedup 0.037x
40, opt runtime 0.967s, model runtime 28.908s, pg runtime 0.967s, speedup 0.033x
====================
JOB best validation speedup epoch: 0, train speedup 0.484, test speedup 0.213, val speedup 0.493
TPCH best validation speedup epoch: 0, train speedup 0.484, test speedup 0.516, val speedup 0.493
TPCH Skew best validation speedup epoch: 0, train speedup 0.484, test speedup 0.523, val speedup 0.493
execution cost 0:19:34.423099
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.840670, and there are 34391 training samples
in channel 9
JOB test speedup 0.23103798556478466
TPCH test speedup 0.5125595838480884
TPCH skew test speedup 0.5152978666857573
Epoch 0/50 |loss: 0.419511| train set 0.483x speedup, test set 0.515x speedup, val set 0.490x speedup, step: 1, train time 23.29 s
JOB test speedup 0.22120853544514824
TPCH test speedup 0.4976815097439102
TPCH skew test speedup 0.5111794396958969
Epoch 1/50 |loss: 0.302708| train set 0.468x speedup, test set 0.511x speedup, val set 0.476x speedup, step: 2, train time 21.87 s
JOB test speedup 0.22398820002105693
TPCH test speedup 0.5030548621964982
TPCH skew test speedup 0.5137984678625358
Epoch 2/50 |loss: 0.261725| train set 0.467x speedup, test set 0.514x speedup, val set 0.483x speedup, step: 3, train time 21.77 s
JOB test speedup 0.21861514099189117
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 3/50 |loss: 0.239151| train set 0.458x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 4, train time 21.57 s
JOB test speedup 0.21416937682954626
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 4/50 |loss: 0.219257| train set 0.457x speedup, test set 0.508x speedup, val set 0.474x speedup, step: 5, train time 21.71 s
JOB test speedup 0.22764611470528454
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 5/50 |loss: 0.206230| train set 0.462x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 6, train time 21.87 s
JOB test speedup 0.23931328208300737
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 6/50 |loss: 0.195770| train set 0.458x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 7, train time 22.03 s
JOB test speedup 0.22532683892715538
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 7/50 |loss: 0.186723| train set 0.458x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 8, train time 21.93 s
JOB test speedup 0.22295206609305102
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 8/50 |loss: 0.177939| train set 0.455x speedup, test set 0.504x speedup, val set 0.469x speedup, step: 9, train time 22.10 s
JOB test speedup 0.22662313132831177
TPCH test speedup 0.47612105587332615
TPCH skew test speedup 0.44528775493789347
Epoch 9/50 |loss: 0.170255| train set 0.459x speedup, test set 0.445x speedup, val set 0.468x speedup, step: 10, train time 21.98 s
JOB test speedup 0.250488566112083
TPCH test speedup 0.5028162307777263
TPCH skew test speedup 0.5135428264944149
Epoch 10/50 |loss: 0.167044| train set 0.468x speedup, test set 0.514x speedup, val set 0.485x speedup, step: 11, train time 22.06 s
JOB test speedup 0.24366333842824736
TPCH test speedup 0.5001543423738246
TPCH skew test speedup 0.5123434853579222
Epoch 11/50 |loss: 0.163068| train set 0.461x speedup, test set 0.512x speedup, val set 0.472x speedup, step: 12, train time 21.95 s
JOB test speedup 0.22789402532240116
TPCH test speedup 0.5010484422637528
TPCH skew test speedup 0.5102551455186499
Epoch 12/50 |loss: 0.152992| train set 0.459x speedup, test set 0.510x speedup, val set 0.473x speedup, step: 13, train time 22.25 s
JOB test speedup 0.23178565037403578
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 13/50 |loss: 0.152450| train set 0.454x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 14, train time 22.21 s
JOB test speedup 0.22718787991513806
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 14/50 |loss: 0.150027| train set 0.456x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 15, train time 22.34 s
JOB test speedup 0.2226240845278473
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 15/50 |loss: 0.144159| train set 0.456x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 16, train time 22.36 s
JOB test speedup 0.22350964899598372
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 16/50 |loss: 0.143926| train set 0.458x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 17, train time 22.31 s
JOB test speedup 0.2331899018353553
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 17/50 |loss: 0.138839| train set 0.456x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 18, train time 22.41 s
JOB test speedup 0.2363858797841118
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 18/50 |loss: 0.138192| train set 0.453x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 19, train time 22.40 s
JOB test speedup 0.22493466409581822
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 19/50 |loss: 0.136457| train set 0.455x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 20, train time 22.15 s
JOB test speedup 0.22569100018947416
TPCH test speedup 0.49739521002009107
TPCH skew test speedup 0.5075016830660201
Epoch 20/50 |loss: 0.129668| train set 0.455x speedup, test set 0.508x speedup, val set 0.474x speedup, step: 21, train time 22.73 s
JOB test speedup 0.22085998781052368
TPCH test speedup 0.49418235004745853
TPCH skew test speedup 0.5081905002087279
Epoch 21/50 |loss: 0.129886| train set 0.393x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 22, train time 22.32 s
JOB test speedup 0.22630510208005913
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 22/50 |loss: 0.130164| train set 0.460x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 23, train time 22.17 s
JOB test speedup 0.22228275224792723
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 23/50 |loss: 0.124202| train set 0.458x speedup, test set 0.511x speedup, val set 0.472x speedup, step: 24, train time 22.18 s
JOB test speedup 0.2437845765730279
TPCH test speedup 0.4808016738988554
TPCH skew test speedup 0.45042765571631466
Epoch 24/50 |loss: 0.125173| train set 0.394x speedup, test set 0.450x speedup, val set 0.470x speedup, step: 25, train time 22.50 s
JOB test speedup 0.23430788502894323
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 25/50 |loss: 0.124383| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 26, train time 22.47 s
JOB test speedup 0.2385837391006312
TPCH test speedup 0.5028872045317088
TPCH skew test speedup 0.4503626764733982
Epoch 26/50 |loss: 0.122580| train set 0.456x speedup, test set 0.450x speedup, val set 0.476x speedup, step: 27, train time 22.31 s
JOB test speedup 0.22164271525232673
TPCH test speedup 0.5114863267466243
TPCH skew test speedup 0.5177090129806251
Epoch 27/50 |loss: 0.118974| train set 0.455x speedup, test set 0.518x speedup, val set 0.470x speedup, step: 28, train time 22.50 s
JOB test speedup 0.24138669740714566
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 28/50 |loss: 0.119440| train set 0.458x speedup, test set 0.448x speedup, val set 0.468x speedup, step: 29, train time 22.41 s
JOB test speedup 0.23450033478600738
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 29/50 |loss: 0.118374| train set 0.391x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 30, train time 22.73 s
JOB test speedup 0.21175953851647297
TPCH test speedup 0.5110284772410049
TPCH skew test speedup 0.5184280629884743
Epoch 30/50 |loss: 0.115180| train set 0.458x speedup, test set 0.518x speedup, val set 0.472x speedup, step: 31, train time 22.46 s
JOB test speedup 0.250524826773669
TPCH test speedup 0.5110628625661798
TPCH skew test speedup 0.5184982858522003
Epoch 31/50 |loss: 0.115189| train set 0.457x speedup, test set 0.518x speedup, val set 0.479x speedup, step: 32, train time 22.28 s
JOB test speedup 0.2408226089547869
TPCH test speedup 0.49418235004745853
TPCH skew test speedup 0.5081723563248334
Epoch 32/50 |loss: 0.110339| train set 0.451x speedup, test set 0.508x speedup, val set 0.468x speedup, step: 33, train time 22.70 s
JOB test speedup 0.23354620483400268
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 33/50 |loss: 0.109701| train set 0.458x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 34, train time 22.47 s
JOB test speedup 0.20059299787264795
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 34/50 |loss: 0.111673| train set 0.452x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 35, train time 22.40 s
JOB test speedup 0.22504627995360738
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 35/50 |loss: 0.109836| train set 0.453x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 36, train time 22.44 s
JOB test speedup 0.23308318972331138
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 36/50 |loss: 0.109665| train set 0.459x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 37, train time 22.41 s
JOB test speedup 0.2370981756065843
TPCH test speedup 0.4801936716425378
TPCH skew test speedup 0.4477381121520435
Epoch 37/50 |loss: 0.109295| train set 0.393x speedup, test set 0.448x speedup, val set 0.470x speedup, step: 38, train time 22.46 s
JOB test speedup 0.22661716799395462
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 38/50 |loss: 0.108924| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 39, train time 22.28 s
JOB test speedup 0.20738183204335875
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 39/50 |loss: 0.107291| train set 0.454x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 40, train time 22.40 s
JOB test speedup 0.22240291898580575
TPCH test speedup 0.5110284772410049
TPCH skew test speedup 0.5184280629884743
Epoch 40/50 |loss: 0.102717| train set 0.455x speedup, test set 0.518x speedup, val set 0.470x speedup, step: 41, train time 22.40 s
JOB test speedup 0.227832016724436
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 41/50 |loss: 0.104983| train set 0.391x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 42, train time 22.60 s
JOB test speedup 0.21397459357031157
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 42/50 |loss: 0.105906| train set 0.452x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 43, train time 22.58 s
JOB test speedup 0.22263398105851367
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 43/50 |loss: 0.104080| train set 0.452x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 44, train time 22.47 s
JOB test speedup 0.21853404867801696
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 44/50 |loss: 0.103531| train set 0.391x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 45, train time 22.58 s
JOB test speedup 0.22768864203511494
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 45/50 |loss: 0.101008| train set 0.453x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 46, train time 22.21 s
JOB test speedup 0.22486662253295045
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 46/50 |loss: 0.102478| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 47, train time 22.41 s
JOB test speedup 0.20252002459411653
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 47/50 |loss: 0.098872| train set 0.455x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 48, train time 22.58 s
JOB test speedup 0.23000815247366954
TPCH test speedup 0.49634472048206113
TPCH skew test speedup 0.5104612601044067
Epoch 48/50 |loss: 0.099836| train set 0.392x speedup, test set 0.510x speedup, val set 0.471x speedup, step: 49, train time 22.41 s
JOB test speedup 0.2284667486274894
TPCH test speedup 0.5063198739840733
TPCH skew test speedup 0.5151643711110406
Epoch 49/50 |loss: 0.100049| train set 0.389x speedup, test set 0.515x speedup, val set 0.469x speedup, step: 50, train time 22.92 s
Training per epoch cost 22.326 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 1.050s, pg runtime 0.072s, speedup 0.069x
02, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
03, opt runtime 0.014s, model runtime 3.462s, pg runtime 0.014s, speedup 0.004x
04, opt runtime 0.348s, model runtime 2.639s, pg runtime 0.348s, speedup 0.132x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 14.065s, pg runtime 0.802s, speedup 0.057x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 0.206s, model runtime 9.661s, pg runtime 0.206s, speedup 0.021x
09, opt runtime 2.324s, model runtime 19.337s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.959s, model runtime 13.067s, pg runtime 2.959s, speedup 0.226x
11, opt runtime 0.294s, model runtime 9.920s, pg runtime 2.352s, speedup 0.237x
12, opt runtime 0.463s, model runtime 12.952s, pg runtime 0.557s, speedup 0.043x
13, opt runtime 1.829s, model runtime 29.394s, pg runtime 53.885s, speedup 1.833x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 0.313s, model runtime 6.719s, pg runtime 0.313s, speedup 0.047x
16, opt runtime 0.441s, model runtime 3.268s, pg runtime 0.453s, speedup 0.139x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.599s, model runtime 25.102s, pg runtime 2.599s, speedup 0.104x
19, opt runtime 1.923s, model runtime 29.556s, pg runtime 3.540s, speedup 0.120x
20, opt runtime 0.061s, model runtime 7.531s, pg runtime 0.086s, speedup 0.011x
21, opt runtime 0.626s, model runtime 3.830s, pg runtime 2.558s, speedup 0.668x
22, opt runtime 0.136s, model runtime 16.158s, pg runtime 0.891s, speedup 0.055x
23, opt runtime 0.389s, model runtime 8.892s, pg runtime 0.389s, speedup 0.044x
24, opt runtime 0.189s, model runtime 17.996s, pg runtime 0.189s, speedup 0.011x
25, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
26, opt runtime 0.020s, model runtime 1.552s, pg runtime 0.020s, speedup 0.013x
27, opt runtime 0.060s, model runtime 1.196s, pg runtime 0.112s, speedup 0.094x
28, opt runtime 0.154s, model runtime 11.740s, pg runtime 0.154s, speedup 0.013x
29, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
30, opt runtime 0.023s, model runtime 11.896s, pg runtime 0.023s, speedup 0.002x
31, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
32, opt runtime 1.315s, model runtime 8.994s, pg runtime 1.315s, speedup 0.146x
33, opt runtime 0.250s, model runtime 7.361s, pg runtime 0.250s, speedup 0.034x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
04, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
05, opt runtime 23.961s, model runtime 49.702s, pg runtime 32.278s, speedup 0.649x
06, opt runtime 21.143s, model runtime 55.527s, pg runtime 21.143s, speedup 0.381x
07, opt runtime 6.460s, model runtime 68.184s, pg runtime 16.134s, speedup 0.237x
08, opt runtime 6.284s, model runtime 81.870s, pg runtime 31.019s, speedup 0.379x
09, opt runtime 3.944s, model runtime 12.042s, pg runtime 3.944s, speedup 0.328x
10, opt runtime 3.603s, model runtime 12.640s, pg runtime 3.603s, speedup 0.285x
11, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
12, opt runtime 25.043s, model runtime 115.186s, pg runtime 73.019s, speedup 0.634x
13, opt runtime 2.995s, model runtime 96.797s, pg runtime 14.646s, speedup 0.151x
14, opt runtime 3.449s, model runtime 104.561s, pg runtime 14.824s, speedup 0.142x
15, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
16, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
17, opt runtime 7.469s, model runtime 153.196s, pg runtime 23.223s, speedup 0.152x
18, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
19, opt runtime 1.148s, model runtime 44.628s, pg runtime 1.214s, speedup 0.027x
20, opt runtime 1.353s, model runtime 45.705s, pg runtime 1.380s, speedup 0.030x
21, opt runtime 22.482s, model runtime 54.406s, pg runtime 22.482s, speedup 0.413x
22, opt runtime 6.519s, model runtime 91.130s, pg runtime 6.519s, speedup 0.072x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 5.961s, model runtime 92.708s, pg runtime 31.210s, speedup 0.337x
25, opt runtime 1.642s, model runtime 3.569s, pg runtime 1.752s, speedup 0.491x
26, opt runtime 1.404s, model runtime 3.441s, pg runtime 1.404s, speedup 0.408x
27, opt runtime 7.268s, model runtime 10.668s, pg runtime 7.268s, speedup 0.681x
28, opt runtime 6.854s, model runtime 10.444s, pg runtime 6.854s, speedup 0.656x
29, opt runtime 5.362s, model runtime 26.693s, pg runtime 5.362s, speedup 0.201x
30, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
31, opt runtime 24.079s, model runtime 663.875s, pg runtime 608.707s, speedup 0.917x
32, opt runtime 24.706s, model runtime 660.594s, pg runtime 610.808s, speedup 0.925x
33, opt runtime 38.718s, model runtime 104.379s, pg runtime 69.421s, speedup 0.665x
34, opt runtime 35.527s, model runtime 140.312s, pg runtime 71.730s, speedup 0.511x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.639s, model runtime 576.339s, pg runtime 462.544s, speedup 0.803x
37, opt runtime 11.120s, model runtime 278.146s, pg runtime 11.120s, speedup 0.040x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 0.912s, model runtime 26.810s, pg runtime 0.912s, speedup 0.034x
40, opt runtime 0.873s, model runtime 25.962s, pg runtime 0.873s, speedup 0.034x
========== TPCH skew
01, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
02, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
03, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 20.708s, model runtime 68.822s, pg runtime 20.708s, speedup 0.301x
06, opt runtime 11.965s, model runtime 75.033s, pg runtime 11.965s, speedup 0.159x
07, opt runtime 5.471s, model runtime 67.587s, pg runtime 13.410s, speedup 0.198x
08, opt runtime 6.497s, model runtime 69.526s, pg runtime 12.849s, speedup 0.185x
09, opt runtime 3.612s, model runtime 11.335s, pg runtime 3.612s, speedup 0.319x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 25.045s, model runtime 118.748s, pg runtime 64.291s, speedup 0.541x
12, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
15, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
16, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
17, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
18, opt runtime 7.915s, model runtime 150.640s, pg runtime 29.436s, speedup 0.195x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.316s, model runtime 32.538s, pg runtime 1.352s, speedup 0.042x
21, opt runtime 23.119s, model runtime 88.588s, pg runtime 23.119s, speedup 0.261x
22, opt runtime 22.332s, model runtime 70.102s, pg runtime 22.449s, speedup 0.320x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 3.331s, pg runtime 1.433s, speedup 0.430x
26, opt runtime 1.187s, model runtime 3.327s, pg runtime 1.187s, speedup 0.357x
27, opt runtime 6.749s, model runtime 10.149s, pg runtime 6.749s, speedup 0.665x
28, opt runtime 7.213s, model runtime 11.120s, pg runtime 7.213s, speedup 0.649x
29, opt runtime 5.223s, model runtime 26.755s, pg runtime 5.223s, speedup 0.195x
30, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
31, opt runtime 24.136s, model runtime 676.182s, pg runtime 609.432s, speedup 0.901x
32, opt runtime 24.451s, model runtime 664.233s, pg runtime 628.615s, speedup 0.946x
33, opt runtime 39.254s, model runtime 119.051s, pg runtime 58.921s, speedup 0.495x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
36, opt runtime 14.422s, model runtime 584.445s, pg runtime 497.542s, speedup 0.851x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 23.543s, model runtime 270.128s, pg runtime 23.543s, speedup 0.087x
39, opt runtime 0.876s, model runtime 25.437s, pg runtime 0.938s, speedup 0.037x
40, opt runtime 0.967s, model runtime 28.908s, pg runtime 0.967s, speedup 0.033x
====================
JOB best validation speedup epoch: 0, train speedup 0.483, test speedup 0.231, val speedup 0.490
TPCH best validation speedup epoch: 0, train speedup 0.483, test speedup 0.513, val speedup 0.490
TPCH Skew best validation speedup epoch: 0, train speedup 0.483, test speedup 0.515, val speedup 0.490
execution cost 0:19:44.477247
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.698067, and there are 34391 training samples
in channel 9
JOB test speedup 0.22822127473818882
TPCH test speedup 0.5431928741472158
TPCH skew test speedup 0.5487469883640445
Epoch 0/50 |loss: 0.416332| train set 0.512x speedup, test set 0.549x speedup, val set 0.519x speedup, step: 1, train time 22.94 s
JOB test speedup 0.23744744674437276
TPCH test speedup 0.49669168962393984
TPCH skew test speedup 0.507634445088495
Epoch 1/50 |loss: 0.301993| train set 0.467x speedup, test set 0.508x speedup, val set 0.476x speedup, step: 2, train time 21.70 s
JOB test speedup 0.21232616139037844
TPCH test speedup 0.5030215459820312
TPCH skew test speedup 0.5137295121851307
Epoch 2/50 |loss: 0.260012| train set 0.479x speedup, test set 0.514x speedup, val set 0.485x speedup, step: 3, train time 21.56 s
JOB test speedup 0.2155957521286467
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 3/50 |loss: 0.236989| train set 0.457x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 4, train time 21.65 s
JOB test speedup 0.2246638953878047
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 4/50 |loss: 0.216234| train set 0.461x speedup, test set 0.511x speedup, val set 0.476x speedup, step: 5, train time 21.80 s
JOB test speedup 0.21214711899144192
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 5/50 |loss: 0.203636| train set 0.459x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 6, train time 21.64 s
JOB test speedup 0.25128451948713476
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 6/50 |loss: 0.193056| train set 0.460x speedup, test set 0.508x speedup, val set 0.475x speedup, step: 7, train time 21.76 s
JOB test speedup 0.228117901352385
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 7/50 |loss: 0.184681| train set 0.459x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 8, train time 21.77 s
JOB test speedup 0.22275125662248071
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 8/50 |loss: 0.175867| train set 0.455x speedup, test set 0.504x speedup, val set 0.471x speedup, step: 9, train time 21.97 s
JOB test speedup 0.22290276553814506
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 9/50 |loss: 0.169196| train set 0.457x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 10, train time 21.86 s
JOB test speedup 0.2413294145047716
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 10/50 |loss: 0.167279| train set 0.462x speedup, test set 0.508x speedup, val set 0.475x speedup, step: 11, train time 22.01 s
JOB test speedup 0.22297275032704564
TPCH test speedup 0.5042506228940924
TPCH skew test speedup 0.5123434853579222
Epoch 11/50 |loss: 0.162481| train set 0.462x speedup, test set 0.512x speedup, val set 0.490x speedup, step: 12, train time 22.11 s
JOB test speedup 0.23938739642109796
TPCH test speedup 0.49652114009068415
TPCH skew test speedup 0.5070932316482127
Epoch 12/50 |loss: 0.154349| train set 0.455x speedup, test set 0.507x speedup, val set 0.473x speedup, step: 13, train time 22.08 s
JOB test speedup 0.21535185112061425
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 13/50 |loss: 0.152002| train set 0.453x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 14, train time 22.30 s
JOB test speedup 0.2370126740579763
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 14/50 |loss: 0.149376| train set 0.456x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 15, train time 22.27 s
JOB test speedup 0.21502066510233253
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 15/50 |loss: 0.146342| train set 0.454x speedup, test set 0.505x speedup, val set 0.473x speedup, step: 16, train time 22.27 s
JOB test speedup 0.23218796048103624
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 16/50 |loss: 0.145061| train set 0.454x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 17, train time 22.20 s
JOB test speedup 0.23036392156011537
TPCH test speedup 0.5015505091204286
TPCH skew test speedup 0.5083516859427682
Epoch 17/50 |loss: 0.139570| train set 0.459x speedup, test set 0.508x speedup, val set 0.475x speedup, step: 18, train time 22.20 s
JOB test speedup 0.2288788359371166
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 18/50 |loss: 0.139203| train set 0.453x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 19, train time 22.30 s
JOB test speedup 0.22275125662248071
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 19/50 |loss: 0.136781| train set 0.454x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 20, train time 22.46 s
JOB test speedup 0.22142043076397547
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 20/50 |loss: 0.130274| train set 0.456x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 21, train time 22.80 s
JOB test speedup 0.23878113085565614
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 21/50 |loss: 0.131372| train set 0.392x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 22, train time 22.34 s
JOB test speedup 0.2433629667444603
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 22/50 |loss: 0.131017| train set 0.455x speedup, test set 0.511x speedup, val set 0.475x speedup, step: 23, train time 22.28 s
JOB test speedup 0.22289156934322513
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 23/50 |loss: 0.124955| train set 0.457x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 24, train time 22.34 s
JOB test speedup 0.20121555727407814
TPCH test speedup 0.4808016738988554
TPCH skew test speedup 0.45042765571631466
Epoch 24/50 |loss: 0.125753| train set 0.461x speedup, test set 0.450x speedup, val set 0.474x speedup, step: 25, train time 22.26 s
JOB test speedup 0.21728416106494772
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 25/50 |loss: 0.124754| train set 0.456x speedup, test set 0.448x speedup, val set 0.469x speedup, step: 26, train time 22.50 s
JOB test speedup 0.2333036939960224
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 26/50 |loss: 0.122358| train set 0.452x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 27, train time 22.30 s
JOB test speedup 0.22625929126206798
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 27/50 |loss: 0.120295| train set 0.456x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 28, train time 22.31 s
JOB test speedup 0.22099784242548307
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 28/50 |loss: 0.119720| train set 0.458x speedup, test set 0.448x speedup, val set 0.469x speedup, step: 29, train time 22.21 s
JOB test speedup 0.20112194090433297
TPCH test speedup 0.4956107688572643
TPCH skew test speedup 0.5090880024055386
Epoch 29/50 |loss: 0.120269| train set 0.390x speedup, test set 0.509x speedup, val set 0.472x speedup, step: 30, train time 22.41 s
JOB test speedup 0.2441893203804135
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 30/50 |loss: 0.116967| train set 0.457x speedup, test set 0.511x speedup, val set 0.473x speedup, step: 31, train time 22.37 s
JOB test speedup 0.24214197051228978
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 31/50 |loss: 0.116325| train set 0.456x speedup, test set 0.511x speedup, val set 0.474x speedup, step: 32, train time 22.29 s
JOB test speedup 0.22257867104741377
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 32/50 |loss: 0.114354| train set 0.455x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 33, train time 22.21 s
JOB test speedup 0.23038393129116091
TPCH test speedup 0.4995924748244091
TPCH skew test speedup 0.5089766542574133
Epoch 33/50 |loss: 0.112674| train set 0.455x speedup, test set 0.509x speedup, val set 0.480x speedup, step: 34, train time 22.35 s
JOB test speedup 0.23723351209704488
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 34/50 |loss: 0.112323| train set 0.453x speedup, test set 0.505x speedup, val set 0.473x speedup, step: 35, train time 22.22 s
JOB test speedup 0.22670811058499443
TPCH test speedup 0.49879537683017044
TPCH skew test speedup 0.5114161018720179
Epoch 35/50 |loss: 0.110958| train set 0.455x speedup, test set 0.511x speedup, val set 0.471x speedup, step: 36, train time 22.32 s
JOB test speedup 0.21867128706215966
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 36/50 |loss: 0.111975| train set 0.457x speedup, test set 0.511x speedup, val set 0.472x speedup, step: 37, train time 22.37 s
JOB test speedup 0.23266237561935804
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 37/50 |loss: 0.110197| train set 0.457x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 38, train time 22.36 s
JOB test speedup 0.23260906922703747
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 38/50 |loss: 0.111282| train set 0.390x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 39, train time 22.36 s
JOB test speedup 0.19852991394823324
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 39/50 |loss: 0.109651| train set 0.454x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 40, train time 22.26 s
JOB test speedup 0.19518871289084141
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 40/50 |loss: 0.106804| train set 0.451x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 41, train time 22.20 s
JOB test speedup 0.19445103613513628
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 41/50 |loss: 0.107003| train set 0.453x speedup, test set 0.508x speedup, val set 0.474x speedup, step: 42, train time 22.17 s
JOB test speedup 0.20316884398355423
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 42/50 |loss: 0.106327| train set 0.451x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 43, train time 22.28 s
JOB test speedup 0.2162615934556424
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 43/50 |loss: 0.105803| train set 0.389x speedup, test set 0.508x speedup, val set 0.471x speedup, step: 44, train time 22.21 s
JOB test speedup 0.23038075138258493
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 44/50 |loss: 0.105186| train set 0.390x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 45, train time 22.27 s
JOB test speedup 0.21898322197047435
TPCH test speedup 0.4934483126801516
TPCH skew test speedup 0.5077400445831092
Epoch 45/50 |loss: 0.102015| train set 0.453x speedup, test set 0.508x speedup, val set 0.474x speedup, step: 46, train time 22.47 s
JOB test speedup 0.23595041628372948
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 46/50 |loss: 0.103331| train set 0.453x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 47, train time 22.21 s
JOB test speedup 0.20794902071301344
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 47/50 |loss: 0.101440| train set 0.455x speedup, test set 0.511x speedup, val set 0.473x speedup, step: 48, train time 22.50 s
JOB test speedup 0.2128553922819188
TPCH test speedup 0.4956107688572643
TPCH skew test speedup 0.5090880024055386
Epoch 48/50 |loss: 0.102658| train set 0.453x speedup, test set 0.509x speedup, val set 0.472x speedup, step: 49, train time 22.21 s
JOB test speedup 0.1969428088885882
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 49/50 |loss: 0.103682| train set 0.389x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 50, train time 22.70 s
Training per epoch cost 22.218 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 1.770s, pg runtime 0.072s, speedup 0.041x
02, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
03, opt runtime 0.014s, model runtime 3.462s, pg runtime 0.014s, speedup 0.004x
04, opt runtime 0.348s, model runtime 2.639s, pg runtime 0.348s, speedup 0.132x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
09, opt runtime 2.324s, model runtime 19.354s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.959s, model runtime 34.126s, pg runtime 2.959s, speedup 0.087x
11, opt runtime 0.294s, model runtime 11.106s, pg runtime 2.352s, speedup 0.212x
12, opt runtime 0.463s, model runtime 12.952s, pg runtime 0.557s, speedup 0.043x
13, opt runtime 1.829s, model runtime 9.516s, pg runtime 53.885s, speedup 5.662x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 0.313s, model runtime 6.719s, pg runtime 0.313s, speedup 0.047x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.599s, model runtime 25.102s, pg runtime 2.599s, speedup 0.104x
19, opt runtime 1.923s, model runtime 29.556s, pg runtime 3.540s, speedup 0.120x
20, opt runtime 0.061s, model runtime 0.251s, pg runtime 0.086s, speedup 0.342x
21, opt runtime 0.626s, model runtime 12.350s, pg runtime 2.558s, speedup 0.207x
22, opt runtime 0.136s, model runtime 16.158s, pg runtime 0.891s, speedup 0.055x
23, opt runtime 0.389s, model runtime 8.892s, pg runtime 0.389s, speedup 0.044x
24, opt runtime 0.189s, model runtime 17.996s, pg runtime 0.189s, speedup 0.011x
25, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
26, opt runtime 0.020s, model runtime 1.552s, pg runtime 0.020s, speedup 0.013x
27, opt runtime 0.060s, model runtime 1.196s, pg runtime 0.112s, speedup 0.094x
28, opt runtime 0.154s, model runtime 11.740s, pg runtime 0.154s, speedup 0.013x
29, opt runtime 0.136s, model runtime 1.353s, pg runtime 0.137s, speedup 0.101x
30, opt runtime 0.023s, model runtime 11.896s, pg runtime 0.023s, speedup 0.002x
31, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
32, opt runtime 1.315s, model runtime 13.260s, pg runtime 1.315s, speedup 0.099x
33, opt runtime 0.250s, model runtime 7.361s, pg runtime 0.250s, speedup 0.034x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
04, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
05, opt runtime 23.961s, model runtime 49.702s, pg runtime 32.278s, speedup 0.649x
06, opt runtime 21.143s, model runtime 55.527s, pg runtime 21.143s, speedup 0.381x
07, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
08, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
09, opt runtime 3.944s, model runtime 12.042s, pg runtime 3.944s, speedup 0.328x
10, opt runtime 3.603s, model runtime 12.640s, pg runtime 3.603s, speedup 0.285x
11, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
12, opt runtime 25.043s, model runtime 115.186s, pg runtime 73.019s, speedup 0.634x
13, opt runtime 2.995s, model runtime 73.975s, pg runtime 14.646s, speedup 0.198x
14, opt runtime 3.449s, model runtime 77.048s, pg runtime 14.824s, speedup 0.192x
15, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
16, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
17, opt runtime 7.469s, model runtime 153.196s, pg runtime 23.223s, speedup 0.152x
18, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
19, opt runtime 1.148s, model runtime 44.628s, pg runtime 1.214s, speedup 0.027x
20, opt runtime 1.353s, model runtime 45.705s, pg runtime 1.380s, speedup 0.030x
21, opt runtime 22.482s, model runtime 54.406s, pg runtime 22.482s, speedup 0.413x
22, opt runtime 6.519s, model runtime 91.130s, pg runtime 6.519s, speedup 0.072x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 5.961s, model runtime 92.708s, pg runtime 31.210s, speedup 0.337x
25, opt runtime 1.642s, model runtime 3.569s, pg runtime 1.752s, speedup 0.491x
26, opt runtime 1.404s, model runtime 3.441s, pg runtime 1.404s, speedup 0.408x
27, opt runtime 7.268s, model runtime 10.574s, pg runtime 7.268s, speedup 0.687x
28, opt runtime 6.854s, model runtime 10.847s, pg runtime 6.854s, speedup 0.632x
29, opt runtime 5.362s, model runtime 26.693s, pg runtime 5.362s, speedup 0.201x
30, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
31, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
32, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
33, opt runtime 38.718s, model runtime 104.379s, pg runtime 69.421s, speedup 0.665x
34, opt runtime 35.527s, model runtime 140.312s, pg runtime 71.730s, speedup 0.511x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.639s, model runtime 576.339s, pg runtime 462.544s, speedup 0.803x
37, opt runtime 11.120s, model runtime 278.146s, pg runtime 11.120s, speedup 0.040x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 0.912s, model runtime 26.810s, pg runtime 0.912s, speedup 0.034x
40, opt runtime 0.873s, model runtime 25.962s, pg runtime 0.873s, speedup 0.034x
========== TPCH skew
01, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
02, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
03, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 20.708s, model runtime 68.822s, pg runtime 20.708s, speedup 0.301x
06, opt runtime 11.965s, model runtime 75.033s, pg runtime 11.965s, speedup 0.159x
07, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
08, opt runtime 6.497s, model runtime 104.488s, pg runtime 12.849s, speedup 0.123x
09, opt runtime 3.612s, model runtime 11.335s, pg runtime 3.612s, speedup 0.319x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 25.045s, model runtime 118.748s, pg runtime 64.291s, speedup 0.541x
12, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
13, opt runtime 3.004s, model runtime 81.358s, pg runtime 17.818s, speedup 0.219x
14, opt runtime 2.983s, model runtime 70.838s, pg runtime 11.844s, speedup 0.167x
15, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
16, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
17, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
18, opt runtime 7.915s, model runtime 150.640s, pg runtime 29.436s, speedup 0.195x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.316s, model runtime 32.538s, pg runtime 1.352s, speedup 0.042x
21, opt runtime 23.119s, model runtime 88.588s, pg runtime 23.119s, speedup 0.261x
22, opt runtime 22.332s, model runtime 70.102s, pg runtime 22.449s, speedup 0.320x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 3.331s, pg runtime 1.433s, speedup 0.430x
26, opt runtime 1.187s, model runtime 3.327s, pg runtime 1.187s, speedup 0.357x
27, opt runtime 6.749s, model runtime 10.243s, pg runtime 6.749s, speedup 0.659x
28, opt runtime 7.213s, model runtime 11.009s, pg runtime 7.213s, speedup 0.655x
29, opt runtime 5.223s, model runtime 26.755s, pg runtime 5.223s, speedup 0.195x
30, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
31, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
32, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
33, opt runtime 39.254s, model runtime 119.051s, pg runtime 58.921s, speedup 0.495x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
36, opt runtime 14.422s, model runtime 584.445s, pg runtime 497.542s, speedup 0.851x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 23.543s, model runtime 270.128s, pg runtime 23.543s, speedup 0.087x
39, opt runtime 0.876s, model runtime 25.437s, pg runtime 0.938s, speedup 0.037x
40, opt runtime 0.967s, model runtime 28.908s, pg runtime 0.967s, speedup 0.033x
====================
JOB best validation speedup epoch: 0, train speedup 0.512, test speedup 0.228, val speedup 0.519
TPCH best validation speedup epoch: 0, train speedup 0.512, test speedup 0.543, val speedup 0.519
TPCH Skew best validation speedup epoch: 0, train speedup 0.512, test speedup 0.549, val speedup 0.519
execution cost 0:19:38.897013
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.718492, and there are 34391 training samples
in channel 9
JOB test speedup 0.20012148150948006
TPCH test speedup 0.5001982752420787
TPCH skew test speedup 0.5083035803974969
Epoch 0/50 |loss: 0.417471| train set 0.477x speedup, test set 0.508x speedup, val set 0.481x speedup, step: 1, train time 23.15 s
JOB test speedup 0.2388936718998963
TPCH test speedup 0.5012221166769111
TPCH skew test speedup 0.5108031329800211
Epoch 1/50 |loss: 0.302348| train set 0.473x speedup, test set 0.511x speedup, val set 0.476x speedup, step: 2, train time 21.87 s
JOB test speedup 0.21699437538387314
TPCH test speedup 0.5027829461627824
TPCH skew test speedup 0.5134739394133864
Epoch 2/50 |loss: 0.263394| train set 0.469x speedup, test set 0.513x speedup, val set 0.484x speedup, step: 1, train time 21.85 s
JOB test speedup 0.21716024128225864
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 3/50 |loss: 0.240476| train set 0.462x speedup, test set 0.508x speedup, val set 0.478x speedup, step: 2, train time 22.12 s
JOB test speedup 0.2236779512003687
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 4/50 |loss: 0.218878| train set 0.460x speedup, test set 0.508x speedup, val set 0.473x speedup, step: 3, train time 22.20 s
JOB test speedup 0.21685015129308163
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 5/50 |loss: 0.206501| train set 0.460x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 4, train time 22.27 s
JOB test speedup 0.22268502692298908
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 6/50 |loss: 0.196751| train set 0.462x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 5, train time 22.30 s
JOB test speedup 0.22726359075714173
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 7/50 |loss: 0.188982| train set 0.456x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 6, train time 22.36 s
JOB test speedup 0.22219467268355175
TPCH test speedup 0.4929333919343883
TPCH skew test speedup 0.5043736974575226
Epoch 8/50 |loss: 0.179125| train set 0.456x speedup, test set 0.504x speedup, val set 0.470x speedup, step: 7, train time 22.36 s
JOB test speedup 0.23352217342936166
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 9/50 |loss: 0.173873| train set 0.457x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 8, train time 22.20 s
JOB test speedup 0.233705873313276
TPCH test speedup 0.5060269817356987
TPCH skew test speedup 0.5157729141031195
Epoch 10/50 |loss: 0.171277| train set 0.469x speedup, test set 0.516x speedup, val set 0.483x speedup, step: 9, train time 22.14 s
JOB test speedup 0.22990108030692663
TPCH test speedup 0.4996253383425397
TPCH skew test speedup 0.5089160253621051
Epoch 11/50 |loss: 0.164125| train set 0.459x speedup, test set 0.509x speedup, val set 0.477x speedup, step: 10, train time 22.14 s
JOB test speedup 0.22286000497018538
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 12/50 |loss: 0.155726| train set 0.455x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 11, train time 22.20 s
JOB test speedup 0.22161891680374682
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 13/50 |loss: 0.154087| train set 0.453x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 12, train time 22.21 s
JOB test speedup 0.23059082879038645
TPCH test speedup 0.49704358764652545
TPCH skew test speedup 0.5104961011383958
Epoch 14/50 |loss: 0.150894| train set 0.456x speedup, test set 0.510x speedup, val set 0.472x speedup, step: 13, train time 22.35 s
JOB test speedup 0.21242010873329042
TPCH test speedup 0.4937918000229464
TPCH skew test speedup 0.5048668725821575
Epoch 15/50 |loss: 0.146819| train set 0.456x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 14, train time 22.24 s
JOB test speedup 0.2295767195393373
TPCH test speedup 0.4982692420870755
TPCH skew test speedup 0.5080009972570343
Epoch 16/50 |loss: 0.145622| train set 0.458x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 15, train time 22.28 s
JOB test speedup 0.24639710537597645
TPCH test speedup 0.4996253383425397
TPCH skew test speedup 0.5090443398420372
Epoch 17/50 |loss: 0.141460| train set 0.458x speedup, test set 0.509x speedup, val set 0.474x speedup, step: 16, train time 22.26 s
JOB test speedup 0.2237998157685769
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 18/50 |loss: 0.138136| train set 0.452x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 17, train time 22.21 s
JOB test speedup 0.23448157976200976
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 19/50 |loss: 0.138069| train set 0.456x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 18, train time 22.25 s
JOB test speedup 0.24764792299029917
TPCH test speedup 0.4942927265458782
TPCH skew test speedup 0.5053423981545686
Epoch 20/50 |loss: 0.130466| train set 0.454x speedup, test set 0.505x speedup, val set 0.473x speedup, step: 19, train time 22.78 s
JOB test speedup 0.21785559255084117
TPCH test speedup 0.49866690967498883
TPCH skew test speedup 0.5113661554816125
Epoch 21/50 |loss: 0.131335| train set 0.396x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 20, train time 22.40 s
JOB test speedup 0.23613584063961027
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 22/50 |loss: 0.131482| train set 0.457x speedup, test set 0.508x speedup, val set 0.474x speedup, step: 21, train time 22.31 s
JOB test speedup 0.22840280116841993
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 23/50 |loss: 0.125714| train set 0.454x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 22, train time 22.36 s
JOB test speedup 0.2225154699116412
TPCH test speedup 0.4808016738988554
TPCH skew test speedup 0.45042765571631466
Epoch 24/50 |loss: 0.124787| train set 0.461x speedup, test set 0.450x speedup, val set 0.473x speedup, step: 23, train time 22.47 s
JOB test speedup 0.22169641209904997
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.5055447614602365
Epoch 25/50 |loss: 0.126480| train set 0.390x speedup, test set 0.506x speedup, val set 0.471x speedup, step: 24, train time 22.21 s
JOB test speedup 0.2169512796755429
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 26/50 |loss: 0.122453| train set 0.453x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 25, train time 22.30 s
JOB test speedup 0.22388980381358045
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 27/50 |loss: 0.121234| train set 0.455x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 26, train time 22.24 s
JOB test speedup 0.23852023015066415
TPCH test speedup 0.47660143399009147
TPCH skew test speedup 0.44790953410922396
Epoch 28/50 |loss: 0.119203| train set 0.392x speedup, test set 0.448x speedup, val set 0.468x speedup, step: 27, train time 22.45 s
JOB test speedup 0.22015511934751794
TPCH test speedup 0.4956107688572643
TPCH skew test speedup 0.5090880024055386
Epoch 29/50 |loss: 0.119366| train set 0.454x speedup, test set 0.509x speedup, val set 0.471x speedup, step: 28, train time 22.31 s
JOB test speedup 0.21674977328002556
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 30/50 |loss: 0.117841| train set 0.456x speedup, test set 0.508x speedup, val set 0.472x speedup, step: 29, train time 22.41 s
JOB test speedup 0.22815296028978294
TPCH test speedup 0.49823655671905653
TPCH skew test speedup 0.5079335888278586
Epoch 31/50 |loss: 0.115720| train set 0.458x speedup, test set 0.508x speedup, val set 0.475x speedup, step: 30, train time 22.35 s
JOB test speedup 0.2329967354705444
TPCH test speedup 0.4936658970058442
TPCH skew test speedup 0.5048181971736246
Epoch 32/50 |loss: 0.112917| train set 0.451x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 31, train time 22.28 s
JOB test speedup 0.22749398783067465
TPCH test speedup 0.4802824236864065
TPCH skew test speedup 0.5053084561844771
Epoch 33/50 |loss: 0.110134| train set 0.456x speedup, test set 0.505x speedup, val set 0.472x speedup, step: 32, train time 22.31 s
JOB test speedup 0.2249021323292058
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 34/50 |loss: 0.111984| train set 0.453x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 33, train time 22.26 s
JOB test speedup 0.21114327274608777
TPCH test speedup 0.49430851666517694
TPCH skew test speedup 0.5082398281473115
Epoch 35/50 |loss: 0.108772| train set 0.452x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 34, train time 22.24 s
JOB test speedup 0.21714619277556524
TPCH test speedup 0.49876262240140945
TPCH skew test speedup 0.5113477841329888
Epoch 36/50 |loss: 0.110028| train set 0.459x speedup, test set 0.511x speedup, val set 0.470x speedup, step: 35, train time 22.50 s
JOB test speedup 0.2234059472032469
TPCH test speedup 0.4802824236864065
TPCH skew test speedup 0.4477240281154304
Epoch 37/50 |loss: 0.108043| train set 0.391x speedup, test set 0.448x speedup, val set 0.471x speedup, step: 36, train time 22.60 s
JOB test speedup 0.22432371613844715
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 38/50 |loss: 0.110671| train set 0.389x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 37, train time 22.37 s
JOB test speedup 0.23828312404577917
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 39/50 |loss: 0.107686| train set 0.452x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 38, train time 22.22 s
JOB test speedup 0.2206121064584352
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 40/50 |loss: 0.104031| train set 0.452x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 39, train time 22.27 s
JOB test speedup 0.21147965024321974
TPCH test speedup 0.49817371860858267
TPCH skew test speedup 0.5080191289062992
Epoch 41/50 |loss: 0.106800| train set 0.391x speedup, test set 0.508x speedup, val set 0.470x speedup, step: 40, train time 22.30 s
JOB test speedup 0.2246861998528908
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 42/50 |loss: 0.103598| train set 0.452x speedup, test set 0.505x speedup, val set 0.469x speedup, step: 41, train time 22.43 s
JOB test speedup 0.2109657819718824
TPCH test speedup 0.4799877986196139
TPCH skew test speedup 0.4500350620794962
Epoch 43/50 |loss: 0.103613| train set 0.393x speedup, test set 0.450x speedup, val set 0.470x speedup, step: 42, train time 22.34 s
JOB test speedup 0.21959736642657213
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 44/50 |loss: 0.103197| train set 0.454x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 43, train time 22.31 s
JOB test speedup 0.21613077036559955
TPCH test speedup 0.4942763488449036
TPCH skew test speedup 0.5081723563248334
Epoch 45/50 |loss: 0.100199| train set 0.390x speedup, test set 0.508x speedup, val set 0.469x speedup, step: 44, train time 22.43 s
JOB test speedup 0.21457446243815403
TPCH test speedup 0.49375969941745995
TPCH skew test speedup 0.5048002932886377
Epoch 46/50 |loss: 0.101563| train set 0.451x speedup, test set 0.505x speedup, val set 0.470x speedup, step: 45, train time 22.46 s
JOB test speedup 0.22862940157790312
TPCH test speedup 0.5020871363177676
TPCH skew test speedup 0.5142555621498366
Epoch 47/50 |loss: 0.099548| train set 0.454x speedup, test set 0.514x speedup, val set 0.471x speedup, step: 46, train time 22.24 s
JOB test speedup 0.22023673694484575
TPCH test speedup 0.4950913274867633
TPCH skew test speedup 0.5057038170374734
Epoch 48/50 |loss: 0.101320| train set 0.392x speedup, test set 0.506x speedup, val set 0.473x speedup, step: 47, train time 22.39 s
JOB test speedup 0.2129221732941667
TPCH test speedup 0.4975411292735182
TPCH skew test speedup 0.5110440309419372
Epoch 49/50 |loss: 0.102198| train set 0.390x speedup, test set 0.511x speedup, val set 0.469x speedup, step: 48, train time 22.80 s
Training per epoch cost 22.327 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 1.050s, pg runtime 0.072s, speedup 0.069x
02, opt runtime 0.183s, model runtime 15.059s, pg runtime 0.189s, speedup 0.013x
03, opt runtime 0.014s, model runtime 3.462s, pg runtime 0.014s, speedup 0.004x
04, opt runtime 0.348s, model runtime 2.639s, pg runtime 0.348s, speedup 0.132x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 14.065s, pg runtime 0.802s, speedup 0.057x
07, opt runtime 0.919s, model runtime 12.945s, pg runtime 0.942s, speedup 0.073x
08, opt runtime 0.206s, model runtime 11.702s, pg runtime 0.206s, speedup 0.018x
09, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
10, opt runtime 2.959s, model runtime 34.126s, pg runtime 2.959s, speedup 0.087x
11, opt runtime 0.294s, model runtime 9.089s, pg runtime 2.352s, speedup 0.259x
12, opt runtime 0.463s, model runtime 12.952s, pg runtime 0.557s, speedup 0.043x
13, opt runtime 1.829s, model runtime 7.190s, pg runtime 53.885s, speedup 7.495x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 0.313s, model runtime 6.719s, pg runtime 0.313s, speedup 0.047x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.599s, model runtime 15.889s, pg runtime 2.599s, speedup 0.164x
19, opt runtime 1.923s, model runtime 29.556s, pg runtime 3.540s, speedup 0.120x
20, opt runtime 0.061s, model runtime 7.531s, pg runtime 0.086s, speedup 0.011x
21, opt runtime 0.626s, model runtime 3.830s, pg runtime 2.558s, speedup 0.668x
22, opt runtime 0.136s, model runtime 25.280s, pg runtime 0.891s, speedup 0.035x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 0.189s, model runtime 17.996s, pg runtime 0.189s, speedup 0.011x
25, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
26, opt runtime 0.020s, model runtime 1.552s, pg runtime 0.020s, speedup 0.013x
27, opt runtime 0.060s, model runtime 1.196s, pg runtime 0.112s, speedup 0.094x
28, opt runtime 0.154s, model runtime 11.740s, pg runtime 0.154s, speedup 0.013x
29, opt runtime 0.136s, model runtime 1.342s, pg runtime 0.137s, speedup 0.102x
30, opt runtime 0.023s, model runtime 11.896s, pg runtime 0.023s, speedup 0.002x
31, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
32, opt runtime 1.315s, model runtime 13.260s, pg runtime 1.315s, speedup 0.099x
33, opt runtime 0.250s, model runtime 7.361s, pg runtime 0.250s, speedup 0.034x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
04, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 21.143s, model runtime 66.875s, pg runtime 21.143s, speedup 0.316x
07, opt runtime 6.460s, model runtime 122.016s, pg runtime 16.134s, speedup 0.132x
08, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
09, opt runtime 3.944s, model runtime 12.042s, pg runtime 3.944s, speedup 0.328x
10, opt runtime 3.603s, model runtime 12.640s, pg runtime 3.603s, speedup 0.285x
11, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
12, opt runtime 25.043s, model runtime 115.186s, pg runtime 73.019s, speedup 0.634x
13, opt runtime 2.995s, model runtime 96.797s, pg runtime 14.646s, speedup 0.151x
14, opt runtime 3.449s, model runtime 104.561s, pg runtime 14.824s, speedup 0.142x
15, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
16, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
17, opt runtime 7.469s, model runtime 153.196s, pg runtime 23.223s, speedup 0.152x
18, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
19, opt runtime 1.148s, model runtime 44.628s, pg runtime 1.214s, speedup 0.027x
20, opt runtime 1.353s, model runtime 45.705s, pg runtime 1.380s, speedup 0.030x
21, opt runtime 22.482s, model runtime 54.406s, pg runtime 22.482s, speedup 0.413x
22, opt runtime 6.519s, model runtime 91.130s, pg runtime 6.519s, speedup 0.072x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 5.961s, model runtime 92.708s, pg runtime 31.210s, speedup 0.337x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.404s, model runtime 30.252s, pg runtime 1.404s, speedup 0.046x
27, opt runtime 7.268s, model runtime 11.857s, pg runtime 7.268s, speedup 0.613x
28, opt runtime 6.854s, model runtime 12.460s, pg runtime 6.854s, speedup 0.550x
29, opt runtime 5.362s, model runtime 26.693s, pg runtime 5.362s, speedup 0.201x
30, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
31, opt runtime 24.079s, model runtime 608.707s, pg runtime 608.707s, speedup 1.000x
32, opt runtime 24.706s, model runtime 610.808s, pg runtime 610.808s, speedup 1.000x
33, opt runtime 38.718s, model runtime 104.379s, pg runtime 69.421s, speedup 0.665x
34, opt runtime 35.527s, model runtime 140.312s, pg runtime 71.730s, speedup 0.511x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.639s, model runtime 576.339s, pg runtime 462.544s, speedup 0.803x
37, opt runtime 11.120s, model runtime 278.146s, pg runtime 11.120s, speedup 0.040x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 0.912s, model runtime 27.097s, pg runtime 0.912s, speedup 0.034x
40, opt runtime 0.873s, model runtime 26.122s, pg runtime 0.873s, speedup 0.033x
========== TPCH skew
01, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
02, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
03, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 20.708s, model runtime 74.186s, pg runtime 20.708s, speedup 0.279x
06, opt runtime 11.965s, model runtime 62.207s, pg runtime 11.965s, speedup 0.192x
07, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
08, opt runtime 6.497s, model runtime 104.488s, pg runtime 12.849s, speedup 0.123x
09, opt runtime 3.612s, model runtime 11.335s, pg runtime 3.612s, speedup 0.319x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 25.045s, model runtime 118.748s, pg runtime 64.291s, speedup 0.541x
12, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 2.983s, model runtime 80.868s, pg runtime 11.844s, speedup 0.146x
15, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
16, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
17, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
18, opt runtime 7.915s, model runtime 150.640s, pg runtime 29.436s, speedup 0.195x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.316s, model runtime 32.538s, pg runtime 1.352s, speedup 0.042x
21, opt runtime 23.119s, model runtime 88.588s, pg runtime 23.119s, speedup 0.261x
22, opt runtime 22.332s, model runtime 70.102s, pg runtime 22.449s, speedup 0.320x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.187s, model runtime 13.453s, pg runtime 1.187s, speedup 0.088x
27, opt runtime 6.749s, model runtime 12.585s, pg runtime 6.749s, speedup 0.536x
28, opt runtime 7.213s, model runtime 11.999s, pg runtime 7.213s, speedup 0.601x
29, opt runtime 5.223s, model runtime 26.755s, pg runtime 5.223s, speedup 0.195x
30, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
31, opt runtime 24.136s, model runtime 609.432s, pg runtime 609.432s, speedup 1.000x
32, opt runtime 24.451s, model runtime 628.615s, pg runtime 628.615s, speedup 1.000x
33, opt runtime 39.254s, model runtime 119.051s, pg runtime 58.921s, speedup 0.495x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
36, opt runtime 14.422s, model runtime 584.445s, pg runtime 497.542s, speedup 0.851x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 23.543s, model runtime 270.128s, pg runtime 23.543s, speedup 0.087x
39, opt runtime 0.876s, model runtime 26.733s, pg runtime 0.938s, speedup 0.035x
40, opt runtime 0.967s, model runtime 28.505s, pg runtime 0.967s, speedup 0.034x
====================
JOB best validation speedup epoch: 2, train speedup 0.469, test speedup 0.217, val speedup 0.484
TPCH best validation speedup epoch: 2, train speedup 0.469, test speedup 0.503, val speedup 0.484
TPCH Skew best validation speedup epoch: 2, train speedup 0.469, test speedup 0.513, val speedup 0.484
execution cost 0:19:43.131140
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.202351, and there are 24631 training samples
in channel 9
JOB test speedup 0.9805481199480234
TPCH test speedup 4.819807273054428
TPCH skew test speedup 4.55037022316781
Epoch 0/50 |loss: 0.431297| train set 4.448x speedup, test set 4.550x speedup, val set 4.493x speedup, step: 1, train time 17.19 s
JOB test speedup 1.0350630905697145
TPCH test speedup 5.212735729597021
TPCH skew test speedup 4.921306797987568
Epoch 1/50 |loss: 0.315873| train set 4.821x speedup, test set 4.921x speedup, val set 4.791x speedup, step: 1, train time 15.81 s
JOB test speedup 2.2867779642339356
TPCH test speedup 5.2532471228807145
TPCH skew test speedup 5.038947183588572
Epoch 2/50 |loss: 0.280764| train set 4.925x speedup, test set 5.039x speedup, val set 4.831x speedup, step: 1, train time 15.63 s
JOB test speedup 2.9909769159569746
TPCH test speedup 5.441258687413136
TPCH skew test speedup 5.106759204309385
Epoch 3/50 |loss: 0.258190| train set 5.092x speedup, test set 5.107x speedup, val set 5.054x speedup, step: 1, train time 16.90 s
JOB test speedup 2.518983215694638
TPCH test speedup 5.264322429679196
TPCH skew test speedup 4.908336104170332
Epoch 4/50 |loss: 0.244402| train set 5.139x speedup, test set 4.908x speedup, val set 5.132x speedup, step: 1, train time 16.64 s
JOB test speedup 3.280229680743609
TPCH test speedup 5.498515443175084
TPCH skew test speedup 5.1878635249693605
Epoch 5/50 |loss: 0.229564| train set 5.151x speedup, test set 5.188x speedup, val set 5.052x speedup, step: 2, train time 16.41 s
JOB test speedup 2.837904064160736
TPCH test speedup 5.237983256332851
TPCH skew test speedup 5.001635620206129
Epoch 6/50 |loss: 0.220001| train set 4.976x speedup, test set 5.002x speedup, val set 4.971x speedup, step: 3, train time 16.38 s
JOB test speedup 3.1942488523003543
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 7/50 |loss: 0.206254| train set 5.201x speedup, test set 5.178x speedup, val set 5.082x speedup, step: 4, train time 16.17 s
JOB test speedup 3.000943540406387
TPCH test speedup 5.474278887678419
TPCH skew test speedup 5.1357098611817875
Epoch 8/50 |loss: 0.205076| train set 5.118x speedup, test set 5.136x speedup, val set 5.030x speedup, step: 5, train time 16.01 s
JOB test speedup 0.8576647861823898
TPCH test speedup 5.210469529612728
TPCH skew test speedup 5.0455119080399164
Epoch 9/50 |loss: 0.195890| train set 4.936x speedup, test set 5.046x speedup, val set 4.918x speedup, step: 6, train time 15.92 s
JOB test speedup 3.3744153898463707
TPCH test speedup 5.2694900481996685
TPCH skew test speedup 5.030799182280519
Epoch 10/50 |loss: 0.191700| train set 5.048x speedup, test set 5.031x speedup, val set 4.949x speedup, step: 7, train time 15.81 s
JOB test speedup 3.2161606196068706
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 11/50 |loss: 0.186065| train set 5.205x speedup, test set 5.177x speedup, val set 5.088x speedup, step: 8, train time 15.81 s
JOB test speedup 3.431815206427968
TPCH test speedup 5.447623981563553
TPCH skew test speedup 4.912010935357573
Epoch 12/50 |loss: 0.180881| train set 5.064x speedup, test set 4.912x speedup, val set 5.006x speedup, step: 9, train time 15.77 s
JOB test speedup 3.448055337319422
TPCH test speedup 5.408547010220007
TPCH skew test speedup 5.091206193948426
Epoch 13/50 |loss: 0.178192| train set 5.188x speedup, test set 5.091x speedup, val set 5.084x speedup, step: 10, train time 15.78 s
JOB test speedup 2.9411960573337774
TPCH test speedup 5.502028161061637
TPCH skew test speedup 5.179498882429487
Epoch 14/50 |loss: 0.173385| train set 5.179x speedup, test set 5.179x speedup, val set 5.059x speedup, step: 11, train time 15.87 s
JOB test speedup 3.3087463764258973
TPCH test speedup 5.4093498607210995
TPCH skew test speedup 5.091847538162835
Epoch 15/50 |loss: 0.170908| train set 5.184x speedup, test set 5.092x speedup, val set 5.045x speedup, step: 12, train time 15.59 s
JOB test speedup 3.189914443738878
TPCH test speedup 4.65820818159016
TPCH skew test speedup 4.540853460443169
Epoch 16/50 |loss: 0.165672| train set 5.120x speedup, test set 4.541x speedup, val set 5.066x speedup, step: 13, train time 15.85 s
JOB test speedup 3.383937874619751
TPCH test speedup 5.48527047889999
TPCH skew test speedup 5.158513551791211
Epoch 17/50 |loss: 0.162322| train set 5.160x speedup, test set 5.159x speedup, val set 5.123x speedup, step: 14, train time 15.76 s
JOB test speedup 3.3191165584589895
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 18/50 |loss: 0.161832| train set 5.203x speedup, test set 5.177x speedup, val set 5.123x speedup, step: 15, train time 15.82 s
JOB test speedup 3.37948400711796
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 19/50 |loss: 0.161135| train set 5.205x speedup, test set 5.171x speedup, val set 5.126x speedup, step: 16, train time 15.85 s
JOB test speedup 3.4036213306491643
TPCH test speedup 5.4093498607210995
TPCH skew test speedup 5.091847538162835
Epoch 20/50 |loss: 0.157983| train set 5.200x speedup, test set 5.092x speedup, val set 5.119x speedup, step: 17, train time 15.95 s
JOB test speedup 3.3450552464678838
TPCH test speedup 5.280270890114258
TPCH skew test speedup 5.0980545118490905
Epoch 21/50 |loss: 0.156203| train set 4.995x speedup, test set 5.098x speedup, val set 4.880x speedup, step: 18, train time 15.99 s
JOB test speedup 3.3324762325445434
TPCH test speedup 5.175877933707758
TPCH skew test speedup 5.0629659276150285
Epoch 22/50 |loss: 0.153640| train set 5.190x speedup, test set 5.063x speedup, val set 5.116x speedup, step: 19, train time 15.91 s
JOB test speedup 3.3475120068734254
TPCH test speedup 5.356887403257238
TPCH skew test speedup 5.08984095698145
Epoch 23/50 |loss: 0.150666| train set 5.177x speedup, test set 5.090x speedup, val set 5.101x speedup, step: 20, train time 15.96 s
JOB test speedup 3.3943442750269357
TPCH test speedup 5.4096641205800795
TPCH skew test speedup 5.09193582823723
Epoch 24/50 |loss: 0.146939| train set 5.204x speedup, test set 5.092x speedup, val set 5.118x speedup, step: 21, train time 15.95 s
JOB test speedup 2.9081114170936773
TPCH test speedup 5.52063464352243
TPCH skew test speedup 5.175597142572594
Epoch 25/50 |loss: 0.145076| train set 5.202x speedup, test set 5.176x speedup, val set 5.098x speedup, step: 22, train time 16.09 s
JOB test speedup 3.3840147488220325
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 26/50 |loss: 0.147887| train set 5.194x speedup, test set 5.177x speedup, val set 5.098x speedup, step: 23, train time 16.02 s
JOB test speedup 3.097277229348346
TPCH test speedup 5.393060155761904
TPCH skew test speedup 5.0967490778019355
Epoch 27/50 |loss: 0.143768| train set 5.196x speedup, test set 5.097x speedup, val set 5.139x speedup, step: 1, train time 16.09 s
JOB test speedup 3.5141968183295282
TPCH test speedup 5.485096913682225
TPCH skew test speedup 5.19646912740422
Epoch 28/50 |loss: 0.141313| train set 5.171x speedup, test set 5.196x speedup, val set 5.078x speedup, step: 2, train time 16.01 s
JOB test speedup 2.8837667802084668
TPCH test speedup 5.516670152503286
TPCH skew test speedup 5.171537310529677
Epoch 29/50 |loss: 0.140868| train set 5.202x speedup, test set 5.172x speedup, val set 5.088x speedup, step: 3, train time 16.15 s
JOB test speedup 3.054291459064681
TPCH test speedup 5.493757820607757
TPCH skew test speedup 5.155300780061089
Epoch 30/50 |loss: 0.139877| train set 5.148x speedup, test set 5.155x speedup, val set 5.098x speedup, step: 4, train time 16.05 s
JOB test speedup 3.366266415149097
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 31/50 |loss: 0.139294| train set 5.208x speedup, test set 5.171x speedup, val set 5.116x speedup, step: 5, train time 16.02 s
JOB test speedup 3.2407650164445885
TPCH test speedup 5.385799337635358
TPCH skew test speedup 5.070683624317231
Epoch 32/50 |loss: 0.137129| train set 5.197x speedup, test set 5.071x speedup, val set 5.080x speedup, step: 6, train time 16.16 s
JOB test speedup 3.327886657312784
TPCH test speedup 5.351754245384311
TPCH skew test speedup 5.061313052391351
Epoch 33/50 |loss: 0.136402| train set 5.151x speedup, test set 5.061x speedup, val set 5.020x speedup, step: 7, train time 16.13 s
JOB test speedup 2.57459753900633
TPCH test speedup 5.52063464352243
TPCH skew test speedup 5.175597142572594
Epoch 34/50 |loss: 0.135424| train set 5.213x speedup, test set 5.176x speedup, val set 5.095x speedup, step: 8, train time 16.06 s
JOB test speedup 2.988483570373072
TPCH test speedup 5.504420182231673
TPCH skew test speedup 5.193208918487915
Epoch 35/50 |loss: 0.131937| train set 5.147x speedup, test set 5.193x speedup, val set 5.062x speedup, step: 9, train time 16.22 s
JOB test speedup 3.501535120104602
TPCH test speedup 5.408861176798909
TPCH skew test speedup 5.091294461782857
Epoch 36/50 |loss: 0.130184| train set 5.200x speedup, test set 5.091x speedup, val set 5.083x speedup, step: 10, train time 15.97 s
JOB test speedup 3.186557337236695
TPCH test speedup 5.219239830706203
TPCH skew test speedup 4.982179373856483
Epoch 37/50 |loss: 0.131538| train set 5.133x speedup, test set 4.982x speedup, val set 5.050x speedup, step: 11, train time 15.92 s
JOB test speedup 3.1647447678525276
TPCH test speedup 5.212686456852732
TPCH skew test speedup 4.925972654175458
Epoch 38/50 |loss: 0.128670| train set 5.154x speedup, test set 4.926x speedup, val set 4.819x speedup, step: 12, train time 15.75 s
JOB test speedup 3.16087076364187
TPCH test speedup 5.178508172278481
TPCH skew test speedup 4.9084191993510995
Epoch 39/50 |loss: 0.130386| train set 5.182x speedup, test set 4.908x speedup, val set 4.800x speedup, step: 13, train time 16.08 s
JOB test speedup 2.9885361428446964
TPCH test speedup 5.467642542408799
TPCH skew test speedup 5.174848699016144
Epoch 40/50 |loss: 0.130701| train set 5.207x speedup, test set 5.175x speedup, val set 5.083x speedup, step: 14, train time 16.03 s
JOB test speedup 2.769758906930076
TPCH test speedup 5.469262784765139
TPCH skew test speedup 5.1760090573179065
Epoch 41/50 |loss: 0.126919| train set 5.140x speedup, test set 5.176x speedup, val set 5.064x speedup, step: 15, train time 16.00 s
JOB test speedup 3.393893810983296
TPCH test speedup 5.056248431666756
TPCH skew test speedup 4.7946499349004
Epoch 42/50 |loss: 0.122497| train set 4.986x speedup, test set 4.795x speedup, val set 5.020x speedup, step: 16, train time 15.91 s
JOB test speedup 2.9676254982894976
TPCH test speedup 5.498515443175084
TPCH skew test speedup 5.1878635249693605
Epoch 43/50 |loss: 0.124780| train set 5.180x speedup, test set 5.188x speedup, val set 5.041x speedup, step: 17, train time 15.82 s
JOB test speedup 3.4418302869674866
TPCH test speedup 5.453327425209148
TPCH skew test speedup 5.120832924583672
Epoch 44/50 |loss: 0.127575| train set 5.163x speedup, test set 5.121x speedup, val set 5.026x speedup, step: 18, train time 16.32 s
JOB test speedup 3.195898577557234
TPCH test speedup 5.411739294033793
TPCH skew test speedup 5.093612757114578
Epoch 45/50 |loss: 0.123605| train set 5.200x speedup, test set 5.094x speedup, val set 5.110x speedup, step: 19, train time 16.18 s
JOB test speedup 3.274427661792444
TPCH test speedup 5.1119243416961355
TPCH skew test speedup 4.848884010575173
Epoch 46/50 |loss: 0.123175| train set 5.198x speedup, test set 4.849x speedup, val set 4.845x speedup, step: 20, train time 15.99 s
JOB test speedup 2.9785335955895684
TPCH test speedup 5.209724625055552
TPCH skew test speedup 4.923721858030951
Epoch 47/50 |loss: 0.123417| train set 5.166x speedup, test set 4.924x speedup, val set 4.764x speedup, step: 21, train time 16.18 s
JOB test speedup 1.8192964285927804
TPCH test speedup 5.109792275722065
TPCH skew test speedup 4.847284314221809
Epoch 48/50 |loss: 0.119742| train set 5.201x speedup, test set 4.847x speedup, val set 5.082x speedup, step: 22, train time 16.07 s
JOB test speedup 3.4030843717878376
TPCH test speedup 5.5011975665562955
TPCH skew test speedup 5.1788352693391
Epoch 49/50 |loss: 0.120796| train set 5.211x speedup, test set 5.179x speedup, val set 5.085x speedup, step: 23, train time 16.06 s
Training per epoch cost 16.040 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.028x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 5.648s, pg runtime 10.605s, speedup 1.878x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.457s, pg runtime 0.354s, speedup 0.774x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.079s, pg runtime 0.086s, speedup 1.091x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.136s, pg runtime 0.891s, speedup 6.543x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 4.213s, pg runtime 14.646s, speedup 3.477x
14, opt runtime 3.449s, model runtime 4.406s, pg runtime 14.824s, speedup 3.365x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
18, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.353s, pg runtime 1.380s, speedup 1.021x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
14, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 7.915s, model runtime 17.289s, pg runtime 29.436s, speedup 1.703x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.316s, model runtime 1.316s, pg runtime 1.352s, speedup 1.027x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 27, train speedup 5.196, test speedup 3.097, val speedup 5.139
TPCH best validation speedup epoch: 27, train speedup 5.196, test speedup 5.393, val speedup 5.139
TPCH Skew best validation speedup epoch: 27, train speedup 5.196, test speedup 5.097, val speedup 5.139
execution cost 0:14:17.928066
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.238115, and there are 24631 training samples
in channel 9
JOB test speedup 1.0405943499578567
TPCH test speedup 5.09525607795219
TPCH skew test speedup 5.0086080267476145
Epoch 0/50 |loss: 0.433404| train set 4.637x speedup, test set 5.009x speedup, val set 4.816x speedup, step: 1, train time 17.13 s
JOB test speedup 1.0389685479033317
TPCH test speedup 5.267355761853377
TPCH skew test speedup 4.9444773051655675
Epoch 1/50 |loss: 0.316855| train set 4.859x speedup, test set 4.944x speedup, val set 4.808x speedup, step: 2, train time 15.41 s
JOB test speedup 0.8108037289916716
TPCH test speedup 5.186149626715398
TPCH skew test speedup 4.983895415573978
Epoch 2/50 |loss: 0.281865| train set 4.867x speedup, test set 4.984x speedup, val set 4.882x speedup, step: 1, train time 15.57 s
JOB test speedup 2.191960616624249
TPCH test speedup 5.4852656404240445
TPCH skew test speedup 5.178084167992863
Epoch 3/50 |loss: 0.256681| train set 5.152x speedup, test set 5.178x speedup, val set 5.120x speedup, step: 1, train time 15.56 s
JOB test speedup 2.5637473078695336
TPCH test speedup 5.519911763008185
TPCH skew test speedup 5.17625992600577
Epoch 4/50 |loss: 0.240066| train set 5.018x speedup, test set 5.176x speedup, val set 4.949x speedup, step: 2, train time 15.60 s
JOB test speedup 3.371548549846395
TPCH test speedup 5.516193355522769
TPCH skew test speedup 5.173303150158553
Epoch 5/50 |loss: 0.226283| train set 5.162x speedup, test set 5.173x speedup, val set 5.085x speedup, step: 3, train time 15.59 s
JOB test speedup 0.8565651039756271
TPCH test speedup 5.237983256332851
TPCH skew test speedup 5.001635620206129
Epoch 6/50 |loss: 0.216356| train set 4.988x speedup, test set 5.002x speedup, val set 4.865x speedup, step: 4, train time 15.59 s
JOB test speedup 0.8858890591968636
TPCH test speedup 5.5229730738134535
TPCH skew test speedup 5.179282122959363
Epoch 7/50 |loss: 0.206687| train set 5.192x speedup, test set 5.179x speedup, val set 5.121x speedup, step: 1, train time 15.48 s
JOB test speedup 3.32633138468567
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 8/50 |loss: 0.202390| train set 5.192x speedup, test set 5.172x speedup, val set 5.085x speedup, step: 2, train time 15.77 s
JOB test speedup 3.5111312228481593
TPCH test speedup 5.473957075966744
TPCH skew test speedup 5.135620046582709
Epoch 9/50 |loss: 0.193938| train set 5.121x speedup, test set 5.136x speedup, val set 5.027x speedup, step: 3, train time 15.59 s
JOB test speedup 3.366920658174736
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 10/50 |loss: 0.189382| train set 5.203x speedup, test set 5.172x speedup, val set 5.117x speedup, step: 4, train time 15.58 s
JOB test speedup 3.113449535247101
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 11/50 |loss: 0.185031| train set 5.184x speedup, test set 5.178x speedup, val set 5.228x speedup, step: 1, train time 15.69 s
JOB test speedup 0.8950056011425801
TPCH test speedup 5.168007026744027
TPCH skew test speedup 4.951634321078813
Epoch 12/50 |loss: 0.180738| train set 4.870x speedup, test set 4.952x speedup, val set 4.805x speedup, step: 2, train time 15.76 s
JOB test speedup 3.5094923512661893
TPCH test speedup 5.218924372694522
TPCH skew test speedup 4.885070028281634
Epoch 13/50 |loss: 0.176095| train set 5.045x speedup, test set 4.885x speedup, val set 4.920x speedup, step: 3, train time 15.86 s
JOB test speedup 3.0217164381406185
TPCH test speedup 5.520484428002294
TPCH skew test speedup 5.177457036942958
Epoch 14/50 |loss: 0.172365| train set 5.203x speedup, test set 5.177x speedup, val set 5.090x speedup, step: 4, train time 15.87 s
JOB test speedup 3.4668144857118754
TPCH test speedup 5.4096641205800795
TPCH skew test speedup 5.09193582823723
Epoch 15/50 |loss: 0.169530| train set 5.179x speedup, test set 5.092x speedup, val set 5.042x speedup, step: 5, train time 15.88 s
JOB test speedup 3.2804550659590905
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 16/50 |loss: 0.164855| train set 5.199x speedup, test set 5.172x speedup, val set 5.035x speedup, step: 6, train time 15.86 s
JOB test speedup 3.013231568164175
TPCH test speedup 5.4423995985672295
TPCH skew test speedup 5.124038244255127
Epoch 17/50 |loss: 0.162452| train set 5.194x speedup, test set 5.124x speedup, val set 5.097x speedup, step: 7, train time 15.76 s
JOB test speedup 3.4147303887049847
TPCH test speedup 5.479809159326056
TPCH skew test speedup 5.140858268119466
Epoch 18/50 |loss: 0.158968| train set 5.157x speedup, test set 5.141x speedup, val set 5.076x speedup, step: 8, train time 15.81 s
JOB test speedup 3.3520648872313794
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 19/50 |loss: 0.158462| train set 5.207x speedup, test set 5.171x speedup, val set 5.116x speedup, step: 9, train time 15.82 s
JOB test speedup 3.4086438571892907
TPCH test speedup 5.4093498607210995
TPCH skew test speedup 5.091847538162835
Epoch 20/50 |loss: 0.157168| train set 5.199x speedup, test set 5.092x speedup, val set 5.118x speedup, step: 10, train time 15.89 s
JOB test speedup 3.5181080174126618
TPCH test speedup 5.477359252110192
TPCH skew test speedup 5.139060156706211
Epoch 21/50 |loss: 0.155404| train set 5.157x speedup, test set 5.139x speedup, val set 5.064x speedup, step: 11, train time 15.97 s
JOB test speedup 3.680006015821861
TPCH test speedup 5.52063464352243
TPCH skew test speedup 5.175597142572594
Epoch 22/50 |loss: 0.151012| train set 5.188x speedup, test set 5.176x speedup, val set 5.096x speedup, step: 12, train time 15.82 s
JOB test speedup 3.6320755609735427
TPCH test speedup 5.390610450939109
TPCH skew test speedup 5.106471992303872
Epoch 23/50 |loss: 0.150529| train set 5.174x speedup, test set 5.106x speedup, val set 5.109x speedup, step: 13, train time 15.90 s
JOB test speedup 3.6736558803879396
TPCH test speedup 5.4096641205800795
TPCH skew test speedup 5.09193582823723
Epoch 24/50 |loss: 0.146224| train set 5.202x speedup, test set 5.092x speedup, val set 5.079x speedup, step: 14, train time 16.08 s
JOB test speedup 2.9879676570261773
TPCH test speedup 5.477359252110192
TPCH skew test speedup 5.139060156706211
Epoch 25/50 |loss: 0.144719| train set 5.187x speedup, test set 5.139x speedup, val set 5.001x speedup, step: 15, train time 16.05 s
JOB test speedup 3.4141646559174617
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 26/50 |loss: 0.143152| train set 5.196x speedup, test set 5.178x speedup, val set 5.095x speedup, step: 16, train time 16.05 s
JOB test speedup 2.688137481317825
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 27/50 |loss: 0.142897| train set 5.210x speedup, test set 5.176x speedup, val set 5.129x speedup, step: 17, train time 15.86 s
JOB test speedup 3.6738760552526797
TPCH test speedup 5.501948224422553
TPCH skew test speedup 5.191465781223652
Epoch 28/50 |loss: 0.141174| train set 5.172x speedup, test set 5.191x speedup, val set 5.032x speedup, step: 18, train time 15.95 s
JOB test speedup 3.629575937632239
TPCH test speedup 5.516670152503286
TPCH skew test speedup 5.171537310529677
Epoch 29/50 |loss: 0.138231| train set 5.189x speedup, test set 5.172x speedup, val set 5.087x speedup, step: 19, train time 15.79 s
JOB test speedup 3.656097075255827
TPCH test speedup 5.516193355522769
TPCH skew test speedup 5.173303150158553
Epoch 30/50 |loss: 0.138011| train set 5.204x speedup, test set 5.173x speedup, val set 5.129x speedup, step: 20, train time 15.86 s
JOB test speedup 2.993652566278699
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 31/50 |loss: 0.139629| train set 5.212x speedup, test set 5.171x speedup, val set 5.134x speedup, step: 21, train time 15.77 s
JOB test speedup 3.540777581153524
TPCH test speedup 5.410935734153944
TPCH skew test speedup 5.093059297212875
Epoch 32/50 |loss: 0.136717| train set 5.201x speedup, test set 5.093x speedup, val set 5.113x speedup, step: 22, train time 15.88 s
JOB test speedup 3.204649491790667
TPCH test speedup 5.454846725782058
TPCH skew test speedup 5.138808327573309
Epoch 33/50 |loss: 0.135109| train set 5.154x speedup, test set 5.139x speedup, val set 5.068x speedup, step: 23, train time 15.77 s
JOB test speedup 2.988192393837663
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 34/50 |loss: 0.135357| train set 5.212x speedup, test set 5.176x speedup, val set 5.092x speedup, step: 24, train time 15.85 s
JOB test speedup 3.7091588132297604
TPCH test speedup 5.505251750224387
TPCH skew test speedup 5.193876220590477
Epoch 35/50 |loss: 0.131016| train set 5.151x speedup, test set 5.194x speedup, val set 5.034x speedup, step: 25, train time 15.86 s
JOB test speedup 3.6578686463666386
TPCH test speedup 5.404741814711084
TPCH skew test speedup 5.087277627840544
Epoch 36/50 |loss: 0.130800| train set 5.201x speedup, test set 5.087x speedup, val set 5.082x speedup, step: 26, train time 15.74 s
JOB test speedup 3.566057662235811
TPCH test speedup 5.372868693451311
TPCH skew test speedup 5.110270166832252
Epoch 37/50 |loss: 0.131275| train set 5.129x speedup, test set 5.110x speedup, val set 5.050x speedup, step: 27, train time 15.79 s
JOB test speedup 2.412835923579301
TPCH test speedup 5.411739294033793
TPCH skew test speedup 5.093612757114578
Epoch 38/50 |loss: 0.128589| train set 5.140x speedup, test set 5.094x speedup, val set 5.046x speedup, step: 28, train time 15.89 s
JOB test speedup 2.9860915594707804
TPCH test speedup 5.507395026648698
TPCH skew test speedup 5.157200844176925
Epoch 39/50 |loss: 0.130697| train set 5.204x speedup, test set 5.157x speedup, val set 5.110x speedup, step: 29, train time 15.80 s
JOB test speedup 3.5007921699067905
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 40/50 |loss: 0.126068| train set 5.207x speedup, test set 5.176x speedup, val set 5.116x speedup, step: 30, train time 16.00 s
JOB test speedup 2.8783276764095835
TPCH test speedup 5.424383203744671
TPCH skew test speedup 5.137669137985282
Epoch 41/50 |loss: 0.125765| train set 5.137x speedup, test set 5.138x speedup, val set 5.063x speedup, step: 31, train time 15.87 s
JOB test speedup 3.6224368898383617
TPCH test speedup 5.458187105239296
TPCH skew test speedup 5.135620046582709
Epoch 42/50 |loss: 0.122708| train set 4.995x speedup, test set 5.136x speedup, val set 4.846x speedup, step: 32, train time 15.77 s
JOB test speedup 0.8518005398104167
TPCH test speedup 5.498515443175084
TPCH skew test speedup 5.1878635249693605
Epoch 43/50 |loss: 0.123347| train set 5.191x speedup, test set 5.188x speedup, val set 5.087x speedup, step: 33, train time 15.93 s
JOB test speedup 2.953786579503047
TPCH test speedup 5.445778150501971
TPCH skew test speedup 5.124652500355726
Epoch 44/50 |loss: 0.125883| train set 5.160x speedup, test set 5.125x speedup, val set 5.077x speedup, step: 34, train time 16.45 s
JOB test speedup 3.30713868044479
TPCH test speedup 5.411739294033793
TPCH skew test speedup 5.093701108416132
Epoch 45/50 |loss: 0.122984| train set 5.191x speedup, test set 5.094x speedup, val set 5.111x speedup, step: 35, train time 16.16 s
JOB test speedup 2.8959059140948713
TPCH test speedup 5.411739294033793
TPCH skew test speedup 5.093612757114578
Epoch 46/50 |loss: 0.122506| train set 5.196x speedup, test set 5.094x speedup, val set 5.108x speedup, step: 36, train time 15.84 s
JOB test speedup 2.964406376320553
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 47/50 |loss: 0.121956| train set 5.216x speedup, test set 5.176x speedup, val set 5.091x speedup, step: 37, train time 15.69 s
JOB test speedup 3.673228102053633
TPCH test speedup 5.3051404118005205
TPCH skew test speedup 4.9656906042215665
Epoch 48/50 |loss: 0.118642| train set 5.211x speedup, test set 4.966x speedup, val set 5.053x speedup, step: 38, train time 16.02 s
JOB test speedup 3.623822530428643
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 49/50 |loss: 0.119821| train set 5.207x speedup, test set 5.177x speedup, val set 5.097x speedup, step: 39, train time 15.88 s
Training per epoch cost 15.848 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 1.993s, pg runtime 0.348s, speedup 0.174x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 1.678s, pg runtime 0.802s, speedup 0.478x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.457s, pg runtime 0.354s, speedup 0.774x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 2.365s, pg runtime 3.540s, speedup 1.497x
20, opt runtime 0.061s, model runtime 0.084s, pg runtime 0.086s, speedup 1.022x
21, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
22, opt runtime 0.136s, model runtime 0.136s, pg runtime 0.891s, speedup 6.543x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.080s, pg runtime 0.112s, speedup 1.403x
28, opt runtime 0.154s, model runtime 0.476s, pg runtime 0.154s, speedup 0.324x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.618s, pg runtime 1.315s, speedup 0.813x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.353s, pg runtime 1.380s, speedup 1.021x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.316s, model runtime 1.316s, pg runtime 1.352s, speedup 1.027x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 11, train speedup 5.184, test speedup 3.113, val speedup 5.228
TPCH best validation speedup epoch: 11, train speedup 5.184, test speedup 5.524, val speedup 5.228
TPCH Skew best validation speedup epoch: 11, train speedup 5.184, test speedup 5.178, val speedup 5.228
execution cost 0:14:06.837443
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.251599, and there are 24631 training samples
in channel 9
JOB test speedup 1.0062522674190044
TPCH test speedup 4.8901524988779
TPCH skew test speedup 4.744084878808119
Epoch 0/50 |loss: 0.429690| train set 4.481x speedup, test set 4.744x speedup, val set 4.501x speedup, step: 1, train time 17.44 s
JOB test speedup 1.0192317518508274
TPCH test speedup 4.86970799049817
TPCH skew test speedup 4.739469138251942
Epoch 1/50 |loss: 0.314151| train set 4.897x speedup, test set 4.739x speedup, val set 4.523x speedup, step: 1, train time 15.71 s
JOB test speedup 0.550183917079096
TPCH test speedup 5.186149626715398
TPCH skew test speedup 4.983895415573978
Epoch 2/50 |loss: 0.279976| train set 4.856x speedup, test set 4.984x speedup, val set 4.775x speedup, step: 1, train time 15.86 s
JOB test speedup 2.7343324000599885
TPCH test speedup 5.311899227081674
TPCH skew test speedup 5.025912453864005
Epoch 3/50 |loss: 0.256878| train set 5.105x speedup, test set 5.026x speedup, val set 5.042x speedup, step: 1, train time 15.76 s
JOB test speedup 3.2989661253738665
TPCH test speedup 5.253219676797285
TPCH skew test speedup 5.046334273852656
Epoch 4/50 |loss: 0.240404| train set 4.989x speedup, test set 5.046x speedup, val set 5.035x speedup, step: 2, train time 15.66 s
JOB test speedup 3.2003122598082134
TPCH test speedup 5.4345324080123145
TPCH skew test speedup 5.1027530256297595
Epoch 5/50 |loss: 0.227507| train set 5.112x speedup, test set 5.103x speedup, val set 5.044x speedup, step: 1, train time 15.66 s
JOB test speedup 3.3037169406220217
TPCH test speedup 5.237983256332851
TPCH skew test speedup 5.001635620206129
Epoch 6/50 |loss: 0.217346| train set 4.970x speedup, test set 5.002x speedup, val set 4.832x speedup, step: 2, train time 15.61 s
JOB test speedup 3.4152616293621656
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 7/50 |loss: 0.209324| train set 5.145x speedup, test set 5.176x speedup, val set 5.037x speedup, step: 3, train time 15.71 s
JOB test speedup 3.375274330754176
TPCH test speedup 5.473134934514937
TPCH skew test speedup 5.13496762893637
Epoch 8/50 |loss: 0.203864| train set 5.128x speedup, test set 5.135x speedup, val set 4.996x speedup, step: 4, train time 15.68 s
JOB test speedup 0.8523253784561264
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 9/50 |loss: 0.194797| train set 4.866x speedup, test set 5.172x speedup, val set 5.049x speedup, step: 1, train time 15.88 s
JOB test speedup 3.6348319448392146
TPCH test speedup 5.2694900481996685
TPCH skew test speedup 5.030799182280519
Epoch 10/50 |loss: 0.190638| train set 5.025x speedup, test set 5.031x speedup, val set 5.000x speedup, step: 2, train time 15.81 s
JOB test speedup 3.290523883341065
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178175474018336
Epoch 11/50 |loss: 0.186078| train set 5.185x speedup, test set 5.178x speedup, val set 5.121x speedup, step: 1, train time 15.91 s
JOB test speedup 3.606954262256132
TPCH test speedup 5.2694900481996685
TPCH skew test speedup 5.030799182280519
Epoch 12/50 |loss: 0.181301| train set 5.012x speedup, test set 5.031x speedup, val set 5.024x speedup, step: 2, train time 15.80 s
JOB test speedup 3.644445188363549
TPCH test speedup 5.323214464835423
TPCH skew test speedup 4.962713458160795
Epoch 13/50 |loss: 0.179668| train set 5.037x speedup, test set 4.963x speedup, val set 4.922x speedup, step: 3, train time 15.92 s
JOB test speedup 3.563320611045278
TPCH test speedup 5.510567480566903
TPCH skew test speedup 5.17625992600577
Epoch 14/50 |loss: 0.175366| train set 5.196x speedup, test set 5.176x speedup, val set 5.133x speedup, step: 1, train time 16.02 s
JOB test speedup 3.39706179180235
TPCH test speedup 5.4093498607210995
TPCH skew test speedup 5.091847538162835
Epoch 15/50 |loss: 0.172628| train set 5.174x speedup, test set 5.092x speedup, val set 5.106x speedup, step: 2, train time 15.92 s
JOB test speedup 3.1744666942717177
TPCH test speedup 5.473957075966744
TPCH skew test speedup 5.135620046582709
Epoch 16/50 |loss: 0.167809| train set 5.189x speedup, test set 5.136x speedup, val set 5.058x speedup, step: 3, train time 16.12 s
JOB test speedup 3.6386607770550934
TPCH test speedup 5.45822518111476
TPCH skew test speedup 5.142252711813758
Epoch 17/50 |loss: 0.163616| train set 5.152x speedup, test set 5.142x speedup, val set 5.076x speedup, step: 4, train time 16.00 s
JOB test speedup 3.3143455905994945
TPCH test speedup 5.46221625100093
TPCH skew test speedup 5.15708161506438
Epoch 18/50 |loss: 0.161647| train set 5.152x speedup, test set 5.157x speedup, val set 5.062x speedup, step: 5, train time 15.96 s
JOB test speedup 3.1954593222079084
TPCH test speedup 5.473134934514937
TPCH skew test speedup 5.13496762893637
Epoch 19/50 |loss: 0.161175| train set 5.154x speedup, test set 5.135x speedup, val set 5.057x speedup, step: 6, train time 16.11 s
JOB test speedup 3.5145542716802574
TPCH test speedup 5.4093498607210995
TPCH skew test speedup 5.091847538162835
Epoch 20/50 |loss: 0.158026| train set 5.204x speedup, test set 5.092x speedup, val set 5.106x speedup, step: 7, train time 16.04 s
JOB test speedup 3.45707901733655
TPCH test speedup 5.473134934514937
TPCH skew test speedup 5.13496762893637
Epoch 21/50 |loss: 0.157319| train set 5.162x speedup, test set 5.135x speedup, val set 5.070x speedup, step: 8, train time 16.02 s
JOB test speedup 3.4773775532854887
TPCH test speedup 5.458964156529684
TPCH skew test speedup 5.1546147189071325
Epoch 22/50 |loss: 0.153491| train set 5.188x speedup, test set 5.155x speedup, val set 5.098x speedup, step: 9, train time 16.06 s
JOB test speedup 3.554853224056485
TPCH test speedup 5.404428126471526
TPCH skew test speedup 5.087189499229763
Epoch 23/50 |loss: 0.150708| train set 5.172x speedup, test set 5.087x speedup, val set 5.117x speedup, step: 10, train time 16.53 s
JOB test speedup 3.4623341424309126
TPCH test speedup 5.470503358548383
TPCH skew test speedup 5.087917982603964
Epoch 24/50 |loss: 0.148033| train set 5.199x speedup, test set 5.088x speedup, val set 5.073x speedup, step: 11, train time 16.17 s
JOB test speedup 3.4999431458842287
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 25/50 |loss: 0.145769| train set 5.203x speedup, test set 5.177x speedup, val set 5.098x speedup, step: 12, train time 17.07 s
JOB test speedup 3.5239490469006305
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 26/50 |loss: 0.146121| train set 5.210x speedup, test set 5.178x speedup, val set 5.121x speedup, step: 13, train time 16.91 s
JOB test speedup 3.034748065537131
TPCH test speedup 5.401264329059815
TPCH skew test speedup 5.093612757114578
Epoch 27/50 |loss: 0.143491| train set 5.186x speedup, test set 5.094x speedup, val set 5.137x speedup, step: 1, train time 16.51 s
JOB test speedup 3.6189770612671865
TPCH test speedup 5.5036688497372115
TPCH skew test speedup 5.180661327327281
Epoch 28/50 |loss: 0.140942| train set 5.196x speedup, test set 5.181x speedup, val set 5.138x speedup, step: 1, train time 16.19 s
JOB test speedup 3.552459647387224
TPCH test speedup 5.516670152503286
TPCH skew test speedup 5.171537310529677
Epoch 29/50 |loss: 0.140552| train set 5.207x speedup, test set 5.172x speedup, val set 5.088x speedup, step: 2, train time 16.41 s
JOB test speedup 3.530348845283942
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 30/50 |loss: 0.138779| train set 5.197x speedup, test set 5.171x speedup, val set 5.116x speedup, step: 3, train time 16.37 s
JOB test speedup 3.4727176465616445
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 31/50 |loss: 0.138547| train set 5.210x speedup, test set 5.171x speedup, val set 5.128x speedup, step: 4, train time 16.26 s
JOB test speedup 3.493591099157886
TPCH test speedup 5.385799337635358
TPCH skew test speedup 5.090406149449397
Epoch 32/50 |loss: 0.137333| train set 5.197x speedup, test set 5.090x speedup, val set 5.120x speedup, step: 5, train time 16.19 s
JOB test speedup 3.405524933933983
TPCH test speedup 5.327867356306285
TPCH skew test speedup 5.070655915650444
Epoch 33/50 |loss: 0.135346| train set 5.142x speedup, test set 5.071x speedup, val set 5.022x speedup, step: 6, train time 16.23 s
JOB test speedup 3.294497821573637
TPCH test speedup 5.5011975665562955
TPCH skew test speedup 5.1788352693391
Epoch 34/50 |loss: 0.135756| train set 5.195x speedup, test set 5.179x speedup, val set 5.131x speedup, step: 7, train time 16.42 s
JOB test speedup 3.595835773841271
TPCH test speedup 5.505251750224387
TPCH skew test speedup 5.193876220590477
Epoch 35/50 |loss: 0.130153| train set 5.175x speedup, test set 5.194x speedup, val set 5.072x speedup, step: 8, train time 16.43 s
JOB test speedup 3.5116823670179533
TPCH test speedup 5.404741814711084
TPCH skew test speedup 5.087277627840544
Epoch 36/50 |loss: 0.129382| train set 5.203x speedup, test set 5.087x speedup, val set 5.122x speedup, step: 9, train time 16.77 s
JOB test speedup 3.4764597519004448
TPCH test speedup 5.392983354046421
TPCH skew test speedup 5.108247367465711
Epoch 37/50 |loss: 0.129550| train set 5.177x speedup, test set 5.108x speedup, val set 5.095x speedup, step: 10, train time 16.67 s
JOB test speedup 3.5444923152583674
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 38/50 |loss: 0.127557| train set 5.202x speedup, test set 5.172x speedup, val set 5.111x speedup, step: 11, train time 16.51 s
JOB test speedup 3.613195721122681
TPCH test speedup 5.482926689086208
TPCH skew test speedup 5.167561963641616
Epoch 39/50 |loss: 0.129607| train set 5.172x speedup, test set 5.168x speedup, val set 5.123x speedup, step: 12, train time 16.46 s
JOB test speedup 3.593320165497064
TPCH test speedup 5.501158888783235
TPCH skew test speedup 5.151838899810964
Epoch 40/50 |loss: 0.125670| train set 5.210x speedup, test set 5.152x speedup, val set 5.096x speedup, step: 13, train time 16.48 s
JOB test speedup 3.311477907633964
TPCH test speedup 5.420240173788274
TPCH skew test speedup 5.133578824529576
Epoch 41/50 |loss: 0.127008| train set 5.191x speedup, test set 5.134x speedup, val set 5.104x speedup, step: 14, train time 16.32 s
JOB test speedup 3.5068100743537047
TPCH test speedup 5.473957075966744
TPCH skew test speedup 5.115635412146103
Epoch 42/50 |loss: 0.120516| train set 5.160x speedup, test set 5.116x speedup, val set 5.030x speedup, step: 15, train time 15.87 s
JOB test speedup 3.452156726906301
TPCH test speedup 5.498515443175084
TPCH skew test speedup 5.1878635249693605
Epoch 43/50 |loss: 0.124474| train set 5.189x speedup, test set 5.188x speedup, val set 5.098x speedup, step: 16, train time 15.98 s
JOB test speedup 3.4363127918846326
TPCH test speedup 5.4449644511006206
TPCH skew test speedup 5.124002866142572
Epoch 44/50 |loss: 0.127819| train set 5.159x speedup, test set 5.124x speedup, val set 5.080x speedup, step: 17, train time 16.39 s
JOB test speedup 3.4275893126137658
TPCH test speedup 5.392262133028142
TPCH skew test speedup 5.096194936157113
Epoch 45/50 |loss: 0.120598| train set 5.197x speedup, test set 5.096x speedup, val set 5.122x speedup, step: 18, train time 15.98 s
JOB test speedup 3.3047276426452847
TPCH test speedup 5.404428126471526
TPCH skew test speedup 5.087189499229763
Epoch 46/50 |loss: 0.122762| train set 5.206x speedup, test set 5.087x speedup, val set 5.113x speedup, step: 19, train time 16.01 s
JOB test speedup 3.4814631482309917
TPCH test speedup 5.478182663250455
TPCH skew test speedup 5.139713614776333
Epoch 47/50 |loss: 0.121895| train set 5.159x speedup, test set 5.140x speedup, val set 5.036x speedup, step: 20, train time 16.16 s
JOB test speedup 3.5251443222014247
TPCH test speedup 5.408547010220007
TPCH skew test speedup 5.091206193948426
Epoch 48/50 |loss: 0.117913| train set 5.201x speedup, test set 5.091x speedup, val set 5.119x speedup, step: 21, train time 16.10 s
JOB test speedup 3.4948926143720747
TPCH test speedup 5.516670152503286
TPCH skew test speedup 5.171537310529677
Epoch 49/50 |loss: 0.120886| train set 5.210x speedup, test set 5.172x speedup, val set 5.112x speedup, step: 22, train time 16.15 s
Training per epoch cost 16.164 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.084s, pg runtime 0.086s, speedup 1.022x
21, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.080s, pg runtime 0.112s, speedup 1.403x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 4.213s, pg runtime 14.646s, speedup 3.477x
14, opt runtime 3.449s, model runtime 4.406s, pg runtime 14.824s, speedup 3.365x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
14, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 28, train speedup 5.196, test speedup 3.619, val speedup 5.138
TPCH best validation speedup epoch: 28, train speedup 5.196, test speedup 5.504, val speedup 5.138
TPCH Skew best validation speedup epoch: 28, train speedup 5.196, test speedup 5.181, val speedup 5.138
execution cost 0:14:25.582442
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.256065, and there are 24631 training samples
in channel 9
JOB test speedup 0.9986291194822303
TPCH test speedup 4.642035632925213
TPCH skew test speedup 4.47150630465368
Epoch 0/50 |loss: 0.433077| train set 4.248x speedup, test set 4.472x speedup, val set 4.215x speedup, step: 1, train time 17.80 s
JOB test speedup 0.9914050277746156
TPCH test speedup 4.939566631290165
TPCH skew test speedup 4.698389310189848
Epoch 1/50 |loss: 0.317809| train set 4.599x speedup, test set 4.698x speedup, val set 4.550x speedup, step: 1, train time 17.98 s
JOB test speedup 2.6115075513558956
TPCH test speedup 5.080360228269005
TPCH skew test speedup 4.89405857619651
Epoch 2/50 |loss: 0.283000| train set 4.835x speedup, test set 4.894x speedup, val set 4.847x speedup, step: 1, train time 17.39 s
JOB test speedup 3.0905137887464145
TPCH test speedup 5.3331196728701915
TPCH skew test speedup 5.025205052252197
Epoch 3/50 |loss: 0.257073| train set 5.079x speedup, test set 5.025x speedup, val set 5.039x speedup, step: 1, train time 16.81 s
JOB test speedup 2.6594570652947844
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 4/50 |loss: 0.239196| train set 5.131x speedup, test set 5.172x speedup, val set 5.048x speedup, step: 1, train time 17.01 s
JOB test speedup 3.3267951495845773
TPCH test speedup 5.435488609920432
TPCH skew test speedup 5.101590207115849
Epoch 5/50 |loss: 0.227909| train set 5.069x speedup, test set 5.102x speedup, val set 4.993x speedup, step: 2, train time 16.42 s
JOB test speedup 2.8685809124582664
TPCH test speedup 5.214047347944997
TPCH skew test speedup 5.004307624429504
Epoch 6/50 |loss: 0.216002| train set 4.965x speedup, test set 5.004x speedup, val set 4.835x speedup, step: 3, train time 16.37 s
JOB test speedup 0.8404602534912182
TPCH test speedup 4.894577460479398
TPCH skew test speedup 4.871771472964488
Epoch 7/50 |loss: 0.206018| train set 5.031x speedup, test set 4.872x speedup, val set 4.610x speedup, step: 4, train time 16.28 s
JOB test speedup 3.4414664681813893
TPCH test speedup 5.473957075966744
TPCH skew test speedup 5.135620046582709
Epoch 8/50 |loss: 0.202028| train set 5.128x speedup, test set 5.136x speedup, val set 5.031x speedup, step: 5, train time 16.15 s
JOB test speedup 3.5035629487106292
TPCH test speedup 5.167403913109796
TPCH skew test speedup 4.886936611885567
Epoch 9/50 |loss: 0.193575| train set 5.159x speedup, test set 4.887x speedup, val set 4.896x speedup, step: 6, train time 16.08 s
JOB test speedup 3.4664271895591514
TPCH test speedup 5.2734057441032505
TPCH skew test speedup 5.034727287898602
Epoch 10/50 |loss: 0.189078| train set 5.021x speedup, test set 5.035x speedup, val set 4.970x speedup, step: 7, train time 16.24 s
JOB test speedup 3.2880728526189316
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 11/50 |loss: 0.186720| train set 5.198x speedup, test set 5.178x speedup, val set 5.084x speedup, step: 1, train time 16.11 s
JOB test speedup 3.463348575304545
TPCH test speedup 5.38988986441074
TPCH skew test speedup 5.094339550809248
Epoch 12/50 |loss: 0.178809| train set 5.176x speedup, test set 5.094x speedup, val set 5.086x speedup, step: 1, train time 16.12 s
JOB test speedup 3.255474508827351
TPCH test speedup 5.408547010220007
TPCH skew test speedup 5.091206193948426
Epoch 13/50 |loss: 0.176919| train set 5.179x speedup, test set 5.091x speedup, val set 5.083x speedup, step: 2, train time 15.78 s
JOB test speedup 3.2007861695125066
TPCH test speedup 5.502779045635593
TPCH skew test speedup 5.192040836509598
Epoch 14/50 |loss: 0.172993| train set 5.180x speedup, test set 5.192x speedup, val set 5.070x speedup, step: 3, train time 15.69 s
JOB test speedup 3.390848499035657
TPCH test speedup 5.411739294033793
TPCH skew test speedup 5.093612757114578
Epoch 15/50 |loss: 0.168892| train set 5.179x speedup, test set 5.094x speedup, val set 5.085x speedup, step: 4, train time 15.84 s
JOB test speedup 3.19470523635979
TPCH test speedup 5.435488609920432
TPCH skew test speedup 5.101590207115849
Epoch 16/50 |loss: 0.163802| train set 5.093x speedup, test set 5.102x speedup, val set 5.044x speedup, step: 5, train time 15.92 s
JOB test speedup 3.3751844238673954
TPCH test speedup 5.466822296498533
TPCH skew test speedup 5.174186276905828
Epoch 17/50 |loss: 0.162495| train set 5.204x speedup, test set 5.174x speedup, val set 5.123x speedup, step: 1, train time 15.77 s
JOB test speedup 3.1649507999793474
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 18/50 |loss: 0.160252| train set 5.198x speedup, test set 5.177x speedup, val set 5.136x speedup, step: 1, train time 15.77 s
JOB test speedup 3.2627017056496594
TPCH test speedup 5.105190972837342
TPCH skew test speedup 4.988277275836163
Epoch 19/50 |loss: 0.160232| train set 5.207x speedup, test set 4.988x speedup, val set 4.912x speedup, step: 2, train time 15.75 s
JOB test speedup 3.4995647664345713
TPCH test speedup 5.348802170876046
TPCH skew test speedup 5.029064191238821
Epoch 20/50 |loss: 0.154839| train set 5.164x speedup, test set 5.029x speedup, val set 5.079x speedup, step: 3, train time 15.85 s
JOB test speedup 3.189512171603093
TPCH test speedup 5.478182663250455
TPCH skew test speedup 5.139713614776333
Epoch 21/50 |loss: 0.156584| train set 5.157x speedup, test set 5.140x speedup, val set 5.062x speedup, step: 4, train time 15.97 s
JOB test speedup 2.966305823912375
TPCH test speedup 5.501948224422553
TPCH skew test speedup 5.191374005908698
Epoch 22/50 |loss: 0.150599| train set 5.167x speedup, test set 5.191x speedup, val set 5.072x speedup, step: 5, train time 15.85 s
JOB test speedup 3.3112284228223507
TPCH test speedup 5.375316381396856
TPCH skew test speedup 5.086713129845844
Epoch 23/50 |loss: 0.150204| train set 5.173x speedup, test set 5.087x speedup, val set 5.100x speedup, step: 6, train time 16.08 s
JOB test speedup 3.6013056100201024
TPCH test speedup 5.4096641205800795
TPCH skew test speedup 5.09193582823723
Epoch 24/50 |loss: 0.146852| train set 5.196x speedup, test set 5.092x speedup, val set 5.091x speedup, step: 7, train time 15.75 s
JOB test speedup 3.4059318985191194
TPCH test speedup 5.52063464352243
TPCH skew test speedup 5.175597142572594
Epoch 25/50 |loss: 0.145365| train set 5.211x speedup, test set 5.176x speedup, val set 5.144x speedup, step: 1, train time 15.89 s
JOB test speedup 3.346170568785302
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 26/50 |loss: 0.145349| train set 5.211x speedup, test set 5.178x speedup, val set 5.096x speedup, step: 2, train time 15.78 s
JOB test speedup 3.0842949186255284
TPCH test speedup 5.377752202347909
TPCH skew test speedup 5.077065241924249
Epoch 27/50 |loss: 0.141120| train set 5.194x speedup, test set 5.077x speedup, val set 5.122x speedup, step: 3, train time 15.92 s
JOB test speedup 3.099930911312172
TPCH test speedup 5.469262784765139
TPCH skew test speedup 5.1760090573179065
Epoch 28/50 |loss: 0.141004| train set 5.167x speedup, test set 5.176x speedup, val set 5.126x speedup, step: 4, train time 15.78 s
JOB test speedup 3.6176636265483215
TPCH test speedup 5.516520152648991
TPCH skew test speedup 5.173394287651405
Epoch 29/50 |loss: 0.141974| train set 5.192x speedup, test set 5.173x speedup, val set 5.104x speedup, step: 5, train time 15.69 s
JOB test speedup 3.3644713839122606
TPCH test speedup 5.457222901203133
TPCH skew test speedup 5.11680464292647
Epoch 30/50 |loss: 0.137453| train set 5.135x speedup, test set 5.117x speedup, val set 5.041x speedup, step: 6, train time 15.93 s
JOB test speedup 3.4673069973923774
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 31/50 |loss: 0.138013| train set 5.207x speedup, test set 5.171x speedup, val set 5.126x speedup, step: 7, train time 15.87 s
JOB test speedup 3.101532143323646
TPCH test speedup 5.3637379349197625
TPCH skew test speedup 5.052517293409851
Epoch 32/50 |loss: 0.136863| train set 5.150x speedup, test set 5.053x speedup, val set 5.044x speedup, step: 8, train time 17.22 s
JOB test speedup 2.939810359639426
TPCH test speedup 5.436602279199729
TPCH skew test speedup 5.134230889295209
Epoch 33/50 |loss: 0.134257| train set 5.129x speedup, test set 5.134x speedup, val set 5.042x speedup, step: 9, train time 16.78 s
JOB test speedup 3.2562520008856315
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 34/50 |loss: 0.135366| train set 5.213x speedup, test set 5.172x speedup, val set 5.131x speedup, step: 10, train time 16.77 s
JOB test speedup 3.6001588691148068
TPCH test speedup 5.467642542408799
TPCH skew test speedup 5.174848699016144
Epoch 35/50 |loss: 0.130802| train set 5.167x speedup, test set 5.175x speedup, val set 5.083x speedup, step: 11, train time 16.59 s
JOB test speedup 3.5781389354438953
TPCH test speedup 5.348902995048081
TPCH skew test speedup 5.033259243311266
Epoch 36/50 |loss: 0.130379| train set 5.199x speedup, test set 5.033x speedup, val set 5.071x speedup, step: 12, train time 16.51 s
JOB test speedup 3.176791675235007
TPCH test speedup 5.350127281957047
TPCH skew test speedup 5.071537347644869
Epoch 37/50 |loss: 0.129972| train set 5.187x speedup, test set 5.072x speedup, val set 5.082x speedup, step: 13, train time 15.98 s
JOB test speedup 3.156373412218369
TPCH test speedup 5.4093498607210995
TPCH skew test speedup 5.091847538162835
Epoch 38/50 |loss: 0.129337| train set 5.201x speedup, test set 5.092x speedup, val set 5.130x speedup, step: 14, train time 15.96 s
JOB test speedup 3.4156967274155132
TPCH test speedup 5.50065347670074
TPCH skew test speedup 5.151272714860926
Epoch 39/50 |loss: 0.129658| train set 5.195x speedup, test set 5.151x speedup, val set 5.111x speedup, step: 15, train time 16.06 s
JOB test speedup 3.592337995787534
TPCH test speedup 5.481858470850238
TPCH skew test speedup 5.155047356775332
Epoch 40/50 |loss: 0.128060| train set 5.207x speedup, test set 5.155x speedup, val set 5.129x speedup, step: 16, train time 15.92 s
JOB test speedup 3.3169148960659087
TPCH test speedup 5.462614209912629
TPCH skew test speedup 5.170037634638963
Epoch 41/50 |loss: 0.126848| train set 5.174x speedup, test set 5.170x speedup, val set 5.094x speedup, step: 17, train time 15.90 s
JOB test speedup 3.35904575935785
TPCH test speedup 5.280235256530228
TPCH skew test speedup 5.071891638771966
Epoch 42/50 |loss: 0.121869| train set 4.999x speedup, test set 5.072x speedup, val set 4.857x speedup, step: 18, train time 15.82 s
JOB test speedup 3.354900406909347
TPCH test speedup 5.387315154326641
TPCH skew test speedup 5.103075358758852
Epoch 43/50 |loss: 0.126315| train set 5.181x speedup, test set 5.103x speedup, val set 5.099x speedup, step: 19, train time 15.87 s
JOB test speedup 3.5927201412168004
TPCH test speedup 5.445778150501971
TPCH skew test speedup 5.124652500355726
Epoch 44/50 |loss: 0.125998| train set 5.157x speedup, test set 5.125x speedup, val set 5.089x speedup, step: 20, train time 16.26 s
JOB test speedup 3.355048859877849
TPCH test speedup 5.411739294033793
TPCH skew test speedup 5.093612757114578
Epoch 45/50 |loss: 0.119959| train set 5.195x speedup, test set 5.094x speedup, val set 5.111x speedup, step: 21, train time 15.96 s
JOB test speedup 3.1884007458339094
TPCH test speedup 5.410935734153944
TPCH skew test speedup 5.092970968174421
Epoch 46/50 |loss: 0.123475| train set 5.195x speedup, test set 5.093x speedup, val set 5.112x speedup, step: 22, train time 15.77 s
JOB test speedup 3.413914140521299
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 47/50 |loss: 0.121844| train set 5.152x speedup, test set 5.172x speedup, val set 5.065x speedup, step: 23, train time 15.82 s
JOB test speedup 3.6169123798355893
TPCH test speedup 5.271652663887501
TPCH skew test speedup 5.030670795635119
Epoch 48/50 |loss: 0.119495| train set 5.209x speedup, test set 5.031x speedup, val set 5.099x speedup, step: 24, train time 15.98 s
JOB test speedup 3.371839409015141
TPCH test speedup 5.486419511179037
TPCH skew test speedup 5.159262607014954
Epoch 49/50 |loss: 0.119596| train set 5.203x speedup, test set 5.159x speedup, val set 5.096x speedup, step: 25, train time 15.96 s
Training per epoch cost 16.175 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.332s, pg runtime 2.352s, speedup 7.089x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.061s, model runtime 0.061s, pg runtime 0.086s, speedup 1.407x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.136s, pg runtime 0.891s, speedup 6.543x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
28, opt runtime 6.854s, model runtime 7.066s, pg runtime 6.854s, speedup 0.970x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.899s, pg runtime 6.749s, speedup 0.978x
28, opt runtime 7.213s, model runtime 7.295s, pg runtime 7.213s, speedup 0.989x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 25, train speedup 5.211, test speedup 3.406, val speedup 5.144
TPCH best validation speedup epoch: 25, train speedup 5.211, test speedup 5.521, val speedup 5.144
TPCH Skew best validation speedup epoch: 25, train speedup 5.211, test speedup 5.176, val speedup 5.144
execution cost 0:14:25.407392
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.221403, and there are 24631 training samples
in channel 9
JOB test speedup 1.1266610242555557
TPCH test speedup 4.567973243904907
TPCH skew test speedup 4.417731158099803
Epoch 0/50 |loss: 0.430602| train set 4.268x speedup, test set 4.418x speedup, val set 4.239x speedup, step: 1, train time 17.20 s
JOB test speedup 1.0170527823662856
TPCH test speedup 4.339253658303711
TPCH skew test speedup 4.373239636730805
Epoch 1/50 |loss: 0.316357| train set 3.964x speedup, test set 4.373x speedup, val set 4.122x speedup, step: 2, train time 15.52 s
JOB test speedup 1.0635547504949365
TPCH test speedup 5.186149626715398
TPCH skew test speedup 4.983895415573978
Epoch 2/50 |loss: 0.283014| train set 4.881x speedup, test set 4.984x speedup, val set 4.916x speedup, step: 1, train time 15.55 s
JOB test speedup 3.0723613955312405
TPCH test speedup 5.332339289318677
TPCH skew test speedup 5.024580385070439
Epoch 3/50 |loss: 0.254208| train set 5.063x speedup, test set 5.025x speedup, val set 5.022x speedup, step: 1, train time 15.61 s
JOB test speedup 3.433648581493428
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 4/50 |loss: 0.240485| train set 5.144x speedup, test set 5.176x speedup, val set 5.055x speedup, step: 1, train time 15.64 s
JOB test speedup 3.2783011833529994
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 5/50 |loss: 0.226408| train set 5.180x speedup, test set 5.171x speedup, val set 5.049x speedup, step: 2, train time 16.40 s
JOB test speedup 2.8842554924629398
TPCH test speedup 5.237983256332851
TPCH skew test speedup 5.001635620206129
Epoch 6/50 |loss: 0.216193| train set 4.982x speedup, test set 5.002x speedup, val set 4.863x speedup, step: 3, train time 15.93 s
JOB test speedup 3.425689616963984
TPCH test speedup 5.473957075966744
TPCH skew test speedup 5.135620046582709
Epoch 7/50 |loss: 0.207187| train set 5.139x speedup, test set 5.136x speedup, val set 5.054x speedup, step: 4, train time 16.32 s
JOB test speedup 3.4332418528944473
TPCH test speedup 5.517505426169212
TPCH skew test speedup 5.172199054505564
Epoch 8/50 |loss: 0.201912| train set 5.116x speedup, test set 5.172x speedup, val set 5.047x speedup, step: 5, train time 15.88 s
JOB test speedup 3.4991521402103434
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 9/50 |loss: 0.193435| train set 5.188x speedup, test set 5.176x speedup, val set 5.091x speedup, step: 1, train time 16.01 s
JOB test speedup 3.5433407296849975
TPCH test speedup 5.274168971989709
TPCH skew test speedup 5.035354480757091
Epoch 10/50 |loss: 0.190654| train set 5.032x speedup, test set 5.035x speedup, val set 4.967x speedup, step: 2, train time 16.18 s
JOB test speedup 3.1624158619422627
TPCH test speedup 5.277545128295761
TPCH skew test speedup 5.036238070402388
Epoch 11/50 |loss: 0.185720| train set 5.190x speedup, test set 5.036x speedup, val set 5.017x speedup, step: 3, train time 15.61 s
JOB test speedup 3.492385407395412
TPCH test speedup 5.206748410443334
TPCH skew test speedup 4.78494819546843
Epoch 12/50 |loss: 0.178958| train set 5.026x speedup, test set 4.785x speedup, val set 4.931x speedup, step: 4, train time 15.68 s
JOB test speedup 3.5847077325897856
TPCH test speedup 5.404741814711084
TPCH skew test speedup 5.087277627840544
Epoch 13/50 |loss: 0.177339| train set 5.198x speedup, test set 5.087x speedup, val set 5.065x speedup, step: 5, train time 15.81 s
JOB test speedup 3.6338148318607955
TPCH test speedup 5.521471118230205
TPCH skew test speedup 4.870674254558785
Epoch 14/50 |loss: 0.172828| train set 5.202x speedup, test set 4.871x speedup, val set 5.131x speedup, step: 1, train time 15.69 s
JOB test speedup 3.289306898790471
TPCH test speedup 5.218924372694522
TPCH skew test speedup 4.885070028281634
Epoch 15/50 |loss: 0.169901| train set 5.173x speedup, test set 4.885x speedup, val set 5.082x speedup, step: 2, train time 15.65 s
JOB test speedup 3.625359192933227
TPCH test speedup 5.405229754524604
TPCH skew test speedup 5.08782983180582
Epoch 16/50 |loss: 0.164975| train set 5.189x speedup, test set 5.088x speedup, val set 5.063x speedup, step: 3, train time 15.96 s
JOB test speedup 3.4987693663021204
TPCH test speedup 5.439958166004688
TPCH skew test speedup 5.15782663532427
Epoch 17/50 |loss: 0.162010| train set 5.137x speedup, test set 5.158x speedup, val set 5.055x speedup, step: 4, train time 15.96 s
JOB test speedup 3.4413932318050477
TPCH test speedup 5.523451043586707
TPCH skew test speedup 5.177512199981102
Epoch 18/50 |loss: 0.161387| train set 5.151x speedup, test set 5.178x speedup, val set 5.078x speedup, step: 5, train time 16.09 s
JOB test speedup 3.3566353995320317
TPCH test speedup 5.25363004396009
TPCH skew test speedup 5.037576328338175
Epoch 19/50 |loss: 0.159069| train set 5.209x speedup, test set 5.038x speedup, val set 5.123x speedup, step: 6, train time 16.07 s
JOB test speedup 3.124119892449485
TPCH test speedup 5.348802170876046
TPCH skew test speedup 5.029064191238821
Epoch 20/50 |loss: 0.154921| train set 5.166x speedup, test set 5.029x speedup, val set 5.067x speedup, step: 7, train time 16.02 s
JOB test speedup 3.1297740881863954
TPCH test speedup 5.45822518111476
TPCH skew test speedup 5.14242953710582
Epoch 21/50 |loss: 0.156300| train set 5.153x speedup, test set 5.142x speedup, val set 5.062x speedup, step: 8, train time 15.98 s
JOB test speedup 3.4148525539467696
TPCH test speedup 5.439958166004688
TPCH skew test speedup 5.15782663532427
Epoch 22/50 |loss: 0.151462| train set 5.137x speedup, test set 5.158x speedup, val set 5.042x speedup, step: 9, train time 16.36 s
JOB test speedup 3.2410745676215913
TPCH test speedup 5.380217041744752
TPCH skew test speedup 5.106471992303872
Epoch 23/50 |loss: 0.149743| train set 5.178x speedup, test set 5.106x speedup, val set 5.097x speedup, step: 10, train time 16.53 s
JOB test speedup 3.3964950079053327
TPCH test speedup 5.4096641205800795
TPCH skew test speedup 5.09193582823723
Epoch 24/50 |loss: 0.147347| train set 5.202x speedup, test set 5.092x speedup, val set 5.118x speedup, step: 11, train time 16.84 s
JOB test speedup 3.0389709532307885
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 25/50 |loss: 0.144876| train set 5.145x speedup, test set 5.178x speedup, val set 5.132x speedup, step: 1, train time 16.47 s
JOB test speedup 3.3740956414095646
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 26/50 |loss: 0.144768| train set 5.205x speedup, test set 5.177x speedup, val set 5.122x speedup, step: 2, train time 16.61 s
JOB test speedup 3.476407050573281
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 27/50 |loss: 0.141542| train set 5.203x speedup, test set 5.171x speedup, val set 5.137x speedup, step: 1, train time 16.31 s
JOB test speedup 3.0285157424507982
TPCH test speedup 5.487727469863625
TPCH skew test speedup 5.1604159853132305
Epoch 28/50 |loss: 0.140123| train set 5.191x speedup, test set 5.160x speedup, val set 5.140x speedup, step: 1, train time 16.41 s
JOB test speedup 3.5987436027875974
TPCH test speedup 5.52330067476204
TPCH skew test speedup 5.179373471237577
Epoch 29/50 |loss: 0.140139| train set 5.180x speedup, test set 5.179x speedup, val set 5.131x speedup, step: 2, train time 16.20 s
JOB test speedup 3.0093947755827757
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 30/50 |loss: 0.139355| train set 5.211x speedup, test set 5.171x speedup, val set 5.130x speedup, step: 3, train time 15.92 s
JOB test speedup 2.9122170731426107
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 31/50 |loss: 0.137455| train set 5.212x speedup, test set 5.171x speedup, val set 5.126x speedup, step: 4, train time 16.01 s
JOB test speedup 3.1573205275547407
TPCH test speedup 5.404428126471526
TPCH skew test speedup 5.087189499229763
Epoch 32/50 |loss: 0.136289| train set 5.190x speedup, test set 5.087x speedup, val set 5.103x speedup, step: 5, train time 15.79 s
JOB test speedup 2.734392166864963
TPCH test speedup 5.461476394916788
TPCH skew test speedup 5.144707786919886
Epoch 33/50 |loss: 0.134890| train set 5.144x speedup, test set 5.145x speedup, val set 5.054x speedup, step: 6, train time 15.97 s
JOB test speedup 2.7643616908990616
TPCH test speedup 5.52063464352243
TPCH skew test speedup 5.175597142572594
Epoch 34/50 |loss: 0.132524| train set 5.196x speedup, test set 5.176x speedup, val set 5.122x speedup, step: 7, train time 15.87 s
JOB test speedup 2.516084762227461
TPCH test speedup 5.498515443175084
TPCH skew test speedup 5.1878635249693605
Epoch 35/50 |loss: 0.130339| train set 5.148x speedup, test set 5.188x speedup, val set 5.099x speedup, step: 8, train time 16.10 s
JOB test speedup 3.3693756625084625
TPCH test speedup 5.408861176798909
TPCH skew test speedup 5.091294461782857
Epoch 36/50 |loss: 0.128167| train set 5.202x speedup, test set 5.091x speedup, val set 5.108x speedup, step: 9, train time 15.96 s
JOB test speedup 3.2332090369363606
TPCH test speedup 5.458817278306351
TPCH skew test speedup 5.156459560737709
Epoch 37/50 |loss: 0.128207| train set 5.133x speedup, test set 5.156x speedup, val set 5.026x speedup, step: 10, train time 16.01 s
JOB test speedup 3.0163718984721046
TPCH test speedup 5.4093498607210995
TPCH skew test speedup 5.091847538162835
Epoch 38/50 |loss: 0.126195| train set 5.189x speedup, test set 5.092x speedup, val set 5.118x speedup, step: 11, train time 16.10 s
JOB test speedup 2.9091217198651136
TPCH test speedup 5.478732145387665
TPCH skew test speedup 5.173259249150044
Epoch 39/50 |loss: 0.126887| train set 5.209x speedup, test set 5.173x speedup, val set 5.125x speedup, step: 12, train time 15.97 s
JOB test speedup 3.022916071330332
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 40/50 |loss: 0.124215| train set 5.203x speedup, test set 5.171x speedup, val set 5.124x speedup, step: 13, train time 16.07 s
JOB test speedup 2.8499291893520193
TPCH test speedup 5.420240173788274
TPCH skew test speedup 5.133578824529576
Epoch 41/50 |loss: 0.126802| train set 5.147x speedup, test set 5.134x speedup, val set 5.045x speedup, step: 14, train time 15.91 s
JOB test speedup 3.0148887559254156
TPCH test speedup 5.280235256530228
TPCH skew test speedup 5.071891638771966
Epoch 42/50 |loss: 0.122533| train set 4.992x speedup, test set 5.072x speedup, val set 4.847x speedup, step: 15, train time 16.00 s
JOB test speedup 3.3460106075064573
TPCH test speedup 5.498515443175084
TPCH skew test speedup 5.187955176205638
Epoch 43/50 |loss: 0.122411| train set 5.181x speedup, test set 5.188x speedup, val set 5.076x speedup, step: 16, train time 15.92 s
JOB test speedup 3.3599542173916426
TPCH test speedup 5.43837478477626
TPCH skew test speedup 5.118150769087284
Epoch 44/50 |loss: 0.124480| train set 5.159x speedup, test set 5.118x speedup, val set 5.081x speedup, step: 17, train time 16.61 s
JOB test speedup 3.0760412205238694
TPCH test speedup 5.410935734153944
TPCH skew test speedup 5.092970968174421
Epoch 45/50 |loss: 0.118661| train set 5.196x speedup, test set 5.093x speedup, val set 5.112x speedup, step: 18, train time 15.86 s
JOB test speedup 3.2447525560451944
TPCH test speedup 5.404428126471526
TPCH skew test speedup 5.087189499229763
Epoch 46/50 |loss: 0.120244| train set 5.203x speedup, test set 5.087x speedup, val set 5.103x speedup, step: 19, train time 15.98 s
JOB test speedup 3.0913295669915195
TPCH test speedup 5.473134934514937
TPCH skew test speedup 5.13496762893637
Epoch 47/50 |loss: 0.121244| train set 5.163x speedup, test set 5.135x speedup, val set 5.017x speedup, step: 20, train time 16.03 s
JOB test speedup 2.6277907139768253
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 48/50 |loss: 0.117132| train set 5.213x speedup, test set 5.171x speedup, val set 5.126x speedup, step: 21, train time 15.92 s
JOB test speedup 3.366087830562278
TPCH test speedup 5.52063464352243
TPCH skew test speedup 5.175597142572594
Epoch 49/50 |loss: 0.120619| train set 5.200x speedup, test set 5.176x speedup, val set 5.120x speedup, step: 22, train time 16.17 s
Training per epoch cost 16.053 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.028x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.332s, pg runtime 2.352s, speedup 7.089x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.084s, pg runtime 0.086s, speedup 1.022x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.136s, pg runtime 0.891s, speedup 6.543x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
08, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 4.213s, pg runtime 14.646s, speedup 3.477x
14, opt runtime 3.449s, model runtime 4.406s, pg runtime 14.824s, speedup 3.365x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 7.216s, pg runtime 13.410s, speedup 1.858x
08, opt runtime 6.497s, model runtime 7.355s, pg runtime 12.849s, speedup 1.747x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
14, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 28, train speedup 5.191, test speedup 3.029, val speedup 5.140
TPCH best validation speedup epoch: 28, train speedup 5.191, test speedup 5.488, val speedup 5.140
TPCH Skew best validation speedup epoch: 28, train speedup 5.191, test speedup 5.160, val speedup 5.140
execution cost 0:14:18.855141
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.289916, and there are 24631 training samples
in channel 9
JOB test speedup 1.0411457598514662
TPCH test speedup 4.825632902214461
TPCH skew test speedup 4.560269039784255
Epoch 0/50 |loss: 0.434354| train set 4.458x speedup, test set 4.560x speedup, val set 4.413x speedup, step: 1, train time 17.32 s
JOB test speedup 0.5652843185919212
TPCH test speedup 5.2182050054017655
TPCH skew test speedup 4.927202463402732
Epoch 1/50 |loss: 0.318438| train set 4.836x speedup, test set 4.927x speedup, val set 4.795x speedup, step: 1, train time 15.73 s
JOB test speedup 0.9603888722215795
TPCH test speedup 4.95164966511449
TPCH skew test speedup 4.7330329793450625
Epoch 2/50 |loss: 0.283444| train set 4.744x speedup, test set 4.733x speedup, val set 4.590x speedup, step: 2, train time 15.52 s
JOB test speedup 2.1186123142522604
TPCH test speedup 5.206521925012646
TPCH skew test speedup 4.831040050977428
Epoch 3/50 |loss: 0.258658| train set 5.067x speedup, test set 4.831x speedup, val set 4.693x speedup, step: 3, train time 15.59 s
JOB test speedup 2.768551876711581
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 4/50 |loss: 0.241893| train set 4.979x speedup, test set 5.172x speedup, val set 5.025x speedup, step: 1, train time 15.71 s
JOB test speedup 0.8850088941660815
TPCH test speedup 5.435488609920432
TPCH skew test speedup 5.101590207115849
Epoch 5/50 |loss: 0.229161| train set 5.087x speedup, test set 5.102x speedup, val set 5.020x speedup, step: 2, train time 15.74 s
JOB test speedup 3.132953496836605
TPCH test speedup 5.221158392669477
TPCH skew test speedup 5.016368218179115
Epoch 6/50 |loss: 0.218656| train set 4.925x speedup, test set 5.016x speedup, val set 4.950x speedup, step: 3, train time 15.65 s
JOB test speedup 0.8857868863697875
TPCH test speedup 5.177475999651526
TPCH skew test speedup 4.835206546971646
Epoch 7/50 |loss: 0.208128| train set 4.627x speedup, test set 4.835x speedup, val set 4.456x speedup, step: 4, train time 15.75 s
JOB test speedup 3.2734420009740925
TPCH test speedup 5.473957075966744
TPCH skew test speedup 5.135620046582709
Epoch 8/50 |loss: 0.205207| train set 5.141x speedup, test set 5.136x speedup, val set 4.995x speedup, step: 5, train time 15.76 s
JOB test speedup 0.8855229023845017
TPCH test speedup 5.171903225453555
TPCH skew test speedup 4.891234994209713
Epoch 9/50 |loss: 0.195142| train set 4.831x speedup, test set 4.891x speedup, val set 4.731x speedup, step: 6, train time 16.01 s
JOB test speedup 3.5691078671139835
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 10/50 |loss: 0.189958| train set 5.201x speedup, test set 5.171x speedup, val set 5.076x speedup, step: 1, train time 15.78 s
JOB test speedup 3.419232548455686
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 11/50 |loss: 0.186860| train set 5.206x speedup, test set 5.178x speedup, val set 5.238x speedup, step: 1, train time 15.95 s
JOB test speedup 0.8511513542517155
TPCH test speedup 5.405229754524604
TPCH skew test speedup 5.08782983180582
Epoch 12/50 |loss: 0.180672| train set 5.183x speedup, test set 5.088x speedup, val set 5.113x speedup, step: 2, train time 15.81 s
JOB test speedup 3.426630504456081
TPCH test speedup 5.218924372694522
TPCH skew test speedup 4.885070028281634
Epoch 13/50 |loss: 0.177487| train set 5.172x speedup, test set 4.885x speedup, val set 4.886x speedup, step: 3, train time 15.93 s
JOB test speedup 3.4406113320661094
TPCH test speedup 5.52063464352243
TPCH skew test speedup 5.175597142572594
Epoch 14/50 |loss: 0.173829| train set 5.166x speedup, test set 5.176x speedup, val set 5.056x speedup, step: 4, train time 15.91 s
JOB test speedup 3.321758448935897
TPCH test speedup 5.339437693316961
TPCH skew test speedup 5.1314777473842375
Epoch 15/50 |loss: 0.169750| train set 5.015x speedup, test set 5.131x speedup, val set 4.860x speedup, step: 5, train time 15.96 s
JOB test speedup 3.5540104242924078
TPCH test speedup 5.420782985578079
TPCH skew test speedup 5.108866474529552
Epoch 16/50 |loss: 0.166334| train set 5.129x speedup, test set 5.109x speedup, val set 5.062x speedup, step: 6, train time 15.84 s
JOB test speedup 3.609519550702231
TPCH test speedup 5.442545594619371
TPCH skew test speedup 5.122216524335855
Epoch 17/50 |loss: 0.160629| train set 5.198x speedup, test set 5.122x speedup, val set 5.134x speedup, step: 7, train time 16.02 s
JOB test speedup 3.49455755795487
TPCH test speedup 5.479809159326056
TPCH skew test speedup 5.140858268119466
Epoch 18/50 |loss: 0.162004| train set 5.150x speedup, test set 5.141x speedup, val set 5.078x speedup, step: 8, train time 16.05 s
JOB test speedup 2.7941502697710936
TPCH test speedup 5.338655459802025
TPCH skew test speedup 5.130826381703499
Epoch 19/50 |loss: 0.160008| train set 5.028x speedup, test set 5.131x speedup, val set 4.943x speedup, step: 9, train time 16.14 s
JOB test speedup 3.4566862582912057
TPCH test speedup 5.452624742303919
TPCH skew test speedup 4.916353559473942
Epoch 20/50 |loss: 0.155864| train set 5.099x speedup, test set 4.916x speedup, val set 5.010x speedup, step: 10, train time 15.95 s
JOB test speedup 3.274365556505393
TPCH test speedup 5.461569700844974
TPCH skew test speedup 5.119048791933302
Epoch 21/50 |loss: 0.157765| train set 5.160x speedup, test set 5.119x speedup, val set 5.061x speedup, step: 11, train time 16.04 s
JOB test speedup 3.4925954605453184
TPCH test speedup 5.19308052169722
TPCH skew test speedup 4.937998377285579
Epoch 22/50 |loss: 0.153894| train set 5.189x speedup, test set 4.938x speedup, val set 4.820x speedup, step: 12, train time 15.99 s
JOB test speedup 3.4872066910167714
TPCH test speedup 5.372076634640989
TPCH skew test speedup 5.109624173668364
Epoch 23/50 |loss: 0.150076| train set 5.156x speedup, test set 5.110x speedup, val set 5.025x speedup, step: 13, train time 16.11 s
JOB test speedup 3.5926179742326716
TPCH test speedup 5.520961967108627
TPCH skew test speedup 5.175688360910086
Epoch 24/50 |loss: 0.148443| train set 5.189x speedup, test set 5.176x speedup, val set 5.092x speedup, step: 14, train time 15.82 s
JOB test speedup 3.4811750359392057
TPCH test speedup 5.52063464352243
TPCH skew test speedup 5.175597142572594
Epoch 25/50 |loss: 0.145614| train set 5.209x speedup, test set 5.176x speedup, val set 5.093x speedup, step: 15, train time 16.02 s
JOB test speedup 3.4509094210028257
TPCH test speedup 5.480633307275321
TPCH skew test speedup 5.141512183577007
Epoch 26/50 |loss: 0.145403| train set 5.212x speedup, test set 5.142x speedup, val set 5.096x speedup, step: 16, train time 16.05 s
JOB test speedup 3.189477070477487
TPCH test speedup 5.390687185083744
TPCH skew test speedup 5.091847538162835
Epoch 27/50 |loss: 0.142747| train set 5.196x speedup, test set 5.092x speedup, val set 5.120x speedup, step: 17, train time 15.99 s
JOB test speedup 3.592843826586502
TPCH test speedup 5.359230703552304
TPCH skew test speedup 5.07497338862708
Epoch 28/50 |loss: 0.142796| train set 5.143x speedup, test set 5.075x speedup, val set 5.028x speedup, step: 18, train time 16.07 s
JOB test speedup 2.8779080182985495
TPCH test speedup 5.516670152503286
TPCH skew test speedup 5.171537310529677
Epoch 29/50 |loss: 0.140773| train set 5.169x speedup, test set 5.172x speedup, val set 5.050x speedup, step: 19, train time 16.07 s
JOB test speedup 3.6114836112206903
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 30/50 |loss: 0.141173| train set 5.194x speedup, test set 5.171x speedup, val set 5.087x speedup, step: 20, train time 16.20 s
JOB test speedup 3.439864072989984
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 31/50 |loss: 0.139556| train set 5.207x speedup, test set 5.171x speedup, val set 5.112x speedup, step: 21, train time 16.26 s
JOB test speedup 3.4786054088903873
TPCH test speedup 5.410935734153944
TPCH skew test speedup 5.093059297212875
Epoch 32/50 |loss: 0.136912| train set 5.202x speedup, test set 5.093x speedup, val set 5.111x speedup, step: 22, train time 16.20 s
JOB test speedup 3.161654764373785
TPCH test speedup 5.285466009738938
TPCH skew test speedup 5.0233160353061805
Epoch 33/50 |loss: 0.135866| train set 5.196x speedup, test set 5.023x speedup, val set 5.040x speedup, step: 23, train time 16.29 s
JOB test speedup 3.4448376001838197
TPCH test speedup 5.497765721655262
TPCH skew test speedup 5.1753417199588565
Epoch 34/50 |loss: 0.136360| train set 5.201x speedup, test set 5.175x speedup, val set 5.132x speedup, step: 24, train time 16.18 s
JOB test speedup 3.593880236514734
TPCH test speedup 5.368803951753337
TPCH skew test speedup 5.106223346799927
Epoch 35/50 |loss: 0.131102| train set 5.150x speedup, test set 5.106x speedup, val set 5.052x speedup, step: 25, train time 16.22 s
JOB test speedup 3.5847059228401537
TPCH test speedup 5.408861176798909
TPCH skew test speedup 5.091294461782857
Epoch 36/50 |loss: 0.131465| train set 5.202x speedup, test set 5.091x speedup, val set 5.080x speedup, step: 26, train time 16.11 s
JOB test speedup 3.406100272898876
TPCH test speedup 5.331870324714939
TPCH skew test speedup 5.074646533696625
Epoch 37/50 |loss: 0.131710| train set 5.136x speedup, test set 5.075x speedup, val set 4.992x speedup, step: 27, train time 16.08 s
JOB test speedup 3.639080092503602
TPCH test speedup 5.316761021626112
TPCH skew test speedup 5.091847538162835
Epoch 38/50 |loss: 0.128625| train set 5.192x speedup, test set 5.092x speedup, val set 5.043x speedup, step: 28, train time 15.98 s
JOB test speedup 2.9745280251768005
TPCH test speedup 5.504594972517429
TPCH skew test speedup 5.155300780061089
Epoch 39/50 |loss: 0.129907| train set 5.212x speedup, test set 5.155x speedup, val set 5.132x speedup, step: 29, train time 16.15 s
JOB test speedup 3.4623979237615714
TPCH test speedup 5.48527047889999
TPCH skew test speedup 5.158513551791211
Epoch 40/50 |loss: 0.127288| train set 5.206x speedup, test set 5.159x speedup, val set 5.081x speedup, step: 30, train time 16.00 s
JOB test speedup 3.461620545822103
TPCH test speedup 5.479809159326056
TPCH skew test speedup 5.140858268119466
Epoch 41/50 |loss: 0.128311| train set 5.208x speedup, test set 5.141x speedup, val set 5.064x speedup, step: 31, train time 15.96 s
JOB test speedup 3.4593180323341826
TPCH test speedup 4.995113985905335
TPCH skew test speedup 4.8297729787064965
Epoch 42/50 |loss: 0.123041| train set 4.999x speedup, test set 4.830x speedup, val set 4.596x speedup, step: 32, train time 16.12 s
JOB test speedup 3.454749699212765
TPCH test speedup 5.4634331934457006
TPCH skew test speedup 5.170786733088499
Epoch 43/50 |loss: 0.124143| train set 5.180x speedup, test set 5.171x speedup, val set 5.087x speedup, step: 33, train time 16.04 s
JOB test speedup 3.4659804819676654
TPCH test speedup 5.4449644511006206
TPCH skew test speedup 5.124002866142572
Epoch 44/50 |loss: 0.127718| train set 5.160x speedup, test set 5.124x speedup, val set 5.080x speedup, step: 34, train time 16.46 s
JOB test speedup 3.344645602063535
TPCH test speedup 5.367004442618972
TPCH skew test speedup 5.055846934974519
Epoch 45/50 |loss: 0.122210| train set 5.204x speedup, test set 5.056x speedup, val set 5.109x speedup, step: 35, train time 16.17 s
JOB test speedup 3.438640280793639
TPCH test speedup 5.392262133028142
TPCH skew test speedup 5.0961064983232145
Epoch 46/50 |loss: 0.122540| train set 5.200x speedup, test set 5.096x speedup, val set 5.114x speedup, step: 36, train time 16.12 s
JOB test speedup 3.089635776087049
TPCH test speedup 5.154077388688457
TPCH skew test speedup 4.86942368915362
Epoch 47/50 |loss: 0.123771| train set 5.153x speedup, test set 4.869x speedup, val set 5.062x speedup, step: 37, train time 15.98 s
JOB test speedup 3.6168602812169293
TPCH test speedup 5.477359252110192
TPCH skew test speedup 5.139060156706211
Epoch 48/50 |loss: 0.117538| train set 5.202x speedup, test set 5.139x speedup, val set 5.119x speedup, step: 38, train time 15.96 s
JOB test speedup 3.4630363354980247
TPCH test speedup 5.5011975665562955
TPCH skew test speedup 5.1788352693391
Epoch 49/50 |loss: 0.122144| train set 5.201x speedup, test set 5.179x speedup, val set 5.121x speedup, step: 39, train time 16.08 s
Training per epoch cost 16.016 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 0.183s, pg runtime 0.189s, speedup 1.037x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.332s, pg runtime 2.352s, speedup 7.089x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.084s, pg runtime 0.086s, speedup 1.022x
21, opt runtime 0.626s, model runtime 1.404s, pg runtime 2.558s, speedup 1.822x
22, opt runtime 0.136s, model runtime 0.136s, pg runtime 0.891s, speedup 6.543x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.080s, pg runtime 0.112s, speedup 1.403x
28, opt runtime 0.154s, model runtime 0.476s, pg runtime 0.154s, speedup 0.324x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.353s, pg runtime 1.380s, speedup 1.021x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.316s, model runtime 1.316s, pg runtime 1.352s, speedup 1.027x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 11, train speedup 5.206, test speedup 3.419, val speedup 5.238
TPCH best validation speedup epoch: 11, train speedup 5.206, test speedup 5.524, val speedup 5.238
TPCH Skew best validation speedup epoch: 11, train speedup 5.206, test speedup 5.178, val speedup 5.238
execution cost 0:14:16.904666
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.246495, and there are 24631 training samples
in channel 9
JOB test speedup 1.0054260303536195
TPCH test speedup 4.526520531750164
TPCH skew test speedup 4.419414381568968
Epoch 0/50 |loss: 0.431371| train set 4.143x speedup, test set 4.419x speedup, val set 4.010x speedup, step: 1, train time 17.31 s
JOB test speedup 0.5685615869343871
TPCH test speedup 5.156940031269846
TPCH skew test speedup 4.9063660940001785
Epoch 1/50 |loss: 0.316034| train set 4.712x speedup, test set 4.906x speedup, val set 4.733x speedup, step: 1, train time 15.59 s
JOB test speedup 0.750088939171452
TPCH test speedup 5.081068595672266
TPCH skew test speedup 4.894651209449395
Epoch 2/50 |loss: 0.282144| train set 4.848x speedup, test set 4.895x speedup, val set 4.760x speedup, step: 1, train time 15.67 s
JOB test speedup 2.397253510228156
TPCH test speedup 5.435312113234055
TPCH skew test speedup 5.100426286724363
Epoch 3/50 |loss: 0.254284| train set 5.121x speedup, test set 5.100x speedup, val set 5.165x speedup, step: 1, train time 15.75 s
JOB test speedup 2.710604330709093
TPCH test speedup 5.253219676797285
TPCH skew test speedup 5.046334273852656
Epoch 4/50 |loss: 0.241057| train set 4.991x speedup, test set 5.046x speedup, val set 5.072x speedup, step: 2, train time 16.42 s
JOB test speedup 2.9246224978581923
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 5/50 |loss: 0.225795| train set 5.166x speedup, test set 5.172x speedup, val set 5.150x speedup, step: 3, train time 16.31 s
JOB test speedup 3.1429929853952796
TPCH test speedup 5.02147224298755
TPCH skew test speedup 4.737829041531804
Epoch 6/50 |loss: 0.217613| train set 4.989x speedup, test set 4.738x speedup, val set 4.832x speedup, step: 4, train time 16.13 s
JOB test speedup 0.8638698225634364
TPCH test speedup 5.473957075966744
TPCH skew test speedup 5.135620046582709
Epoch 7/50 |loss: 0.207154| train set 5.137x speedup, test set 5.136x speedup, val set 5.027x speedup, step: 5, train time 15.87 s
JOB test speedup 3.284719471464856
TPCH test speedup 5.516670152503286
TPCH skew test speedup 5.171537310529677
Epoch 8/50 |loss: 0.202194| train set 5.186x speedup, test set 5.172x speedup, val set 5.064x speedup, step: 6, train time 15.99 s
JOB test speedup 2.5931812985243954
TPCH test speedup 5.4530714980100585
TPCH skew test speedup 5.136972711878271
Epoch 9/50 |loss: 0.195096| train set 5.181x speedup, test set 5.137x speedup, val set 4.990x speedup, step: 7, train time 15.91 s
JOB test speedup 3.4572441947772963
TPCH test speedup 5.2734057441032505
TPCH skew test speedup 5.034727287898602
Epoch 10/50 |loss: 0.189911| train set 5.028x speedup, test set 5.035x speedup, val set 4.969x speedup, step: 8, train time 15.92 s
JOB test speedup 3.0296045337090245
TPCH test speedup 5.277545128295761
TPCH skew test speedup 5.036238070402388
Epoch 11/50 |loss: 0.183980| train set 5.189x speedup, test set 5.036x speedup, val set 5.189x speedup, step: 1, train time 15.81 s
JOB test speedup 3.4858410451706336
TPCH test speedup 5.2170394727824325
TPCH skew test speedup 5.051588920097602
Epoch 12/50 |loss: 0.180791| train set 4.866x speedup, test set 5.052x speedup, val set 4.897x speedup, step: 2, train time 15.77 s
JOB test speedup 3.14612652198896
TPCH test speedup 5.390201867188166
TPCH skew test speedup 5.094513096242537
Epoch 13/50 |loss: 0.176034| train set 5.184x speedup, test set 5.095x speedup, val set 5.070x speedup, step: 3, train time 15.78 s
JOB test speedup 3.4804171001149418
TPCH test speedup 5.502028161061637
TPCH skew test speedup 5.179498882429487
Epoch 14/50 |loss: 0.172643| train set 5.197x speedup, test set 5.179x speedup, val set 5.096x speedup, step: 4, train time 15.77 s
JOB test speedup 3.1917529452699602
TPCH test speedup 5.234517220300409
TPCH skew test speedup 5.048507915625675
Epoch 15/50 |loss: 0.170814| train set 5.028x speedup, test set 5.049x speedup, val set 4.883x speedup, step: 5, train time 15.67 s
JOB test speedup 3.428298203235391
TPCH test speedup 5.393532744726346
TPCH skew test speedup 5.066087066626317
Epoch 16/50 |loss: 0.165206| train set 5.118x speedup, test set 5.066x speedup, val set 4.953x speedup, step: 6, train time 15.92 s
JOB test speedup 3.51821925838989
TPCH test speedup 5.45822518111476
TPCH skew test speedup 5.142252711813758
Epoch 17/50 |loss: 0.161903| train set 5.159x speedup, test set 5.142x speedup, val set 5.029x speedup, step: 7, train time 15.78 s
JOB test speedup 3.1767547742556936
TPCH test speedup 5.479809159326056
TPCH skew test speedup 5.140858268119466
Epoch 18/50 |loss: 0.160969| train set 5.152x speedup, test set 5.141x speedup, val set 5.041x speedup, step: 8, train time 15.71 s
JOB test speedup 3.0426738908891884
TPCH test speedup 5.5011975665562955
TPCH skew test speedup 5.1788352693391
Epoch 19/50 |loss: 0.159090| train set 5.206x speedup, test set 5.179x speedup, val set 5.121x speedup, step: 9, train time 15.58 s
JOB test speedup 3.085163245072334
TPCH test speedup 5.304201403712956
TPCH skew test speedup 4.990694209847802
Epoch 20/50 |loss: 0.154850| train set 5.165x speedup, test set 4.991x speedup, val set 5.024x speedup, step: 10, train time 15.68 s
JOB test speedup 3.0852604097126943
TPCH test speedup 5.29422304516729
TPCH skew test speedup 5.090894035687485
Epoch 21/50 |loss: 0.156058| train set 4.996x speedup, test set 5.091x speedup, val set 4.879x speedup, step: 11, train time 15.78 s
JOB test speedup 3.366729972383422
TPCH test speedup 5.439958166004688
TPCH skew test speedup 5.157917228332003
Epoch 22/50 |loss: 0.152904| train set 5.186x speedup, test set 5.158x speedup, val set 5.087x speedup, step: 12, train time 15.69 s
JOB test speedup 3.34420213557607
TPCH test speedup 5.372076634640989
TPCH skew test speedup 5.109624173668364
Epoch 23/50 |loss: 0.149007| train set 5.178x speedup, test set 5.110x speedup, val set 5.087x speedup, step: 13, train time 15.88 s
JOB test speedup 3.5556676378906302
TPCH test speedup 5.281262560872779
TPCH skew test speedup 5.034260584883616
Epoch 24/50 |loss: 0.145700| train set 5.105x speedup, test set 5.034x speedup, val set 5.142x speedup, step: 14, train time 15.77 s
JOB test speedup 3.26403247459145
TPCH test speedup 5.243296354013248
TPCH skew test speedup 4.86256952388216
Epoch 25/50 |loss: 0.144563| train set 5.151x speedup, test set 4.863x speedup, val set 5.039x speedup, step: 15, train time 15.96 s
JOB test speedup 3.3368218460008006
TPCH test speedup 5.5045001907165165
TPCH skew test speedup 5.181325408510301
Epoch 26/50 |loss: 0.145353| train set 5.211x speedup, test set 5.181x speedup, val set 5.085x speedup, step: 16, train time 16.17 s
JOB test speedup 3.478860553233978
TPCH test speedup 5.393060155761904
TPCH skew test speedup 5.0967490778019355
Epoch 27/50 |loss: 0.143200| train set 5.201x speedup, test set 5.097x speedup, val set 5.125x speedup, step: 17, train time 16.66 s
JOB test speedup 3.522104543837584
TPCH test speedup 5.46958404474634
TPCH skew test speedup 5.193300758691636
Epoch 28/50 |loss: 0.139484| train set 5.171x speedup, test set 5.193x speedup, val set 5.077x speedup, step: 18, train time 16.93 s
JOB test speedup 3.3844885250974674
TPCH test speedup 5.277034320661356
TPCH skew test speedup 4.890008121511609
Epoch 29/50 |loss: 0.140939| train set 5.202x speedup, test set 4.890x speedup, val set 4.769x speedup, step: 19, train time 16.98 s
JOB test speedup 3.283043671986406
TPCH test speedup 5.473134934514937
TPCH skew test speedup 5.13496762893637
Epoch 30/50 |loss: 0.139294| train set 5.142x speedup, test set 5.135x speedup, val set 5.046x speedup, step: 20, train time 16.72 s
JOB test speedup 3.465391659421246
TPCH test speedup 5.342432105914882
TPCH skew test speedup 5.007241454930026
Epoch 31/50 |loss: 0.139872| train set 5.093x speedup, test set 5.007x speedup, val set 4.947x speedup, step: 21, train time 16.17 s
JOB test speedup 3.4725026814237143
TPCH test speedup 5.362948565704779
TPCH skew test speedup 5.05188581800736
Epoch 32/50 |loss: 0.135046| train set 5.186x speedup, test set 5.052x speedup, val set 5.010x speedup, step: 22, train time 16.38 s
JOB test speedup 3.106137619358076
TPCH test speedup 5.33667955611495
TPCH skew test speedup 5.041901454289126
Epoch 33/50 |loss: 0.135624| train set 5.133x speedup, test set 5.042x speedup, val set 5.022x speedup, step: 23, train time 16.37 s
JOB test speedup 3.4602951293108473
TPCH test speedup 5.5011975665562955
TPCH skew test speedup 5.1788352693391
Epoch 34/50 |loss: 0.135108| train set 5.210x speedup, test set 5.179x speedup, val set 5.131x speedup, step: 24, train time 16.12 s
JOB test speedup 3.450681588741566
TPCH test speedup 5.442374722635575
TPCH skew test speedup 5.159637905477609
Epoch 35/50 |loss: 0.131966| train set 5.163x speedup, test set 5.160x speedup, val set 5.053x speedup, step: 25, train time 15.88 s
JOB test speedup 3.498931974314675
TPCH test speedup 5.3696662343814845
TPCH skew test speedup 5.057674382794351
Epoch 36/50 |loss: 0.129186| train set 5.200x speedup, test set 5.058x speedup, val set 5.135x speedup, step: 26, train time 15.94 s
JOB test speedup 3.428278677311504
TPCH test speedup 5.331870324714939
TPCH skew test speedup 5.074646533696625
Epoch 37/50 |loss: 0.130874| train set 5.132x speedup, test set 5.075x speedup, val set 5.030x speedup, step: 27, train time 16.13 s
JOB test speedup 3.4382778143591035
TPCH test speedup 5.281427085861298
TPCH skew test speedup 4.89423034126123
Epoch 38/50 |loss: 0.128459| train set 5.192x speedup, test set 4.894x speedup, val set 5.129x speedup, step: 28, train time 16.01 s
JOB test speedup 3.311768877743945
TPCH test speedup 5.466822296498533
TPCH skew test speedup 5.174186276905828
Epoch 39/50 |loss: 0.128030| train set 5.211x speedup, test set 5.174x speedup, val set 5.076x speedup, step: 29, train time 15.97 s
JOB test speedup 3.1976423535590164
TPCH test speedup 5.43837478477626
TPCH skew test speedup 5.118150769087284
Epoch 40/50 |loss: 0.128256| train set 5.208x speedup, test set 5.118x speedup, val set 5.130x speedup, step: 30, train time 16.15 s
JOB test speedup 3.3976656465227455
TPCH test speedup 4.971405824794217
TPCH skew test speedup 4.731645548027799
Epoch 41/50 |loss: 0.126992| train set 5.138x speedup, test set 4.732x speedup, val set 5.037x speedup, step: 31, train time 16.01 s
JOB test speedup 3.463054069911542
TPCH test speedup 5.457369693639302
TPCH skew test speedup 5.114988061906531
Epoch 42/50 |loss: 0.122398| train set 5.156x speedup, test set 5.115x speedup, val set 5.029x speedup, step: 32, train time 16.07 s
JOB test speedup 3.4506203189224234
TPCH test speedup 5.387626859083857
TPCH skew test speedup 5.103164038635449
Epoch 43/50 |loss: 0.125046| train set 5.182x speedup, test set 5.103x speedup, val set 5.039x speedup, step: 33, train time 16.12 s
JOB test speedup 3.4755791686609356
TPCH test speedup 5.4449644511006206
TPCH skew test speedup 5.124002866142572
Epoch 44/50 |loss: 0.126776| train set 5.160x speedup, test set 5.124x speedup, val set 5.083x speedup, step: 34, train time 16.47 s
JOB test speedup 3.091491976689301
TPCH test speedup 5.163374424802068
TPCH skew test speedup 4.822592008195867
Epoch 45/50 |loss: 0.122041| train set 5.196x speedup, test set 4.823x speedup, val set 4.760x speedup, step: 35, train time 16.02 s
JOB test speedup 3.25461517114948
TPCH test speedup 5.392262133028142
TPCH skew test speedup 5.0961064983232145
Epoch 46/50 |loss: 0.122919| train set 5.194x speedup, test set 5.096x speedup, val set 5.112x speedup, step: 36, train time 15.92 s
JOB test speedup 3.4299981479844925
TPCH test speedup 5.477359252110192
TPCH skew test speedup 5.139060156706211
Epoch 47/50 |loss: 0.124441| train set 5.165x speedup, test set 5.139x speedup, val set 5.013x speedup, step: 37, train time 16.08 s
JOB test speedup 3.531518574393639
TPCH test speedup 5.386110867004853
TPCH skew test speedup 5.090406149449397
Epoch 48/50 |loss: 0.118568| train set 5.201x speedup, test set 5.090x speedup, val set 5.109x speedup, step: 38, train time 15.88 s
JOB test speedup 3.4017149652085905
TPCH test speedup 5.442545594619371
TPCH skew test speedup 5.122216524335855
Epoch 49/50 |loss: 0.121336| train set 5.201x speedup, test set 5.122x speedup, val set 5.073x speedup, step: 39, train time 15.78 s
Training per epoch cost 16.047 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 1.050s, pg runtime 0.348s, speedup 0.331x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 2.362s, pg runtime 0.206s, speedup 0.087x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.332s, pg runtime 2.352s, speedup 7.089x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 2.365s, pg runtime 3.540s, speedup 1.497x
20, opt runtime 0.061s, model runtime 0.084s, pg runtime 0.086s, speedup 1.022x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.080s, pg runtime 0.112s, speedup 1.403x
28, opt runtime 0.154s, model runtime 0.476s, pg runtime 0.154s, speedup 0.324x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 40.230s, pg runtime 92.131s, speedup 2.290x
04, opt runtime 29.502s, model runtime 47.174s, pg runtime 112.305s, speedup 2.381x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 42.754s, pg runtime 86.923s, speedup 2.033x
04, opt runtime 36.646s, model runtime 41.191s, pg runtime 98.171s, speedup 2.383x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 11, train speedup 5.189, test speedup 3.030, val speedup 5.189
TPCH best validation speedup epoch: 11, train speedup 5.189, test speedup 5.278, val speedup 5.189
TPCH Skew best validation speedup epoch: 11, train speedup 5.189, test speedup 5.036, val speedup 5.189
execution cost 0:14:19.492396
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.238065, and there are 24631 training samples
in channel 9
JOB test speedup 0.9811407413612391
TPCH test speedup 4.598794673450536
TPCH skew test speedup 4.28502343265689
Epoch 0/50 |loss: 0.430629| train set 4.192x speedup, test set 4.285x speedup, val set 4.171x speedup, step: 1, train time 17.35 s
JOB test speedup 1.0174624035581112
TPCH test speedup 5.330048608997115
TPCH skew test speedup 5.068051691126329
Epoch 1/50 |loss: 0.316423| train set 4.521x speedup, test set 5.068x speedup, val set 4.918x speedup, step: 1, train time 15.48 s
JOB test speedup 0.5448360421618634
TPCH test speedup 5.018661788487452
TPCH skew test speedup 4.793100875905367
Epoch 2/50 |loss: 0.281521| train set 4.757x speedup, test set 4.793x speedup, val set 4.759x speedup, step: 2, train time 15.56 s
JOB test speedup 2.8550223426698085
TPCH test speedup 5.410935734153944
TPCH skew test speedup 5.092970968174421
Epoch 3/50 |loss: 0.256071| train set 5.155x speedup, test set 5.093x speedup, val set 5.073x speedup, step: 1, train time 15.58 s
JOB test speedup 3.1920293935831467
TPCH test speedup 5.0341415134298355
TPCH skew test speedup 4.915862333719996
Epoch 4/50 |loss: 0.240533| train set 4.979x speedup, test set 4.916x speedup, val set 4.935x speedup, step: 2, train time 15.57 s
JOB test speedup 3.2087185366778526
TPCH test speedup 5.435488609920432
TPCH skew test speedup 5.101590207115849
Epoch 5/50 |loss: 0.225543| train set 5.089x speedup, test set 5.102x speedup, val set 4.983x speedup, step: 3, train time 15.76 s
JOB test speedup 3.0991774701548263
TPCH test speedup 5.237983256332851
TPCH skew test speedup 5.001635620206129
Epoch 6/50 |loss: 0.215804| train set 4.986x speedup, test set 5.002x speedup, val set 4.832x speedup, step: 4, train time 15.85 s
JOB test speedup 3.5917217795885796
TPCH test speedup 5.3417657488646695
TPCH skew test speedup 5.133270555751267
Epoch 7/50 |loss: 0.206927| train set 4.966x speedup, test set 5.133x speedup, val set 4.854x speedup, step: 5, train time 15.92 s
JOB test speedup 3.369239468940685
TPCH test speedup 5.473134934514937
TPCH skew test speedup 5.13496762893637
Epoch 8/50 |loss: 0.202007| train set 5.134x speedup, test set 5.135x speedup, val set 5.068x speedup, step: 6, train time 15.77 s
JOB test speedup 3.63927648775017
TPCH test speedup 5.473134934514937
TPCH skew test speedup 5.13496762893637
Epoch 9/50 |loss: 0.194443| train set 5.121x speedup, test set 5.135x speedup, val set 5.011x speedup, step: 7, train time 15.87 s
JOB test speedup 3.6062816345795934
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 10/50 |loss: 0.190466| train set 5.184x speedup, test set 5.171x speedup, val set 5.065x speedup, step: 8, train time 15.76 s
JOB test speedup 2.6733604994842812
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 11/50 |loss: 0.184817| train set 5.198x speedup, test set 5.177x speedup, val set 5.123x speedup, step: 1, train time 15.87 s
JOB test speedup 3.589132094673433
TPCH test speedup 5.404428126471526
TPCH skew test speedup 5.087189499229763
Epoch 12/50 |loss: 0.181947| train set 5.180x speedup, test set 5.087x speedup, val set 5.092x speedup, step: 2, train time 15.84 s
JOB test speedup 3.5914621921595464
TPCH test speedup 5.055297578665844
TPCH skew test speedup 4.844584431512016
Epoch 13/50 |loss: 0.178651| train set 4.883x speedup, test set 4.845x speedup, val set 4.685x speedup, step: 3, train time 15.86 s
JOB test speedup 3.5470222582618667
TPCH test speedup 5.428876126004721
TPCH skew test speedup 5.067243514977394
Epoch 14/50 |loss: 0.175516| train set 5.184x speedup, test set 5.067x speedup, val set 5.008x speedup, step: 4, train time 15.78 s
JOB test speedup 2.9727646622754653
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 15/50 |loss: 0.171562| train set 5.175x speedup, test set 5.176x speedup, val set 5.068x speedup, step: 5, train time 15.69 s
JOB test speedup 0.8528311247040976
TPCH test speedup 5.473957075966744
TPCH skew test speedup 5.135620046582709
Epoch 16/50 |loss: 0.167542| train set 5.122x speedup, test set 5.136x speedup, val set 5.027x speedup, step: 6, train time 15.86 s
JOB test speedup 3.593885221994637
TPCH test speedup 5.461569700844974
TPCH skew test speedup 5.119048791933302
Epoch 17/50 |loss: 0.162710| train set 5.153x speedup, test set 5.119x speedup, val set 5.074x speedup, step: 7, train time 15.81 s
JOB test speedup 0.883699840668378
TPCH test speedup 5.479809159326056
TPCH skew test speedup 5.140858268119466
Epoch 18/50 |loss: 0.162022| train set 5.159x speedup, test set 5.141x speedup, val set 5.076x speedup, step: 8, train time 15.75 s
JOB test speedup 3.158027777742316
TPCH test speedup 5.496936413483057
TPCH skew test speedup 5.174679171629343
Epoch 19/50 |loss: 0.158406| train set 5.209x speedup, test set 5.175x speedup, val set 5.123x speedup, step: 1, train time 15.81 s
JOB test speedup 3.5267464318362785
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 20/50 |loss: 0.157841| train set 5.193x speedup, test set 5.176x speedup, val set 5.117x speedup, step: 2, train time 15.66 s
JOB test speedup 3.5172272476183117
TPCH test speedup 5.4606579978935885
TPCH skew test speedup 5.14405305840553
Epoch 21/50 |loss: 0.157907| train set 5.160x speedup, test set 5.144x speedup, val set 5.071x speedup, step: 3, train time 15.77 s
JOB test speedup 3.4679504829831753
TPCH test speedup 5.482642277157007
TPCH skew test speedup 5.194631910655062
Epoch 22/50 |loss: 0.153669| train set 5.199x speedup, test set 5.195x speedup, val set 5.099x speedup, step: 4, train time 15.78 s
JOB test speedup 3.53404126198939
TPCH test speedup 5.374599877647001
TPCH skew test speedup 5.094339550809248
Epoch 23/50 |loss: 0.150051| train set 5.178x speedup, test set 5.094x speedup, val set 5.123x speedup, step: 5, train time 15.93 s
JOB test speedup 3.5572166962230183
TPCH test speedup 5.521798541017591
TPCH skew test speedup 5.176351167707679
Epoch 24/50 |loss: 0.147071| train set 5.196x speedup, test set 5.176x speedup, val set 5.128x speedup, step: 1, train time 15.95 s
JOB test speedup 3.6008694222331004
TPCH test speedup 5.479809159326056
TPCH skew test speedup 5.140858268119466
Epoch 25/50 |loss: 0.144695| train set 5.214x speedup, test set 5.141x speedup, val set 5.077x speedup, step: 2, train time 16.00 s
JOB test speedup 3.221712196489496
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 26/50 |loss: 0.146799| train set 5.191x speedup, test set 5.178x speedup, val set 5.133x speedup, step: 1, train time 16.02 s
JOB test speedup 3.607091519025858
TPCH test speedup 5.411739294033793
TPCH skew test speedup 5.093612757114578
Epoch 27/50 |loss: 0.144612| train set 5.197x speedup, test set 5.094x speedup, val set 5.121x speedup, step: 2, train time 15.90 s
JOB test speedup 3.6545848276104755
TPCH test speedup 5.485096913682225
TPCH skew test speedup 5.19646912740422
Epoch 28/50 |loss: 0.141471| train set 5.160x speedup, test set 5.196x speedup, val set 5.114x speedup, step: 3, train time 17.03 s
JOB test speedup 3.6347203398174135
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 29/50 |loss: 0.141337| train set 5.162x speedup, test set 5.171x speedup, val set 5.068x speedup, step: 4, train time 16.22 s
JOB test speedup 3.4778763202747203
TPCH test speedup 5.516193355522769
TPCH skew test speedup 5.173303150158553
Epoch 30/50 |loss: 0.138869| train set 5.205x speedup, test set 5.173x speedup, val set 5.122x speedup, step: 5, train time 16.22 s
JOB test speedup 3.668998342750949
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 31/50 |loss: 0.141385| train set 5.208x speedup, test set 5.171x speedup, val set 5.125x speedup, step: 6, train time 16.07 s
JOB test speedup 3.6558778758450776
TPCH test speedup 5.404428126471526
TPCH skew test speedup 5.087189499229763
Epoch 32/50 |loss: 0.136635| train set 5.199x speedup, test set 5.087x speedup, val set 5.101x speedup, step: 7, train time 16.17 s
JOB test speedup 3.152778565094912
TPCH test speedup 5.454846725782058
TPCH skew test speedup 5.138808327573309
Epoch 33/50 |loss: 0.133755| train set 5.155x speedup, test set 5.139x speedup, val set 5.059x speedup, step: 8, train time 15.99 s
JOB test speedup 3.5579691321878015
TPCH test speedup 5.496936413483057
TPCH skew test speedup 5.174679171629343
Epoch 34/50 |loss: 0.134974| train set 5.206x speedup, test set 5.175x speedup, val set 5.135x speedup, step: 1, train time 16.06 s
JOB test speedup 3.6632816965923896
TPCH test speedup 5.498515443175084
TPCH skew test speedup 5.1878635249693605
Epoch 35/50 |loss: 0.129909| train set 5.179x speedup, test set 5.188x speedup, val set 5.048x speedup, step: 2, train time 15.76 s
JOB test speedup 3.6326891825501595
TPCH test speedup 5.462708824058381
TPCH skew test speedup 5.119786429015072
Epoch 36/50 |loss: 0.130998| train set 5.155x speedup, test set 5.120x speedup, val set 5.024x speedup, step: 3, train time 15.71 s
JOB test speedup 3.4256934427790395
TPCH test speedup 5.349417477200901
TPCH skew test speedup 5.05957014590163
Epoch 37/50 |loss: 0.129752| train set 5.127x speedup, test set 5.060x speedup, val set 5.029x speedup, step: 4, train time 15.76 s
JOB test speedup 3.1813785375814696
TPCH test speedup 5.497765721655262
TPCH skew test speedup 5.1753417199588565
Epoch 38/50 |loss: 0.129722| train set 5.194x speedup, test set 5.175x speedup, val set 5.120x speedup, step: 5, train time 15.82 s
JOB test speedup 3.6324037497762234
TPCH test speedup 5.413396690138301
TPCH skew test speedup 5.082711471385824
Epoch 39/50 |loss: 0.128912| train set 5.167x speedup, test set 5.083x speedup, val set 5.131x speedup, step: 6, train time 15.87 s
JOB test speedup 3.00406189804717
TPCH test speedup 5.43918651569365
TPCH skew test speedup 5.1187989201662365
Epoch 40/50 |loss: 0.128712| train set 5.156x speedup, test set 5.119x speedup, val set 5.057x speedup, step: 7, train time 15.81 s
JOB test speedup 3.33735668715797
TPCH test speedup 5.462614209912629
TPCH skew test speedup 5.170037634638963
Epoch 41/50 |loss: 0.126452| train set 5.193x speedup, test set 5.170x speedup, val set 5.074x speedup, step: 8, train time 15.65 s
JOB test speedup 3.594310621950827
TPCH test speedup 5.27903763885836
TPCH skew test speedup 4.925345501562113
Epoch 42/50 |loss: 0.122041| train set 5.147x speedup, test set 4.925x speedup, val set 5.065x speedup, step: 9, train time 15.81 s
JOB test speedup 3.5168814437244853
TPCH test speedup 5.479233536953707
TPCH skew test speedup 5.191117023741726
Epoch 43/50 |loss: 0.124924| train set 5.181x speedup, test set 5.191x speedup, val set 5.089x speedup, step: 10, train time 15.93 s
JOB test speedup 3.6069508012810156
TPCH test speedup 5.43918651569365
TPCH skew test speedup 5.1187989201662365
Epoch 44/50 |loss: 0.124369| train set 5.160x speedup, test set 5.119x speedup, val set 5.056x speedup, step: 11, train time 16.15 s
JOB test speedup 2.9106738322929746
TPCH test speedup 5.410935734153944
TPCH skew test speedup 5.092970968174421
Epoch 45/50 |loss: 0.121425| train set 5.195x speedup, test set 5.093x speedup, val set 5.114x speedup, step: 12, train time 15.87 s
JOB test speedup 3.3994014032922837
TPCH test speedup 5.392262133028142
TPCH skew test speedup 5.0961064983232145
Epoch 46/50 |loss: 0.122100| train set 5.202x speedup, test set 5.096x speedup, val set 5.110x speedup, step: 13, train time 15.77 s
JOB test speedup 2.9320754331744143
TPCH test speedup 5.454846725782058
TPCH skew test speedup 5.138808327573309
Epoch 47/50 |loss: 0.122138| train set 5.164x speedup, test set 5.139x speedup, val set 5.031x speedup, step: 14, train time 15.85 s
JOB test speedup 3.541601292340783
TPCH test speedup 5.285619193418253
TPCH skew test speedup 4.9426072865776325
Epoch 48/50 |loss: 0.119858| train set 5.201x speedup, test set 4.943x speedup, val set 5.070x speedup, step: 15, train time 15.84 s
JOB test speedup 3.5196886478031373
TPCH test speedup 5.496936413483057
TPCH skew test speedup 5.15438999410502
Epoch 49/50 |loss: 0.120314| train set 5.210x speedup, test set 5.154x speedup, val set 5.118x speedup, step: 16, train time 15.85 s
Training per epoch cost 15.899 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.028x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 1.050s, pg runtime 0.348s, speedup 0.331x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.332s, pg runtime 2.352s, speedup 7.089x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.366s, pg runtime 0.354s, speedup 0.966x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.061s, pg runtime 0.086s, speedup 1.407x
21, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
22, opt runtime 0.136s, model runtime 0.136s, pg runtime 0.891s, speedup 6.543x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.251s, pg runtime 0.250s, speedup 0.995x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 4.213s, pg runtime 14.646s, speedup 3.477x
14, opt runtime 3.449s, model runtime 4.406s, pg runtime 14.824s, speedup 3.365x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.507s, pg runtime 7.268s, speedup 0.968x
28, opt runtime 6.854s, model runtime 7.370s, pg runtime 6.854s, speedup 0.930x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
14, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 7.069s, pg runtime 6.749s, speedup 0.955x
28, opt runtime 7.213s, model runtime 7.656s, pg runtime 7.213s, speedup 0.942x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 34, train speedup 5.206, test speedup 3.558, val speedup 5.135
TPCH best validation speedup epoch: 34, train speedup 5.206, test speedup 5.497, val speedup 5.135
TPCH Skew best validation speedup epoch: 34, train speedup 5.206, test speedup 5.175, val speedup 5.135
execution cost 0:14:10.409134
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.270346, and there are 24631 training samples
in channel 9
JOB test speedup 1.1011095836448246
TPCH test speedup 4.625745623764395
TPCH skew test speedup 4.59001864987869
Epoch 0/50 |loss: 0.430916| train set 4.291x speedup, test set 4.590x speedup, val set 4.216x speedup, step: 1, train time 17.01 s
JOB test speedup 0.5556077781567209
TPCH test speedup 5.267219013331978
TPCH skew test speedup 4.9461747714521005
Epoch 1/50 |loss: 0.313621| train set 4.870x speedup, test set 4.946x speedup, val set 4.810x speedup, step: 1, train time 15.71 s
JOB test speedup 2.30975316541412
TPCH test speedup 5.087821311583465
TPCH skew test speedup 4.906188431628995
Epoch 2/50 |loss: 0.280522| train set 4.850x speedup, test set 4.906x speedup, val set 4.871x speedup, step: 1, train time 15.36 s
JOB test speedup 2.62521523253453
TPCH test speedup 5.422375570841268
TPCH skew test speedup 5.109911740380319
Epoch 3/50 |loss: 0.256161| train set 5.084x speedup, test set 5.110x speedup, val set 5.134x speedup, step: 1, train time 15.57 s
JOB test speedup 3.4141956043095347
TPCH test speedup 5.040437725584648
TPCH skew test speedup 4.86924277979517
Epoch 4/50 |loss: 0.240242| train set 4.816x speedup, test set 4.869x speedup, val set 4.762x speedup, step: 2, train time 15.47 s
JOB test speedup 3.277007320521235
TPCH test speedup 5.201962204353747
TPCH skew test speedup 4.826846770063314
Epoch 5/50 |loss: 0.227556| train set 5.099x speedup, test set 4.827x speedup, val set 4.679x speedup, step: 3, train time 15.79 s
JOB test speedup 2.850696789267553
TPCH test speedup 5.479809159326056
TPCH skew test speedup 5.140858268119466
Epoch 6/50 |loss: 0.216959| train set 5.124x speedup, test set 5.141x speedup, val set 5.142x speedup, step: 1, train time 15.58 s
JOB test speedup 3.563966374911926
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 7/50 |loss: 0.207361| train set 5.176x speedup, test set 5.178x speedup, val set 5.075x speedup, step: 2, train time 15.89 s
JOB test speedup 3.449533444166494
TPCH test speedup 5.473456649564307
TPCH skew test speedup 5.1350574207170085
Epoch 8/50 |loss: 0.204779| train set 5.121x speedup, test set 5.135x speedup, val set 4.994x speedup, step: 3, train time 15.77 s
JOB test speedup 3.616820568543209
TPCH test speedup 5.473957075966744
TPCH skew test speedup 5.135620046582709
Epoch 9/50 |loss: 0.192791| train set 5.125x speedup, test set 5.136x speedup, val set 5.009x speedup, step: 4, train time 15.63 s
JOB test speedup 3.5411195320863205
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 10/50 |loss: 0.193078| train set 5.189x speedup, test set 5.171x speedup, val set 5.063x speedup, step: 5, train time 15.88 s
JOB test speedup 3.459529307995654
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 11/50 |loss: 0.186640| train set 5.192x speedup, test set 5.178x speedup, val set 5.098x speedup, step: 6, train time 16.08 s
JOB test speedup 1.194376030748797
TPCH test speedup 5.404428126471526
TPCH skew test speedup 5.087189499229763
Epoch 12/50 |loss: 0.181058| train set 5.158x speedup, test set 5.087x speedup, val set 5.092x speedup, step: 7, train time 16.06 s
JOB test speedup 3.526767257723633
TPCH test speedup 5.502028161061637
TPCH skew test speedup 5.17625992600577
Epoch 13/50 |loss: 0.180059| train set 5.194x speedup, test set 5.176x speedup, val set 5.106x speedup, step: 8, train time 15.97 s
JOB test speedup 3.494325136176172
TPCH test speedup 5.502028161061637
TPCH skew test speedup 5.179498882429487
Epoch 14/50 |loss: 0.174193| train set 5.184x speedup, test set 5.179x speedup, val set 5.072x speedup, step: 9, train time 16.15 s
JOB test speedup 3.3849132472405
TPCH test speedup 5.4096641205800795
TPCH skew test speedup 5.09193582823723
Epoch 15/50 |loss: 0.172414| train set 5.182x speedup, test set 5.092x speedup, val set 5.071x speedup, step: 10, train time 16.16 s
JOB test speedup 3.6034553869263735
TPCH test speedup 5.040341240227944
TPCH skew test speedup 4.7858593727614345
Epoch 16/50 |loss: 0.168334| train set 5.175x speedup, test set 4.786x speedup, val set 5.002x speedup, step: 11, train time 16.02 s
JOB test speedup 3.60988299743109
TPCH test speedup 5.142155197584572
TPCH skew test speedup 4.878655937353856
Epoch 17/50 |loss: 0.163376| train set 5.194x speedup, test set 4.879x speedup, val set 4.994x speedup, step: 12, train time 16.07 s
JOB test speedup 3.5098122217302565
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 18/50 |loss: 0.162328| train set 5.205x speedup, test set 5.178x speedup, val set 5.110x speedup, step: 13, train time 16.17 s
JOB test speedup 3.0779905983370144
TPCH test speedup 5.5036688497372115
TPCH skew test speedup 5.180661327327281
Epoch 19/50 |loss: 0.162582| train set 5.211x speedup, test set 5.181x speedup, val set 5.128x speedup, step: 14, train time 16.06 s
JOB test speedup 3.3838112219843004
TPCH test speedup 5.405229754524604
TPCH skew test speedup 5.08782983180582
Epoch 20/50 |loss: 0.157443| train set 5.198x speedup, test set 5.088x speedup, val set 5.106x speedup, step: 15, train time 16.08 s
JOB test speedup 3.177444242993903
TPCH test speedup 5.298175598716297
TPCH skew test speedup 5.094916584834359
Epoch 21/50 |loss: 0.158567| train set 4.990x speedup, test set 5.095x speedup, val set 4.879x speedup, step: 16, train time 16.31 s
JOB test speedup 3.528309121157867
TPCH test speedup 5.176613189988009
TPCH skew test speedup 4.923044484527549
Epoch 22/50 |loss: 0.153957| train set 4.957x speedup, test set 4.923x speedup, val set 4.789x speedup, step: 17, train time 16.06 s
JOB test speedup 3.608101636091654
TPCH test speedup 5.375392680740704
TPCH skew test speedup 5.075311471629187
Epoch 23/50 |loss: 0.150619| train set 5.174x speedup, test set 5.075x speedup, val set 5.075x speedup, step: 18, train time 16.03 s
JOB test speedup 3.5957089824755513
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 24/50 |loss: 0.148635| train set 5.210x speedup, test set 5.172x speedup, val set 5.092x speedup, step: 19, train time 15.96 s
JOB test speedup 3.5513685337957805
TPCH test speedup 5.52063464352243
TPCH skew test speedup 5.175597142572594
Epoch 25/50 |loss: 0.144867| train set 5.203x speedup, test set 5.176x speedup, val set 5.094x speedup, step: 20, train time 16.24 s
JOB test speedup 3.5840740967815203
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 26/50 |loss: 0.145031| train set 5.200x speedup, test set 5.178x speedup, val set 5.085x speedup, step: 21, train time 16.09 s
JOB test speedup 3.6040776688406613
TPCH test speedup 5.411739294033793
TPCH skew test speedup 5.093612757114578
Epoch 27/50 |loss: 0.144246| train set 5.200x speedup, test set 5.094x speedup, val set 5.084x speedup, step: 22, train time 15.99 s
JOB test speedup 3.626476221848141
TPCH test speedup 5.5036688497372115
TPCH skew test speedup 5.180661327327281
Epoch 28/50 |loss: 0.140301| train set 5.185x speedup, test set 5.181x speedup, val set 5.062x speedup, step: 23, train time 15.97 s
JOB test speedup 3.618294547600972
TPCH test speedup 5.517505426169212
TPCH skew test speedup 5.172199054505564
Epoch 29/50 |loss: 0.140251| train set 5.193x speedup, test set 5.172x speedup, val set 5.094x speedup, step: 24, train time 16.21 s
JOB test speedup 3.4430429330471526
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 30/50 |loss: 0.138503| train set 5.196x speedup, test set 5.171x speedup, val set 5.113x speedup, step: 25, train time 16.11 s
JOB test speedup 3.5845086375742135
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 31/50 |loss: 0.139591| train set 5.212x speedup, test set 5.171x speedup, val set 5.131x speedup, step: 26, train time 16.07 s
JOB test speedup 3.6411085158134586
TPCH test speedup 5.3865954484636696
TPCH skew test speedup 5.090959032837832
Epoch 32/50 |loss: 0.136421| train set 5.190x speedup, test set 5.091x speedup, val set 5.074x speedup, step: 27, train time 15.99 s
JOB test speedup 3.167571447212268
TPCH test speedup 5.113276159374312
TPCH skew test speedup 4.921104757083309
Epoch 33/50 |loss: 0.133855| train set 4.976x speedup, test set 4.921x speedup, val set 4.912x speedup, step: 28, train time 16.08 s
JOB test speedup 3.5973218549343624
TPCH test speedup 5.390687185083744
TPCH skew test speedup 5.091847538162835
Epoch 34/50 |loss: 0.135519| train set 5.202x speedup, test set 5.092x speedup, val set 5.084x speedup, step: 29, train time 16.01 s
JOB test speedup 0.8988489737506321
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 35/50 |loss: 0.131269| train set 5.161x speedup, test set 5.172x speedup, val set 5.101x speedup, step: 30, train time 16.14 s
JOB test speedup 3.6317704447004333
TPCH test speedup 5.4096641205800795
TPCH skew test speedup 5.0722890810489005
Epoch 36/50 |loss: 0.129375| train set 5.202x speedup, test set 5.072x speedup, val set 5.095x speedup, step: 31, train time 16.07 s
JOB test speedup 3.5385508429475836
TPCH test speedup 5.391407984833334
TPCH skew test speedup 5.107117188623215
Epoch 37/50 |loss: 0.131788| train set 5.183x speedup, test set 5.107x speedup, val set 5.046x speedup, step: 32, train time 16.20 s
JOB test speedup 0.8632565740468917
TPCH test speedup 5.212686456852732
TPCH skew test speedup 4.925972654175458
Epoch 38/50 |loss: 0.127058| train set 5.184x speedup, test set 4.926x speedup, val set 4.818x speedup, step: 33, train time 16.15 s
JOB test speedup 2.971493931741896
TPCH test speedup 5.4813565987882695
TPCH skew test speedup 5.154480466428327
Epoch 39/50 |loss: 0.127287| train set 5.179x speedup, test set 5.154x speedup, val set 5.059x speedup, step: 34, train time 16.16 s
JOB test speedup 2.9658579190479175
TPCH test speedup 5.43918651569365
TPCH skew test speedup 5.1187989201662365
Epoch 40/50 |loss: 0.125379| train set 5.210x speedup, test set 5.119x speedup, val set 5.026x speedup, step: 35, train time 16.32 s
JOB test speedup 3.64239702627962
TPCH test speedup 5.457369693639302
TPCH skew test speedup 5.114988061906531
Epoch 41/50 |loss: 0.125290| train set 5.143x speedup, test set 5.115x speedup, val set 5.028x speedup, step: 36, train time 17.41 s
JOB test speedup 3.62125876710089
TPCH test speedup 5.280235256530228
TPCH skew test speedup 5.071891638771966
Epoch 42/50 |loss: 0.121105| train set 4.993x speedup, test set 5.072x speedup, val set 4.844x speedup, step: 37, train time 16.66 s
JOB test speedup 3.560270070548947
TPCH test speedup 5.517178512301363
TPCH skew test speedup 5.172107959119306
Epoch 43/50 |loss: 0.123692| train set 5.180x speedup, test set 5.172x speedup, val set 5.050x speedup, step: 38, train time 16.40 s
JOB test speedup 2.9421168944193297
TPCH test speedup 5.48103395442058
TPCH skew test speedup 5.15438999410502
Epoch 44/50 |loss: 0.124287| train set 5.212x speedup, test set 5.154x speedup, val set 5.088x speedup, step: 39, train time 17.04 s
JOB test speedup 3.3538782377187712
TPCH test speedup 4.697465289037015
TPCH skew test speedup 4.366733835294176
Epoch 45/50 |loss: 0.120542| train set 5.194x speedup, test set 4.367x speedup, val set 4.699x speedup, step: 40, train time 16.37 s
JOB test speedup 3.550344659765585
TPCH test speedup 4.869681447925363
TPCH skew test speedup 4.595826782938592
Epoch 46/50 |loss: 0.122536| train set 5.192x speedup, test set 4.596x speedup, val set 4.813x speedup, step: 41, train time 16.21 s
JOB test speedup 3.602207677237757
TPCH test speedup 5.497765721655262
TPCH skew test speedup 5.1753417199588565
Epoch 47/50 |loss: 0.120028| train set 5.216x speedup, test set 5.175x speedup, val set 5.098x speedup, step: 42, train time 16.30 s
JOB test speedup 3.619433192877262
TPCH test speedup 5.5011975665562955
TPCH skew test speedup 5.1788352693391
Epoch 48/50 |loss: 0.118128| train set 5.201x speedup, test set 5.179x speedup, val set 5.084x speedup, step: 43, train time 15.97 s
JOB test speedup 3.584868908176513
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 49/50 |loss: 0.120363| train set 5.199x speedup, test set 5.177x speedup, val set 5.091x speedup, step: 44, train time 16.23 s
Training per epoch cost 16.105 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 1.050s, pg runtime 0.348s, speedup 0.331x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 1.678s, pg runtime 0.802s, speedup 0.478x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 3.088s, pg runtime 3.540s, speedup 1.146x
20, opt runtime 0.061s, model runtime 0.079s, pg runtime 0.086s, speedup 1.091x
21, opt runtime 0.626s, model runtime 1.404s, pg runtime 2.558s, speedup 1.822x
22, opt runtime 0.136s, model runtime 0.231s, pg runtime 0.891s, speedup 3.855x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.116s, pg runtime 0.112s, speedup 0.970x
28, opt runtime 0.154s, model runtime 0.476s, pg runtime 0.154s, speedup 0.324x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 38.718s, pg runtime 69.421s, speedup 1.793x
34, opt runtime 35.527s, model runtime 42.634s, pg runtime 71.730s, speedup 1.682x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 40.423s, pg runtime 58.921s, speedup 1.458x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 6, train speedup 5.124, test speedup 2.851, val speedup 5.142
TPCH best validation speedup epoch: 6, train speedup 5.124, test speedup 5.480, val speedup 5.142
TPCH Skew best validation speedup epoch: 6, train speedup 5.124, test speedup 5.141, val speedup 5.142
execution cost 0:14:21.739158
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.211334, and there are 24631 training samples
in channel 9
JOB test speedup 0.9869302985083478
TPCH test speedup 4.860296170942858
TPCH skew test speedup 4.419062969121833
Epoch 0/50 |loss: 0.431584| train set 4.380x speedup, test set 4.419x speedup, val set 4.425x speedup, step: 1, train time 17.26 s
JOB test speedup 0.5646759624980472
TPCH test speedup 5.408577043770465
TPCH skew test speedup 5.13763898159374
Epoch 1/50 |loss: 0.314401| train set 4.972x speedup, test set 5.138x speedup, val set 4.981x speedup, step: 1, train time 15.81 s
JOB test speedup 0.989877829987635
TPCH test speedup 5.080360228269005
TPCH skew test speedup 4.89405857619651
Epoch 2/50 |loss: 0.280919| train set 4.751x speedup, test set 4.894x speedup, val set 4.846x speedup, step: 2, train time 15.56 s
JOB test speedup 3.231475912447232
TPCH test speedup 5.3331196728701915
TPCH skew test speedup 5.025205052252197
Epoch 3/50 |loss: 0.255885| train set 5.068x speedup, test set 5.025x speedup, val set 5.014x speedup, step: 1, train time 16.02 s
JOB test speedup 2.850294810886828
TPCH test speedup 5.257111220460683
TPCH skew test speedup 5.0502866864127425
Epoch 4/50 |loss: 0.240320| train set 4.923x speedup, test set 5.050x speedup, val set 4.933x speedup, step: 2, train time 15.89 s
JOB test speedup 3.389324131541924
TPCH test speedup 5.417373210038453
TPCH skew test speedup 5.116918434897405
Epoch 5/50 |loss: 0.226748| train set 5.098x speedup, test set 5.117x speedup, val set 4.960x speedup, step: 3, train time 17.48 s
JOB test speedup 3.2535897715529103
TPCH test speedup 5.237983256332851
TPCH skew test speedup 5.001635620206129
Epoch 6/50 |loss: 0.217377| train set 4.964x speedup, test set 5.002x speedup, val set 4.831x speedup, step: 4, train time 16.57 s
JOB test speedup 0.8888006512277824
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 7/50 |loss: 0.207284| train set 5.189x speedup, test set 5.176x speedup, val set 5.093x speedup, step: 1, train time 16.78 s
JOB test speedup 3.350142319955643
TPCH test speedup 5.517505426169212
TPCH skew test speedup 5.172199054505564
Epoch 8/50 |loss: 0.203628| train set 5.166x speedup, test set 5.172x speedup, val set 5.086x speedup, step: 2, train time 16.18 s
JOB test speedup 3.5125177900358358
TPCH test speedup 5.478182663250455
TPCH skew test speedup 5.139713614776333
Epoch 9/50 |loss: 0.194270| train set 5.106x speedup, test set 5.140x speedup, val set 4.999x speedup, step: 3, train time 16.71 s
JOB test speedup 3.5177004952187994
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 10/50 |loss: 0.190335| train set 5.194x speedup, test set 5.176x speedup, val set 5.091x speedup, step: 4, train time 16.05 s
JOB test speedup 3.3008829010444005
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 11/50 |loss: 0.186039| train set 5.199x speedup, test set 5.177x speedup, val set 5.113x speedup, step: 1, train time 15.95 s
JOB test speedup 3.516946540894406
TPCH test speedup 5.451808995756212
TPCH skew test speedup 4.915755659548717
Epoch 12/50 |loss: 0.180703| train set 5.093x speedup, test set 4.916x speedup, val set 4.944x speedup, step: 2, train time 16.14 s
JOB test speedup 3.4524653602159185
TPCH test speedup 5.408547010220007
TPCH skew test speedup 5.091206193948426
Epoch 13/50 |loss: 0.179444| train set 5.185x speedup, test set 5.091x speedup, val set 5.085x speedup, step: 3, train time 15.77 s
JOB test speedup 3.3993229845949826
TPCH test speedup 5.521471118230205
TPCH skew test speedup 5.17625992600577
Epoch 14/50 |loss: 0.176181| train set 5.182x speedup, test set 5.176x speedup, val set 5.092x speedup, step: 4, train time 15.94 s
JOB test speedup 3.1947762819734886
TPCH test speedup 5.411739294033793
TPCH skew test speedup 5.093612757114578
Epoch 15/50 |loss: 0.172805| train set 5.175x speedup, test set 5.094x speedup, val set 5.110x speedup, step: 5, train time 16.06 s
JOB test speedup 3.5114995013635553
TPCH test speedup 5.3331196728701915
TPCH skew test speedup 5.025205052252197
Epoch 16/50 |loss: 0.166630| train set 5.105x speedup, test set 5.025x speedup, val set 5.043x speedup, step: 6, train time 15.96 s
JOB test speedup 3.3651317516473727
TPCH test speedup 5.443358571176028
TPCH skew test speedup 5.122865705645287
Epoch 17/50 |loss: 0.163358| train set 5.148x speedup, test set 5.123x speedup, val set 5.063x speedup, step: 7, train time 15.98 s
JOB test speedup 3.147929742114695
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 18/50 |loss: 0.162091| train set 5.202x speedup, test set 5.177x speedup, val set 5.058x speedup, step: 8, train time 16.01 s
JOB test speedup 3.3523301481172307
TPCH test speedup 5.338655459802025
TPCH skew test speedup 5.130826381703499
Epoch 19/50 |loss: 0.160705| train set 5.040x speedup, test set 5.131x speedup, val set 4.931x speedup, step: 9, train time 16.00 s
JOB test speedup 3.3573235905272742
TPCH test speedup 5.4093498607210995
TPCH skew test speedup 5.091847538162835
Epoch 20/50 |loss: 0.158061| train set 5.199x speedup, test set 5.092x speedup, val set 5.106x speedup, step: 10, train time 16.17 s
JOB test speedup 3.2825447277011794
TPCH test speedup 5.351364252299477
TPCH skew test speedup 5.085603828768253
Epoch 21/50 |loss: 0.157728| train set 5.156x speedup, test set 5.086x speedup, val set 5.112x speedup, step: 11, train time 16.26 s
JOB test speedup 3.373970258838417
TPCH test speedup 5.483467277576689
TPCH skew test speedup 5.195391492690927
Epoch 22/50 |loss: 0.154515| train set 5.178x speedup, test set 5.195x speedup, val set 5.098x speedup, step: 12, train time 16.01 s
JOB test speedup 3.3795165341966706
TPCH test speedup 5.390610450939109
TPCH skew test speedup 5.106471992303872
Epoch 23/50 |loss: 0.151649| train set 5.175x speedup, test set 5.106x speedup, val set 5.050x speedup, step: 13, train time 16.05 s
JOB test speedup 3.3596098562432224
TPCH test speedup 5.4096641205800795
TPCH skew test speedup 5.09193582823723
Epoch 24/50 |loss: 0.148731| train set 5.202x speedup, test set 5.092x speedup, val set 5.116x speedup, step: 1, train time 16.02 s
JOB test speedup 3.2175204011236667
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 25/50 |loss: 0.147403| train set 5.210x speedup, test set 5.177x speedup, val set 5.138x speedup, step: 1, train time 15.87 s
JOB test speedup 3.3573235905272742
TPCH test speedup 5.52396065392545
TPCH skew test speedup 5.178084167992863
Epoch 26/50 |loss: 0.147707| train set 5.206x speedup, test set 5.178x speedup, val set 5.121x speedup, step: 2, train time 15.96 s
JOB test speedup 3.3934197706161227
TPCH test speedup 5.4093498607210995
TPCH skew test speedup 5.091847538162835
Epoch 27/50 |loss: 0.143232| train set 5.200x speedup, test set 5.092x speedup, val set 5.110x speedup, step: 3, train time 16.16 s
JOB test speedup 3.497511859829842
TPCH test speedup 5.469262784765139
TPCH skew test speedup 5.1760090573179065
Epoch 28/50 |loss: 0.144293| train set 5.173x speedup, test set 5.176x speedup, val set 5.077x speedup, step: 4, train time 16.15 s
JOB test speedup 2.8794187117918004
TPCH test speedup 5.520961967108627
TPCH skew test speedup 5.175688360910086
Epoch 29/50 |loss: 0.143780| train set 5.206x speedup, test set 5.176x speedup, val set 5.094x speedup, step: 5, train time 16.04 s
JOB test speedup 3.40587480931458
TPCH test speedup 5.523123424800897
TPCH skew test speedup 5.177420917344757
Epoch 30/50 |loss: 0.141962| train set 5.204x speedup, test set 5.177x speedup, val set 5.131x speedup, step: 6, train time 15.88 s
JOB test speedup 3.492281455861608
TPCH test speedup 5.404428126471526
TPCH skew test speedup 5.087189499229763
Epoch 31/50 |loss: 0.140723| train set 5.206x speedup, test set 5.087x speedup, val set 5.110x speedup, step: 7, train time 15.96 s
JOB test speedup 3.4847282310157266
TPCH test speedup 5.411250178310081
TPCH skew test speedup 5.093059297212875
Epoch 32/50 |loss: 0.139729| train set 5.197x speedup, test set 5.093x speedup, val set 5.111x speedup, step: 8, train time 15.95 s
JOB test speedup 3.317671921753701
TPCH test speedup 5.445778150501971
TPCH skew test speedup 5.124652500355726
Epoch 33/50 |loss: 0.137566| train set 5.162x speedup, test set 5.125x speedup, val set 5.068x speedup, step: 9, train time 15.92 s
JOB test speedup 3.4717582617369596
TPCH test speedup 5.504594972517429
TPCH skew test speedup 5.155300780061089
Epoch 34/50 |loss: 0.137295| train set 5.212x speedup, test set 5.155x speedup, val set 5.132x speedup, step: 10, train time 16.09 s
JOB test speedup 3.497684784358764
TPCH test speedup 5.37846954689173
TPCH skew test speedup 5.0891154462296155
Epoch 35/50 |loss: 0.135631| train set 5.176x speedup, test set 5.089x speedup, val set 5.096x speedup, step: 11, train time 16.22 s
JOB test speedup 3.4292624228979824
TPCH test speedup 5.404741814711084
TPCH skew test speedup 5.087277627840544
Epoch 36/50 |loss: 0.131480| train set 5.200x speedup, test set 5.087x speedup, val set 5.099x speedup, step: 12, train time 16.12 s
JOB test speedup 3.3235350586963284
TPCH test speedup 5.202221528693254
TPCH skew test speedup 4.899122962541731
Epoch 37/50 |loss: 0.132978| train set 5.151x speedup, test set 4.899x speedup, val set 5.082x speedup, step: 13, train time 16.12 s
JOB test speedup 2.6087324757292114
TPCH test speedup 5.4093498607210995
TPCH skew test speedup 5.091847538162835
Epoch 38/50 |loss: 0.131195| train set 5.199x speedup, test set 5.092x speedup, val set 5.105x speedup, step: 14, train time 16.02 s
JOB test speedup 3.3332565480425784
TPCH test speedup 5.48634002743629
TPCH skew test speedup 5.17104501412846
Epoch 39/50 |loss: 0.132169| train set 5.208x speedup, test set 5.171x speedup, val set 5.108x speedup, step: 15, train time 15.98 s
JOB test speedup 3.4043668288214946
TPCH test speedup 5.413364465872711
TPCH skew test speedup 5.0477864875867695
Epoch 40/50 |loss: 0.128799| train set 5.208x speedup, test set 5.048x speedup, val set 5.104x speedup, step: 16, train time 16.15 s
JOB test speedup 3.3489968815285684
TPCH test speedup 5.4432803302069015
TPCH skew test speedup 5.134482269978965
Epoch 41/50 |loss: 0.128252| train set 5.142x speedup, test set 5.134x speedup, val set 5.039x speedup, step: 17, train time 16.05 s
JOB test speedup 3.470831264845386
TPCH test speedup 5.167100992293896
TPCH skew test speedup 5.011088302749406
Epoch 42/50 |loss: 0.124851| train set 4.985x speedup, test set 5.011x speedup, val set 4.781x speedup, step: 18, train time 16.02 s
JOB test speedup 3.402419170544619
TPCH test speedup 5.393781590283104
TPCH skew test speedup 5.108893012524247
Epoch 43/50 |loss: 0.126315| train set 5.179x speedup, test set 5.109x speedup, val set 5.072x speedup, step: 19, train time 15.97 s
JOB test speedup 3.4319364776433825
TPCH test speedup 5.4449644511006206
TPCH skew test speedup 5.124002866142572
Epoch 44/50 |loss: 0.128369| train set 5.207x speedup, test set 5.124x speedup, val set 5.065x speedup, step: 20, train time 16.36 s
JOB test speedup 3.2325562300797883
TPCH test speedup 5.411739294033793
TPCH skew test speedup 5.093612757114578
Epoch 45/50 |loss: 0.123213| train set 5.197x speedup, test set 5.094x speedup, val set 5.100x speedup, step: 21, train time 15.89 s
JOB test speedup 3.383637698480698
TPCH test speedup 5.408547010220007
TPCH skew test speedup 5.091206193948426
Epoch 46/50 |loss: 0.126239| train set 5.200x speedup, test set 5.091x speedup, val set 5.110x speedup, step: 22, train time 15.86 s
JOB test speedup 3.345375556214773
TPCH test speedup 5.408547010220007
TPCH skew test speedup 5.091206193948426
Epoch 47/50 |loss: 0.122841| train set 5.214x speedup, test set 5.091x speedup, val set 5.088x speedup, step: 23, train time 16.04 s
JOB test speedup 3.0278970357520536
TPCH test speedup 5.5163433376054485
TPCH skew test speedup 5.171446238451663
Epoch 48/50 |loss: 0.122607| train set 5.210x speedup, test set 5.171x speedup, val set 5.075x speedup, step: 24, train time 16.06 s
JOB test speedup 3.3789441550174186
TPCH test speedup 5.410935734153944
TPCH skew test speedup 5.092970968174421
Epoch 49/50 |loss: 0.122505| train set 5.196x speedup, test set 5.093x speedup, val set 5.115x speedup, step: 25, train time 16.06 s
Training per epoch cost 16.111 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.332s, pg runtime 2.352s, speedup 7.089x
12, opt runtime 0.463s, model runtime 0.557s, pg runtime 0.557s, speedup 1.000x
13, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.061s, model runtime 0.084s, pg runtime 0.086s, speedup 1.022x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.136s, pg runtime 0.891s, speedup 6.543x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 25, train speedup 5.210, test speedup 3.218, val speedup 5.138
TPCH best validation speedup epoch: 25, train speedup 5.210, test speedup 5.523, val speedup 5.138
TPCH Skew best validation speedup epoch: 25, train speedup 5.210, test speedup 5.177, val speedup 5.138
execution cost 0:14:21.696753
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.222657, and there are 24443 training samples
in channel 9
JOB test speedup 1.1756639100404556
TPCH test speedup 3.938839843352766
TPCH skew test speedup 3.9729474392004174
Epoch 0/50 |loss: 0.435801| train set 4.241x speedup, test set 3.973x speedup, val set 4.074x speedup, step: 1, train time 16.94 s
JOB test speedup 0.8142398201710268
TPCH test speedup 5.308607731965058
TPCH skew test speedup 5.0113361535334
Epoch 1/50 |loss: 0.316977| train set 5.206x speedup, test set 5.011x speedup, val set 5.059x speedup, step: 1, train time 15.46 s
JOB test speedup 2.805036336281761
TPCH test speedup 5.066822113110868
TPCH skew test speedup 4.763577162852103
Epoch 2/50 |loss: 0.284022| train set 5.032x speedup, test set 4.764x speedup, val set 4.744x speedup, step: 2, train time 15.37 s
JOB test speedup 0.8908192000468974
TPCH test speedup 5.348412919064195
TPCH skew test speedup 4.953414141106379
Epoch 3/50 |loss: 0.257426| train set 5.232x speedup, test set 4.953x speedup, val set 4.808x speedup, step: 3, train time 15.35 s
JOB test speedup 0.8612095431878511
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 4/50 |loss: 0.236128| train set 5.343x speedup, test set 5.016x speedup, val set 4.886x speedup, step: 4, train time 15.47 s
JOB test speedup 2.5018842030619193
TPCH test speedup 5.348412919064195
TPCH skew test speedup 4.814105637335507
Epoch 5/50 |loss: 0.224667| train set 5.168x speedup, test set 4.814x speedup, val set 4.759x speedup, step: 5, train time 15.26 s
JOB test speedup 0.8287438801910718
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 6/50 |loss: 0.217970| train set 5.376x speedup, test set 5.017x speedup, val set 4.873x speedup, step: 6, train time 15.46 s
JOB test speedup 3.061712002287579
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 7/50 |loss: 0.203791| train set 5.352x speedup, test set 5.016x speedup, val set 4.888x speedup, step: 7, train time 15.36 s
JOB test speedup 3.4241948671487203
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 8/50 |loss: 0.198111| train set 5.369x speedup, test set 5.017x speedup, val set 4.887x speedup, step: 8, train time 15.46 s
JOB test speedup 3.5750345145203313
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 9/50 |loss: 0.192019| train set 5.304x speedup, test set 4.991x speedup, val set 4.911x speedup, step: 9, train time 15.38 s
JOB test speedup 3.177963371607675
TPCH test speedup 5.309220420153532
TPCH skew test speedup 5.0108818280437175
Epoch 10/50 |loss: 0.186902| train set 5.306x speedup, test set 5.011x speedup, val set 5.003x speedup, step: 10, train time 15.31 s
JOB test speedup 2.9117849325645526
TPCH test speedup 5.310608248671319
TPCH skew test speedup 5.013112192765863
Epoch 11/50 |loss: 0.178864| train set 5.339x speedup, test set 5.013x speedup, val set 5.074x speedup, step: 1, train time 15.48 s
JOB test speedup 2.983166596589728
TPCH test speedup 5.002790133038999
TPCH skew test speedup 4.890348282992369
Epoch 12/50 |loss: 0.180864| train set 5.333x speedup, test set 4.890x speedup, val set 4.965x speedup, step: 2, train time 15.45 s
JOB test speedup 3.590448693724504
TPCH test speedup 5.264094720003678
TPCH skew test speedup 4.839859300792719
Epoch 13/50 |loss: 0.175241| train set 5.184x speedup, test set 4.840x speedup, val set 4.803x speedup, step: 3, train time 15.36 s
JOB test speedup 3.415988832548525
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 14/50 |loss: 0.168983| train set 5.382x speedup, test set 5.017x speedup, val set 4.923x speedup, step: 4, train time 15.47 s
JOB test speedup 3.3447700108387726
TPCH test speedup 5.2080041055820825
TPCH skew test speedup 4.96756162104331
Epoch 15/50 |loss: 0.166234| train set 5.282x speedup, test set 4.968x speedup, val set 4.965x speedup, step: 5, train time 15.47 s
JOB test speedup 3.23675253699421
TPCH test speedup 5.4196272640304315
TPCH skew test speedup 5.014230354765658
Epoch 16/50 |loss: 0.163347| train set 5.386x speedup, test set 5.014x speedup, val set 5.032x speedup, step: 6, train time 15.48 s
JOB test speedup 0.8565630450084021
TPCH test speedup 5.3144608455406726
TPCH skew test speedup 4.971140905810445
Epoch 17/50 |loss: 0.159497| train set 5.299x speedup, test set 4.971x speedup, val set 4.851x speedup, step: 7, train time 15.61 s
JOB test speedup 0.8147440444451036
TPCH test speedup 5.124102341758726
TPCH skew test speedup 4.781005870526814
Epoch 18/50 |loss: 0.159082| train set 5.327x speedup, test set 4.781x speedup, val set 4.837x speedup, step: 8, train time 15.47 s
JOB test speedup 3.4734756935797475
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 19/50 |loss: 0.156283| train set 5.348x speedup, test set 4.991x speedup, val set 4.874x speedup, step: 9, train time 15.58 s
JOB test speedup 3.5261430420651796
TPCH test speedup 5.177632009332507
TPCH skew test speedup 4.8024624115450045
Epoch 20/50 |loss: 0.151158| train set 5.207x speedup, test set 4.802x speedup, val set 4.894x speedup, step: 10, train time 15.58 s
JOB test speedup 0.8503076101508276
TPCH test speedup 5.11906183051351
TPCH skew test speedup 4.820328018899253
Epoch 21/50 |loss: 0.149854| train set 5.288x speedup, test set 4.820x speedup, val set 4.940x speedup, step: 11, train time 15.47 s
JOB test speedup 3.572233016843622
TPCH test speedup 5.224065977785128
TPCH skew test speedup 4.987708230072562
Epoch 22/50 |loss: 0.149026| train set 5.297x speedup, test set 4.988x speedup, val set 4.966x speedup, step: 12, train time 15.75 s
JOB test speedup 3.496938459820212
TPCH test speedup 5.393458622924726
TPCH skew test speedup 4.996437100421392
Epoch 23/50 |loss: 0.148556| train set 5.395x speedup, test set 4.996x speedup, val set 4.922x speedup, step: 13, train time 15.67 s
JOB test speedup 3.305054320285898
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990415292220176
Epoch 24/50 |loss: 0.145491| train set 5.381x speedup, test set 4.990x speedup, val set 4.886x speedup, step: 14, train time 15.56 s
JOB test speedup 3.1851117775009956
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 25/50 |loss: 0.140633| train set 5.338x speedup, test set 4.991x speedup, val set 4.875x speedup, step: 15, train time 15.61 s
JOB test speedup 3.6215391329605904
TPCH test speedup 5.421073421195584
TPCH skew test speedup 4.996437100421392
Epoch 26/50 |loss: 0.141091| train set 5.387x speedup, test set 4.996x speedup, val set 4.909x speedup, step: 16, train time 15.58 s
JOB test speedup 3.588010887137333
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 27/50 |loss: 0.142413| train set 5.384x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 17, train time 15.37 s
JOB test speedup 3.481613055021276
TPCH test speedup 5.223236383283274
TPCH skew test speedup 4.984989889240244
Epoch 28/50 |loss: 0.138689| train set 5.340x speedup, test set 4.985x speedup, val set 4.966x speedup, step: 18, train time 15.47 s
JOB test speedup 3.3894325906744256
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 29/50 |loss: 0.135255| train set 5.379x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 19, train time 15.46 s
JOB test speedup 3.6344152613433938
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 30/50 |loss: 0.135019| train set 5.393x speedup, test set 5.016x speedup, val set 5.018x speedup, step: 20, train time 15.66 s
JOB test speedup 3.643399112412735
TPCH test speedup 5.403229799224642
TPCH skew test speedup 4.9965973904716385
Epoch 31/50 |loss: 0.131421| train set 5.397x speedup, test set 4.997x speedup, val set 4.924x speedup, step: 21, train time 15.49 s
JOB test speedup 3.581835180542668
TPCH test speedup 5.243886529977567
TPCH skew test speedup 4.926692858068222
Epoch 32/50 |loss: 0.131000| train set 5.394x speedup, test set 4.927x speedup, val set 5.020x speedup, step: 22, train time 15.88 s
JOB test speedup 3.625701734273621
TPCH test speedup 5.221032467305439
TPCH skew test speedup 4.805326549608824
Epoch 33/50 |loss: 0.133633| train set 5.394x speedup, test set 4.805x speedup, val set 4.922x speedup, step: 23, train time 15.75 s
JOB test speedup 3.010563841598406
TPCH test speedup 5.404134942221828
TPCH skew test speedup 4.996437100421392
Epoch 34/50 |loss: 0.131185| train set 5.389x speedup, test set 4.996x speedup, val set 4.922x speedup, step: 24, train time 15.66 s
JOB test speedup 3.5212195084589855
TPCH test speedup 5.208845017148437
TPCH skew test speedup 4.967403188476435
Epoch 35/50 |loss: 0.128762| train set 5.306x speedup, test set 4.967x speedup, val set 4.966x speedup, step: 25, train time 15.56 s
JOB test speedup 3.6309778086194604
TPCH test speedup 5.409663640329928
TPCH skew test speedup 4.9965973904716385
Epoch 36/50 |loss: 0.128407| train set 5.380x speedup, test set 4.997x speedup, val set 4.923x speedup, step: 26, train time 15.56 s
JOB test speedup 3.5131083494492983
TPCH test speedup 5.207414554301406
TPCH skew test speedup 4.968008124645984
Epoch 37/50 |loss: 0.130139| train set 5.333x speedup, test set 4.968x speedup, val set 4.978x speedup, step: 27, train time 15.61 s
JOB test speedup 3.472419438723193
TPCH test speedup 5.402595222724218
TPCH skew test speedup 4.997049129260342
Epoch 38/50 |loss: 0.126377| train set 5.387x speedup, test set 4.997x speedup, val set 4.924x speedup, step: 28, train time 15.80 s
JOB test speedup 2.87327639479174
TPCH test speedup 5.2080041055820825
TPCH skew test speedup 4.96756162104331
Epoch 39/50 |loss: 0.125221| train set 5.298x speedup, test set 4.968x speedup, val set 5.005x speedup, step: 29, train time 15.68 s
JOB test speedup 3.637527085652778
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 40/50 |loss: 0.123618| train set 5.387x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 30, train time 15.97 s
JOB test speedup 3.5436138429585045
TPCH test speedup 5.3038356904897626
TPCH skew test speedup 4.966080954226525
Epoch 41/50 |loss: 0.125472| train set 5.391x speedup, test set 4.966x speedup, val set 4.915x speedup, step: 31, train time 15.59 s
JOB test speedup 3.5320598371169445
TPCH test speedup 5.404490654660075
TPCH skew test speedup 4.996789653825579
Epoch 42/50 |loss: 0.121583| train set 5.392x speedup, test set 4.997x speedup, val set 4.909x speedup, step: 32, train time 15.72 s
JOB test speedup 3.569249800744817
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 43/50 |loss: 0.123515| train set 5.384x speedup, test set 5.017x speedup, val set 4.923x speedup, step: 33, train time 15.77 s
JOB test speedup 2.9069662238294143
TPCH test speedup 5.294352011968798
TPCH skew test speedup 4.993112288493777
Epoch 44/50 |loss: 0.122290| train set 5.344x speedup, test set 4.993x speedup, val set 5.003x speedup, step: 34, train time 16.15 s
JOB test speedup 2.978022545685501
TPCH test speedup 5.3309239580153225
TPCH skew test speedup 4.9910258465986415
Epoch 45/50 |loss: 0.120339| train set 5.341x speedup, test set 4.991x speedup, val set 4.886x speedup, step: 35, train time 15.79 s
JOB test speedup 3.1818264455076637
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 46/50 |loss: 0.120892| train set 5.394x speedup, test set 5.017x speedup, val set 4.922x speedup, step: 36, train time 15.76 s
JOB test speedup 3.53028877671693
TPCH test speedup 5.3141993278581445
TPCH skew test speedup 4.970852481479952
Epoch 47/50 |loss: 0.120199| train set 5.393x speedup, test set 4.971x speedup, val set 4.914x speedup, step: 37, train time 15.75 s
JOB test speedup 3.3034006306795725
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 48/50 |loss: 0.117872| train set 5.389x speedup, test set 4.991x speedup, val set 4.874x speedup, step: 38, train time 15.69 s
JOB test speedup 3.4674157387503266
TPCH test speedup 5.293483267744177
TPCH skew test speedup 4.993272365285864
Epoch 49/50 |loss: 0.118239| train set 5.341x speedup, test set 4.993x speedup, val set 5.103x speedup, step: 1, train time 15.77 s
Training per epoch cost 15.606 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.189s, pg runtime 0.189s, speedup 1.000x
03, opt runtime 0.014s, model runtime 0.016s, pg runtime 0.014s, speedup 0.886x
04, opt runtime 0.348s, model runtime 1.050s, pg runtime 0.348s, speedup 0.331x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.648s, pg runtime 1.315s, speedup 0.798x
33, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
08, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.309s, pg runtime 1.356s, speedup 1.036x
20, opt runtime 1.340s, model runtime 1.490s, pg runtime 1.340s, speedup 0.899x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.098s, pg runtime 1.100s, speedup 1.001x
40, opt runtime 1.084s, model runtime 1.084s, pg runtime 1.155s, speedup 1.065x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 7.445s, pg runtime 12.078s, speedup 1.622x
08, opt runtime 5.471s, model runtime 7.216s, pg runtime 13.410s, speedup 1.858x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.244s, speedup 1.114x
20, opt runtime 1.367s, model runtime 1.474s, pg runtime 1.367s, speedup 0.928x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.853s, pg runtime 0.893s, speedup 1.047x
40, opt runtime 1.004s, model runtime 1.104s, pg runtime 1.004s, speedup 0.909x
====================
JOB best validation speedup epoch: 49, train speedup 5.341, test speedup 3.467, val speedup 5.103
TPCH best validation speedup epoch: 49, train speedup 5.341, test speedup 5.293, val speedup 5.103
TPCH Skew best validation speedup epoch: 49, train speedup 5.341, test speedup 4.993, val speedup 5.103
execution cost 0:13:55.361754
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.195869, and there are 24443 training samples
in channel 9
JOB test speedup 1.1455430443078347
TPCH test speedup 4.843575985150705
TPCH skew test speedup 4.642621287930626
Epoch 0/50 |loss: 0.437559| train set 4.922x speedup, test set 4.643x speedup, val set 4.613x speedup, step: 1, train time 16.74 s
JOB test speedup 2.827390088987451
TPCH test speedup 5.092755073876388
TPCH skew test speedup 4.770941394476395
Epoch 1/50 |loss: 0.318847| train set 4.983x speedup, test set 4.771x speedup, val set 4.746x speedup, step: 1, train time 15.41 s
JOB test speedup 2.5556095998071897
TPCH test speedup 4.8045881891111994
TPCH skew test speedup 4.55486057726662
Epoch 2/50 |loss: 0.283442| train set 5.019x speedup, test set 4.555x speedup, val set 4.724x speedup, step: 2, train time 15.41 s
JOB test speedup 3.382911756402817
TPCH test speedup 5.262023332315898
TPCH skew test speedup 4.927955258571437
Epoch 3/50 |loss: 0.253282| train set 5.237x speedup, test set 4.928x speedup, val set 4.801x speedup, step: 1, train time 15.26 s
JOB test speedup 0.8022562022794979
TPCH test speedup 5.348444781544195
TPCH skew test speedup 4.948336289204575
Epoch 4/50 |loss: 0.235444| train set 5.257x speedup, test set 4.948x speedup, val set 4.792x speedup, step: 2, train time 15.41 s
JOB test speedup 2.627491612060553
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 5/50 |loss: 0.222488| train set 5.352x speedup, test set 5.017x speedup, val set 4.976x speedup, step: 1, train time 15.48 s
JOB test speedup 2.876304723291236
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 6/50 |loss: 0.212088| train set 5.361x speedup, test set 5.017x speedup, val set 4.873x speedup, step: 2, train time 15.17 s
JOB test speedup 2.8756366446918378
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 7/50 |loss: 0.202919| train set 5.305x speedup, test set 5.016x speedup, val set 4.959x speedup, step: 3, train time 15.27 s
JOB test speedup 3.0465291337539373
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 8/50 |loss: 0.198482| train set 5.371x speedup, test set 5.017x speedup, val set 4.851x speedup, step: 4, train time 15.45 s
JOB test speedup 2.6643081340316557
TPCH test speedup 5.141007084114962
TPCH skew test speedup 4.743703119539819
Epoch 9/50 |loss: 0.192055| train set 5.156x speedup, test set 4.744x speedup, val set 4.828x speedup, step: 5, train time 15.47 s
JOB test speedup 3.0800311940146767
TPCH test speedup 5.223236383283274
TPCH skew test speedup 4.985439531520678
Epoch 10/50 |loss: 0.188230| train set 5.273x speedup, test set 4.985x speedup, val set 4.894x speedup, step: 6, train time 15.42 s
JOB test speedup 0.8316697196863237
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 11/50 |loss: 0.179017| train set 5.344x speedup, test set 5.014x speedup, val set 4.967x speedup, step: 7, train time 15.56 s
JOB test speedup 2.82224596566907
TPCH test speedup 5.310608248671319
TPCH skew test speedup 5.013566922808306
Epoch 12/50 |loss: 0.179691| train set 5.342x speedup, test set 5.014x speedup, val set 5.001x speedup, step: 1, train time 15.30 s
JOB test speedup 3.1046640307589914
TPCH test speedup 5.264094720003678
TPCH skew test speedup 4.839435534067396
Epoch 13/50 |loss: 0.174069| train set 5.363x speedup, test set 4.839x speedup, val set 4.921x speedup, step: 2, train time 15.39 s
JOB test speedup 2.589845476426807
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 14/50 |loss: 0.169707| train set 5.343x speedup, test set 5.014x speedup, val set 4.967x speedup, step: 3, train time 15.50 s
JOB test speedup 2.48670406353832
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 15/50 |loss: 0.165582| train set 5.335x speedup, test set 5.013x speedup, val set 4.991x speedup, step: 4, train time 15.47 s
JOB test speedup 3.057961950916675
TPCH test speedup 5.403229799224642
TPCH skew test speedup 5.016625279622707
Epoch 16/50 |loss: 0.163841| train set 5.380x speedup, test set 5.017x speedup, val set 4.922x speedup, step: 5, train time 15.48 s
JOB test speedup 2.806584602877997
TPCH test speedup 5.315074885615789
TPCH skew test speedup 4.9706938389332604
Epoch 17/50 |loss: 0.160246| train set 5.296x speedup, test set 4.971x speedup, val set 4.851x speedup, step: 6, train time 15.45 s
JOB test speedup 0.8190400931628907
TPCH test speedup 5.331805035940808
TPCH skew test speedup 4.990865913811858
Epoch 18/50 |loss: 0.157562| train set 5.331x speedup, test set 4.991x speedup, val set 4.874x speedup, step: 7, train time 15.39 s
JOB test speedup 2.4490233201576936
TPCH test speedup 5.224579617722351
TPCH skew test speedup 4.987197259211708
Epoch 19/50 |loss: 0.155739| train set 5.305x speedup, test set 4.987x speedup, val set 4.953x speedup, step: 8, train time 15.58 s
JOB test speedup 2.858088371056735
TPCH test speedup 5.185027820800241
TPCH skew test speedup 4.803384623518513
Epoch 20/50 |loss: 0.151011| train set 5.166x speedup, test set 4.803x speedup, val set 4.791x speedup, step: 9, train time 15.46 s
JOB test speedup 2.2920634234417165
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 21/50 |loss: 0.150166| train set 5.332x speedup, test set 5.013x speedup, val set 4.992x speedup, step: 10, train time 15.50 s
JOB test speedup 0.8148192413128416
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 22/50 |loss: 0.147616| train set 5.299x speedup, test set 4.991x speedup, val set 4.875x speedup, step: 11, train time 15.47 s
JOB test speedup 2.9050746779161702
TPCH test speedup 5.404134942221828
TPCH skew test speedup 4.996437100421392
Epoch 23/50 |loss: 0.147503| train set 5.390x speedup, test set 4.996x speedup, val set 4.888x speedup, step: 12, train time 15.67 s
JOB test speedup 2.474682982509432
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 24/50 |loss: 0.144641| train set 5.394x speedup, test set 5.017x speedup, val set 4.921x speedup, step: 13, train time 15.45 s
JOB test speedup 2.6001122337020517
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 25/50 |loss: 0.141086| train set 5.394x speedup, test set 5.017x speedup, val set 4.910x speedup, step: 14, train time 15.57 s
JOB test speedup 2.587356757176846
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 26/50 |loss: 0.140347| train set 5.390x speedup, test set 5.017x speedup, val set 4.909x speedup, step: 15, train time 15.49 s
JOB test speedup 2.5676573071068134
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 27/50 |loss: 0.141458| train set 5.390x speedup, test set 5.016x speedup, val set 4.887x speedup, step: 16, train time 15.51 s
JOB test speedup 2.6533893146781997
TPCH test speedup 5.402697806955012
TPCH skew test speedup 4.9942215454472905
Epoch 28/50 |loss: 0.137237| train set 5.347x speedup, test set 4.994x speedup, val set 5.003x speedup, step: 1, train time 15.65 s
JOB test speedup 2.9660016991817146
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 29/50 |loss: 0.134122| train set 5.340x speedup, test set 4.991x speedup, val set 4.853x speedup, step: 2, train time 15.59 s
JOB test speedup 2.650426378368783
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 30/50 |loss: 0.133644| train set 5.394x speedup, test set 5.017x speedup, val set 4.886x speedup, step: 3, train time 15.65 s
JOB test speedup 2.969438533863724
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 31/50 |loss: 0.131758| train set 5.396x speedup, test set 5.017x speedup, val set 4.922x speedup, step: 4, train time 15.61 s
JOB test speedup 2.645943224895104
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 32/50 |loss: 0.132780| train set 5.393x speedup, test set 5.017x speedup, val set 4.920x speedup, step: 5, train time 15.58 s
JOB test speedup 2.9859369656192833
TPCH test speedup 5.348444781544195
TPCH skew test speedup 4.948336289204575
Epoch 33/50 |loss: 0.130582| train set 5.397x speedup, test set 4.948x speedup, val set 4.827x speedup, step: 6, train time 15.46 s
JOB test speedup 2.90073897160396
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 34/50 |loss: 0.130491| train set 5.380x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 7, train time 15.56 s
JOB test speedup 2.7762032428168912
TPCH test speedup 5.3144608455406726
TPCH skew test speedup 4.971140905810445
Epoch 35/50 |loss: 0.127783| train set 5.305x speedup, test set 4.971x speedup, val set 4.964x speedup, step: 8, train time 15.67 s
JOB test speedup 2.9660417820707266
TPCH test speedup 5.419524035899206
TPCH skew test speedup 5.017080647248503
Epoch 36/50 |loss: 0.127176| train set 5.386x speedup, test set 5.017x speedup, val set 4.921x speedup, step: 9, train time 15.66 s
JOB test speedup 3.512931257330978
TPCH test speedup 5.419524035899206
TPCH skew test speedup 5.017080647248503
Epoch 37/50 |loss: 0.133203| train set 5.393x speedup, test set 5.017x speedup, val set 4.874x speedup, step: 10, train time 15.69 s
JOB test speedup 2.561779158003813
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 38/50 |loss: 0.125342| train set 5.394x speedup, test set 5.017x speedup, val set 4.920x speedup, step: 11, train time 15.70 s
JOB test speedup 2.8133497280791637
TPCH test speedup 5.403229799224642
TPCH skew test speedup 4.9965973904716385
Epoch 39/50 |loss: 0.126764| train set 5.300x speedup, test set 4.997x speedup, val set 4.992x speedup, step: 12, train time 15.78 s
JOB test speedup 2.6494513276904574
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 40/50 |loss: 0.124225| train set 5.395x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 13, train time 15.51 s
JOB test speedup 2.9886990896588275
TPCH test speedup 5.232354297013583
TPCH skew test speedup 4.990514195793357
Epoch 41/50 |loss: 0.124045| train set 5.348x speedup, test set 4.991x speedup, val set 4.885x speedup, step: 14, train time 15.41 s
JOB test speedup 2.9090803354967893
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 42/50 |loss: 0.124726| train set 5.386x speedup, test set 5.017x speedup, val set 4.921x speedup, step: 15, train time 15.61 s
JOB test speedup 2.658500981361158
TPCH test speedup 5.419524035899206
TPCH skew test speedup 5.017080647248503
Epoch 43/50 |loss: 0.123124| train set 5.350x speedup, test set 5.017x speedup, val set 4.886x speedup, step: 16, train time 15.48 s
JOB test speedup 2.909302809637157
TPCH test speedup 5.293742750430138
TPCH skew test speedup 4.993563397302661
Epoch 44/50 |loss: 0.121944| train set 5.338x speedup, test set 4.994x speedup, val set 5.003x speedup, step: 17, train time 16.13 s
JOB test speedup 2.6488283231063305
TPCH test speedup 5.1814441125103485
TPCH skew test speedup 5.03859930979291
Epoch 45/50 |loss: 0.121459| train set 5.323x speedup, test set 5.039x speedup, val set 4.788x speedup, step: 18, train time 15.61 s
JOB test speedup 2.9090803354967893
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 46/50 |loss: 0.119256| train set 5.391x speedup, test set 5.017x speedup, val set 4.921x speedup, step: 19, train time 15.76 s
JOB test speedup 2.4804855236615913
TPCH test speedup 5.403229799224642
TPCH skew test speedup 4.9965973904716385
Epoch 47/50 |loss: 0.118902| train set 5.387x speedup, test set 4.997x speedup, val set 5.021x speedup, step: 1, train time 15.67 s
JOB test speedup 2.820628667443028
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 48/50 |loss: 0.117947| train set 5.343x speedup, test set 4.991x speedup, val set 4.886x speedup, step: 2, train time 15.68 s
JOB test speedup 2.6384585397159683
TPCH test speedup 5.419524035899206
TPCH skew test speedup 5.017080647248503
Epoch 49/50 |loss: 0.118602| train set 5.387x speedup, test set 5.017x speedup, val set 4.921x speedup, step: 3, train time 15.66 s
Training per epoch cost 15.556 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 2.362s, pg runtime 0.206s, speedup 0.087x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.407s, pg runtime 0.313s, speedup 0.769x
16, opt runtime 0.441s, model runtime 0.469s, pg runtime 0.453s, speedup 0.967x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.061s, pg runtime 0.086s, speedup 1.407x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.080s, pg runtime 0.112s, speedup 1.403x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
08, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
19, opt runtime 1.309s, model runtime 1.309s, pg runtime 1.356s, speedup 1.036x
20, opt runtime 1.340s, model runtime 1.490s, pg runtime 1.340s, speedup 0.899x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.098s, pg runtime 1.100s, speedup 1.001x
40, opt runtime 1.084s, model runtime 1.084s, pg runtime 1.155s, speedup 1.065x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 7.445s, pg runtime 12.078s, speedup 1.622x
08, opt runtime 5.471s, model runtime 7.216s, pg runtime 13.410s, speedup 1.858x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 5.511s, model runtime 6.648s, pg runtime 14.247s, speedup 2.143x
19, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.244s, speedup 1.114x
20, opt runtime 1.367s, model runtime 1.474s, pg runtime 1.367s, speedup 0.928x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.853s, pg runtime 0.893s, speedup 1.047x
40, opt runtime 1.004s, model runtime 1.104s, pg runtime 1.004s, speedup 0.909x
====================
JOB best validation speedup epoch: 47, train speedup 5.387, test speedup 2.480, val speedup 5.021
TPCH best validation speedup epoch: 47, train speedup 5.387, test speedup 5.403, val speedup 5.021
TPCH Skew best validation speedup epoch: 47, train speedup 5.387, test speedup 4.997, val speedup 5.021
execution cost 0:13:54.159645
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.207036, and there are 24443 training samples
in channel 9
JOB test speedup 1.14826858444866
TPCH test speedup 5.309803605519177
TPCH skew test speedup 4.9653501361686825
Epoch 0/50 |loss: 0.436379| train set 5.071x speedup, test set 4.965x speedup, val set 4.958x speedup, step: 1, train time 17.05 s
JOB test speedup 0.8229905913355056
TPCH test speedup 4.631088794745952
TPCH skew test speedup 4.30313571687362
Epoch 1/50 |loss: 0.317382| train set 4.557x speedup, test set 4.303x speedup, val set 4.276x speedup, step: 2, train time 15.41 s
JOB test speedup 2.710883287183792
TPCH test speedup 5.0762760171552594
TPCH skew test speedup 4.754380621589789
Epoch 2/50 |loss: 0.282821| train set 5.073x speedup, test set 4.754x speedup, val set 4.776x speedup, step: 3, train time 15.50 s
JOB test speedup 0.8519672474749591
TPCH test speedup 5.262023332315898
TPCH skew test speedup 4.923085051245278
Epoch 3/50 |loss: 0.253416| train set 5.229x speedup, test set 4.923x speedup, val set 4.827x speedup, step: 4, train time 15.53 s
JOB test speedup 0.8873480657748859
TPCH test speedup 5.348444781544195
TPCH skew test speedup 4.948336289204575
Epoch 4/50 |loss: 0.235467| train set 5.248x speedup, test set 4.948x speedup, val set 4.969x speedup, step: 1, train time 15.47 s
JOB test speedup 2.422376864553762
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 5/50 |loss: 0.223852| train set 5.322x speedup, test set 4.991x speedup, val set 4.938x speedup, step: 2, train time 15.46 s
JOB test speedup 2.939341352189918
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 6/50 |loss: 0.213487| train set 5.319x speedup, test set 5.016x speedup, val set 4.909x speedup, step: 3, train time 15.54 s
JOB test speedup 3.0705778099673786
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 7/50 |loss: 0.203099| train set 5.359x speedup, test set 5.017x speedup, val set 4.887x speedup, step: 4, train time 15.67 s
JOB test speedup 3.242001876508949
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 8/50 |loss: 0.197570| train set 5.335x speedup, test set 5.013x speedup, val set 4.930x speedup, step: 5, train time 15.67 s
JOB test speedup 2.8375327317430723
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 9/50 |loss: 0.191101| train set 5.304x speedup, test set 4.991x speedup, val set 4.947x speedup, step: 6, train time 15.56 s
JOB test speedup 3.433979563468078
TPCH test speedup 5.3099952401464785
TPCH skew test speedup 5.013566922808306
Epoch 10/50 |loss: 0.186051| train set 5.329x speedup, test set 5.014x speedup, val set 4.966x speedup, step: 7, train time 15.61 s
JOB test speedup 0.8347268906480919
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 11/50 |loss: 0.177973| train set 5.340x speedup, test set 5.014x speedup, val set 4.930x speedup, step: 8, train time 15.95 s
JOB test speedup 2.825737319828759
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 12/50 |loss: 0.177080| train set 5.346x speedup, test set 5.017x speedup, val set 5.092x speedup, step: 1, train time 15.71 s
JOB test speedup 3.5794459430314065
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 13/50 |loss: 0.173126| train set 5.381x speedup, test set 5.016x speedup, val set 4.886x speedup, step: 2, train time 15.70 s
JOB test speedup 3.1422503744334533
TPCH test speedup 5.080814329930001
TPCH skew test speedup 4.9154190882320234
Epoch 14/50 |loss: 0.168709| train set 5.343x speedup, test set 4.915x speedup, val set 4.772x speedup, step: 3, train time 15.61 s
JOB test speedup 2.390967408590553
TPCH test speedup 5.223733618533907
TPCH skew test speedup 4.987356956956355
Epoch 15/50 |loss: 0.165275| train set 5.289x speedup, test set 4.987x speedup, val set 4.894x speedup, step: 4, train time 15.78 s
JOB test speedup 3.3927103392263724
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 16/50 |loss: 0.164134| train set 5.380x speedup, test set 5.017x speedup, val set 4.880x speedup, step: 5, train time 15.75 s
JOB test speedup 2.2981631291600264
TPCH test speedup 5.315074885615789
TPCH skew test speedup 4.9706938389332604
Epoch 17/50 |loss: 0.158841| train set 5.286x speedup, test set 4.971x speedup, val set 4.819x speedup, step: 6, train time 15.81 s
JOB test speedup 3.003413899682244
TPCH test speedup 5.3309239580153225
TPCH skew test speedup 4.9910258465986415
Epoch 18/50 |loss: 0.158404| train set 5.337x speedup, test set 4.991x speedup, val set 4.853x speedup, step: 7, train time 15.76 s
JOB test speedup 2.7998207977405323
TPCH test speedup 5.224579617722351
TPCH skew test speedup 4.987197259211708
Epoch 19/50 |loss: 0.153115| train set 5.304x speedup, test set 4.987x speedup, val set 5.028x speedup, step: 8, train time 15.86 s
JOB test speedup 2.9566643760678266
TPCH test speedup 5.188342159287504
TPCH skew test speedup 4.806776208187612
Epoch 20/50 |loss: 0.153477| train set 5.209x speedup, test set 4.807x speedup, val set 4.859x speedup, step: 9, train time 15.88 s
JOB test speedup 0.7844597516081843
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 21/50 |loss: 0.151432| train set 5.380x speedup, test set 5.014x speedup, val set 4.913x speedup, step: 10, train time 16.00 s
JOB test speedup 2.982587855053403
TPCH test speedup 5.420520421294863
TPCH skew test speedup 5.016980687878582
Epoch 22/50 |loss: 0.148265| train set 5.338x speedup, test set 5.017x speedup, val set 4.922x speedup, step: 11, train time 15.96 s
JOB test speedup 2.935795235758806
TPCH test speedup 5.315074885615789
TPCH skew test speedup 4.9706938389332604
Epoch 23/50 |loss: 0.146888| train set 5.342x speedup, test set 4.971x speedup, val set 4.853x speedup, step: 12, train time 15.84 s
JOB test speedup 2.5617145640643213
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 24/50 |loss: 0.146420| train set 5.344x speedup, test set 4.991x speedup, val set 4.852x speedup, step: 13, train time 15.87 s
JOB test speedup 2.9710112390266255
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 25/50 |loss: 0.142477| train set 5.345x speedup, test set 4.991x speedup, val set 4.832x speedup, step: 14, train time 15.92 s
JOB test speedup 2.8912707952462062
TPCH test speedup 5.3099952401464785
TPCH skew test speedup 5.013566922808306
Epoch 26/50 |loss: 0.139492| train set 5.389x speedup, test set 5.014x speedup, val set 4.954x speedup, step: 15, train time 15.61 s
JOB test speedup 2.6804167441322018
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 27/50 |loss: 0.141354| train set 5.382x speedup, test set 5.016x speedup, val set 4.887x speedup, step: 16, train time 16.07 s
JOB test speedup 2.97065358026138
TPCH test speedup 5.223236383283274
TPCH skew test speedup 4.984989889240244
Epoch 28/50 |loss: 0.138732| train set 5.298x speedup, test set 4.985x speedup, val set 4.930x speedup, step: 17, train time 15.93 s
JOB test speedup 2.8107776369327127
TPCH test speedup 5.332423090732072
TPCH skew test speedup 4.990415292220176
Epoch 29/50 |loss: 0.136034| train set 5.337x speedup, test set 4.990x speedup, val set 4.841x speedup, step: 18, train time 16.04 s
JOB test speedup 2.5620925892603337
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 30/50 |loss: 0.134671| train set 5.395x speedup, test set 5.016x speedup, val set 4.994x speedup, step: 19, train time 16.00 s
JOB test speedup 2.9593137694983036
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.017080647248503
Epoch 31/50 |loss: 0.134417| train set 5.394x speedup, test set 5.017x speedup, val set 4.888x speedup, step: 20, train time 16.11 s
JOB test speedup 2.7159559708518874
TPCH test speedup 5.313585490057591
TPCH skew test speedup 4.971299576895667
Epoch 32/50 |loss: 0.132038| train set 5.384x speedup, test set 4.971x speedup, val set 4.889x speedup, step: 21, train time 16.07 s
JOB test speedup 2.8131813149942224
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016919040326524
Epoch 33/50 |loss: 0.134582| train set 5.393x speedup, test set 5.017x speedup, val set 4.886x speedup, step: 22, train time 16.08 s
JOB test speedup 2.9747322816097888
TPCH test speedup 5.393458622924726
TPCH skew test speedup 4.996437100421392
Epoch 34/50 |loss: 0.131307| train set 5.388x speedup, test set 4.996x speedup, val set 4.895x speedup, step: 23, train time 16.17 s
JOB test speedup 2.862848118445809
TPCH test speedup 5.2082552754791065
TPCH skew test speedup 4.967849663597223
Epoch 35/50 |loss: 0.128148| train set 5.305x speedup, test set 4.968x speedup, val set 4.932x speedup, step: 24, train time 16.12 s
JOB test speedup 2.839051627149033
TPCH test speedup 5.402595222724218
TPCH skew test speedup 4.997049129260342
Epoch 36/50 |loss: 0.128327| train set 5.383x speedup, test set 4.997x speedup, val set 4.881x speedup, step: 25, train time 16.17 s
JOB test speedup 2.7545948688037614
TPCH test speedup 5.2231405008849165
TPCH skew test speedup 4.987807026372847
Epoch 37/50 |loss: 0.130781| train set 5.297x speedup, test set 4.988x speedup, val set 4.920x speedup, step: 26, train time 16.13 s
JOB test speedup 2.896429315557363
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 38/50 |loss: 0.124972| train set 5.394x speedup, test set 5.017x speedup, val set 4.877x speedup, step: 27, train time 15.82 s
JOB test speedup 2.6633358316043414
TPCH test speedup 5.2080041055820825
TPCH skew test speedup 4.96756162104331
Epoch 39/50 |loss: 0.126542| train set 5.307x speedup, test set 4.968x speedup, val set 4.920x speedup, step: 28, train time 15.93 s
JOB test speedup 0.8535002558351313
TPCH test speedup 5.419524035899206
TPCH skew test speedup 5.017080647248503
Epoch 40/50 |loss: 0.123417| train set 5.387x speedup, test set 5.017x speedup, val set 4.886x speedup, step: 29, train time 15.96 s
JOB test speedup 2.698911110039944
TPCH test speedup 5.232354297013583
TPCH skew test speedup 4.913797400916151
Epoch 41/50 |loss: 0.125831| train set 5.348x speedup, test set 4.914x speedup, val set 4.811x speedup, step: 30, train time 16.26 s
JOB test speedup 2.9775270704170276
TPCH test speedup 5.421431367060592
TPCH skew test speedup 5.016819087396087
Epoch 42/50 |loss: 0.124900| train set 5.390x speedup, test set 5.017x speedup, val set 4.887x speedup, step: 31, train time 15.99 s
JOB test speedup 2.9561436633850477
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.991124774374338
Epoch 43/50 |loss: 0.123212| train set 5.350x speedup, test set 4.991x speedup, val set 4.843x speedup, step: 32, train time 15.96 s
JOB test speedup 2.9661839278941984
TPCH test speedup 5.2082552754791065
TPCH skew test speedup 4.967849663597223
Epoch 44/50 |loss: 0.122714| train set 5.346x speedup, test set 4.968x speedup, val set 4.967x speedup, step: 33, train time 16.66 s
JOB test speedup 2.56174559407968
TPCH test speedup 5.331805035940808
TPCH skew test speedup 4.990865913811858
Epoch 45/50 |loss: 0.121201| train set 5.392x speedup, test set 4.991x speedup, val set 4.886x speedup, step: 34, train time 15.97 s
JOB test speedup 2.9846531624235526
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 46/50 |loss: 0.119534| train set 5.392x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 35, train time 15.96 s
JOB test speedup 2.9646955946551445
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 47/50 |loss: 0.119885| train set 5.389x speedup, test set 4.991x speedup, val set 4.986x speedup, step: 36, train time 15.98 s
JOB test speedup 2.8293207684286226
TPCH test speedup 5.330840995592268
TPCH skew test speedup 4.990964835247496
Epoch 48/50 |loss: 0.118861| train set 5.345x speedup, test set 4.991x speedup, val set 4.851x speedup, step: 37, train time 15.87 s
JOB test speedup 2.921028623975105
TPCH test speedup 5.293483267744177
TPCH skew test speedup 4.993272365285864
Epoch 49/50 |loss: 0.116394| train set 5.354x speedup, test set 4.993x speedup, val set 4.969x speedup, step: 38, train time 16.00 s
Training per epoch cost 15.895 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 1.314s, pg runtime 0.189s, speedup 0.144x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.332s, pg runtime 2.352s, speedup 7.089x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.407s, pg runtime 0.313s, speedup 0.769x
16, opt runtime 0.441s, model runtime 0.469s, pg runtime 0.453s, speedup 0.967x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.079s, pg runtime 0.086s, speedup 1.091x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.080s, pg runtime 0.112s, speedup 1.403x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
19, opt runtime 1.309s, model runtime 1.356s, pg runtime 1.356s, speedup 1.000x
20, opt runtime 1.340s, model runtime 1.340s, pg runtime 1.340s, speedup 1.000x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.100s, pg runtime 1.100s, speedup 1.000x
40, opt runtime 1.084s, model runtime 1.155s, pg runtime 1.155s, speedup 1.000x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 5.511s, model runtime 6.648s, pg runtime 14.247s, speedup 2.143x
19, opt runtime 1.116s, model runtime 1.244s, pg runtime 1.244s, speedup 1.000x
20, opt runtime 1.367s, model runtime 1.367s, pg runtime 1.367s, speedup 1.000x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.893s, pg runtime 0.893s, speedup 1.000x
40, opt runtime 1.004s, model runtime 1.004s, pg runtime 1.004s, speedup 1.000x
====================
JOB best validation speedup epoch: 12, train speedup 5.346, test speedup 2.826, val speedup 5.092
TPCH best validation speedup epoch: 12, train speedup 5.346, test speedup 5.420, val speedup 5.092
TPCH Skew best validation speedup epoch: 12, train speedup 5.346, test speedup 5.017, val speedup 5.092
execution cost 0:14:12.190036
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.279400, and there are 24443 training samples
in channel 9
JOB test speedup 0.5651100817415561
TPCH test speedup 5.077687010463137
TPCH skew test speedup 4.873312509398871
Epoch 0/50 |loss: 0.437959| train set 4.902x speedup, test set 4.873x speedup, val set 4.741x speedup, step: 1, train time 16.78 s
JOB test speedup 0.8119045897120637
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 1/50 |loss: 0.320090| train set 5.199x speedup, test set 5.014x speedup, val set 4.938x speedup, step: 1, train time 15.37 s
JOB test speedup 3.280860590362575
TPCH test speedup 5.041655744988875
TPCH skew test speedup 4.80976948705488
Epoch 2/50 |loss: 0.286075| train set 5.102x speedup, test set 4.810x speedup, val set 4.888x speedup, step: 2, train time 15.52 s
JOB test speedup 1.1863594084507512
TPCH test speedup 5.26033809770191
TPCH skew test speedup 4.92324066937408
Epoch 3/50 |loss: 0.256101| train set 5.193x speedup, test set 4.923x speedup, val set 4.773x speedup, step: 3, train time 15.28 s
JOB test speedup 0.8218839018722939
TPCH test speedup 5.348444781544195
TPCH skew test speedup 4.948336289204575
Epoch 4/50 |loss: 0.236279| train set 5.250x speedup, test set 4.948x speedup, val set 4.793x speedup, step: 4, train time 15.46 s
JOB test speedup 3.089633635020472
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 5/50 |loss: 0.227285| train set 5.370x speedup, test set 5.016x speedup, val set 4.988x speedup, step: 1, train time 15.36 s
JOB test speedup 3.20021171998147
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 6/50 |loss: 0.216515| train set 5.320x speedup, test set 4.991x speedup, val set 4.816x speedup, step: 2, train time 15.50 s
JOB test speedup 3.2315438094652142
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 7/50 |loss: 0.203570| train set 5.342x speedup, test set 5.017x speedup, val set 4.851x speedup, step: 3, train time 15.67 s
JOB test speedup 3.3727340338757448
TPCH test speedup 5.0813755623311865
TPCH skew test speedup 4.914981987142441
Epoch 8/50 |loss: 0.201092| train set 5.148x speedup, test set 4.915x speedup, val set 4.739x speedup, step: 4, train time 15.60 s
JOB test speedup 3.361493738907147
TPCH test speedup 5.4196272640304315
TPCH skew test speedup 5.014230354765658
Epoch 9/50 |loss: 0.194478| train set 5.352x speedup, test set 5.014x speedup, val set 4.958x speedup, step: 5, train time 15.36 s
JOB test speedup 3.168075391935095
TPCH test speedup 5.309220420153532
TPCH skew test speedup 5.0108818280437175
Epoch 10/50 |loss: 0.189010| train set 5.156x speedup, test set 5.011x speedup, val set 4.966x speedup, step: 6, train time 15.59 s
JOB test speedup 0.8157185035568323
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 11/50 |loss: 0.179813| train set 5.283x speedup, test set 5.014x speedup, val set 4.966x speedup, step: 7, train time 15.56 s
JOB test speedup 2.992930388350539
TPCH test speedup 5.3099952401464785
TPCH skew test speedup 5.013566922808306
Epoch 12/50 |loss: 0.179756| train set 5.342x speedup, test set 5.014x speedup, val set 4.958x speedup, step: 8, train time 15.68 s
JOB test speedup 3.5581522472290743
TPCH test speedup 5.264094720003678
TPCH skew test speedup 4.839435534067396
Epoch 13/50 |loss: 0.176846| train set 5.177x speedup, test set 4.839x speedup, val set 4.759x speedup, step: 9, train time 15.55 s
JOB test speedup 3.483646954819548
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 14/50 |loss: 0.172027| train set 5.346x speedup, test set 5.017x speedup, val set 4.967x speedup, step: 10, train time 15.68 s
JOB test speedup 2.975797079951153
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 15/50 |loss: 0.166673| train set 5.377x speedup, test set 5.017x speedup, val set 4.887x speedup, step: 11, train time 15.59 s
JOB test speedup 3.262887841904915
TPCH test speedup 5.4196272640304315
TPCH skew test speedup 5.014230354765658
Epoch 16/50 |loss: 0.163976| train set 5.381x speedup, test set 5.014x speedup, val set 4.922x speedup, step: 12, train time 15.62 s
JOB test speedup 2.4163220681904214
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.9706938389332604
Epoch 17/50 |loss: 0.161019| train set 5.307x speedup, test set 4.971x speedup, val set 4.816x speedup, step: 13, train time 15.46 s
JOB test speedup 0.8139427295223799
TPCH test speedup 5.420520421294863
TPCH skew test speedup 5.016980687878582
Epoch 18/50 |loss: 0.160386| train set 5.341x speedup, test set 5.017x speedup, val set 4.853x speedup, step: 14, train time 15.50 s
JOB test speedup 3.3311505487985604
TPCH test speedup 5.224579617722351
TPCH skew test speedup 4.987197259211708
Epoch 19/50 |loss: 0.157377| train set 5.302x speedup, test set 4.987x speedup, val set 4.929x speedup, step: 15, train time 15.49 s
JOB test speedup 2.895388801827329
TPCH test speedup 5.419524035899206
TPCH skew test speedup 5.017080647248503
Epoch 20/50 |loss: 0.152555| train set 5.210x speedup, test set 5.017x speedup, val set 4.888x speedup, step: 16, train time 15.61 s
JOB test speedup 0.8089415447466332
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 21/50 |loss: 0.149724| train set 5.336x speedup, test set 5.014x speedup, val set 4.955x speedup, step: 17, train time 15.68 s
JOB test speedup 0.7867881525248516
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 22/50 |loss: 0.149313| train set 5.336x speedup, test set 4.991x speedup, val set 4.852x speedup, step: 18, train time 15.64 s
JOB test speedup 3.1261590213084904
TPCH test speedup 5.307089579800186
TPCH skew test speedup 4.93847862145004
Epoch 23/50 |loss: 0.149880| train set 5.319x speedup, test set 4.938x speedup, val set 4.852x speedup, step: 19, train time 15.67 s
JOB test speedup 0.7870055040033636
TPCH test speedup 5.404134942221828
TPCH skew test speedup 4.996437100421392
Epoch 24/50 |loss: 0.144888| train set 5.393x speedup, test set 4.996x speedup, val set 4.914x speedup, step: 20, train time 15.74 s
JOB test speedup 3.4988520572766286
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 25/50 |loss: 0.142220| train set 5.341x speedup, test set 5.017x speedup, val set 4.910x speedup, step: 21, train time 15.83 s
JOB test speedup 2.8960819279048957
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 26/50 |loss: 0.141796| train set 5.387x speedup, test set 5.016x speedup, val set 4.886x speedup, step: 22, train time 15.67 s
JOB test speedup 3.48774041925323
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 27/50 |loss: 0.142208| train set 5.390x speedup, test set 5.016x speedup, val set 4.897x speedup, step: 23, train time 15.71 s
JOB test speedup 3.4422518469946395
TPCH test speedup 5.4196272640304315
TPCH skew test speedup 5.014230354765658
Epoch 28/50 |loss: 0.139104| train set 5.343x speedup, test set 5.014x speedup, val set 4.966x speedup, step: 24, train time 15.77 s
JOB test speedup 3.3052048906259452
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 29/50 |loss: 0.135627| train set 5.341x speedup, test set 4.991x speedup, val set 4.851x speedup, step: 25, train time 15.45 s
JOB test speedup 2.9491999002264992
TPCH test speedup 5.4087868855552275
TPCH skew test speedup 5.017080647248503
Epoch 30/50 |loss: 0.133979| train set 5.393x speedup, test set 5.017x speedup, val set 4.887x speedup, step: 26, train time 15.50 s
JOB test speedup 3.5445226897477005
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 31/50 |loss: 0.132787| train set 5.392x speedup, test set 5.017x speedup, val set 4.888x speedup, step: 27, train time 15.57 s
JOB test speedup 2.778192364903163
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 32/50 |loss: 0.133621| train set 5.393x speedup, test set 5.017x speedup, val set 4.886x speedup, step: 28, train time 15.57 s
JOB test speedup 2.760564609506446
TPCH test speedup 5.369326246823594
TPCH skew test speedup 4.996437100421392
Epoch 33/50 |loss: 0.133073| train set 5.394x speedup, test set 4.996x speedup, val set 4.886x speedup, step: 29, train time 15.66 s
JOB test speedup 0.8182734929621237
TPCH test speedup 5.307135913530219
TPCH skew test speedup 5.012206547322475
Epoch 34/50 |loss: 0.132085| train set 5.347x speedup, test set 5.012x speedup, val set 4.975x speedup, step: 30, train time 15.55 s
JOB test speedup 0.8464621186779369
TPCH test speedup 5.315074885615789
TPCH skew test speedup 4.9706938389332604
Epoch 35/50 |loss: 0.127354| train set 5.301x speedup, test set 4.971x speedup, val set 4.966x speedup, step: 31, train time 15.53 s
JOB test speedup 2.912204642333421
TPCH test speedup 5.402595222724218
TPCH skew test speedup 4.997049129260342
Epoch 36/50 |loss: 0.127359| train set 5.386x speedup, test set 4.997x speedup, val set 4.889x speedup, step: 32, train time 15.48 s
JOB test speedup 2.9019818299020472
TPCH test speedup 5.419524035899206
TPCH skew test speedup 5.017080647248503
Epoch 37/50 |loss: 0.130068| train set 5.353x speedup, test set 5.017x speedup, val set 4.887x speedup, step: 33, train time 15.76 s
JOB test speedup 3.543795352306344
TPCH test speedup 5.403500153108997
TPCH skew test speedup 4.996888810225833
Epoch 38/50 |loss: 0.123331| train set 5.385x speedup, test set 4.997x speedup, val set 4.922x speedup, step: 34, train time 15.60 s
JOB test speedup 2.746576276973362
TPCH test speedup 5.293483267744177
TPCH skew test speedup 4.993272365285864
Epoch 39/50 |loss: 0.125567| train set 5.349x speedup, test set 4.993x speedup, val set 4.969x speedup, step: 35, train time 15.70 s
JOB test speedup 0.8913428845707017
TPCH test speedup 5.404134942221828
TPCH skew test speedup 5.009549176797079
Epoch 40/50 |loss: 0.124600| train set 5.396x speedup, test set 5.010x speedup, val set 4.921x speedup, step: 36, train time 15.66 s
JOB test speedup 3.5354992868224864
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 41/50 |loss: 0.125298| train set 5.391x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 37, train time 15.66 s
JOB test speedup 2.9125475238381457
TPCH test speedup 5.403500153108997
TPCH skew test speedup 4.996888810225833
Epoch 42/50 |loss: 0.125788| train set 5.386x speedup, test set 4.997x speedup, val set 4.901x speedup, step: 38, train time 15.65 s
JOB test speedup 2.9595483338752486
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 43/50 |loss: 0.123183| train set 5.386x speedup, test set 4.991x speedup, val set 4.888x speedup, step: 39, train time 15.75 s
JOB test speedup 3.545888703520116
TPCH test speedup 5.293742750430138
TPCH skew test speedup 4.993563397302661
Epoch 44/50 |loss: 0.121823| train set 5.344x speedup, test set 4.994x speedup, val set 4.930x speedup, step: 40, train time 16.01 s
JOB test speedup 2.5572049060319073
TPCH test speedup 5.409693891499846
TPCH skew test speedup 5.016919040326524
Epoch 45/50 |loss: 0.120223| train set 5.368x speedup, test set 5.017x speedup, val set 4.887x speedup, step: 41, train time 15.67 s
JOB test speedup 3.543147283548765
TPCH test speedup 5.404134942221828
TPCH skew test speedup 4.996437100421392
Epoch 46/50 |loss: 0.119217| train set 5.388x speedup, test set 4.996x speedup, val set 4.922x speedup, step: 42, train time 15.58 s
JOB test speedup 3.5473690922426546
TPCH test speedup 5.399635327856722
TPCH skew test speedup 4.992932749182944
Epoch 47/50 |loss: 0.119157| train set 5.384x speedup, test set 4.993x speedup, val set 4.994x speedup, step: 1, train time 15.51 s
JOB test speedup 2.7957316297122103
TPCH test speedup 5.3144608455406726
TPCH skew test speedup 4.971140905810445
Epoch 48/50 |loss: 0.117868| train set 5.349x speedup, test set 4.971x speedup, val set 4.886x speedup, step: 2, train time 15.60 s
JOB test speedup 3.0908026505813675
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 49/50 |loss: 0.117379| train set 5.344x speedup, test set 5.014x speedup, val set 4.967x speedup, step: 3, train time 15.68 s
Training per epoch cost 15.622 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 1.050s, pg runtime 0.348s, speedup 0.331x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.354s, pg runtime 0.354s, speedup 1.000x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.061s, pg runtime 0.086s, speedup 1.407x
21, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.080s, pg runtime 0.112s, speedup 1.403x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
08, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 3.332s, pg runtime 21.298s, speedup 6.391x
14, opt runtime 2.995s, model runtime 4.213s, pg runtime 14.646s, speedup 3.477x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
19, opt runtime 1.309s, model runtime 1.309s, pg runtime 1.356s, speedup 1.036x
20, opt runtime 1.340s, model runtime 1.490s, pg runtime 1.340s, speedup 0.899x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.098s, pg runtime 1.100s, speedup 1.001x
40, opt runtime 1.084s, model runtime 1.084s, pg runtime 1.155s, speedup 1.065x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 7.445s, pg runtime 12.078s, speedup 1.622x
08, opt runtime 5.471s, model runtime 7.216s, pg runtime 13.410s, speedup 1.858x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
14, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 5.511s, model runtime 6.648s, pg runtime 14.247s, speedup 2.143x
19, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.244s, speedup 1.114x
20, opt runtime 1.367s, model runtime 1.474s, pg runtime 1.367s, speedup 0.928x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.853s, pg runtime 0.893s, speedup 1.047x
40, opt runtime 1.004s, model runtime 1.104s, pg runtime 1.004s, speedup 0.909x
====================
JOB best validation speedup epoch: 47, train speedup 5.384, test speedup 3.547, val speedup 4.994
TPCH best validation speedup epoch: 47, train speedup 5.384, test speedup 5.400, val speedup 4.994
TPCH Skew best validation speedup epoch: 47, train speedup 5.384, test speedup 4.993, val speedup 4.994
execution cost 0:13:56.786341
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.246416, and there are 24443 training samples
in channel 9
JOB test speedup 0.594346329429488
TPCH test speedup 5.054337930409867
TPCH skew test speedup 4.726076854364091
Epoch 0/50 |loss: 0.436263| train set 4.866x speedup, test set 4.726x speedup, val set 4.687x speedup, step: 1, train time 16.82 s
JOB test speedup 2.6373900253113916
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 1/50 |loss: 0.317907| train set 5.268x speedup, test set 5.017x speedup, val set 4.868x speedup, step: 1, train time 15.22 s
JOB test speedup 2.9209086628383556
TPCH test speedup 5.3680946300841565
TPCH skew test speedup 5.023764666932684
Epoch 2/50 |loss: 0.283900| train set 5.319x speedup, test set 5.024x speedup, val set 4.969x speedup, step: 1, train time 15.26 s
JOB test speedup 0.595164756601102
TPCH test speedup 4.7359352718063725
TPCH skew test speedup 4.658071676647994
Epoch 3/50 |loss: 0.254548| train set 5.241x speedup, test set 4.658x speedup, val set 4.440x speedup, step: 2, train time 15.12 s
JOB test speedup 0.8808361212825224
TPCH test speedup 5.26033809770191
TPCH skew test speedup 4.92324066937408
Epoch 4/50 |loss: 0.234498| train set 5.293x speedup, test set 4.923x speedup, val set 4.862x speedup, step: 3, train time 15.58 s
JOB test speedup 2.751613321654508
TPCH test speedup 5.348412919064195
TPCH skew test speedup 4.953414141106379
Epoch 5/50 |loss: 0.223065| train set 5.255x speedup, test set 4.953x speedup, val set 4.954x speedup, step: 4, train time 15.26 s
JOB test speedup 3.0753816821368885
TPCH test speedup 5.348444781544195
TPCH skew test speedup 4.948336289204575
Epoch 6/50 |loss: 0.213749| train set 5.288x speedup, test set 4.948x speedup, val set 4.842x speedup, step: 5, train time 15.59 s
JOB test speedup 3.056408425138264
TPCH test speedup 5.382537094145094
TPCH skew test speedup 5.035905015337784
Epoch 7/50 |loss: 0.203624| train set 5.359x speedup, test set 5.036x speedup, val set 4.876x speedup, step: 6, train time 15.21 s
JOB test speedup 3.245015412404342
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 8/50 |loss: 0.196251| train set 5.376x speedup, test set 5.017x speedup, val set 4.922x speedup, step: 7, train time 15.27 s
JOB test speedup 2.90150263768135
TPCH test speedup 5.357379265006138
TPCH skew test speedup 5.2675902755321244
Epoch 9/50 |loss: 0.191786| train set 5.349x speedup, test set 5.268x speedup, val set 4.809x speedup, step: 8, train time 15.58 s
JOB test speedup 2.6458161479182203
TPCH test speedup 5.309220420153532
TPCH skew test speedup 5.0108818280437175
Epoch 10/50 |loss: 0.186168| train set 5.331x speedup, test set 5.011x speedup, val set 5.002x speedup, step: 1, train time 15.48 s
JOB test speedup 0.860978817687054
TPCH test speedup 5.285152567371745
TPCH skew test speedup 5.245949827005056
Epoch 11/50 |loss: 0.181008| train set 5.272x speedup, test set 5.246x speedup, val set 4.831x speedup, step: 2, train time 15.46 s
JOB test speedup 2.974418927596058
TPCH test speedup 5.183252030852931
TPCH skew test speedup 4.9184858756195275
Epoch 12/50 |loss: 0.179558| train set 5.386x speedup, test set 4.918x speedup, val set 4.821x speedup, step: 3, train time 15.76 s
JOB test speedup 3.5689286056553335
TPCH test speedup 5.264094720003678
TPCH skew test speedup 4.839435534067396
Epoch 13/50 |loss: 0.176334| train set 5.352x speedup, test set 4.839x speedup, val set 4.901x speedup, step: 4, train time 15.71 s
JOB test speedup 3.4750220703720047
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 14/50 |loss: 0.171203| train set 5.345x speedup, test set 5.013x speedup, val set 4.982x speedup, step: 5, train time 15.46 s
JOB test speedup 2.566751042860312
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 15/50 |loss: 0.167143| train set 5.325x speedup, test set 5.017x speedup, val set 4.965x speedup, step: 6, train time 15.70 s
JOB test speedup 3.320333191566602
TPCH test speedup 5.3141993278581445
TPCH skew test speedup 4.990674106038897
Epoch 16/50 |loss: 0.163278| train set 5.341x speedup, test set 4.991x speedup, val set 4.886x speedup, step: 7, train time 15.66 s
JOB test speedup 2.664374969108029
TPCH test speedup 5.315074885615789
TPCH skew test speedup 4.9706938389332604
Epoch 17/50 |loss: 0.160372| train set 5.296x speedup, test set 4.971x speedup, val set 4.818x speedup, step: 8, train time 15.69 s
JOB test speedup 2.9771167775288006
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 18/50 |loss: 0.159301| train set 5.334x speedup, test set 4.991x speedup, val set 4.852x speedup, step: 9, train time 15.80 s
JOB test speedup 3.539115790912433
TPCH test speedup 5.224579617722351
TPCH skew test speedup 4.987197259211708
Epoch 19/50 |loss: 0.155423| train set 5.302x speedup, test set 4.987x speedup, val set 5.064x speedup, step: 1, train time 15.75 s
JOB test speedup 2.8150610304157406
TPCH test speedup 5.188342159287504
TPCH skew test speedup 4.806776208187612
Epoch 20/50 |loss: 0.153992| train set 5.204x speedup, test set 4.807x speedup, val set 4.894x speedup, step: 2, train time 15.69 s
JOB test speedup 0.788394892943385
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 21/50 |loss: 0.150140| train set 5.388x speedup, test set 5.017x speedup, val set 4.911x speedup, step: 3, train time 15.80 s
JOB test speedup 2.997503451636596
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 22/50 |loss: 0.148498| train set 5.345x speedup, test set 4.991x speedup, val set 4.930x speedup, step: 4, train time 15.85 s
JOB test speedup 3.05725046577343
TPCH test speedup 5.315074885615789
TPCH skew test speedup 4.9706938389332604
Epoch 23/50 |loss: 0.150126| train set 5.350x speedup, test set 4.971x speedup, val set 4.853x speedup, step: 5, train time 15.52 s
JOB test speedup 2.5498211808854623
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 24/50 |loss: 0.145506| train set 5.392x speedup, test set 4.991x speedup, val set 4.885x speedup, step: 6, train time 15.75 s
JOB test speedup 3.4321491837253664
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 25/50 |loss: 0.142827| train set 5.336x speedup, test set 4.991x speedup, val set 4.875x speedup, step: 7, train time 15.69 s
JOB test speedup 3.3461708316039305
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 26/50 |loss: 0.141038| train set 5.385x speedup, test set 5.017x speedup, val set 4.909x speedup, step: 8, train time 15.81 s
JOB test speedup 3.6202560714492154
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 27/50 |loss: 0.143244| train set 5.316x speedup, test set 5.017x speedup, val set 4.888x speedup, step: 9, train time 15.61 s
JOB test speedup 2.9567340979705556
TPCH test speedup 5.402697806955012
TPCH skew test speedup 5.014230354765658
Epoch 28/50 |loss: 0.138700| train set 5.347x speedup, test set 5.014x speedup, val set 4.886x speedup, step: 10, train time 15.77 s
JOB test speedup 3.389083419013504
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 29/50 |loss: 0.136845| train set 5.335x speedup, test set 4.991x speedup, val set 4.851x speedup, step: 11, train time 15.57 s
JOB test speedup 3.0019718848317916
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 30/50 |loss: 0.134202| train set 5.396x speedup, test set 5.017x speedup, val set 4.995x speedup, step: 12, train time 15.77 s
JOB test speedup 2.979702583577772
TPCH test speedup 5.403229799224642
TPCH skew test speedup 4.9965973904716385
Epoch 31/50 |loss: 0.133247| train set 5.396x speedup, test set 4.997x speedup, val set 4.924x speedup, step: 13, train time 15.72 s
JOB test speedup 2.6922801497092137
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 32/50 |loss: 0.134107| train set 5.383x speedup, test set 4.991x speedup, val set 4.921x speedup, step: 14, train time 15.58 s
JOB test speedup 2.9898083687432626
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 33/50 |loss: 0.132746| train set 5.396x speedup, test set 5.016x speedup, val set 4.922x speedup, step: 15, train time 15.68 s
JOB test speedup 2.9993820485720337
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 34/50 |loss: 0.132067| train set 5.382x speedup, test set 5.016x speedup, val set 4.886x speedup, step: 16, train time 15.61 s
JOB test speedup 2.8423335960343197
TPCH test speedup 5.3144608455406726
TPCH skew test speedup 4.971140905810445
Epoch 35/50 |loss: 0.128255| train set 5.351x speedup, test set 4.971x speedup, val set 4.853x speedup, step: 17, train time 15.75 s
JOB test speedup 2.9604347102160307
TPCH test speedup 5.402595222724218
TPCH skew test speedup 4.997049129260342
Epoch 36/50 |loss: 0.127838| train set 5.386x speedup, test set 4.997x speedup, val set 4.924x speedup, step: 18, train time 15.55 s
JOB test speedup 2.769586989765006
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 37/50 |loss: 0.131581| train set 5.304x speedup, test set 4.991x speedup, val set 4.941x speedup, step: 19, train time 15.71 s
JOB test speedup 2.967287484071585
TPCH test speedup 5.403500153108997
TPCH skew test speedup 4.996888810225833
Epoch 38/50 |loss: 0.126973| train set 5.394x speedup, test set 4.997x speedup, val set 4.922x speedup, step: 20, train time 15.77 s
JOB test speedup 2.8353667196622716
TPCH test speedup 5.315074885615789
TPCH skew test speedup 4.9706938389332604
Epoch 39/50 |loss: 0.125354| train set 5.347x speedup, test set 4.971x speedup, val set 4.852x speedup, step: 21, train time 15.61 s
JOB test speedup 2.9912208671977525
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 40/50 |loss: 0.122384| train set 5.396x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 22, train time 15.57 s
JOB test speedup 2.713552928407705
TPCH test speedup 5.231759220227804
TPCH skew test speedup 4.914234291325594
Epoch 41/50 |loss: 0.126404| train set 5.333x speedup, test set 4.914x speedup, val set 4.885x speedup, step: 23, train time 15.55 s
JOB test speedup 2.6949492284027485
TPCH test speedup 5.3144608455406726
TPCH skew test speedup 4.971140905810445
Epoch 42/50 |loss: 0.124834| train set 5.337x speedup, test set 4.971x speedup, val set 4.922x speedup, step: 24, train time 15.57 s
JOB test speedup 2.986778821464629
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 43/50 |loss: 0.123473| train set 5.327x speedup, test set 4.991x speedup, val set 4.887x speedup, step: 25, train time 15.70 s
JOB test speedup 2.9901632862539103
TPCH test speedup 5.207414554301406
TPCH skew test speedup 4.968008124645984
Epoch 44/50 |loss: 0.121679| train set 5.345x speedup, test set 4.968x speedup, val set 4.977x speedup, step: 26, train time 16.21 s
JOB test speedup 2.8387695884694506
TPCH test speedup 5.321300379240125
TPCH skew test speedup 4.990514195793357
Epoch 45/50 |loss: 0.119533| train set 5.385x speedup, test set 4.991x speedup, val set 4.918x speedup, step: 27, train time 15.60 s
JOB test speedup 2.731047396519861
TPCH test speedup 5.073157748027884
TPCH skew test speedup 4.749013339593197
Epoch 46/50 |loss: 0.120400| train set 5.393x speedup, test set 4.749x speedup, val set 4.922x speedup, step: 28, train time 15.57 s
JOB test speedup 3.1166378233951635
TPCH test speedup 5.3101092617676375
TPCH skew test speedup 4.967671936414486
Epoch 47/50 |loss: 0.118249| train set 5.386x speedup, test set 4.968x speedup, val set 5.030x speedup, step: 29, train time 15.66 s
JOB test speedup 2.8908742942791528
TPCH test speedup 5.3144608455406726
TPCH skew test speedup 4.990964835247496
Epoch 48/50 |loss: 0.119269| train set 5.391x speedup, test set 4.991x speedup, val set 4.885x speedup, step: 30, train time 15.62 s
JOB test speedup 2.917673654532889
TPCH test speedup 5.293742750430138
TPCH skew test speedup 4.993563397302661
Epoch 49/50 |loss: 0.117387| train set 5.346x speedup, test set 4.994x speedup, val set 4.991x speedup, step: 31, train time 15.61 s
Training per epoch cost 15.637 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.028x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 2.321s, pg runtime 3.540s, speedup 1.525x
20, opt runtime 0.061s, model runtime 0.079s, pg runtime 0.086s, speedup 1.091x
21, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.116s, pg runtime 0.112s, speedup 0.970x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.648s, pg runtime 1.315s, speedup 0.798x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.356s, pg runtime 1.356s, speedup 1.000x
20, opt runtime 1.340s, model runtime 1.340s, pg runtime 1.340s, speedup 1.000x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 42.151s, pg runtime 70.116s, speedup 1.663x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.098s, pg runtime 1.100s, speedup 1.001x
40, opt runtime 1.084s, model runtime 1.084s, pg runtime 1.155s, speedup 1.065x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.244s, pg runtime 1.244s, speedup 1.000x
20, opt runtime 1.367s, model runtime 1.367s, pg runtime 1.367s, speedup 1.000x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 37.989s, pg runtime 68.524s, speedup 1.804x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.853s, pg runtime 0.893s, speedup 1.047x
40, opt runtime 1.004s, model runtime 1.104s, pg runtime 1.004s, speedup 0.909x
====================
JOB best validation speedup epoch: 19, train speedup 5.302, test speedup 3.539, val speedup 5.064
TPCH best validation speedup epoch: 19, train speedup 5.302, test speedup 5.225, val speedup 5.064
TPCH Skew best validation speedup epoch: 19, train speedup 5.302, test speedup 4.987, val speedup 5.064
execution cost 0:13:57.347256
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.187512, and there are 24443 training samples
in channel 9
JOB test speedup 1.043623868750802
TPCH test speedup 5.075858099002647
TPCH skew test speedup 4.871634128525484
Epoch 0/50 |loss: 0.436922| train set 4.939x speedup, test set 4.872x speedup, val set 4.875x speedup, step: 1, train time 16.74 s
JOB test speedup 0.812923413651555
TPCH test speedup 5.233129382456802
TPCH skew test speedup 4.940402746848175
Epoch 1/50 |loss: 0.319538| train set 5.156x speedup, test set 4.940x speedup, val set 4.989x speedup, step: 1, train time 15.49 s
JOB test speedup 0.8634909645415939
TPCH test speedup 4.978751233904368
TPCH skew test speedup 4.751778539186805
Epoch 2/50 |loss: 0.284564| train set 5.043x speedup, test set 4.752x speedup, val set 4.893x speedup, step: 2, train time 15.56 s
JOB test speedup 0.9000624739012795
TPCH test speedup 5.261165164391934
TPCH skew test speedup 4.928111184750748
Epoch 3/50 |loss: 0.253520| train set 5.219x speedup, test set 4.928x speedup, val set 4.806x speedup, step: 3, train time 15.53 s
JOB test speedup 0.8157686768817773
TPCH test speedup 5.348444781544195
TPCH skew test speedup 4.948336289204575
Epoch 4/50 |loss: 0.235953| train set 5.291x speedup, test set 4.948x speedup, val set 4.849x speedup, step: 4, train time 15.66 s
JOB test speedup 2.518566336249851
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 5/50 |loss: 0.225462| train set 5.295x speedup, test set 5.017x speedup, val set 4.980x speedup, step: 5, train time 15.48 s
JOB test speedup 3.533911267053141
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 6/50 |loss: 0.216051| train set 5.376x speedup, test set 5.017x speedup, val set 4.909x speedup, step: 6, train time 15.54 s
JOB test speedup 2.8342403597343613
TPCH test speedup 5.3834353170038405
TPCH skew test speedup 5.035742193443916
Epoch 7/50 |loss: 0.206864| train set 5.336x speedup, test set 5.036x speedup, val set 4.909x speedup, step: 7, train time 15.57 s
JOB test speedup 3.4603466874552082
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 8/50 |loss: 0.199840| train set 5.333x speedup, test set 5.013x speedup, val set 5.004x speedup, step: 1, train time 15.54 s
JOB test speedup 3.0361999418458803
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 9/50 |loss: 0.192226| train set 5.382x speedup, test set 5.016x speedup, val set 5.032x speedup, step: 1, train time 15.39 s
JOB test speedup 3.192426958327577
TPCH test speedup 5.272509910584238
TPCH skew test speedup 5.030575178720069
Epoch 10/50 |loss: 0.188697| train set 5.309x speedup, test set 5.031x speedup, val set 5.001x speedup, step: 2, train time 15.53 s
JOB test speedup 3.2592172410402096
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 11/50 |loss: 0.181834| train set 5.348x speedup, test set 5.014x speedup, val set 5.003x speedup, step: 3, train time 15.66 s
JOB test speedup 3.3621279673533424
TPCH test speedup 5.073396079361359
TPCH skew test speedup 4.749276594089644
Epoch 12/50 |loss: 0.181214| train set 5.346x speedup, test set 4.749x speedup, val set 4.982x speedup, step: 4, train time 15.70 s
JOB test speedup 3.5985132593526235
TPCH test speedup 5.264094720003678
TPCH skew test speedup 4.839435534067396
Epoch 13/50 |loss: 0.177543| train set 5.149x speedup, test set 4.839x speedup, val set 4.793x speedup, step: 5, train time 15.46 s
JOB test speedup 3.3502192177718264
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 14/50 |loss: 0.170986| train set 5.345x speedup, test set 5.013x speedup, val set 5.004x speedup, step: 6, train time 15.68 s
JOB test speedup 3.30651912426813
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 15/50 |loss: 0.167253| train set 5.344x speedup, test set 5.013x speedup, val set 5.002x speedup, step: 7, train time 15.71 s
JOB test speedup 3.221887837307446
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 16/50 |loss: 0.165188| train set 5.381x speedup, test set 5.017x speedup, val set 5.033x speedup, step: 1, train time 15.74 s
JOB test speedup 3.6216782888038392
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 17/50 |loss: 0.161776| train set 5.325x speedup, test set 4.991x speedup, val set 4.885x speedup, step: 2, train time 15.69 s
JOB test speedup 3.6895578608661515
TPCH test speedup 5.314543298903473
TPCH skew test speedup 4.971201433451495
Epoch 18/50 |loss: 0.160277| train set 5.340x speedup, test set 4.971x speedup, val set 4.885x speedup, step: 3, train time 15.67 s
JOB test speedup 3.1083349534616618
TPCH test speedup 5.223733618533907
TPCH skew test speedup 4.987356956956355
Epoch 19/50 |loss: 0.157468| train set 5.186x speedup, test set 4.987x speedup, val set 4.982x speedup, step: 4, train time 15.75 s
JOB test speedup 3.519328824936888
TPCH test speedup 4.855184020953468
TPCH skew test speedup 4.698622837739941
Epoch 20/50 |loss: 0.154916| train set 5.163x speedup, test set 4.699x speedup, val set 4.416x speedup, step: 5, train time 15.84 s
JOB test speedup 3.5208167288889607
TPCH test speedup 5.118249655894259
TPCH skew test speedup 4.820477208451364
Epoch 21/50 |loss: 0.152189| train set 5.336x speedup, test set 4.820x speedup, val set 4.992x speedup, step: 6, train time 15.75 s
JOB test speedup 3.618374243450409
TPCH test speedup 5.2231405008849165
TPCH skew test speedup 4.987807026372847
Epoch 22/50 |loss: 0.148892| train set 5.298x speedup, test set 4.988x speedup, val set 4.953x speedup, step: 7, train time 15.97 s
JOB test speedup 3.346746591103112
TPCH test speedup 5.403229799224642
TPCH skew test speedup 4.9965973904716385
Epoch 23/50 |loss: 0.151068| train set 5.395x speedup, test set 4.997x speedup, val set 4.925x speedup, step: 8, train time 15.67 s
JOB test speedup 3.6492344530285648
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 24/50 |loss: 0.146436| train set 5.340x speedup, test set 4.991x speedup, val set 4.885x speedup, step: 9, train time 15.62 s
JOB test speedup 3.5367302060806205
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 25/50 |loss: 0.143304| train set 5.343x speedup, test set 4.991x speedup, val set 4.875x speedup, step: 10, train time 15.67 s
JOB test speedup 2.9107409379817875
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 26/50 |loss: 0.141533| train set 5.387x speedup, test set 5.017x speedup, val set 4.909x speedup, step: 11, train time 15.70 s
JOB test speedup 3.6260459177495092
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 27/50 |loss: 0.143266| train set 5.378x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 12, train time 15.61 s
JOB test speedup 3.551734247523075
TPCH test speedup 5.4196272640304315
TPCH skew test speedup 4.9942215454472905
Epoch 28/50 |loss: 0.138917| train set 5.388x speedup, test set 4.994x speedup, val set 5.030x speedup, step: 13, train time 15.72 s
JOB test speedup 3.637662537756841
TPCH test speedup 5.331541808545183
TPCH skew test speedup 4.9905751961273745
Epoch 29/50 |loss: 0.135625| train set 5.337x speedup, test set 4.991x speedup, val set 4.885x speedup, step: 14, train time 15.47 s
JOB test speedup 3.5320303591091697
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 30/50 |loss: 0.137264| train set 5.394x speedup, test set 5.017x speedup, val set 5.019x speedup, step: 15, train time 15.65 s
JOB test speedup 3.544424392313176
TPCH test speedup 5.4196272640304315
TPCH skew test speedup 5.014230354765658
Epoch 31/50 |loss: 0.132776| train set 5.391x speedup, test set 5.014x speedup, val set 4.923x speedup, step: 16, train time 15.78 s
JOB test speedup 3.505817209700781
TPCH test speedup 5.420162595704776
TPCH skew test speedup 4.9965973904716385
Epoch 32/50 |loss: 0.134270| train set 5.392x speedup, test set 4.997x speedup, val set 5.031x speedup, step: 17, train time 15.51 s
JOB test speedup 2.993540799276991
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 33/50 |loss: 0.135797| train set 5.392x speedup, test set 5.016x speedup, val set 4.920x speedup, step: 18, train time 15.75 s
JOB test speedup 3.650636538223475
TPCH test speedup 5.421073421195584
TPCH skew test speedup 4.996437100421392
Epoch 34/50 |loss: 0.132729| train set 5.348x speedup, test set 4.996x speedup, val set 4.921x speedup, step: 19, train time 15.69 s
JOB test speedup 3.3921826392988557
TPCH test speedup 5.3144608455406726
TPCH skew test speedup 4.971140905810445
Epoch 35/50 |loss: 0.128110| train set 5.347x speedup, test set 4.971x speedup, val set 4.886x speedup, step: 20, train time 15.60 s
JOB test speedup 3.6452806241530356
TPCH test speedup 5.419524035899206
TPCH skew test speedup 4.997049129260342
Epoch 36/50 |loss: 0.128887| train set 5.387x speedup, test set 4.997x speedup, val set 4.921x speedup, step: 21, train time 15.63 s
JOB test speedup 3.5395033599570134
TPCH test speedup 5.207414554301406
TPCH skew test speedup 4.968008124645984
Epoch 37/50 |loss: 0.131407| train set 5.351x speedup, test set 4.968x speedup, val set 4.955x speedup, step: 22, train time 15.65 s
JOB test speedup 3.5312901214026606
TPCH test speedup 5.205319192894277
TPCH skew test speedup 4.805326549608824
Epoch 38/50 |loss: 0.125472| train set 5.367x speedup, test set 4.805x speedup, val set 4.873x speedup, step: 23, train time 15.62 s
JOB test speedup 3.4241226698040412
TPCH test speedup 5.2080041055820825
TPCH skew test speedup 4.96756162104331
Epoch 39/50 |loss: 0.126313| train set 5.349x speedup, test set 4.968x speedup, val set 4.955x speedup, step: 24, train time 15.64 s
JOB test speedup 2.9762417082858508
TPCH test speedup 5.421073421195584
TPCH skew test speedup 4.996437100421392
Epoch 40/50 |loss: 0.123918| train set 5.394x speedup, test set 4.996x speedup, val set 4.921x speedup, step: 25, train time 15.56 s
JOB test speedup 3.6438027953250076
TPCH test speedup 5.232354297013583
TPCH skew test speedup 4.894580564750143
Epoch 41/50 |loss: 0.127443| train set 5.243x speedup, test set 4.895x speedup, val set 4.811x speedup, step: 26, train time 15.70 s
JOB test speedup 2.9961296609338617
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 42/50 |loss: 0.127838| train set 5.347x speedup, test set 5.017x speedup, val set 4.920x speedup, step: 27, train time 15.67 s
JOB test speedup 3.6241649869688075
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 43/50 |loss: 0.125406| train set 5.394x speedup, test set 5.017x speedup, val set 4.922x speedup, step: 28, train time 15.71 s
JOB test speedup 2.9841300006367097
TPCH test speedup 5.292874206123683
TPCH skew test speedup 4.993723503021182
Epoch 44/50 |loss: 0.122357| train set 5.347x speedup, test set 4.994x speedup, val set 4.980x speedup, step: 29, train time 16.21 s
JOB test speedup 2.98833913953275
TPCH test speedup 5.3309239580153225
TPCH skew test speedup 4.9910258465986415
Epoch 45/50 |loss: 0.122500| train set 5.383x speedup, test set 4.991x speedup, val set 4.922x speedup, step: 30, train time 15.60 s
JOB test speedup 3.659223211095468
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 46/50 |loss: 0.121119| train set 5.387x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 31, train time 15.81 s
JOB test speedup 2.9198274991783135
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 47/50 |loss: 0.119587| train set 5.391x speedup, test set 5.017x speedup, val set 4.910x speedup, step: 32, train time 15.65 s
JOB test speedup 2.9515185626382308
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 48/50 |loss: 0.118507| train set 5.340x speedup, test set 4.991x speedup, val set 4.874x speedup, step: 33, train time 15.68 s
JOB test speedup 3.534441534465096
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 49/50 |loss: 0.119969| train set 5.345x speedup, test set 5.014x speedup, val set 4.990x speedup, step: 34, train time 15.77 s
Training per epoch cost 15.679 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 0.189s, pg runtime 0.189s, speedup 1.000x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 1.050s, pg runtime 0.348s, speedup 0.331x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 3.088s, pg runtime 3.540s, speedup 1.146x
20, opt runtime 0.061s, model runtime 0.079s, pg runtime 0.086s, speedup 1.091x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.136s, pg runtime 0.891s, speedup 6.543x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.116s, pg runtime 0.112s, speedup 0.970x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
19, opt runtime 1.309s, model runtime 1.309s, pg runtime 1.356s, speedup 1.036x
20, opt runtime 1.340s, model runtime 1.490s, pg runtime 1.340s, speedup 0.899x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.098s, pg runtime 1.100s, speedup 1.001x
40, opt runtime 1.084s, model runtime 1.084s, pg runtime 1.155s, speedup 1.065x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 5.511s, model runtime 6.648s, pg runtime 14.247s, speedup 2.143x
19, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.244s, speedup 1.114x
20, opt runtime 1.367s, model runtime 1.474s, pg runtime 1.367s, speedup 0.928x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.853s, pg runtime 0.893s, speedup 1.047x
40, opt runtime 1.004s, model runtime 1.104s, pg runtime 1.004s, speedup 0.909x
====================
JOB best validation speedup epoch: 16, train speedup 5.381, test speedup 3.222, val speedup 5.033
TPCH best validation speedup epoch: 16, train speedup 5.381, test speedup 5.420, val speedup 5.033
TPCH Skew best validation speedup epoch: 16, train speedup 5.381, test speedup 5.017, val speedup 5.033
execution cost 0:13:58.906681
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.215022, and there are 24443 training samples
in channel 9
JOB test speedup 1.1801464053373252
TPCH test speedup 4.820439944575995
TPCH skew test speedup 4.618969041438772
Epoch 0/50 |loss: 0.437835| train set 4.726x speedup, test set 4.619x speedup, val set 4.589x speedup, step: 1, train time 16.63 s
JOB test speedup 0.8394880690263926
TPCH test speedup 5.272509910584238
TPCH skew test speedup 5.030575178720069
Epoch 1/50 |loss: 0.318651| train set 5.225x speedup, test set 5.031x speedup, val set 4.946x speedup, step: 1, train time 15.18 s
JOB test speedup 0.8530172925699172
TPCH test speedup 4.558129079211851
TPCH skew test speedup 4.558103250847384
Epoch 2/50 |loss: 0.283733| train set 4.549x speedup, test set 4.558x speedup, val set 4.432x speedup, step: 2, train time 15.44 s
JOB test speedup 0.5509793824228203
TPCH test speedup 5.261165164391934
TPCH skew test speedup 4.928111184750748
Epoch 3/50 |loss: 0.256129| train set 5.180x speedup, test set 4.928x speedup, val set 4.805x speedup, step: 3, train time 15.28 s
JOB test speedup 0.8856783663477489
TPCH test speedup 5.348444781544195
TPCH skew test speedup 4.948336289204575
Epoch 4/50 |loss: 0.237333| train set 5.288x speedup, test set 4.948x speedup, val set 4.859x speedup, step: 4, train time 15.33 s
JOB test speedup 2.9446414189221666
TPCH test speedup 5.396085507428801
TPCH skew test speedup 5.248944549709582
Epoch 5/50 |loss: 0.226157| train set 5.293x speedup, test set 5.249x speedup, val set 4.864x speedup, step: 5, train time 15.59 s
JOB test speedup 3.5745562460773184
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 6/50 |loss: 0.216975| train set 5.333x speedup, test set 5.016x speedup, val set 4.909x speedup, step: 6, train time 15.47 s
JOB test speedup 3.445031850788931
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 7/50 |loss: 0.205147| train set 5.341x speedup, test set 5.016x speedup, val set 4.886x speedup, step: 7, train time 15.38 s
JOB test speedup 3.2924042550681225
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 8/50 |loss: 0.200306| train set 5.338x speedup, test set 5.017x speedup, val set 5.002x speedup, step: 1, train time 15.27 s
JOB test speedup 3.4457582871126484
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 9/50 |loss: 0.193559| train set 5.311x speedup, test set 4.991x speedup, val set 4.947x speedup, step: 2, train time 15.39 s
JOB test speedup 3.6011327389025616
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 10/50 |loss: 0.188223| train set 5.327x speedup, test set 5.013x speedup, val set 5.002x speedup, step: 1, train time 15.38 s
JOB test speedup 0.8207633724144081
TPCH test speedup 5.285152567371745
TPCH skew test speedup 5.245949827005056
Epoch 11/50 |loss: 0.179225| train set 5.274x speedup, test set 5.246x speedup, val set 4.831x speedup, step: 2, train time 15.43 s
JOB test speedup 3.183195185924921
TPCH test speedup 5.082490665296233
TPCH skew test speedup 4.915168020741683
Epoch 12/50 |loss: 0.178615| train set 5.171x speedup, test set 4.915x speedup, val set 4.899x speedup, step: 3, train time 15.37 s
JOB test speedup 3.532759286979194
TPCH test speedup 5.183252030852931
TPCH skew test speedup 4.918048228959125
Epoch 13/50 |loss: 0.175504| train set 5.372x speedup, test set 4.918x speedup, val set 4.887x speedup, step: 4, train time 15.23 s
JOB test speedup 3.4478393530256506
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 14/50 |loss: 0.170273| train set 5.377x speedup, test set 5.017x speedup, val set 4.923x speedup, step: 5, train time 15.47 s
JOB test speedup 2.381928527509573
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 15/50 |loss: 0.167566| train set 5.330x speedup, test set 5.013x speedup, val set 5.002x speedup, step: 6, train time 15.48 s
JOB test speedup 3.2752104854331514
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 16/50 |loss: 0.163063| train set 5.382x speedup, test set 5.017x speedup, val set 4.912x speedup, step: 7, train time 15.58 s
JOB test speedup 0.8114176234094465
TPCH test speedup 5.3141993278581445
TPCH skew test speedup 4.970852481479952
Epoch 17/50 |loss: 0.159208| train set 5.306x speedup, test set 4.971x speedup, val set 4.821x speedup, step: 8, train time 15.37 s
JOB test speedup 3.517326107315675
TPCH test speedup 5.3309239580153225
TPCH skew test speedup 4.9910258465986415
Epoch 18/50 |loss: 0.158545| train set 5.330x speedup, test set 4.991x speedup, val set 4.876x speedup, step: 9, train time 15.47 s
JOB test speedup 3.609162665928895
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 19/50 |loss: 0.154846| train set 5.301x speedup, test set 4.991x speedup, val set 4.874x speedup, step: 10, train time 15.26 s
JOB test speedup 3.5993226988781406
TPCH test speedup 5.181488682802376
TPCH skew test speedup 4.802251401486376
Epoch 20/50 |loss: 0.153071| train set 5.206x speedup, test set 4.802x speedup, val set 4.891x speedup, step: 11, train time 15.59 s
JOB test speedup 0.8413651038587484
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 21/50 |loss: 0.150024| train set 5.339x speedup, test set 5.014x speedup, val set 4.994x speedup, step: 12, train time 15.50 s
JOB test speedup 0.8545766533424904
TPCH test speedup 5.3309239580153225
TPCH skew test speedup 4.9910258465986415
Epoch 22/50 |loss: 0.147840| train set 5.299x speedup, test set 4.991x speedup, val set 4.928x speedup, step: 13, train time 15.40 s
JOB test speedup 0.8481995450217273
TPCH test speedup 5.081719090840187
TPCH skew test speedup 4.871143175988437
Epoch 23/50 |loss: 0.148201| train set 5.341x speedup, test set 4.871x speedup, val set 4.708x speedup, step: 14, train time 15.47 s
JOB test speedup 3.608539849566998
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 24/50 |loss: 0.144610| train set 5.387x speedup, test set 5.017x speedup, val set 4.891x speedup, step: 15, train time 15.58 s
JOB test speedup 3.3396704582508914
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 25/50 |loss: 0.142468| train set 5.339x speedup, test set 4.991x speedup, val set 4.867x speedup, step: 16, train time 15.56 s
JOB test speedup 3.4999954769791155
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 26/50 |loss: 0.140034| train set 5.386x speedup, test set 5.017x speedup, val set 4.875x speedup, step: 17, train time 15.65 s
JOB test speedup 3.5506773146059376
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 27/50 |loss: 0.140197| train set 5.388x speedup, test set 5.016x speedup, val set 4.889x speedup, step: 18, train time 15.56 s
JOB test speedup 3.3776694403546443
TPCH test speedup 5.310608248671319
TPCH skew test speedup 5.013112192765863
Epoch 28/50 |loss: 0.140161| train set 5.342x speedup, test set 5.013x speedup, val set 5.080x speedup, step: 1, train time 15.52 s
JOB test speedup 3.389965759236556
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 29/50 |loss: 0.135085| train set 5.346x speedup, test set 5.017x speedup, val set 4.888x speedup, step: 2, train time 15.60 s
JOB test speedup 3.49584921163367
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 30/50 |loss: 0.133718| train set 5.392x speedup, test set 5.016x speedup, val set 4.887x speedup, step: 3, train time 15.67 s
JOB test speedup 3.467372122236503
TPCH test speedup 5.403229799224642
TPCH skew test speedup 4.9965973904716385
Epoch 31/50 |loss: 0.132690| train set 5.393x speedup, test set 4.997x speedup, val set 4.890x speedup, step: 4, train time 15.59 s
JOB test speedup 3.3126739777112584
TPCH test speedup 5.402595222724218
TPCH skew test speedup 4.997049129260342
Epoch 32/50 |loss: 0.132865| train set 5.394x speedup, test set 4.997x speedup, val set 4.890x speedup, step: 5, train time 15.60 s
JOB test speedup 3.391185377405712
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 33/50 |loss: 0.132492| train set 5.389x speedup, test set 5.016x speedup, val set 4.889x speedup, step: 6, train time 15.66 s
JOB test speedup 0.8122164544608987
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 34/50 |loss: 0.129560| train set 5.349x speedup, test set 5.016x speedup, val set 4.969x speedup, step: 7, train time 15.73 s
JOB test speedup 0.8475816691651221
TPCH test speedup 5.315074885615789
TPCH skew test speedup 4.9706938389332604
Epoch 35/50 |loss: 0.128586| train set 5.305x speedup, test set 4.971x speedup, val set 4.853x speedup, step: 8, train time 15.74 s
JOB test speedup 3.0244877120261617
TPCH test speedup 5.402595222724218
TPCH skew test speedup 4.997049129260342
Epoch 36/50 |loss: 0.127077| train set 5.392x speedup, test set 4.997x speedup, val set 4.892x speedup, step: 9, train time 15.69 s
JOB test speedup 3.634376402398691
TPCH test speedup 5.313585490057591
TPCH skew test speedup 4.971299576895667
Epoch 37/50 |loss: 0.129872| train set 5.346x speedup, test set 4.971x speedup, val set 4.856x speedup, step: 10, train time 15.78 s
JOB test speedup 3.342289856377471
TPCH test speedup 5.402595222724218
TPCH skew test speedup 4.997049129260342
Epoch 38/50 |loss: 0.126473| train set 5.387x speedup, test set 4.997x speedup, val set 4.889x speedup, step: 11, train time 15.85 s
JOB test speedup 3.18434815385157
TPCH test speedup 5.293483267744177
TPCH skew test speedup 4.993272365285864
Epoch 39/50 |loss: 0.124386| train set 5.345x speedup, test set 4.993x speedup, val set 4.958x speedup, step: 12, train time 15.67 s
JOB test speedup 0.8132945675953402
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 40/50 |loss: 0.122739| train set 5.389x speedup, test set 5.016x speedup, val set 4.887x speedup, step: 13, train time 15.77 s
JOB test speedup 3.401404083517229
TPCH test speedup 5.403500153108997
TPCH skew test speedup 4.996888810225833
Epoch 41/50 |loss: 0.123514| train set 5.392x speedup, test set 4.997x speedup, val set 4.886x speedup, step: 14, train time 15.70 s
JOB test speedup 2.9616267964041203
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 42/50 |loss: 0.123187| train set 5.395x speedup, test set 5.017x speedup, val set 4.887x speedup, step: 15, train time 15.67 s
JOB test speedup 3.573628370450763
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 43/50 |loss: 0.123527| train set 5.389x speedup, test set 5.017x speedup, val set 4.853x speedup, step: 16, train time 15.79 s
JOB test speedup 0.81357182630948
TPCH test speedup 5.403229799224642
TPCH skew test speedup 4.9965973904716385
Epoch 44/50 |loss: 0.121589| train set 5.349x speedup, test set 4.997x speedup, val set 4.932x speedup, step: 17, train time 16.07 s
JOB test speedup 2.8358787419456224
TPCH test speedup 5.403229799224642
TPCH skew test speedup 4.9965973904716385
Epoch 45/50 |loss: 0.119193| train set 5.386x speedup, test set 4.997x speedup, val set 4.892x speedup, step: 18, train time 15.86 s
JOB test speedup 3.630889235915114
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 46/50 |loss: 0.120936| train set 5.393x speedup, test set 5.017x speedup, val set 4.891x speedup, step: 19, train time 15.64 s
JOB test speedup 3.341904249178345
TPCH test speedup 5.389014212704097
TPCH skew test speedup 4.992932749182944
Epoch 47/50 |loss: 0.118623| train set 5.380x speedup, test set 4.993x speedup, val set 4.897x speedup, step: 20, train time 15.63 s
JOB test speedup 0.807744530545039
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 48/50 |loss: 0.116561| train set 5.335x speedup, test set 4.991x speedup, val set 4.853x speedup, step: 21, train time 15.81 s
JOB test speedup 3.471637146086918
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 49/50 |loss: 0.117839| train set 5.344x speedup, test set 5.014x speedup, val set 4.967x speedup, step: 22, train time 15.61 s
Training per epoch cost 15.579 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.102x
02, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.028x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.386s, pg runtime 0.313s, speedup 0.811x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 2.365s, pg runtime 3.540s, speedup 1.497x
20, opt runtime 0.061s, model runtime 0.061s, pg runtime 0.086s, speedup 1.407x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.356s, pg runtime 1.356s, speedup 1.000x
20, opt runtime 1.340s, model runtime 1.340s, pg runtime 1.340s, speedup 1.000x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.098s, pg runtime 1.100s, speedup 1.001x
40, opt runtime 1.084s, model runtime 1.084s, pg runtime 1.155s, speedup 1.065x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.244s, pg runtime 1.244s, speedup 1.000x
20, opt runtime 1.367s, model runtime 1.367s, pg runtime 1.367s, speedup 1.000x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.853s, pg runtime 0.893s, speedup 1.047x
40, opt runtime 1.004s, model runtime 1.104s, pg runtime 1.004s, speedup 0.909x
====================
JOB best validation speedup epoch: 28, train speedup 5.342, test speedup 3.378, val speedup 5.080
TPCH best validation speedup epoch: 28, train speedup 5.342, test speedup 5.311, val speedup 5.080
TPCH Skew best validation speedup epoch: 28, train speedup 5.342, test speedup 5.013, val speedup 5.080
execution cost 0:13:54.602992
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.217744, and there are 24443 training samples
in channel 9
JOB test speedup 1.0566633834591084
TPCH test speedup 5.075858099002647
TPCH skew test speedup 4.871634128525484
Epoch 0/50 |loss: 0.435367| train set 4.836x speedup, test set 4.872x speedup, val set 4.779x speedup, step: 1, train time 16.99 s
JOB test speedup 2.200766732648881
TPCH test speedup 5.346415662540103
TPCH skew test speedup 4.9466058429784505
Epoch 1/50 |loss: 0.321412| train set 5.166x speedup, test set 4.947x speedup, val set 4.788x speedup, step: 1, train time 15.68 s
JOB test speedup 2.9027448980168895
TPCH test speedup 4.974903167803779
TPCH skew test speedup 4.8603962349433765
Epoch 2/50 |loss: 0.283525| train set 5.037x speedup, test set 4.860x speedup, val set 4.757x speedup, step: 2, train time 15.44 s
JOB test speedup 0.5993233316666726
TPCH test speedup 5.110652843442481
TPCH skew test speedup 4.857896039220411
Epoch 3/50 |loss: 0.254984| train set 5.053x speedup, test set 4.858x speedup, val set 4.692x speedup, step: 3, train time 15.47 s
JOB test speedup 0.8915515382422667
TPCH test speedup 5.1168169736345614
TPCH skew test speedup 4.852550258737756
Epoch 4/50 |loss: 0.235817| train set 5.097x speedup, test set 4.853x speedup, val set 4.643x speedup, step: 4, train time 15.71 s
JOB test speedup 2.981590088277964
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 5/50 |loss: 0.223625| train set 5.319x speedup, test set 5.013x speedup, val set 5.095x speedup, step: 1, train time 15.76 s
JOB test speedup 3.4854646630061428
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 6/50 |loss: 0.213751| train set 5.378x speedup, test set 5.017x speedup, val set 4.957x speedup, step: 2, train time 15.65 s
JOB test speedup 3.4220540315169434
TPCH test speedup 5.382537094145094
TPCH skew test speedup 5.035905015337784
Epoch 7/50 |loss: 0.203442| train set 5.325x speedup, test set 5.036x speedup, val set 4.886x speedup, step: 3, train time 15.65 s
JOB test speedup 2.8293893949624325
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 8/50 |loss: 0.198292| train set 5.329x speedup, test set 5.013x speedup, val set 4.967x speedup, step: 4, train time 15.80 s
JOB test speedup 2.4842149313399844
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 9/50 |loss: 0.191280| train set 5.315x speedup, test set 4.991x speedup, val set 4.921x speedup, step: 5, train time 15.66 s
JOB test speedup 2.9687568602686203
TPCH test speedup 5.310608248671319
TPCH skew test speedup 5.013112192765863
Epoch 10/50 |loss: 0.187525| train set 5.312x speedup, test set 5.013x speedup, val set 4.964x speedup, step: 6, train time 15.68 s
JOB test speedup 0.8540221794640175
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 11/50 |loss: 0.179584| train set 5.332x speedup, test set 5.014x speedup, val set 5.040x speedup, step: 7, train time 15.77 s
JOB test speedup 3.3230058764548636
TPCH test speedup 5.080814329930001
TPCH skew test speedup 4.9154190882320234
Epoch 12/50 |loss: 0.178461| train set 5.172x speedup, test set 4.915x speedup, val set 4.875x speedup, step: 8, train time 15.83 s
JOB test speedup 3.608381869914246
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 13/50 |loss: 0.173489| train set 5.372x speedup, test set 5.016x speedup, val set 5.008x speedup, step: 9, train time 16.06 s
JOB test speedup 2.9759641840104814
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 14/50 |loss: 0.171081| train set 5.342x speedup, test set 5.014x speedup, val set 5.076x speedup, step: 10, train time 15.86 s
JOB test speedup 2.8238401839689105
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 15/50 |loss: 0.166228| train set 5.337x speedup, test set 5.013x speedup, val set 5.040x speedup, step: 11, train time 15.98 s
JOB test speedup 3.247107450509535
TPCH test speedup 5.182419361745912
TPCH skew test speedup 4.918203528819098
Epoch 16/50 |loss: 0.163154| train set 5.377x speedup, test set 4.918x speedup, val set 4.994x speedup, step: 12, train time 16.00 s
JOB test speedup 2.984264432127628
TPCH test speedup 5.315074885615789
TPCH skew test speedup 4.9706938389332604
Epoch 17/50 |loss: 0.160119| train set 5.307x speedup, test set 4.971x speedup, val set 4.818x speedup, step: 13, train time 15.96 s
JOB test speedup 0.8486022429096682
TPCH test speedup 5.3144608455406726
TPCH skew test speedup 4.990964835247496
Epoch 18/50 |loss: 0.159237| train set 5.329x speedup, test set 4.991x speedup, val set 4.886x speedup, step: 14, train time 16.06 s
JOB test speedup 3.4103674343090438
TPCH test speedup 5.224579617722351
TPCH skew test speedup 4.987197259211708
Epoch 19/50 |loss: 0.155082| train set 5.304x speedup, test set 4.987x speedup, val set 5.026x speedup, step: 15, train time 16.05 s
JOB test speedup 2.9795157727920847
TPCH test speedup 5.187429295412312
TPCH skew test speedup 4.80686796664308
Epoch 20/50 |loss: 0.151877| train set 5.207x speedup, test set 4.807x speedup, val set 4.858x speedup, step: 16, train time 15.98 s
JOB test speedup 0.8436960931330842
TPCH test speedup 5.219691055951028
TPCH skew test speedup 4.821782432832937
Epoch 21/50 |loss: 0.150218| train set 5.288x speedup, test set 4.822x speedup, val set 4.951x speedup, step: 17, train time 16.00 s
JOB test speedup 0.7893461621545159
TPCH test speedup 5.2231405008849165
TPCH skew test speedup 4.987807026372847
Epoch 22/50 |loss: 0.148512| train set 5.301x speedup, test set 4.988x speedup, val set 4.928x speedup, step: 18, train time 16.10 s
JOB test speedup 2.9688863010645754
TPCH test speedup 5.3144608455406726
TPCH skew test speedup 4.971140905810445
Epoch 23/50 |loss: 0.147687| train set 5.396x speedup, test set 4.971x speedup, val set 4.851x speedup, step: 19, train time 16.08 s
JOB test speedup 2.8424105252199663
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 24/50 |loss: 0.145647| train set 5.386x speedup, test set 4.991x speedup, val set 4.886x speedup, step: 20, train time 16.08 s
JOB test speedup 3.5366168128424245
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 25/50 |loss: 0.142666| train set 5.347x speedup, test set 4.991x speedup, val set 4.875x speedup, step: 21, train time 16.01 s
JOB test speedup 3.414267991688541
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 26/50 |loss: 0.141168| train set 5.390x speedup, test set 5.017x speedup, val set 4.909x speedup, step: 22, train time 15.92 s
JOB test speedup 3.373890693392062
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 27/50 |loss: 0.142043| train set 5.385x speedup, test set 5.017x speedup, val set 4.922x speedup, step: 23, train time 16.04 s
JOB test speedup 2.9221227921628765
TPCH test speedup 5.223236383283274
TPCH skew test speedup 4.984989889240244
Epoch 28/50 |loss: 0.139764| train set 5.303x speedup, test set 4.985x speedup, val set 5.038x speedup, step: 24, train time 16.07 s
JOB test speedup 2.757292906112041
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 29/50 |loss: 0.135414| train set 5.383x speedup, test set 5.016x speedup, val set 5.030x speedup, step: 25, train time 16.25 s
JOB test speedup 2.9832579533847965
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 30/50 |loss: 0.133373| train set 5.394x speedup, test set 5.017x speedup, val set 4.994x speedup, step: 26, train time 15.89 s
JOB test speedup 3.0196502845844546
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 31/50 |loss: 0.131921| train set 5.394x speedup, test set 5.017x speedup, val set 4.923x speedup, step: 27, train time 16.16 s
JOB test speedup 2.6556247471004655
TPCH test speedup 5.418988830348117
TPCH skew test speedup 5.014685287692701
Epoch 32/50 |loss: 0.134597| train set 5.391x speedup, test set 5.015x speedup, val set 4.922x speedup, step: 28, train time 15.87 s
JOB test speedup 2.899793298707055
TPCH test speedup 5.403500153108997
TPCH skew test speedup 4.996888810225833
Epoch 33/50 |loss: 0.131737| train set 5.390x speedup, test set 4.997x speedup, val set 5.032x speedup, step: 29, train time 15.78 s
JOB test speedup 2.8381103015768634
TPCH test speedup 5.246766206575001
TPCH skew test speedup 4.818732265214623
Epoch 34/50 |loss: 0.132236| train set 5.203x speedup, test set 4.819x speedup, val set 4.783x speedup, step: 30, train time 15.87 s
JOB test speedup 2.8239705862759656
TPCH test speedup 5.208845017148437
TPCH skew test speedup 4.967403188476435
Epoch 35/50 |loss: 0.128238| train set 5.302x speedup, test set 4.967x speedup, val set 4.966x speedup, step: 31, train time 15.82 s
JOB test speedup 2.983664182858622
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 36/50 |loss: 0.127769| train set 5.377x speedup, test set 4.991x speedup, val set 4.887x speedup, step: 32, train time 15.87 s
JOB test speedup 3.417601954966615
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 37/50 |loss: 0.130708| train set 5.346x speedup, test set 4.991x speedup, val set 4.862x speedup, step: 33, train time 16.01 s
JOB test speedup 2.944213302870873
TPCH test speedup 5.313585490057591
TPCH skew test speedup 4.971299576895667
Epoch 38/50 |loss: 0.124713| train set 5.384x speedup, test set 4.971x speedup, val set 4.923x speedup, step: 34, train time 16.04 s
JOB test speedup 2.787872354642533
TPCH test speedup 5.208845017148437
TPCH skew test speedup 4.967403188476435
Epoch 39/50 |loss: 0.126170| train set 5.348x speedup, test set 4.967x speedup, val set 4.956x speedup, step: 35, train time 16.00 s
JOB test speedup 2.915167123963811
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 40/50 |loss: 0.124160| train set 5.390x speedup, test set 4.991x speedup, val set 4.885x speedup, step: 36, train time 16.01 s
JOB test speedup 2.8954540675809004
TPCH test speedup 5.330840995592268
TPCH skew test speedup 4.990964835247496
Epoch 41/50 |loss: 0.124766| train set 5.300x speedup, test set 4.991x speedup, val set 4.885x speedup, step: 37, train time 16.01 s
JOB test speedup 2.866745298007418
TPCH test speedup 5.403500153108997
TPCH skew test speedup 4.996888810225833
Epoch 42/50 |loss: 0.126318| train set 5.393x speedup, test set 4.997x speedup, val set 4.922x speedup, step: 38, train time 16.03 s
JOB test speedup 3.0032691747940174
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 43/50 |loss: 0.123256| train set 5.378x speedup, test set 4.991x speedup, val set 4.922x speedup, step: 39, train time 15.90 s
JOB test speedup 2.9041976879237925
TPCH test speedup 5.292874206123683
TPCH skew test speedup 4.993723503021182
Epoch 44/50 |loss: 0.122812| train set 5.348x speedup, test set 4.994x speedup, val set 5.117x speedup, step: 1, train time 16.68 s
JOB test speedup 2.829001000572755
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 45/50 |loss: 0.121516| train set 5.388x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 2, train time 16.05 s
JOB test speedup 2.797755519676325
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 46/50 |loss: 0.120376| train set 5.392x speedup, test set 5.016x speedup, val set 4.909x speedup, step: 3, train time 15.88 s
JOB test speedup 3.568799286803951
TPCH test speedup 5.419524035899206
TPCH skew test speedup 5.017080647248503
Epoch 47/50 |loss: 0.118121| train set 5.384x speedup, test set 5.017x speedup, val set 5.019x speedup, step: 4, train time 16.02 s
JOB test speedup 2.8038871906027896
TPCH test speedup 5.330840995592268
TPCH skew test speedup 4.990964835247496
Epoch 48/50 |loss: 0.118780| train set 5.345x speedup, test set 4.991x speedup, val set 4.873x speedup, step: 5, train time 16.07 s
JOB test speedup 3.0177316614718595
TPCH test speedup 5.292874206123683
TPCH skew test speedup 4.993723503021182
Epoch 49/50 |loss: 0.117381| train set 5.340x speedup, test set 4.994x speedup, val set 5.002x speedup, step: 6, train time 15.97 s
Training per epoch cost 15.950 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 1.050s, pg runtime 0.348s, speedup 0.331x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.469s, pg runtime 0.453s, speedup 0.967x
17, opt runtime 0.327s, model runtime 0.366s, pg runtime 0.354s, speedup 0.966x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.080s, pg runtime 0.112s, speedup 1.403x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
08, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.309s, pg runtime 1.356s, speedup 1.036x
20, opt runtime 1.340s, model runtime 1.490s, pg runtime 1.340s, speedup 0.899x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.100s, pg runtime 1.100s, speedup 1.000x
40, opt runtime 1.084s, model runtime 1.155s, pg runtime 1.155s, speedup 1.000x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 7.445s, pg runtime 12.078s, speedup 1.622x
08, opt runtime 5.471s, model runtime 7.216s, pg runtime 13.410s, speedup 1.858x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.244s, speedup 1.114x
20, opt runtime 1.367s, model runtime 1.474s, pg runtime 1.367s, speedup 0.928x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.893s, pg runtime 0.893s, speedup 1.000x
40, opt runtime 1.004s, model runtime 1.004s, pg runtime 1.004s, speedup 1.000x
====================
JOB best validation speedup epoch: 44, train speedup 5.348, test speedup 2.904, val speedup 5.117
TPCH best validation speedup epoch: 44, train speedup 5.348, test speedup 5.293, val speedup 5.117
TPCH Skew best validation speedup epoch: 44, train speedup 5.348, test speedup 4.994, val speedup 5.117
execution cost 0:14:13.592817
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.225427, and there are 24443 training samples
in channel 9
JOB test speedup 3.2325966736011433
TPCH test speedup 5.07119862204387
TPCH skew test speedup 4.868622463424152
Epoch 0/50 |loss: 0.435841| train set 5.077x speedup, test set 4.869x speedup, val set 4.856x speedup, step: 1, train time 16.72 s
JOB test speedup 0.8048538555537582
TPCH test speedup 5.203782240152622
TPCH skew test speedup 4.9620665547443235
Epoch 1/50 |loss: 0.317769| train set 5.115x speedup, test set 4.962x speedup, val set 4.970x speedup, step: 1, train time 15.41 s
JOB test speedup 0.8510642547275459
TPCH test speedup 5.193000006572225
TPCH skew test speedup 4.9569398477253594
Epoch 2/50 |loss: 0.283107| train set 5.036x speedup, test set 4.957x speedup, val set 5.023x speedup, step: 1, train time 15.54 s
JOB test speedup 0.5940665003861859
TPCH test speedup 5.260059245471341
TPCH skew test speedup 4.92623903511782
Epoch 3/50 |loss: 0.254155| train set 5.221x speedup, test set 4.926x speedup, val set 4.807x speedup, step: 2, train time 15.56 s
JOB test speedup 0.8104676803164991
TPCH test speedup 5.261195995813327
TPCH skew test speedup 4.923085051245278
Epoch 4/50 |loss: 0.235336| train set 5.224x speedup, test set 4.923x speedup, val set 4.793x speedup, step: 3, train time 15.42 s
JOB test speedup 2.6111893115290563
TPCH test speedup 5.330840995592268
TPCH skew test speedup 4.990964835247496
Epoch 5/50 |loss: 0.226188| train set 5.238x speedup, test set 4.991x speedup, val set 4.909x speedup, step: 4, train time 15.58 s
JOB test speedup 3.5237879591120365
TPCH test speedup 5.356781732900404
TPCH skew test speedup 4.937201415742142
Epoch 6/50 |loss: 0.213570| train set 5.363x speedup, test set 4.937x speedup, val set 4.870x speedup, step: 5, train time 15.57 s
JOB test speedup 3.375568686014116
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 7/50 |loss: 0.204973| train set 5.330x speedup, test set 5.016x speedup, val set 4.843x speedup, step: 6, train time 15.42 s
JOB test speedup 3.3763553115341676
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 8/50 |loss: 0.196685| train set 5.331x speedup, test set 5.013x speedup, val set 5.040x speedup, step: 1, train time 15.51 s
JOB test speedup 2.861194960360564
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 9/50 |loss: 0.191452| train set 5.316x speedup, test set 4.991x speedup, val set 4.909x speedup, step: 2, train time 15.55 s
JOB test speedup 3.583649508575332
TPCH test speedup 5.4196272640304315
TPCH skew test speedup 5.014230354765658
Epoch 10/50 |loss: 0.187145| train set 5.293x speedup, test set 5.014x speedup, val set 4.852x speedup, step: 3, train time 15.67 s
JOB test speedup 0.882518287419241
TPCH test speedup 5.310608248671319
TPCH skew test speedup 5.013112192765863
Epoch 11/50 |loss: 0.179032| train set 5.335x speedup, test set 5.013x speedup, val set 4.932x speedup, step: 4, train time 15.47 s
JOB test speedup 0.8809021516937038
TPCH test speedup 5.3099952401464785
TPCH skew test speedup 5.013566922808306
Epoch 12/50 |loss: 0.179387| train set 5.340x speedup, test set 5.014x speedup, val set 5.065x speedup, step: 1, train time 15.55 s
JOB test speedup 3.5327798909908816
TPCH test speedup 5.264094720003678
TPCH skew test speedup 4.839435534067396
Epoch 13/50 |loss: 0.174700| train set 5.188x speedup, test set 4.839x speedup, val set 4.897x speedup, step: 2, train time 15.53 s
JOB test speedup 0.8411408777428282
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 14/50 |loss: 0.169623| train set 5.342x speedup, test set 5.017x speedup, val set 5.001x speedup, step: 3, train time 15.47 s
JOB test speedup 3.345943625709012
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 15/50 |loss: 0.165929| train set 5.328x speedup, test set 5.017x speedup, val set 4.852x speedup, step: 4, train time 15.50 s
JOB test speedup 3.2192314219832974
TPCH test speedup 5.4196272640304315
TPCH skew test speedup 5.014230354765658
Epoch 16/50 |loss: 0.163795| train set 5.379x speedup, test set 5.014x speedup, val set 4.868x speedup, step: 5, train time 15.56 s
JOB test speedup 3.561031438694621
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 17/50 |loss: 0.160725| train set 5.316x speedup, test set 4.991x speedup, val set 4.832x speedup, step: 6, train time 15.52 s
JOB test speedup 3.646131941489751
TPCH test speedup 5.313585490057591
TPCH skew test speedup 4.971299576895667
Epoch 18/50 |loss: 0.159450| train set 5.339x speedup, test set 4.971x speedup, val set 4.854x speedup, step: 7, train time 15.63 s
JOB test speedup 3.162699095131404
TPCH test speedup 5.223733618533907
TPCH skew test speedup 4.987356956956355
Epoch 19/50 |loss: 0.154514| train set 5.297x speedup, test set 4.987x speedup, val set 5.039x speedup, step: 8, train time 15.60 s
JOB test speedup 3.632217076089444
TPCH test speedup 5.188342159287504
TPCH skew test speedup 4.806776208187612
Epoch 20/50 |loss: 0.154686| train set 5.194x speedup, test set 4.807x speedup, val set 4.725x speedup, step: 9, train time 15.68 s
JOB test speedup 0.8569526913468729
TPCH test speedup 5.118249655894259
TPCH skew test speedup 4.820477208451364
Epoch 21/50 |loss: 0.150557| train set 5.292x speedup, test set 4.820x speedup, val set 4.908x speedup, step: 10, train time 15.56 s
JOB test speedup 3.495958826290295
TPCH test speedup 5.22398630795438
TPCH skew test speedup 4.9876472998044505
Epoch 22/50 |loss: 0.149082| train set 5.295x speedup, test set 4.988x speedup, val set 4.929x speedup, step: 11, train time 15.56 s
JOB test speedup 3.5788462337761593
TPCH test speedup 5.167184528405758
TPCH skew test speedup 4.899232422509939
Epoch 23/50 |loss: 0.148913| train set 5.397x speedup, test set 4.899x speedup, val set 4.888x speedup, step: 12, train time 15.61 s
JOB test speedup 3.4366133930333596
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 24/50 |loss: 0.148533| train set 5.348x speedup, test set 4.991x speedup, val set 4.897x speedup, step: 13, train time 15.77 s
JOB test speedup 3.324590700382509
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 25/50 |loss: 0.142656| train set 5.382x speedup, test set 5.017x speedup, val set 4.909x speedup, step: 14, train time 15.81 s
JOB test speedup 3.44485517964294
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 26/50 |loss: 0.140457| train set 5.390x speedup, test set 5.017x speedup, val set 4.886x speedup, step: 15, train time 15.62 s
JOB test speedup 3.5851922079541763
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 27/50 |loss: 0.140702| train set 5.387x speedup, test set 5.016x speedup, val set 4.887x speedup, step: 16, train time 15.67 s
JOB test speedup 0.9007031165300728
TPCH test speedup 5.204170995507673
TPCH skew test speedup 4.961594535248615
Epoch 28/50 |loss: 0.139249| train set 5.301x speedup, test set 4.962x speedup, val set 4.940x speedup, step: 17, train time 15.61 s
JOB test speedup 3.365587788157927
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 29/50 |loss: 0.137251| train set 5.380x speedup, test set 4.991x speedup, val set 4.863x speedup, step: 18, train time 15.71 s
JOB test speedup 3.6021642585825813
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.017080647248503
Epoch 30/50 |loss: 0.135285| train set 5.394x speedup, test set 5.017x speedup, val set 4.887x speedup, step: 19, train time 15.75 s
JOB test speedup 3.659191746923147
TPCH test speedup 5.399635327856722
TPCH skew test speedup 4.992932749182944
Epoch 31/50 |loss: 0.132822| train set 5.397x speedup, test set 4.993x speedup, val set 4.933x speedup, step: 20, train time 15.66 s
JOB test speedup 3.6442015109032257
TPCH test speedup 5.36521238202836
TPCH skew test speedup 5.016178402792574
Epoch 32/50 |loss: 0.133344| train set 5.368x speedup, test set 5.016x speedup, val set 4.887x speedup, step: 21, train time 15.86 s
JOB test speedup 3.546592657530449
TPCH test speedup 5.404134942221828
TPCH skew test speedup 4.996437100421392
Epoch 33/50 |loss: 0.133539| train set 5.392x speedup, test set 4.996x speedup, val set 4.909x speedup, step: 22, train time 15.65 s
JOB test speedup 0.9001623601596362
TPCH test speedup 5.417455177816855
TPCH skew test speedup 5.012769872592598
Epoch 34/50 |loss: 0.132477| train set 5.392x speedup, test set 5.013x speedup, val set 4.886x speedup, step: 23, train time 15.75 s
JOB test speedup 0.8943798756556681
TPCH test speedup 5.121828119099036
TPCH skew test speedup 4.7816570550387585
Epoch 35/50 |loss: 0.130067| train set 5.351x speedup, test set 4.782x speedup, val set 4.840x speedup, step: 24, train time 15.90 s
JOB test speedup 3.3350426969053992
TPCH test speedup 5.313585490057591
TPCH skew test speedup 4.971299576895667
Epoch 36/50 |loss: 0.127968| train set 5.386x speedup, test set 4.971x speedup, val set 4.890x speedup, step: 25, train time 15.85 s
JOB test speedup 3.5349648563472624
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 37/50 |loss: 0.132133| train set 5.392x speedup, test set 4.991x speedup, val set 4.886x speedup, step: 26, train time 15.67 s
JOB test speedup 3.546496475872209
TPCH test speedup 5.220187616391214
TPCH skew test speedup 4.823997008826788
Epoch 38/50 |loss: 0.125701| train set 5.343x speedup, test set 4.824x speedup, val set 4.874x speedup, step: 27, train time 15.86 s
JOB test speedup 3.321911264661487
TPCH test speedup 5.403229799224642
TPCH skew test speedup 4.9965973904716385
Epoch 39/50 |loss: 0.124623| train set 5.345x speedup, test set 4.997x speedup, val set 4.890x speedup, step: 28, train time 15.49 s
JOB test speedup 0.8945218429618232
TPCH test speedup 5.404134942221828
TPCH skew test speedup 4.996437100421392
Epoch 40/50 |loss: 0.124652| train set 5.394x speedup, test set 4.996x speedup, val set 4.921x speedup, step: 29, train time 15.68 s
JOB test speedup 3.544004690846361
TPCH test speedup 5.324040365557835
TPCH skew test speedup 4.957597678466906
Epoch 41/50 |loss: 0.125854| train set 5.342x speedup, test set 4.958x speedup, val set 4.862x speedup, step: 30, train time 15.86 s
JOB test speedup 3.6114872849989954
TPCH test speedup 5.404490654660075
TPCH skew test speedup 4.996789653825579
Epoch 42/50 |loss: 0.125037| train set 5.394x speedup, test set 4.997x speedup, val set 4.868x speedup, step: 31, train time 15.74 s
JOB test speedup 3.3271431519632593
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 43/50 |loss: 0.124233| train set 5.368x speedup, test set 4.991x speedup, val set 4.851x speedup, step: 32, train time 15.72 s
JOB test speedup 3.5545638764035163
TPCH test speedup 5.292874206123683
TPCH skew test speedup 4.993723503021182
Epoch 44/50 |loss: 0.122251| train set 5.349x speedup, test set 4.994x speedup, val set 4.968x speedup, step: 33, train time 15.98 s
JOB test speedup 3.4249092375574306
TPCH test speedup 5.205398294362124
TPCH skew test speedup 4.80538310672243
Epoch 45/50 |loss: 0.121329| train set 5.379x speedup, test set 4.805x speedup, val set 4.840x speedup, step: 34, train time 15.86 s
JOB test speedup 3.6264877121993315
TPCH test speedup 5.404134942221828
TPCH skew test speedup 4.996437100421392
Epoch 46/50 |loss: 0.121064| train set 5.392x speedup, test set 4.996x speedup, val set 4.900x speedup, step: 35, train time 15.79 s
JOB test speedup 3.554704293111534
TPCH test speedup 5.313585490057591
TPCH skew test speedup 4.971299576895667
Epoch 47/50 |loss: 0.119376| train set 5.390x speedup, test set 4.971x speedup, val set 4.876x speedup, step: 36, train time 15.64 s
JOB test speedup 3.3423533413816164
TPCH test speedup 5.313585490057591
TPCH skew test speedup 4.971299576895667
Epoch 48/50 |loss: 0.117852| train set 5.344x speedup, test set 4.971x speedup, val set 4.842x speedup, step: 37, train time 15.65 s
JOB test speedup 3.5327054507750204
TPCH test speedup 5.293742750430138
TPCH skew test speedup 4.993563397302661
Epoch 49/50 |loss: 0.118619| train set 5.347x speedup, test set 4.994x speedup, val set 4.968x speedup, step: 38, train time 15.59 s
Training per epoch cost 15.667 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 0.184s, pg runtime 0.189s, speedup 1.030x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 1.050s, pg runtime 0.348s, speedup 0.331x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.467s, pg runtime 0.453s, speedup 0.972x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 78.426s, pg runtime 3.540s, speedup 0.045x
20, opt runtime 0.061s, model runtime 0.076s, pg runtime 0.086s, speedup 1.124x
21, opt runtime 0.626s, model runtime 1.404s, pg runtime 2.558s, speedup 1.822x
22, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.891s, speedup 5.964x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.080s, pg runtime 0.112s, speedup 1.403x
28, opt runtime 0.154s, model runtime 0.476s, pg runtime 0.154s, speedup 0.324x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.356s, pg runtime 1.356s, speedup 1.000x
20, opt runtime 1.340s, model runtime 1.340s, pg runtime 1.340s, speedup 1.000x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.100s, pg runtime 1.100s, speedup 1.000x
40, opt runtime 1.084s, model runtime 1.155s, pg runtime 1.155s, speedup 1.000x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.244s, pg runtime 1.244s, speedup 1.000x
20, opt runtime 1.367s, model runtime 1.367s, pg runtime 1.367s, speedup 1.000x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.893s, pg runtime 0.893s, speedup 1.000x
40, opt runtime 1.004s, model runtime 1.004s, pg runtime 1.004s, speedup 1.000x
====================
JOB best validation speedup epoch: 12, train speedup 5.340, test speedup 0.881, val speedup 5.065
TPCH best validation speedup epoch: 12, train speedup 5.340, test speedup 5.310, val speedup 5.065
TPCH Skew best validation speedup epoch: 12, train speedup 5.340, test speedup 5.014, val speedup 5.065
execution cost 0:13:59.152192
==================================================
all print will write to path record/postgresql/cross/one/TCNN/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.237026, and there are 24443 training samples
in channel 9
JOB test speedup 1.1642547114205701
TPCH test speedup 4.216127359374221
TPCH skew test speedup 4.219446678837745
Epoch 0/50 |loss: 0.436937| train set 4.225x speedup, test set 4.219x speedup, val set 4.044x speedup, step: 1, train time 16.18 s
JOB test speedup 0.8121948796489822
TPCH test speedup 5.310416569796022
TPCH skew test speedup 4.964904110194323
Epoch 1/50 |loss: 0.317023| train set 5.167x speedup, test set 4.965x speedup, val set 4.890x speedup, step: 1, train time 15.26 s
JOB test speedup 2.8245995981585166
TPCH test speedup 5.031495736209973
TPCH skew test speedup 4.721371820806823
Epoch 2/50 |loss: 0.283972| train set 5.114x speedup, test set 4.721x speedup, val set 4.750x speedup, step: 2, train time 15.21 s
JOB test speedup 0.5955638523559218
TPCH test speedup 5.259833869778718
TPCH skew test speedup 4.920934057308459
Epoch 3/50 |loss: 0.253466| train set 5.217x speedup, test set 4.921x speedup, val set 4.798x speedup, step: 3, train time 15.26 s
JOB test speedup 0.8480599245182692
TPCH test speedup 5.347558196076427
TPCH skew test speedup 4.94849350783011
Epoch 4/50 |loss: 0.233014| train set 5.217x speedup, test set 4.948x speedup, val set 4.791x speedup, step: 4, train time 15.27 s
JOB test speedup 2.591142464455602
TPCH test speedup 5.349299787991572
TPCH skew test speedup 4.953256609663411
Epoch 5/50 |loss: 0.223075| train set 5.273x speedup, test set 4.953x speedup, val set 4.896x speedup, step: 1, train time 15.16 s
JOB test speedup 3.083816926090601
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 6/50 |loss: 0.213794| train set 5.380x speedup, test set 5.016x speedup, val set 4.981x speedup, step: 1, train time 15.16 s
JOB test speedup 3.004392711358925
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 7/50 |loss: 0.202808| train set 5.322x speedup, test set 5.017x speedup, val set 4.833x speedup, step: 2, train time 15.28 s
JOB test speedup 2.6104345358096492
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 8/50 |loss: 0.197258| train set 5.379x speedup, test set 5.017x speedup, val set 4.887x speedup, step: 3, train time 15.36 s
JOB test speedup 2.6634402676190585
TPCH test speedup 5.3951830586112095
TPCH skew test speedup 5.249121450751117
Epoch 9/50 |loss: 0.190683| train set 5.282x speedup, test set 5.249x speedup, val set 4.811x speedup, step: 4, train time 15.52 s
JOB test speedup 2.6700577830618406
TPCH test speedup 5.086282868469687
TPCH skew test speedup 4.801177424088601
Epoch 10/50 |loss: 0.185472| train set 5.149x speedup, test set 4.801x speedup, val set 4.866x speedup, step: 5, train time 15.58 s
JOB test speedup 2.7562441951484242
TPCH test speedup 5.3099952401464785
TPCH skew test speedup 5.013566922808306
Epoch 11/50 |loss: 0.179153| train set 5.334x speedup, test set 5.014x speedup, val set 5.114x speedup, step: 1, train time 15.65 s
JOB test speedup 2.892191129659027
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 12/50 |loss: 0.179303| train set 5.298x speedup, test set 5.014x speedup, val set 5.065x speedup, step: 2, train time 15.46 s
JOB test speedup 3.58355823943656
TPCH test speedup 5.2634924020451175
TPCH skew test speedup 4.839859300792719
Epoch 13/50 |loss: 0.175890| train set 5.184x speedup, test set 4.840x speedup, val set 4.791x speedup, step: 3, train time 15.67 s
JOB test speedup 2.9014410290110373
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 14/50 |loss: 0.170516| train set 5.328x speedup, test set 5.014x speedup, val set 5.076x speedup, step: 4, train time 15.71 s
JOB test speedup 2.8594493029965586
TPCH test speedup 5.309734161761734
TPCH skew test speedup 5.013273554521678
Epoch 15/50 |loss: 0.166636| train set 5.337x speedup, test set 5.013x speedup, val set 4.930x speedup, step: 5, train time 15.66 s
JOB test speedup 3.27261256473263
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 16/50 |loss: 0.162936| train set 5.385x speedup, test set 5.017x speedup, val set 5.021x speedup, step: 6, train time 15.77 s
JOB test speedup 2.986896599103475
TPCH test speedup 5.331458826890585
TPCH skew test speedup 4.990514195793357
Epoch 17/50 |loss: 0.160708| train set 5.324x speedup, test set 4.991x speedup, val set 4.957x speedup, step: 7, train time 15.85 s
JOB test speedup 2.9489863200852295
TPCH test speedup 5.402595222724218
TPCH skew test speedup 4.997049129260342
Epoch 18/50 |loss: 0.158669| train set 5.383x speedup, test set 4.997x speedup, val set 4.886x speedup, step: 8, train time 15.70 s
JOB test speedup 2.935177114921132
TPCH test speedup 5.310608248671319
TPCH skew test speedup 5.013112192765863
Epoch 19/50 |loss: 0.155158| train set 5.348x speedup, test set 5.013x speedup, val set 5.102x speedup, step: 9, train time 15.67 s
JOB test speedup 2.9748740845164097
TPCH test speedup 5.415907859779761
TPCH skew test speedup 5.016173567522391
Epoch 20/50 |loss: 0.153285| train set 5.370x speedup, test set 5.016x speedup, val set 4.930x speedup, step: 10, train time 15.72 s
JOB test speedup 3.5068215886610252
TPCH test speedup 5.3091213550019996
TPCH skew test speedup 5.013728313839566
Epoch 21/50 |loss: 0.149719| train set 5.345x speedup, test set 5.014x speedup, val set 4.990x speedup, step: 11, train time 15.66 s
JOB test speedup 2.8454314990343352
TPCH test speedup 5.222643378537524
TPCH skew test speedup 4.985439531520678
Epoch 22/50 |loss: 0.149164| train set 5.301x speedup, test set 4.985x speedup, val set 4.931x speedup, step: 12, train time 15.80 s
JOB test speedup 2.897303808738396
TPCH test speedup 5.3144608455406726
TPCH skew test speedup 4.971140905810445
Epoch 23/50 |loss: 0.149007| train set 5.394x speedup, test set 4.971x speedup, val set 4.886x speedup, step: 13, train time 15.75 s
JOB test speedup 2.8199740042214274
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 24/50 |loss: 0.144681| train set 5.394x speedup, test set 5.016x speedup, val set 4.922x speedup, step: 14, train time 15.88 s
JOB test speedup 2.9611450626540634
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 5.016625279622707
Epoch 25/50 |loss: 0.141605| train set 5.383x speedup, test set 5.017x speedup, val set 4.908x speedup, step: 15, train time 15.93 s
JOB test speedup 2.889587663564426
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 26/50 |loss: 0.141402| train set 5.389x speedup, test set 5.017x speedup, val set 4.909x speedup, step: 16, train time 15.79 s
JOB test speedup 2.922498040257127
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 27/50 |loss: 0.140693| train set 5.386x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 17, train time 15.77 s
JOB test speedup 2.888643892870495
TPCH test speedup 5.207509860193997
TPCH skew test speedup 4.965213301886662
Epoch 28/50 |loss: 0.138613| train set 5.296x speedup, test set 4.965x speedup, val set 4.930x speedup, step: 18, train time 15.86 s
JOB test speedup 2.759876539810858
TPCH test speedup 5.329960236225966
TPCH skew test speedup 4.991124774374338
Epoch 29/50 |loss: 0.135941| train set 5.348x speedup, test set 4.991x speedup, val set 4.886x speedup, step: 19, train time 15.59 s
JOB test speedup 3.0044908112514164
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 30/50 |loss: 0.134647| train set 5.393x speedup, test set 5.016x speedup, val set 4.995x speedup, step: 20, train time 15.68 s
JOB test speedup 2.9642793654647868
TPCH test speedup 5.420162595704776
TPCH skew test speedup 5.016625279622707
Epoch 31/50 |loss: 0.133368| train set 5.394x speedup, test set 5.017x speedup, val set 4.923x speedup, step: 21, train time 15.70 s
JOB test speedup 2.524469018551486
TPCH test speedup 5.418988830348117
TPCH skew test speedup 5.014685287692701
Epoch 32/50 |loss: 0.132998| train set 5.388x speedup, test set 5.015x speedup, val set 5.030x speedup, step: 22, train time 15.84 s
JOB test speedup 2.898627451706725
TPCH test speedup 5.404134942221828
TPCH skew test speedup 4.996437100421392
Epoch 33/50 |loss: 0.134122| train set 5.390x speedup, test set 4.996x speedup, val set 4.922x speedup, step: 23, train time 15.64 s
JOB test speedup 0.807083521852746
TPCH test speedup 5.264094720003678
TPCH skew test speedup 4.839435534067396
Epoch 34/50 |loss: 0.131538| train set 5.347x speedup, test set 4.839x speedup, val set 4.868x speedup, step: 24, train time 15.81 s
JOB test speedup 0.8075064948277095
TPCH test speedup 5.208845017148437
TPCH skew test speedup 4.967403188476435
Epoch 35/50 |loss: 0.128470| train set 5.306x speedup, test set 4.967x speedup, val set 4.954x speedup, step: 25, train time 15.91 s
JOB test speedup 2.9027747408071596
TPCH test speedup 5.402595222724218
TPCH skew test speedup 4.997049129260342
Epoch 36/50 |loss: 0.127540| train set 5.389x speedup, test set 4.997x speedup, val set 4.915x speedup, step: 26, train time 15.80 s
JOB test speedup 2.8584303897753554
TPCH test speedup 5.419524035899206
TPCH skew test speedup 5.017080647248503
Epoch 37/50 |loss: 0.130687| train set 5.298x speedup, test set 5.017x speedup, val set 4.874x speedup, step: 27, train time 15.76 s
JOB test speedup 2.8959715968753827
TPCH test speedup 5.205319192894277
TPCH skew test speedup 4.823847601329027
Epoch 38/50 |loss: 0.125738| train set 5.390x speedup, test set 4.824x speedup, val set 4.874x speedup, step: 28, train time 15.79 s
JOB test speedup 2.762236138398848
TPCH test speedup 5.2080041055820825
TPCH skew test speedup 4.96756162104331
Epoch 39/50 |loss: 0.125369| train set 5.304x speedup, test set 4.968x speedup, val set 4.967x speedup, step: 29, train time 15.80 s
JOB test speedup 2.948073078731885
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 40/50 |loss: 0.123536| train set 5.392x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 30, train time 15.76 s
JOB test speedup 2.776197051689883
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 41/50 |loss: 0.126162| train set 5.386x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 31, train time 15.77 s
JOB test speedup 2.9145841329697895
TPCH test speedup 5.3099952401464785
TPCH skew test speedup 5.013566922808306
Epoch 42/50 |loss: 0.125314| train set 5.348x speedup, test set 5.014x speedup, val set 5.010x speedup, step: 32, train time 15.87 s
JOB test speedup 2.8939351115028864
TPCH test speedup 5.403500153108997
TPCH skew test speedup 4.996888810225833
Epoch 43/50 |loss: 0.122363| train set 5.394x speedup, test set 4.997x speedup, val set 4.920x speedup, step: 33, train time 15.91 s
JOB test speedup 2.8992642305616427
TPCH test speedup 5.293742750430138
TPCH skew test speedup 4.993563397302661
Epoch 44/50 |loss: 0.119610| train set 5.352x speedup, test set 4.994x speedup, val set 5.002x speedup, step: 34, train time 16.13 s
JOB test speedup 2.969372787661583
TPCH test speedup 5.420434646772414
TPCH skew test speedup 5.016919040326524
Epoch 45/50 |loss: 0.122198| train set 5.382x speedup, test set 5.017x speedup, val set 4.921x speedup, step: 35, train time 15.63 s
JOB test speedup 2.9710924136372725
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 46/50 |loss: 0.119193| train set 5.387x speedup, test set 5.016x speedup, val set 4.921x speedup, step: 36, train time 15.66 s
JOB test speedup 2.9004599902439723
TPCH test speedup 5.403500153108997
TPCH skew test speedup 4.996437100421392
Epoch 47/50 |loss: 0.120452| train set 5.393x speedup, test set 4.996x speedup, val set 5.021x speedup, step: 37, train time 15.57 s
JOB test speedup 2.763648919030236
TPCH test speedup 5.078843840589208
TPCH skew test speedup 4.875097148015498
Epoch 48/50 |loss: 0.118099| train set 5.190x speedup, test set 4.875x speedup, val set 4.802x speedup, step: 38, train time 15.70 s
JOB test speedup 3.3653385611031554
TPCH test speedup 5.421073421195584
TPCH skew test speedup 5.016463702034933
Epoch 49/50 |loss: 0.118230| train set 5.390x speedup, test set 5.016x speedup, val set 5.019x speedup, step: 39, train time 15.77 s
Training per epoch cost 15.672 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 2.543s, pg runtime 0.189s, speedup 0.074x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 1.050s, pg runtime 0.348s, speedup 0.331x
05, opt runtime 2.262s, model runtime 3.353s, pg runtime 3.549s, speedup 1.059x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 1.048s, pg runtime 0.942s, speedup 0.898x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 5.648s, pg runtime 10.605s, speedup 1.878x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.469s, pg runtime 0.453s, speedup 0.967x
17, opt runtime 0.327s, model runtime 0.459s, pg runtime 0.354s, speedup 0.771x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 2.365s, pg runtime 3.540s, speedup 1.497x
20, opt runtime 0.061s, model runtime 0.065s, pg runtime 0.086s, speedup 1.315x
21, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.080s, pg runtime 0.112s, speedup 1.403x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.658s, pg runtime 1.315s, speedup 0.793x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.356s, pg runtime 1.356s, speedup 1.000x
20, opt runtime 1.340s, model runtime 1.340s, pg runtime 1.340s, speedup 1.000x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.100s, pg runtime 1.100s, speedup 1.000x
40, opt runtime 1.084s, model runtime 1.155s, pg runtime 1.155s, speedup 1.000x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.244s, pg runtime 1.244s, speedup 1.000x
20, opt runtime 1.367s, model runtime 1.367s, pg runtime 1.367s, speedup 1.000x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.893s, pg runtime 0.893s, speedup 1.000x
40, opt runtime 1.004s, model runtime 1.004s, pg runtime 1.004s, speedup 1.000x
====================
JOB best validation speedup epoch: 11, train speedup 5.334, test speedup 2.756, val speedup 5.114
TPCH best validation speedup epoch: 11, train speedup 5.334, test speedup 5.310, val speedup 5.114
TPCH Skew best validation speedup epoch: 11, train speedup 5.334, test speedup 5.014, val speedup 5.114
execution cost 0:13:58.782975
==================================================
