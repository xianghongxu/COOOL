all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.614482, and there are 12152 training samples
in channel 9
JOB test speedup 1.0628511742006652
TPCH test speedup 2.657916292704591
TPCH skew test speedup 2.5294425281142203
Epoch 0/300 |loss: 0.031317| train set 2.449x speedup, test set 2.529x speedup, val set 2.450x speedup, step: 1
JOB test speedup 2.565943189663033
TPCH test speedup 3.00457446279677
TPCH skew test speedup 2.6998286725018827
Epoch 1/300 |loss: 0.012855| train set 2.765x speedup, test set 2.700x speedup, val set 2.630x speedup, step: 2
JOB test speedup 2.274479397537976
TPCH test speedup 3.7610155574124957
TPCH skew test speedup 3.2355300073976045
Epoch 2/300 |loss: 0.009726| train set 3.163x speedup, test set 3.236x speedup, val set 3.460x speedup, step: 3
JOB test speedup 3.373607257142994
TPCH test speedup 3.298200024252015
TPCH skew test speedup 3.161927343283593
Epoch 3/300 |loss: 0.007228| train set 3.105x speedup, test set 3.162x speedup, val set 3.218x speedup, step: 4
JOB test speedup 1.1735557795949334
TPCH test speedup 3.887643860114844
TPCH skew test speedup 3.680518917923647
Epoch 4/300 |loss: 0.006257| train set 3.929x speedup, test set 3.681x speedup, val set 3.559x speedup, step: 1
JOB test speedup 2.992812578242143
TPCH test speedup 3.9474733904353436
TPCH skew test speedup 3.8355823647534035
Epoch 5/300 |loss: 0.005416| train set 3.785x speedup, test set 3.836x speedup, val set 3.937x speedup, step: 2
JOB test speedup 1.05846288514341
TPCH test speedup 3.7962181492507083
TPCH skew test speedup 3.245800545304207
Epoch 6/300 |loss: 0.004516| train set 3.326x speedup, test set 3.246x speedup, val set 3.488x speedup, step: 3
JOB test speedup 1.176307405564805
TPCH test speedup 4.908912081713711
TPCH skew test speedup 4.5910902655670895
Epoch 7/300 |loss: 0.004117| train set 3.945x speedup, test set 4.591x speedup, val set 4.136x speedup, step: 4
JOB test speedup 1.1744144274388182
TPCH test speedup 5.041500314566315
TPCH skew test speedup 4.111655816418242
Epoch 8/300 |loss: 0.003864| train set 4.101x speedup, test set 4.112x speedup, val set 4.528x speedup, step: 5
JOB test speedup 1.1248430478676295
TPCH test speedup 3.6550176798771536
TPCH skew test speedup 3.5830563437553504
Epoch 9/300 |loss: 0.003364| train set 3.679x speedup, test set 3.583x speedup, val set 3.577x speedup, step: 1
JOB test speedup 1.1677128216908998
TPCH test speedup 3.985240500858843
TPCH skew test speedup 3.954407504351833
Epoch 10/300 |loss: 0.003517| train set 3.848x speedup, test set 3.954x speedup, val set 4.007x speedup, step: 2
JOB test speedup 1.169462981807396
TPCH test speedup 5.216698901622884
TPCH skew test speedup 4.959272765192041
Epoch 11/300 |loss: 0.003405| train set 4.398x speedup, test set 4.959x speedup, val set 4.543x speedup, step: 3
JOB test speedup 3.478859795699088
TPCH test speedup 5.350990032756292
TPCH skew test speedup 5.058788106187037
Epoch 12/300 |loss: 0.003036| train set 4.557x speedup, test set 5.059x speedup, val set 5.066x speedup, step: 4
JOB test speedup 3.4983691206130683
TPCH test speedup 5.125669645710657
TPCH skew test speedup 4.822956584187486
Epoch 13/300 |loss: 0.002759| train set 5.102x speedup, test set 4.823x speedup, val set 5.046x speedup, step: 5
JOB test speedup 2.8763415769551424
TPCH test speedup 3.6526703489282606
TPCH skew test speedup 3.5824902038220245
Epoch 14/300 |loss: 0.002862| train set 3.436x speedup, test set 3.582x speedup, val set 3.617x speedup, step: 1
JOB test speedup 3.1971252804042565
TPCH test speedup 5.2628386197518005
TPCH skew test speedup 5.006043069772869
Epoch 15/300 |loss: 0.002373| train set 4.738x speedup, test set 5.006x speedup, val set 4.966x speedup, step: 2
JOB test speedup 3.5326049761057305
TPCH test speedup 5.25927098738257
TPCH skew test speedup 4.939784728881478
Epoch 16/300 |loss: 0.002413| train set 4.721x speedup, test set 4.940x speedup, val set 4.898x speedup, step: 3
JOB test speedup 3.5979278739214537
TPCH test speedup 5.243827898046649
TPCH skew test speedup 5.016262670385119
Epoch 17/300 |loss: 0.002304| train set 5.009x speedup, test set 5.016x speedup, val set 5.059x speedup, step: 4
JOB test speedup 3.3951796308883764
TPCH test speedup 5.125611182263836
TPCH skew test speedup 4.942709059432191
Epoch 18/300 |loss: 0.002527| train set 4.484x speedup, test set 4.943x speedup, val set 5.032x speedup, step: 5
JOB test speedup 3.6063518811765323
TPCH test speedup 5.282161940730492
TPCH skew test speedup 5.023041351988658
Epoch 19/300 |loss: 0.002285| train set 4.692x speedup, test set 5.023x speedup, val set 5.034x speedup, step: 1
JOB test speedup 3.577722495648016
TPCH test speedup 5.311700647973291
TPCH skew test speedup 5.016262670385119
Epoch 20/300 |loss: 0.002049| train set 5.104x speedup, test set 5.016x speedup, val set 5.137x speedup, step: 2
JOB test speedup 3.545379845012849
TPCH test speedup 5.365611637537469
TPCH skew test speedup 5.072461188320039
Epoch 21/300 |loss: 0.002190| train set 5.116x speedup, test set 5.072x speedup, val set 5.098x speedup, step: 3
JOB test speedup 3.395769403458183
TPCH test speedup 5.163013827740711
TPCH skew test speedup 4.904398301572424
Epoch 22/300 |loss: 0.002323| train set 5.031x speedup, test set 4.904x speedup, val set 4.882x speedup, step: 4
JOB test speedup 3.555827630566723
TPCH test speedup 5.41203979567713
TPCH skew test speedup 5.104531181441296
Epoch 23/300 |loss: 0.001964| train set 5.111x speedup, test set 5.105x speedup, val set 5.179x speedup, step: 5
JOB test speedup 3.5070854120969632
TPCH test speedup 5.427922579874594
TPCH skew test speedup 5.088046771141402
Epoch 24/300 |loss: 0.001967| train set 5.091x speedup, test set 5.088x speedup, val set 5.148x speedup, step: 1
JOB test speedup 3.6149052972507225
TPCH test speedup 5.2770025129347875
TPCH skew test speedup 4.93489303719935
Epoch 25/300 |loss: 0.001659| train set 4.892x speedup, test set 4.935x speedup, val set 4.967x speedup, step: 2
JOB test speedup 3.087392322158033
TPCH test speedup 5.1338231979194395
TPCH skew test speedup 4.907974500206317
Epoch 26/300 |loss: 0.002000| train set 5.105x speedup, test set 4.908x speedup, val set 4.905x speedup, step: 3
JOB test speedup 3.577009634747424
TPCH test speedup 5.277991665777886
TPCH skew test speedup 4.96395384391353
Epoch 27/300 |loss: 0.001683| train set 5.042x speedup, test set 4.964x speedup, val set 4.966x speedup, step: 4
JOB test speedup 3.1007473563190002
TPCH test speedup 5.332125372970126
TPCH skew test speedup 5.036796493025539
Epoch 28/300 |loss: 0.001585| train set 5.012x speedup, test set 5.037x speedup, val set 5.004x speedup, step: 5
JOB test speedup 3.5905471733038734
TPCH test speedup 5.207669140258943
TPCH skew test speedup 4.940821319451692
Epoch 29/300 |loss: 0.001455| train set 5.003x speedup, test set 4.941x speedup, val set 5.099x speedup, step: 6
JOB test speedup 3.1036330991557786
TPCH test speedup 5.340852093843562
TPCH skew test speedup 5.048045076323174
Epoch 30/300 |loss: 0.001614| train set 5.115x speedup, test set 5.048x speedup, val set 5.071x speedup, step: 7
JOB test speedup 3.0600641792700976
TPCH test speedup 5.099279384073532
TPCH skew test speedup 4.839887619441599
Epoch 31/300 |loss: 0.001393| train set 5.028x speedup, test set 4.840x speedup, val set 4.912x speedup, step: 8
JOB test speedup 3.106563910398846
TPCH test speedup 5.403816346657997
TPCH skew test speedup 5.062535587403468
Epoch 32/300 |loss: 0.001501| train set 4.771x speedup, test set 5.063x speedup, val set 5.138x speedup, step: 9
JOB test speedup 3.1076842652633863
TPCH test speedup 5.202221916214635
TPCH skew test speedup 4.93489303719935
Epoch 33/300 |loss: 0.001618| train set 4.816x speedup, test set 4.935x speedup, val set 5.083x speedup, step: 10
JOB test speedup 0.8631305761032629
TPCH test speedup 5.225355050978054
TPCH skew test speedup 4.958230407901842
Epoch 34/300 |loss: 0.001567| train set 4.917x speedup, test set 4.958x speedup, val set 5.073x speedup, step: 11
JOB test speedup 3.129288332348066
TPCH test speedup 5.207669140258943
TPCH skew test speedup 4.940821319451692
Epoch 35/300 |loss: 0.001300| train set 5.119x speedup, test set 4.941x speedup, val set 5.084x speedup, step: 12
JOB test speedup 3.1266156075729543
TPCH test speedup 5.202221916214635
TPCH skew test speedup 4.938503637286672
Epoch 36/300 |loss: 0.001475| train set 5.114x speedup, test set 4.939x speedup, val set 4.947x speedup, step: 13
JOB test speedup 2.640837872928152
TPCH test speedup 5.201127732752336
TPCH skew test speedup 4.934296657070093
Epoch 37/300 |loss: 0.001114| train set 5.113x speedup, test set 4.934x speedup, val set 5.083x speedup, step: 14
JOB test speedup 2.6380204559125175
TPCH test speedup 5.099396962973335
TPCH skew test speedup 4.82400778554494
Epoch 38/300 |loss: 0.001298| train set 4.933x speedup, test set 4.824x speedup, val set 4.856x speedup, step: 15
JOB test speedup 0.8270772399307346
TPCH test speedup 5.2770025129347875
TPCH skew test speedup 5.000847880882394
Epoch 39/300 |loss: 0.001160| train set 5.125x speedup, test set 5.001x speedup, val set 4.960x speedup, step: 16
JOB test speedup 3.114517787966517
TPCH test speedup 5.14619827141923
TPCH skew test speedup 4.875898165096824
Epoch 40/300 |loss: 0.001170| train set 5.116x speedup, test set 4.876x speedup, val set 5.029x speedup, step: 17
JOB test speedup 2.6351330335178145
TPCH test speedup 5.096226741321852
TPCH skew test speedup 4.83641972772739
Epoch 41/300 |loss: 0.000932| train set 5.098x speedup, test set 4.836x speedup, val set 4.945x speedup, step: 18
JOB test speedup 3.150805340429736
TPCH test speedup 5.129956970378794
TPCH skew test speedup 4.949234506811665
Epoch 42/300 |loss: 0.000999| train set 5.071x speedup, test set 4.949x speedup, val set 4.931x speedup, step: 19
JOB test speedup 3.104948805460751
TPCH test speedup 5.14619827141923
TPCH skew test speedup 4.875898165096824
Epoch 43/300 |loss: 0.001105| train set 5.118x speedup, test set 4.876x speedup, val set 4.965x speedup, step: 20
JOB test speedup 3.1328151907977055
TPCH test speedup 5.101454141024383
TPCH skew test speedup 4.842113642240501
Epoch 44/300 |loss: 0.000970| train set 4.937x speedup, test set 4.842x speedup, val set 4.830x speedup, step: 21
JOB test speedup 3.1387720106616137
TPCH test speedup 4.849668244395435
TPCH skew test speedup 4.707018857498945
Epoch 45/300 |loss: 0.001055| train set 5.065x speedup, test set 4.707x speedup, val set 4.743x speedup, step: 22
JOB test speedup 2.619203016673208
TPCH test speedup 5.202221916214635
TPCH skew test speedup 4.93489303719935
Epoch 46/300 |loss: 0.001093| train set 5.115x speedup, test set 4.935x speedup, val set 4.952x speedup, step: 23
JOB test speedup 2.627591473195707
TPCH test speedup 5.134235397894039
TPCH skew test speedup 4.897353251520307
Epoch 47/300 |loss: 0.000874| train set 5.079x speedup, test set 4.897x speedup, val set 4.892x speedup, step: 24
JOB test speedup 3.141777626095162
TPCH test speedup 4.98378720945762
TPCH skew test speedup 4.806463302850985
Epoch 48/300 |loss: 0.000845| train set 5.030x speedup, test set 4.806x speedup, val set 4.953x speedup, step: 25
JOB test speedup 0.866814768115698
TPCH test speedup 5.096226741321852
TPCH skew test speedup 4.83641972772739
Epoch 49/300 |loss: 0.001073| train set 5.116x speedup, test set 4.836x speedup, val set 5.009x speedup, step: 26
JOB test speedup 0.8656203709967678
TPCH test speedup 5.0951766870558295
TPCH skew test speedup 4.835846909680258
Epoch 50/300 |loss: 0.000904| train set 4.916x speedup, test set 4.836x speedup, val set 4.865x speedup, step: 27
JOB test speedup 2.6328770086691664
TPCH test speedup 5.096226741321852
TPCH skew test speedup 4.83641972772739
Epoch 51/300 |loss: 0.000885| train set 5.087x speedup, test set 4.836x speedup, val set 4.853x speedup, step: 28
JOB test speedup 2.5175927047562077
TPCH test speedup 5.169726878093942
TPCH skew test speedup 4.878189136935072
Epoch 52/300 |loss: 0.000837| train set 5.079x speedup, test set 4.878x speedup, val set 4.892x speedup, step: 29
JOB test speedup 0.8230155717992217
TPCH test speedup 5.024841306913435
TPCH skew test speedup 4.739873013025212
Epoch 53/300 |loss: 0.000782| train set 5.023x speedup, test set 4.740x speedup, val set 5.084x speedup, step: 30
JOB test speedup 3.122367129768771
TPCH test speedup 5.085493597448531
TPCH skew test speedup 4.855920167668701
Epoch 54/300 |loss: 0.000726| train set 5.098x speedup, test set 4.856x speedup, val set 4.851x speedup, step: 31
JOB test speedup 0.8648542059171924
TPCH test speedup 5.104394038463492
TPCH skew test speedup 4.865406138089093
Epoch 55/300 |loss: 0.000839| train set 5.039x speedup, test set 4.865x speedup, val set 4.867x speedup, step: 32
JOB test speedup 3.1239959315941728
TPCH test speedup 4.931362641930362
TPCH skew test speedup 4.749929076434732
Epoch 56/300 |loss: 0.000813| train set 5.132x speedup, test set 4.750x speedup, val set 4.704x speedup, step: 33
JOB test speedup 3.1346322402109124
TPCH test speedup 5.1500890277337605
TPCH skew test speedup 4.893870812617068
Epoch 57/300 |loss: 0.000789| train set 5.137x speedup, test set 4.894x speedup, val set 5.015x speedup, step: 34
JOB test speedup 2.5265318249532682
TPCH test speedup 5.1350888370626855
TPCH skew test speedup 4.8962821523415405
Epoch 58/300 |loss: 0.000663| train set 5.103x speedup, test set 4.896x speedup, val set 4.893x speedup, step: 35
JOB test speedup 3.1375733150761294
TPCH test speedup 5.152020916001756
TPCH skew test speedup 4.893387627100442
Epoch 59/300 |loss: 0.000786| train set 5.130x speedup, test set 4.893x speedup, val set 4.889x speedup, step: 36
JOB test speedup 2.984571268364627
TPCH test speedup 5.1500890277337605
TPCH skew test speedup 4.893870812617068
Epoch 60/300 |loss: 0.000698| train set 5.113x speedup, test set 4.894x speedup, val set 4.887x speedup, step: 37
JOB test speedup 0.8223530317705171
TPCH test speedup 4.9613837539782875
TPCH skew test speedup 4.705231225731191
Epoch 61/300 |loss: 0.000667| train set 5.077x speedup, test set 4.705x speedup, val set 4.678x speedup, step: 38
JOB test speedup 2.981225079912264
TPCH test speedup 4.977187919309625
TPCH skew test speedup 4.70255811821369
Epoch 62/300 |loss: 0.000679| train set 5.118x speedup, test set 4.703x speedup, val set 4.889x speedup, step: 39
JOB test speedup 0.8232943302042347
TPCH test speedup 5.201127732752336
TPCH skew test speedup 4.934296657070093
Epoch 63/300 |loss: 0.000847| train set 5.080x speedup, test set 4.934x speedup, val set 4.891x speedup, step: 40
JOB test speedup 3.081184980222975
TPCH test speedup 5.070998037799862
TPCH skew test speedup 4.812459039328831
Epoch 64/300 |loss: 0.000844| train set 5.078x speedup, test set 4.812x speedup, val set 4.854x speedup, step: 41
early stopping at epoch 64
Training per epoch cost 3.544 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.187s, pg runtime 0.072s, speedup 0.385x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.883s, pg runtime 0.802s, speedup 0.908x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 0.463s, model runtime 0.745s, pg runtime 0.557s, speedup 0.748x
13, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.407s, pg runtime 0.313s, speedup 0.769x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.086s, pg runtime 0.086s, speedup 1.000x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.231s, pg runtime 0.891s, speedup 3.855x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.245s, pg runtime 0.189s, speedup 0.773x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.147s, pg runtime 0.137s, speedup 0.933x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 11.165s, pg runtime 32.969s, speedup 2.953x
24, opt runtime 5.961s, model runtime 10.298s, pg runtime 31.210s, speedup 3.031x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.497s, pg runtime 7.268s, speedup 0.969x
28, opt runtime 6.854s, model runtime 7.512s, pg runtime 6.854s, speedup 0.912x
29, opt runtime 5.362s, model runtime 5.646s, pg runtime 5.362s, speedup 0.950x
30, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
24, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 7.579s, pg runtime 6.749s, speedup 0.890x
28, opt runtime 7.213s, model runtime 8.026s, pg runtime 7.213s, speedup 0.899x
29, opt runtime 5.223s, model runtime 5.730s, pg runtime 5.223s, speedup 0.912x
30, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 24, train speedup 5.091, test speedup 3.507, val speedup 5.148
TPCH best validation speedup epoch: 24, train speedup 5.091, test speedup 5.428, val speedup 5.148
TPCH Skew best validation speedup epoch: 24, train speedup 5.091, test speedup 5.088, val speedup 5.148
execution cost 0:05:12.654986
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.606941, and there are 12152 training samples
in channel 9
JOB test speedup 1.0628511742006652
TPCH test speedup 2.657916292704591
TPCH skew test speedup 2.5294425281142203
Epoch 0/300 |loss: 0.031317| train set 2.449x speedup, test set 2.529x speedup, val set 2.450x speedup, step: 1
JOB test speedup 2.5678442945855955
TPCH test speedup 3.00457446279677
TPCH skew test speedup 2.6998286725018827
Epoch 1/300 |loss: 0.012859| train set 2.624x speedup, test set 2.700x speedup, val set 2.630x speedup, step: 2
JOB test speedup 2.5641525461915355
TPCH test speedup 3.665174197356319
TPCH skew test speedup 3.22829140706192
Epoch 2/300 |loss: 0.009666| train set 3.025x speedup, test set 3.228x speedup, val set 3.327x speedup, step: 3
JOB test speedup 3.434431903087949
TPCH test speedup 3.299636934544021
TPCH skew test speedup 3.1118371460300573
Epoch 3/300 |loss: 0.007236| train set 3.050x speedup, test set 3.112x speedup, val set 3.072x speedup, step: 4
JOB test speedup 3.0246194577171153
TPCH test speedup 3.8856163503814916
TPCH skew test speedup 3.648705067394785
Epoch 4/300 |loss: 0.006366| train set 3.798x speedup, test set 3.649x speedup, val set 3.537x speedup, step: 1
JOB test speedup 1.1374078325568242
TPCH test speedup 3.941450025597262
TPCH skew test speedup 3.8569883174473247
Epoch 5/300 |loss: 0.006000| train set 3.731x speedup, test set 3.857x speedup, val set 3.974x speedup, step: 2
JOB test speedup 1.1704627877806462
TPCH test speedup 5.229661493569328
TPCH skew test speedup 4.000440053345162
Epoch 6/300 |loss: 0.004797| train set 3.747x speedup, test set 4.000x speedup, val set 4.753x speedup, step: 3
JOB test speedup 1.176621513692174
TPCH test speedup 4.806514621109656
TPCH skew test speedup 4.492317159199186
Epoch 7/300 |loss: 0.004354| train set 4.048x speedup, test set 4.492x speedup, val set 4.201x speedup, step: 4
JOB test speedup 3.3468056006306357
TPCH test speedup 4.811851652327027
TPCH skew test speedup 4.265203691633575
Epoch 8/300 |loss: 0.003816| train set 4.321x speedup, test set 4.265x speedup, val set 4.604x speedup, step: 5
JOB test speedup 2.822185121749763
TPCH test speedup 3.8326129264441136
TPCH skew test speedup 3.2328898921284677
Epoch 9/300 |loss: 0.003402| train set 3.692x speedup, test set 3.233x speedup, val set 4.080x speedup, step: 1
JOB test speedup 1.1601968851072497
TPCH test speedup 4.2423540041439285
TPCH skew test speedup 4.0472528059796185
Epoch 10/300 |loss: 0.003421| train set 3.549x speedup, test set 4.047x speedup, val set 4.062x speedup, step: 2
JOB test speedup 1.1507731137664061
TPCH test speedup 5.226696602331875
TPCH skew test speedup 4.967495947250313
Epoch 11/300 |loss: 0.003347| train set 4.838x speedup, test set 4.967x speedup, val set 4.933x speedup, step: 3
JOB test speedup 3.51041823042442
TPCH test speedup 5.312258494788214
TPCH skew test speedup 4.251115362855307
Epoch 12/300 |loss: 0.003011| train set 4.307x speedup, test set 4.251x speedup, val set 5.124x speedup, step: 4
JOB test speedup 3.527881833847731
TPCH test speedup 5.227371386101364
TPCH skew test speedup 4.934619942164914
Epoch 13/300 |loss: 0.002790| train set 5.084x speedup, test set 4.935x speedup, val set 5.011x speedup, step: 5
JOB test speedup 3.5205488314378366
TPCH test speedup 4.156468922933059
TPCH skew test speedup 4.016542744215717
Epoch 14/300 |loss: 0.002865| train set 4.729x speedup, test set 4.017x speedup, val set 3.948x speedup, step: 6
JOB test speedup 3.0647365103615125
TPCH test speedup 4.209527528538781
TPCH skew test speedup 4.082694781377965
Epoch 15/300 |loss: 0.002457| train set 4.787x speedup, test set 4.083x speedup, val set 3.693x speedup, step: 7
JOB test speedup 2.982436314785368
TPCH test speedup 5.178298228812513
TPCH skew test speedup 4.950060171230157
Epoch 16/300 |loss: 0.002340| train set 4.932x speedup, test set 4.950x speedup, val set 4.858x speedup, step: 8
JOB test speedup 2.5998905830623062
TPCH test speedup 5.424230964612505
TPCH skew test speedup 5.051277208624278
Epoch 17/300 |loss: 0.002252| train set 4.952x speedup, test set 5.051x speedup, val set 5.098x speedup, step: 9
JOB test speedup 3.4499795850024837
TPCH test speedup 5.267461323247435
TPCH skew test speedup 4.960222091351619
Epoch 18/300 |loss: 0.002484| train set 4.685x speedup, test set 4.960x speedup, val set 4.965x speedup, step: 10
JOB test speedup 3.036508629819488
TPCH test speedup 5.25841543470714
TPCH skew test speedup 4.992493049747465
Epoch 19/300 |loss: 0.002303| train set 5.106x speedup, test set 4.992x speedup, val set 5.083x speedup, step: 1
JOB test speedup 3.443985737616896
TPCH test speedup 5.273682952129763
TPCH skew test speedup 5.0246733837354425
Epoch 20/300 |loss: 0.001991| train set 5.090x speedup, test set 5.025x speedup, val set 5.066x speedup, step: 2
JOB test speedup 3.448972750401484
TPCH test speedup 5.363047252919434
TPCH skew test speedup 5.021972094616407
Epoch 21/300 |loss: 0.002098| train set 5.111x speedup, test set 5.022x speedup, val set 5.086x speedup, step: 3
JOB test speedup 3.1890424164813065
TPCH test speedup 5.004581039204838
TPCH skew test speedup 4.767613135163284
Epoch 22/300 |loss: 0.002278| train set 4.956x speedup, test set 4.768x speedup, val set 4.980x speedup, step: 4
JOB test speedup 3.4684564951481964
TPCH test speedup 5.290985194051592
TPCH skew test speedup 4.991340968619738
Epoch 23/300 |loss: 0.001969| train set 4.977x speedup, test set 4.991x speedup, val set 5.081x speedup, step: 5
JOB test speedup 3.061389369514003
TPCH test speedup 5.395609118572385
TPCH skew test speedup 5.075650797247567
Epoch 24/300 |loss: 0.001976| train set 4.657x speedup, test set 5.076x speedup, val set 5.040x speedup, step: 6
JOB test speedup 3.0282296040206256
TPCH test speedup 5.143969697882154
TPCH skew test speedup 4.92253556681641
Epoch 25/300 |loss: 0.001574| train set 5.124x speedup, test set 4.923x speedup, val set 5.132x speedup, step: 7
JOB test speedup 2.9919991870822615
TPCH test speedup 5.136775535960491
TPCH skew test speedup 4.912141933302674
Epoch 26/300 |loss: 0.002020| train set 5.027x speedup, test set 4.912x speedup, val set 5.084x speedup, step: 8
JOB test speedup 3.0941406941283476
TPCH test speedup 5.143386107888708
TPCH skew test speedup 4.862675742939117
Epoch 27/300 |loss: 0.001710| train set 5.034x speedup, test set 4.863x speedup, val set 4.986x speedup, step: 9
JOB test speedup 3.042970300358212
TPCH test speedup 5.326535423672575
TPCH skew test speedup 5.067487827442319
Epoch 28/300 |loss: 0.001582| train set 5.003x speedup, test set 5.067x speedup, val set 5.063x speedup, step: 10
JOB test speedup 3.250439435561842
TPCH test speedup 5.284161556102641
TPCH skew test speedup 4.99222084802213
Epoch 29/300 |loss: 0.001505| train set 5.004x speedup, test set 4.992x speedup, val set 5.037x speedup, step: 11
JOB test speedup 3.089461886334787
TPCH test speedup 4.602632451228693
TPCH skew test speedup 4.521706716299696
Epoch 30/300 |loss: 0.001663| train set 4.689x speedup, test set 4.522x speedup, val set 5.109x speedup, step: 12
JOB test speedup 3.0231057899488003
TPCH test speedup 5.404139161939084
TPCH skew test speedup 5.113555771543741
Epoch 31/300 |loss: 0.001407| train set 5.041x speedup, test set 5.114x speedup, val set 5.061x speedup, step: 13
JOB test speedup 3.0933309933018265
TPCH test speedup 5.17749842824869
TPCH skew test speedup 4.942027570269315
Epoch 32/300 |loss: 0.001674| train set 4.988x speedup, test set 4.942x speedup, val set 5.060x speedup, step: 14
JOB test speedup 3.0540298875378555
TPCH test speedup 5.29380796261104
TPCH skew test speedup 4.964881277832523
Epoch 33/300 |loss: 0.001557| train set 5.119x speedup, test set 4.965x speedup, val set 5.084x speedup, step: 15
JOB test speedup 3.0463178033497993
TPCH test speedup 5.181840078358253
TPCH skew test speedup 4.864009631391586
Epoch 34/300 |loss: 0.001417| train set 4.785x speedup, test set 4.864x speedup, val set 4.879x speedup, step: 16
JOB test speedup 3.1023955441653674
TPCH test speedup 5.353573857827191
TPCH skew test speedup 5.027253511125562
Epoch 35/300 |loss: 0.001355| train set 5.119x speedup, test set 5.027x speedup, val set 5.075x speedup, step: 17
JOB test speedup 3.075142135354307
TPCH test speedup 5.267712225517591
TPCH skew test speedup 4.987334074571572
Epoch 36/300 |loss: 0.001760| train set 5.113x speedup, test set 4.987x speedup, val set 5.146x speedup, step: 18
JOB test speedup 3.0210389981707686
TPCH test speedup 5.2702675762344775
TPCH skew test speedup 4.928443133463812
Epoch 37/300 |loss: 0.001146| train set 5.020x speedup, test set 4.928x speedup, val set 5.083x speedup, step: 19
JOB test speedup 2.579149651402646
TPCH test speedup 5.057422184518485
TPCH skew test speedup 4.812621876552473
Epoch 38/300 |loss: 0.001255| train set 5.075x speedup, test set 4.813x speedup, val set 4.886x speedup, step: 20
JOB test speedup 3.039926493164676
TPCH test speedup 5.292674917619796
TPCH skew test speedup 5.011841726485462
Epoch 39/300 |loss: 0.001227| train set 5.123x speedup, test set 5.012x speedup, val set 5.138x speedup, step: 1
JOB test speedup 3.1177183296962907
TPCH test speedup 5.340852093843562
TPCH skew test speedup 5.048045076323174
Epoch 40/300 |loss: 0.001234| train set 5.112x speedup, test set 5.048x speedup, val set 5.101x speedup, step: 2
JOB test speedup 2.60713158396866
TPCH test speedup 5.139128050585718
TPCH skew test speedup 4.913838246000711
Epoch 41/300 |loss: 0.001019| train set 5.023x speedup, test set 4.914x speedup, val set 5.070x speedup, step: 3
JOB test speedup 3.072510098626431
TPCH test speedup 5.276623148424563
TPCH skew test speedup 5.027253511125562
Epoch 42/300 |loss: 0.001096| train set 5.091x speedup, test set 5.027x speedup, val set 5.032x speedup, step: 4
JOB test speedup 0.8203938044325313
TPCH test speedup 5.29380796261104
TPCH skew test speedup 4.964881277832523
Epoch 43/300 |loss: 0.001064| train set 5.129x speedup, test set 4.965x speedup, val set 5.010x speedup, step: 5
JOB test speedup 3.099522424071186
TPCH test speedup 5.058075509788433
TPCH skew test speedup 4.80152263663816
Epoch 44/300 |loss: 0.001004| train set 5.128x speedup, test set 4.802x speedup, val set 4.868x speedup, step: 6
JOB test speedup 3.1238617747802033
TPCH test speedup 5.101814212425687
TPCH skew test speedup 4.8721532621144785
Epoch 45/300 |loss: 0.001151| train set 5.098x speedup, test set 4.872x speedup, val set 5.003x speedup, step: 7
JOB test speedup 2.660575495296919
TPCH test speedup 5.292674917619796
TPCH skew test speedup 5.011841726485462
Epoch 46/300 |loss: 0.001101| train set 5.119x speedup, test set 5.012x speedup, val set 5.161x speedup, step: 8
JOB test speedup 0.8257570690850519
TPCH test speedup 5.043957947538805
TPCH skew test speedup 4.79506770966169
Epoch 47/300 |loss: 0.000954| train set 5.117x speedup, test set 4.795x speedup, val set 4.893x speedup, step: 9
JOB test speedup 0.820217237300014
TPCH test speedup 5.1920141648741165
TPCH skew test speedup 4.921645440170232
Epoch 48/300 |loss: 0.000892| train set 5.116x speedup, test set 4.922x speedup, val set 5.099x speedup, step: 10
JOB test speedup 3.1298563268076296
TPCH test speedup 5.154134159445063
TPCH skew test speedup 4.898601960096776
Epoch 49/300 |loss: 0.000989| train set 5.114x speedup, test set 4.899x speedup, val set 5.123x speedup, step: 11
JOB test speedup 0.8215396304420516
TPCH test speedup 5.125636671225871
TPCH skew test speedup 4.884971786010223
Epoch 50/300 |loss: 0.000936| train set 5.127x speedup, test set 4.885x speedup, val set 4.906x speedup, step: 12
JOB test speedup 3.074824063464732
TPCH test speedup 4.641236265567064
TPCH skew test speedup 4.513939749039977
Epoch 51/300 |loss: 0.000865| train set 5.110x speedup, test set 4.514x speedup, val set 4.894x speedup, step: 13
JOB test speedup 2.9938599486617896
TPCH test speedup 5.141437161064214
TPCH skew test speedup 4.8815069271904195
Epoch 52/300 |loss: 0.000888| train set 5.129x speedup, test set 4.882x speedup, val set 5.062x speedup, step: 14
JOB test speedup 0.8267835505151984
TPCH test speedup 5.141153291635099
TPCH skew test speedup 4.881425783609346
Epoch 53/300 |loss: 0.000800| train set 5.104x speedup, test set 4.881x speedup, val set 5.086x speedup, step: 15
JOB test speedup 2.9146750818501452
TPCH test speedup 5.115589523316357
TPCH skew test speedup 4.890277434215878
Epoch 54/300 |loss: 0.000760| train set 5.096x speedup, test set 4.890x speedup, val set 5.021x speedup, step: 16
JOB test speedup 0.8217277492380987
TPCH test speedup 5.101534701348855
TPCH skew test speedup 4.8720724291983055
Epoch 55/300 |loss: 0.000680| train set 5.031x speedup, test set 4.872x speedup, val set 4.868x speedup, step: 17
JOB test speedup 3.089599901165518
TPCH test speedup 5.117877524889507
TPCH skew test speedup 4.858254405473529
Epoch 56/300 |loss: 0.000955| train set 5.107x speedup, test set 4.858x speedup, val set 5.020x speedup, step: 18
JOB test speedup 2.991972757945144
TPCH test speedup 4.651415140010961
TPCH skew test speedup 4.5125044939494
Epoch 57/300 |loss: 0.000848| train set 5.130x speedup, test set 4.513x speedup, val set 4.991x speedup, step: 19
JOB test speedup 2.515199302815154
TPCH test speedup 4.724546272546431
TPCH skew test speedup 4.590975753711038
Epoch 58/300 |loss: 0.000639| train set 5.124x speedup, test set 4.591x speedup, val set 4.993x speedup, step: 20
JOB test speedup 3.087912306859952
TPCH test speedup 4.747665807442943
TPCH skew test speedup 4.6164892683574
Epoch 59/300 |loss: 0.000890| train set 5.132x speedup, test set 4.616x speedup, val set 5.096x speedup, step: 21
JOB test speedup 2.9496654560679776
TPCH test speedup 5.193394152337245
TPCH skew test speedup 4.922321272003281
Epoch 60/300 |loss: 0.000731| train set 5.126x speedup, test set 4.922x speedup, val set 5.092x speedup, step: 22
JOB test speedup 3.005360430054649
TPCH test speedup 5.142506371338026
TPCH skew test speedup 4.882090614042154
Epoch 61/300 |loss: 0.000727| train set 5.127x speedup, test set 4.882x speedup, val set 4.953x speedup, step: 23
JOB test speedup 0.8244478848886171
TPCH test speedup 5.147295816916598
TPCH skew test speedup 4.8891030073935795
Epoch 62/300 |loss: 0.000750| train set 5.100x speedup, test set 4.889x speedup, val set 5.158x speedup, step: 24
JOB test speedup 0.8199352140474868
TPCH test speedup 5.117877524889507
TPCH skew test speedup 4.858254405473529
Epoch 63/300 |loss: 0.000720| train set 5.116x speedup, test set 4.858x speedup, val set 5.069x speedup, step: 25
JOB test speedup 3.0565423329701744
TPCH test speedup 4.692100978733733
TPCH skew test speedup 4.553989694995417
Epoch 64/300 |loss: 0.000791| train set 5.125x speedup, test set 4.554x speedup, val set 4.928x speedup, step: 26
early stopping at epoch 64
Training per epoch cost 3.495 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.085s, pg runtime 0.072s, speedup 0.847x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.875s, pg runtime 2.352s, speedup 2.688x
12, opt runtime 0.463s, model runtime 0.557s, pg runtime 0.557s, speedup 1.000x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.474s, pg runtime 0.453s, speedup 0.956x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.079s, pg runtime 0.086s, speedup 1.091x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.251s, pg runtime 0.891s, speedup 3.554x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.056s, pg runtime 0.020s, speedup 0.359x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.065s, pg runtime 0.023s, speedup 0.357x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
33, opt runtime 0.250s, model runtime 0.251s, pg runtime 0.250s, speedup 0.995x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.240s, pg runtime 1.214s, speedup 0.979x
20, opt runtime 1.353s, model runtime 1.508s, pg runtime 1.380s, speedup 0.915x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 11.165s, pg runtime 32.969s, speedup 2.953x
24, opt runtime 5.961s, model runtime 10.298s, pg runtime 31.210s, speedup 3.031x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
28, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.316s, model runtime 1.382s, pg runtime 1.352s, speedup 0.978x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
24, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 9.098s, pg runtime 6.749s, speedup 0.742x
28, opt runtime 7.213s, model runtime 10.591s, pg runtime 7.213s, speedup 0.681x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 39, train speedup 5.123, test speedup 3.040, val speedup 5.138
TPCH best validation speedup epoch: 39, train speedup 5.123, test speedup 5.293, val speedup 5.138
TPCH Skew best validation speedup epoch: 39, train speedup 5.123, test speedup 5.012, val speedup 5.138
execution cost 0:05:08.253951
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.640550, and there are 12152 training samples
in channel 9
JOB test speedup 1.0628511742006652
TPCH test speedup 2.657916292704591
TPCH skew test speedup 2.5294425281142203
Epoch 0/300 |loss: 0.031317| train set 2.449x speedup, test set 2.529x speedup, val set 2.450x speedup, step: 1
JOB test speedup 2.5678442945855955
TPCH test speedup 3.00457446279677
TPCH skew test speedup 2.6998286725018827
Epoch 1/300 |loss: 0.012859| train set 2.624x speedup, test set 2.700x speedup, val set 2.630x speedup, step: 2
JOB test speedup 2.513924843085437
TPCH test speedup 3.7071226947281675
TPCH skew test speedup 3.201090900932783
Epoch 2/300 |loss: 0.009640| train set 3.077x speedup, test set 3.201x speedup, val set 3.334x speedup, step: 3
JOB test speedup 3.3782289164303423
TPCH test speedup 3.3938215039439528
TPCH skew test speedup 3.2182788505410973
Epoch 3/300 |loss: 0.007202| train set 3.170x speedup, test set 3.218x speedup, val set 3.193x speedup, step: 4
JOB test speedup 3.066472750784921
TPCH test speedup 4.301802486214631
TPCH skew test speedup 3.9874840897135164
Epoch 4/300 |loss: 0.006422| train set 3.756x speedup, test set 3.987x speedup, val set 3.527x speedup, step: 1
JOB test speedup 2.997001941864864
TPCH test speedup 3.9920421205494314
TPCH skew test speedup 3.9073053613220177
Epoch 5/300 |loss: 0.005738| train set 3.870x speedup, test set 3.907x speedup, val set 4.026x speedup, step: 2
JOB test speedup 3.2525439383943153
TPCH test speedup 3.782409599372209
TPCH skew test speedup 3.1426782684106698
Epoch 6/300 |loss: 0.004732| train set 3.836x speedup, test set 3.143x speedup, val set 3.567x speedup, step: 3
JOB test speedup 1.1249352118379885
TPCH test speedup 5.092007515744033
TPCH skew test speedup 4.849349790030509
Epoch 7/300 |loss: 0.004277| train set 4.410x speedup, test set 4.849x speedup, val set 4.864x speedup, step: 4
JOB test speedup 2.9383959271383757
TPCH test speedup 4.994228240856845
TPCH skew test speedup 4.669951455558556
Epoch 8/300 |loss: 0.003917| train set 4.136x speedup, test set 4.670x speedup, val set 4.626x speedup, step: 5
JOB test speedup 3.084659919002218
TPCH test speedup 5.354445494584366
TPCH skew test speedup 5.059159918925382
Epoch 9/300 |loss: 0.003341| train set 3.952x speedup, test set 5.059x speedup, val set 4.945x speedup, step: 1
JOB test speedup 1.1161467374387617
TPCH test speedup 4.118837937867824
TPCH skew test speedup 3.557791405087234
Epoch 10/300 |loss: 0.003364| train set 3.594x speedup, test set 3.558x speedup, val set 3.685x speedup, step: 2
JOB test speedup 2.830902759458307
TPCH test speedup 5.246989015696864
TPCH skew test speedup 4.951782778251296
Epoch 11/300 |loss: 0.003459| train set 5.060x speedup, test set 4.952x speedup, val set 5.083x speedup, step: 3
JOB test speedup 3.097536477479265
TPCH test speedup 5.314562904664242
TPCH skew test speedup 5.074233858408308
Epoch 12/300 |loss: 0.003073| train set 4.884x speedup, test set 5.074x speedup, val set 4.954x speedup, step: 4
JOB test speedup 3.118914711323922
TPCH test speedup 5.190788564498996
TPCH skew test speedup 4.168465705452794
Epoch 13/300 |loss: 0.002644| train set 5.099x speedup, test set 4.168x speedup, val set 4.975x speedup, step: 5
JOB test speedup 2.6559737067888767
TPCH test speedup 4.127138031309735
TPCH skew test speedup 4.006208954139295
Epoch 14/300 |loss: 0.002853| train set 4.909x speedup, test set 4.006x speedup, val set 3.881x speedup, step: 6
JOB test speedup 2.7946444778798365
TPCH test speedup 4.933997789654623
TPCH skew test speedup 4.064904892542436
Epoch 15/300 |loss: 0.002398| train set 5.000x speedup, test set 4.065x speedup, val set 4.908x speedup, step: 7
JOB test speedup 3.073206806719252
TPCH test speedup 5.291311736992662
TPCH skew test speedup 5.015604677383411
Epoch 16/300 |loss: 0.002382| train set 4.581x speedup, test set 5.016x speedup, val set 5.024x speedup, step: 8
JOB test speedup 2.574434319292041
TPCH test speedup 5.371264390427754
TPCH skew test speedup 5.080515718335242
Epoch 17/300 |loss: 0.002331| train set 4.832x speedup, test set 5.081x speedup, val set 5.088x speedup, step: 9
JOB test speedup 2.9890448892750694
TPCH test speedup 5.305661267439059
TPCH skew test speedup 5.035306608020335
Epoch 18/300 |loss: 0.002470| train set 4.981x speedup, test set 5.035x speedup, val set 4.983x speedup, step: 10
JOB test speedup 2.90967516960267
TPCH test speedup 4.832816866226018
TPCH skew test speedup 4.518290987435589
Epoch 19/300 |loss: 0.002221| train set 4.778x speedup, test set 4.518x speedup, val set 4.670x speedup, step: 11
JOB test speedup 2.9719131801149477
TPCH test speedup 5.213191812759392
TPCH skew test speedup 4.979835058455502
Epoch 20/300 |loss: 0.001935| train set 5.106x speedup, test set 4.980x speedup, val set 5.059x speedup, step: 12
JOB test speedup 3.1070938481349737
TPCH test speedup 5.365469739759256
TPCH skew test speedup 5.074247682914698
Epoch 21/300 |loss: 0.002125| train set 5.118x speedup, test set 5.074x speedup, val set 5.045x speedup, step: 13
JOB test speedup 2.5896589966127284
TPCH test speedup 5.139999994479958
TPCH skew test speedup 4.888766090160428
Epoch 22/300 |loss: 0.002340| train set 5.019x speedup, test set 4.889x speedup, val set 4.980x speedup, step: 14
JOB test speedup 2.5156539537856237
TPCH test speedup 5.333411506559892
TPCH skew test speedup 5.03583186902247
Epoch 23/300 |loss: 0.001904| train set 4.977x speedup, test set 5.036x speedup, val set 5.055x speedup, step: 15
JOB test speedup 2.564491223145676
TPCH test speedup 4.203496400996493
TPCH skew test speedup 4.060194998706092
Epoch 24/300 |loss: 0.001832| train set 4.593x speedup, test set 4.060x speedup, val set 4.537x speedup, step: 16
JOB test speedup 3.1445039915589517
TPCH test speedup 3.9032876228143634
TPCH skew test speedup 3.820991021596477
Epoch 25/300 |loss: 0.001559| train set 5.114x speedup, test set 3.821x speedup, val set 4.569x speedup, step: 17
JOB test speedup 2.9869975620828155
TPCH test speedup 4.668360979519529
TPCH skew test speedup 4.415126509708215
Epoch 26/300 |loss: 0.002046| train set 5.029x speedup, test set 4.415x speedup, val set 4.179x speedup, step: 18
JOB test speedup 3.065314540386862
TPCH test speedup 5.228859405617064
TPCH skew test speedup 4.9270154945454125
Epoch 27/300 |loss: 0.001634| train set 4.953x speedup, test set 4.927x speedup, val set 4.904x speedup, step: 19
JOB test speedup 2.934397171886331
TPCH test speedup 5.1032229558910185
TPCH skew test speedup 4.838535638499991
Epoch 28/300 |loss: 0.001574| train set 4.533x speedup, test set 4.839x speedup, val set 4.991x speedup, step: 20
JOB test speedup 2.9505824090695625
TPCH test speedup 5.228859405617064
TPCH skew test speedup 4.904398301572424
Epoch 29/300 |loss: 0.001537| train set 5.047x speedup, test set 4.904x speedup, val set 5.164x speedup, step: 1
JOB test speedup 3.0763208917605125
TPCH test speedup 5.374974131868472
TPCH skew test speedup 5.066807908102751
Epoch 30/300 |loss: 0.001591| train set 5.073x speedup, test set 5.067x speedup, val set 5.127x speedup, step: 2
JOB test speedup 3.132424042550075
TPCH test speedup 5.351134771483973
TPCH skew test speedup 5.06254485416867
Epoch 31/300 |loss: 0.001420| train set 5.037x speedup, test set 5.063x speedup, val set 5.157x speedup, step: 3
JOB test speedup 3.1481479878902503
TPCH test speedup 5.331449926615452
TPCH skew test speedup 5.068068768580487
Epoch 32/300 |loss: 0.001592| train set 5.096x speedup, test set 5.068x speedup, val set 5.008x speedup, step: 4
JOB test speedup 3.137691371744827
TPCH test speedup 5.241523363795556
TPCH skew test speedup 4.94079794153537
Epoch 33/300 |loss: 0.001581| train set 5.019x speedup, test set 4.941x speedup, val set 4.937x speedup, step: 5
JOB test speedup 0.8188995894567861
TPCH test speedup 5.314973818728322
TPCH skew test speedup 5.00156721073391
Epoch 34/300 |loss: 0.001379| train set 4.797x speedup, test set 5.002x speedup, val set 4.942x speedup, step: 6
JOB test speedup 3.105938141549682
TPCH test speedup 5.1951147230600085
TPCH skew test speedup 4.92886963398581
Epoch 35/300 |loss: 0.001301| train set 5.120x speedup, test set 4.929x speedup, val set 5.108x speedup, step: 7
JOB test speedup 3.0690359340189115
TPCH test speedup 5.3586228043660205
TPCH skew test speedup 5.0480868814237425
Epoch 36/300 |loss: 0.001757| train set 5.085x speedup, test set 5.048x speedup, val set 5.143x speedup, step: 8
JOB test speedup 3.1583089766993018
TPCH test speedup 5.219324303211041
TPCH skew test speedup 4.922285194967712
Epoch 37/300 |loss: 0.001168| train set 5.045x speedup, test set 4.922x speedup, val set 4.902x speedup, step: 9
JOB test speedup 3.0294792469735476
TPCH test speedup 5.1013939233869126
TPCH skew test speedup 4.845994693030581
Epoch 38/300 |loss: 0.001257| train set 5.112x speedup, test set 4.846x speedup, val set 4.980x speedup, step: 10
JOB test speedup 2.8961291339544024
TPCH test speedup 5.251070632090709
TPCH skew test speedup 4.952221942398694
Epoch 39/300 |loss: 0.001288| train set 5.131x speedup, test set 4.952x speedup, val set 5.176x speedup, step: 1
JOB test speedup 2.96020994678334
TPCH test speedup 5.045504720541223
TPCH skew test speedup 4.833643513096089
Epoch 40/300 |loss: 0.001252| train set 5.024x speedup, test set 4.834x speedup, val set 4.496x speedup, step: 2
JOB test speedup 3.054479929267218
TPCH test speedup 4.815306443517013
TPCH skew test speedup 4.6871082623485805
Epoch 41/300 |loss: 0.001178| train set 5.044x speedup, test set 4.687x speedup, val set 4.956x speedup, step: 3
JOB test speedup 0.819034316170706
TPCH test speedup 4.7928926875945335
TPCH skew test speedup 4.417772303302758
Epoch 42/300 |loss: 0.001105| train set 5.081x speedup, test set 4.418x speedup, val set 4.645x speedup, step: 4
JOB test speedup 3.100425369731954
TPCH test speedup 5.187214374594613
TPCH skew test speedup 4.920298225533772
Epoch 43/300 |loss: 0.001140| train set 5.119x speedup, test set 4.920x speedup, val set 4.921x speedup, step: 5
JOB test speedup 2.981050686383906
TPCH test speedup 5.305585077502304
TPCH skew test speedup 5.008090757555499
Epoch 44/300 |loss: 0.001004| train set 5.073x speedup, test set 5.008x speedup, val set 5.173x speedup, step: 6
JOB test speedup 3.107999346928167
TPCH test speedup 4.907299867784244
TPCH skew test speedup 4.739535744574603
Epoch 45/300 |loss: 0.001167| train set 5.042x speedup, test set 4.740x speedup, val set 5.072x speedup, step: 7
JOB test speedup 2.5889653162314605
TPCH test speedup 4.8608840468960866
TPCH skew test speedup 4.7016846655414355
Epoch 46/300 |loss: 0.001109| train set 5.129x speedup, test set 4.702x speedup, val set 5.150x speedup, step: 8
JOB test speedup 3.5754916387710365
TPCH test speedup 5.16767607172972
TPCH skew test speedup 4.896115836677987
Epoch 47/300 |loss: 0.000956| train set 5.073x speedup, test set 4.896x speedup, val set 4.981x speedup, step: 9
JOB test speedup 3.054939766650352
TPCH test speedup 4.791662991447236
TPCH skew test speedup 4.620233800673902
Epoch 48/300 |loss: 0.000914| train set 5.121x speedup, test set 4.620x speedup, val set 5.012x speedup, step: 10
JOB test speedup 3.4933749425806493
TPCH test speedup 4.719161650043564
TPCH skew test speedup 4.585341837854202
Epoch 49/300 |loss: 0.000864| train set 5.133x speedup, test set 4.585x speedup, val set 5.030x speedup, step: 11
JOB test speedup 0.8099524262347764
TPCH test speedup 5.217964415652457
TPCH skew test speedup 4.935982145381894
Epoch 50/300 |loss: 0.000910| train set 5.078x speedup, test set 4.936x speedup, val set 4.918x speedup, step: 12
JOB test speedup 0.8424506807327466
TPCH test speedup 4.637550273878972
TPCH skew test speedup 4.502036259198741
Epoch 51/300 |loss: 0.000920| train set 4.956x speedup, test set 4.502x speedup, val set 4.394x speedup, step: 13
JOB test speedup 2.886446981691565
TPCH test speedup 4.902741664631588
TPCH skew test speedup 4.708595621368567
Epoch 52/300 |loss: 0.000947| train set 5.117x speedup, test set 4.709x speedup, val set 5.026x speedup, step: 14
JOB test speedup 0.8193611294543869
TPCH test speedup 5.169726878093942
TPCH skew test speedup 4.918766509469379
Epoch 53/300 |loss: 0.000888| train set 5.102x speedup, test set 4.919x speedup, val set 4.946x speedup, step: 15
JOB test speedup 2.9846565079785274
TPCH test speedup 4.686556064301597
TPCH skew test speedup 4.577508539267293
Epoch 54/300 |loss: 0.000789| train set 5.007x speedup, test set 4.578x speedup, val set 4.958x speedup, step: 16
JOB test speedup 0.8337429451758782
TPCH test speedup 5.1926092704822535
TPCH skew test speedup 4.911618107855474
Epoch 55/300 |loss: 0.000932| train set 5.098x speedup, test set 4.912x speedup, val set 5.004x speedup, step: 17
JOB test speedup 3.052392678063622
TPCH test speedup 4.712147714182331
TPCH skew test speedup 4.565751163898322
Epoch 56/300 |loss: 0.001012| train set 5.054x speedup, test set 4.566x speedup, val set 4.520x speedup, step: 18
JOB test speedup 2.9625230477642224
TPCH test speedup 4.81548328222317
TPCH skew test speedup 4.653444384349162
Epoch 57/300 |loss: 0.000764| train set 5.130x speedup, test set 4.653x speedup, val set 5.029x speedup, step: 19
JOB test speedup 3.1040542551301953
TPCH test speedup 4.704951302736542
TPCH skew test speedup 4.587883310071143
Epoch 58/300 |loss: 0.000662| train set 5.122x speedup, test set 4.588x speedup, val set 4.478x speedup, step: 20
JOB test speedup 3.460662284262596
TPCH test speedup 5.265019129109787
TPCH skew test speedup 4.966697157242268
Epoch 59/300 |loss: 0.000939| train set 4.995x speedup, test set 4.967x speedup, val set 4.956x speedup, step: 21
JOB test speedup 3.244124037402856
TPCH test speedup 4.703508007059129
TPCH skew test speedup 4.574830807274086
Epoch 60/300 |loss: 0.000695| train set 5.052x speedup, test set 4.575x speedup, val set 4.906x speedup, step: 22
JOB test speedup 0.8482510914494164
TPCH test speedup 5.175106228662427
TPCH skew test speedup 4.924656086344197
Epoch 61/300 |loss: 0.000783| train set 5.042x speedup, test set 4.925x speedup, val set 4.866x speedup, step: 23
JOB test speedup 0.8175923816716543
TPCH test speedup 5.217964415652457
TPCH skew test speedup 4.935982145381894
Epoch 62/300 |loss: 0.000660| train set 5.126x speedup, test set 4.936x speedup, val set 4.483x speedup, step: 24
JOB test speedup 0.777161966817887
TPCH test speedup 4.77396433167301
TPCH skew test speedup 4.61604087090271
Epoch 63/300 |loss: 0.000803| train set 5.066x speedup, test set 4.616x speedup, val set 4.930x speedup, step: 25
JOB test speedup 3.0109152634310057
TPCH test speedup 5.257223332328077
TPCH skew test speedup 4.969679086322439
Epoch 64/300 |loss: 0.000858| train set 5.119x speedup, test set 4.970x speedup, val set 4.910x speedup, step: 26
JOB test speedup 3.06067648422527
TPCH test speedup 5.097531987494455
TPCH skew test speedup 4.870800775177569
Epoch 65/300 |loss: 0.000923| train set 5.126x speedup, test set 4.871x speedup, val set 4.928x speedup, step: 27
JOB test speedup 2.915179890372741
TPCH test speedup 5.206179124160666
TPCH skew test speedup 4.929268829498285
Epoch 66/300 |loss: 0.000827| train set 5.078x speedup, test set 4.929x speedup, val set 4.932x speedup, step: 28
early stopping at epoch 66
Training per epoch cost 3.527 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.358s, pg runtime 0.354s, speedup 0.988x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.231s, pg runtime 0.891s, speedup 3.855x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.060s, pg runtime 0.112s, speedup 1.889x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 1.225s, pg runtime 0.137s, speedup 0.112x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.462s, pg runtime 1.380s, speedup 0.944x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 11.165s, pg runtime 32.969s, speedup 2.953x
24, opt runtime 5.961s, model runtime 10.298s, pg runtime 31.210s, speedup 3.031x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.646s, pg runtime 5.362s, speedup 0.950x
30, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
31, opt runtime 24.079s, model runtime 32.888s, pg runtime 608.707s, speedup 18.509x
32, opt runtime 24.706s, model runtime 32.983s, pg runtime 610.808s, speedup 18.519x
33, opt runtime 38.718s, model runtime 38.718s, pg runtime 69.421s, speedup 1.793x
34, opt runtime 35.527s, model runtime 42.634s, pg runtime 71.730s, speedup 1.682x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.316s, model runtime 1.342s, pg runtime 1.352s, speedup 1.007x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
24, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.730s, pg runtime 5.223s, speedup 0.912x
30, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
31, opt runtime 24.136s, model runtime 31.969s, pg runtime 609.432s, speedup 19.063x
32, opt runtime 24.451s, model runtime 32.240s, pg runtime 628.615s, speedup 19.498x
33, opt runtime 39.254s, model runtime 40.423s, pg runtime 58.921s, speedup 1.458x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 39, train speedup 5.131, test speedup 2.896, val speedup 5.176
TPCH best validation speedup epoch: 39, train speedup 5.131, test speedup 5.251, val speedup 5.176
TPCH Skew best validation speedup epoch: 39, train speedup 5.131, test speedup 4.952, val speedup 5.176
execution cost 0:05:19.819974
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.703106, and there are 12152 training samples
in channel 9
JOB test speedup 1.0628511742006652
TPCH test speedup 2.657916292704591
TPCH skew test speedup 2.5294425281142203
Epoch 0/300 |loss: 0.031317| train set 2.449x speedup, test set 2.529x speedup, val set 2.450x speedup, step: 1
JOB test speedup 2.565943189663033
TPCH test speedup 3.00457446279677
TPCH skew test speedup 2.6998286725018827
Epoch 1/300 |loss: 0.012855| train set 2.765x speedup, test set 2.700x speedup, val set 2.630x speedup, step: 2
JOB test speedup 2.3610903982815667
TPCH test speedup 3.7494807723337047
TPCH skew test speedup 3.4116545072836897
Epoch 2/300 |loss: 0.009721| train set 3.285x speedup, test set 3.412x speedup, val set 3.534x speedup, step: 3
JOB test speedup 3.025381049585463
TPCH test speedup 3.3137058236662065
TPCH skew test speedup 3.1520481618621443
Epoch 3/300 |loss: 0.007186| train set 3.141x speedup, test set 3.152x speedup, val set 3.220x speedup, step: 4
JOB test speedup 1.193909894537224
TPCH test speedup 3.7301642930600853
TPCH skew test speedup 3.685610960160025
Epoch 4/300 |loss: 0.006416| train set 3.291x speedup, test set 3.686x speedup, val set 3.460x speedup, step: 1
JOB test speedup 1.1299668175523427
TPCH test speedup 3.9565481928698283
TPCH skew test speedup 3.8464796821779665
Epoch 5/300 |loss: 0.005535| train set 3.790x speedup, test set 3.846x speedup, val set 3.991x speedup, step: 2
JOB test speedup 2.673855057617538
TPCH test speedup 3.7289620841637556
TPCH skew test speedup 3.080763088376204
Epoch 6/300 |loss: 0.004549| train set 3.551x speedup, test set 3.081x speedup, val set 3.540x speedup, step: 3
JOB test speedup 1.174195519685005
TPCH test speedup 4.801532018430729
TPCH skew test speedup 3.8149535444935263
Epoch 7/300 |loss: 0.004096| train set 3.998x speedup, test set 3.815x speedup, val set 4.723x speedup, step: 4
JOB test speedup 1.1727751028817799
TPCH test speedup 5.1285540505480185
TPCH skew test speedup 4.0376750360895155
Epoch 8/300 |loss: 0.003902| train set 4.221x speedup, test set 4.038x speedup, val set 4.986x speedup, step: 5
JOB test speedup 3.541690502201915
TPCH test speedup 4.6556656259779015
TPCH skew test speedup 3.7446356810206454
Epoch 9/300 |loss: 0.003403| train set 3.757x speedup, test set 3.745x speedup, val set 4.386x speedup, step: 1
JOB test speedup 3.341697601276387
TPCH test speedup 4.098532035191427
TPCH skew test speedup 4.083842657601224
Epoch 10/300 |loss: 0.003328| train set 3.898x speedup, test set 4.084x speedup, val set 3.998x speedup, step: 2
JOB test speedup 3.32536377962005
TPCH test speedup 5.373263902539996
TPCH skew test speedup 4.792507700091744
Epoch 11/300 |loss: 0.003341| train set 4.920x speedup, test set 4.793x speedup, val set 4.937x speedup, step: 3
JOB test speedup 3.538814530384048
TPCH test speedup 4.696963854113988
TPCH skew test speedup 3.8059806467309696
Epoch 12/300 |loss: 0.003009| train set 4.817x speedup, test set 3.806x speedup, val set 4.873x speedup, step: 4
JOB test speedup 3.452268623028794
TPCH test speedup 5.190788564498996
TPCH skew test speedup 4.931573061495596
Epoch 13/300 |loss: 0.002725| train set 5.103x speedup, test set 4.932x speedup, val set 5.047x speedup, step: 5
JOB test speedup 3.4592965285469264
TPCH test speedup 3.815778438219673
TPCH skew test speedup 3.6452603923022338
Epoch 14/300 |loss: 0.002957| train set 3.982x speedup, test set 3.645x speedup, val set 3.553x speedup, step: 6
JOB test speedup 3.1740795019895462
TPCH test speedup 4.0324181438711175
TPCH skew test speedup 3.455949957818231
Epoch 15/300 |loss: 0.002341| train set 4.958x speedup, test set 3.456x speedup, val set 4.401x speedup, step: 7
JOB test speedup 3.4482375776729874
TPCH test speedup 5.078250514887101
TPCH skew test speedup 4.689443968423887
Epoch 16/300 |loss: 0.002391| train set 5.057x speedup, test set 4.689x speedup, val set 4.892x speedup, step: 8
JOB test speedup 3.593736775150795
TPCH test speedup 5.145744682753076
TPCH skew test speedup 4.864338057503305
Epoch 17/300 |loss: 0.002266| train set 4.951x speedup, test set 4.864x speedup, val set 4.868x speedup, step: 9
JOB test speedup 3.437709400128671
TPCH test speedup 5.156320564708311
TPCH skew test speedup 4.892043895549488
Epoch 18/300 |loss: 0.002509| train set 4.970x speedup, test set 4.892x speedup, val set 5.022x speedup, step: 10
JOB test speedup 3.4301646448617182
TPCH test speedup 4.264216475767855
TPCH skew test speedup 4.112629960076307
Epoch 19/300 |loss: 0.002119| train set 4.397x speedup, test set 4.113x speedup, val set 4.131x speedup, step: 11
JOB test speedup 3.530268299263568
TPCH test speedup 5.353715127086273
TPCH skew test speedup 5.093915736675492
Epoch 20/300 |loss: 0.002006| train set 5.092x speedup, test set 5.094x speedup, val set 5.032x speedup, step: 12
JOB test speedup 3.516138029501962
TPCH test speedup 5.263981037260883
TPCH skew test speedup 4.998560614396986
Epoch 21/300 |loss: 0.002109| train set 5.113x speedup, test set 4.999x speedup, val set 5.085x speedup, step: 13
JOB test speedup 3.4031047293316816
TPCH test speedup 5.238651927155123
TPCH skew test speedup 4.9332787221196455
Epoch 22/300 |loss: 0.002374| train set 5.005x speedup, test set 4.933x speedup, val set 4.996x speedup, step: 14
JOB test speedup 3.4646449630276726
TPCH test speedup 4.207432146813754
TPCH skew test speedup 4.06387693712956
Epoch 23/300 |loss: 0.002021| train set 5.058x speedup, test set 4.064x speedup, val set 4.564x speedup, step: 15
JOB test speedup 2.857584547552095
TPCH test speedup 5.138742784173702
TPCH skew test speedup 4.880496824492845
Epoch 24/300 |loss: 0.001876| train set 5.038x speedup, test set 4.880x speedup, val set 5.075x speedup, step: 1
JOB test speedup 3.538828476800881
TPCH test speedup 4.163279314400573
TPCH skew test speedup 4.0460054402588135
Epoch 25/300 |loss: 0.001662| train set 4.820x speedup, test set 4.046x speedup, val set 4.053x speedup, step: 2
JOB test speedup 3.3798477383942145
TPCH test speedup 3.8770823209562297
TPCH skew test speedup 3.83279252394226
Epoch 26/300 |loss: 0.001965| train set 5.028x speedup, test set 3.833x speedup, val set 4.565x speedup, step: 3
JOB test speedup 3.133030859343123
TPCH test speedup 5.145744682753076
TPCH skew test speedup 4.8555836920783815
Epoch 27/300 |loss: 0.001615| train set 4.925x speedup, test set 4.856x speedup, val set 4.798x speedup, step: 4
JOB test speedup 3.0662260321937564
TPCH test speedup 5.207669140258943
TPCH skew test speedup 4.940821319451692
Epoch 28/300 |loss: 0.001609| train set 5.025x speedup, test set 4.941x speedup, val set 5.013x speedup, step: 5
JOB test speedup 3.5263698565915598
TPCH test speedup 5.130675096323294
TPCH skew test speedup 4.8756928304968925
Epoch 29/300 |loss: 0.001442| train set 5.010x speedup, test set 4.876x speedup, val set 5.045x speedup, step: 6
JOB test speedup 3.098075630344715
TPCH test speedup 5.2041580114987465
TPCH skew test speedup 4.938508930276364
Epoch 30/300 |loss: 0.001508| train set 5.062x speedup, test set 4.939x speedup, val set 4.949x speedup, step: 7
JOB test speedup 3.0560995511483076
TPCH test speedup 4.248289717627898
TPCH skew test speedup 3.966956656988941
Epoch 31/300 |loss: 0.001403| train set 5.069x speedup, test set 3.967x speedup, val set 4.151x speedup, step: 8
JOB test speedup 3.1415594647085774
TPCH test speedup 5.2550531799804485
TPCH skew test speedup 4.955367780080464
Epoch 32/300 |loss: 0.001479| train set 5.016x speedup, test set 4.955x speedup, val set 5.092x speedup, step: 9
JOB test speedup 3.0426730941024576
TPCH test speedup 4.766544864456199
TPCH skew test speedup 4.626009963323099
Epoch 33/300 |loss: 0.001583| train set 4.999x speedup, test set 4.626x speedup, val set 4.895x speedup, step: 10
JOB test speedup 3.052130289764494
TPCH test speedup 4.256213435609532
TPCH skew test speedup 4.108498937401319
Epoch 34/300 |loss: 0.001429| train set 4.771x speedup, test set 4.108x speedup, val set 4.062x speedup, step: 11
JOB test speedup 3.1232198344868154
TPCH test speedup 5.208547169175358
TPCH skew test speedup 4.939731124222303
Epoch 35/300 |loss: 0.001269| train set 5.103x speedup, test set 4.940x speedup, val set 4.895x speedup, step: 12
JOB test speedup 3.127038918499435
TPCH test speedup 4.230161171323077
TPCH skew test speedup 4.06387693712956
Epoch 36/300 |loss: 0.001580| train set 5.132x speedup, test set 4.064x speedup, val set 4.068x speedup, step: 13
JOB test speedup 2.8894232381454423
TPCH test speedup 5.123410625630645
TPCH skew test speedup 4.914120003540298
Epoch 37/300 |loss: 0.001078| train set 5.081x speedup, test set 4.914x speedup, val set 4.969x speedup, step: 14
JOB test speedup 3.1735140199275262
TPCH test speedup 4.723643785454567
TPCH skew test speedup 4.590459597291589
Epoch 38/300 |loss: 0.001167| train set 5.042x speedup, test set 4.590x speedup, val set 4.846x speedup, step: 15
JOB test speedup 2.901065000592505
TPCH test speedup 4.162849486546145
TPCH skew test speedup 4.410302629071782
Epoch 39/300 |loss: 0.001117| train set 5.116x speedup, test set 4.410x speedup, val set 5.091x speedup, step: 1
JOB test speedup 3.1239535275310395
TPCH test speedup 4.1739699973773305
TPCH skew test speedup 4.0364158457035355
Epoch 40/300 |loss: 0.001247| train set 5.027x speedup, test set 4.036x speedup, val set 4.081x speedup, step: 2
JOB test speedup 2.838492543923389
TPCH test speedup 4.207432146813754
TPCH skew test speedup 4.06387693712956
Epoch 41/300 |loss: 0.000990| train set 4.894x speedup, test set 4.064x speedup, val set 4.446x speedup, step: 3
JOB test speedup 3.033178775201396
TPCH test speedup 3.670192824527081
TPCH skew test speedup 3.601580944545257
Epoch 42/300 |loss: 0.001014| train set 4.694x speedup, test set 3.602x speedup, val set 3.873x speedup, step: 4
JOB test speedup 2.5548482714061373
TPCH test speedup 4.093833902386671
TPCH skew test speedup 3.9690068634278415
Epoch 43/300 |loss: 0.001081| train set 5.052x speedup, test set 3.969x speedup, val set 4.408x speedup, step: 5
JOB test speedup 2.9361169845288275
TPCH test speedup 5.197186374448435
TPCH skew test speedup 4.928854731252402
Epoch 44/300 |loss: 0.000911| train set 5.076x speedup, test set 4.929x speedup, val set 4.938x speedup, step: 6
JOB test speedup 2.6130010986511056
TPCH test speedup 3.839829027996085
TPCH skew test speedup 3.8085255328252807
Epoch 45/300 |loss: 0.001054| train set 5.051x speedup, test set 3.809x speedup, val set 4.355x speedup, step: 7
JOB test speedup 2.5531277298207242
TPCH test speedup 3.8863520650001817
TPCH skew test speedup 3.824185912649786
Epoch 46/300 |loss: 0.001041| train set 5.075x speedup, test set 3.824x speedup, val set 3.999x speedup, step: 8
JOB test speedup 3.0633315710158358
TPCH test speedup 4.162849486546145
TPCH skew test speedup 4.038385114139322
Epoch 47/300 |loss: 0.000837| train set 5.080x speedup, test set 4.038x speedup, val set 4.573x speedup, step: 9
JOB test speedup 3.046123998650965
TPCH test speedup 4.624378851898118
TPCH skew test speedup 4.406588975311966
Epoch 48/300 |loss: 0.000809| train set 5.109x speedup, test set 4.407x speedup, val set 5.012x speedup, step: 10
JOB test speedup 3.015385504171958
TPCH test speedup 4.816797594061001
TPCH skew test speedup 4.666759856424388
Epoch 49/300 |loss: 0.000899| train set 5.128x speedup, test set 4.667x speedup, val set 5.078x speedup, step: 11
JOB test speedup 0.861720595987301
TPCH test speedup 4.626285357686486
TPCH skew test speedup 4.407954041631019
Epoch 50/300 |loss: 0.000933| train set 5.112x speedup, test set 4.408x speedup, val set 4.982x speedup, step: 12
JOB test speedup 2.614857913881224
TPCH test speedup 3.8809470097816567
TPCH skew test speedup 3.824185912649786
Epoch 51/300 |loss: 0.000877| train set 5.133x speedup, test set 3.824x speedup, val set 4.103x speedup, step: 13
JOB test speedup 3.124196615656664
TPCH test speedup 4.298400013813888
TPCH skew test speedup 4.140721556686214
Epoch 52/300 |loss: 0.000856| train set 5.116x speedup, test set 4.141x speedup, val set 4.108x speedup, step: 14
JOB test speedup 2.633024127131789
TPCH test speedup 4.190931270706441
TPCH skew test speedup 4.047347345915241
Epoch 53/300 |loss: 0.000786| train set 5.067x speedup, test set 4.047x speedup, val set 4.063x speedup, step: 15
JOB test speedup 3.091088476391415
TPCH test speedup 5.206572664408922
TPCH skew test speedup 4.940223505686826
Epoch 54/300 |loss: 0.000766| train set 5.041x speedup, test set 4.940x speedup, val set 5.073x speedup, step: 16
JOB test speedup 2.5471638640682563
TPCH test speedup 5.139128050585718
TPCH skew test speedup 4.913838246000711
Epoch 55/300 |loss: 0.000808| train set 5.109x speedup, test set 4.914x speedup, val set 4.990x speedup, step: 17
JOB test speedup 3.124209598390309
TPCH test speedup 3.8722693288969974
TPCH skew test speedup 3.809545166448748
Epoch 56/300 |loss: 0.000864| train set 5.044x speedup, test set 3.810x speedup, val set 4.106x speedup, step: 18
JOB test speedup 3.0846406370795814
TPCH test speedup 3.915345496716201
TPCH skew test speedup 3.8488263640504945
Epoch 57/300 |loss: 0.000837| train set 5.133x speedup, test set 3.849x speedup, val set 4.461x speedup, step: 19
early stopping at epoch 57
Training per epoch cost 3.537 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.187s, pg runtime 0.072s, speedup 0.385x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 0.463s, model runtime 0.580s, pg runtime 0.557s, speedup 0.960x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.327s, pg runtime 0.354s, speedup 1.083x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 3.011s, pg runtime 3.540s, speedup 1.176x
20, opt runtime 0.061s, model runtime 0.076s, pg runtime 0.086s, speedup 1.124x
21, opt runtime 0.626s, model runtime 2.614s, pg runtime 2.558s, speedup 0.979x
22, opt runtime 0.136s, model runtime 0.251s, pg runtime 0.891s, speedup 3.554x
23, opt runtime 0.389s, model runtime 0.433s, pg runtime 0.389s, speedup 0.898x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.251s, pg runtime 0.250s, speedup 0.995x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 4.213s, pg runtime 14.646s, speedup 3.477x
14, opt runtime 3.449s, model runtime 4.406s, pg runtime 14.824s, speedup 3.365x
15, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
16, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.240s, pg runtime 1.214s, speedup 0.979x
20, opt runtime 1.353s, model runtime 1.508s, pg runtime 1.380s, speedup 0.915x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 11.165s, pg runtime 32.969s, speedup 2.953x
24, opt runtime 5.961s, model runtime 10.298s, pg runtime 31.210s, speedup 3.031x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
28, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 32.888s, pg runtime 608.707s, speedup 18.509x
32, opt runtime 24.706s, model runtime 32.983s, pg runtime 610.808s, speedup 18.519x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
14, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
15, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.316s, model runtime 1.382s, pg runtime 1.352s, speedup 0.978x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
24, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 9.098s, pg runtime 6.749s, speedup 0.742x
28, opt runtime 7.213s, model runtime 10.591s, pg runtime 7.213s, speedup 0.681x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 31.969s, pg runtime 609.432s, speedup 19.063x
32, opt runtime 24.451s, model runtime 32.240s, pg runtime 628.615s, speedup 19.498x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 39, train speedup 5.116, test speedup 2.901, val speedup 5.091
TPCH best validation speedup epoch: 39, train speedup 5.116, test speedup 4.163, val speedup 5.091
TPCH Skew best validation speedup epoch: 39, train speedup 5.116, test speedup 4.410, val speedup 5.091
execution cost 0:04:41.042473
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.696524, and there are 12152 training samples
in channel 9
JOB test speedup 1.0628511742006652
TPCH test speedup 2.657916292704591
TPCH skew test speedup 2.5294425281142203
Epoch 0/300 |loss: 0.031317| train set 2.449x speedup, test set 2.529x speedup, val set 2.450x speedup, step: 1
JOB test speedup 2.5678442945855955
TPCH test speedup 3.00457446279677
TPCH skew test speedup 2.6998286725018827
Epoch 1/300 |loss: 0.012859| train set 2.624x speedup, test set 2.700x speedup, val set 2.630x speedup, step: 2
JOB test speedup 2.4866816949686963
TPCH test speedup 3.665174197356319
TPCH skew test speedup 3.22829140706192
Epoch 2/300 |loss: 0.009667| train set 3.066x speedup, test set 3.228x speedup, val set 3.188x speedup, step: 3
JOB test speedup 2.622461256346532
TPCH test speedup 3.3947619010693915
TPCH skew test speedup 3.2189839327325935
Epoch 3/300 |loss: 0.007207| train set 3.153x speedup, test set 3.219x speedup, val set 3.194x speedup, step: 4
JOB test speedup 3.4492064385639805
TPCH test speedup 3.8872998833756194
TPCH skew test speedup 3.650220446921747
Epoch 4/300 |loss: 0.006381| train set 3.711x speedup, test set 3.650x speedup, val set 3.528x speedup, step: 1
JOB test speedup 1.1327751085455005
TPCH test speedup 4.0441777859833845
TPCH skew test speedup 3.941027367890995
Epoch 5/300 |loss: 0.005937| train set 3.799x speedup, test set 3.941x speedup, val set 4.035x speedup, step: 2
JOB test speedup 1.1673776758887424
TPCH test speedup 3.959031260020219
TPCH skew test speedup 3.3697647282868615
Epoch 6/300 |loss: 0.004729| train set 3.747x speedup, test set 3.370x speedup, val set 3.862x speedup, step: 3
JOB test speedup 1.1683413994837255
TPCH test speedup 4.36902006047947
TPCH skew test speedup 3.844383275034269
Epoch 7/300 |loss: 0.004476| train set 4.003x speedup, test set 3.844x speedup, val set 4.167x speedup, step: 4
JOB test speedup 1.1757572174481856
TPCH test speedup 4.91254908420351
TPCH skew test speedup 3.8959328169859213
Epoch 8/300 |loss: 0.003819| train set 4.232x speedup, test set 3.896x speedup, val set 4.824x speedup, step: 5
JOB test speedup 1.1417938328586734
TPCH test speedup 4.018405074337216
TPCH skew test speedup 3.997970042445012
Epoch 9/300 |loss: 0.003320| train set 3.866x speedup, test set 3.998x speedup, val set 3.967x speedup, step: 1
JOB test speedup 1.1704077126208334
TPCH test speedup 4.04426334260135
TPCH skew test speedup 4.026427217913598
Epoch 10/300 |loss: 0.003335| train set 3.843x speedup, test set 4.026x speedup, val set 3.962x speedup, step: 2
JOB test speedup 1.151175580431495
TPCH test speedup 5.394780237841245
TPCH skew test speedup 4.919368371899247
Epoch 11/300 |loss: 0.003395| train set 4.856x speedup, test set 4.919x speedup, val set 5.000x speedup, step: 3
JOB test speedup 3.123047180584127
TPCH test speedup 5.407388530759744
TPCH skew test speedup 5.103165947988231
Epoch 12/300 |loss: 0.002970| train set 4.760x speedup, test set 5.103x speedup, val set 5.061x speedup, step: 4
JOB test speedup 3.5704063225918348
TPCH test speedup 4.8985300347739384
TPCH skew test speedup 4.721019013706316
Epoch 13/300 |loss: 0.002783| train set 5.104x speedup, test set 4.721x speedup, val set 4.947x speedup, step: 5
JOB test speedup 3.5523539319596797
TPCH test speedup 3.8356009373311273
TPCH skew test speedup 3.6643727624586746
Epoch 14/300 |loss: 0.002862| train set 4.383x speedup, test set 3.664x speedup, val set 3.996x speedup, step: 1
JOB test speedup 3.1645516909629263
TPCH test speedup 3.869106301196315
TPCH skew test speedup 3.679461482736711
Epoch 15/300 |loss: 0.002314| train set 4.461x speedup, test set 3.679x speedup, val set 3.712x speedup, step: 2
JOB test speedup 3.5809463299623836
TPCH test speedup 4.5758111309607505
TPCH skew test speedup 4.502494750416309
Epoch 16/300 |loss: 0.002309| train set 4.117x speedup, test set 4.502x speedup, val set 4.434x speedup, step: 3
JOB test speedup 3.619415528960705
TPCH test speedup 4.521209215683385
TPCH skew test speedup 4.397478194999608
Epoch 17/300 |loss: 0.002256| train set 4.595x speedup, test set 4.397x speedup, val set 4.351x speedup, step: 4
JOB test speedup 3.5557709456118687
TPCH test speedup 5.141460222958957
TPCH skew test speedup 4.936281827093591
Epoch 18/300 |loss: 0.002580| train set 4.685x speedup, test set 4.936x speedup, val set 5.078x speedup, step: 5
JOB test speedup 3.5283138614395013
TPCH test speedup 5.344114707157197
TPCH skew test speedup 5.086958268355244
Epoch 19/300 |loss: 0.002225| train set 5.086x speedup, test set 5.087x speedup, val set 5.048x speedup, step: 1
JOB test speedup 3.397459511062222
TPCH test speedup 5.155857705839957
TPCH skew test speedup 4.9191745716183215
Epoch 20/300 |loss: 0.001939| train set 5.094x speedup, test set 4.919x speedup, val set 5.101x speedup, step: 2
JOB test speedup 3.5924431424692322
TPCH test speedup 5.304756746046394
TPCH skew test speedup 5.011279811438005
Epoch 21/300 |loss: 0.002071| train set 5.109x speedup, test set 5.011x speedup, val set 5.095x speedup, step: 3
JOB test speedup 3.47222431988996
TPCH test speedup 5.234109919974224
TPCH skew test speedup 4.94635705360827
Epoch 22/300 |loss: 0.002341| train set 4.919x speedup, test set 4.946x speedup, val set 4.931x speedup, step: 4
JOB test speedup 3.4173482546368468
TPCH test speedup 5.321250473189201
TPCH skew test speedup 5.015787399957519
Epoch 23/300 |loss: 0.001944| train set 4.971x speedup, test set 5.016x speedup, val set 4.995x speedup, step: 5
JOB test speedup 2.772319601578642
TPCH test speedup 5.1948724919711005
TPCH skew test speedup 4.923138042903734
Epoch 24/300 |loss: 0.001907| train set 5.027x speedup, test set 4.923x speedup, val set 4.933x speedup, step: 6
JOB test speedup 3.536125808788278
TPCH test speedup 5.14619827141923
TPCH skew test speedup 4.875898165096824
Epoch 25/300 |loss: 0.001608| train set 5.107x speedup, test set 4.876x speedup, val set 5.172x speedup, step: 7
JOB test speedup 3.2889121481197505
TPCH test speedup 5.213191812759392
TPCH skew test speedup 4.979835058455502
Epoch 26/300 |loss: 0.002019| train set 5.027x speedup, test set 4.980x speedup, val set 5.038x speedup, step: 8
JOB test speedup 3.604286973481978
TPCH test speedup 5.108768720415906
TPCH skew test speedup 4.802477183150187
Epoch 27/300 |loss: 0.001658| train set 4.953x speedup, test set 4.802x speedup, val set 4.813x speedup, step: 9
JOB test speedup 3.508488593050473
TPCH test speedup 5.2551156512790325
TPCH skew test speedup 4.9893233956524154
Epoch 28/300 |loss: 0.001545| train set 4.639x speedup, test set 4.989x speedup, val set 4.945x speedup, step: 10
JOB test speedup 3.43109982540738
TPCH test speedup 5.226388804978896
TPCH skew test speedup 4.842113642240501
Epoch 29/300 |loss: 0.001435| train set 4.995x speedup, test set 4.842x speedup, val set 5.037x speedup, step: 11
JOB test speedup 3.0245291765637
TPCH test speedup 5.329267192153781
TPCH skew test speedup 5.0301638057120535
Epoch 30/300 |loss: 0.001492| train set 5.058x speedup, test set 5.030x speedup, val set 5.093x speedup, step: 12
JOB test speedup 3.4413527384619615
TPCH test speedup 5.24941394512023
TPCH skew test speedup 4.969972567402144
Epoch 31/300 |loss: 0.001337| train set 5.065x speedup, test set 4.970x speedup, val set 4.959x speedup, step: 13
JOB test speedup 3.5868610197472046
TPCH test speedup 5.274649019703022
TPCH skew test speedup 5.005275997161733
Epoch 32/300 |loss: 0.001475| train set 4.705x speedup, test set 5.005x speedup, val set 5.086x speedup, step: 14
JOB test speedup 2.994822951392361
TPCH test speedup 5.176731350736296
TPCH skew test speedup 4.910539723652312
Epoch 33/300 |loss: 0.001567| train set 5.066x speedup, test set 4.911x speedup, val set 5.017x speedup, step: 15
JOB test speedup 3.082255336361342
TPCH test speedup 5.1865639678457045
TPCH skew test speedup 4.9231139046779795
Epoch 34/300 |loss: 0.001359| train set 4.772x speedup, test set 4.923x speedup, val set 4.867x speedup, step: 16
JOB test speedup 3.1092841900404347
TPCH test speedup 5.274261751594315
TPCH skew test speedup 5.047530968746757
Epoch 35/300 |loss: 0.001293| train set 5.115x speedup, test set 5.048x speedup, val set 5.095x speedup, step: 17
JOB test speedup 3.019038165951841
TPCH test speedup 5.339058599073165
TPCH skew test speedup 5.034915644893707
Epoch 36/300 |loss: 0.001664| train set 5.037x speedup, test set 5.035x speedup, val set 5.060x speedup, step: 18
JOB test speedup 3.1128476256661224
TPCH test speedup 5.170027761660887
TPCH skew test speedup 4.898982051808191
Epoch 37/300 |loss: 0.001100| train set 5.034x speedup, test set 4.899x speedup, val set 5.006x speedup, step: 19
JOB test speedup 3.0533274520950453
TPCH test speedup 5.3255066072744945
TPCH skew test speedup 5.0073463805318905
Epoch 38/300 |loss: 0.001362| train set 4.773x speedup, test set 5.007x speedup, val set 5.065x speedup, step: 20
JOB test speedup 3.1188823646128396
TPCH test speedup 5.215803556376244
TPCH skew test speedup 4.875898165096824
Epoch 39/300 |loss: 0.001242| train set 5.050x speedup, test set 4.876x speedup, val set 5.094x speedup, step: 1
JOB test speedup 3.0463084126435596
TPCH test speedup 5.342005862306636
TPCH skew test speedup 5.048669271359355
Epoch 40/300 |loss: 0.001159| train set 5.114x speedup, test set 5.049x speedup, val set 5.028x speedup, step: 2
JOB test speedup 3.0531980561457783
TPCH test speedup 5.147498096603203
TPCH skew test speedup 4.9003770038650964
Epoch 41/300 |loss: 0.001124| train set 5.017x speedup, test set 4.900x speedup, val set 4.926x speedup, step: 3
JOB test speedup 3.0126282031347147
TPCH test speedup 5.192851292442031
TPCH skew test speedup 4.923548755025492
Epoch 42/300 |loss: 0.001057| train set 4.893x speedup, test set 4.924x speedup, val set 5.146x speedup, step: 4
JOB test speedup 0.8602316337770036
TPCH test speedup 5.048540152095133
TPCH skew test speedup 4.846569917803251
Epoch 43/300 |loss: 0.001058| train set 5.109x speedup, test set 4.847x speedup, val set 4.944x speedup, step: 5
JOB test speedup 2.9980574746761066
TPCH test speedup 5.131739834672946
TPCH skew test speedup 4.876275127698554
Epoch 44/300 |loss: 0.000968| train set 5.046x speedup, test set 4.876x speedup, val set 5.018x speedup, step: 6
JOB test speedup 3.0455257749587115
TPCH test speedup 4.673896367189062
TPCH skew test speedup 4.534868943727586
Epoch 45/300 |loss: 0.001095| train set 5.121x speedup, test set 4.535x speedup, val set 4.991x speedup, step: 7
JOB test speedup 3.0930761414538663
TPCH test speedup 5.202221916214635
TPCH skew test speedup 4.93489303719935
Epoch 46/300 |loss: 0.001264| train set 5.126x speedup, test set 4.935x speedup, val set 4.955x speedup, step: 8
JOB test speedup 0.8654946706803964
TPCH test speedup 5.14619827141923
TPCH skew test speedup 4.875898165096824
Epoch 47/300 |loss: 0.001010| train set 5.039x speedup, test set 4.876x speedup, val set 4.922x speedup, step: 9
JOB test speedup 3.0285960708908157
TPCH test speedup 5.340852093843562
TPCH skew test speedup 5.048045076323174
Epoch 48/300 |loss: 0.001010| train set 5.130x speedup, test set 5.048x speedup, val set 5.094x speedup, step: 10
JOB test speedup 3.0865345425700887
TPCH test speedup 4.7149953702544485
TPCH skew test speedup 4.569048884540531
Epoch 49/300 |loss: 0.000966| train set 5.053x speedup, test set 4.569x speedup, val set 4.533x speedup, step: 11
JOB test speedup 0.8613179113871119
TPCH test speedup 5.145127525542653
TPCH skew test speedup 4.8753159579157925
Epoch 50/300 |loss: 0.001007| train set 5.126x speedup, test set 4.875x speedup, val set 4.861x speedup, step: 12
JOB test speedup 3.062697555707315
TPCH test speedup 5.150455777898465
TPCH skew test speedup 4.881101880515924
Epoch 51/300 |loss: 0.001098| train set 5.084x speedup, test set 4.881x speedup, val set 5.076x speedup, step: 13
JOB test speedup 2.933732432744173
TPCH test speedup 5.235448371457585
TPCH skew test speedup 4.933040505217295
Epoch 52/300 |loss: 0.000963| train set 5.066x speedup, test set 4.933x speedup, val set 5.043x speedup, step: 14
JOB test speedup 3.0608373504806123
TPCH test speedup 5.199454694765696
TPCH skew test speedup 4.927697244400591
Epoch 53/300 |loss: 0.000936| train set 5.108x speedup, test set 4.928x speedup, val set 5.082x speedup, step: 15
JOB test speedup 3.0156501508997455
TPCH test speedup 5.151528742866104
TPCH skew test speedup 4.881685470502184
Epoch 54/300 |loss: 0.000821| train set 5.120x speedup, test set 4.882x speedup, val set 5.134x speedup, step: 1
JOB test speedup 0.8621460800271683
TPCH test speedup 5.160583049571729
TPCH skew test speedup 4.924739790802429
Epoch 55/300 |loss: 0.000957| train set 5.027x speedup, test set 4.925x speedup, val set 4.952x speedup, step: 2
JOB test speedup 3.03287445826269
TPCH test speedup 4.750042031805274
TPCH skew test speedup 4.604627528403277
Epoch 56/300 |loss: 0.000930| train set 5.121x speedup, test set 4.605x speedup, val set 4.688x speedup, step: 3
JOB test speedup 2.999418252208472
TPCH test speedup 5.394130358616275
TPCH skew test speedup 5.085137376275537
Epoch 57/300 |loss: 0.001028| train set 5.041x speedup, test set 5.085x speedup, val set 5.078x speedup, step: 4
JOB test speedup 2.931158427595248
TPCH test speedup 5.14619827141923
TPCH skew test speedup 4.875898165096824
Epoch 58/300 |loss: 0.000737| train set 5.113x speedup, test set 4.876x speedup, val set 4.902x speedup, step: 5
JOB test speedup 3.0222106747640263
TPCH test speedup 5.219365563377182
TPCH skew test speedup 4.8805500294448665
Epoch 59/300 |loss: 0.000896| train set 5.043x speedup, test set 4.881x speedup, val set 4.922x speedup, step: 6
JOB test speedup 2.9260368278883138
TPCH test speedup 5.103067816176803
TPCH skew test speedup 4.889677171487734
Epoch 60/300 |loss: 0.000861| train set 5.111x speedup, test set 4.890x speedup, val set 4.918x speedup, step: 7
JOB test speedup 0.8614144454240231
TPCH test speedup 5.228298375162781
TPCH skew test speedup 4.880756525448019
Epoch 61/300 |loss: 0.000859| train set 5.051x speedup, test set 4.881x speedup, val set 4.961x speedup, step: 8
JOB test speedup 3.0979277963880114
TPCH test speedup 5.22706243146685
TPCH skew test speedup 4.927038933396721
Epoch 62/300 |loss: 0.000824| train set 5.047x speedup, test set 4.927x speedup, val set 5.030x speedup, step: 9
JOB test speedup 0.8623855954975489
TPCH test speedup 5.329314048494805
TPCH skew test speedup 4.996898216220443
Epoch 63/300 |loss: 0.000909| train set 5.119x speedup, test set 4.997x speedup, val set 5.054x speedup, step: 10
early stopping at epoch 63
Training per epoch cost 3.495 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.875s, pg runtime 2.352s, speedup 2.688x
12, opt runtime 0.463s, model runtime 0.557s, pg runtime 0.557s, speedup 1.000x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 0.313s, model runtime 0.386s, pg runtime 0.313s, speedup 0.811x
16, opt runtime 0.441s, model runtime 0.474s, pg runtime 0.453s, speedup 0.956x
17, opt runtime 0.327s, model runtime 0.354s, pg runtime 0.354s, speedup 1.000x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 2.365s, pg runtime 3.540s, speedup 1.497x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.341s, pg runtime 0.891s, speedup 2.617x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.056s, pg runtime 0.020s, speedup 0.359x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.147s, pg runtime 0.137s, speedup 0.933x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 10.619s, pg runtime 16.134s, speedup 1.519x
08, opt runtime 6.284s, model runtime 9.232s, pg runtime 31.019s, speedup 3.360x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.462s, pg runtime 1.380s, speedup 0.944x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 11.165s, pg runtime 32.969s, speedup 2.953x
24, opt runtime 5.961s, model runtime 10.298s, pg runtime 31.210s, speedup 3.031x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 32.888s, pg runtime 608.707s, speedup 18.509x
32, opt runtime 24.706s, model runtime 32.983s, pg runtime 610.808s, speedup 18.519x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 8.538s, pg runtime 13.410s, speedup 1.571x
08, opt runtime 6.497s, model runtime 11.818s, pg runtime 12.849s, speedup 1.087x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.316s, model runtime 1.342s, pg runtime 1.352s, speedup 1.007x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
24, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 31.969s, pg runtime 609.432s, speedup 19.063x
32, opt runtime 24.451s, model runtime 32.240s, pg runtime 628.615s, speedup 19.498x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 54, train speedup 5.120, test speedup 3.016, val speedup 5.134
TPCH best validation speedup epoch: 54, train speedup 5.120, test speedup 5.152, val speedup 5.134
TPCH Skew best validation speedup epoch: 54, train speedup 5.120, test speedup 4.882, val speedup 5.134
execution cost 0:05:04.163271
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.611154, and there are 12152 training samples
in channel 9
JOB test speedup 1.0628511742006652
TPCH test speedup 2.657916292704591
TPCH skew test speedup 2.5294425281142203
Epoch 0/300 |loss: 0.031317| train set 2.449x speedup, test set 2.529x speedup, val set 2.450x speedup, step: 1
JOB test speedup 2.5678442945855955
TPCH test speedup 3.00457446279677
TPCH skew test speedup 2.6998286725018827
Epoch 1/300 |loss: 0.012859| train set 2.624x speedup, test set 2.700x speedup, val set 2.630x speedup, step: 2
JOB test speedup 2.264871052632729
TPCH test speedup 3.6723617192509326
TPCH skew test speedup 3.2330367831703897
Epoch 2/300 |loss: 0.009649| train set 3.009x speedup, test set 3.233x speedup, val set 3.174x speedup, step: 3
JOB test speedup 3.4162570630775138
TPCH test speedup 4.10434943846863
TPCH skew test speedup 3.9400523047278218
Epoch 3/300 |loss: 0.007184| train set 3.574x speedup, test set 3.940x speedup, val set 3.785x speedup, step: 4
JOB test speedup 3.0636814427371712
TPCH test speedup 3.838869501435855
TPCH skew test speedup 3.6171191413470036
Epoch 4/300 |loss: 0.006401| train set 3.467x speedup, test set 3.617x speedup, val set 3.574x speedup, step: 1
JOB test speedup 3.0291099340210663
TPCH test speedup 5.213470721953456
TPCH skew test speedup 4.822515197289484
Epoch 5/300 |loss: 0.005727| train set 3.762x speedup, test set 4.823x speedup, val set 3.979x speedup, step: 2
JOB test speedup 3.3746418159876947
TPCH test speedup 3.9586601353633184
TPCH skew test speedup 3.9314706720460673
Epoch 6/300 |loss: 0.004736| train set 3.567x speedup, test set 3.931x speedup, val set 3.546x speedup, step: 3
JOB test speedup 1.1585049529262694
TPCH test speedup 4.835408277256188
TPCH skew test speedup 4.55125352482958
Epoch 7/300 |loss: 0.004287| train set 3.837x speedup, test set 4.551x speedup, val set 4.743x speedup, step: 4
JOB test speedup 3.3177846283603563
TPCH test speedup 5.116266642121935
TPCH skew test speedup 4.896390307191906
Epoch 8/300 |loss: 0.003872| train set 4.356x speedup, test set 4.896x speedup, val set 5.093x speedup, step: 5
JOB test speedup 3.219411685102916
TPCH test speedup 4.2211910631507115
TPCH skew test speedup 4.073653575689733
Epoch 9/300 |loss: 0.003384| train set 4.132x speedup, test set 4.074x speedup, val set 3.702x speedup, step: 1
JOB test speedup 3.1975535809539637
TPCH test speedup 4.285579010150917
TPCH skew test speedup 4.136909703009731
Epoch 10/300 |loss: 0.003404| train set 3.915x speedup, test set 4.137x speedup, val set 4.030x speedup, step: 2
JOB test speedup 3.322387644946224
TPCH test speedup 5.385645636647275
TPCH skew test speedup 5.111204800228561
Epoch 11/300 |loss: 0.003430| train set 4.829x speedup, test set 5.111x speedup, val set 5.152x speedup, step: 3
JOB test speedup 3.038440905674037
TPCH test speedup 5.256107088611296
TPCH skew test speedup 4.9876620151692475
Epoch 12/300 |loss: 0.002906| train set 4.885x speedup, test set 4.988x speedup, val set 4.841x speedup, step: 4
JOB test speedup 3.244538501823846
TPCH test speedup 5.185376579047933
TPCH skew test speedup 4.925666938394119
Epoch 13/300 |loss: 0.002652| train set 4.778x speedup, test set 4.926x speedup, val set 4.197x speedup, step: 5
JOB test speedup 3.5161620837109804
TPCH test speedup 4.976233828152114
TPCH skew test speedup 4.710855874769003
Epoch 14/300 |loss: 0.002901| train set 4.429x speedup, test set 4.711x speedup, val set 3.905x speedup, step: 1
JOB test speedup 2.8722285208976723
TPCH test speedup 4.977348463239807
TPCH skew test speedup 4.8219279840613725
Epoch 15/300 |loss: 0.002299| train set 4.442x speedup, test set 4.822x speedup, val set 4.050x speedup, step: 2
JOB test speedup 3.008756917036942
TPCH test speedup 5.2747189101956184
TPCH skew test speedup 4.972070873518402
Epoch 16/300 |loss: 0.002255| train set 4.961x speedup, test set 4.972x speedup, val set 4.939x speedup, step: 3
JOB test speedup 3.0868104344333673
TPCH test speedup 5.224983324869848
TPCH skew test speedup 4.944518949375106
Epoch 17/300 |loss: 0.002143| train set 5.038x speedup, test set 4.945x speedup, val set 5.049x speedup, step: 4
JOB test speedup 3.582947274617622
TPCH test speedup 5.133841109594205
TPCH skew test speedup 4.924002898198296
Epoch 18/300 |loss: 0.002354| train set 4.627x speedup, test set 4.924x speedup, val set 4.827x speedup, step: 5
JOB test speedup 3.0704199505972505
TPCH test speedup 5.295131346045746
TPCH skew test speedup 5.056218313698294
Epoch 19/300 |loss: 0.002097| train set 4.846x speedup, test set 5.056x speedup, val set 5.037x speedup, step: 1
JOB test speedup 3.4718657734944562
TPCH test speedup 5.049332888095458
TPCH skew test speedup 4.889014376320991
Epoch 20/300 |loss: 0.001900| train set 5.005x speedup, test set 4.889x speedup, val set 4.962x speedup, step: 2
JOB test speedup 3.5599951441132935
TPCH test speedup 5.340387023754843
TPCH skew test speedup 4.997534498965325
Epoch 21/300 |loss: 0.002015| train set 5.115x speedup, test set 4.998x speedup, val set 5.083x speedup, step: 3
JOB test speedup 3.583669437684567
TPCH test speedup 5.212537650580231
TPCH skew test speedup 4.943100936401437
Epoch 22/300 |loss: 0.002272| train set 5.023x speedup, test set 4.943x speedup, val set 5.016x speedup, step: 4
JOB test speedup 2.8795211894662063
TPCH test speedup 5.3854612587502775
TPCH skew test speedup 5.053733133201362
Epoch 23/300 |loss: 0.001891| train set 5.020x speedup, test set 5.054x speedup, val set 5.139x speedup, step: 5
JOB test speedup 2.853480071807102
TPCH test speedup 4.193065413665974
TPCH skew test speedup 4.068484115100487
Epoch 24/300 |loss: 0.001809| train set 4.874x speedup, test set 4.068x speedup, val set 5.057x speedup, step: 1
JOB test speedup 2.919215416488368
TPCH test speedup 4.168480580297997
TPCH skew test speedup 4.019526215770134
Epoch 25/300 |loss: 0.001471| train set 5.110x speedup, test set 4.020x speedup, val set 4.038x speedup, step: 2
JOB test speedup 2.5758273477704225
TPCH test speedup 5.033404328400859
TPCH skew test speedup 4.833091314290117
Epoch 26/300 |loss: 0.001894| train set 5.013x speedup, test set 4.833x speedup, val set 4.891x speedup, step: 3
JOB test speedup 2.6171021398456924
TPCH test speedup 5.089234682953832
TPCH skew test speedup 4.805214636563894
Epoch 27/300 |loss: 0.001543| train set 4.829x speedup, test set 4.805x speedup, val set 4.811x speedup, step: 4
JOB test speedup 3.0278630345417605
TPCH test speedup 5.146328808127072
TPCH skew test speedup 4.874248584222847
Epoch 28/300 |loss: 0.001569| train set 5.023x speedup, test set 4.874x speedup, val set 5.015x speedup, step: 5
JOB test speedup 3.5720545727711324
TPCH test speedup 5.086330907984727
TPCH skew test speedup 4.8548671135191235
Epoch 29/300 |loss: 0.001415| train set 4.987x speedup, test set 4.855x speedup, val set 4.878x speedup, step: 6
JOB test speedup 2.5789568854593874
TPCH test speedup 5.323804196330329
TPCH skew test speedup 5.05175047283895
Epoch 30/300 |loss: 0.001506| train set 4.860x speedup, test set 5.052x speedup, val set 4.945x speedup, step: 7
JOB test speedup 2.5649990288606923
TPCH test speedup 5.084852270114493
TPCH skew test speedup 4.842113642240501
Epoch 31/300 |loss: 0.001382| train set 5.040x speedup, test set 4.842x speedup, val set 5.052x speedup, step: 8
JOB test speedup 3.063509483062537
TPCH test speedup 5.130086684433834
TPCH skew test speedup 4.94753494010936
Epoch 32/300 |loss: 0.001531| train set 4.642x speedup, test set 4.948x speedup, val set 4.994x speedup, step: 9
JOB test speedup 2.5733362446549632
TPCH test speedup 4.763009995872262
TPCH skew test speedup 4.619853819474066
Epoch 33/300 |loss: 0.001450| train set 5.132x speedup, test set 4.620x speedup, val set 5.018x speedup, step: 10
JOB test speedup 2.5204083485271402
TPCH test speedup 4.195746720523017
TPCH skew test speedup 4.063494398355463
Epoch 34/300 |loss: 0.001282| train set 5.012x speedup, test set 4.063x speedup, val set 4.011x speedup, step: 11
JOB test speedup 2.5689095281753813
TPCH test speedup 5.180335770825857
TPCH skew test speedup 4.914877247328158
Epoch 35/300 |loss: 0.001250| train set 5.087x speedup, test set 4.915x speedup, val set 5.077x speedup, step: 12
JOB test speedup 2.636806569938775
TPCH test speedup 5.20708024218423
TPCH skew test speedup 4.891003374448062
Epoch 36/300 |loss: 0.001603| train set 5.105x speedup, test set 4.891x speedup, val set 4.896x speedup, step: 13
JOB test speedup 2.464188347658493
TPCH test speedup 4.715894555369601
TPCH skew test speedup 4.529987393232958
Epoch 37/300 |loss: 0.001017| train set 5.039x speedup, test set 4.530x speedup, val set 4.841x speedup, step: 14
JOB test speedup 2.5931816317488527
TPCH test speedup 5.1024465420754685
TPCH skew test speedup 4.846569917803251
Epoch 38/300 |loss: 0.001109| train set 4.973x speedup, test set 4.847x speedup, val set 5.024x speedup, step: 15
JOB test speedup 2.518466021190664
TPCH test speedup 5.207669140258943
TPCH skew test speedup 4.938503637286672
Epoch 39/300 |loss: 0.001069| train set 5.123x speedup, test set 4.939x speedup, val set 5.085x speedup, step: 1
JOB test speedup 2.5397074471356444
TPCH test speedup 4.15068097530508
TPCH skew test speedup 3.9928868823726926
Epoch 40/300 |loss: 0.001063| train set 5.036x speedup, test set 3.993x speedup, val set 4.085x speedup, step: 2
JOB test speedup 2.4876450690454135
TPCH test speedup 4.768199673058128
TPCH skew test speedup 4.804038312303275
Epoch 41/300 |loss: 0.000953| train set 5.084x speedup, test set 4.804x speedup, val set 4.957x speedup, step: 3
JOB test speedup 2.9313714052391817
TPCH test speedup 4.693838870172343
TPCH skew test speedup 4.526636580184971
Epoch 42/300 |loss: 0.000975| train set 5.096x speedup, test set 4.527x speedup, val set 4.959x speedup, step: 4
JOB test speedup 2.8735914337063577
TPCH test speedup 4.682646957141118
TPCH skew test speedup 4.548310355299784
Epoch 43/300 |loss: 0.000975| train set 5.127x speedup, test set 4.548x speedup, val set 4.956x speedup, step: 5
JOB test speedup 2.459610742883169
TPCH test speedup 5.1840552754679985
TPCH skew test speedup 4.929449796559031
Epoch 44/300 |loss: 0.000839| train set 4.980x speedup, test set 4.929x speedup, val set 4.885x speedup, step: 6
JOB test speedup 2.589983871218978
TPCH test speedup 4.650797837148797
TPCH skew test speedup 4.561635924892085
Epoch 45/300 |loss: 0.001051| train set 5.055x speedup, test set 4.562x speedup, val set 4.504x speedup, step: 7
JOB test speedup 2.514407575157385
TPCH test speedup 5.207669140258943
TPCH skew test speedup 4.940821319451692
Epoch 46/300 |loss: 0.001004| train set 5.121x speedup, test set 4.941x speedup, val set 4.957x speedup, step: 8
JOB test speedup 2.5375410898643525
TPCH test speedup 4.678892353983047
TPCH skew test speedup 4.5437213919717445
Epoch 47/300 |loss: 0.000814| train set 5.079x speedup, test set 4.544x speedup, val set 4.796x speedup, step: 9
JOB test speedup 2.866744269193691
TPCH test speedup 4.763632624028808
TPCH skew test speedup 4.620381901287964
Epoch 48/300 |loss: 0.000796| train set 5.107x speedup, test set 4.620x speedup, val set 5.102x speedup, step: 10
JOB test speedup 2.382482435580892
TPCH test speedup 4.767463820722604
TPCH skew test speedup 4.626534145801839
Epoch 49/300 |loss: 0.000860| train set 5.132x speedup, test set 4.627x speedup, val set 4.611x speedup, step: 11
JOB test speedup 2.987793474906012
TPCH test speedup 4.750954635218307
TPCH skew test speedup 4.6051468760358425
Epoch 50/300 |loss: 0.000912| train set 5.124x speedup, test set 4.605x speedup, val set 4.890x speedup, step: 12
JOB test speedup 2.88886442743228
TPCH test speedup 4.7345086640772225
TPCH skew test speedup 4.598415037385426
Epoch 51/300 |loss: 0.000808| train set 5.036x speedup, test set 4.598x speedup, val set 4.911x speedup, step: 13
JOB test speedup 2.868236696514834
TPCH test speedup 4.762898180529176
TPCH skew test speedup 4.6213356790844085
Epoch 52/300 |loss: 0.000813| train set 5.073x speedup, test set 4.621x speedup, val set 4.948x speedup, step: 14
JOB test speedup 2.849103718742641
TPCH test speedup 5.179870470205383
TPCH skew test speedup 4.904262716056124
Epoch 53/300 |loss: 0.000762| train set 5.055x speedup, test set 4.904x speedup, val set 4.882x speedup, step: 15
JOB test speedup 3.0294699597947035
TPCH test speedup 4.762898180529176
TPCH skew test speedup 4.6213356790844085
Epoch 54/300 |loss: 0.000785| train set 5.107x speedup, test set 4.621x speedup, val set 4.953x speedup, step: 16
JOB test speedup 2.872993047986493
TPCH test speedup 5.1714710825273205
TPCH skew test speedup 4.949234506811665
Epoch 55/300 |loss: 0.000783| train set 5.002x speedup, test set 4.949x speedup, val set 4.867x speedup, step: 17
JOB test speedup 3.0262769452959932
TPCH test speedup 3.9048200859907265
TPCH skew test speedup 3.834373588159041
Epoch 56/300 |loss: 0.000921| train set 5.119x speedup, test set 3.834x speedup, val set 3.760x speedup, step: 18
JOB test speedup 2.5810574566127995
TPCH test speedup 4.750954635218307
TPCH skew test speedup 4.6051468760358425
Epoch 57/300 |loss: 0.000782| train set 5.132x speedup, test set 4.605x speedup, val set 4.554x speedup, step: 19
JOB test speedup 2.610390070330989
TPCH test speedup 3.881105019072481
TPCH skew test speedup 3.782125113138614
Epoch 58/300 |loss: 0.000598| train set 5.116x speedup, test set 3.782x speedup, val set 4.031x speedup, step: 20
JOB test speedup 2.927256275432669
TPCH test speedup 4.751685399641225
TPCH skew test speedup 4.568627708786834
Epoch 59/300 |loss: 0.000811| train set 5.085x speedup, test set 4.569x speedup, val set 4.464x speedup, step: 21
JOB test speedup 2.876771807607514
TPCH test speedup 4.762898180529176
TPCH skew test speedup 4.79946225278825
Epoch 60/300 |loss: 0.000686| train set 5.125x speedup, test set 4.799x speedup, val set 4.967x speedup, step: 22
JOB test speedup 2.604511089654119
TPCH test speedup 4.755497395407567
TPCH skew test speedup 4.610308965152273
Epoch 61/300 |loss: 0.000668| train set 5.037x speedup, test set 4.610x speedup, val set 4.912x speedup, step: 23
JOB test speedup 2.6214241527368487
TPCH test speedup 3.8995382130428387
TPCH skew test speedup 3.838697826242534
Epoch 62/300 |loss: 0.000620| train set 5.076x speedup, test set 3.839x speedup, val set 4.020x speedup, step: 24
JOB test speedup 2.5716218865820926
TPCH test speedup 3.893212892703299
TPCH skew test speedup 3.830360719706717
Epoch 63/300 |loss: 0.000761| train set 5.124x speedup, test set 3.830x speedup, val set 4.889x speedup, step: 25
JOB test speedup 2.892793611590112
TPCH test speedup 4.730650141123897
TPCH skew test speedup 3.8190032895872896
Epoch 64/300 |loss: 0.000784| train set 5.110x speedup, test set 3.819x speedup, val set 4.901x speedup, step: 26
JOB test speedup 2.877917522713314
TPCH test speedup 4.762898180529176
TPCH skew test speedup 4.6213356790844085
Epoch 65/300 |loss: 0.000825| train set 5.123x speedup, test set 4.621x speedup, val set 4.893x speedup, step: 27
JOB test speedup 2.6044823763212985
TPCH test speedup 4.767463820722604
TPCH skew test speedup 4.626534145801839
Epoch 66/300 |loss: 0.000853| train set 5.018x speedup, test set 4.627x speedup, val set 5.082x speedup, step: 28
early stopping at epoch 66
Training per epoch cost 3.507 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.660s, pg runtime 3.549s, speedup 0.463x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.875s, pg runtime 2.352s, speedup 2.688x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.474s, pg runtime 0.453s, speedup 0.956x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 3.011s, pg runtime 3.540s, speedup 1.176x
20, opt runtime 0.061s, model runtime 0.094s, pg runtime 0.086s, speedup 0.915x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.231s, pg runtime 0.891s, speedup 3.855x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.056s, pg runtime 0.020s, speedup 0.359x
27, opt runtime 0.060s, model runtime 0.060s, pg runtime 0.112s, speedup 1.889x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.251s, pg runtime 0.250s, speedup 0.995x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.462s, pg runtime 1.380s, speedup 0.944x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 11.165s, pg runtime 32.969s, speedup 2.953x
24, opt runtime 5.961s, model runtime 10.298s, pg runtime 31.210s, speedup 3.031x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 32.888s, pg runtime 608.707s, speedup 18.509x
32, opt runtime 24.706s, model runtime 32.983s, pg runtime 610.808s, speedup 18.519x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.316s, model runtime 1.342s, pg runtime 1.352s, speedup 1.007x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
24, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
31, opt runtime 24.136s, model runtime 31.969s, pg runtime 609.432s, speedup 19.063x
32, opt runtime 24.451s, model runtime 32.240s, pg runtime 628.615s, speedup 19.498x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 39, train speedup 5.123, test speedup 2.518, val speedup 5.085
TPCH best validation speedup epoch: 39, train speedup 5.123, test speedup 5.208, val speedup 5.085
TPCH Skew best validation speedup epoch: 39, train speedup 5.123, test speedup 4.939, val speedup 5.085
execution cost 0:05:18.262042
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.844642, and there are 12152 training samples
in channel 9
JOB test speedup 1.0628511742006652
TPCH test speedup 2.657916292704591
TPCH skew test speedup 2.5294425281142203
Epoch 0/300 |loss: 0.031317| train set 2.449x speedup, test set 2.529x speedup, val set 2.450x speedup, step: 1
JOB test speedup 2.5678442945855955
TPCH test speedup 3.00457446279677
TPCH skew test speedup 2.6998286725018827
Epoch 1/300 |loss: 0.012859| train set 2.624x speedup, test set 2.700x speedup, val set 2.630x speedup, step: 2
JOB test speedup 2.563022960997275
TPCH test speedup 3.838005569022203
TPCH skew test speedup 3.353234315778562
Epoch 2/300 |loss: 0.009676| train set 3.139x speedup, test set 3.353x speedup, val set 3.408x speedup, step: 3
JOB test speedup 3.390773143170455
TPCH test speedup 3.3938215039439528
TPCH skew test speedup 3.2182788505410973
Epoch 3/300 |loss: 0.007240| train set 3.194x speedup, test set 3.218x speedup, val set 3.255x speedup, step: 4
JOB test speedup 3.4526684933610756
TPCH test speedup 3.91662107957066
TPCH skew test speedup 3.706881243038346
Epoch 4/300 |loss: 0.006392| train set 3.754x speedup, test set 3.707x speedup, val set 3.653x speedup, step: 1
JOB test speedup 3.040478227835962
TPCH test speedup 4.052940472046101
TPCH skew test speedup 3.9584987756524246
Epoch 5/300 |loss: 0.005956| train set 3.796x speedup, test set 3.958x speedup, val set 3.994x speedup, step: 2
JOB test speedup 3.3764682347462998
TPCH test speedup 5.041116799435407
TPCH skew test speedup 4.173344211600549
Epoch 6/300 |loss: 0.004693| train set 3.726x speedup, test set 4.173x speedup, val set 4.756x speedup, step: 3
JOB test speedup 1.1680798472419496
TPCH test speedup 4.976049812654294
TPCH skew test speedup 4.790181483758808
Epoch 7/300 |loss: 0.004348| train set 3.971x speedup, test set 4.790x speedup, val set 4.196x speedup, step: 4
JOB test speedup 1.174407488550965
TPCH test speedup 5.111893891627017
TPCH skew test speedup 3.981854364057356
Epoch 8/300 |loss: 0.003771| train set 3.961x speedup, test set 3.982x speedup, val set 4.952x speedup, step: 5
JOB test speedup 1.1975742594076748
TPCH test speedup 3.7883943593377425
TPCH skew test speedup 3.252818042249261
Epoch 9/300 |loss: 0.003417| train set 3.394x speedup, test set 3.253x speedup, val set 3.424x speedup, step: 6
JOB test speedup 1.1802740313099644
TPCH test speedup 4.190897278949719
TPCH skew test speedup 4.065722096522123
Epoch 10/300 |loss: 0.003371| train set 3.548x speedup, test set 4.066x speedup, val set 3.674x speedup, step: 7
JOB test speedup 1.1054855291923489
TPCH test speedup 5.0766048978004985
TPCH skew test speedup 4.570652290806565
Epoch 11/300 |loss: 0.003273| train set 4.486x speedup, test set 4.571x speedup, val set 4.804x speedup, step: 8
JOB test speedup 3.1757142406695853
TPCH test speedup 5.354021635794959
TPCH skew test speedup 5.059334142287533
Epoch 12/300 |loss: 0.003113| train set 4.890x speedup, test set 5.059x speedup, val set 5.131x speedup, step: 9
JOB test speedup 1.137443625470908
TPCH test speedup 5.29380796261104
TPCH skew test speedup 5.012456999931372
Epoch 13/300 |loss: 0.002775| train set 4.942x speedup, test set 5.012x speedup, val set 4.946x speedup, step: 10
JOB test speedup 3.5514166575108783
TPCH test speedup 4.622328565640169
TPCH skew test speedup 4.336757750575007
Epoch 14/300 |loss: 0.002947| train set 3.924x speedup, test set 4.337x speedup, val set 4.194x speedup, step: 1
JOB test speedup 3.128596422017783
TPCH test speedup 4.698905497978588
TPCH skew test speedup 4.382637219444199
Epoch 15/300 |loss: 0.002349| train set 4.911x speedup, test set 4.383x speedup, val set 4.406x speedup, step: 2
JOB test speedup 3.128943462412137
TPCH test speedup 5.288784125832788
TPCH skew test speedup 5.00515105913809
Epoch 16/300 |loss: 0.002381| train set 4.621x speedup, test set 5.005x speedup, val set 4.860x speedup, step: 3
JOB test speedup 3.1594906895412485
TPCH test speedup 5.311308672693911
TPCH skew test speedup 5.034330430353337
Epoch 17/300 |loss: 0.002224| train set 4.979x speedup, test set 5.034x speedup, val set 4.965x speedup, step: 4
JOB test speedup 3.603029004718622
TPCH test speedup 5.270293231594696
TPCH skew test speedup 5.007118830037991
Epoch 18/300 |loss: 0.002463| train set 4.979x speedup, test set 5.007x speedup, val set 5.030x speedup, step: 5
JOB test speedup 2.6826518327864006
TPCH test speedup 5.419122845203747
TPCH skew test speedup 5.1115141335972645
Epoch 19/300 |loss: 0.002159| train set 4.980x speedup, test set 5.112x speedup, val set 4.876x speedup, step: 1
JOB test speedup 3.156986555152218
TPCH test speedup 5.448421369109634
TPCH skew test speedup 5.1491946989747825
Epoch 20/300 |loss: 0.001942| train set 5.095x speedup, test set 5.149x speedup, val set 5.142x speedup, step: 2
JOB test speedup 2.6669810200633477
TPCH test speedup 5.273740777749668
TPCH skew test speedup 4.9768300318092225
Epoch 21/300 |loss: 0.002127| train set 5.119x speedup, test set 4.977x speedup, val set 5.053x speedup, step: 3
JOB test speedup 3.5919430102582695
TPCH test speedup 5.190683746533986
TPCH skew test speedup 4.900288932544527
Epoch 22/300 |loss: 0.002295| train set 4.944x speedup, test set 4.900x speedup, val set 5.070x speedup, step: 4
JOB test speedup 3.1238486422337775
TPCH test speedup 5.38594000375694
TPCH skew test speedup 5.054503853375909
Epoch 23/300 |loss: 0.002005| train set 4.976x speedup, test set 5.055x speedup, val set 5.069x speedup, step: 5
JOB test speedup 2.534119079016834
TPCH test speedup 5.200304327751453
TPCH skew test speedup 4.933791962303204
Epoch 24/300 |loss: 0.001980| train set 4.871x speedup, test set 4.934x speedup, val set 4.920x speedup, step: 1
JOB test speedup 3.0802633371476973
TPCH test speedup 5.185271979535997
TPCH skew test speedup 4.923220579181153
Epoch 25/300 |loss: 0.001592| train set 5.097x speedup, test set 4.923x speedup, val set 4.944x speedup, step: 2
JOB test speedup 3.0754972758209664
TPCH test speedup 5.1990519425856885
TPCH skew test speedup 4.911503058784598
Epoch 26/300 |loss: 0.001975| train set 5.060x speedup, test set 4.912x speedup, val set 4.887x speedup, step: 3
JOB test speedup 3.1586141381192667
TPCH test speedup 5.146815685543382
TPCH skew test speedup 4.86491764553245
Epoch 27/300 |loss: 0.001606| train set 5.025x speedup, test set 4.865x speedup, val set 4.687x speedup, step: 4
JOB test speedup 3.1471641827453953
TPCH test speedup 5.323989390258576
TPCH skew test speedup 5.0267720684600015
Epoch 28/300 |loss: 0.001516| train set 4.906x speedup, test set 5.027x speedup, val set 4.860x speedup, step: 5
JOB test speedup 3.069725463846521
TPCH test speedup 5.22996528948704
TPCH skew test speedup 4.965315957387073
Epoch 29/300 |loss: 0.001444| train set 5.023x speedup, test set 4.965x speedup, val set 5.099x speedup, step: 1
JOB test speedup 3.14230437582093
TPCH test speedup 5.151161839885002
TPCH skew test speedup 4.894457460116102
Epoch 30/300 |loss: 0.001536| train set 5.069x speedup, test set 4.894x speedup, val set 4.873x speedup, step: 2
JOB test speedup 3.0657101383292344
TPCH test speedup 5.22996528948704
TPCH skew test speedup 4.965315957387073
Epoch 31/300 |loss: 0.001392| train set 5.024x speedup, test set 4.965x speedup, val set 4.947x speedup, step: 3
JOB test speedup 3.153010447673242
TPCH test speedup 5.49497881778907
TPCH skew test speedup 5.113551416076581
Epoch 32/300 |loss: 0.001675| train set 4.851x speedup, test set 5.114x speedup, val set 4.979x speedup, step: 4
JOB test speedup 3.0492253868155217
TPCH test speedup 5.202221916214635
TPCH skew test speedup 4.93489303719935
Epoch 33/300 |loss: 0.001489| train set 5.032x speedup, test set 4.935x speedup, val set 5.017x speedup, step: 5
JOB test speedup 3.077841685475585
TPCH test speedup 5.174616912617547
TPCH skew test speedup 4.896092706152717
Epoch 34/300 |loss: 0.001509| train set 4.810x speedup, test set 4.896x speedup, val set 4.864x speedup, step: 6
JOB test speedup 2.955615251099034
TPCH test speedup 5.466745361896804
TPCH skew test speedup 5.133672781223296
Epoch 35/300 |loss: 0.001248| train set 5.083x speedup, test set 5.134x speedup, val set 5.002x speedup, step: 7
JOB test speedup 3.0990061866909793
TPCH test speedup 5.22202161339141
TPCH skew test speedup 4.890815250076435
Epoch 36/300 |loss: 0.001747| train set 5.033x speedup, test set 4.891x speedup, val set 4.807x speedup, step: 8
JOB test speedup 3.120182469543612
TPCH test speedup 5.127301068859327
TPCH skew test speedup 4.869441248879203
Epoch 37/300 |loss: 0.001076| train set 5.030x speedup, test set 4.869x speedup, val set 4.794x speedup, step: 9
JOB test speedup 3.1515077317118654
TPCH test speedup 5.152020916001756
TPCH skew test speedup 4.893387627100442
Epoch 38/300 |loss: 0.001162| train set 5.037x speedup, test set 4.893x speedup, val set 5.162x speedup, step: 10
JOB test speedup 3.0298388098862383
TPCH test speedup 5.3204464869617265
TPCH skew test speedup 5.016077654600716
Epoch 39/300 |loss: 0.001141| train set 5.080x speedup, test set 5.016x speedup, val set 5.176x speedup, step: 1
JOB test speedup 2.9806691731865853
TPCH test speedup 5.294715280820623
TPCH skew test speedup 5.01133496620491
Epoch 40/300 |loss: 0.001151| train set 5.120x speedup, test set 5.011x speedup, val set 4.942x speedup, step: 2
JOB test speedup 3.119987987667586
TPCH test speedup 5.230100110448123
TPCH skew test speedup 4.9618744889423185
Epoch 41/300 |loss: 0.001005| train set 5.049x speedup, test set 4.962x speedup, val set 4.908x speedup, step: 3
JOB test speedup 3.079511633967434
TPCH test speedup 5.294715280820623
TPCH skew test speedup 5.01133496620491
Epoch 42/300 |loss: 0.000990| train set 5.078x speedup, test set 5.011x speedup, val set 5.048x speedup, step: 4
JOB test speedup 2.959836742093187
TPCH test speedup 5.3204464869617265
TPCH skew test speedup 5.016077654600716
Epoch 43/300 |loss: 0.001007| train set 5.135x speedup, test set 5.016x speedup, val set 5.176x speedup, step: 5
JOB test speedup 3.0238601569797083
TPCH test speedup 5.156502604230605
TPCH skew test speedup 4.900288932544527
Epoch 44/300 |loss: 0.000979| train set 5.056x speedup, test set 4.900x speedup, val set 4.840x speedup, step: 6
JOB test speedup 3.094864309155565
TPCH test speedup 4.776812478545596
TPCH skew test speedup 4.790315768389633
Epoch 45/300 |loss: 0.001073| train set 5.109x speedup, test set 4.790x speedup, val set 5.123x speedup, step: 7
JOB test speedup 2.6280756714303837
TPCH test speedup 5.241988502700467
TPCH skew test speedup 4.9480019669802076
Epoch 46/300 |loss: 0.001124| train set 5.115x speedup, test set 4.948x speedup, val set 4.946x speedup, step: 8
JOB test speedup 2.582691869475833
TPCH test speedup 5.218533466685964
TPCH skew test speedup 4.925140997129048
Epoch 47/300 |loss: 0.000947| train set 5.124x speedup, test set 4.925x speedup, val set 4.992x speedup, step: 9
JOB test speedup 3.1530490808001255
TPCH test speedup 5.238914020939842
TPCH skew test speedup 4.943773491078598
Epoch 48/300 |loss: 0.000863| train set 5.023x speedup, test set 4.944x speedup, val set 5.041x speedup, step: 10
JOB test speedup 2.982739433925225
TPCH test speedup 5.2406447642910035
TPCH skew test speedup 4.948315466775725
Epoch 49/300 |loss: 0.000918| train set 5.132x speedup, test set 4.948x speedup, val set 5.175x speedup, step: 11
JOB test speedup 3.1373418234729873
TPCH test speedup 5.22689444531669
TPCH skew test speedup 4.952684717503884
Epoch 50/300 |loss: 0.000919| train set 5.129x speedup, test set 4.953x speedup, val set 4.992x speedup, step: 12
JOB test speedup 2.5659960965462445
TPCH test speedup 5.1465865752978734
TPCH skew test speedup 4.8949683584045545
Epoch 51/300 |loss: 0.000903| train set 5.056x speedup, test set 4.895x speedup, val set 4.860x speedup, step: 13
JOB test speedup 2.5334845934792507
TPCH test speedup 5.241099163831182
TPCH skew test speedup 4.949095816408622
Epoch 52/300 |loss: 0.000864| train set 5.123x speedup, test set 4.949x speedup, val set 5.162x speedup, step: 14
JOB test speedup 2.9142344591459235
TPCH test speedup 5.140396307009338
TPCH skew test speedup 4.9021179762101585
Epoch 53/300 |loss: 0.000836| train set 4.896x speedup, test set 4.902x speedup, val set 5.023x speedup, step: 15
JOB test speedup 2.5688222007272445
TPCH test speedup 5.156502604230605
TPCH skew test speedup 4.900288932544527
Epoch 54/300 |loss: 0.000749| train set 5.027x speedup, test set 4.900x speedup, val set 4.983x speedup, step: 16
JOB test speedup 2.559741808649278
TPCH test speedup 5.042956183689562
TPCH skew test speedup 4.814953794840521
Epoch 55/300 |loss: 0.000791| train set 5.096x speedup, test set 4.815x speedup, val set 4.867x speedup, step: 17
JOB test speedup 2.6386935525784883
TPCH test speedup 4.927016226884679
TPCH skew test speedup 4.775366599260506
Epoch 56/300 |loss: 0.000982| train set 4.872x speedup, test set 4.775x speedup, val set 4.736x speedup, step: 18
JOB test speedup 3.1070390359694056
TPCH test speedup 5.208547169175358
TPCH skew test speedup 4.938016890511606
Epoch 57/300 |loss: 0.000819| train set 5.040x speedup, test set 4.938x speedup, val set 4.958x speedup, step: 19
JOB test speedup 2.6549739441296225
TPCH test speedup 4.208235429961886
TPCH skew test speedup 4.063135271960924
Epoch 58/300 |loss: 0.000614| train set 5.034x speedup, test set 4.063x speedup, val set 4.790x speedup, step: 20
JOB test speedup 2.6194563006082308
TPCH test speedup 5.208547169175358
TPCH skew test speedup 4.939731124222303
Epoch 59/300 |loss: 0.001000| train set 5.042x speedup, test set 4.940x speedup, val set 4.791x speedup, step: 21
JOB test speedup 2.571341727905164
TPCH test speedup 5.156633664220836
TPCH skew test speedup 4.898622809773728
Epoch 60/300 |loss: 0.000798| train set 5.118x speedup, test set 4.899x speedup, val set 5.087x speedup, step: 22
JOB test speedup 0.8661534963734409
TPCH test speedup 5.286004575418296
TPCH skew test speedup 4.986671960672547
Epoch 61/300 |loss: 0.000773| train set 5.032x speedup, test set 4.987x speedup, val set 4.949x speedup, step: 23
JOB test speedup 3.1172490307896763
TPCH test speedup 5.233294925043489
TPCH skew test speedup 4.945386948051826
Epoch 62/300 |loss: 0.000762| train set 5.120x speedup, test set 4.945x speedup, val set 4.892x speedup, step: 24
JOB test speedup 2.5916813764467594
TPCH test speedup 5.2436837489562125
TPCH skew test speedup 4.949117098130806
Epoch 63/300 |loss: 0.000797| train set 5.105x speedup, test set 4.949x speedup, val set 4.990x speedup, step: 25
early stopping at epoch 63
Training per epoch cost 3.496 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 0.463s, model runtime 0.557s, pg runtime 0.557s, speedup 1.000x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.198s, pg runtime 0.153s, speedup 0.772x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.327s, pg runtime 0.354s, speedup 1.083x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 3.011s, pg runtime 3.540s, speedup 1.176x
20, opt runtime 0.061s, model runtime 0.094s, pg runtime 0.086s, speedup 0.915x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.251s, pg runtime 0.891s, speedup 3.554x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.147s, pg runtime 0.137s, speedup 0.933x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.353s, pg runtime 1.380s, speedup 1.021x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
28, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 32.888s, pg runtime 608.707s, speedup 18.509x
32, opt runtime 24.706s, model runtime 32.983s, pg runtime 610.808s, speedup 18.519x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.316s, model runtime 1.316s, pg runtime 1.352s, speedup 1.027x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 9.098s, pg runtime 6.749s, speedup 0.742x
28, opt runtime 7.213s, model runtime 10.591s, pg runtime 7.213s, speedup 0.681x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 31.969s, pg runtime 609.432s, speedup 19.063x
32, opt runtime 24.451s, model runtime 32.240s, pg runtime 628.615s, speedup 19.498x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 39, train speedup 5.080, test speedup 3.030, val speedup 5.176
TPCH best validation speedup epoch: 39, train speedup 5.080, test speedup 5.320, val speedup 5.176
TPCH Skew best validation speedup epoch: 39, train speedup 5.080, test speedup 5.016, val speedup 5.176
execution cost 0:05:04.969555
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.584588, and there are 12152 training samples
in channel 9
JOB test speedup 1.0628511742006652
TPCH test speedup 2.657916292704591
TPCH skew test speedup 2.5294425281142203
Epoch 0/300 |loss: 0.031317| train set 2.449x speedup, test set 2.529x speedup, val set 2.450x speedup, step: 1
JOB test speedup 2.5668296721341908
TPCH test speedup 2.832778301280426
TPCH skew test speedup 2.5567417923667346
Epoch 1/300 |loss: 0.012856| train set 2.624x speedup, test set 2.557x speedup, val set 2.632x speedup, step: 2
JOB test speedup 2.357129953906954
TPCH test speedup 3.552308757849066
TPCH skew test speedup 3.1016999014172604
Epoch 2/300 |loss: 0.009699| train set 3.027x speedup, test set 3.102x speedup, val set 3.214x speedup, step: 3
JOB test speedup 3.443494633015299
TPCH test speedup 3.3947619010693915
TPCH skew test speedup 3.2189839327325935
Epoch 3/300 |loss: 0.007284| train set 3.053x speedup, test set 3.219x speedup, val set 3.105x speedup, step: 4
JOB test speedup 3.2910388152623735
TPCH test speedup 4.254230806318514
TPCH skew test speedup 3.976642830836861
Epoch 4/300 |loss: 0.006366| train set 3.704x speedup, test set 3.977x speedup, val set 3.521x speedup, step: 1
JOB test speedup 3.4231121959947735
TPCH test speedup 3.9950653094041306
TPCH skew test speedup 3.9054114036779186
Epoch 5/300 |loss: 0.005515| train set 3.892x speedup, test set 3.905x speedup, val set 3.998x speedup, step: 2
JOB test speedup 3.41672404842907
TPCH test speedup 3.9962725139116784
TPCH skew test speedup 3.40335382113829
Epoch 6/300 |loss: 0.004819| train set 3.711x speedup, test set 3.403x speedup, val set 3.911x speedup, step: 3
JOB test speedup 1.172938156948652
TPCH test speedup 4.642756492315128
TPCH skew test speedup 4.294028256353222
Epoch 7/300 |loss: 0.004218| train set 4.159x speedup, test set 4.294x speedup, val set 4.433x speedup, step: 4
JOB test speedup 3.330551675034113
TPCH test speedup 5.085010224587634
TPCH skew test speedup 4.69759896001503
Epoch 8/300 |loss: 0.003994| train set 4.311x speedup, test set 4.698x speedup, val set 4.939x speedup, step: 5
JOB test speedup 1.1967348843572105
TPCH test speedup 4.105250298712862
TPCH skew test speedup 3.992245144088287
Epoch 9/300 |loss: 0.003454| train set 3.810x speedup, test set 3.992x speedup, val set 3.683x speedup, step: 1
JOB test speedup 1.1739540954457168
TPCH test speedup 3.9764760259909986
TPCH skew test speedup 3.982000618282658
Epoch 10/300 |loss: 0.003406| train set 3.679x speedup, test set 3.982x speedup, val set 4.065x speedup, step: 2
JOB test speedup 1.1855662106218663
TPCH test speedup 5.1741330860275765
TPCH skew test speedup 4.947593653140936
Epoch 11/300 |loss: 0.003307| train set 5.088x speedup, test set 4.948x speedup, val set 5.024x speedup, step: 3
JOB test speedup 3.51316410079047
TPCH test speedup 5.314562904664242
TPCH skew test speedup 5.049409533150775
Epoch 12/300 |loss: 0.003093| train set 4.735x speedup, test set 5.049x speedup, val set 4.554x speedup, step: 4
JOB test speedup 3.509014148151432
TPCH test speedup 5.276623148424563
TPCH skew test speedup 5.027253511125562
Epoch 13/300 |loss: 0.002740| train set 5.077x speedup, test set 5.027x speedup, val set 5.036x speedup, step: 5
JOB test speedup 3.5073117705612695
TPCH test speedup 4.1280099534738985
TPCH skew test speedup 4.006656743838733
Epoch 14/300 |loss: 0.002882| train set 4.879x speedup, test set 4.007x speedup, val set 3.940x speedup, step: 1
JOB test speedup 3.2934313559536696
TPCH test speedup 5.263598791691108
TPCH skew test speedup 5.0310679178405655
Epoch 15/300 |loss: 0.002376| train set 4.981x speedup, test set 5.031x speedup, val set 4.085x speedup, step: 2
JOB test speedup 3.5316976756665714
TPCH test speedup 5.269916721991771
TPCH skew test speedup 4.9504362939252795
Epoch 16/300 |loss: 0.002246| train set 4.472x speedup, test set 4.950x speedup, val set 4.325x speedup, step: 3
JOB test speedup 3.588559060448934
TPCH test speedup 5.228413634394435
TPCH skew test speedup 4.962483660991144
Epoch 17/300 |loss: 0.002249| train set 5.124x speedup, test set 4.962x speedup, val set 5.091x speedup, step: 4
JOB test speedup 3.3802885509699268
TPCH test speedup 5.015691539551729
TPCH skew test speedup 4.797105704357279
Epoch 18/300 |loss: 0.002633| train set 4.902x speedup, test set 4.797x speedup, val set 5.003x speedup, step: 5
JOB test speedup 3.4971035769387164
TPCH test speedup 4.772774461133548
TPCH skew test speedup 3.78331310738997
Epoch 19/300 |loss: 0.002311| train set 4.652x speedup, test set 3.783x speedup, val set 3.884x speedup, step: 6
JOB test speedup 3.5019917757733734
TPCH test speedup 5.353573857827191
TPCH skew test speedup 5.09571737827561
Epoch 20/300 |loss: 0.002007| train set 5.097x speedup, test set 5.096x speedup, val set 5.056x speedup, step: 7
JOB test speedup 3.4011565836227904
TPCH test speedup 5.365469739759256
TPCH skew test speedup 5.074247682914698
Epoch 21/300 |loss: 0.002075| train set 5.098x speedup, test set 5.074x speedup, val set 5.088x speedup, step: 8
JOB test speedup 3.413962623522427
TPCH test speedup 5.198729651071483
TPCH skew test speedup 4.960001797213005
Epoch 22/300 |loss: 0.002352| train set 4.909x speedup, test set 4.960x speedup, val set 5.005x speedup, step: 9
JOB test speedup 3.5458234158884165
TPCH test speedup 5.366949806375103
TPCH skew test speedup 5.030783586240315
Epoch 23/300 |loss: 0.001932| train set 5.079x speedup, test set 5.031x speedup, val set 5.106x speedup, step: 10
JOB test speedup 3.624021598108541
TPCH test speedup 5.198927165825068
TPCH skew test speedup 4.9611056232262
Epoch 24/300 |loss: 0.001906| train set 4.792x speedup, test set 4.961x speedup, val set 4.909x speedup, step: 1
JOB test speedup 3.554955001262505
TPCH test speedup 5.202221916214635
TPCH skew test speedup 4.93489303719935
Epoch 25/300 |loss: 0.001582| train set 5.106x speedup, test set 4.935x speedup, val set 4.956x speedup, step: 2
JOB test speedup 3.5405402458032005
TPCH test speedup 5.2120930103218335
TPCH skew test speedup 4.9792277670768
Epoch 26/300 |loss: 0.001924| train set 5.064x speedup, test set 4.979x speedup, val set 4.028x speedup, step: 3
JOB test speedup 3.5313412150279775
TPCH test speedup 5.14235081265595
TPCH skew test speedup 4.8581155414311965
Epoch 27/300 |loss: 0.001632| train set 5.028x speedup, test set 4.858x speedup, val set 4.832x speedup, step: 4
JOB test speedup 3.4908839279142025
TPCH test speedup 5.188690180246857
TPCH skew test speedup 4.9161301174021865
Epoch 28/300 |loss: 0.001527| train set 4.795x speedup, test set 4.916x speedup, val set 4.955x speedup, step: 5
JOB test speedup 3.5169392826664003
TPCH test speedup 5.258263016386286
TPCH skew test speedup 5.009613454497366
Epoch 29/300 |loss: 0.001419| train set 4.996x speedup, test set 5.010x speedup, val set 4.927x speedup, step: 1
JOB test speedup 3.5316324541569544
TPCH test speedup 5.402871254776291
TPCH skew test speedup 5.067482254368733
Epoch 30/300 |loss: 0.001560| train set 4.855x speedup, test set 5.067x speedup, val set 5.090x speedup, step: 2
JOB test speedup 3.4709703912215555
TPCH test speedup 5.2581220858709505
TPCH skew test speedup 5.00325780303988
Epoch 31/300 |loss: 0.001369| train set 5.083x speedup, test set 5.003x speedup, val set 5.085x speedup, step: 3
JOB test speedup 3.554673414324886
TPCH test speedup 5.2398113984794366
TPCH skew test speedup 4.970953667835956
Epoch 32/300 |loss: 0.001513| train set 4.703x speedup, test set 4.971x speedup, val set 5.091x speedup, step: 4
JOB test speedup 3.547425345530539
TPCH test speedup 5.202221916214635
TPCH skew test speedup 4.888771545245454
Epoch 33/300 |loss: 0.001508| train set 5.043x speedup, test set 4.889x speedup, val set 5.086x speedup, step: 5
JOB test speedup 3.4481505017777505
TPCH test speedup 4.188113994494528
TPCH skew test speedup 4.0364442796899045
Epoch 34/300 |loss: 0.001355| train set 4.923x speedup, test set 4.036x speedup, val set 4.011x speedup, step: 6
JOB test speedup 3.550619840230528
TPCH test speedup 5.283511034414009
TPCH skew test speedup 5.00581621926194
Epoch 35/300 |loss: 0.001280| train set 5.122x speedup, test set 5.006x speedup, val set 4.958x speedup, step: 7
JOB test speedup 3.5289885399021523
TPCH test speedup 5.198663911006157
TPCH skew test speedup 4.903790230187333
Epoch 36/300 |loss: 0.001693| train set 5.120x speedup, test set 4.904x speedup, val set 4.392x speedup, step: 8
JOB test speedup 3.533087482449024
TPCH test speedup 5.203098109099983
TPCH skew test speedup 4.933805456270685
Epoch 37/300 |loss: 0.001088| train set 5.109x speedup, test set 4.934x speedup, val set 4.953x speedup, step: 9
JOB test speedup 3.493618856733498
TPCH test speedup 5.107686715911872
TPCH skew test speedup 4.852287771150427
Epoch 38/300 |loss: 0.001247| train set 5.024x speedup, test set 4.852x speedup, val set 4.857x speedup, step: 10
JOB test speedup 3.3471872847783497
TPCH test speedup 5.224178234447059
TPCH skew test speedup 4.959245033494415
Epoch 39/300 |loss: 0.001127| train set 5.088x speedup, test set 4.959x speedup, val set 4.958x speedup, step: 1
JOB test speedup 2.93729136322433
TPCH test speedup 4.151238733419704
TPCH skew test speedup 3.992174852228574
Epoch 40/300 |loss: 0.001174| train set 5.125x speedup, test set 3.992x speedup, val set 3.959x speedup, step: 2
JOB test speedup 3.0696436515196
TPCH test speedup 4.233595643838043
TPCH skew test speedup 4.120484649064604
Epoch 41/300 |loss: 0.001100| train set 5.026x speedup, test set 4.120x speedup, val set 4.934x speedup, step: 3
JOB test speedup 3.3971121449614317
TPCH test speedup 4.691405736896411
TPCH skew test speedup 4.467098610829503
Epoch 42/300 |loss: 0.001059| train set 4.773x speedup, test set 4.467x speedup, val set 5.059x speedup, step: 4
JOB test speedup 3.0016444006815775
TPCH test speedup 5.177886885874321
TPCH skew test speedup 4.909462849320785
Epoch 43/300 |loss: 0.001151| train set 5.125x speedup, test set 4.909x speedup, val set 4.967x speedup, step: 5
JOB test speedup 3.5243396503934656
TPCH test speedup 5.207669140258943
TPCH skew test speedup 4.940821319451692
Epoch 44/300 |loss: 0.000969| train set 5.127x speedup, test set 4.941x speedup, val set 4.893x speedup, step: 6
JOB test speedup 3.527897154928283
TPCH test speedup 4.183083000599694
TPCH skew test speedup 4.071234235265588
Epoch 45/300 |loss: 0.001083| train set 5.104x speedup, test set 4.071x speedup, val set 4.051x speedup, step: 7
JOB test speedup 3.5338027769724722
TPCH test speedup 5.203098109099983
TPCH skew test speedup 4.933805456270685
Epoch 46/300 |loss: 0.001016| train set 5.082x speedup, test set 4.934x speedup, val set 4.967x speedup, step: 8
JOB test speedup 3.501156843955903
TPCH test speedup 5.1500890277337605
TPCH skew test speedup 4.893870812617068
Epoch 47/300 |loss: 0.000830| train set 5.092x speedup, test set 4.894x speedup, val set 4.950x speedup, step: 9
JOB test speedup 3.5065429572344597
TPCH test speedup 5.243424107195324
TPCH skew test speedup 4.939731124222303
Epoch 48/300 |loss: 0.000843| train set 5.066x speedup, test set 4.940x speedup, val set 4.967x speedup, step: 10
JOB test speedup 3.5403649539109385
TPCH test speedup 5.201127732752336
TPCH skew test speedup 4.934296657070093
Epoch 49/300 |loss: 0.000894| train set 5.046x speedup, test set 4.934x speedup, val set 4.958x speedup, step: 1
JOB test speedup 3.5313479148746185
TPCH test speedup 5.242534281180618
TPCH skew test speedup 4.940821319451692
Epoch 50/300 |loss: 0.000901| train set 5.119x speedup, test set 4.941x speedup, val set 4.957x speedup, step: 2
JOB test speedup 3.525035494729798
TPCH test speedup 4.133930187358672
TPCH skew test speedup 3.970688928875947
Epoch 51/300 |loss: 0.000924| train set 4.876x speedup, test set 3.971x speedup, val set 4.005x speedup, step: 3
JOB test speedup 2.914295682002852
TPCH test speedup 5.201127732752336
TPCH skew test speedup 4.934296657070093
Epoch 52/300 |loss: 0.000910| train set 5.124x speedup, test set 4.934x speedup, val set 4.900x speedup, step: 4
JOB test speedup 3.2693690999868417
TPCH test speedup 4.20516288176821
TPCH skew test speedup 4.05953292475039
Epoch 53/300 |loss: 0.000807| train set 4.317x speedup, test set 4.060x speedup, val set 4.033x speedup, step: 5
JOB test speedup 3.0148045068152647
TPCH test speedup 5.263760026143093
TPCH skew test speedup 4.974735200102642
Epoch 54/300 |loss: 0.000812| train set 5.109x speedup, test set 4.975x speedup, val set 4.963x speedup, step: 1
JOB test speedup 2.9544037541136263
TPCH test speedup 5.160583049571729
TPCH skew test speedup 4.924739790802429
Epoch 55/300 |loss: 0.000889| train set 5.116x speedup, test set 4.925x speedup, val set 4.831x speedup, step: 2
JOB test speedup 3.3837903779177423
TPCH test speedup 4.484262018170646
TPCH skew test speedup 3.933519815251331
Epoch 56/300 |loss: 0.000926| train set 4.882x speedup, test set 3.934x speedup, val set 3.876x speedup, step: 3
early stopping at epoch 56
Training per epoch cost 3.510 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.875s, pg runtime 2.352s, speedup 2.688x
12, opt runtime 0.463s, model runtime 0.745s, pg runtime 0.557s, speedup 0.748x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 0.313s, model runtime 0.386s, pg runtime 0.313s, speedup 0.811x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.354s, pg runtime 0.354s, speedup 1.000x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.065s, pg runtime 0.086s, speedup 1.315x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.353s, pg runtime 1.380s, speedup 1.021x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 3.134s, pg runtime 1.404s, speedup 0.448x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.646s, pg runtime 5.362s, speedup 0.950x
30, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
31, opt runtime 24.079s, model runtime 32.888s, pg runtime 608.707s, speedup 18.509x
32, opt runtime 24.706s, model runtime 32.983s, pg runtime 610.808s, speedup 18.519x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.316s, model runtime 1.316s, pg runtime 1.352s, speedup 1.027x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 3.295s, pg runtime 1.433s, speedup 0.435x
26, opt runtime 1.187s, model runtime 2.763s, pg runtime 1.187s, speedup 0.430x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.730s, pg runtime 5.223s, speedup 0.912x
30, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
31, opt runtime 24.136s, model runtime 31.969s, pg runtime 609.432s, speedup 19.063x
32, opt runtime 24.451s, model runtime 32.240s, pg runtime 628.615s, speedup 19.498x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 54, train speedup 5.109, test speedup 3.015, val speedup 4.963
TPCH best validation speedup epoch: 54, train speedup 5.109, test speedup 5.264, val speedup 4.963
TPCH Skew best validation speedup epoch: 54, train speedup 5.109, test speedup 4.975, val speedup 4.963
execution cost 0:04:32.508785
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.656188, and there are 12152 training samples
in channel 9
JOB test speedup 1.0628511742006652
TPCH test speedup 2.657916292704591
TPCH skew test speedup 2.5294425281142203
Epoch 0/300 |loss: 0.031317| train set 2.449x speedup, test set 2.529x speedup, val set 2.450x speedup, step: 1
JOB test speedup 2.5678442945855955
TPCH test speedup 3.00457446279677
TPCH skew test speedup 2.6998286725018827
Epoch 1/300 |loss: 0.012859| train set 2.624x speedup, test set 2.700x speedup, val set 2.630x speedup, step: 2
JOB test speedup 2.4611525347198935
TPCH test speedup 3.557833344397814
TPCH skew test speedup 3.1162946541767935
Epoch 2/300 |loss: 0.009673| train set 3.148x speedup, test set 3.116x speedup, val set 3.262x speedup, step: 3
JOB test speedup 2.390384527373586
TPCH test speedup 3.3078951137893258
TPCH skew test speedup 3.30921107797047
Epoch 3/300 |loss: 0.007244| train set 3.145x speedup, test set 3.309x speedup, val set 3.219x speedup, step: 4
JOB test speedup 3.505652358509184
TPCH test speedup 3.6698075408537085
TPCH skew test speedup 3.486400973846971
Epoch 4/300 |loss: 0.006384| train set 3.569x speedup, test set 3.486x speedup, val set 3.422x speedup, step: 1
JOB test speedup 1.1377111719071027
TPCH test speedup 4.0289824583655
TPCH skew test speedup 4.071485422548378
Epoch 5/300 |loss: 0.005853| train set 3.766x speedup, test set 4.071x speedup, val set 4.094x speedup, step: 2
JOB test speedup 1.1658846188751006
TPCH test speedup 3.959031260020219
TPCH skew test speedup 3.369726060639753
Epoch 6/300 |loss: 0.004686| train set 3.721x speedup, test set 3.370x speedup, val set 3.891x speedup, step: 3
JOB test speedup 1.1637965395347925
TPCH test speedup 4.808401065158495
TPCH skew test speedup 4.49369110908327
Epoch 7/300 |loss: 0.004324| train set 3.953x speedup, test set 4.494x speedup, val set 4.683x speedup, step: 4
JOB test speedup 1.1687827783021352
TPCH test speedup 5.127537004164915
TPCH skew test speedup 4.749557795269551
Epoch 8/300 |loss: 0.003827| train set 4.143x speedup, test set 4.750x speedup, val set 5.061x speedup, step: 5
JOB test speedup 1.0522872928169518
TPCH test speedup 3.7870747307346284
TPCH skew test speedup 3.6948009732995857
Epoch 9/300 |loss: 0.003360| train set 3.385x speedup, test set 3.695x speedup, val set 3.543x speedup, step: 1
JOB test speedup 1.0992019610590247
TPCH test speedup 4.095338947562919
TPCH skew test speedup 4.037523215094965
Epoch 10/300 |loss: 0.003515| train set 3.684x speedup, test set 4.038x speedup, val set 3.959x speedup, step: 2
JOB test speedup 1.0975554718798932
TPCH test speedup 5.197253578772366
TPCH skew test speedup 4.172647061237387
Epoch 11/300 |loss: 0.003259| train set 4.956x speedup, test set 4.173x speedup, val set 5.133x speedup, step: 3
JOB test speedup 1.1352640529710123
TPCH test speedup 5.247005994250834
TPCH skew test speedup 4.931975176894432
Epoch 12/300 |loss: 0.002961| train set 4.039x speedup, test set 4.932x speedup, val set 4.979x speedup, step: 4
JOB test speedup 3.056798120766952
TPCH test speedup 5.292674917619796
TPCH skew test speedup 5.011841726485462
Epoch 13/300 |loss: 0.002797| train set 4.070x speedup, test set 5.012x speedup, val set 3.781x speedup, step: 5
JOB test speedup 3.4697206961111164
TPCH test speedup 3.843907119787672
TPCH skew test speedup 3.655973223763599
Epoch 14/300 |loss: 0.002906| train set 3.703x speedup, test set 3.656x speedup, val set 3.608x speedup, step: 1
JOB test speedup 2.949031138501662
TPCH test speedup 5.048048592169102
TPCH skew test speedup 4.897433718607588
Epoch 15/300 |loss: 0.002389| train set 4.999x speedup, test set 4.897x speedup, val set 4.964x speedup, step: 2
JOB test speedup 3.1322150845744585
TPCH test speedup 5.3375109747932665
TPCH skew test speedup 5.0235728440124605
Epoch 16/300 |loss: 0.002390| train set 4.561x speedup, test set 5.024x speedup, val set 4.841x speedup, step: 3
JOB test speedup 3.5271877532113787
TPCH test speedup 5.2582796060766395
TPCH skew test speedup 4.980305501661767
Epoch 17/300 |loss: 0.002281| train set 4.777x speedup, test set 4.980x speedup, val set 4.980x speedup, step: 4
JOB test speedup 3.4844423962941
TPCH test speedup 5.191082017930623
TPCH skew test speedup 4.991805627647971
Epoch 18/300 |loss: 0.002530| train set 4.619x speedup, test set 4.992x speedup, val set 5.001x speedup, step: 5
JOB test speedup 3.0500054146926745
TPCH test speedup 5.45977787369475
TPCH skew test speedup 5.128447535458062
Epoch 19/300 |loss: 0.002240| train set 4.962x speedup, test set 5.128x speedup, val set 5.084x speedup, step: 1
JOB test speedup 3.4904199966329004
TPCH test speedup 5.3530827969359205
TPCH skew test speedup 5.045626355173542
Epoch 20/300 |loss: 0.001981| train set 5.107x speedup, test set 5.046x speedup, val set 5.162x speedup, step: 2
JOB test speedup 3.5047625644541127
TPCH test speedup 5.458572677300393
TPCH skew test speedup 5.1278034589596535
Epoch 21/300 |loss: 0.002156| train set 5.115x speedup, test set 5.128x speedup, val set 5.045x speedup, step: 3
JOB test speedup 2.911160324713605
TPCH test speedup 5.22996528948704
TPCH skew test speedup 4.965315957387073
Epoch 22/300 |loss: 0.002275| train set 5.041x speedup, test set 4.965x speedup, val set 5.049x speedup, step: 4
JOB test speedup 3.0140428279616502
TPCH test speedup 5.302446745432083
TPCH skew test speedup 4.9851997909842485
Epoch 23/300 |loss: 0.001941| train set 5.082x speedup, test set 4.985x speedup, val set 5.074x speedup, step: 5
JOB test speedup 2.9564395008797337
TPCH test speedup 5.295718424402567
TPCH skew test speedup 4.989754137455742
Epoch 24/300 |loss: 0.001932| train set 4.662x speedup, test set 4.990x speedup, val set 4.991x speedup, step: 6
JOB test speedup 3.167322007451061
TPCH test speedup 5.207669140258943
TPCH skew test speedup 4.940821319451692
Epoch 25/300 |loss: 0.001624| train set 5.120x speedup, test set 4.941x speedup, val set 4.894x speedup, step: 7
JOB test speedup 2.9599448182676102
TPCH test speedup 5.186793624288132
TPCH skew test speedup 4.931019341195272
Epoch 26/300 |loss: 0.002008| train set 5.060x speedup, test set 4.931x speedup, val set 4.912x speedup, step: 8
JOB test speedup 3.0503675614285575
TPCH test speedup 5.145744682753076
TPCH skew test speedup 4.8019123766246565
Epoch 27/300 |loss: 0.001664| train set 5.037x speedup, test set 4.802x speedup, val set 4.802x speedup, step: 9
JOB test speedup 2.8616988191147543
TPCH test speedup 5.32697915193658
TPCH skew test speedup 5.056165756656809
Epoch 28/300 |loss: 0.001593| train set 4.627x speedup, test set 5.056x speedup, val set 5.149x speedup, step: 10
JOB test speedup 3.01356487794051
TPCH test speedup 5.398204744699073
TPCH skew test speedup 5.072427325760901
Epoch 29/300 |loss: 0.001542| train set 5.008x speedup, test set 5.072x speedup, val set 5.116x speedup, step: 1
JOB test speedup 3.1231466952813953
TPCH test speedup 4.099631599989955
TPCH skew test speedup 4.071540071561025
Epoch 30/300 |loss: 0.001599| train set 4.694x speedup, test set 4.072x speedup, val set 4.382x speedup, step: 2
JOB test speedup 3.11970379829536
TPCH test speedup 5.274253660072226
TPCH skew test speedup 4.9949635582220475
Epoch 31/300 |loss: 0.001424| train set 5.111x speedup, test set 4.995x speedup, val set 4.936x speedup, step: 3
JOB test speedup 2.7077604568582725
TPCH test speedup 5.309453270210867
TPCH skew test speedup 5.087466632801883
Epoch 32/300 |loss: 0.001574| train set 4.985x speedup, test set 5.087x speedup, val set 4.921x speedup, step: 4
JOB test speedup 3.120975094239882
TPCH test speedup 5.107814875809649
TPCH skew test speedup 4.863856087463465
Epoch 33/300 |loss: 0.001608| train set 5.023x speedup, test set 4.864x speedup, val set 5.076x speedup, step: 5
JOB test speedup 3.145254866567526
TPCH test speedup 5.314844530084762
TPCH skew test speedup 4.961163679313871
Epoch 34/300 |loss: 0.001444| train set 4.789x speedup, test set 4.961x speedup, val set 4.825x speedup, step: 6
JOB test speedup 3.1526973986963336
TPCH test speedup 5.106631934273784
TPCH skew test speedup 4.851711188388304
Epoch 35/300 |loss: 0.001288| train set 5.038x speedup, test set 4.852x speedup, val set 4.875x speedup, step: 7
JOB test speedup 2.9657229156083873
TPCH test speedup 5.1910381471311196
TPCH skew test speedup 4.86929262978132
Epoch 36/300 |loss: 0.001723| train set 5.094x speedup, test set 4.869x speedup, val set 4.937x speedup, step: 8
JOB test speedup 3.118853874692844
TPCH test speedup 5.181327840229047
TPCH skew test speedup 4.915817682925673
Epoch 37/300 |loss: 0.001130| train set 5.033x speedup, test set 4.916x speedup, val set 4.923x speedup, step: 9
JOB test speedup 3.150346062704122
TPCH test speedup 5.1246310066573155
TPCH skew test speedup 4.812621876552473
Epoch 38/300 |loss: 0.001249| train set 5.019x speedup, test set 4.813x speedup, val set 4.820x speedup, step: 10
JOB test speedup 3.1331107090340535
TPCH test speedup 5.206572664408922
TPCH skew test speedup 4.940223505686826
Epoch 39/300 |loss: 0.001230| train set 5.039x speedup, test set 4.940x speedup, val set 5.019x speedup, step: 11
JOB test speedup 3.1308199825889944
TPCH test speedup 5.434289275745645
TPCH skew test speedup 5.101683656778735
Epoch 40/300 |loss: 0.001223| train set 5.116x speedup, test set 5.102x speedup, val set 4.932x speedup, step: 12
JOB test speedup 3.09103941056188
TPCH test speedup 5.206572664408922
TPCH skew test speedup 4.940223505686826
Epoch 41/300 |loss: 0.001104| train set 4.907x speedup, test set 4.940x speedup, val set 4.791x speedup, step: 13
JOB test speedup 3.090313024833817
TPCH test speedup 5.241259591620178
TPCH skew test speedup 4.961641435848721
Epoch 42/300 |loss: 0.001135| train set 5.029x speedup, test set 4.962x speedup, val set 4.775x speedup, step: 14
JOB test speedup 2.9897665452291045
TPCH test speedup 5.207669140258943
TPCH skew test speedup 4.8945894685917954
Epoch 43/300 |loss: 0.001100| train set 5.131x speedup, test set 4.895x speedup, val set 4.904x speedup, step: 15
JOB test speedup 3.1194792504245905
TPCH test speedup 5.398204744699073
TPCH skew test speedup 5.072427325760901
Epoch 44/300 |loss: 0.001012| train set 4.990x speedup, test set 5.072x speedup, val set 5.029x speedup, step: 16
JOB test speedup 3.0552775718757457
TPCH test speedup 5.346593664450827
TPCH skew test speedup 5.05424850504006
Epoch 45/300 |loss: 0.001159| train set 5.096x speedup, test set 5.054x speedup, val set 5.001x speedup, step: 17
JOB test speedup 3.1360145321593826
TPCH test speedup 5.347749915184814
TPCH skew test speedup 5.054874235232341
Epoch 46/300 |loss: 0.001185| train set 5.124x speedup, test set 5.055x speedup, val set 4.980x speedup, step: 18
early stopping at epoch 46
Training per epoch cost 3.503 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.358s, pg runtime 0.354s, speedup 0.988x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.094s, pg runtime 0.086s, speedup 0.915x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.231s, pg runtime 0.891s, speedup 3.855x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.245s, pg runtime 0.189s, speedup 0.773x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.147s, pg runtime 0.137s, speedup 0.933x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 2.411s, pg runtime 0.965s, speedup 0.400x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.240s, pg runtime 1.214s, speedup 0.979x
20, opt runtime 1.353s, model runtime 1.508s, pg runtime 1.380s, speedup 0.915x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 11.165s, pg runtime 32.969s, speedup 2.953x
24, opt runtime 5.961s, model runtime 10.298s, pg runtime 31.210s, speedup 3.031x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
28, opt runtime 6.854s, model runtime 6.854s, pg runtime 6.854s, speedup 1.000x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 38.718s, pg runtime 69.421s, speedup 1.793x
34, opt runtime 35.527s, model runtime 42.634s, pg runtime 71.730s, speedup 1.682x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.316s, model runtime 1.382s, pg runtime 1.352s, speedup 0.978x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
24, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.749s, pg runtime 6.749s, speedup 1.000x
28, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 40.423s, pg runtime 58.921s, speedup 1.458x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 29, train speedup 5.008, test speedup 3.014, val speedup 5.116
TPCH best validation speedup epoch: 29, train speedup 5.008, test speedup 5.398, val speedup 5.116
TPCH Skew best validation speedup epoch: 29, train speedup 5.008, test speedup 5.072, val speedup 5.116
execution cost 0:03:46.856014
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.578453, and there are 12152 training samples
in channel 9
JOB test speedup 1.0628511742006652
TPCH test speedup 2.657916292704591
TPCH skew test speedup 2.5294425281142203
Epoch 0/300 |loss: 0.031317| train set 2.449x speedup, test set 2.529x speedup, val set 2.450x speedup, step: 1
JOB test speedup 2.5678442945855955
TPCH test speedup 3.00457446279677
TPCH skew test speedup 2.6998286725018827
Epoch 1/300 |loss: 0.012859| train set 2.624x speedup, test set 2.700x speedup, val set 2.630x speedup, step: 2
JOB test speedup 2.4662716860555594
TPCH test speedup 3.7910762303983394
TPCH skew test speedup 3.3149301723067492
Epoch 2/300 |loss: 0.009669| train set 3.099x speedup, test set 3.315x speedup, val set 3.262x speedup, step: 3
JOB test speedup 2.408107699910367
TPCH test speedup 3.399544466750521
TPCH skew test speedup 3.434981876026171
Epoch 3/300 |loss: 0.007171| train set 3.113x speedup, test set 3.435x speedup, val set 3.127x speedup, step: 4
JOB test speedup 3.0075768682061588
TPCH test speedup 3.668231835363399
TPCH skew test speedup 3.461470447180452
Epoch 4/300 |loss: 0.006473| train set 3.544x speedup, test set 3.461x speedup, val set 3.392x speedup, step: 1
JOB test speedup 3.046097306454402
TPCH test speedup 4.000643517886954
TPCH skew test speedup 3.9052285617319584
Epoch 5/300 |loss: 0.006074| train set 3.813x speedup, test set 3.905x speedup, val set 3.937x speedup, step: 2
JOB test speedup 1.1771077865785335
TPCH test speedup 3.99847069016567
TPCH skew test speedup 3.3769715757034313
Epoch 6/300 |loss: 0.004729| train set 3.687x speedup, test set 3.377x speedup, val set 3.866x speedup, step: 3
JOB test speedup 1.143996263851924
TPCH test speedup 4.73510232988925
TPCH skew test speedup 4.409138168543155
Epoch 7/300 |loss: 0.004235| train set 4.028x speedup, test set 4.409x speedup, val set 4.620x speedup, step: 4
JOB test speedup 1.1628912825327804
TPCH test speedup 4.88286102475082
TPCH skew test speedup 4.522298869866408
Epoch 8/300 |loss: 0.003797| train set 4.150x speedup, test set 4.522x speedup, val set 4.949x speedup, step: 5
JOB test speedup 3.0347684821918945
TPCH test speedup 3.7083665497142904
TPCH skew test speedup 3.6371323681100427
Epoch 9/300 |loss: 0.003324| train set 3.601x speedup, test set 3.637x speedup, val set 3.984x speedup, step: 1
JOB test speedup 1.165834918679653
TPCH test speedup 4.0509815800912055
TPCH skew test speedup 4.003982273704908
Epoch 10/300 |loss: 0.003354| train set 3.872x speedup, test set 4.004x speedup, val set 3.985x speedup, step: 2
JOB test speedup 3.2401692557950894
TPCH test speedup 5.288964116900323
TPCH skew test speedup 4.842011590777793
Epoch 11/300 |loss: 0.003343| train set 4.825x speedup, test set 4.842x speedup, val set 4.942x speedup, step: 3
JOB test speedup 3.4860609928996897
TPCH test speedup 4.806398566396245
TPCH skew test speedup 4.485602201594345
Epoch 12/300 |loss: 0.003116| train set 3.746x speedup, test set 4.486x speedup, val set 3.964x speedup, step: 4
JOB test speedup 3.416611126122711
TPCH test speedup 5.134726424328862
TPCH skew test speedup 4.872576217455245
Epoch 13/300 |loss: 0.002690| train set 5.070x speedup, test set 4.873x speedup, val set 4.879x speedup, step: 5
JOB test speedup 3.4653312441459416
TPCH test speedup 3.7637265644183855
TPCH skew test speedup 3.6044252223520155
Epoch 14/300 |loss: 0.002807| train set 5.002x speedup, test set 3.604x speedup, val set 3.592x speedup, step: 6
JOB test speedup 3.3749805912607895
TPCH test speedup 4.667710578740026
TPCH skew test speedup 4.383430561988018
Epoch 15/300 |loss: 0.002237| train set 4.936x speedup, test set 4.383x speedup, val set 4.245x speedup, step: 7
JOB test speedup 3.4722981511579967
TPCH test speedup 5.3534807754789995
TPCH skew test speedup 5.034154992839384
Epoch 16/300 |loss: 0.002268| train set 4.770x speedup, test set 5.034x speedup, val set 4.933x speedup, step: 8
JOB test speedup 3.4594932248174013
TPCH test speedup 5.208341131270992
TPCH skew test speedup 4.91008080012016
Epoch 17/300 |loss: 0.002212| train set 4.966x speedup, test set 4.910x speedup, val set 4.903x speedup, step: 9
JOB test speedup 3.460317207625517
TPCH test speedup 5.19661565330697
TPCH skew test speedup 4.9494300802482245
Epoch 18/300 |loss: 0.002540| train set 4.977x speedup, test set 4.949x speedup, val set 4.869x speedup, step: 10
JOB test speedup 2.8985183289708676
TPCH test speedup 5.347817293801047
TPCH skew test speedup 5.089411800223259
Epoch 19/300 |loss: 0.002209| train set 5.085x speedup, test set 5.089x speedup, val set 5.163x speedup, step: 1
JOB test speedup 3.3084073500203837
TPCH test speedup 5.22996528948704
TPCH skew test speedup 4.965315957387073
Epoch 20/300 |loss: 0.001938| train set 5.122x speedup, test set 4.965x speedup, val set 4.827x speedup, step: 2
JOB test speedup 3.476253809739777
TPCH test speedup 5.313386701471249
TPCH skew test speedup 5.033973993762032
Epoch 21/300 |loss: 0.001961| train set 5.107x speedup, test set 5.034x speedup, val set 5.093x speedup, step: 3
JOB test speedup 3.484722593671189
TPCH test speedup 5.155427566558424
TPCH skew test speedup 4.899700886381305
Epoch 22/300 |loss: 0.002461| train set 5.034x speedup, test set 4.900x speedup, val set 4.970x speedup, step: 4
JOB test speedup 2.8368392823296698
TPCH test speedup 5.201470411820275
TPCH skew test speedup 4.928035795138058
Epoch 23/300 |loss: 0.001945| train set 5.063x speedup, test set 4.928x speedup, val set 4.985x speedup, step: 5
JOB test speedup 3.4498195395780025
TPCH test speedup 4.240216024817115
TPCH skew test speedup 4.113878083823063
Epoch 24/300 |loss: 0.001967| train set 4.701x speedup, test set 4.114x speedup, val set 4.796x speedup, step: 6
JOB test speedup 3.475668297019149
TPCH test speedup 4.257532819125268
TPCH skew test speedup 4.063543743050758
Epoch 25/300 |loss: 0.001572| train set 5.119x speedup, test set 4.064x speedup, val set 3.995x speedup, step: 7
JOB test speedup 3.5391118055636386
TPCH test speedup 4.8118447272731935
TPCH skew test speedup 4.69197776728705
Epoch 26/300 |loss: 0.001924| train set 5.044x speedup, test set 4.692x speedup, val set 5.037x speedup, step: 8
JOB test speedup 3.519838310291988
TPCH test speedup 5.147673312506245
TPCH skew test speedup 4.863860685808723
Epoch 27/300 |loss: 0.001618| train set 4.955x speedup, test set 4.864x speedup, val set 4.989x speedup, step: 9
JOB test speedup 3.551815414141228
TPCH test speedup 5.270884444425563
TPCH skew test speedup 5.046878608068611
Epoch 28/300 |loss: 0.001569| train set 4.962x speedup, test set 5.047x speedup, val set 5.018x speedup, step: 10
JOB test speedup 3.4188535236916944
TPCH test speedup 5.208547169175358
TPCH skew test speedup 4.939731124222303
Epoch 29/300 |loss: 0.001433| train set 5.026x speedup, test set 4.940x speedup, val set 4.998x speedup, step: 11
JOB test speedup 2.9851346509669243
TPCH test speedup 5.347749915184814
TPCH skew test speedup 5.054874235232341
Epoch 30/300 |loss: 0.001634| train set 5.077x speedup, test set 5.055x speedup, val set 4.946x speedup, step: 12
JOB test speedup 3.0325583298680967
TPCH test speedup 5.426804676366635
TPCH skew test speedup 5.124097656575794
Epoch 31/300 |loss: 0.001343| train set 5.041x speedup, test set 5.124x speedup, val set 4.988x speedup, step: 13
JOB test speedup 2.952272173209264
TPCH test speedup 4.760502606689053
TPCH skew test speedup 4.618780820285696
Epoch 32/300 |loss: 0.001556| train set 5.047x speedup, test set 4.619x speedup, val set 4.940x speedup, step: 14
JOB test speedup 3.0469437227774976
TPCH test speedup 5.232256506293984
TPCH skew test speedup 4.968861137817053
Epoch 33/300 |loss: 0.001573| train set 5.064x speedup, test set 4.969x speedup, val set 4.932x speedup, step: 15
JOB test speedup 3.041770964702476
TPCH test speedup 5.007498816000174
TPCH skew test speedup 4.711833584053767
Epoch 34/300 |loss: 0.001535| train set 4.664x speedup, test set 4.712x speedup, val set 4.873x speedup, step: 16
JOB test speedup 3.120736748932659
TPCH test speedup 4.749555393368701
TPCH skew test speedup 4.766823566413102
Epoch 35/300 |loss: 0.001286| train set 5.115x speedup, test set 4.767x speedup, val set 4.867x speedup, step: 17
JOB test speedup 3.124436024432355
TPCH test speedup 5.37140659487174
TPCH skew test speedup 5.010713742343335
Epoch 36/300 |loss: 0.001703| train set 5.044x speedup, test set 5.011x speedup, val set 5.090x speedup, step: 18
JOB test speedup 3.1306497081498375
TPCH test speedup 5.199364164012474
TPCH skew test speedup 4.931979832047068
Epoch 37/300 |loss: 0.001085| train set 4.929x speedup, test set 4.932x speedup, val set 4.801x speedup, step: 19
JOB test speedup 3.0775086047217663
TPCH test speedup 4.877132355865807
TPCH skew test speedup 4.698024004121604
Epoch 38/300 |loss: 0.001260| train set 5.027x speedup, test set 4.698x speedup, val set 5.105x speedup, step: 20
JOB test speedup 3.074671216069925
TPCH test speedup 5.345343399186042
TPCH skew test speedup 5.051307545807828
Epoch 39/300 |loss: 0.001194| train set 5.115x speedup, test set 5.051x speedup, val set 5.103x speedup, step: 21
JOB test speedup 3.13579247723279
TPCH test speedup 5.436440308520925
TPCH skew test speedup 5.101158566308168
Epoch 40/300 |loss: 0.001205| train set 5.124x speedup, test set 5.101x speedup, val set 4.894x speedup, step: 22
JOB test speedup 3.120961427075093
TPCH test speedup 4.762898180529176
TPCH skew test speedup 4.6213356790844085
Epoch 41/300 |loss: 0.001065| train set 4.844x speedup, test set 4.621x speedup, val set 4.798x speedup, step: 23
JOB test speedup 3.150308375826514
TPCH test speedup 5.126910551487361
TPCH skew test speedup 4.822330302924304
Epoch 42/300 |loss: 0.001025| train set 5.087x speedup, test set 4.822x speedup, val set 5.162x speedup, step: 24
JOB test speedup 3.074265661004858
TPCH test speedup 4.7560758387327216
TPCH skew test speedup 4.5997293356316735
Epoch 43/300 |loss: 0.001013| train set 5.120x speedup, test set 4.600x speedup, val set 4.887x speedup, step: 25
JOB test speedup 3.100908951490456
TPCH test speedup 5.098085040591514
TPCH skew test speedup 4.8586142920982685
Epoch 44/300 |loss: 0.000995| train set 5.060x speedup, test set 4.859x speedup, val set 4.937x speedup, step: 26
JOB test speedup 2.6175158271808616
TPCH test speedup 4.863384016177846
TPCH skew test speedup 4.270952213381335
Epoch 45/300 |loss: 0.001074| train set 5.115x speedup, test set 4.271x speedup, val set 4.903x speedup, step: 27
JOB test speedup 2.641001926728657
TPCH test speedup 5.365469739759256
TPCH skew test speedup 5.006355672377359
Epoch 46/300 |loss: 0.001081| train set 5.079x speedup, test set 5.006x speedup, val set 4.806x speedup, step: 28
JOB test speedup 2.617103140184205
TPCH test speedup 4.876759695766343
TPCH skew test speedup 4.69948123652493
Epoch 47/300 |loss: 0.000925| train set 5.034x speedup, test set 4.699x speedup, val set 4.380x speedup, step: 29
JOB test speedup 3.1466833438495825
TPCH test speedup 4.824359156386456
TPCH skew test speedup 4.676659509979441
Epoch 48/300 |loss: 0.000849| train set 4.910x speedup, test set 4.677x speedup, val set 4.814x speedup, step: 30
JOB test speedup 2.563633796899978
TPCH test speedup 4.904207421533364
TPCH skew test speedup 4.748801881273573
Epoch 49/300 |loss: 0.001051| train set 5.124x speedup, test set 4.749x speedup, val set 4.840x speedup, step: 31
JOB test speedup 2.637944954570775
TPCH test speedup 5.200013879179577
TPCH skew test speedup 4.933236096712296
Epoch 50/300 |loss: 0.000986| train set 5.077x speedup, test set 4.933x speedup, val set 4.798x speedup, step: 32
JOB test speedup 2.6507938017916812
TPCH test speedup 4.174674651034666
TPCH skew test speedup 4.036814921055577
Epoch 51/300 |loss: 0.000900| train set 5.086x speedup, test set 4.037x speedup, val set 3.878x speedup, step: 33
JOB test speedup 2.6574828859597033
TPCH test speedup 5.190655762632944
TPCH skew test speedup 4.93326167763516
Epoch 52/300 |loss: 0.000827| train set 5.123x speedup, test set 4.933x speedup, val set 4.932x speedup, step: 34
JOB test speedup 3.0413506895826927
TPCH test speedup 5.202221916214635
TPCH skew test speedup 4.93489303719935
Epoch 53/300 |loss: 0.000887| train set 5.035x speedup, test set 4.935x speedup, val set 4.743x speedup, step: 35
JOB test speedup 2.6441091690637655
TPCH test speedup 5.143000913888319
TPCH skew test speedup 4.876275127698554
Epoch 54/300 |loss: 0.000781| train set 5.103x speedup, test set 4.876x speedup, val set 4.682x speedup, step: 36
JOB test speedup 3.1498218405233587
TPCH test speedup 5.08660689577323
TPCH skew test speedup 4.872008988627918
Epoch 55/300 |loss: 0.000769| train set 5.105x speedup, test set 4.872x speedup, val set 4.908x speedup, step: 37
JOB test speedup 2.636537736676282
TPCH test speedup 4.7200624250944285
TPCH skew test speedup 4.58585684395743
Epoch 56/300 |loss: 0.000899| train set 5.041x speedup, test set 4.586x speedup, val set 4.298x speedup, step: 38
JOB test speedup 3.1506344644652198
TPCH test speedup 4.829433845867525
TPCH skew test speedup 4.671549142172379
Epoch 57/300 |loss: 0.000770| train set 5.139x speedup, test set 4.672x speedup, val set 4.790x speedup, step: 39
JOB test speedup 2.6286370676141106
TPCH test speedup 5.12035962058761
TPCH skew test speedup 4.0328566675419095
Epoch 58/300 |loss: 0.000612| train set 5.113x speedup, test set 4.033x speedup, val set 4.706x speedup, step: 40
JOB test speedup 2.644433350342777
TPCH test speedup 5.3807036298008635
TPCH skew test speedup 5.057964317239397
Epoch 59/300 |loss: 0.000719| train set 5.131x speedup, test set 5.058x speedup, val set 4.942x speedup, step: 41
JOB test speedup 2.5142430442823365
TPCH test speedup 5.22447134663415
TPCH skew test speedup 4.959328784887189
Epoch 60/300 |loss: 0.000749| train set 5.137x speedup, test set 4.959x speedup, val set 4.719x speedup, step: 42
JOB test speedup 2.566261041561506
TPCH test speedup 5.27345998758363
TPCH skew test speedup 5.006355672377359
Epoch 61/300 |loss: 0.000687| train set 5.045x speedup, test set 5.006x speedup, val set 4.837x speedup, step: 43
JOB test speedup 2.646135433756603
TPCH test speedup 5.179525586430501
TPCH skew test speedup 4.92246616804118
Epoch 62/300 |loss: 0.000724| train set 5.056x speedup, test set 4.922x speedup, val set 4.865x speedup, step: 44
JOB test speedup 2.5591617435845997
TPCH test speedup 5.238025724889566
TPCH skew test speedup 4.944865471530402
Epoch 63/300 |loss: 0.000727| train set 5.119x speedup, test set 4.945x speedup, val set 4.772x speedup, step: 45
JOB test speedup 2.6319678137153186
TPCH test speedup 5.117877524889507
TPCH skew test speedup 4.858254405473529
Epoch 64/300 |loss: 0.000735| train set 5.083x speedup, test set 4.858x speedup, val set 4.882x speedup, step: 46
JOB test speedup 2.5876601503593775
TPCH test speedup 5.126450216129246
TPCH skew test speedup 4.870500635669383
Epoch 65/300 |loss: 0.000716| train set 5.130x speedup, test set 4.871x speedup, val set 4.628x speedup, step: 47
JOB test speedup 2.543163958944033
TPCH test speedup 5.22996528948704
TPCH skew test speedup 4.965315957387073
Epoch 66/300 |loss: 0.000693| train set 5.119x speedup, test set 4.965x speedup, val set 4.817x speedup, step: 48
JOB test speedup 2.645934953565302
TPCH test speedup 5.151161839885002
TPCH skew test speedup 4.894457460116102
Epoch 67/300 |loss: 0.000704| train set 5.145x speedup, test set 4.894x speedup, val set 4.813x speedup, step: 49
early stopping at epoch 67
Training per epoch cost 3.439 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.187s, pg runtime 0.072s, speedup 0.385x
02, opt runtime 0.183s, model runtime 0.240s, pg runtime 0.189s, speedup 0.788x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 2.969s, pg runtime 2.959s, speedup 0.997x
11, opt runtime 0.294s, model runtime 0.875s, pg runtime 2.352s, speedup 2.688x
12, opt runtime 0.463s, model runtime 0.557s, pg runtime 0.557s, speedup 1.000x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.366s, pg runtime 0.354s, speedup 0.966x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.086s, pg runtime 0.086s, speedup 1.000x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.231s, pg runtime 0.891s, speedup 3.855x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.209s, pg runtime 0.137s, speedup 0.653x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.462s, pg runtime 1.380s, speedup 0.944x
21, opt runtime 22.482s, model runtime 22.482s, pg runtime 22.482s, speedup 1.000x
22, opt runtime 6.519s, model runtime 6.519s, pg runtime 6.519s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
28, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
29, opt runtime 5.362s, model runtime 5.646s, pg runtime 5.362s, speedup 0.950x
30, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.639s, model runtime 17.885s, pg runtime 462.544s, speedup 25.862x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.316s, model runtime 1.342s, pg runtime 1.352s, speedup 1.007x
21, opt runtime 23.119s, model runtime 23.119s, pg runtime 23.119s, speedup 1.000x
22, opt runtime 22.332s, model runtime 22.449s, pg runtime 22.449s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 9.098s, pg runtime 6.749s, speedup 0.742x
28, opt runtime 7.213s, model runtime 10.591s, pg runtime 7.213s, speedup 0.681x
29, opt runtime 5.223s, model runtime 5.730s, pg runtime 5.223s, speedup 0.912x
30, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
36, opt runtime 14.422s, model runtime 14.422s, pg runtime 497.542s, speedup 34.499x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 19, train speedup 5.085, test speedup 2.899, val speedup 5.163
TPCH best validation speedup epoch: 19, train speedup 5.085, test speedup 5.348, val speedup 5.163
TPCH Skew best validation speedup epoch: 19, train speedup 5.085, test speedup 5.089, val speedup 5.163
execution cost 0:05:17.576123
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.128401, and there are 9604 training samples
in channel 9
JOB test speedup 2.53763913464708
TPCH test speedup 2.6529628399463943
TPCH skew test speedup 2.5089663302047547
Epoch 0/300 |loss: 0.037868| train set 2.507x speedup, test set 2.509x speedup, val set 2.489x speedup, step: 1
JOB test speedup 2.3274582829005115
TPCH test speedup 2.7975987962272235
TPCH skew test speedup 2.690669636814816
Epoch 1/300 |loss: 0.017468| train set 2.651x speedup, test set 2.691x speedup, val set 2.606x speedup, step: 2
JOB test speedup 1.0043571533737519
TPCH test speedup 3.036282154755056
TPCH skew test speedup 2.8663867493733597
Epoch 2/300 |loss: 0.011527| train set 2.736x speedup, test set 2.866x speedup, val set 2.702x speedup, step: 3
JOB test speedup 2.5361562067477266
TPCH test speedup 2.816208570518991
TPCH skew test speedup 2.814803494112461
Epoch 3/300 |loss: 0.009677| train set 2.784x speedup, test set 2.815x speedup, val set 2.678x speedup, step: 4
JOB test speedup 0.5618051091403637
TPCH test speedup 3.7813351731270273
TPCH skew test speedup 3.531432889295349
Epoch 4/300 |loss: 0.007995| train set 3.428x speedup, test set 3.531x speedup, val set 3.540x speedup, step: 1
JOB test speedup 1.0518072959317764
TPCH test speedup 4.781204133669526
TPCH skew test speedup 4.474147187073354
Epoch 5/300 |loss: 0.006623| train set 3.766x speedup, test set 4.474x speedup, val set 4.404x speedup, step: 2
JOB test speedup 1.0590558122405875
TPCH test speedup 4.731885936539368
TPCH skew test speedup 4.223336605400046
Epoch 6/300 |loss: 0.005907| train set 3.508x speedup, test set 4.223x speedup, val set 4.240x speedup, step: 3
JOB test speedup 0.9804919959358821
TPCH test speedup 4.8917326664259
TPCH skew test speedup 4.476807066503508
Epoch 7/300 |loss: 0.005574| train set 4.028x speedup, test set 4.477x speedup, val set 4.580x speedup, step: 4
JOB test speedup 1.0148538623933017
TPCH test speedup 4.927316546888898
TPCH skew test speedup 4.499052780573028
Epoch 8/300 |loss: 0.007603| train set 4.026x speedup, test set 4.499x speedup, val set 4.772x speedup, step: 5
JOB test speedup 1.0079230738889238
TPCH test speedup 4.82539572860776
TPCH skew test speedup 4.332394181426688
Epoch 9/300 |loss: 0.004868| train set 3.789x speedup, test set 4.332x speedup, val set 4.564x speedup, step: 1
JOB test speedup 1.024152306127574
TPCH test speedup 3.8170339929384314
TPCH skew test speedup 3.7330771669342075
Epoch 10/300 |loss: 0.004808| train set 3.655x speedup, test set 3.733x speedup, val set 4.137x speedup, step: 2
JOB test speedup 1.1135012622005476
TPCH test speedup 5.019483226251825
TPCH skew test speedup 4.506542391382835
Epoch 11/300 |loss: 0.003758| train set 4.374x speedup, test set 4.507x speedup, val set 4.619x speedup, step: 3
JOB test speedup 1.11572975724234
TPCH test speedup 5.269527747166523
TPCH skew test speedup 4.811542122322235
Epoch 12/300 |loss: 0.003599| train set 4.607x speedup, test set 4.812x speedup, val set 5.099x speedup, step: 4
JOB test speedup 2.7945604784791835
TPCH test speedup 5.148579251751682
TPCH skew test speedup 4.170847701604427
Epoch 13/300 |loss: 0.003447| train set 4.938x speedup, test set 4.171x speedup, val set 4.887x speedup, step: 5
JOB test speedup 2.9206596041627315
TPCH test speedup 5.256484216632946
TPCH skew test speedup 4.103742865954249
Epoch 14/300 |loss: 0.003723| train set 4.821x speedup, test set 4.104x speedup, val set 5.064x speedup, step: 1
JOB test speedup 3.0074512028769487
TPCH test speedup 5.198738362409373
TPCH skew test speedup 4.214126670213465
Epoch 15/300 |loss: 0.002905| train set 4.927x speedup, test set 4.214x speedup, val set 5.011x speedup, step: 2
JOB test speedup 2.965309287458744
TPCH test speedup 4.213119827874339
TPCH skew test speedup 3.545786235775235
Epoch 16/300 |loss: 0.002566| train set 5.084x speedup, test set 3.546x speedup, val set 4.970x speedup, step: 3
JOB test speedup 2.417551106373923
TPCH test speedup 5.11514145736257
TPCH skew test speedup 4.1394646187164845
Epoch 17/300 |loss: 0.002611| train set 4.744x speedup, test set 4.139x speedup, val set 4.939x speedup, step: 4
JOB test speedup 2.6316962090581657
TPCH test speedup 5.2720102068722445
TPCH skew test speedup 4.192836244700792
Epoch 18/300 |loss: 0.002302| train set 4.708x speedup, test set 4.193x speedup, val set 4.861x speedup, step: 5
JOB test speedup 2.134187146511414
TPCH test speedup 5.170177464188362
TPCH skew test speedup 4.170167220767286
Epoch 19/300 |loss: 0.002270| train set 4.780x speedup, test set 4.170x speedup, val set 4.897x speedup, step: 6
JOB test speedup 3.0958074595042833
TPCH test speedup 3.7019382225838475
TPCH skew test speedup 3.225984017503482
Epoch 20/300 |loss: 0.002223| train set 4.889x speedup, test set 3.226x speedup, val set 4.811x speedup, step: 7
JOB test speedup 2.144802555311177
TPCH test speedup 3.0975521142301927
TPCH skew test speedup 2.8080863050455958
Epoch 21/300 |loss: 0.002256| train set 3.392x speedup, test set 2.808x speedup, val set 3.083x speedup, step: 8
JOB test speedup 3.074248135628053
TPCH test speedup 4.131014232366387
TPCH skew test speedup 3.4855921000375427
Epoch 22/300 |loss: 0.003200| train set 4.407x speedup, test set 3.486x speedup, val set 4.028x speedup, step: 9
JOB test speedup 2.559627626852369
TPCH test speedup 5.398565162805606
TPCH skew test speedup 5.092188623189166
Epoch 23/300 |loss: 0.002080| train set 5.193x speedup, test set 5.092x speedup, val set 4.978x speedup, step: 10
JOB test speedup 2.8475631391543033
TPCH test speedup 3.9510200887401052
TPCH skew test speedup 3.468457933801728
Epoch 24/300 |loss: 0.002109| train set 4.831x speedup, test set 3.468x speedup, val set 5.007x speedup, step: 11
JOB test speedup 2.5516635320805476
TPCH test speedup 5.508907978485214
TPCH skew test speedup 5.1599447660632904
Epoch 25/300 |loss: 0.001919| train set 5.028x speedup, test set 5.160x speedup, val set 4.938x speedup, step: 12
JOB test speedup 3.0005602766200594
TPCH test speedup 5.177883391217667
TPCH skew test speedup 4.938948893191631
Epoch 26/300 |loss: 0.001892| train set 4.805x speedup, test set 4.939x speedup, val set 5.109x speedup, step: 13
JOB test speedup 2.2861605676974763
TPCH test speedup 5.186342812782389
TPCH skew test speedup 4.953346161971696
Epoch 27/300 |loss: 0.001902| train set 5.179x speedup, test set 4.953x speedup, val set 4.926x speedup, step: 14
JOB test speedup 3.085876209392174
TPCH test speedup 4.013693663666325
TPCH skew test speedup 4.041902728056667
Epoch 28/300 |loss: 0.001884| train set 5.105x speedup, test set 4.042x speedup, val set 5.043x speedup, step: 15
JOB test speedup 2.712208251587572
TPCH test speedup 3.5105469233081896
TPCH skew test speedup 3.443021243310378
Epoch 29/300 |loss: 0.001811| train set 5.053x speedup, test set 3.443x speedup, val set 4.467x speedup, step: 16
JOB test speedup 2.644483907684544
TPCH test speedup 5.093826389401294
TPCH skew test speedup 4.10453836767165
Epoch 30/300 |loss: 0.002123| train set 5.134x speedup, test set 4.105x speedup, val set 4.925x speedup, step: 17
JOB test speedup 2.2432369435252846
TPCH test speedup 5.241620373100949
TPCH skew test speedup 4.781795420896223
Epoch 31/300 |loss: 0.001562| train set 5.104x speedup, test set 4.782x speedup, val set 4.930x speedup, step: 18
JOB test speedup 3.152214401193423
TPCH test speedup 4.03707749426401
TPCH skew test speedup 3.52635335847008
Epoch 32/300 |loss: 0.001494| train set 4.113x speedup, test set 3.526x speedup, val set 3.974x speedup, step: 19
JOB test speedup 2.6309994522634836
TPCH test speedup 5.423212293066421
TPCH skew test speedup 5.121668712470805
Epoch 33/300 |loss: 0.001575| train set 5.192x speedup, test set 5.122x speedup, val set 5.091x speedup, step: 20
JOB test speedup 2.492439619438036
TPCH test speedup 5.339552439508163
TPCH skew test speedup 4.757284592133853
Epoch 34/300 |loss: 0.001515| train set 5.176x speedup, test set 4.757x speedup, val set 4.951x speedup, step: 21
JOB test speedup 3.1134257961939062
TPCH test speedup 4.338472905993866
TPCH skew test speedup 4.178340163444377
Epoch 35/300 |loss: 0.001493| train set 5.174x speedup, test set 4.178x speedup, val set 4.084x speedup, step: 22
JOB test speedup 2.6121458297906233
TPCH test speedup 5.276229249497161
TPCH skew test speedup 4.993806250654806
Epoch 36/300 |loss: 0.001542| train set 4.983x speedup, test set 4.994x speedup, val set 4.955x speedup, step: 23
JOB test speedup 3.10584117962953
TPCH test speedup 5.1983962935968675
TPCH skew test speedup 4.7412306070291494
Epoch 37/300 |loss: 0.001461| train set 5.149x speedup, test set 4.741x speedup, val set 4.759x speedup, step: 24
JOB test speedup 2.905487083196209
TPCH test speedup 3.8611373121920707
TPCH skew test speedup 3.8951115598819275
Epoch 38/300 |loss: 0.001547| train set 5.199x speedup, test set 3.895x speedup, val set 5.024x speedup, step: 25
JOB test speedup 2.5553330210945018
TPCH test speedup 3.9276613151615396
TPCH skew test speedup 3.9228747984346755
Epoch 39/300 |loss: 0.001230| train set 5.130x speedup, test set 3.923x speedup, val set 4.799x speedup, step: 26
JOB test speedup 2.902088577736425
TPCH test speedup 4.247972557893479
TPCH skew test speedup 4.121919506153493
Epoch 40/300 |loss: 0.001023| train set 5.198x speedup, test set 4.122x speedup, val set 4.978x speedup, step: 27
JOB test speedup 2.6511048316919483
TPCH test speedup 3.79918710236497
TPCH skew test speedup 3.7819146647602855
Epoch 41/300 |loss: 0.000966| train set 5.178x speedup, test set 3.782x speedup, val set 4.740x speedup, step: 28
JOB test speedup 2.548045255959988
TPCH test speedup 3.963367033648225
TPCH skew test speedup 3.9647898941851722
Epoch 42/300 |loss: 0.001068| train set 5.196x speedup, test set 3.965x speedup, val set 4.963x speedup, step: 29
JOB test speedup 2.9629084009357527
TPCH test speedup 3.8467140001664797
TPCH skew test speedup 3.864780599725164
Epoch 43/300 |loss: 0.001055| train set 5.160x speedup, test set 3.865x speedup, val set 4.755x speedup, step: 30
JOB test speedup 2.9489177342150454
TPCH test speedup 4.075362158251803
TPCH skew test speedup 4.0570697930921895
Epoch 44/300 |loss: 0.001399| train set 5.190x speedup, test set 4.057x speedup, val set 5.090x speedup, step: 1
JOB test speedup 3.0378607625736813
TPCH test speedup 5.41203979567713
TPCH skew test speedup 5.104531181441296
Epoch 45/300 |loss: 0.001245| train set 5.143x speedup, test set 5.105x speedup, val set 5.089x speedup, step: 2
JOB test speedup 3.133620240264157
TPCH test speedup 4.1076061108360085
TPCH skew test speedup 4.092198673309394
Epoch 46/300 |loss: 0.001064| train set 5.089x speedup, test set 4.092x speedup, val set 4.012x speedup, step: 3
JOB test speedup 2.715980884461431
TPCH test speedup 4.051969874018946
TPCH skew test speedup 3.913777882236289
Epoch 47/300 |loss: 0.001339| train set 4.711x speedup, test set 3.914x speedup, val set 3.891x speedup, step: 4
JOB test speedup 2.2414997999014123
TPCH test speedup 4.6133685292968485
TPCH skew test speedup 4.295742833775964
Epoch 48/300 |loss: 0.002090| train set 3.794x speedup, test set 4.296x speedup, val set 4.160x speedup, step: 5
early stopping at epoch 48
Training per epoch cost 2.358 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.187s, pg runtime 0.072s, speedup 0.385x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 0.463s, model runtime 0.745s, pg runtime 0.557s, speedup 0.748x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.065s, pg runtime 0.086s, speedup 1.315x
21, opt runtime 0.626s, model runtime 2.614s, pg runtime 2.558s, speedup 0.979x
22, opt runtime 0.136s, model runtime 0.341s, pg runtime 0.891s, speedup 2.617x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.065s, pg runtime 0.023s, speedup 0.357x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 23.961s, pg runtime 32.278s, speedup 1.347x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
16, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.462s, pg runtime 1.380s, speedup 0.944x
21, opt runtime 22.482s, model runtime 29.334s, pg runtime 22.482s, speedup 0.766x
22, opt runtime 6.519s, model runtime 14.361s, pg runtime 6.519s, speedup 0.454x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.497s, pg runtime 7.268s, speedup 0.969x
28, opt runtime 6.854s, model runtime 7.512s, pg runtime 6.854s, speedup 0.912x
29, opt runtime 5.362s, model runtime 5.646s, pg runtime 5.362s, speedup 0.950x
30, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 1.013s, pg runtime 0.912s, speedup 0.900x
40, opt runtime 0.873s, model runtime 1.074s, pg runtime 0.873s, speedup 0.812x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
16, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.316s, model runtime 1.342s, pg runtime 1.352s, speedup 1.007x
21, opt runtime 23.119s, model runtime 30.317s, pg runtime 23.119s, speedup 0.763x
22, opt runtime 22.332s, model runtime 22.332s, pg runtime 22.449s, speedup 1.005x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 7.579s, pg runtime 6.749s, speedup 0.890x
28, opt runtime 7.213s, model runtime 8.026s, pg runtime 7.213s, speedup 0.899x
29, opt runtime 5.223s, model runtime 5.730s, pg runtime 5.223s, speedup 0.912x
30, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 1.018s, pg runtime 0.938s, speedup 0.922x
40, opt runtime 0.967s, model runtime 1.128s, pg runtime 0.967s, speedup 0.857x
====================
JOB best validation speedup epoch: 44, train speedup 5.190, test speedup 2.949, val speedup 5.090
TPCH best validation speedup epoch: 44, train speedup 5.190, test speedup 4.075, val speedup 5.090
TPCH Skew best validation speedup epoch: 44, train speedup 5.190, test speedup 4.057, val speedup 5.090
execution cost 0:02:48.127228
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.166893, and there are 9604 training samples
in channel 9
JOB test speedup 2.53763913464708
TPCH test speedup 2.6529628399463943
TPCH skew test speedup 2.5089663302047547
Epoch 0/300 |loss: 0.037869| train set 2.507x speedup, test set 2.509x speedup, val set 2.489x speedup, step: 1
JOB test speedup 2.3254352857887928
TPCH test speedup 2.8404244409913426
TPCH skew test speedup 2.703444548854638
Epoch 1/300 |loss: 0.017504| train set 2.686x speedup, test set 2.703x speedup, val set 2.636x speedup, step: 2
JOB test speedup 1.0075495488859365
TPCH test speedup 3.036282154755056
TPCH skew test speedup 2.8663867493733597
Epoch 2/300 |loss: 0.011659| train set 2.735x speedup, test set 2.866x speedup, val set 2.702x speedup, step: 3
JOB test speedup 2.5192963424358688
TPCH test speedup 2.9990750402912405
TPCH skew test speedup 2.946171612673994
Epoch 3/300 |loss: 0.009563| train set 2.738x speedup, test set 2.946x speedup, val set 2.833x speedup, step: 4
JOB test speedup 2.570886895422283
TPCH test speedup 3.6405470373152053
TPCH skew test speedup 3.482828812596918
Epoch 4/300 |loss: 0.007886| train set 3.456x speedup, test set 3.483x speedup, val set 3.391x speedup, step: 1
JOB test speedup 1.055308909295786
TPCH test speedup 4.034114932434604
TPCH skew test speedup 3.4296214028165752
Epoch 5/300 |loss: 0.006640| train set 3.483x speedup, test set 3.430x speedup, val set 3.681x speedup, step: 2
JOB test speedup 1.0587842539297652
TPCH test speedup 3.7102186042796137
TPCH skew test speedup 3.2494785277318354
Epoch 6/300 |loss: 0.005846| train set 3.482x speedup, test set 3.249x speedup, val set 3.409x speedup, step: 3
JOB test speedup 0.9942046417685886
TPCH test speedup 3.527815588158449
TPCH skew test speedup 3.4366697648298947
Epoch 7/300 |loss: 0.005533| train set 3.822x speedup, test set 3.437x speedup, val set 3.390x speedup, step: 4
JOB test speedup 1.1211013341591827
TPCH test speedup 5.130879832176405
TPCH skew test speedup 4.724062141641016
Epoch 8/300 |loss: 0.007362| train set 4.329x speedup, test set 4.724x speedup, val set 4.816x speedup, step: 5
JOB test speedup 1.0239523017588827
TPCH test speedup 3.914736080117685
TPCH skew test speedup 3.715373365537189
Epoch 9/300 |loss: 0.004697| train set 3.807x speedup, test set 3.715x speedup, val set 4.137x speedup, step: 1
JOB test speedup 1.032056707654283
TPCH test speedup 3.817433851639288
TPCH skew test speedup 3.733421968436702
Epoch 10/300 |loss: 0.004820| train set 3.447x speedup, test set 3.733x speedup, val set 4.138x speedup, step: 2
JOB test speedup 1.1307214542967614
TPCH test speedup 4.999717220388364
TPCH skew test speedup 4.220106857691797
Epoch 11/300 |loss: 0.003760| train set 4.185x speedup, test set 4.220x speedup, val set 4.580x speedup, step: 3
JOB test speedup 2.9512315459644842
TPCH test speedup 5.295599694434338
TPCH skew test speedup 5.056763795152622
Epoch 12/300 |loss: 0.003598| train set 4.588x speedup, test set 5.057x speedup, val set 4.946x speedup, step: 4
JOB test speedup 2.8927764136676686
TPCH test speedup 5.234603288205316
TPCH skew test speedup 4.206959039149871
Epoch 13/300 |loss: 0.003435| train set 5.063x speedup, test set 4.207x speedup, val set 4.897x speedup, step: 5
JOB test speedup 2.949220815323022
TPCH test speedup 4.083284783065164
TPCH skew test speedup 3.4592712756062793
Epoch 14/300 |loss: 0.004026| train set 4.048x speedup, test set 3.459x speedup, val set 4.061x speedup, step: 6
JOB test speedup 3.0245310136264743
TPCH test speedup 5.328700053360115
TPCH skew test speedup 4.281187817535341
Epoch 15/300 |loss: 0.002950| train set 4.961x speedup, test set 4.281x speedup, val set 5.121x speedup, step: 7
JOB test speedup 3.0386432459431707
TPCH test speedup 4.169479826959387
TPCH skew test speedup 3.5284586771896858
Epoch 16/300 |loss: 0.002493| train set 4.749x speedup, test set 3.528x speedup, val set 4.927x speedup, step: 8
JOB test speedup 2.0627535380966053
TPCH test speedup 5.199085024125937
TPCH skew test speedup 4.035708397545403
Epoch 17/300 |loss: 0.002618| train set 4.562x speedup, test set 4.036x speedup, val set 4.962x speedup, step: 9
JOB test speedup 2.956394776134369
TPCH test speedup 5.2775245850023005
TPCH skew test speedup 4.235819907782411
Epoch 18/300 |loss: 0.002491| train set 4.754x speedup, test set 4.236x speedup, val set 5.011x speedup, step: 10
JOB test speedup 3.0652746700921574
TPCH test speedup 5.370954576064194
TPCH skew test speedup 4.274322939122619
Epoch 19/300 |loss: 0.002281| train set 4.490x speedup, test set 4.274x speedup, val set 4.993x speedup, step: 1
JOB test speedup 3.0329386082991094
TPCH test speedup 5.176916299745419
TPCH skew test speedup 4.066481062205179
Epoch 20/300 |loss: 0.002084| train set 4.877x speedup, test set 4.066x speedup, val set 4.804x speedup, step: 2
JOB test speedup 2.092091197324799
TPCH test speedup 3.1502345667888085
TPCH skew test speedup 2.8619364410441217
Epoch 21/300 |loss: 0.002251| train set 3.390x speedup, test set 2.862x speedup, val set 3.358x speedup, step: 3
JOB test speedup 3.1067931981165984
TPCH test speedup 3.389027408410299
TPCH skew test speedup 2.9516163074372432
Epoch 22/300 |loss: 0.002686| train set 3.935x speedup, test set 2.952x speedup, val set 3.311x speedup, step: 4
JOB test speedup 3.0373381278191984
TPCH test speedup 4.053116885983167
TPCH skew test speedup 3.4513823446059715
Epoch 23/300 |loss: 0.002072| train set 5.164x speedup, test set 3.451x speedup, val set 5.083x speedup, step: 5
JOB test speedup 2.973439254074852
TPCH test speedup 4.062445122961104
TPCH skew test speedup 3.4438587651672945
Epoch 24/300 |loss: 0.002059| train set 4.753x speedup, test set 3.444x speedup, val set 5.032x speedup, step: 1
JOB test speedup 3.1761947584315746
TPCH test speedup 4.1016744556428995
TPCH skew test speedup 3.562750314469819
Epoch 25/300 |loss: 0.001891| train set 5.186x speedup, test set 3.563x speedup, val set 4.927x speedup, step: 2
JOB test speedup 2.886084844089216
TPCH test speedup 5.321000464725774
TPCH skew test speedup 4.27359461646408
Epoch 26/300 |loss: 0.001830| train set 4.710x speedup, test set 4.274x speedup, val set 5.017x speedup, step: 3
JOB test speedup 2.174915883621363
TPCH test speedup 5.300942497411069
TPCH skew test speedup 4.26511038056054
Epoch 27/300 |loss: 0.001810| train set 5.182x speedup, test set 4.265x speedup, val set 5.090x speedup, step: 4
JOB test speedup 3.061787402260346
TPCH test speedup 4.0291567927623495
TPCH skew test speedup 3.5369613244803175
Epoch 28/300 |loss: 0.002041| train set 5.072x speedup, test set 3.537x speedup, val set 4.441x speedup, step: 5
JOB test speedup 2.5369623131748202
TPCH test speedup 3.1675705422916063
TPCH skew test speedup 2.802926855107998
Epoch 29/300 |loss: 0.001746| train set 5.137x speedup, test set 2.803x speedup, val set 3.668x speedup, step: 6
JOB test speedup 3.0826018120697865
TPCH test speedup 4.042178176703934
TPCH skew test speedup 3.417672320788012
Epoch 30/300 |loss: 0.001918| train set 5.177x speedup, test set 3.418x speedup, val set 4.909x speedup, step: 7
JOB test speedup 3.0190794098845717
TPCH test speedup 5.276674450327197
TPCH skew test speedup 4.268660444159486
Epoch 31/300 |loss: 0.001639| train set 5.121x speedup, test set 4.269x speedup, val set 5.012x speedup, step: 8
JOB test speedup 3.0984030379094314
TPCH test speedup 3.3392322086177937
TPCH skew test speedup 2.9785571665650634
Epoch 32/300 |loss: 0.001519| train set 4.108x speedup, test set 2.979x speedup, val set 3.278x speedup, step: 9
JOB test speedup 2.9970460529977703
TPCH test speedup 5.1988730276233985
TPCH skew test speedup 4.783057333395133
Epoch 33/300 |loss: 0.001580| train set 5.104x speedup, test set 4.783x speedup, val set 5.168x speedup, step: 10
JOB test speedup 3.01868601005437
TPCH test speedup 5.1413136983717065
TPCH skew test speedup 4.187470033415255
Epoch 34/300 |loss: 0.001611| train set 5.145x speedup, test set 4.187x speedup, val set 5.136x speedup, step: 1
JOB test speedup 3.1744223308154385
TPCH test speedup 4.050479833684319
TPCH skew test speedup 3.448779791639699
Epoch 35/300 |loss: 0.001509| train set 5.083x speedup, test set 3.449x speedup, val set 4.512x speedup, step: 2
JOB test speedup 3.122047958998349
TPCH test speedup 3.9825086539781833
TPCH skew test speedup 3.879774276320218
Epoch 36/300 |loss: 0.001467| train set 5.186x speedup, test set 3.880x speedup, val set 5.007x speedup, step: 3
JOB test speedup 3.155495213431164
TPCH test speedup 4.09420798474033
TPCH skew test speedup 3.460283846395991
Epoch 37/300 |loss: 0.001434| train set 5.143x speedup, test set 3.460x speedup, val set 5.055x speedup, step: 4
JOB test speedup 2.7086313325396483
TPCH test speedup 4.061132164988646
TPCH skew test speedup 3.441280768029225
Epoch 38/300 |loss: 0.001670| train set 5.187x speedup, test set 3.441x speedup, val set 3.949x speedup, step: 5
JOB test speedup 2.5322018420457426
TPCH test speedup 4.062024534609668
TPCH skew test speedup 3.551355528447775
Epoch 39/300 |loss: 0.001297| train set 5.136x speedup, test set 3.551x speedup, val set 4.412x speedup, step: 6
JOB test speedup 2.5589197801439996
TPCH test speedup 3.9595444439292606
TPCH skew test speedup 3.4832319109411047
Epoch 40/300 |loss: 0.001120| train set 5.143x speedup, test set 3.483x speedup, val set 4.015x speedup, step: 7
JOB test speedup 3.0113738072665783
TPCH test speedup 4.025636115341372
TPCH skew test speedup 3.4955795512077947
Epoch 41/300 |loss: 0.001242| train set 5.198x speedup, test set 3.496x speedup, val set 4.977x speedup, step: 8
JOB test speedup 2.158763627936378
TPCH test speedup 4.13924776510283
TPCH skew test speedup 3.561255121109983
Epoch 42/300 |loss: 0.001251| train set 5.160x speedup, test set 3.561x speedup, val set 3.987x speedup, step: 9
JOB test speedup 2.6563924506655066
TPCH test speedup 4.063508632935136
TPCH skew test speedup 3.43555163913477
Epoch 43/300 |loss: 0.001212| train set 5.181x speedup, test set 3.436x speedup, val set 5.180x speedup, step: 10
JOB test speedup 2.6642452084469417
TPCH test speedup 5.132628241378114
TPCH skew test speedup 4.239657556378709
Epoch 44/300 |loss: 0.001354| train set 5.155x speedup, test set 4.240x speedup, val set 5.058x speedup, step: 11
JOB test speedup 3.093881614648033
TPCH test speedup 4.090840346665799
TPCH skew test speedup 3.4496984890389344
Epoch 45/300 |loss: 0.001313| train set 5.188x speedup, test set 3.450x speedup, val set 4.567x speedup, step: 12
JOB test speedup 2.708291029847026
TPCH test speedup 4.061132164988646
TPCH skew test speedup 3.441280768029225
Epoch 46/300 |loss: 0.001136| train set 4.904x speedup, test set 3.441x speedup, val set 3.991x speedup, step: 13
JOB test speedup 3.058599691718908
TPCH test speedup 3.9786819378075173
TPCH skew test speedup 3.875749925379949
Epoch 47/300 |loss: 0.001282| train set 4.989x speedup, test set 3.876x speedup, val set 3.894x speedup, step: 14
JOB test speedup 3.1338233410075564
TPCH test speedup 3.8413980950053714
TPCH skew test speedup 3.3146047989072973
Epoch 48/300 |loss: 0.001847| train set 4.821x speedup, test set 3.315x speedup, val set 4.648x speedup, step: 15
JOB test speedup 2.650048140549255
TPCH test speedup 3.9573364525278985
TPCH skew test speedup 3.9980262693425415
Epoch 49/300 |loss: 0.001925| train set 4.831x speedup, test set 3.998x speedup, val set 3.957x speedup, step: 16
early stopping at epoch 49
Training per epoch cost 2.363 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.016s, pg runtime 0.014s, speedup 0.886x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 0.463s, model runtime 0.580s, pg runtime 0.557s, speedup 0.960x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.458s, pg runtime 0.453s, speedup 0.991x
17, opt runtime 0.327s, model runtime 0.349s, pg runtime 0.354s, speedup 1.012x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 2.566s, pg runtime 2.558s, speedup 0.997x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.556s, pg runtime 0.189s, speedup 0.340x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.209s, pg runtime 0.137s, speedup 0.653x
30, opt runtime 0.023s, model runtime 0.065s, pg runtime 0.023s, speedup 0.357x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.462s, pg runtime 1.380s, speedup 0.944x
21, opt runtime 22.482s, model runtime 29.334s, pg runtime 22.482s, speedup 0.766x
22, opt runtime 6.519s, model runtime 14.361s, pg runtime 6.519s, speedup 0.454x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.497s, pg runtime 7.268s, speedup 0.969x
28, opt runtime 6.854s, model runtime 7.512s, pg runtime 6.854s, speedup 0.912x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 32.888s, pg runtime 608.707s, speedup 18.509x
32, opt runtime 24.706s, model runtime 32.983s, pg runtime 610.808s, speedup 18.519x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.639s, model runtime 17.885s, pg runtime 462.544s, speedup 25.862x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.316s, model runtime 1.342s, pg runtime 1.352s, speedup 1.007x
21, opt runtime 23.119s, model runtime 30.317s, pg runtime 23.119s, speedup 0.763x
22, opt runtime 22.332s, model runtime 22.332s, pg runtime 22.449s, speedup 1.005x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 7.579s, pg runtime 6.749s, speedup 0.890x
28, opt runtime 7.213s, model runtime 8.026s, pg runtime 7.213s, speedup 0.899x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 31.969s, pg runtime 609.432s, speedup 19.063x
32, opt runtime 24.451s, model runtime 32.240s, pg runtime 628.615s, speedup 19.498x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
36, opt runtime 14.422s, model runtime 14.422s, pg runtime 497.542s, speedup 34.499x
37, opt runtime 32.901s, model runtime 91.848s, pg runtime 32.901s, speedup 0.358x
38, opt runtime 23.543s, model runtime 91.587s, pg runtime 23.543s, speedup 0.257x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 34, train speedup 5.145, test speedup 3.019, val speedup 5.136
TPCH best validation speedup epoch: 34, train speedup 5.145, test speedup 5.141, val speedup 5.136
TPCH Skew best validation speedup epoch: 34, train speedup 5.145, test speedup 4.187, val speedup 5.136
execution cost 0:02:51.775086
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.175137, and there are 9604 training samples
in channel 9
JOB test speedup 2.53763913464708
TPCH test speedup 2.6529628399463943
TPCH skew test speedup 2.5089663302047547
Epoch 0/300 |loss: 0.037869| train set 2.507x speedup, test set 2.509x speedup, val set 2.489x speedup, step: 1
JOB test speedup 2.344764572202585
TPCH test speedup 2.8404244409913426
TPCH skew test speedup 2.703444548854638
Epoch 1/300 |loss: 0.017508| train set 2.687x speedup, test set 2.703x speedup, val set 2.636x speedup, step: 2
JOB test speedup 1.0013028716669763
TPCH test speedup 3.037302007336657
TPCH skew test speedup 2.866655716939073
Epoch 2/300 |loss: 0.011676| train set 2.740x speedup, test set 2.867x speedup, val set 2.703x speedup, step: 3
JOB test speedup 2.541170465116655
TPCH test speedup 2.86614982644871
TPCH skew test speedup 2.894926317954794
Epoch 3/300 |loss: 0.009836| train set 2.893x speedup, test set 2.895x speedup, val set 2.767x speedup, step: 4
JOB test speedup 2.540594425490307
TPCH test speedup 3.4943756570902513
TPCH skew test speedup 3.40504572649603
Epoch 4/300 |loss: 0.007886| train set 3.467x speedup, test set 3.405x speedup, val set 3.239x speedup, step: 1
JOB test speedup 1.0519038582158002
TPCH test speedup 4.506996002116701
TPCH skew test speedup 3.9085014868777144
Epoch 5/300 |loss: 0.006650| train set 3.763x speedup, test set 3.909x speedup, val set 4.103x speedup, step: 2
JOB test speedup 0.5645246754101307
TPCH test speedup 4.41356742198845
TPCH skew test speedup 3.6397529206073553
Epoch 6/300 |loss: 0.005854| train set 3.600x speedup, test set 3.640x speedup, val set 4.026x speedup, step: 3
JOB test speedup 1.0160873137415785
TPCH test speedup 4.60886068096297
TPCH skew test speedup 4.226968986837849
Epoch 7/300 |loss: 0.005544| train set 3.815x speedup, test set 4.227x speedup, val set 4.312x speedup, step: 4
JOB test speedup 1.0142140602363843
TPCH test speedup 4.759659112119827
TPCH skew test speedup 4.297613471074142
Epoch 8/300 |loss: 0.007551| train set 3.737x speedup, test set 4.298x speedup, val set 4.372x speedup, step: 5
JOB test speedup 1.0213037282910924
TPCH test speedup 4.6665936710950735
TPCH skew test speedup 3.932354865732575
Epoch 9/300 |loss: 0.004753| train set 3.779x speedup, test set 3.932x speedup, val set 4.130x speedup, step: 1
JOB test speedup 0.9714399421038052
TPCH test speedup 4.828462841618852
TPCH skew test speedup 4.492963253140254
Epoch 10/300 |loss: 0.004878| train set 3.699x speedup, test set 4.493x speedup, val set 4.567x speedup, step: 2
JOB test speedup 2.9336622875223655
TPCH test speedup 4.456881290195918
TPCH skew test speedup 4.171687025088335
Epoch 11/300 |loss: 0.003798| train set 4.559x speedup, test set 4.172x speedup, val set 4.504x speedup, step: 3
JOB test speedup 2.978542827608765
TPCH test speedup 5.251384067076529
TPCH skew test speedup 4.77859191036776
Epoch 12/300 |loss: 0.003545| train set 4.804x speedup, test set 4.779x speedup, val set 5.147x speedup, step: 4
JOB test speedup 3.04470538703561
TPCH test speedup 5.17147116700238
TPCH skew test speedup 4.744998794791182
Epoch 13/300 |loss: 0.003279| train set 5.130x speedup, test set 4.745x speedup, val set 4.962x speedup, step: 5
JOB test speedup 2.9401429766310594
TPCH test speedup 4.443018523198715
TPCH skew test speedup 4.309006635935995
Epoch 14/300 |loss: 0.003499| train set 4.800x speedup, test set 4.309x speedup, val set 5.076x speedup, step: 1
JOB test speedup 3.037980292591192
TPCH test speedup 5.002600614644498
TPCH skew test speedup 4.850787937643885
Epoch 15/300 |loss: 0.002779| train set 5.181x speedup, test set 4.851x speedup, val set 5.076x speedup, step: 2
JOB test speedup 3.0430337672598515
TPCH test speedup 3.873921131445668
TPCH skew test speedup 3.17410423427167
Epoch 16/300 |loss: 0.002449| train set 4.444x speedup, test set 3.174x speedup, val set 3.598x speedup, step: 3
JOB test speedup 2.9288569999405105
TPCH test speedup 4.618646413749947
TPCH skew test speedup 3.3651324439464934
Epoch 17/300 |loss: 0.002558| train set 5.099x speedup, test set 3.365x speedup, val set 4.785x speedup, step: 4
JOB test speedup 2.9170726386983947
TPCH test speedup 3.6897081635661726
TPCH skew test speedup 3.6182373516481205
Epoch 18/300 |loss: 0.002259| train set 4.854x speedup, test set 3.618x speedup, val set 3.510x speedup, step: 5
JOB test speedup 3.0104778248977095
TPCH test speedup 5.275253609919838
TPCH skew test speedup 4.784414323086787
Epoch 19/300 |loss: 0.002207| train set 4.840x speedup, test set 4.784x speedup, val set 4.968x speedup, step: 6
JOB test speedup 3.026831692742131
TPCH test speedup 3.860604240702942
TPCH skew test speedup 3.163561871636439
Epoch 20/300 |loss: 0.002042| train set 4.835x speedup, test set 3.164x speedup, val set 4.286x speedup, step: 7
JOB test speedup 2.1021855259451137
TPCH test speedup 3.12343171798817
TPCH skew test speedup 3.184647990709848
Epoch 21/300 |loss: 0.002147| train set 3.321x speedup, test set 3.185x speedup, val set 3.145x speedup, step: 8
JOB test speedup 3.071448442666497
TPCH test speedup 3.762552226530899
TPCH skew test speedup 3.6051250363902216
Epoch 22/300 |loss: 0.002627| train set 4.769x speedup, test set 3.605x speedup, val set 3.605x speedup, step: 9
JOB test speedup 3.091102755363725
TPCH test speedup 4.253092450066212
TPCH skew test speedup 4.152916760908767
Epoch 23/300 |loss: 0.002031| train set 5.152x speedup, test set 4.153x speedup, val set 4.942x speedup, step: 10
JOB test speedup 2.998486269396907
TPCH test speedup 5.277800654250418
TPCH skew test speedup 5.0730603617644086
Epoch 24/300 |loss: 0.002181| train set 4.756x speedup, test set 5.073x speedup, val set 4.900x speedup, step: 11
JOB test speedup 3.0511345044205527
TPCH test speedup 5.277800654250418
TPCH skew test speedup 5.0730603617644086
Epoch 25/300 |loss: 0.001874| train set 4.887x speedup, test set 5.073x speedup, val set 5.002x speedup, step: 12
JOB test speedup 3.047173568701271
TPCH test speedup 5.264940763131408
TPCH skew test speedup 4.997353556362298
Epoch 26/300 |loss: 0.001914| train set 5.088x speedup, test set 4.997x speedup, val set 5.068x speedup, step: 13
JOB test speedup 3.1223872930578054
TPCH test speedup 5.250184942234017
TPCH skew test speedup 5.026509947570895
Epoch 27/300 |loss: 0.001937| train set 5.082x speedup, test set 5.027x speedup, val set 4.997x speedup, step: 14
JOB test speedup 3.076808883352412
TPCH test speedup 4.264249979947825
TPCH skew test speedup 4.142814314030331
Epoch 28/300 |loss: 0.002018| train set 5.110x speedup, test set 4.143x speedup, val set 5.012x speedup, step: 15
JOB test speedup 2.6250642946767586
TPCH test speedup 5.335299281018801
TPCH skew test speedup 4.884201237392996
Epoch 29/300 |loss: 0.001769| train set 5.099x speedup, test set 4.884x speedup, val set 4.931x speedup, step: 16
JOB test speedup 3.1126494834642586
TPCH test speedup 5.145631409590528
TPCH skew test speedup 4.054282449263632
Epoch 30/300 |loss: 0.001781| train set 5.011x speedup, test set 4.054x speedup, val set 4.863x speedup, step: 17
JOB test speedup 3.0105126422775808
TPCH test speedup 5.317844476180681
TPCH skew test speedup 4.898249166390028
Epoch 31/300 |loss: 0.001601| train set 4.559x speedup, test set 4.898x speedup, val set 4.997x speedup, step: 18
JOB test speedup 3.0208733627791378
TPCH test speedup 4.136455934499456
TPCH skew test speedup 3.982261365808233
Epoch 32/300 |loss: 0.001585| train set 4.010x speedup, test set 3.982x speedup, val set 3.970x speedup, step: 19
JOB test speedup 2.5697000307323696
TPCH test speedup 5.463820806256356
TPCH skew test speedup 4.943029980814426
Epoch 33/300 |loss: 0.001687| train set 5.181x speedup, test set 4.943x speedup, val set 4.882x speedup, step: 20
JOB test speedup 3.090473608967439
TPCH test speedup 5.303055437435108
TPCH skew test speedup 4.848749759942358
Epoch 34/300 |loss: 0.001706| train set 5.103x speedup, test set 4.849x speedup, val set 4.661x speedup, step: 21
JOB test speedup 2.4391757375082244
TPCH test speedup 3.95272155811526
TPCH skew test speedup 3.806287033050581
Epoch 35/300 |loss: 0.001732| train set 4.896x speedup, test set 3.806x speedup, val set 3.795x speedup, step: 22
JOB test speedup 3.1289789801209675
TPCH test speedup 5.3153255362883565
TPCH skew test speedup 4.896563597827382
Epoch 36/300 |loss: 0.001752| train set 5.135x speedup, test set 4.897x speedup, val set 5.061x speedup, step: 23
JOB test speedup 3.157252073962957
TPCH test speedup 5.368899362383162
TPCH skew test speedup 4.91532123159062
Epoch 37/300 |loss: 0.001828| train set 5.103x speedup, test set 4.915x speedup, val set 5.079x speedup, step: 24
JOB test speedup 3.1429477454016648
TPCH test speedup 5.317844476180681
TPCH skew test speedup 4.391723133198787
Epoch 38/300 |loss: 0.001859| train set 5.103x speedup, test set 4.392x speedup, val set 4.970x speedup, step: 25
early stopping at epoch 38
Training per epoch cost 2.354 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.187s, pg runtime 0.072s, speedup 0.385x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.407s, pg runtime 0.313s, speedup 0.769x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 3.011s, pg runtime 3.540s, speedup 1.176x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
22, opt runtime 0.136s, model runtime 0.341s, pg runtime 0.891s, speedup 2.617x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.087s, pg runtime 0.112s, speedup 1.295x
28, opt runtime 0.154s, model runtime 0.476s, pg runtime 0.154s, speedup 0.324x
29, opt runtime 0.136s, model runtime 0.137s, pg runtime 0.137s, speedup 1.000x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.618s, pg runtime 1.315s, speedup 0.813x
33, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 23.961s, pg runtime 32.278s, speedup 1.347x
06, opt runtime 21.143s, model runtime 24.476s, pg runtime 21.143s, speedup 0.864x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
18, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 29.334s, pg runtime 22.482s, speedup 0.766x
22, opt runtime 6.519s, model runtime 14.361s, pg runtime 6.519s, speedup 0.454x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
28, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.639s, model runtime 17.885s, pg runtime 462.544s, speedup 25.862x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 25.217s, pg runtime 20.708s, speedup 0.821x
06, opt runtime 11.965s, model runtime 31.439s, pg runtime 11.965s, speedup 0.381x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 7.915s, model runtime 17.289s, pg runtime 29.436s, speedup 1.703x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 30.317s, pg runtime 23.119s, speedup 0.763x
22, opt runtime 22.332s, model runtime 22.332s, pg runtime 22.449s, speedup 1.005x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 9.098s, pg runtime 6.749s, speedup 0.742x
28, opt runtime 7.213s, model runtime 10.591s, pg runtime 7.213s, speedup 0.681x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
36, opt runtime 14.422s, model runtime 14.422s, pg runtime 497.542s, speedup 34.499x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 14, train speedup 4.800, test speedup 2.940, val speedup 5.076
TPCH best validation speedup epoch: 14, train speedup 4.800, test speedup 4.443, val speedup 5.076
TPCH Skew best validation speedup epoch: 14, train speedup 4.800, test speedup 4.309, val speedup 5.076
execution cost 0:02:15.786767
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.131009, and there are 9604 training samples
in channel 9
JOB test speedup 2.53763913464708
TPCH test speedup 2.6529628399463943
TPCH skew test speedup 2.5089663302047547
Epoch 0/300 |loss: 0.037868| train set 2.507x speedup, test set 2.509x speedup, val set 2.489x speedup, step: 1
JOB test speedup 2.3274582829005115
TPCH test speedup 2.7975987962272235
TPCH skew test speedup 2.690669636814816
Epoch 1/300 |loss: 0.017468| train set 2.651x speedup, test set 2.691x speedup, val set 2.606x speedup, step: 2
JOB test speedup 1.0043571533737519
TPCH test speedup 3.0342319834494917
TPCH skew test speedup 2.864554515278744
Epoch 2/300 |loss: 0.011542| train set 2.746x speedup, test set 2.865x speedup, val set 2.735x speedup, step: 3
JOB test speedup 2.538794594759412
TPCH test speedup 2.988701107911462
TPCH skew test speedup 2.886818293336062
Epoch 3/300 |loss: 0.009734| train set 2.744x speedup, test set 2.887x speedup, val set 2.604x speedup, step: 4
JOB test speedup 0.5628195998430845
TPCH test speedup 3.562995299047183
TPCH skew test speedup 3.4676915348038495
Epoch 4/300 |loss: 0.007909| train set 3.428x speedup, test set 3.468x speedup, val set 3.540x speedup, step: 1
JOB test speedup 1.0503904511724704
TPCH test speedup 3.9523941931184106
TPCH skew test speedup 3.5299079859555875
Epoch 5/300 |loss: 0.006593| train set 3.535x speedup, test set 3.530x speedup, val set 3.565x speedup, step: 2
JOB test speedup 1.0456979711641259
TPCH test speedup 4.746931491056903
TPCH skew test speedup 3.8882140933436484
Epoch 6/300 |loss: 0.005819| train set 3.820x speedup, test set 3.888x speedup, val set 4.210x speedup, step: 3
JOB test speedup 0.9789216683079263
TPCH test speedup 4.805782313110815
TPCH skew test speedup 4.4265332349355395
Epoch 7/300 |loss: 0.005560| train set 4.264x speedup, test set 4.427x speedup, val set 4.558x speedup, step: 4
JOB test speedup 2.298971776295361
TPCH test speedup 5.082479778412033
TPCH skew test speedup 4.692138581659069
Epoch 8/300 |loss: 0.007837| train set 3.935x speedup, test set 4.692x speedup, val set 4.483x speedup, step: 5
JOB test speedup 1.0116732632251917
TPCH test speedup 5.019483226251825
TPCH skew test speedup 4.506542391382835
Epoch 9/300 |loss: 0.004792| train set 4.144x speedup, test set 4.507x speedup, val set 4.166x speedup, step: 1
JOB test speedup 1.0288993850320505
TPCH test speedup 3.875054184975381
TPCH skew test speedup 3.3113719966473742
Epoch 10/300 |loss: 0.004672| train set 3.777x speedup, test set 3.311x speedup, val set 4.194x speedup, step: 2
JOB test speedup 1.1137493255883937
TPCH test speedup 4.857424788713411
TPCH skew test speedup 4.392994170494726
Epoch 11/300 |loss: 0.003759| train set 4.593x speedup, test set 4.393x speedup, val set 4.547x speedup, step: 3
JOB test speedup 1.1133114896642355
TPCH test speedup 5.1000336357457
TPCH skew test speedup 4.127601774354939
Epoch 12/300 |loss: 0.003538| train set 4.657x speedup, test set 4.128x speedup, val set 5.099x speedup, step: 4
JOB test speedup 2.925137073576338
TPCH test speedup 5.310674710925855
TPCH skew test speedup 4.060368669222655
Epoch 13/300 |loss: 0.003441| train set 4.910x speedup, test set 4.060x speedup, val set 4.926x speedup, step: 5
JOB test speedup 1.0304689632529374
TPCH test speedup 3.9817609050275133
TPCH skew test speedup 3.4777998388378295
Epoch 14/300 |loss: 0.004170| train set 4.169x speedup, test set 3.478x speedup, val set 3.929x speedup, step: 6
JOB test speedup 2.572947349477243
TPCH test speedup 5.162473788884757
TPCH skew test speedup 4.131782987894336
Epoch 15/300 |loss: 0.002940| train set 4.965x speedup, test set 4.132x speedup, val set 4.731x speedup, step: 7
JOB test speedup 3.089368663597255
TPCH test speedup 4.77434392929788
TPCH skew test speedup 3.7567234419856366
Epoch 16/300 |loss: 0.002573| train set 4.987x speedup, test set 3.757x speedup, val set 4.913x speedup, step: 8
JOB test speedup 2.05835923043568
TPCH test speedup 5.272482440970114
TPCH skew test speedup 4.085058325414141
Epoch 17/300 |loss: 0.002661| train set 4.818x speedup, test set 4.085x speedup, val set 5.001x speedup, step: 9
JOB test speedup 2.8987089266084736
TPCH test speedup 3.871496186731776
TPCH skew test speedup 3.4449444613439417
Epoch 18/300 |loss: 0.002282| train set 4.674x speedup, test set 3.445x speedup, val set 4.588x speedup, step: 10
JOB test speedup 2.5803041957348056
TPCH test speedup 5.06065204985274
TPCH skew test speedup 4.102936650063287
Epoch 19/300 |loss: 0.002189| train set 4.754x speedup, test set 4.103x speedup, val set 4.494x speedup, step: 1
JOB test speedup 3.04631003423045
TPCH test speedup 3.898694225134041
TPCH skew test speedup 3.335287311285766
Epoch 20/300 |loss: 0.002080| train set 4.880x speedup, test set 3.335x speedup, val set 4.697x speedup, step: 2
JOB test speedup 1.0246670692109174
TPCH test speedup 3.1386366439998943
TPCH skew test speedup 2.8513583854800544
Epoch 21/300 |loss: 0.002251| train set 3.341x speedup, test set 2.851x speedup, val set 3.093x speedup, step: 3
JOB test speedup 2.1604139996171368
TPCH test speedup 4.042004930418306
TPCH skew test speedup 3.5238657618360127
Epoch 22/300 |loss: 0.002907| train set 4.593x speedup, test set 3.524x speedup, val set 4.182x speedup, step: 4
JOB test speedup 2.5630566269340966
TPCH test speedup 4.119968376102912
TPCH skew test speedup 3.474219499021364
Epoch 23/300 |loss: 0.002110| train set 5.125x speedup, test set 3.474x speedup, val set 5.166x speedup, step: 5
JOB test speedup 2.593223495944825
TPCH test speedup 5.294993151548472
TPCH skew test speedup 4.258431847423449
Epoch 24/300 |loss: 0.002017| train set 4.692x speedup, test set 4.258x speedup, val set 4.755x speedup, step: 1
JOB test speedup 2.5683936181620206
TPCH test speedup 5.471829064967141
TPCH skew test speedup 5.130018366173798
Epoch 25/300 |loss: 0.002024| train set 5.183x speedup, test set 5.130x speedup, val set 4.986x speedup, step: 2
JOB test speedup 2.933649672961539
TPCH test speedup 5.177595483092594
TPCH skew test speedup 4.938865828715589
Epoch 26/300 |loss: 0.001889| train set 5.138x speedup, test set 4.939x speedup, val set 5.001x speedup, step: 3
JOB test speedup 2.5938188258352173
TPCH test speedup 5.32617974797316
TPCH skew test speedup 5.011466593105981
Epoch 27/300 |loss: 0.001932| train set 5.089x speedup, test set 5.011x speedup, val set 4.850x speedup, step: 4
JOB test speedup 2.022231905705326
TPCH test speedup 4.042709370939845
TPCH skew test speedup 4.053520195943152
Epoch 28/300 |loss: 0.001959| train set 5.155x speedup, test set 4.054x speedup, val set 5.050x speedup, step: 5
JOB test speedup 2.5773485040374084
TPCH test speedup 3.727231086555078
TPCH skew test speedup 3.796380735525726
Epoch 29/300 |loss: 0.001647| train set 5.106x speedup, test set 3.796x speedup, val set 3.904x speedup, step: 6
JOB test speedup 2.904899043877902
TPCH test speedup 5.25064929951324
TPCH skew test speedup 4.076909573854516
Epoch 30/300 |loss: 0.001974| train set 4.971x speedup, test set 4.077x speedup, val set 4.836x speedup, step: 7
JOB test speedup 2.3506147214444284
TPCH test speedup 5.370065281924092
TPCH skew test speedup 4.157271648518634
Epoch 31/300 |loss: 0.001653| train set 5.108x speedup, test set 4.157x speedup, val set 4.946x speedup, step: 8
JOB test speedup 2.866426229684675
TPCH test speedup 3.9566007604089197
TPCH skew test speedup 3.3776710937318355
Epoch 32/300 |loss: 0.001542| train set 4.114x speedup, test set 3.378x speedup, val set 3.963x speedup, step: 9
JOB test speedup 2.429471068225145
TPCH test speedup 5.5206779705174425
TPCH skew test speedup 4.9615430182458935
Epoch 33/300 |loss: 0.001733| train set 5.186x speedup, test set 4.962x speedup, val set 4.881x speedup, step: 10
JOB test speedup 2.636310430679607
TPCH test speedup 5.277800654250418
TPCH skew test speedup 5.0730603617644086
Epoch 34/300 |loss: 0.001599| train set 5.091x speedup, test set 5.073x speedup, val set 4.957x speedup, step: 1
JOB test speedup 2.9139940890649343
TPCH test speedup 4.253824074330561
TPCH skew test speedup 4.153339206510384
Epoch 35/300 |loss: 0.001501| train set 5.171x speedup, test set 4.153x speedup, val set 3.988x speedup, step: 2
JOB test speedup 3.057242787051269
TPCH test speedup 5.156551596967591
TPCH skew test speedup 4.94320272447771
Epoch 36/300 |loss: 0.001495| train set 5.093x speedup, test set 4.943x speedup, val set 5.004x speedup, step: 3
JOB test speedup 2.9050794542261085
TPCH test speedup 5.345608116166191
TPCH skew test speedup 5.07619920122642
Epoch 37/300 |loss: 0.001556| train set 5.168x speedup, test set 5.076x speedup, val set 5.106x speedup, step: 4
JOB test speedup 2.8836639350666657
TPCH test speedup 4.069224992252456
TPCH skew test speedup 4.073969921128089
Epoch 38/300 |loss: 0.001547| train set 5.162x speedup, test set 4.074x speedup, val set 4.994x speedup, step: 5
JOB test speedup 2.904283787992569
TPCH test speedup 5.477533576835459
TPCH skew test speedup 4.587334910097106
Epoch 39/300 |loss: 0.001185| train set 5.072x speedup, test set 4.587x speedup, val set 4.896x speedup, step: 6
JOB test speedup 2.94417959520629
TPCH test speedup 3.9144508489557666
TPCH skew test speedup 3.952662541757804
Epoch 40/300 |loss: 0.001056| train set 5.180x speedup, test set 3.953x speedup, val set 4.935x speedup, step: 7
JOB test speedup 2.642816171147863
TPCH test speedup 3.7856112860658824
TPCH skew test speedup 3.8593122808100286
Epoch 41/300 |loss: 0.001094| train set 4.957x speedup, test set 3.859x speedup, val set 3.690x speedup, step: 8
JOB test speedup 2.890816645132698
TPCH test speedup 3.9640836719142443
TPCH skew test speedup 3.975522063199613
Epoch 42/300 |loss: 0.001225| train set 5.174x speedup, test set 3.976x speedup, val set 5.105x speedup, step: 9
JOB test speedup 2.889907814407451
TPCH test speedup 5.207738125551728
TPCH skew test speedup 4.7633998589925515
Epoch 43/300 |loss: 0.001238| train set 5.162x speedup, test set 4.763x speedup, val set 4.792x speedup, step: 10
JOB test speedup 2.9206058554241165
TPCH test speedup 4.061615359098616
TPCH skew test speedup 4.082838570575024
Epoch 44/300 |loss: 0.001706| train set 5.148x speedup, test set 4.083x speedup, val set 5.038x speedup, step: 1
JOB test speedup 2.8892417408328654
TPCH test speedup 5.349587322625606
TPCH skew test speedup 5.086213813444243
Epoch 45/300 |loss: 0.001128| train set 5.134x speedup, test set 5.086x speedup, val set 4.982x speedup, step: 2
JOB test speedup 2.906521671368423
TPCH test speedup 4.122199911611699
TPCH skew test speedup 4.097847088117828
Epoch 46/300 |loss: 0.000998| train set 5.117x speedup, test set 4.098x speedup, val set 3.969x speedup, step: 3
JOB test speedup 1.9076815978377382
TPCH test speedup 3.711995097774236
TPCH skew test speedup 3.672674391561637
Epoch 47/300 |loss: 0.001419| train set 3.677x speedup, test set 3.673x speedup, val set 3.814x speedup, step: 4
JOB test speedup 2.4162414263234226
TPCH test speedup 4.638593163444429
TPCH skew test speedup 4.356683308269507
Epoch 48/300 |loss: 0.002560| train set 4.474x speedup, test set 4.357x speedup, val set 4.376x speedup, step: 5
early stopping at epoch 48
Training per epoch cost 2.344 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.392s, pg runtime 0.354s, speedup 0.901x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
22, opt runtime 0.136s, model runtime 0.231s, pg runtime 0.891s, speedup 3.855x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.556s, pg runtime 0.189s, speedup 0.340x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.065s, pg runtime 0.023s, speedup 0.357x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.618s, pg runtime 1.315s, speedup 0.813x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 4.213s, pg runtime 14.646s, speedup 3.477x
14, opt runtime 3.449s, model runtime 4.406s, pg runtime 14.824s, speedup 3.365x
15, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
16, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.462s, pg runtime 1.380s, speedup 0.944x
21, opt runtime 22.482s, model runtime 29.334s, pg runtime 22.482s, speedup 0.766x
22, opt runtime 6.519s, model runtime 14.361s, pg runtime 6.519s, speedup 0.454x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
28, opt runtime 6.854s, model runtime 7.066s, pg runtime 6.854s, speedup 0.970x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 38.718s, pg runtime 69.421s, speedup 1.793x
34, opt runtime 35.527s, model runtime 42.634s, pg runtime 71.730s, speedup 1.682x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
14, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
15, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
16, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.316s, model runtime 1.342s, pg runtime 1.352s, speedup 1.007x
21, opt runtime 23.119s, model runtime 30.317s, pg runtime 23.119s, speedup 0.763x
22, opt runtime 22.332s, model runtime 22.332s, pg runtime 22.449s, speedup 1.005x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 6.899s, pg runtime 6.749s, speedup 0.978x
28, opt runtime 7.213s, model runtime 7.295s, pg runtime 7.213s, speedup 0.989x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 40.423s, pg runtime 58.921s, speedup 1.458x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 44, train speedup 5.148, test speedup 2.921, val speedup 5.038
TPCH best validation speedup epoch: 44, train speedup 5.148, test speedup 4.062, val speedup 5.038
TPCH Skew best validation speedup epoch: 44, train speedup 5.148, test speedup 4.083, val speedup 5.038
execution cost 0:02:47.068824
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.357808, and there are 9604 training samples
in channel 9
JOB test speedup 2.53763913464708
TPCH test speedup 2.6529628399463943
TPCH skew test speedup 2.5089663302047547
Epoch 0/300 |loss: 0.037868| train set 2.507x speedup, test set 2.509x speedup, val set 2.489x speedup, step: 1
JOB test speedup 2.3274582829005115
TPCH test speedup 2.7975987962272235
TPCH skew test speedup 2.690669636814816
Epoch 1/300 |loss: 0.017468| train set 2.651x speedup, test set 2.691x speedup, val set 2.606x speedup, step: 2
JOB test speedup 1.008498821392382
TPCH test speedup 3.036282154755056
TPCH skew test speedup 2.8663867493733597
Epoch 2/300 |loss: 0.011548| train set 2.745x speedup, test set 2.866x speedup, val set 2.702x speedup, step: 3
JOB test speedup 2.538794594759412
TPCH test speedup 2.815769735465551
TPCH skew test speedup 2.814310532978614
Epoch 3/300 |loss: 0.009776| train set 2.732x speedup, test set 2.814x speedup, val set 2.523x speedup, step: 4
JOB test speedup 1.0557825581366436
TPCH test speedup 3.479374290367272
TPCH skew test speedup 3.370529694550545
Epoch 4/300 |loss: 0.007936| train set 3.263x speedup, test set 3.371x speedup, val set 3.181x speedup, step: 1
JOB test speedup 1.0520166366882604
TPCH test speedup 4.0004971701463505
TPCH skew test speedup 3.779527062112398
Epoch 5/300 |loss: 0.006588| train set 3.438x speedup, test set 3.780x speedup, val set 3.405x speedup, step: 2
JOB test speedup 1.0497990962531356
TPCH test speedup 4.354203680066041
TPCH skew test speedup 3.585511992617432
Epoch 6/300 |loss: 0.005860| train set 3.300x speedup, test set 3.586x speedup, val set 3.868x speedup, step: 3
JOB test speedup 0.9722263626143873
TPCH test speedup 4.790608444907238
TPCH skew test speedup 4.4356992095125
Epoch 7/300 |loss: 0.005647| train set 4.240x speedup, test set 4.436x speedup, val set 4.493x speedup, step: 4
JOB test speedup 2.8937076872552923
TPCH test speedup 4.972729592594681
TPCH skew test speedup 4.484178826946713
Epoch 8/300 |loss: 0.007951| train set 4.060x speedup, test set 4.484x speedup, val set 4.136x speedup, step: 5
JOB test speedup 1.01359209451041
TPCH test speedup 4.89837479611884
TPCH skew test speedup 4.365800582221217
Epoch 9/300 |loss: 0.004806| train set 3.779x speedup, test set 4.366x speedup, val set 4.129x speedup, step: 1
JOB test speedup 1.0180790492744904
TPCH test speedup 3.8212442281136725
TPCH skew test speedup 3.7401305255250086
Epoch 10/300 |loss: 0.004559| train set 3.749x speedup, test set 3.740x speedup, val set 3.770x speedup, step: 2
JOB test speedup 2.947171933230958
TPCH test speedup 4.7447025701163925
TPCH skew test speedup 4.272687893014408
Epoch 11/300 |loss: 0.003828| train set 4.555x speedup, test set 4.273x speedup, val set 4.608x speedup, step: 3
JOB test speedup 2.860988428486007
TPCH test speedup 5.33441583170214
TPCH skew test speedup 5.073335798363691
Epoch 12/300 |loss: 0.003628| train set 4.595x speedup, test set 5.073x speedup, val set 4.991x speedup, step: 4
JOB test speedup 2.6365016957554968
TPCH test speedup 5.251080369392443
TPCH skew test speedup 4.1874429843822965
Epoch 13/300 |loss: 0.003462| train set 4.915x speedup, test set 4.187x speedup, val set 5.009x speedup, step: 5
JOB test speedup 2.9420826703656657
TPCH test speedup 4.055460598955752
TPCH skew test speedup 4.085527746913312
Epoch 14/300 |loss: 0.004360| train set 4.577x speedup, test set 4.086x speedup, val set 4.088x speedup, step: 6
JOB test speedup 2.9913568251561435
TPCH test speedup 4.203842191223531
TPCH skew test speedup 3.5335475321656866
Epoch 15/300 |loss: 0.002920| train set 5.148x speedup, test set 3.534x speedup, val set 5.070x speedup, step: 7
JOB test speedup 2.936192913314314
TPCH test speedup 4.000460772761303
TPCH skew test speedup 3.5239586755540313
Epoch 16/300 |loss: 0.002538| train set 4.621x speedup, test set 3.524x speedup, val set 3.964x speedup, step: 8
JOB test speedup 2.06545194391382
TPCH test speedup 4.011590129649497
TPCH skew test speedup 3.51449881516392
Epoch 17/300 |loss: 0.002554| train set 4.636x speedup, test set 3.514x speedup, val set 4.717x speedup, step: 9
JOB test speedup 0.8177969849388222
TPCH test speedup 4.010418754712089
TPCH skew test speedup 3.5147480503690662
Epoch 18/300 |loss: 0.002415| train set 4.755x speedup, test set 3.515x speedup, val set 4.748x speedup, step: 10
JOB test speedup 3.0609585733005087
TPCH test speedup 3.984051152785411
TPCH skew test speedup 4.002387956585212
Epoch 19/300 |loss: 0.002215| train set 4.380x speedup, test set 4.002x speedup, val set 4.598x speedup, step: 1
JOB test speedup 2.8681045769586433
TPCH test speedup 4.024841143129454
TPCH skew test speedup 3.436391620643765
Epoch 20/300 |loss: 0.002072| train set 4.866x speedup, test set 3.436x speedup, val set 4.987x speedup, step: 2
JOB test speedup 2.07444650448045
TPCH test speedup 3.128732221096738
TPCH skew test speedup 2.843374232844329
Epoch 21/300 |loss: 0.002247| train set 3.192x speedup, test set 2.843x speedup, val set 3.279x speedup, step: 3
JOB test speedup 3.0994582326268625
TPCH test speedup 3.9736325424647223
TPCH skew test speedup 3.484484652980986
Epoch 22/300 |loss: 0.002664| train set 4.620x speedup, test set 3.484x speedup, val set 3.746x speedup, step: 4
JOB test speedup 2.565904863157116
TPCH test speedup 4.039168929320718
TPCH skew test speedup 3.5296307591698666
Epoch 23/300 |loss: 0.001988| train set 5.136x speedup, test set 3.530x speedup, val set 5.029x speedup, step: 5
JOB test speedup 2.9874020176078724
TPCH test speedup 4.955795472462637
TPCH skew test speedup 4.618490041304889
Epoch 24/300 |loss: 0.002132| train set 4.772x speedup, test set 4.618x speedup, val set 4.621x speedup, step: 1
JOB test speedup 3.067516244576201
TPCH test speedup 5.515016770440648
TPCH skew test speedup 5.166426441550301
Epoch 25/300 |loss: 0.001935| train set 5.086x speedup, test set 5.166x speedup, val set 5.153x speedup, step: 2
JOB test speedup 2.7598630910177344
TPCH test speedup 5.190416070764265
TPCH skew test speedup 4.976673145547641
Epoch 26/300 |loss: 0.001910| train set 5.139x speedup, test set 4.977x speedup, val set 5.080x speedup, step: 3
JOB test speedup 2.614026574769552
TPCH test speedup 5.1142574777931245
TPCH skew test speedup 4.9147978675878665
Epoch 27/300 |loss: 0.001808| train set 4.997x speedup, test set 4.915x speedup, val set 4.903x speedup, step: 4
JOB test speedup 2.571399599942677
TPCH test speedup 4.264985448254139
TPCH skew test speedup 4.143234706732925
Epoch 28/300 |loss: 0.001953| train set 5.007x speedup, test set 4.143x speedup, val set 4.041x speedup, step: 5
JOB test speedup 2.6155087502042584
TPCH test speedup 4.063916366517026
TPCH skew test speedup 3.9497541924113237
Epoch 29/300 |loss: 0.001673| train set 4.887x speedup, test set 3.950x speedup, val set 3.959x speedup, step: 6
JOB test speedup 3.0833909780079165
TPCH test speedup 5.118072341527175
TPCH skew test speedup 4.142428731005738
Epoch 30/300 |loss: 0.001803| train set 5.156x speedup, test set 4.142x speedup, val set 4.910x speedup, step: 7
JOB test speedup 3.035018452354987
TPCH test speedup 5.332763782056215
TPCH skew test speedup 4.144394435411151
Epoch 31/300 |loss: 0.001564| train set 4.970x speedup, test set 4.144x speedup, val set 4.928x speedup, step: 8
JOB test speedup 3.0741618919943026
TPCH test speedup 3.6200544704778745
TPCH skew test speedup 3.117220098862182
Epoch 32/300 |loss: 0.001418| train set 3.653x speedup, test set 3.117x speedup, val set 3.546x speedup, step: 9
JOB test speedup 2.598301754072295
TPCH test speedup 5.463520953103974
TPCH skew test speedup 4.933597941665811
Epoch 33/300 |loss: 0.001604| train set 5.102x speedup, test set 4.934x speedup, val set 4.875x speedup, step: 10
JOB test speedup 2.5989653548647604
TPCH test speedup 5.344142187089395
TPCH skew test speedup 4.857985601577756
Epoch 34/300 |loss: 0.001488| train set 4.771x speedup, test set 4.858x speedup, val set 5.028x speedup, step: 1
JOB test speedup 3.053917628902551
TPCH test speedup 4.235285656300227
TPCH skew test speedup 4.122844640695372
Epoch 35/300 |loss: 0.001600| train set 5.165x speedup, test set 4.123x speedup, val set 4.045x speedup, step: 2
JOB test speedup 3.0962539971299075
TPCH test speedup 4.755549911132193
TPCH skew test speedup 4.483150377161555
Epoch 36/300 |loss: 0.001388| train set 5.102x speedup, test set 4.483x speedup, val set 4.818x speedup, step: 3
JOB test speedup 3.103552257922893
TPCH test speedup 5.290035027574961
TPCH skew test speedup 4.114679307777631
Epoch 37/300 |loss: 0.001620| train set 5.141x speedup, test set 4.115x speedup, val set 4.910x speedup, step: 4
JOB test speedup 2.627923954198126
TPCH test speedup 4.027063690953579
TPCH skew test speedup 3.9323968230750346
Epoch 38/300 |loss: 0.001643| train set 4.780x speedup, test set 3.932x speedup, val set 3.931x speedup, step: 5
JOB test speedup 2.6016102472321356
TPCH test speedup 4.096072273993895
TPCH skew test speedup 3.5613027553722434
Epoch 39/300 |loss: 0.001183| train set 5.119x speedup, test set 3.561x speedup, val set 4.930x speedup, step: 6
JOB test speedup 2.6346603523172156
TPCH test speedup 4.030880147306756
TPCH skew test speedup 3.53571338368343
Epoch 40/300 |loss: 0.001056| train set 5.200x speedup, test set 3.536x speedup, val set 4.917x speedup, step: 7
JOB test speedup 2.5812776974354743
TPCH test speedup 4.056326556632097
TPCH skew test speedup 3.4510308232809614
Epoch 41/300 |loss: 0.000997| train set 5.203x speedup, test set 3.451x speedup, val set 3.873x speedup, step: 8
JOB test speedup 3.132627244196694
TPCH test speedup 5.249292820264048
TPCH skew test speedup 4.236895128397486
Epoch 42/300 |loss: 0.001061| train set 5.186x speedup, test set 4.237x speedup, val set 4.992x speedup, step: 9
JOB test speedup 2.5800172812706457
TPCH test speedup 5.2728746604387595
TPCH skew test speedup 4.124644838495178
Epoch 43/300 |loss: 0.001142| train set 5.167x speedup, test set 4.125x speedup, val set 4.932x speedup, step: 10
JOB test speedup 2.546595083358382
TPCH test speedup 5.290035027574961
TPCH skew test speedup 4.856468505776315
Epoch 44/300 |loss: 0.001189| train set 5.192x speedup, test set 4.856x speedup, val set 5.020x speedup, step: 11
JOB test speedup 2.584394319441089
TPCH test speedup 5.249292820264048
TPCH skew test speedup 5.027638787682672
Epoch 45/300 |loss: 0.001134| train set 5.205x speedup, test set 5.028x speedup, val set 5.025x speedup, step: 12
JOB test speedup 2.6127030928495527
TPCH test speedup 3.8908136169152345
TPCH skew test speedup 3.4702443316882547
Epoch 46/300 |loss: 0.001069| train set 5.119x speedup, test set 3.470x speedup, val set 3.968x speedup, step: 13
JOB test speedup 2.1129639770402933
TPCH test speedup 3.3116177461178546
TPCH skew test speedup 3.3090353330656326
Epoch 47/300 |loss: 0.001283| train set 3.472x speedup, test set 3.309x speedup, val set 3.172x speedup, step: 14
JOB test speedup 2.910785639997993
TPCH test speedup 4.8259658799612835
TPCH skew test speedup 3.5993205644751165
Epoch 48/300 |loss: 0.002366| train set 4.333x speedup, test set 3.599x speedup, val set 4.430x speedup, step: 15
early stopping at epoch 48
Training per epoch cost 2.334 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 1.050s, pg runtime 0.348s, speedup 0.331x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.484s, pg runtime 0.453s, speedup 0.936x
17, opt runtime 0.327s, model runtime 0.392s, pg runtime 0.354s, speedup 0.901x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.068s, pg runtime 0.086s, speedup 1.270x
21, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.556s, pg runtime 0.189s, speedup 0.340x
25, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
26, opt runtime 0.020s, model runtime 0.056s, pg runtime 0.020s, speedup 0.359x
27, opt runtime 0.060s, model runtime 0.087s, pg runtime 0.112s, speedup 1.295x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.147s, pg runtime 0.137s, speedup 0.933x
30, opt runtime 0.023s, model runtime 0.065s, pg runtime 0.023s, speedup 0.357x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.618s, pg runtime 1.315s, speedup 0.813x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 23.961s, pg runtime 32.278s, speedup 1.347x
06, opt runtime 21.143s, model runtime 24.476s, pg runtime 21.143s, speedup 0.864x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.240s, pg runtime 1.214s, speedup 0.979x
20, opt runtime 1.353s, model runtime 1.508s, pg runtime 1.380s, speedup 0.915x
21, opt runtime 22.482s, model runtime 29.334s, pg runtime 22.482s, speedup 0.766x
22, opt runtime 6.519s, model runtime 14.361s, pg runtime 6.519s, speedup 0.454x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.497s, pg runtime 7.268s, speedup 0.969x
28, opt runtime 6.854s, model runtime 7.512s, pg runtime 6.854s, speedup 0.912x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.239s, pg runtime 69.421s, speedup 1.725x
34, opt runtime 35.527s, model runtime 46.096s, pg runtime 71.730s, speedup 1.556x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 25.217s, pg runtime 20.708s, speedup 0.821x
06, opt runtime 11.965s, model runtime 31.439s, pg runtime 11.965s, speedup 0.381x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.316s, model runtime 1.382s, pg runtime 1.352s, speedup 0.978x
21, opt runtime 23.119s, model runtime 30.317s, pg runtime 23.119s, speedup 0.763x
22, opt runtime 22.332s, model runtime 22.332s, pg runtime 22.449s, speedup 1.005x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 7.579s, pg runtime 6.749s, speedup 0.890x
28, opt runtime 7.213s, model runtime 8.026s, pg runtime 7.213s, speedup 0.899x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.798s, pg runtime 58.921s, speedup 1.481x
34, opt runtime 41.237s, model runtime 51.586s, pg runtime 78.181s, speedup 1.516x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 34, train speedup 4.771, test speedup 2.599, val speedup 5.028
TPCH best validation speedup epoch: 34, train speedup 4.771, test speedup 5.344, val speedup 5.028
TPCH Skew best validation speedup epoch: 34, train speedup 4.771, test speedup 4.858, val speedup 5.028
execution cost 0:02:48.197691
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.154642, and there are 9604 training samples
in channel 9
JOB test speedup 2.53763913464708
TPCH test speedup 2.6529628399463943
TPCH skew test speedup 2.5089663302047547
Epoch 0/300 |loss: 0.037868| train set 2.507x speedup, test set 2.509x speedup, val set 2.489x speedup, step: 1
JOB test speedup 2.3274582829005115
TPCH test speedup 2.7975987962272235
TPCH skew test speedup 2.690669636814816
Epoch 1/300 |loss: 0.017468| train set 2.651x speedup, test set 2.691x speedup, val set 2.606x speedup, step: 2
JOB test speedup 1.0043571533737519
TPCH test speedup 3.0342319834494917
TPCH skew test speedup 2.864554515278744
Epoch 2/300 |loss: 0.011542| train set 2.746x speedup, test set 2.865x speedup, val set 2.735x speedup, step: 3
JOB test speedup 2.538794594759412
TPCH test speedup 2.988701107911462
TPCH skew test speedup 2.886818293336062
Epoch 3/300 |loss: 0.009734| train set 2.745x speedup, test set 2.887x speedup, val set 2.604x speedup, step: 4
JOB test speedup 0.5629322927800678
TPCH test speedup 3.4515641014527128
TPCH skew test speedup 3.372997713081471
Epoch 4/300 |loss: 0.007907| train set 3.429x speedup, test set 3.373x speedup, val set 3.451x speedup, step: 1
JOB test speedup 1.0508559847178867
TPCH test speedup 3.996088920347553
TPCH skew test speedup 3.60181090822317
Epoch 5/300 |loss: 0.006638| train set 3.439x speedup, test set 3.602x speedup, val set 3.666x speedup, step: 2
JOB test speedup 1.0478214404575592
TPCH test speedup 4.341541349426343
TPCH skew test speedup 3.591479566433376
Epoch 6/300 |loss: 0.005872| train set 3.282x speedup, test set 3.591x speedup, val set 3.865x speedup, step: 3
JOB test speedup 0.9789762204346732
TPCH test speedup 4.790361992793337
TPCH skew test speedup 4.4356322100703744
Epoch 7/300 |loss: 0.005609| train set 4.393x speedup, test set 4.436x speedup, val set 4.693x speedup, step: 4
JOB test speedup 2.1262174396490057
TPCH test speedup 3.918110613775898
TPCH skew test speedup 3.8274652266306037
Epoch 8/300 |loss: 0.007882| train set 3.719x speedup, test set 3.827x speedup, val set 3.849x speedup, step: 5
JOB test speedup 1.0213043077293091
TPCH test speedup 4.901307005382468
TPCH skew test speedup 4.399330492345021
Epoch 9/300 |loss: 0.004788| train set 4.212x speedup, test set 4.399x speedup, val set 4.617x speedup, step: 1
JOB test speedup 1.0310481812208054
TPCH test speedup 5.003163028489482
TPCH skew test speedup 3.958032190516644
Epoch 10/300 |loss: 0.004476| train set 4.215x speedup, test set 3.958x speedup, val set 4.652x speedup, step: 2
JOB test speedup 2.5924742663746123
TPCH test speedup 4.822199548803503
TPCH skew test speedup 4.37316159945787
Epoch 11/300 |loss: 0.003746| train set 4.415x speedup, test set 4.373x speedup, val set 4.496x speedup, step: 3
JOB test speedup 2.8913096904169553
TPCH test speedup 5.179957424843038
TPCH skew test speedup 4.733996685218711
Epoch 12/300 |loss: 0.003518| train set 4.760x speedup, test set 4.734x speedup, val set 5.023x speedup, step: 4
JOB test speedup 3.013800304339483
TPCH test speedup 5.077238491800432
TPCH skew test speedup 4.743911078186576
Epoch 13/300 |loss: 0.003378| train set 5.069x speedup, test set 4.744x speedup, val set 4.825x speedup, step: 5
JOB test speedup 3.042174194396064
TPCH test speedup 3.943388271500234
TPCH skew test speedup 3.999943153630909
Epoch 14/300 |loss: 0.003669| train set 4.788x speedup, test set 4.000x speedup, val set 5.074x speedup, step: 1
JOB test speedup 2.5885007332558727
TPCH test speedup 5.189763911873943
TPCH skew test speedup 4.176173538428231
Epoch 15/300 |loss: 0.002813| train set 4.997x speedup, test set 4.176x speedup, val set 4.880x speedup, step: 2
JOB test speedup 2.6082761904767735
TPCH test speedup 3.868752893206064
TPCH skew test speedup 3.402374103651132
Epoch 16/300 |loss: 0.002466| train set 5.088x speedup, test set 3.402x speedup, val set 4.959x speedup, step: 3
JOB test speedup 2.2832521786573556
TPCH test speedup 5.123139679087425
TPCH skew test speedup 4.029337537013333
Epoch 17/300 |loss: 0.002462| train set 4.786x speedup, test set 4.029x speedup, val set 5.034x speedup, step: 4
JOB test speedup 2.489860335638481
TPCH test speedup 3.9048061576591913
TPCH skew test speedup 3.3833491919188456
Epoch 18/300 |loss: 0.002264| train set 4.747x speedup, test set 3.383x speedup, val set 4.732x speedup, step: 5
JOB test speedup 3.0382737177695747
TPCH test speedup 5.140973684778788
TPCH skew test speedup 4.827905776041666
Epoch 19/300 |loss: 0.002248| train set 4.845x speedup, test set 4.828x speedup, val set 4.822x speedup, step: 6
JOB test speedup 3.0361710671736173
TPCH test speedup 3.6460136859597854
TPCH skew test speedup 3.273350634969977
Epoch 20/300 |loss: 0.002047| train set 4.678x speedup, test set 3.273x speedup, val set 4.651x speedup, step: 7
JOB test speedup 0.9633849938751075
TPCH test speedup 3.3260130748105876
TPCH skew test speedup 2.9382396166195814
Epoch 21/300 |loss: 0.002221| train set 3.192x speedup, test set 2.938x speedup, val set 3.099x speedup, step: 8
JOB test speedup 3.036965356911248
TPCH test speedup 3.807561131337066
TPCH skew test speedup 3.85995520733331
Epoch 22/300 |loss: 0.002722| train set 4.361x speedup, test set 3.860x speedup, val set 3.974x speedup, step: 9
JOB test speedup 2.23561984539236
TPCH test speedup 4.115238840977349
TPCH skew test speedup 4.10429431723856
Epoch 23/300 |loss: 0.002079| train set 4.866x speedup, test set 4.104x speedup, val set 3.959x speedup, step: 10
JOB test speedup 2.836452344238267
TPCH test speedup 4.08340055155683
TPCH skew test speedup 3.5405837191767118
Epoch 24/300 |loss: 0.002044| train set 4.743x speedup, test set 3.541x speedup, val set 4.986x speedup, step: 11
JOB test speedup 2.6133110704468545
TPCH test speedup 5.422896457193145
TPCH skew test speedup 5.121579388306454
Epoch 25/300 |loss: 0.001941| train set 5.078x speedup, test set 5.122x speedup, val set 5.002x speedup, step: 12
JOB test speedup 2.87863461740143
TPCH test speedup 5.3555767651526445
TPCH skew test speedup 5.0516853258329055
Epoch 26/300 |loss: 0.001908| train set 4.799x speedup, test set 5.052x speedup, val set 5.115x speedup, step: 13
JOB test speedup 2.6186240742414353
TPCH test speedup 5.150118787698244
TPCH skew test speedup 4.748795288158082
Epoch 27/300 |loss: 0.001806| train set 5.086x speedup, test set 4.749x speedup, val set 4.892x speedup, step: 14
JOB test speedup 3.0609110457734987
TPCH test speedup 5.250184942234017
TPCH skew test speedup 5.026509947570895
Epoch 28/300 |loss: 0.001967| train set 4.993x speedup, test set 5.027x speedup, val set 4.999x speedup, step: 15
JOB test speedup 2.2728099975575824
TPCH test speedup 4.721540912829193
TPCH skew test speedup 4.459774135204067
Epoch 29/300 |loss: 0.001807| train set 5.065x speedup, test set 4.460x speedup, val set 4.844x speedup, step: 16
JOB test speedup 3.091713111616059
TPCH test speedup 4.997564938089638
TPCH skew test speedup 4.805004540491975
Epoch 30/300 |loss: 0.002320| train set 5.174x speedup, test set 4.805x speedup, val set 5.035x speedup, step: 17
JOB test speedup 3.006055742902562
TPCH test speedup 5.370097950197328
TPCH skew test speedup 5.079883624249226
Epoch 31/300 |loss: 0.001612| train set 5.066x speedup, test set 5.080x speedup, val set 4.927x speedup, step: 18
JOB test speedup 2.6299267055681517
TPCH test speedup 4.002384258271641
TPCH skew test speedup 4.001524473122998
Epoch 32/300 |loss: 0.001480| train set 3.647x speedup, test set 4.002x speedup, val set 3.279x speedup, step: 19
JOB test speedup 2.2865404205146884
TPCH test speedup 5.315006994012699
TPCH skew test speedup 5.039013223505867
Epoch 33/300 |loss: 0.001704| train set 5.198x speedup, test set 5.039x speedup, val set 4.974x speedup, step: 20
JOB test speedup 2.616678440211901
TPCH test speedup 5.165484080799363
TPCH skew test speedup 4.908393484190749
Epoch 34/300 |loss: 0.001580| train set 4.777x speedup, test set 4.908x speedup, val set 4.973x speedup, step: 21
JOB test speedup 2.595430759119494
TPCH test speedup 3.929305945756926
TPCH skew test speedup 3.910262591243939
Epoch 35/300 |loss: 0.001685| train set 5.118x speedup, test set 3.910x speedup, val set 4.489x speedup, step: 22
JOB test speedup 3.0400156471340085
TPCH test speedup 5.2308508535350295
TPCH skew test speedup 4.964214927053933
Epoch 36/300 |loss: 0.001627| train set 5.106x speedup, test set 4.964x speedup, val set 5.074x speedup, step: 23
JOB test speedup 3.1006991618889743
TPCH test speedup 4.980371311691694
TPCH skew test speedup 4.640945259237133
Epoch 37/300 |loss: 0.001609| train set 5.170x speedup, test set 4.641x speedup, val set 5.039x speedup, step: 24
JOB test speedup 2.6268977517873044
TPCH test speedup 4.105615870483542
TPCH skew test speedup 4.008374201927834
Epoch 38/300 |loss: 0.001671| train set 5.177x speedup, test set 4.008x speedup, val set 4.001x speedup, step: 25
JOB test speedup 2.623110517924988
TPCH test speedup 5.212543112680443
TPCH skew test speedup 4.924942338224114
Epoch 39/300 |loss: 0.001247| train set 5.148x speedup, test set 4.925x speedup, val set 4.841x speedup, step: 26
JOB test speedup 3.0952411355225604
TPCH test speedup 4.030576020288083
TPCH skew test speedup 4.061830991659836
Epoch 40/300 |loss: 0.001096| train set 5.140x speedup, test set 4.062x speedup, val set 4.976x speedup, step: 27
JOB test speedup 2.6087269202701293
TPCH test speedup 4.111001420562663
TPCH skew test speedup 4.096274331223669
Epoch 41/300 |loss: 0.001099| train set 5.130x speedup, test set 4.096x speedup, val set 4.967x speedup, step: 28
JOB test speedup 2.6453443353914703
TPCH test speedup 4.003348486875701
TPCH skew test speedup 4.033340586543218
Epoch 42/300 |loss: 0.001038| train set 5.185x speedup, test set 4.033x speedup, val set 4.954x speedup, step: 29
JOB test speedup 2.964031333784158
TPCH test speedup 5.232497950764176
TPCH skew test speedup 5.013275076087933
Epoch 43/300 |loss: 0.001237| train set 5.168x speedup, test set 5.013x speedup, val set 4.913x speedup, step: 30
JOB test speedup 3.0979586335970506
TPCH test speedup 5.297597058686892
TPCH skew test speedup 5.044916242258569
Epoch 44/300 |loss: 0.001236| train set 5.143x speedup, test set 5.045x speedup, val set 5.178x speedup, step: 1
JOB test speedup 2.6253957229344165
TPCH test speedup 4.111001420562663
TPCH skew test speedup 4.096274331223669
Epoch 45/300 |loss: 0.001322| train set 5.152x speedup, test set 4.096x speedup, val set 4.984x speedup, step: 2
JOB test speedup 2.4523216853936445
TPCH test speedup 4.008859430955807
TPCH skew test speedup 4.010736109096289
Epoch 46/300 |loss: 0.001093| train set 5.115x speedup, test set 4.011x speedup, val set 3.964x speedup, step: 3
JOB test speedup 2.1223271567055946
TPCH test speedup 3.5661521335271327
TPCH skew test speedup 3.617662530556743
Epoch 47/300 |loss: 0.001344| train set 3.823x speedup, test set 3.618x speedup, val set 3.346x speedup, step: 4
JOB test speedup 2.9273643767702815
TPCH test speedup 4.300280519123511
TPCH skew test speedup 4.106678737990146
Epoch 48/300 |loss: 0.002649| train set 4.491x speedup, test set 4.107x speedup, val set 4.220x speedup, step: 5
early stopping at epoch 48
Training per epoch cost 2.357 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.016s, pg runtime 0.014s, speedup 0.886x
04, opt runtime 0.348s, model runtime 0.348s, pg runtime 0.348s, speedup 1.000x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.079s, pg runtime 0.086s, speedup 1.091x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.618s, pg runtime 1.315s, speedup 0.813x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.240s, pg runtime 1.214s, speedup 0.979x
20, opt runtime 1.353s, model runtime 1.508s, pg runtime 1.380s, speedup 0.915x
21, opt runtime 22.482s, model runtime 29.334s, pg runtime 22.482s, speedup 0.766x
22, opt runtime 6.519s, model runtime 14.361s, pg runtime 6.519s, speedup 0.454x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
28, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 38.718s, pg runtime 69.421s, speedup 1.793x
34, opt runtime 35.527s, model runtime 42.634s, pg runtime 71.730s, speedup 1.682x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.316s, model runtime 1.382s, pg runtime 1.352s, speedup 0.978x
21, opt runtime 23.119s, model runtime 30.317s, pg runtime 23.119s, speedup 0.763x
22, opt runtime 22.332s, model runtime 22.332s, pg runtime 22.449s, speedup 1.005x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 9.098s, pg runtime 6.749s, speedup 0.742x
28, opt runtime 7.213s, model runtime 10.591s, pg runtime 7.213s, speedup 0.681x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 40.423s, pg runtime 58.921s, speedup 1.458x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 44, train speedup 5.143, test speedup 3.098, val speedup 5.178
TPCH best validation speedup epoch: 44, train speedup 5.143, test speedup 5.298, val speedup 5.178
TPCH Skew best validation speedup epoch: 44, train speedup 5.143, test speedup 5.045, val speedup 5.178
execution cost 0:02:47.579729
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.154620, and there are 9604 training samples
in channel 9
JOB test speedup 2.53763913464708
TPCH test speedup 2.6529628399463943
TPCH skew test speedup 2.5089663302047547
Epoch 0/300 |loss: 0.037868| train set 2.507x speedup, test set 2.509x speedup, val set 2.489x speedup, step: 1
JOB test speedup 2.537598256542018
TPCH test speedup 2.8574088955422874
TPCH skew test speedup 2.721483240036142
Epoch 1/300 |loss: 0.017503| train set 2.677x speedup, test set 2.721x speedup, val set 2.639x speedup, step: 2
JOB test speedup 2.198091136939133
TPCH test speedup 3.1089802483916005
TPCH skew test speedup 2.749174223366123
Epoch 2/300 |loss: 0.011673| train set 2.773x speedup, test set 2.749x speedup, val set 2.781x speedup, step: 3
JOB test speedup 2.539960311165329
TPCH test speedup 2.983446205113557
TPCH skew test speedup 2.882517099093193
Epoch 3/300 |loss: 0.009477| train set 2.794x speedup, test set 2.883x speedup, val set 2.678x speedup, step: 4
JOB test speedup 2.5626886111720566
TPCH test speedup 3.8325124320724213
TPCH skew test speedup 3.3252395221928723
Epoch 4/300 |loss: 0.007913| train set 3.470x speedup, test set 3.325x speedup, val set 3.533x speedup, step: 1
JOB test speedup 1.0191406936859229
TPCH test speedup 4.46065621508409
TPCH skew test speedup 3.9118206104672297
Epoch 5/300 |loss: 0.006576| train set 3.756x speedup, test set 3.912x speedup, val set 4.240x speedup, step: 2
JOB test speedup 0.5364700340748626
TPCH test speedup 3.7055029134738704
TPCH skew test speedup 3.2594494982816156
Epoch 6/300 |loss: 0.005831| train set 3.540x speedup, test set 3.259x speedup, val set 3.540x speedup, step: 3
JOB test speedup 0.9759042831750508
TPCH test speedup 3.6395008250128775
TPCH skew test speedup 3.2501684645200952
Epoch 7/300 |loss: 0.005577| train set 3.408x speedup, test set 3.250x speedup, val set 3.521x speedup, step: 4
JOB test speedup 0.9749592157298324
TPCH test speedup 4.863524818295063
TPCH skew test speedup 4.575901498945367
Epoch 8/300 |loss: 0.008050| train set 4.031x speedup, test set 4.576x speedup, val set 4.288x speedup, step: 5
JOB test speedup 1.0126498408737858
TPCH test speedup 4.834259687121997
TPCH skew test speedup 4.34627649122986
Epoch 9/300 |loss: 0.004804| train set 4.351x speedup, test set 4.346x speedup, val set 4.558x speedup, step: 1
JOB test speedup 1.025762251861285
TPCH test speedup 3.8154234360637975
TPCH skew test speedup 3.7326210560287096
Epoch 10/300 |loss: 0.004567| train set 3.432x speedup, test set 3.733x speedup, val set 4.083x speedup, step: 2
JOB test speedup 2.8821335114829036
TPCH test speedup 4.89960308607067
TPCH skew test speedup 3.7937538048287505
Epoch 11/300 |loss: 0.003697| train set 4.577x speedup, test set 3.794x speedup, val set 4.641x speedup, step: 3
JOB test speedup 1.1130052567786153
TPCH test speedup 5.249127243198157
TPCH skew test speedup 4.993416231349733
Epoch 12/300 |loss: 0.003479| train set 4.491x speedup, test set 4.993x speedup, val set 5.016x speedup, step: 4
JOB test speedup 1.1129771461807794
TPCH test speedup 5.172684783938402
TPCH skew test speedup 4.033648846481635
Epoch 13/300 |loss: 0.003304| train set 5.001x speedup, test set 4.034x speedup, val set 4.963x speedup, step: 5
JOB test speedup 2.876668878060281
TPCH test speedup 3.9445208112223327
TPCH skew test speedup 3.4825599284885818
Epoch 14/300 |loss: 0.003790| train set 4.399x speedup, test set 3.483x speedup, val set 4.095x speedup, step: 6
JOB test speedup 2.9028920741913278
TPCH test speedup 4.830518069865005
TPCH skew test speedup 3.9126240990707424
Epoch 15/300 |loss: 0.002904| train set 5.183x speedup, test set 3.913x speedup, val set 5.076x speedup, step: 7
JOB test speedup 2.929254097862637
TPCH test speedup 3.5217918671686883
TPCH skew test speedup 3.084796910181124
Epoch 16/300 |loss: 0.002451| train set 4.900x speedup, test set 3.085x speedup, val set 4.019x speedup, step: 8
JOB test speedup 2.4818314482175787
TPCH test speedup 3.9146117090272847
TPCH skew test speedup 3.331759179483181
Epoch 17/300 |loss: 0.002601| train set 5.136x speedup, test set 3.332x speedup, val set 5.057x speedup, step: 9
JOB test speedup 2.475572777464802
TPCH test speedup 4.082615436654947
TPCH skew test speedup 3.540298324561211
Epoch 18/300 |loss: 0.002343| train set 4.751x speedup, test set 3.540x speedup, val set 4.970x speedup, step: 10
JOB test speedup 3.026464458284414
TPCH test speedup 3.934889570724161
TPCH skew test speedup 3.33866052773817
Epoch 19/300 |loss: 0.002183| train set 4.770x speedup, test set 3.339x speedup, val set 5.035x speedup, step: 1
JOB test speedup 2.4933320495155606
TPCH test speedup 3.6159495074387333
TPCH skew test speedup 3.0104984793138994
Epoch 20/300 |loss: 0.001963| train set 5.070x speedup, test set 3.010x speedup, val set 4.178x speedup, step: 2
JOB test speedup 0.9575273151234126
TPCH test speedup 3.0189213334007126
TPCH skew test speedup 2.7240660432011214
Epoch 21/300 |loss: 0.002187| train set 3.246x speedup, test set 2.724x speedup, val set 3.153x speedup, step: 3
JOB test speedup 2.399943389341065
TPCH test speedup 3.3436256649230116
TPCH skew test speedup 2.9061099053094024
Epoch 22/300 |loss: 0.002722| train set 4.013x speedup, test set 2.906x speedup, val set 3.239x speedup, step: 4
JOB test speedup 2.5577858246397946
TPCH test speedup 4.0399092419059395
TPCH skew test speedup 3.73201144751992
Epoch 23/300 |loss: 0.002086| train set 4.893x speedup, test set 3.732x speedup, val set 4.408x speedup, step: 5
JOB test speedup 2.9285880852626844
TPCH test speedup 4.039828799846644
TPCH skew test speedup 3.5299359111978483
Epoch 24/300 |loss: 0.002087| train set 4.711x speedup, test set 3.530x speedup, val set 5.019x speedup, step: 6
JOB test speedup 2.381660775544093
TPCH test speedup 5.453056634890502
TPCH skew test speedup 4.592073483397411
Epoch 25/300 |loss: 0.001940| train set 5.168x speedup, test set 4.592x speedup, val set 5.040x speedup, step: 7
JOB test speedup 2.945910444376039
TPCH test speedup 5.029217005955645
TPCH skew test speedup 4.100657669476286
Epoch 26/300 |loss: 0.001842| train set 4.831x speedup, test set 4.101x speedup, val set 5.100x speedup, step: 8
JOB test speedup 3.0472971022068824
TPCH test speedup 5.136979125280734
TPCH skew test speedup 4.1513407937848275
Epoch 27/300 |loss: 0.001812| train set 5.194x speedup, test set 4.151x speedup, val set 5.051x speedup, step: 9
JOB test speedup 3.0632273396742966
TPCH test speedup 4.235866385673122
TPCH skew test speedup 3.5903632835666035
Epoch 28/300 |loss: 0.001674| train set 5.074x speedup, test set 3.590x speedup, val set 4.079x speedup, step: 10
JOB test speedup 3.056980758539875
TPCH test speedup 3.7039364169882867
TPCH skew test speedup 3.2031645668855733
Epoch 29/300 |loss: 0.001714| train set 5.050x speedup, test set 3.203x speedup, val set 3.707x speedup, step: 11
JOB test speedup 3.1216851893348077
TPCH test speedup 5.179718441263945
TPCH skew test speedup 4.0318944063611735
Epoch 30/300 |loss: 0.001881| train set 5.129x speedup, test set 4.032x speedup, val set 5.001x speedup, step: 12
JOB test speedup 2.887191443723377
TPCH test speedup 4.0813021161473735
TPCH skew test speedup 3.491849332342504
Epoch 31/300 |loss: 0.001525| train set 4.971x speedup, test set 3.492x speedup, val set 4.901x speedup, step: 13
JOB test speedup 2.9296397306854973
TPCH test speedup 3.366867180106312
TPCH skew test speedup 2.93653411486957
Epoch 32/300 |loss: 0.001452| train set 4.043x speedup, test set 2.937x speedup, val set 3.902x speedup, step: 14
JOB test speedup 2.601247507227725
TPCH test speedup 5.42440192391974
TPCH skew test speedup 4.6096313985883395
Epoch 33/300 |loss: 0.001672| train set 5.105x speedup, test set 4.610x speedup, val set 4.934x speedup, step: 15
JOB test speedup 2.403535461930836
TPCH test speedup 4.264985448254139
TPCH skew test speedup 3.590939185136925
Epoch 34/300 |loss: 0.001439| train set 5.067x speedup, test set 3.591x speedup, val set 4.875x speedup, step: 16
JOB test speedup 3.111667231472323
TPCH test speedup 4.034419160763804
TPCH skew test speedup 3.445578895912005
Epoch 35/300 |loss: 0.001524| train set 5.172x speedup, test set 3.446x speedup, val set 4.049x speedup, step: 17
JOB test speedup 3.078702846635395
TPCH test speedup 3.830132226865504
TPCH skew test speedup 3.512586255361169
Epoch 36/300 |loss: 0.001379| train set 4.864x speedup, test set 3.513x speedup, val set 4.090x speedup, step: 18
JOB test speedup 3.1057711413650124
TPCH test speedup 5.3542077829930586
TPCH skew test speedup 4.107473825191367
Epoch 37/300 |loss: 0.001555| train set 5.142x speedup, test set 4.107x speedup, val set 5.088x speedup, step: 19
JOB test speedup 3.0868513639605832
TPCH test speedup 3.841305770101097
TPCH skew test speedup 3.575344022837142
Epoch 38/300 |loss: 0.001492| train set 5.172x speedup, test set 3.575x speedup, val set 4.920x speedup, step: 20
JOB test speedup 3.09580348519279
TPCH test speedup 4.049996968820116
TPCH skew test speedup 3.7105391978721687
Epoch 39/300 |loss: 0.001190| train set 5.147x speedup, test set 3.711x speedup, val set 4.953x speedup, step: 21
JOB test speedup 3.006343905447969
TPCH test speedup 4.111768301191512
TPCH skew test speedup 3.555042921065191
Epoch 40/300 |loss: 0.001042| train set 5.190x speedup, test set 3.555x speedup, val set 4.039x speedup, step: 22
JOB test speedup 3.115539534827296
TPCH test speedup 3.7293509023467952
TPCH skew test speedup 3.250763905627973
Epoch 41/300 |loss: 0.001184| train set 5.188x speedup, test set 3.251x speedup, val set 3.980x speedup, step: 23
JOB test speedup 3.146600786683692
TPCH test speedup 4.0317592017420125
TPCH skew test speedup 3.721789371180582
Epoch 42/300 |loss: 0.001189| train set 5.118x speedup, test set 3.722x speedup, val set 4.037x speedup, step: 24
JOB test speedup 3.152230261170527
TPCH test speedup 5.148709472006475
TPCH skew test speedup 4.467065745379704
Epoch 43/300 |loss: 0.001129| train set 5.190x speedup, test set 4.467x speedup, val set 4.999x speedup, step: 25
JOB test speedup 3.114710601684656
TPCH test speedup 5.295131346045746
TPCH skew test speedup 5.056218313698294
Epoch 44/300 |loss: 0.001272| train set 5.146x speedup, test set 5.056x speedup, val set 5.143x speedup, step: 1
JOB test speedup 3.139945548774591
TPCH test speedup 5.295900876103009
TPCH skew test speedup 4.257621971257689
Epoch 45/300 |loss: 0.001154| train set 5.199x speedup, test set 4.258x speedup, val set 5.083x speedup, step: 2
JOB test speedup 3.107565408309487
TPCH test speedup 4.021382611025424
TPCH skew test speedup 3.5214267724266417
Epoch 46/300 |loss: 0.001004| train set 5.126x speedup, test set 3.521x speedup, val set 4.030x speedup, step: 3
JOB test speedup 2.4461144154449572
TPCH test speedup 5.400960823317197
TPCH skew test speedup 3.7617149892899264
Epoch 47/300 |loss: 0.001298| train set 5.122x speedup, test set 3.762x speedup, val set 4.887x speedup, step: 4
JOB test speedup 2.3862371859440468
TPCH test speedup 3.564843743986423
TPCH skew test speedup 3.2755650585280045
Epoch 48/300 |loss: 0.002596| train set 4.276x speedup, test set 3.276x speedup, val set 3.665x speedup, step: 5
early stopping at epoch 48
Training per epoch cost 2.372 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.016s, pg runtime 0.014s, speedup 0.886x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 0.463s, model runtime 0.580s, pg runtime 0.557s, speedup 0.960x
13, opt runtime 1.829s, model runtime 1.924s, pg runtime 53.885s, speedup 28.009x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.392s, pg runtime 0.354s, speedup 0.901x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.086s, pg runtime 0.086s, speedup 1.000x
21, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.556s, pg runtime 0.189s, speedup 0.340x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.140s, pg runtime 0.137s, speedup 0.973x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 29.334s, pg runtime 22.482s, speedup 0.766x
22, opt runtime 6.519s, model runtime 14.361s, pg runtime 6.519s, speedup 0.454x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.497s, pg runtime 7.268s, speedup 0.969x
28, opt runtime 6.854s, model runtime 7.512s, pg runtime 6.854s, speedup 0.912x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 30.317s, pg runtime 23.119s, speedup 0.763x
22, opt runtime 22.332s, model runtime 22.332s, pg runtime 22.449s, speedup 1.005x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 7.579s, pg runtime 6.749s, speedup 0.890x
28, opt runtime 7.213s, model runtime 8.026s, pg runtime 7.213s, speedup 0.899x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 44, train speedup 5.146, test speedup 3.115, val speedup 5.143
TPCH best validation speedup epoch: 44, train speedup 5.146, test speedup 5.295, val speedup 5.143
TPCH Skew best validation speedup epoch: 44, train speedup 5.146, test speedup 5.056, val speedup 5.143
execution cost 0:02:48.950576
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.152859, and there are 9604 training samples
in channel 9
JOB test speedup 2.53763913464708
TPCH test speedup 2.6529628399463943
TPCH skew test speedup 2.5089663302047547
Epoch 0/300 |loss: 0.037869| train set 2.507x speedup, test set 2.509x speedup, val set 2.489x speedup, step: 1
JOB test speedup 2.3254352857887928
TPCH test speedup 2.8404244409913426
TPCH skew test speedup 2.703444548854638
Epoch 1/300 |loss: 0.017508| train set 2.686x speedup, test set 2.703x speedup, val set 2.636x speedup, step: 2
JOB test speedup 1.0075495488859365
TPCH test speedup 3.041213076210705
TPCH skew test speedup 2.870127193696201
Epoch 2/300 |loss: 0.011719| train set 2.748x speedup, test set 2.870x speedup, val set 2.711x speedup, step: 3
JOB test speedup 2.537428191563301
TPCH test speedup 2.791489333515074
TPCH skew test speedup 2.781772029074366
Epoch 3/300 |loss: 0.009552| train set 2.731x speedup, test set 2.782x speedup, val set 2.523x speedup, step: 4
JOB test speedup 2.5402365843916264
TPCH test speedup 3.7532343988456494
TPCH skew test speedup 3.5026200331808726
Epoch 4/300 |loss: 0.007813| train set 3.472x speedup, test set 3.503x speedup, val set 3.483x speedup, step: 1
JOB test speedup 1.065218333158444
TPCH test speedup 4.647609367264458
TPCH skew test speedup 4.040432102787319
Epoch 5/300 |loss: 0.006554| train set 3.844x speedup, test set 4.040x speedup, val set 4.240x speedup, step: 2
JOB test speedup 2.3179354076579037
TPCH test speedup 4.6441799950841425
TPCH skew test speedup 3.78534363649051
Epoch 6/300 |loss: 0.005988| train set 3.834x speedup, test set 3.785x speedup, val set 4.086x speedup, step: 3
JOB test speedup 0.9822317935661118
TPCH test speedup 4.773183980792086
TPCH skew test speedup 4.343558434679554
Epoch 7/300 |loss: 0.005580| train set 3.570x speedup, test set 4.344x speedup, val set 4.297x speedup, step: 4
JOB test speedup 1.1160592466466188
TPCH test speedup 4.910385489655357
TPCH skew test speedup 4.4206259098978915
Epoch 8/300 |loss: 0.007977| train set 3.710x speedup, test set 4.421x speedup, val set 4.099x speedup, step: 5
JOB test speedup 1.023780459479236
TPCH test speedup 4.633842468972235
TPCH skew test speedup 4.049481869573943
Epoch 9/300 |loss: 0.004928| train set 3.802x speedup, test set 4.049x speedup, val set 4.224x speedup, step: 1
JOB test speedup 1.0284387313393095
TPCH test speedup 5.0005780255100065
TPCH skew test speedup 4.19639982978461
Epoch 10/300 |loss: 0.004824| train set 3.353x speedup, test set 4.196x speedup, val set 4.143x speedup, step: 2
JOB test speedup 3.1315193475292347
TPCH test speedup 4.802121589405411
TPCH skew test speedup 4.483941978983451
Epoch 11/300 |loss: 0.003780| train set 4.424x speedup, test set 4.484x speedup, val set 4.540x speedup, step: 3
JOB test speedup 2.9975672858023
TPCH test speedup 5.419267595080537
TPCH skew test speedup 5.109701306470069
Epoch 12/300 |loss: 0.003625| train set 5.140x speedup, test set 5.110x speedup, val set 4.981x speedup, step: 4
JOB test speedup 2.998644510598738
TPCH test speedup 5.3857083909199925
TPCH skew test speedup 4.238803742793751
Epoch 13/300 |loss: 0.003381| train set 5.121x speedup, test set 4.239x speedup, val set 5.117x speedup, step: 5
JOB test speedup 3.1494076017280377
TPCH test speedup 4.029893439444859
TPCH skew test speedup 4.070797407450989
Epoch 14/300 |loss: 0.003943| train set 3.982x speedup, test set 4.071x speedup, val set 3.979x speedup, step: 6
JOB test speedup 3.073687724729625
TPCH test speedup 4.939960159973513
TPCH skew test speedup 4.028088345520997
Epoch 15/300 |loss: 0.002978| train set 5.039x speedup, test set 4.028x speedup, val set 4.861x speedup, step: 7
JOB test speedup 3.0838214401435655
TPCH test speedup 3.9817609050275133
TPCH skew test speedup 3.4777998388378295
Epoch 16/300 |loss: 0.002512| train set 5.077x speedup, test set 3.478x speedup, val set 4.385x speedup, step: 8
JOB test speedup 2.443070111701201
TPCH test speedup 3.879653493726751
TPCH skew test speedup 3.4094538267599197
Epoch 17/300 |loss: 0.002511| train set 5.027x speedup, test set 3.409x speedup, val set 4.920x speedup, step: 9
JOB test speedup 2.8055494913560155
TPCH test speedup 4.86420948510158
TPCH skew test speedup 3.885612342554919
Epoch 18/300 |loss: 0.002355| train set 4.744x speedup, test set 3.886x speedup, val set 4.531x speedup, step: 10
JOB test speedup 2.8958417215156964
TPCH test speedup 5.172756554829449
TPCH skew test speedup 4.149074455303922
Epoch 19/300 |loss: 0.002258| train set 5.188x speedup, test set 4.149x speedup, val set 4.931x speedup, step: 1
JOB test speedup 2.9464787290288856
TPCH test speedup 5.046031440724012
TPCH skew test speedup 3.744084467027014
Epoch 20/300 |loss: 0.001977| train set 5.088x speedup, test set 3.744x speedup, val set 4.931x speedup, step: 2
JOB test speedup 2.1103371616242876
TPCH test speedup 3.3588366030151375
TPCH skew test speedup 3.338943230923801
Epoch 21/300 |loss: 0.002261| train set 3.224x speedup, test set 3.339x speedup, val set 3.242x speedup, step: 3
JOB test speedup 2.895547434427244
TPCH test speedup 3.9061128833429013
TPCH skew test speedup 3.416175187461954
Epoch 22/300 |loss: 0.003116| train set 4.892x speedup, test set 3.416x speedup, val set 4.411x speedup, step: 4
JOB test speedup 3.0818298195246516
TPCH test speedup 5.465962776339159
TPCH skew test speedup 5.121895569743326
Epoch 23/300 |loss: 0.001993| train set 5.038x speedup, test set 5.122x speedup, val set 5.096x speedup, step: 5
JOB test speedup 3.0858200074794904
TPCH test speedup 5.157627103517588
TPCH skew test speedup 4.177198985460068
Epoch 24/300 |loss: 0.002038| train set 5.188x speedup, test set 4.177x speedup, val set 4.995x speedup, step: 1
JOB test speedup 2.8740618380549985
TPCH test speedup 5.33073083307754
TPCH skew test speedup 4.878990914988821
Epoch 25/300 |loss: 0.001782| train set 5.192x speedup, test set 4.879x speedup, val set 4.978x speedup, step: 2
JOB test speedup 2.7710869671645164
TPCH test speedup 5.113689739536121
TPCH skew test speedup 4.108175954388807
Epoch 26/300 |loss: 0.001855| train set 5.168x speedup, test set 4.108x speedup, val set 5.084x speedup, step: 3
JOB test speedup 3.098635955480264
TPCH test speedup 5.2850963186385265
TPCH skew test speedup 4.8279804162193045
Epoch 27/300 |loss: 0.001910| train set 4.992x speedup, test set 4.828x speedup, val set 4.752x speedup, step: 4
JOB test speedup 3.178209458633364
TPCH test speedup 4.029719041296797
TPCH skew test speedup 4.070740977908668
Epoch 28/300 |loss: 0.001739| train set 4.697x speedup, test set 4.071x speedup, val set 3.998x speedup, step: 5
JOB test speedup 2.62726849144649
TPCH test speedup 3.70386013556361
TPCH skew test speedup 3.2416149186439296
Epoch 29/300 |loss: 0.001604| train set 4.714x speedup, test set 3.242x speedup, val set 4.371x speedup, step: 6
JOB test speedup 2.874633858492279
TPCH test speedup 4.96905428336472
TPCH skew test speedup 3.8924429122482542
Epoch 30/300 |loss: 0.001919| train set 5.170x speedup, test set 3.892x speedup, val set 4.979x speedup, step: 7
JOB test speedup 2.2416598209435725
TPCH test speedup 5.140774330892016
TPCH skew test speedup 3.986702128866286
Epoch 31/300 |loss: 0.001651| train set 5.025x speedup, test set 3.987x speedup, val set 4.958x speedup, step: 8
JOB test speedup 2.5171467222931545
TPCH test speedup 4.124204708901103
TPCH skew test speedup 3.457391654180296
Epoch 32/300 |loss: 0.001562| train set 4.259x speedup, test set 3.457x speedup, val set 3.977x speedup, step: 9
JOB test speedup 2.613192896713627
TPCH test speedup 5.299145128636057
TPCH skew test speedup 4.976752237344481
Epoch 33/300 |loss: 0.001825| train set 5.116x speedup, test set 4.977x speedup, val set 5.004x speedup, step: 10
JOB test speedup 2.6534099904236883
TPCH test speedup 5.257145134227755
TPCH skew test speedup 4.94761079680378
Epoch 34/300 |loss: 0.001594| train set 4.741x speedup, test set 4.948x speedup, val set 5.012x speedup, step: 1
JOB test speedup 2.6225146900116947
TPCH test speedup 5.14379552145687
TPCH skew test speedup 3.78807735725796
Epoch 35/300 |loss: 0.001653| train set 5.171x speedup, test set 3.788x speedup, val set 4.976x speedup, step: 2
JOB test speedup 2.661792909545947
TPCH test speedup 5.190741636740262
TPCH skew test speedup 4.893333612880125
Epoch 36/300 |loss: 0.001486| train set 5.085x speedup, test set 4.893x speedup, val set 4.936x speedup, step: 3
JOB test speedup 2.614756718031919
TPCH test speedup 5.188317292276387
TPCH skew test speedup 4.044043869863166
Epoch 37/300 |loss: 0.001567| train set 4.953x speedup, test set 4.044x speedup, val set 4.800x speedup, step: 4
JOB test speedup 2.6175075718080687
TPCH test speedup 4.029813395753449
TPCH skew test speedup 4.071947924387437
Epoch 38/300 |loss: 0.001671| train set 5.165x speedup, test set 4.072x speedup, val set 4.003x speedup, step: 5
JOB test speedup 2.627834549562849
TPCH test speedup 4.097931242427367
TPCH skew test speedup 4.102467638273398
Epoch 39/300 |loss: 0.001292| train set 5.183x speedup, test set 4.102x speedup, val set 4.393x speedup, step: 6
JOB test speedup 2.6308357542324465
TPCH test speedup 4.101310570095027
TPCH skew test speedup 4.1065637870049425
Epoch 40/300 |loss: 0.001121| train set 5.199x speedup, test set 4.107x speedup, val set 3.974x speedup, step: 7
JOB test speedup 2.5254110501752214
TPCH test speedup 4.015690873039085
TPCH skew test speedup 3.5027692152172314
Epoch 41/300 |loss: 0.001155| train set 4.965x speedup, test set 3.503x speedup, val set 3.885x speedup, step: 8
JOB test speedup 2.6395017003112886
TPCH test speedup 5.149979409401189
TPCH skew test speedup 4.921498961785428
Epoch 42/300 |loss: 0.001310| train set 5.172x speedup, test set 4.921x speedup, val set 4.894x speedup, step: 9
JOB test speedup 2.9484017641279814
TPCH test speedup 5.149979409401189
TPCH skew test speedup 4.161265828594825
Epoch 43/300 |loss: 0.001374| train set 5.142x speedup, test set 4.161x speedup, val set 4.789x speedup, step: 10
JOB test speedup 2.6203021997166296
TPCH test speedup 5.0835408725720885
TPCH skew test speedup 4.888752408361038
Epoch 44/300 |loss: 0.001300| train set 5.195x speedup, test set 4.889x speedup, val set 5.141x speedup, step: 1
JOB test speedup 2.6331005766436326
TPCH test speedup 5.453937048661685
TPCH skew test speedup 5.143771234135126
Epoch 45/300 |loss: 0.001280| train set 5.202x speedup, test set 5.144x speedup, val set 5.080x speedup, step: 2
JOB test speedup 2.6535614877314497
TPCH test speedup 3.9645110798923198
TPCH skew test speedup 3.964472749525813
Epoch 46/300 |loss: 0.001112| train set 5.114x speedup, test set 3.964x speedup, val set 4.042x speedup, step: 3
JOB test speedup 2.481852942447618
TPCH test speedup 3.9405218717362467
TPCH skew test speedup 3.8879578706570106
Epoch 47/300 |loss: 0.001404| train set 4.470x speedup, test set 3.888x speedup, val set 3.948x speedup, step: 4
JOB test speedup 2.0881035144463356
TPCH test speedup 3.8132013983805924
TPCH skew test speedup 3.6425487938231544
Epoch 48/300 |loss: 0.002396| train set 3.932x speedup, test set 3.643x speedup, val set 3.721x speedup, step: 5
early stopping at epoch 48
Training per epoch cost 2.354 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.085s, pg runtime 0.072s, speedup 0.847x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.094s, pg runtime 0.086s, speedup 0.915x
21, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.148s, pg runtime 1.214s, speedup 1.057x
20, opt runtime 1.353s, model runtime 1.353s, pg runtime 1.380s, speedup 1.021x
21, opt runtime 22.482s, model runtime 29.334s, pg runtime 22.482s, speedup 0.766x
22, opt runtime 6.519s, model runtime 14.361s, pg runtime 6.519s, speedup 0.454x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.497s, pg runtime 7.268s, speedup 0.969x
28, opt runtime 6.854s, model runtime 7.512s, pg runtime 6.854s, speedup 0.912x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
32, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
33, opt runtime 38.718s, model runtime 38.718s, pg runtime 69.421s, speedup 1.793x
34, opt runtime 35.527s, model runtime 42.634s, pg runtime 71.730s, speedup 1.682x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.639s, model runtime 17.885s, pg runtime 462.544s, speedup 25.862x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.316s, model runtime 1.316s, pg runtime 1.352s, speedup 1.027x
21, opt runtime 23.119s, model runtime 30.317s, pg runtime 23.119s, speedup 0.763x
22, opt runtime 22.332s, model runtime 22.332s, pg runtime 22.449s, speedup 1.005x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 7.579s, pg runtime 6.749s, speedup 0.890x
28, opt runtime 7.213s, model runtime 8.026s, pg runtime 7.213s, speedup 0.899x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
32, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
33, opt runtime 39.254s, model runtime 40.423s, pg runtime 58.921s, speedup 1.458x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
36, opt runtime 14.422s, model runtime 14.422s, pg runtime 497.542s, speedup 34.499x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 44, train speedup 5.195, test speedup 2.620, val speedup 5.141
TPCH best validation speedup epoch: 44, train speedup 5.195, test speedup 5.084, val speedup 5.141
TPCH Skew best validation speedup epoch: 44, train speedup 5.195, test speedup 4.889, val speedup 5.141
execution cost 0:02:47.549235
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.170416, and there are 9604 training samples
in channel 9
JOB test speedup 2.53763913464708
TPCH test speedup 2.6529628399463943
TPCH skew test speedup 2.5089663302047547
Epoch 0/300 |loss: 0.037869| train set 2.507x speedup, test set 2.509x speedup, val set 2.489x speedup, step: 1
JOB test speedup 2.543258575637958
TPCH test speedup 2.8404244409913426
TPCH skew test speedup 2.703444548854638
Epoch 1/300 |loss: 0.017508| train set 2.684x speedup, test set 2.703x speedup, val set 2.639x speedup, step: 2
JOB test speedup 1.0062654529751378
TPCH test speedup 3.1061226184215363
TPCH skew test speedup 2.9498295237223546
Epoch 2/300 |loss: 0.011686| train set 2.797x speedup, test set 2.950x speedup, val set 2.767x speedup, step: 3
JOB test speedup 2.537428191563301
TPCH test speedup 2.986658383459213
TPCH skew test speedup 2.886818293336062
Epoch 3/300 |loss: 0.009629| train set 2.782x speedup, test set 2.887x speedup, val set 2.678x speedup, step: 4
JOB test speedup 2.519628372583389
TPCH test speedup 3.6616026799544086
TPCH skew test speedup 3.4624975476929802
Epoch 4/300 |loss: 0.007979| train set 3.466x speedup, test set 3.462x speedup, val set 3.438x speedup, step: 1
JOB test speedup 1.0499839395756385
TPCH test speedup 4.459009680037194
TPCH skew test speedup 3.910490238346112
Epoch 5/300 |loss: 0.006639| train set 3.854x speedup, test set 3.910x speedup, val set 4.115x speedup, step: 2
JOB test speedup 1.0559625496990541
TPCH test speedup 3.468119429049407
TPCH skew test speedup 3.054710798229799
Epoch 6/300 |loss: 0.005797| train set 3.477x speedup, test set 3.055x speedup, val set 3.230x speedup, step: 3
JOB test speedup 1.0134040702876554
TPCH test speedup 4.806030354493205
TPCH skew test speedup 4.426599959780701
Epoch 7/300 |loss: 0.005537| train set 3.850x speedup, test set 4.427x speedup, val set 4.495x speedup, step: 4
JOB test speedup 1.0517427674443978
TPCH test speedup 4.939511714462559
TPCH skew test speedup 4.523839510437636
Epoch 8/300 |loss: 0.008453| train set 3.775x speedup, test set 4.524x speedup, val set 4.492x speedup, step: 5
JOB test speedup 1.020481955496026
TPCH test speedup 4.763897046961523
TPCH skew test speedup 4.3258612460086425
Epoch 9/300 |loss: 0.004925| train set 4.137x speedup, test set 4.326x speedup, val set 4.549x speedup, step: 1
JOB test speedup 1.026537513560175
TPCH test speedup 3.820366226562588
TPCH skew test speedup 3.736814005126924
Epoch 10/300 |loss: 0.004762| train set 3.599x speedup, test set 3.737x speedup, val set 3.729x speedup, step: 2
JOB test speedup 2.9308835340951034
TPCH test speedup 4.956528887385864
TPCH skew test speedup 4.430154964099207
Epoch 11/300 |loss: 0.003832| train set 4.431x speedup, test set 4.430x speedup, val set 4.737x speedup, step: 3
JOB test speedup 1.124925733040405
TPCH test speedup 5.266600964317901
TPCH skew test speedup 4.809548506338017
Epoch 12/300 |loss: 0.003647| train set 4.412x speedup, test set 4.810x speedup, val set 4.990x speedup, step: 4
JOB test speedup 2.837909714389292
TPCH test speedup 5.133723461295594
TPCH skew test speedup 4.151029807447072
Epoch 13/300 |loss: 0.003434| train set 5.150x speedup, test set 4.151x speedup, val set 4.902x speedup, step: 5
JOB test speedup 2.9440910004041045
TPCH test speedup 3.920905630151254
TPCH skew test speedup 3.4452320176581432
Epoch 14/300 |loss: 0.004030| train set 4.004x speedup, test set 3.445x speedup, val set 3.987x speedup, step: 6
JOB test speedup 2.8580988102376277
TPCH test speedup 5.0676376141015025
TPCH skew test speedup 4.098886216638209
Epoch 15/300 |loss: 0.003126| train set 4.965x speedup, test set 4.099x speedup, val set 4.855x speedup, step: 7
JOB test speedup 2.848163946594563
TPCH test speedup 5.141329558322841
TPCH skew test speedup 4.166972686613033
Epoch 16/300 |loss: 0.002584| train set 4.912x speedup, test set 4.167x speedup, val set 4.912x speedup, step: 8
JOB test speedup 2.0561172230283273
TPCH test speedup 5.162038819213568
TPCH skew test speedup 4.160137427024466
Epoch 17/300 |loss: 0.002700| train set 4.912x speedup, test set 4.160x speedup, val set 4.937x speedup, step: 9
JOB test speedup 2.580836627994053
TPCH test speedup 5.277834655598035
TPCH skew test speedup 4.235326911638935
Epoch 18/300 |loss: 0.002299| train set 5.092x speedup, test set 4.235x speedup, val set 4.977x speedup, step: 10
JOB test speedup 3.1005797604991847
TPCH test speedup 5.1241835174133925
TPCH skew test speedup 4.383942160156127
Epoch 19/300 |loss: 0.002317| train set 4.493x speedup, test set 4.384x speedup, val set 4.826x speedup, step: 1
JOB test speedup 3.1362626563642286
TPCH test speedup 5.053978564674758
TPCH skew test speedup 3.6737933524143163
Epoch 20/300 |loss: 0.002106| train set 5.085x speedup, test set 3.674x speedup, val set 4.898x speedup, step: 2
JOB test speedup 2.1293661664432304
TPCH test speedup 3.30724140170284
TPCH skew test speedup 3.305131152615705
Epoch 21/300 |loss: 0.002447| train set 3.419x speedup, test set 3.305x speedup, val set 3.286x speedup, step: 3
JOB test speedup 2.6016949281924515
TPCH test speedup 3.9736325424647223
TPCH skew test speedup 4.002159254346493
Epoch 22/300 |loss: 0.002585| train set 3.852x speedup, test set 4.002x speedup, val set 3.948x speedup, step: 4
JOB test speedup 3.1160181951005583
TPCH test speedup 4.111684972017486
TPCH skew test speedup 4.096685331208117
Epoch 23/300 |loss: 0.002109| train set 5.186x speedup, test set 4.097x speedup, val set 5.108x speedup, step: 5
JOB test speedup 3.0679941311161425
TPCH test speedup 4.480867481473602
TPCH skew test speedup 4.466214442590448
Epoch 24/300 |loss: 0.002066| train set 4.702x speedup, test set 4.466x speedup, val set 4.912x speedup, step: 1
JOB test speedup 2.8967476359674413
TPCH test speedup 5.269738644847614
TPCH skew test speedup 4.988861712005836
Epoch 25/300 |loss: 0.002012| train set 5.185x speedup, test set 4.989x speedup, val set 4.966x speedup, step: 2
JOB test speedup 3.0248715290858526
TPCH test speedup 5.166797269388247
TPCH skew test speedup 4.996037036853489
Epoch 26/300 |loss: 0.001990| train set 4.720x speedup, test set 4.996x speedup, val set 5.039x speedup, step: 3
JOB test speedup 3.0292449545986404
TPCH test speedup 5.139002135062147
TPCH skew test speedup 4.925720872350753
Epoch 27/300 |loss: 0.001908| train set 5.180x speedup, test set 4.926x speedup, val set 4.959x speedup, step: 4
JOB test speedup 3.0968529577464516
TPCH test speedup 4.013693663666325
TPCH skew test speedup 4.041902728056667
Epoch 28/300 |loss: 0.001905| train set 4.815x speedup, test set 4.042x speedup, val set 5.026x speedup, step: 5
JOB test speedup 2.6232635463918292
TPCH test speedup 3.803970703767283
TPCH skew test speedup 3.6925559028071384
Epoch 29/300 |loss: 0.001749| train set 4.728x speedup, test set 3.693x speedup, val set 3.887x speedup, step: 6
JOB test speedup 2.9563452431205333
TPCH test speedup 5.289361812736408
TPCH skew test speedup 4.254027293273085
Epoch 30/300 |loss: 0.002191| train set 5.155x speedup, test set 4.254x speedup, val set 5.046x speedup, step: 7
JOB test speedup 2.9323564259004704
TPCH test speedup 5.399637740107933
TPCH skew test speedup 4.875113334153238
Epoch 31/300 |loss: 0.001672| train set 5.092x speedup, test set 4.875x speedup, val set 4.948x speedup, step: 8
JOB test speedup 2.505140496386565
TPCH test speedup 4.066433514559937
TPCH skew test speedup 3.738858118360847
Epoch 32/300 |loss: 0.001536| train set 4.112x speedup, test set 3.739x speedup, val set 4.069x speedup, step: 9
JOB test speedup 2.7038657492878344
TPCH test speedup 5.463520953103974
TPCH skew test speedup 4.933597941665811
Epoch 33/300 |loss: 0.001743| train set 5.109x speedup, test set 4.934x speedup, val set 5.073x speedup, step: 10
JOB test speedup 2.9749433983754643
TPCH test speedup 5.311410260583148
TPCH skew test speedup 4.819160636877716
Epoch 34/300 |loss: 0.001706| train set 5.082x speedup, test set 4.819x speedup, val set 4.949x speedup, step: 1
JOB test speedup 2.5906759095648564
TPCH test speedup 4.341971256970018
TPCH skew test speedup 4.174058131765984
Epoch 35/300 |loss: 0.001508| train set 5.070x speedup, test set 4.174x speedup, val set 4.080x speedup, step: 2
JOB test speedup 2.558152075097704
TPCH test speedup 5.4197581613109795
TPCH skew test speedup 5.110258389434596
Epoch 36/300 |loss: 0.001586| train set 5.102x speedup, test set 5.110x speedup, val set 5.086x speedup, step: 3
JOB test speedup 2.631574181347474
TPCH test speedup 5.337372646971629
TPCH skew test speedup 4.857589826234661
Epoch 37/300 |loss: 0.001561| train set 5.134x speedup, test set 4.858x speedup, val set 4.948x speedup, step: 4
JOB test speedup 2.557954533923815
TPCH test speedup 5.28815907638498
TPCH skew test speedup 5.041791631593103
Epoch 38/300 |loss: 0.001811| train set 5.195x speedup, test set 5.042x speedup, val set 5.071x speedup, step: 5
JOB test speedup 2.626085521569712
TPCH test speedup 5.467103733014326
TPCH skew test speedup 5.122544669695637
Epoch 39/300 |loss: 0.001308| train set 5.150x speedup, test set 5.123x speedup, val set 4.980x speedup, step: 1
JOB test speedup 2.6195160186934254
TPCH test speedup 4.019853985806513
TPCH skew test speedup 3.9702271732474856
Epoch 40/300 |loss: 0.001159| train set 5.112x speedup, test set 3.970x speedup, val set 4.845x speedup, step: 2
JOB test speedup 2.594170475310465
TPCH test speedup 5.293342151532566
TPCH skew test speedup 4.832258634067689
Epoch 41/300 |loss: 0.001173| train set 5.171x speedup, test set 4.832x speedup, val set 4.822x speedup, step: 3
JOB test speedup 2.609689006291707
TPCH test speedup 5.379361464474476
TPCH skew test speedup 5.106509434970741
Epoch 42/300 |loss: 0.001269| train set 5.171x speedup, test set 5.107x speedup, val set 5.074x speedup, step: 4
JOB test speedup 2.5575135341614037
TPCH test speedup 5.352282891201528
TPCH skew test speedup 5.041972592682217
Epoch 43/300 |loss: 0.001261| train set 5.158x speedup, test set 5.042x speedup, val set 5.047x speedup, step: 5
JOB test speedup 3.087218162836349
TPCH test speedup 5.289199259388592
TPCH skew test speedup 5.0499232094902125
Epoch 44/300 |loss: 0.001412| train set 5.139x speedup, test set 5.050x speedup, val set 5.138x speedup, step: 1
JOB test speedup 2.616339050827606
TPCH test speedup 5.428391273333144
TPCH skew test speedup 5.0810161835969785
Epoch 45/300 |loss: 0.001251| train set 5.198x speedup, test set 5.081x speedup, val set 5.016x speedup, step: 2
JOB test speedup 2.6180641576863826
TPCH test speedup 4.0731734276244795
TPCH skew test speedup 4.050755705989293
Epoch 46/300 |loss: 0.001186| train set 5.202x speedup, test set 4.051x speedup, val set 5.044x speedup, step: 3
JOB test speedup 2.5824149637993226
TPCH test speedup 4.133185900012182
TPCH skew test speedup 3.9638328887179863
Epoch 47/300 |loss: 0.001257| train set 5.020x speedup, test set 3.964x speedup, val set 4.289x speedup, step: 4
JOB test speedup 2.4651103421200258
TPCH test speedup 4.031887910358117
TPCH skew test speedup 3.698749209965068
Epoch 48/300 |loss: 0.001692| train set 4.726x speedup, test set 3.699x speedup, val set 4.431x speedup, step: 5
JOB test speedup 2.50735907353965
TPCH test speedup 3.781313570894509
TPCH skew test speedup 3.6977785616724232
Epoch 49/300 |loss: 0.002226| train set 4.983x speedup, test set 3.698x speedup, val set 3.648x speedup, step: 6
early stopping at epoch 49
Training per epoch cost 2.358 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.016s, pg runtime 0.014s, speedup 0.886x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.458s, pg runtime 0.453s, speedup 0.991x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.079s, pg runtime 0.086s, speedup 1.091x
21, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
22, opt runtime 0.136s, model runtime 0.278s, pg runtime 0.891s, speedup 3.204x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.556s, pg runtime 0.189s, speedup 0.340x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.020s, pg runtime 0.020s, speedup 1.000x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.209s, pg runtime 0.137s, speedup 0.653x
30, opt runtime 0.023s, model runtime 0.065s, pg runtime 0.023s, speedup 0.357x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.618s, pg runtime 1.315s, speedup 0.813x
33, opt runtime 0.250s, model runtime 0.250s, pg runtime 0.250s, speedup 1.000x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 49.511s, pg runtime 87.329s, speedup 1.764x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.214s, pg runtime 1.214s, speedup 1.000x
20, opt runtime 1.353s, model runtime 1.380s, pg runtime 1.380s, speedup 1.000x
21, opt runtime 22.482s, model runtime 29.334s, pg runtime 22.482s, speedup 0.766x
22, opt runtime 6.519s, model runtime 14.361s, pg runtime 6.519s, speedup 0.454x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 7.497s, pg runtime 7.268s, speedup 0.969x
28, opt runtime 6.854s, model runtime 7.512s, pg runtime 6.854s, speedup 0.912x
29, opt runtime 5.362s, model runtime 5.646s, pg runtime 5.362s, speedup 0.950x
30, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 44.857s, pg runtime 69.421s, speedup 1.548x
34, opt runtime 35.527s, model runtime 42.569s, pg runtime 71.730s, speedup 1.685x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.923s, pg runtime 0.912s, speedup 0.987x
40, opt runtime 0.873s, model runtime 0.898s, pg runtime 0.873s, speedup 0.972x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
06, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 47.844s, pg runtime 80.007s, speedup 1.672x
16, opt runtime 54.335s, model runtime 54.335s, pg runtime 95.799s, speedup 1.763x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.316s, model runtime 1.352s, pg runtime 1.352s, speedup 1.000x
21, opt runtime 23.119s, model runtime 30.317s, pg runtime 23.119s, speedup 0.763x
22, opt runtime 22.332s, model runtime 22.332s, pg runtime 22.449s, speedup 1.005x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 7.579s, pg runtime 6.749s, speedup 0.890x
28, opt runtime 7.213s, model runtime 8.026s, pg runtime 7.213s, speedup 0.899x
29, opt runtime 5.223s, model runtime 5.730s, pg runtime 5.223s, speedup 0.912x
30, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 42.866s, pg runtime 58.921s, speedup 1.375x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
36, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 23.543s, model runtime 23.543s, pg runtime 23.543s, speedup 1.000x
39, opt runtime 0.876s, model runtime 0.876s, pg runtime 0.938s, speedup 1.071x
40, opt runtime 0.967s, model runtime 1.041s, pg runtime 0.967s, speedup 0.929x
====================
JOB best validation speedup epoch: 44, train speedup 5.139, test speedup 3.087, val speedup 5.138
TPCH best validation speedup epoch: 44, train speedup 5.139, test speedup 5.289, val speedup 5.138
TPCH Skew best validation speedup epoch: 44, train speedup 5.139, test speedup 5.050, val speedup 5.138
execution cost 0:02:51.246950
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 8, 9] [4, 2] [5 5]
[0, 1, 2, 7, 8, 9] [3, 5] [4 6]
[2, 3, 4, 6, 7, 8] [1, 9] [0 5]
[0, 2, 3, 4, 7, 9] [6, 1] [8 5]
[1, 2, 3, 4, 6, 7, 8] [5, 9] [0 0]
[1, 2, 3, 5, 6, 8] [9, 4] [7 0]
[2, 3, 4, 5, 6, 8] [0, 7] [9 1]
[0, 2, 3, 5, 6, 7] [8, 1] [4 9]
[0, 2, 3, 4, 5, 7] [6, 1] [9 8]
[0, 1, 3, 5, 6, 7, 9] [8, 4] [2 2]
[1, 2, 3, 4, 6, 7] [9, 5] [0 8]
[0, 1, 4, 5, 6, 7, 8] [9, 3] [2 2]
[3, 5, 6, 7, 8, 9] [1, 0] [2 4]
[0, 2, 5, 7, 8, 9] [3, 4] [6 1]
[0, 4, 5, 6, 7, 9] [1, 3] [8 2]
[2, 3, 5, 7, 8, 9] [1, 6] [0 4]
[1, 2, 3, 5, 6, 9] [4, 7] [8 0]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
[2, 3, 4, 6, 7, 8] [5, 9] [1 0]
[0, 1, 2, 5, 6, 7] [3, 4] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 3, 4, 5, 6, 9] [1, 2] [8 7]
[0, 1, 2, 4, 6, 7] [8, 3] [9 5]
[0, 1, 5, 6, 8, 9] [2, 7] [3 4]
[0, 1, 2, 3, 5, 8] [6, 4] [9 7]
[0, 1, 4, 5, 6, 7, 9] [8, 3] [2 2]
[2, 4, 6, 7, 8, 9] [5, 0] [1 3]
[1, 2, 4, 5, 7, 9] [3, 0] [6 8]
[0, 1, 3, 4, 8, 9] [5, 6] [7 2]
[2, 3, 5, 7, 8, 9] [4, 1] [0 6]
[0, 2, 4, 6, 7, 9] [3, 5] [1 8]
[0, 1, 2, 4, 5, 9] [3, 7] [8 6]
[0, 1, 3, 4, 5, 9] [6, 7] [8 2]
[1, 3, 5, 6, 7, 9] [2, 4] [0 8]
[0, 4, 5, 6, 7, 9] [2, 3] [8 1]
[0, 2, 4, 5, 6, 7] [8, 9] [1 3]
[0, 1, 3, 7, 8, 9] [4, 6] [5 2]
[0, 1, 2, 3, 4, 5] [9, 6] [7 8]
[1, 2, 4, 6, 7, 9] [5, 3] [8 0]
[0, 1, 3, 6, 7, 9] [2, 8] [4 5]
[0, 2, 3, 5, 6, 8] [7, 1] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.148248, and there are 9604 training samples
in channel 9
JOB test speedup 2.53763913464708
TPCH test speedup 2.6529628399463943
TPCH skew test speedup 2.5089663302047547
Epoch 0/300 |loss: 0.037868| train set 2.507x speedup, test set 2.509x speedup, val set 2.489x speedup, step: 1
JOB test speedup 2.3274582829005115
TPCH test speedup 2.7975987962272235
TPCH skew test speedup 2.690669636814816
Epoch 1/300 |loss: 0.017468| train set 2.651x speedup, test set 2.691x speedup, val set 2.606x speedup, step: 2
JOB test speedup 1.0043571533737519
TPCH test speedup 3.036282154755056
TPCH skew test speedup 2.8663867493733597
Epoch 2/300 |loss: 0.011527| train set 2.736x speedup, test set 2.866x speedup, val set 2.702x speedup, step: 3
JOB test speedup 2.5361562067477266
TPCH test speedup 2.816208570518991
TPCH skew test speedup 2.814803494112461
Epoch 3/300 |loss: 0.009677| train set 2.784x speedup, test set 2.815x speedup, val set 2.678x speedup, step: 4
JOB test speedup 0.5617107939655698
TPCH test speedup 3.543335709093431
TPCH skew test speedup 3.429602587104701
Epoch 4/300 |loss: 0.007979| train set 3.400x speedup, test set 3.430x speedup, val set 3.323x speedup, step: 1
JOB test speedup 1.0514791645989574
TPCH test speedup 4.781204133669526
TPCH skew test speedup 3.9902582382548073
Epoch 5/300 |loss: 0.006597| train set 3.652x speedup, test set 3.990x speedup, val set 4.522x speedup, step: 2
JOB test speedup 1.0184774020406169
TPCH test speedup 4.694502912556215
TPCH skew test speedup 4.1976141867386945
Epoch 6/300 |loss: 0.005870| train set 3.879x speedup, test set 4.198x speedup, val set 4.242x speedup, step: 3
JOB test speedup 0.9792983083329835
TPCH test speedup 4.7832555847339515
TPCH skew test speedup 4.4356992095125
Epoch 7/300 |loss: 0.005563| train set 3.968x speedup, test set 4.436x speedup, val set 4.621x speedup, step: 4
JOB test speedup 2.2728508330176176
TPCH test speedup 4.883428833065162
TPCH skew test speedup 4.04065496162067
Epoch 8/300 |loss: 0.007723| train set 3.874x speedup, test set 4.041x speedup, val set 4.374x speedup, step: 5
JOB test speedup 1.010090627625296
TPCH test speedup 4.906342036699213
TPCH skew test speedup 4.4216812558547485
Epoch 9/300 |loss: 0.004801| train set 4.100x speedup, test set 4.422x speedup, val set 4.628x speedup, step: 1
JOB test speedup 1.0278645045058648
TPCH test speedup 3.817433851639288
TPCH skew test speedup 3.278987949868798
Epoch 10/300 |loss: 0.004744| train set 3.597x speedup, test set 3.279x speedup, val set 3.704x speedup, step: 2
JOB test speedup 1.1128769145920825
TPCH test speedup 5.033259955574574
TPCH skew test speedup 3.857386406478897
Epoch 11/300 |loss: 0.003814| train set 4.202x speedup, test set 3.857x speedup, val set 4.559x speedup, step: 3
JOB test speedup 1.1071587793239752
TPCH test speedup 5.356364438853646
TPCH skew test speedup 5.035663590347956
Epoch 12/300 |loss: 0.003558| train set 5.021x speedup, test set 5.036x speedup, val set 5.052x speedup, step: 4
JOB test speedup 1.0065327006562779
TPCH test speedup 5.233360446185399
TPCH skew test speedup 4.207754144533308
Epoch 13/300 |loss: 0.003424| train set 4.990x speedup, test set 4.208x speedup, val set 4.923x speedup, step: 5
JOB test speedup 3.0632325033516437
TPCH test speedup 4.027512555941814
TPCH skew test speedup 3.4114565865565427
Epoch 14/300 |loss: 0.003614| train set 4.722x speedup, test set 3.411x speedup, val set 5.093x speedup, step: 1
JOB test speedup 3.0822234730317115
TPCH test speedup 5.143052860540416
TPCH skew test speedup 4.1178407259973415
Epoch 15/300 |loss: 0.002876| train set 5.100x speedup, test set 4.118x speedup, val set 4.952x speedup, step: 2
JOB test speedup 3.0936788653504004
TPCH test speedup 5.2738547577293655
TPCH skew test speedup 4.087189801607863
Epoch 16/300 |loss: 0.002558| train set 5.085x speedup, test set 4.087x speedup, val set 4.967x speedup, step: 3
JOB test speedup 2.3988815538838
TPCH test speedup 5.17341913323213
TPCH skew test speedup 4.034051410189657
Epoch 17/300 |loss: 0.002598| train set 5.136x speedup, test set 4.034x speedup, val set 4.987x speedup, step: 4
JOB test speedup 2.3838290210356363
TPCH test speedup 4.03433256582378
TPCH skew test speedup 3.4900790929425716
Epoch 18/300 |loss: 0.002335| train set 4.517x speedup, test set 3.490x speedup, val set 4.870x speedup, step: 5
JOB test speedup 3.1048608055818665
TPCH test speedup 5.318082503413075
TPCH skew test speedup 4.195065945019004
Epoch 19/300 |loss: 0.002329| train set 5.118x speedup, test set 4.195x speedup, val set 4.839x speedup, step: 6
JOB test speedup 2.8357547248227903
TPCH test speedup 3.4887695482919043
TPCH skew test speedup 3.028412343297912
Epoch 20/300 |loss: 0.002092| train set 4.691x speedup, test set 3.028x speedup, val set 3.407x speedup, step: 7
JOB test speedup 1.0408456512180067
TPCH test speedup 3.5245098868465625
TPCH skew test speedup 3.0530779539116395
Epoch 21/300 |loss: 0.002405| train set 3.609x speedup, test set 3.053x speedup, val set 3.464x speedup, step: 8
JOB test speedup 3.075921514466688
TPCH test speedup 4.0111721141599395
TPCH skew test speedup 3.395666770690093
Epoch 22/300 |loss: 0.002520| train set 5.115x speedup, test set 3.396x speedup, val set 3.937x speedup, step: 9
JOB test speedup 3.032982008273338
TPCH test speedup 5.367550981515994
TPCH skew test speedup 4.306888758227421
Epoch 23/300 |loss: 0.001922| train set 5.184x speedup, test set 4.307x speedup, val set 5.150x speedup, step: 10
JOB test speedup 2.9709670621957494
TPCH test speedup 5.293558649675468
TPCH skew test speedup 4.257926015567394
Epoch 24/300 |loss: 0.001986| train set 4.767x speedup, test set 4.258x speedup, val set 4.937x speedup, step: 11
JOB test speedup 3.136814169827422
TPCH test speedup 5.293558649675468
TPCH skew test speedup 4.257926015567394
Epoch 25/300 |loss: 0.001913| train set 4.840x speedup, test set 4.258x speedup, val set 5.105x speedup, step: 12
JOB test speedup 3.0254554585222717
TPCH test speedup 5.233200864904582
TPCH skew test speedup 4.998791652583423
Epoch 26/300 |loss: 0.001979| train set 4.769x speedup, test set 4.999x speedup, val set 5.031x speedup, step: 13
JOB test speedup 2.620446967029167
TPCH test speedup 5.300942497411069
TPCH skew test speedup 4.255233130509873
Epoch 27/300 |loss: 0.001764| train set 5.196x speedup, test set 4.255x speedup, val set 4.872x speedup, step: 14
JOB test speedup 3.1478604546344564
TPCH test speedup 4.265574351439125
TPCH skew test speedup 3.5903632835666035
Epoch 28/300 |loss: 0.001837| train set 5.109x speedup, test set 3.590x speedup, val set 4.922x speedup, step: 15
JOB test speedup 3.065370193896978
TPCH test speedup 4.040357161817886
TPCH skew test speedup 3.5293794088682517
Epoch 29/300 |loss: 0.001646| train set 5.102x speedup, test set 3.529x speedup, val set 4.873x speedup, step: 16
JOB test speedup 3.163523050033683
TPCH test speedup 5.11688186403404
TPCH skew test speedup 3.995201442291197
Epoch 30/300 |loss: 0.002035| train set 5.069x speedup, test set 3.995x speedup, val set 4.846x speedup, step: 17
JOB test speedup 2.9922896581855376
TPCH test speedup 5.2772159250462645
TPCH skew test speedup 4.093431270582869
Epoch 31/300 |loss: 0.001575| train set 5.096x speedup, test set 4.093x speedup, val set 5.016x speedup, step: 18
JOB test speedup 3.1048341803157578
TPCH test speedup 4.111684972017486
TPCH skew test speedup 3.5559203423869414
Epoch 32/300 |loss: 0.001486| train set 4.261x speedup, test set 3.556x speedup, val set 3.903x speedup, step: 19
JOB test speedup 3.1637352665277882
TPCH test speedup 5.420073631723305
TPCH skew test speedup 5.1103473191386355
Epoch 33/300 |loss: 0.001621| train set 5.097x speedup, test set 5.110x speedup, val set 4.827x speedup, step: 20
JOB test speedup 2.477318386523588
TPCH test speedup 5.333914058201022
TPCH skew test speedup 4.133787230651537
Epoch 34/300 |loss: 0.001541| train set 5.062x speedup, test set 4.134x speedup, val set 4.978x speedup, step: 21
JOB test speedup 3.185859275951305
TPCH test speedup 4.016122232399343
TPCH skew test speedup 3.4414480233184337
Epoch 35/300 |loss: 0.001572| train set 4.890x speedup, test set 3.441x speedup, val set 4.080x speedup, step: 22
JOB test speedup 3.1238392510037563
TPCH test speedup 5.19695348394236
TPCH skew test speedup 4.7781980049818475
Epoch 36/300 |loss: 0.001593| train set 5.070x speedup, test set 4.778x speedup, val set 5.135x speedup, step: 23
JOB test speedup 3.112689256447136
TPCH test speedup 5.419122845203747
TPCH skew test speedup 5.1115141335972645
Epoch 37/300 |loss: 0.001733| train set 5.113x speedup, test set 5.112x speedup, val set 5.075x speedup, step: 24
JOB test speedup 3.1082939561952423
TPCH test speedup 4.039653540729564
TPCH skew test speedup 3.529893480322609
Epoch 38/300 |loss: 0.001682| train set 5.189x speedup, test set 3.530x speedup, val set 5.001x speedup, step: 25
early stopping at epoch 38
Training per epoch cost 2.341 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.622x
Optimal speedup on tpch skew test set is 5.202x
========== JOB
01, opt runtime 0.012s, model runtime 0.187s, pg runtime 0.072s, speedup 0.385x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 0.313s, model runtime 0.407s, pg runtime 0.313s, speedup 0.769x
16, opt runtime 0.441s, model runtime 0.477s, pg runtime 0.453s, speedup 0.950x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
22, opt runtime 0.136s, model runtime 0.341s, pg runtime 0.891s, speedup 2.617x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.092s, pg runtime 0.112s, speedup 1.228x
28, opt runtime 0.154s, model runtime 0.476s, pg runtime 0.154s, speedup 0.324x
29, opt runtime 0.136s, model runtime 0.152s, pg runtime 0.137s, speedup 0.899x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.286s, model runtime 29.286s, pg runtime 92.131s, speedup 3.146x
04, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
05, opt runtime 23.961s, model runtime 23.961s, pg runtime 32.278s, speedup 1.347x
06, opt runtime 21.143s, model runtime 24.476s, pg runtime 21.143s, speedup 0.864x
07, opt runtime 6.460s, model runtime 6.460s, pg runtime 16.134s, speedup 2.498x
08, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
09, opt runtime 3.944s, model runtime 3.944s, pg runtime 3.944s, speedup 1.000x
10, opt runtime 3.603s, model runtime 3.603s, pg runtime 3.603s, speedup 1.000x
11, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
12, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
13, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
14, opt runtime 3.449s, model runtime 3.449s, pg runtime 14.824s, speedup 4.298x
15, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
16, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
17, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
18, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
19, opt runtime 1.148s, model runtime 1.240s, pg runtime 1.214s, speedup 0.979x
20, opt runtime 1.353s, model runtime 1.508s, pg runtime 1.380s, speedup 0.915x
21, opt runtime 22.482s, model runtime 29.334s, pg runtime 22.482s, speedup 0.766x
22, opt runtime 6.519s, model runtime 14.361s, pg runtime 6.519s, speedup 0.454x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.404s, model runtime 1.404s, pg runtime 1.404s, speedup 1.000x
27, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
28, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
29, opt runtime 5.362s, model runtime 5.362s, pg runtime 5.362s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 24.079s, model runtime 24.079s, pg runtime 608.707s, speedup 25.279x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 38.718s, model runtime 40.963s, pg runtime 69.421s, speedup 1.695x
34, opt runtime 35.527s, model runtime 35.527s, pg runtime 71.730s, speedup 2.019x
35, opt runtime 18.690s, model runtime 25.079s, pg runtime 651.942s, speedup 25.995x
36, opt runtime 16.639s, model runtime 23.017s, pg runtime 462.544s, speedup 20.095x
37, opt runtime 11.120s, model runtime 11.120s, pg runtime 11.120s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 0.912s, model runtime 0.912s, pg runtime 0.912s, speedup 1.000x
40, opt runtime 0.873s, model runtime 0.873s, pg runtime 0.873s, speedup 1.000x
========== TPCH skew
01, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
02, opt runtime 28.185s, model runtime 28.185s, pg runtime 28.185s, speedup 1.000x
03, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
04, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
05, opt runtime 20.708s, model runtime 25.217s, pg runtime 20.708s, speedup 0.821x
06, opt runtime 11.965s, model runtime 31.439s, pg runtime 11.965s, speedup 0.381x
07, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
08, opt runtime 6.497s, model runtime 6.497s, pg runtime 12.849s, speedup 1.978x
09, opt runtime 3.612s, model runtime 3.612s, pg runtime 3.612s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 25.045s, model runtime 25.045s, pg runtime 64.291s, speedup 2.567x
12, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 2.983s, model runtime 2.983s, pg runtime 11.844s, speedup 3.970x
15, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
16, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 7.915s, model runtime 7.915s, pg runtime 29.436s, speedup 3.719x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.316s, model runtime 1.382s, pg runtime 1.352s, speedup 0.978x
21, opt runtime 23.119s, model runtime 30.317s, pg runtime 23.119s, speedup 0.763x
22, opt runtime 22.332s, model runtime 22.332s, pg runtime 22.449s, speedup 1.005x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 6.749s, model runtime 9.098s, pg runtime 6.749s, speedup 0.742x
28, opt runtime 7.213s, model runtime 10.591s, pg runtime 7.213s, speedup 0.681x
29, opt runtime 5.223s, model runtime 5.223s, pg runtime 5.223s, speedup 1.000x
30, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
31, opt runtime 24.136s, model runtime 24.136s, pg runtime 609.432s, speedup 25.250x
32, opt runtime 24.451s, model runtime 24.451s, pg runtime 628.615s, speedup 25.709x
33, opt runtime 39.254s, model runtime 39.254s, pg runtime 58.921s, speedup 1.501x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.482s, model runtime 22.575s, pg runtime 622.915s, speedup 27.593x
36, opt runtime 14.422s, model runtime 23.164s, pg runtime 497.542s, speedup 21.479x
37, opt runtime 32.901s, model runtime 91.848s, pg runtime 32.901s, speedup 0.358x
38, opt runtime 23.543s, model runtime 91.587s, pg runtime 23.543s, speedup 0.257x
39, opt runtime 0.876s, model runtime 0.938s, pg runtime 0.938s, speedup 1.000x
40, opt runtime 0.967s, model runtime 0.967s, pg runtime 0.967s, speedup 1.000x
====================
JOB best validation speedup epoch: 14, train speedup 4.722, test speedup 3.063, val speedup 5.093
TPCH best validation speedup epoch: 14, train speedup 4.722, test speedup 4.028, val speedup 5.093
TPCH Skew best validation speedup epoch: 14, train speedup 4.722, test speedup 3.411, val speedup 5.093
execution cost 0:02:15.261397
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
construct training samples cost 0:00:01.160413, and there are 9408 training samples
in channel 9
JOB test speedup 0.9482992191637157
TPCH test speedup 2.5439851095259973
TPCH skew test speedup 2.530704080347007
Epoch 0/300 |loss: 0.037324| train set 2.540x speedup, test set 2.531x speedup, val set 2.311x speedup, step: 1
JOB test speedup 2.2359935842095475
TPCH test speedup 2.7387836432096875
TPCH skew test speedup 2.6194938061246753
Epoch 1/300 |loss: 0.017553| train set 2.599x speedup, test set 2.619x speedup, val set 2.572x speedup, step: 2
JOB test speedup 0.9755008555769169
TPCH test speedup 3.0572381248976828
TPCH skew test speedup 2.876984237745062
Epoch 2/300 |loss: 0.011413| train set 2.983x speedup, test set 2.877x speedup, val set 3.023x speedup, step: 3
JOB test speedup 0.9766166227754874
TPCH test speedup 3.1361938691805897
TPCH skew test speedup 2.8904475400649643
Epoch 3/300 |loss: 0.008266| train set 2.906x speedup, test set 2.890x speedup, val set 2.864x speedup, step: 4
JOB test speedup 0.9691496694430328
TPCH test speedup 4.133183919454852
TPCH skew test speedup 3.717095181028719
Epoch 4/300 |loss: 0.006895| train set 3.269x speedup, test set 3.717x speedup, val set 3.977x speedup, step: 1
JOB test speedup 1.0325200639069505
TPCH test speedup 3.7612227738999144
TPCH skew test speedup 3.89467233263388
Epoch 5/300 |loss: 0.007591| train set 3.693x speedup, test set 3.895x speedup, val set 3.619x speedup, step: 2
JOB test speedup 1.0734099646179154
TPCH test speedup 4.650551652872127
TPCH skew test speedup 4.805263613164486
Epoch 6/300 |loss: 0.005362| train set 4.184x speedup, test set 4.805x speedup, val set 4.556x speedup, step: 3
JOB test speedup 1.024013536200322
TPCH test speedup 4.087567725008162
TPCH skew test speedup 3.9903286862941574
Epoch 7/300 |loss: 0.004750| train set 3.685x speedup, test set 3.990x speedup, val set 3.963x speedup, step: 4
JOB test speedup 1.1171444811884308
TPCH test speedup 4.657235482964788
TPCH skew test speedup 4.785422271385406
Epoch 8/300 |loss: 0.005360| train set 4.528x speedup, test set 4.785x speedup, val set 4.411x speedup, step: 5
JOB test speedup 1.080578368202042
TPCH test speedup 4.506375297150072
TPCH skew test speedup 4.155017729264421
Epoch 9/300 |loss: 0.004254| train set 4.514x speedup, test set 4.155x speedup, val set 4.259x speedup, step: 1
JOB test speedup 2.955357391431988
TPCH test speedup 4.434033908885174
TPCH skew test speedup 4.125035187017967
Epoch 10/300 |loss: 0.004116| train set 4.364x speedup, test set 4.125x speedup, val set 4.149x speedup, step: 2
JOB test speedup 2.751037157643377
TPCH test speedup 5.037383596066351
TPCH skew test speedup 3.9196344570370965
Epoch 11/300 |loss: 0.003909| train set 5.153x speedup, test set 3.920x speedup, val set 4.886x speedup, step: 3
JOB test speedup 1.1099591182423068
TPCH test speedup 5.137614354651559
TPCH skew test speedup 4.799578935407911
Epoch 12/300 |loss: 0.003321| train set 5.081x speedup, test set 4.800x speedup, val set 4.780x speedup, step: 4
JOB test speedup 1.0535843440162311
TPCH test speedup 4.602299776250063
TPCH skew test speedup 4.5633545029565825
Epoch 13/300 |loss: 0.003395| train set 4.201x speedup, test set 4.563x speedup, val set 4.327x speedup, step: 5
JOB test speedup 2.555358429979459
TPCH test speedup 4.711394438730385
TPCH skew test speedup 4.392748110445269
Epoch 14/300 |loss: 0.003439| train set 5.266x speedup, test set 4.393x speedup, val set 4.946x speedup, step: 1
JOB test speedup 3.1004261218419744
TPCH test speedup 5.147587444830707
TPCH skew test speedup 4.758057286760583
Epoch 15/300 |loss: 0.003510| train set 5.090x speedup, test set 4.758x speedup, val set 4.843x speedup, step: 2
JOB test speedup 2.88387039185261
TPCH test speedup 5.155244484401218
TPCH skew test speedup 4.744023273727065
Epoch 16/300 |loss: 0.002809| train set 5.161x speedup, test set 4.744x speedup, val set 4.893x speedup, step: 3
JOB test speedup 2.846955292257791
TPCH test speedup 4.849999892843762
TPCH skew test speedup 4.6378570454317325
Epoch 17/300 |loss: 0.003400| train set 4.850x speedup, test set 4.638x speedup, val set 4.862x speedup, step: 4
JOB test speedup 2.7102432827027183
TPCH test speedup 3.827036505910899
TPCH skew test speedup 3.7723946335373997
Epoch 18/300 |loss: 0.002773| train set 5.296x speedup, test set 3.772x speedup, val set 3.742x speedup, step: 5
JOB test speedup 2.8277723477717673
TPCH test speedup 5.225209900302913
TPCH skew test speedup 4.944386656129961
Epoch 19/300 |loss: 0.002611| train set 5.208x speedup, test set 4.944x speedup, val set 4.849x speedup, step: 6
JOB test speedup 2.8158113041039607
TPCH test speedup 5.1137457029349935
TPCH skew test speedup 4.757828860831953
Epoch 20/300 |loss: 0.002357| train set 4.958x speedup, test set 4.758x speedup, val set 4.796x speedup, step: 7
JOB test speedup 2.898058372736367
TPCH test speedup 5.206861679295462
TPCH skew test speedup 4.935708089414191
Epoch 21/300 |loss: 0.002602| train set 4.859x speedup, test set 4.936x speedup, val set 4.482x speedup, step: 8
JOB test speedup 2.922859236282664
TPCH test speedup 5.032455736944689
TPCH skew test speedup 4.791552000183087
Epoch 22/300 |loss: 0.002495| train set 5.243x speedup, test set 4.792x speedup, val set 4.940x speedup, step: 9
JOB test speedup 2.872036312518599
TPCH test speedup 4.072629831145564
TPCH skew test speedup 3.95688995383786
Epoch 23/300 |loss: 0.002077| train set 5.228x speedup, test set 3.957x speedup, val set 4.830x speedup, step: 10
JOB test speedup 2.8202951574049475
TPCH test speedup 4.668103233285737
TPCH skew test speedup 4.513707737890014
Epoch 24/300 |loss: 0.001933| train set 5.302x speedup, test set 4.514x speedup, val set 4.879x speedup, step: 11
JOB test speedup 2.804477624974936
TPCH test speedup 4.959729840827089
TPCH skew test speedup 4.726333428076686
Epoch 25/300 |loss: 0.002121| train set 5.263x speedup, test set 4.726x speedup, val set 4.905x speedup, step: 12
JOB test speedup 2.862565649151648
TPCH test speedup 3.831620500778198
TPCH skew test speedup 4.307863621365574
Epoch 26/300 |loss: 0.001770| train set 5.215x speedup, test set 4.308x speedup, val set 4.686x speedup, step: 13
JOB test speedup 2.752704931733323
TPCH test speedup 5.087466756492779
TPCH skew test speedup 4.807898191091156
Epoch 27/300 |loss: 0.002021| train set 5.214x speedup, test set 4.808x speedup, val set 4.848x speedup, step: 14
JOB test speedup 2.9215201424961865
TPCH test speedup 4.883968625810399
TPCH skew test speedup 4.636247628632992
Epoch 28/300 |loss: 0.002051| train set 5.219x speedup, test set 4.636x speedup, val set 4.631x speedup, step: 15
JOB test speedup 2.9081329004286025
TPCH test speedup 5.021134668813589
TPCH skew test speedup 4.759697013486371
Epoch 29/300 |loss: 0.002099| train set 5.299x speedup, test set 4.760x speedup, val set 4.904x speedup, step: 16
JOB test speedup 2.8242833929228373
TPCH test speedup 5.014289985890257
TPCH skew test speedup 4.751702686632347
Epoch 30/300 |loss: 0.001768| train set 5.379x speedup, test set 4.752x speedup, val set 4.942x speedup, step: 17
JOB test speedup 2.8427554197422316
TPCH test speedup 5.025385245215756
TPCH skew test speedup 4.702119151515298
Epoch 31/300 |loss: 0.001727| train set 5.176x speedup, test set 4.702x speedup, val set 4.812x speedup, step: 18
JOB test speedup 2.924914491724205
TPCH test speedup 5.05729115090483
TPCH skew test speedup 4.686329827246651
Epoch 32/300 |loss: 0.001633| train set 5.290x speedup, test set 4.686x speedup, val set 4.834x speedup, step: 19
JOB test speedup 2.9541892375226495
TPCH test speedup 4.97004236232644
TPCH skew test speedup 4.931916613553247
Epoch 33/300 |loss: 0.001850| train set 5.186x speedup, test set 4.932x speedup, val set 4.792x speedup, step: 20
JOB test speedup 2.830575173976816
TPCH test speedup 3.570296996088563
TPCH skew test speedup 3.4258983694531153
Epoch 34/300 |loss: 0.001596| train set 5.312x speedup, test set 3.426x speedup, val set 4.820x speedup, step: 21
JOB test speedup 2.778499420396658
TPCH test speedup 4.012989068012092
TPCH skew test speedup 3.832990239527345
Epoch 35/300 |loss: 0.001533| train set 5.262x speedup, test set 3.833x speedup, val set 4.753x speedup, step: 22
JOB test speedup 2.7937280087210667
TPCH test speedup 4.028052806423633
TPCH skew test speedup 3.8606740177148597
Epoch 36/300 |loss: 0.001696| train set 5.263x speedup, test set 3.861x speedup, val set 4.821x speedup, step: 23
JOB test speedup 2.701130844907204
TPCH test speedup 4.983031053601822
TPCH skew test speedup 4.721729788436743
Epoch 37/300 |loss: 0.001586| train set 5.332x speedup, test set 4.722x speedup, val set 4.957x speedup, step: 24
JOB test speedup 2.899254496937815
TPCH test speedup 5.096524904120794
TPCH skew test speedup 4.784365957873451
Epoch 38/300 |loss: 0.001350| train set 5.213x speedup, test set 4.784x speedup, val set 4.817x speedup, step: 25
JOB test speedup 2.8896855960565686
TPCH test speedup 3.858090576306738
TPCH skew test speedup 3.6021694872243954
Epoch 39/300 |loss: 0.001527| train set 5.323x speedup, test set 3.602x speedup, val set 3.979x speedup, step: 26
JOB test speedup 2.8651041221983333
TPCH test speedup 3.5783320042974647
TPCH skew test speedup 3.4306305493756257
Epoch 40/300 |loss: 0.001282| train set 5.086x speedup, test set 3.431x speedup, val set 3.327x speedup, step: 27
JOB test speedup 2.8112036252922934
TPCH test speedup 5.130245500779334
TPCH skew test speedup 4.637805720730195
Epoch 41/300 |loss: 0.001376| train set 5.300x speedup, test set 4.638x speedup, val set 4.915x speedup, step: 28
JOB test speedup 2.840894686035123
TPCH test speedup 4.982491333911788
TPCH skew test speedup 4.722133191107687
Epoch 42/300 |loss: 0.001344| train set 5.363x speedup, test set 4.722x speedup, val set 4.837x speedup, step: 29
JOB test speedup 2.841348171008093
TPCH test speedup 5.068379876959093
TPCH skew test speedup 4.690350058528763
Epoch 43/300 |loss: 0.001255| train set 5.352x speedup, test set 4.690x speedup, val set 4.732x speedup, step: 30
JOB test speedup 2.81761595824624
TPCH test speedup 3.552936437706401
TPCH skew test speedup 3.501714949263422
Epoch 44/300 |loss: 0.001398| train set 4.863x speedup, test set 3.502x speedup, val set 3.448x speedup, step: 31
JOB test speedup 2.880013871770549
TPCH test speedup 4.968919542189266
TPCH skew test speedup 4.9330604928646595
Epoch 45/300 |loss: 0.001122| train set 5.350x speedup, test set 4.933x speedup, val set 4.805x speedup, step: 32
JOB test speedup 2.8397340234089663
TPCH test speedup 5.129369556809613
TPCH skew test speedup 4.178857638772382
Epoch 46/300 |loss: 0.001059| train set 5.242x speedup, test set 4.179x speedup, val set 4.820x speedup, step: 33
JOB test speedup 2.5565146599405395
TPCH test speedup 5.318542436030978
TPCH skew test speedup 4.952255598153687
Epoch 47/300 |loss: 0.001127| train set 5.374x speedup, test set 4.952x speedup, val set 4.784x speedup, step: 34
JOB test speedup 2.6720365820073027
TPCH test speedup 4.9666060971174915
TPCH skew test speedup 4.803648695568353
Epoch 48/300 |loss: 0.001057| train set 5.364x speedup, test set 4.804x speedup, val set 4.597x speedup, step: 35
JOB test speedup 2.6388526181054637
TPCH test speedup 5.106675273578364
TPCH skew test speedup 4.977572881132901
Epoch 49/300 |loss: 0.001114| train set 5.352x speedup, test set 4.978x speedup, val set 4.821x speedup, step: 36
JOB test speedup 2.8215872709090037
TPCH test speedup 3.5171670874068095
TPCH skew test speedup 3.53487257042644
Epoch 50/300 |loss: 0.001041| train set 5.352x speedup, test set 3.535x speedup, val set 3.450x speedup, step: 37
JOB test speedup 2.92312937292261
TPCH test speedup 5.115576523674261
TPCH skew test speedup 5.009476224255585
Epoch 51/300 |loss: 0.001169| train set 5.262x speedup, test set 5.009x speedup, val set 4.744x speedup, step: 38
JOB test speedup 2.8334169997360985
TPCH test speedup 3.9122960741416954
TPCH skew test speedup 3.950577127213108
Epoch 52/300 |loss: 0.000940| train set 5.325x speedup, test set 3.951x speedup, val set 4.722x speedup, step: 39
JOB test speedup 2.661715394627116
TPCH test speedup 5.00276657969557
TPCH skew test speedup 4.968940078713399
Epoch 53/300 |loss: 0.001051| train set 5.285x speedup, test set 4.969x speedup, val set 4.684x speedup, step: 40
JOB test speedup 2.7989484750358633
TPCH test speedup 5.049821460138343
TPCH skew test speedup 4.899805460121187
Epoch 54/300 |loss: 0.000985| train set 5.352x speedup, test set 4.900x speedup, val set 4.794x speedup, step: 41
JOB test speedup 2.9826206150168266
TPCH test speedup 5.171945603119385
TPCH skew test speedup 4.912432006448769
Epoch 55/300 |loss: 0.000934| train set 5.371x speedup, test set 4.912x speedup, val set 4.852x speedup, step: 42
JOB test speedup 2.844608504845615
TPCH test speedup 4.056905157615609
TPCH skew test speedup 3.9657324667479923
Epoch 56/300 |loss: 0.000919| train set 5.276x speedup, test set 3.966x speedup, val set 4.646x speedup, step: 43
JOB test speedup 2.7856481319865853
TPCH test speedup 4.97639093842727
TPCH skew test speedup 4.993228081283228
Epoch 57/300 |loss: 0.000998| train set 5.275x speedup, test set 4.993x speedup, val set 4.906x speedup, step: 44
JOB test speedup 2.735193586878565
TPCH test speedup 4.078053601751892
TPCH skew test speedup 4.038620123198338
Epoch 58/300 |loss: 0.000973| train set 5.350x speedup, test set 4.039x speedup, val set 4.718x speedup, step: 45
JOB test speedup 2.6652963943861696
TPCH test speedup 5.107486801377487
TPCH skew test speedup 5.005344562135725
Epoch 59/300 |loss: 0.001192| train set 5.323x speedup, test set 5.005x speedup, val set 4.773x speedup, step: 46
JOB test speedup 2.5395821273399104
TPCH test speedup 4.1447288859700055
TPCH skew test speedup 3.922557386562514
Epoch 60/300 |loss: 0.000934| train set 5.302x speedup, test set 3.923x speedup, val set 4.821x speedup, step: 47
JOB test speedup 2.8115580785683454
TPCH test speedup 4.767530777375895
TPCH skew test speedup 4.894944662358924
Epoch 61/300 |loss: 0.000846| train set 5.292x speedup, test set 4.895x speedup, val set 4.600x speedup, step: 48
JOB test speedup 2.8305322538801208
TPCH test speedup 4.799361742444325
TPCH skew test speedup 4.40724818770272
Epoch 62/300 |loss: 0.000999| train set 5.377x speedup, test set 4.407x speedup, val set 4.572x speedup, step: 49
JOB test speedup 2.737762381565803
TPCH test speedup 4.935611113193663
TPCH skew test speedup 4.381481852464785
Epoch 63/300 |loss: 0.000897| train set 5.276x speedup, test set 4.381x speedup, val set 4.866x speedup, step: 50
JOB test speedup 2.9399525044626986
TPCH test speedup 3.6561117511353243
TPCH skew test speedup 3.5661449511802266
Epoch 64/300 |loss: 0.000840| train set 5.382x speedup, test set 3.566x speedup, val set 4.766x speedup, step: 51
JOB test speedup 2.834790496384047
TPCH test speedup 5.009130842267337
TPCH skew test speedup 4.895480929422769
Epoch 65/300 |loss: 0.000922| train set 5.307x speedup, test set 4.895x speedup, val set 4.645x speedup, step: 52
JOB test speedup 2.895527317408113
TPCH test speedup 4.968919542189266
TPCH skew test speedup 4.9330604928646595
Epoch 66/300 |loss: 0.000817| train set 5.380x speedup, test set 4.933x speedup, val set 4.770x speedup, step: 53
JOB test speedup 2.691843363781513
TPCH test speedup 4.969731206170665
TPCH skew test speedup 4.688540573499704
Epoch 67/300 |loss: 0.000768| train set 5.373x speedup, test set 4.689x speedup, val set 4.703x speedup, step: 54
JOB test speedup 2.809467179249314
TPCH test speedup 3.85927667932165
TPCH skew test speedup 3.85800813616746
Epoch 68/300 |loss: 0.000768| train set 5.375x speedup, test set 3.858x speedup, val set 4.838x speedup, step: 55
JOB test speedup 2.7346157744362283
TPCH test speedup 4.863732940142165
TPCH skew test speedup 4.791273725248616
Epoch 69/300 |loss: 0.000907| train set 5.372x speedup, test set 4.791x speedup, val set 4.692x speedup, step: 56
JOB test speedup 3.0701814219527903
TPCH test speedup 4.324435556076563
TPCH skew test speedup 3.4088013543475766
Epoch 70/300 |loss: 0.000906| train set 5.305x speedup, test set 3.409x speedup, val set 4.854x speedup, step: 57
early stopping at epoch 70
Training per epoch cost 2.343 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.325s, pg runtime 0.072s, speedup 0.221x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.016s, pg runtime 0.014s, speedup 0.886x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.883s, pg runtime 0.802s, speedup 0.908x
07, opt runtime 0.919s, model runtime 4.195s, pg runtime 0.942s, speedup 0.224x
08, opt runtime 0.206s, model runtime 0.369s, pg runtime 0.206s, speedup 0.560x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.386s, pg runtime 0.313s, speedup 0.811x
16, opt runtime 0.441s, model runtime 0.458s, pg runtime 0.453s, speedup 0.991x
17, opt runtime 0.327s, model runtime 0.349s, pg runtime 0.354s, speedup 1.012x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.061s, pg runtime 0.086s, speedup 1.407x
21, opt runtime 0.626s, model runtime 1.091s, pg runtime 2.558s, speedup 2.346x
22, opt runtime 0.136s, model runtime 0.231s, pg runtime 0.891s, speedup 3.855x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.112s, pg runtime 0.112s, speedup 1.000x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.196s, pg runtime 0.137s, speedup 0.699x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 2.411s, pg runtime 0.965s, speedup 0.400x
32, opt runtime 1.315s, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.356s, pg runtime 1.356s, speedup 1.000x
20, opt runtime 1.340s, model runtime 1.340s, pg runtime 1.340s, speedup 1.000x
21, opt runtime 6.281s, model runtime 22.977s, pg runtime 6.281s, speedup 0.273x
22, opt runtime 25.034s, model runtime 31.752s, pg runtime 25.034s, speedup 0.788x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
28, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
29, opt runtime 5.414s, model runtime 5.780s, pg runtime 5.414s, speedup 0.937x
30, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 62.647s, pg runtime 70.116s, speedup 1.119x
34, opt runtime 39.191s, model runtime 62.126s, pg runtime 75.984s, speedup 1.223x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.100s, pg runtime 1.100s, speedup 1.000x
40, opt runtime 1.084s, model runtime 1.155s, pg runtime 1.155s, speedup 1.000x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.244s, pg runtime 1.244s, speedup 1.000x
20, opt runtime 1.367s, model runtime 1.367s, pg runtime 1.367s, speedup 1.000x
21, opt runtime 9.313s, model runtime 29.211s, pg runtime 9.313s, speedup 0.319x
22, opt runtime 26.254s, model runtime 32.932s, pg runtime 26.254s, speedup 0.797x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 10.591s, pg runtime 7.213s, speedup 0.681x
28, opt runtime 7.284s, model runtime 9.746s, pg runtime 7.529s, speedup 0.773x
29, opt runtime 5.132s, model runtime 5.567s, pg runtime 5.132s, speedup 0.922x
30, opt runtime 5.219s, model runtime 5.502s, pg runtime 5.219s, speedup 0.948x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 67.589s, pg runtime 68.524s, speedup 1.014x
34, opt runtime 41.237s, model runtime 64.256s, pg runtime 78.181s, speedup 1.217x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.893s, pg runtime 0.893s, speedup 1.000x
40, opt runtime 1.004s, model runtime 1.004s, pg runtime 1.004s, speedup 1.000x
====================
JOB best validation speedup epoch: 14, train speedup 5.266, test speedup 2.555, val speedup 4.946
TPCH best validation speedup epoch: 14, train speedup 5.266, test speedup 4.711, val speedup 4.946
TPCH Skew best validation speedup epoch: 14, train speedup 5.266, test speedup 4.393, val speedup 4.946
execution cost 0:03:58.962484
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
construct training samples cost 0:00:01.181754, and there are 9408 training samples
in channel 9
JOB test speedup 0.9482992191637157
TPCH test speedup 2.5439851095259973
TPCH skew test speedup 2.530704080347007
Epoch 0/300 |loss: 0.037324| train set 2.540x speedup, test set 2.531x speedup, val set 2.311x speedup, step: 1
JOB test speedup 2.2359935842095475
TPCH test speedup 2.7387836432096875
TPCH skew test speedup 2.6194938061246753
Epoch 1/300 |loss: 0.017553| train set 2.599x speedup, test set 2.619x speedup, val set 2.572x speedup, step: 2
JOB test speedup 0.9755008555769169
TPCH test speedup 3.153071219450535
TPCH skew test speedup 2.876984237745062
Epoch 2/300 |loss: 0.011410| train set 2.985x speedup, test set 2.877x speedup, val set 3.023x speedup, step: 3
JOB test speedup 2.1090490376958337
TPCH test speedup 2.9091215201023397
TPCH skew test speedup 2.712491351631176
Epoch 3/300 |loss: 0.008286| train set 2.790x speedup, test set 2.712x speedup, val set 2.659x speedup, step: 4
JOB test speedup 0.9818793574564746
TPCH test speedup 4.60482004949991
TPCH skew test speedup 4.235432908867811
Epoch 4/300 |loss: 0.006874| train set 3.627x speedup, test set 4.235x speedup, val set 4.473x speedup, step: 1
JOB test speedup 1.062611961180667
TPCH test speedup 3.7648302556251414
TPCH skew test speedup 3.897434549043163
Epoch 5/300 |loss: 0.007525| train set 3.642x speedup, test set 3.897x speedup, val set 3.578x speedup, step: 2
JOB test speedup 1.0773243788196396
TPCH test speedup 4.6455774717153435
TPCH skew test speedup 4.800286633125654
Epoch 6/300 |loss: 0.005443| train set 4.292x speedup, test set 4.800x speedup, val set 4.544x speedup, step: 3
JOB test speedup 0.9877240151561268
TPCH test speedup 4.317678765554486
TPCH skew test speedup 3.9986238032208865
Epoch 7/300 |loss: 0.004789| train set 3.718x speedup, test set 3.999x speedup, val set 4.007x speedup, step: 4
JOB test speedup 2.5876270574014706
TPCH test speedup 4.661356730397752
TPCH skew test speedup 4.791349012810923
Epoch 8/300 |loss: 0.005398| train set 4.470x speedup, test set 4.791x speedup, val set 4.454x speedup, step: 5
JOB test speedup 1.077953969165677
TPCH test speedup 4.506375297150072
TPCH skew test speedup 4.155017729264421
Epoch 9/300 |loss: 0.004286| train set 4.436x speedup, test set 4.155x speedup, val set 4.257x speedup, step: 6
JOB test speedup 2.5319290524755242
TPCH test speedup 4.43629186566214
TPCH skew test speedup 4.130115972828268
Epoch 10/300 |loss: 0.004134| train set 4.127x speedup, test set 4.130x speedup, val set 4.129x speedup, step: 7
JOB test speedup 2.758701844178043
TPCH test speedup 4.9636469302616
TPCH skew test speedup 4.681560956467903
Epoch 11/300 |loss: 0.003925| train set 5.095x speedup, test set 4.682x speedup, val set 4.874x speedup, step: 8
JOB test speedup 2.9157498160864193
TPCH test speedup 5.3240436499196555
TPCH skew test speedup 4.985305858545254
Epoch 12/300 |loss: 0.003319| train set 5.027x speedup, test set 4.985x speedup, val set 4.940x speedup, step: 9
JOB test speedup 1.0923626799132198
TPCH test speedup 4.628385801078962
TPCH skew test speedup 4.6333593201848275
Epoch 13/300 |loss: 0.003488| train set 4.720x speedup, test set 4.633x speedup, val set 4.515x speedup, step: 10
JOB test speedup 2.504987027996978
TPCH test speedup 4.732215973637486
TPCH skew test speedup 4.657894140451379
Epoch 14/300 |loss: 0.003554| train set 5.265x speedup, test set 4.658x speedup, val set 4.885x speedup, step: 1
JOB test speedup 2.806980264182899
TPCH test speedup 5.033285744137601
TPCH skew test speedup 4.790726254092847
Epoch 15/300 |loss: 0.003506| train set 5.270x speedup, test set 4.791x speedup, val set 4.881x speedup, step: 2
JOB test speedup 2.852158823554003
TPCH test speedup 5.212997922376246
TPCH skew test speedup 4.8173995199864255
Epoch 16/300 |loss: 0.002874| train set 5.104x speedup, test set 4.817x speedup, val set 4.749x speedup, step: 3
JOB test speedup 2.8706954425153994
TPCH test speedup 5.209859060266765
TPCH skew test speedup 4.946860241108
Epoch 17/300 |loss: 0.003380| train set 4.909x speedup, test set 4.947x speedup, val set 4.855x speedup, step: 4
JOB test speedup 2.597475188551186
TPCH test speedup 5.08158702098646
TPCH skew test speedup 4.7761068912694356
Epoch 18/300 |loss: 0.002798| train set 5.111x speedup, test set 4.776x speedup, val set 4.894x speedup, step: 5
JOB test speedup 2.876144826440651
TPCH test speedup 5.147253174832334
TPCH skew test speedup 4.831063255829146
Epoch 19/300 |loss: 0.002632| train set 5.171x speedup, test set 4.831x speedup, val set 4.761x speedup, step: 6
JOB test speedup 2.8703000521438726
TPCH test speedup 3.356730386775059
TPCH skew test speedup 3.2665300950473206
Epoch 20/300 |loss: 0.002423| train set 4.314x speedup, test set 3.267x speedup, val set 3.879x speedup, step: 7
JOB test speedup 2.9085949130435074
TPCH test speedup 5.243948556288705
TPCH skew test speedup 4.91340952109928
Epoch 21/300 |loss: 0.002673| train set 5.240x speedup, test set 4.913x speedup, val set 4.690x speedup, step: 8
JOB test speedup 2.6321747658570396
TPCH test speedup 4.024909346101545
TPCH skew test speedup 3.9357875614896063
Epoch 22/300 |loss: 0.002569| train set 5.053x speedup, test set 3.936x speedup, val set 3.766x speedup, step: 9
JOB test speedup 2.469267909386873
TPCH test speedup 3.9556859114082887
TPCH skew test speedup 4.261394670322708
Epoch 23/300 |loss: 0.002141| train set 4.885x speedup, test set 4.261x speedup, val set 4.989x speedup, step: 10
JOB test speedup 2.9168217707637365
TPCH test speedup 5.06373508264577
TPCH skew test speedup 4.737400682605983
Epoch 24/300 |loss: 0.001939| train set 5.293x speedup, test set 4.737x speedup, val set 4.801x speedup, step: 11
JOB test speedup 2.886127140932462
TPCH test speedup 5.027732488915066
TPCH skew test speedup 4.807604309228794
Epoch 25/300 |loss: 0.002255| train set 5.259x speedup, test set 4.808x speedup, val set 4.928x speedup, step: 12
JOB test speedup 2.8883464324046924
TPCH test speedup 4.88097082856784
TPCH skew test speedup 4.876543298651089
Epoch 26/300 |loss: 0.001821| train set 5.214x speedup, test set 4.877x speedup, val set 4.560x speedup, step: 13
JOB test speedup 2.917752184900018
TPCH test speedup 5.1137457029349935
TPCH skew test speedup 4.756696423185994
Epoch 27/300 |loss: 0.001989| train set 5.230x speedup, test set 4.757x speedup, val set 4.812x speedup, step: 14
JOB test speedup 2.912404078939365
TPCH test speedup 5.012064469822494
TPCH skew test speedup 4.98491692995825
Epoch 28/300 |loss: 0.002009| train set 5.295x speedup, test set 4.985x speedup, val set 4.636x speedup, step: 15
JOB test speedup 2.8953735626429293
TPCH test speedup 5.031585926650955
TPCH skew test speedup 4.742455140890124
Epoch 29/300 |loss: 0.001919| train set 5.331x speedup, test set 4.742x speedup, val set 4.826x speedup, step: 16
JOB test speedup 2.8620257441997525
TPCH test speedup 5.031443870224283
TPCH skew test speedup 4.727634505610663
Epoch 30/300 |loss: 0.001795| train set 5.363x speedup, test set 4.728x speedup, val set 4.922x speedup, step: 17
JOB test speedup 2.9265566593063914
TPCH test speedup 4.962192706149827
TPCH skew test speedup 4.604458716462733
Epoch 31/300 |loss: 0.001620| train set 5.247x speedup, test set 4.604x speedup, val set 4.734x speedup, step: 18
JOB test speedup 2.965863631444082
TPCH test speedup 4.9158718563162065
TPCH skew test speedup 4.657481421487444
Epoch 32/300 |loss: 0.001594| train set 5.354x speedup, test set 4.657x speedup, val set 4.845x speedup, step: 19
JOB test speedup 2.9328841587518126
TPCH test speedup 5.031936676597953
TPCH skew test speedup 4.933125461186169
Epoch 33/300 |loss: 0.001722| train set 5.228x speedup, test set 4.933x speedup, val set 4.934x speedup, step: 20
JOB test speedup 2.935973254469155
TPCH test speedup 4.449898748978956
TPCH skew test speedup 4.288827436212278
Epoch 34/300 |loss: 0.001575| train set 5.304x speedup, test set 4.289x speedup, val set 4.640x speedup, step: 21
JOB test speedup 2.925371808609863
TPCH test speedup 4.969478396782535
TPCH skew test speedup 4.686408056920582
Epoch 35/300 |loss: 0.001499| train set 5.369x speedup, test set 4.686x speedup, val set 4.950x speedup, step: 22
JOB test speedup 2.9614864823062774
TPCH test speedup 5.124192913812201
TPCH skew test speedup 4.762062810847772
Epoch 36/300 |loss: 0.001534| train set 5.139x speedup, test set 4.762x speedup, val set 4.705x speedup, step: 23
JOB test speedup 2.9599215800815966
TPCH test speedup 5.023978897794083
TPCH skew test speedup 4.757909495826497
Epoch 37/300 |loss: 0.001467| train set 5.331x speedup, test set 4.758x speedup, val set 4.942x speedup, step: 24
JOB test speedup 2.9370527316831505
TPCH test speedup 4.97153359268997
TPCH skew test speedup 4.689856904374111
Epoch 38/300 |loss: 0.001204| train set 5.313x speedup, test set 4.690x speedup, val set 4.866x speedup, step: 25
JOB test speedup 2.9526828996474217
TPCH test speedup 3.767247573867778
TPCH skew test speedup 3.5566150497814344
Epoch 39/300 |loss: 0.001498| train set 4.331x speedup, test set 3.557x speedup, val set 3.530x speedup, step: 26
JOB test speedup 2.915857601412545
TPCH test speedup 3.5277638331970564
TPCH skew test speedup 3.426935965746102
Epoch 40/300 |loss: 0.001198| train set 5.371x speedup, test set 3.427x speedup, val set 3.438x speedup, step: 27
JOB test speedup 2.7992825140158004
TPCH test speedup 4.489775208012883
TPCH skew test speedup 4.194622072020448
Epoch 41/300 |loss: 0.001279| train set 5.373x speedup, test set 4.195x speedup, val set 4.769x speedup, step: 28
JOB test speedup 2.9307556384772346
TPCH test speedup 5.151102627017004
TPCH skew test speedup 4.870532124447209
Epoch 42/300 |loss: 0.001362| train set 5.359x speedup, test set 4.871x speedup, val set 4.920x speedup, step: 29
JOB test speedup 2.5362874967858744
TPCH test speedup 5.152581056073556
TPCH skew test speedup 4.871719419686913
Epoch 43/300 |loss: 0.001199| train set 5.368x speedup, test set 4.872x speedup, val set 4.844x speedup, step: 30
JOB test speedup 2.8344466726220374
TPCH test speedup 3.5820651285255987
TPCH skew test speedup 3.4143692311479987
Epoch 44/300 |loss: 0.001232| train set 5.295x speedup, test set 3.414x speedup, val set 3.731x speedup, step: 31
JOB test speedup 0.8198393205319529
TPCH test speedup 4.949304014078196
TPCH skew test speedup 4.890315413024066
Epoch 45/300 |loss: 0.001036| train set 5.237x speedup, test set 4.890x speedup, val set 4.869x speedup, step: 32
JOB test speedup 2.851016329468016
TPCH test speedup 4.97153359268997
TPCH skew test speedup 4.689856904374111
Epoch 46/300 |loss: 0.001031| train set 5.300x speedup, test set 4.690x speedup, val set 4.922x speedup, step: 33
JOB test speedup 2.9325787063986457
TPCH test speedup 4.362488393964921
TPCH skew test speedup 4.160281740738437
Epoch 47/300 |loss: 0.001087| train set 5.346x speedup, test set 4.160x speedup, val set 4.848x speedup, step: 34
JOB test speedup 0.8056603222869699
TPCH test speedup 5.255904933627815
TPCH skew test speedup 4.87531447744396
Epoch 48/300 |loss: 0.000987| train set 5.286x speedup, test set 4.875x speedup, val set 4.842x speedup, step: 35
JOB test speedup 0.8097955645211519
TPCH test speedup 4.870129100305856
TPCH skew test speedup 4.603899281394096
Epoch 49/300 |loss: 0.000996| train set 5.353x speedup, test set 4.604x speedup, val set 4.654x speedup, step: 36
JOB test speedup 2.9400665278000497
TPCH test speedup 5.1294298474532605
TPCH skew test speedup 5.091153997614511
Epoch 50/300 |loss: 0.000999| train set 5.293x speedup, test set 5.091x speedup, val set 4.844x speedup, step: 37
JOB test speedup 3.084723126685985
TPCH test speedup 4.919103583933491
TPCH skew test speedup 4.910774990893706
Epoch 51/300 |loss: 0.001078| train set 5.257x speedup, test set 4.911x speedup, val set 4.567x speedup, step: 38
JOB test speedup 2.600459718745201
TPCH test speedup 4.956923439000505
TPCH skew test speedup 4.924493876129787
Epoch 52/300 |loss: 0.000988| train set 5.312x speedup, test set 4.924x speedup, val set 4.930x speedup, step: 39
JOB test speedup 2.5432135689943953
TPCH test speedup 5.045114035836825
TPCH skew test speedup 4.893504689770137
Epoch 53/300 |loss: 0.001075| train set 5.319x speedup, test set 4.894x speedup, val set 4.698x speedup, step: 40
JOB test speedup 0.808985688689553
TPCH test speedup 4.834660691689976
TPCH skew test speedup 4.774999148726262
Epoch 54/300 |loss: 0.000973| train set 5.280x speedup, test set 4.775x speedup, val set 4.872x speedup, step: 41
JOB test speedup 2.9390736178750485
TPCH test speedup 5.255904933627815
TPCH skew test speedup 4.87531447744396
Epoch 55/300 |loss: 0.000923| train set 5.372x speedup, test set 4.875x speedup, val set 4.848x speedup, step: 42
JOB test speedup 2.5348141410370504
TPCH test speedup 5.012499717946107
TPCH skew test speedup 4.91184796186863
Epoch 56/300 |loss: 0.000927| train set 5.268x speedup, test set 4.912x speedup, val set 4.816x speedup, step: 43
JOB test speedup 3.157062301706806
TPCH test speedup 4.919103583933491
TPCH skew test speedup 4.910774990893706
Epoch 57/300 |loss: 0.000971| train set 5.261x speedup, test set 4.911x speedup, val set 4.742x speedup, step: 44
JOB test speedup 2.785298380400039
TPCH test speedup 5.220517909440676
TPCH skew test speedup 4.89352137751287
Epoch 58/300 |loss: 0.000978| train set 5.361x speedup, test set 4.894x speedup, val set 4.847x speedup, step: 45
JOB test speedup 3.0647963319405074
TPCH test speedup 5.020792630320961
TPCH skew test speedup 4.945808241744585
Epoch 59/300 |loss: 0.001018| train set 5.330x speedup, test set 4.946x speedup, val set 4.763x speedup, step: 46
JOB test speedup 2.571391391473693
TPCH test speedup 4.6125009228018925
TPCH skew test speedup 4.208018955215616
Epoch 60/300 |loss: 0.000920| train set 5.261x speedup, test set 4.208x speedup, val set 4.723x speedup, step: 47
JOB test speedup 2.7654369335822504
TPCH test speedup 5.057534436972374
TPCH skew test speedup 5.040567671664362
Epoch 61/300 |loss: 0.000884| train set 5.308x speedup, test set 5.041x speedup, val set 4.906x speedup, step: 48
JOB test speedup 3.155129926121812
TPCH test speedup 4.44650098142617
TPCH skew test speedup 4.14053913732251
Epoch 62/300 |loss: 0.000958| train set 5.266x speedup, test set 4.141x speedup, val set 4.228x speedup, step: 49
JOB test speedup 2.845511510189011
TPCH test speedup 5.118886285966927
TPCH skew test speedup 4.884565571659589
Epoch 63/300 |loss: 0.000893| train set 5.278x speedup, test set 4.885x speedup, val set 4.919x speedup, step: 50
JOB test speedup 2.909467474331042
TPCH test speedup 4.512407704427614
TPCH skew test speedup 4.385389961412181
Epoch 64/300 |loss: 0.000837| train set 5.386x speedup, test set 4.385x speedup, val set 4.927x speedup, step: 1
JOB test speedup 3.08765170830839
TPCH test speedup 4.949304014078196
TPCH skew test speedup 4.890315413024066
Epoch 65/300 |loss: 0.000887| train set 5.313x speedup, test set 4.890x speedup, val set 4.744x speedup, step: 2
JOB test speedup 3.119610543678032
TPCH test speedup 4.952877934829173
TPCH skew test speedup 4.649398088336431
Epoch 66/300 |loss: 0.000818| train set 5.375x speedup, test set 4.649x speedup, val set 4.988x speedup, step: 3
JOB test speedup 3.0840707256707947
TPCH test speedup 4.9505100350562765
TPCH skew test speedup 4.892439716971961
Epoch 67/300 |loss: 0.000842| train set 5.371x speedup, test set 4.892x speedup, val set 4.908x speedup, step: 4
JOB test speedup 3.0225896013209415
TPCH test speedup 5.012088561378698
TPCH skew test speedup 4.969785207325454
Epoch 68/300 |loss: 0.000780| train set 5.375x speedup, test set 4.970x speedup, val set 4.833x speedup, step: 5
JOB test speedup 3.1571102625405234
TPCH test speedup 5.077709864981884
TPCH skew test speedup 4.831429752562189
Epoch 69/300 |loss: 0.000813| train set 5.356x speedup, test set 4.831x speedup, val set 5.031x speedup, step: 1
JOB test speedup 2.9739417658937515
TPCH test speedup 5.175823467008354
TPCH skew test speedup 4.9682432453469145
Epoch 70/300 |loss: 0.000841| train set 5.319x speedup, test set 4.968x speedup, val set 5.020x speedup, step: 2
JOB test speedup 3.0004745018782795
TPCH test speedup 5.13123505505954
TPCH skew test speedup 5.0849044643018955
Epoch 71/300 |loss: 0.000830| train set 5.338x speedup, test set 5.085x speedup, val set 4.805x speedup, step: 3
JOB test speedup 2.5382680071816166
TPCH test speedup 5.068214606244882
TPCH skew test speedup 4.69278999875862
Epoch 72/300 |loss: 0.000740| train set 5.332x speedup, test set 4.693x speedup, val set 4.766x speedup, step: 4
JOB test speedup 2.890030753756662
TPCH test speedup 5.027957890551841
TPCH skew test speedup 4.73167967252128
Epoch 73/300 |loss: 0.000770| train set 5.298x speedup, test set 4.732x speedup, val set 4.862x speedup, step: 5
JOB test speedup 2.964664052491505
TPCH test speedup 4.939860678051124
TPCH skew test speedup 4.706702572127447
Epoch 74/300 |loss: 0.000665| train set 5.373x speedup, test set 4.707x speedup, val set 4.689x speedup, step: 6
JOB test speedup 3.0572173378478746
TPCH test speedup 4.34398341218813
TPCH skew test speedup 4.2087781319482
Epoch 75/300 |loss: 0.000699| train set 5.235x speedup, test set 4.209x speedup, val set 4.897x speedup, step: 7
JOB test speedup 2.9643730985157744
TPCH test speedup 5.0930423203722075
TPCH skew test speedup 4.776361157304029
Epoch 76/300 |loss: 0.000735| train set 5.285x speedup, test set 4.776x speedup, val set 4.765x speedup, step: 8
JOB test speedup 2.9401689264007906
TPCH test speedup 5.026079429278059
TPCH skew test speedup 4.761464425497209
Epoch 77/300 |loss: 0.000715| train set 5.375x speedup, test set 4.761x speedup, val set 4.828x speedup, step: 9
JOB test speedup 2.9445608013104327
TPCH test speedup 4.919843204035883
TPCH skew test speedup 4.597665637166543
Epoch 78/300 |loss: 0.000675| train set 5.367x speedup, test set 4.598x speedup, val set 4.756x speedup, step: 10
JOB test speedup 0.7983119421756854
TPCH test speedup 5.027657953158833
TPCH skew test speedup 4.943413965336162
Epoch 79/300 |loss: 0.000739| train set 5.370x speedup, test set 4.943x speedup, val set 4.762x speedup, step: 11
JOB test speedup 2.8543766285193386
TPCH test speedup 4.899253643716146
TPCH skew test speedup 4.792196971665167
Epoch 80/300 |loss: 0.000794| train set 5.309x speedup, test set 4.792x speedup, val set 4.682x speedup, step: 12
JOB test speedup 2.780535570195009
TPCH test speedup 4.96723481752719
TPCH skew test speedup 4.98510217170599
Epoch 81/300 |loss: 0.000822| train set 5.376x speedup, test set 4.985x speedup, val set 4.702x speedup, step: 13
early stopping at epoch 81
Training per epoch cost 2.335 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.198s, pg runtime 0.153s, speedup 0.772x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.474s, pg runtime 0.453s, speedup 0.956x
17, opt runtime 0.327s, model runtime 0.354s, pg runtime 0.354s, speedup 1.000x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.231s, pg runtime 0.891s, speedup 3.855x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.654s, pg runtime 0.189s, speedup 0.289x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.154s, pg runtime 0.154s, speedup 1.000x
29, opt runtime 0.136s, model runtime 0.147s, pg runtime 0.137s, speedup 0.933x
30, opt runtime 0.023s, model runtime 0.023s, pg runtime 0.023s, speedup 1.000x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
33, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.382s, pg runtime 1.356s, speedup 0.981x
20, opt runtime 1.340s, model runtime 1.478s, pg runtime 1.340s, speedup 0.907x
21, opt runtime 6.281s, model runtime 22.977s, pg runtime 6.281s, speedup 0.273x
22, opt runtime 25.034s, model runtime 31.752s, pg runtime 25.034s, speedup 0.788x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.780s, pg runtime 5.414s, speedup 0.937x
30, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 17.327s, pg runtime 501.793s, speedup 28.960x
36, opt runtime 16.438s, model runtime 19.535s, pg runtime 546.887s, speedup 27.995x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.100s, pg runtime 1.100s, speedup 1.000x
40, opt runtime 1.084s, model runtime 1.155s, pg runtime 1.155s, speedup 1.000x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.317s, pg runtime 1.244s, speedup 0.945x
20, opt runtime 1.367s, model runtime 1.591s, pg runtime 1.367s, speedup 0.860x
21, opt runtime 9.313s, model runtime 29.211s, pg runtime 9.313s, speedup 0.319x
22, opt runtime 26.254s, model runtime 32.932s, pg runtime 26.254s, speedup 0.797x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.567s, pg runtime 5.132s, speedup 0.922x
30, opt runtime 5.219s, model runtime 5.502s, pg runtime 5.219s, speedup 0.948x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 14.422s, pg runtime 497.542s, speedup 34.499x
36, opt runtime 15.980s, model runtime 15.980s, pg runtime 504.239s, speedup 31.555x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.893s, pg runtime 0.893s, speedup 1.000x
40, opt runtime 1.004s, model runtime 1.004s, pg runtime 1.004s, speedup 1.000x
====================
JOB best validation speedup epoch: 69, train speedup 5.356, test speedup 3.157, val speedup 5.031
TPCH best validation speedup epoch: 69, train speedup 5.356, test speedup 5.078, val speedup 5.031
TPCH Skew best validation speedup epoch: 69, train speedup 5.356, test speedup 4.831, val speedup 5.031
execution cost 0:04:34.097059
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
construct training samples cost 0:00:01.207703, and there are 9408 training samples
in channel 9
JOB test speedup 0.9482992191637157
TPCH test speedup 2.5439851095259973
TPCH skew test speedup 2.530704080347007
Epoch 0/300 |loss: 0.037324| train set 2.540x speedup, test set 2.531x speedup, val set 2.311x speedup, step: 1
JOB test speedup 2.2359935842095475
TPCH test speedup 2.7387836432096875
TPCH skew test speedup 2.6194938061246753
Epoch 1/300 |loss: 0.017553| train set 2.599x speedup, test set 2.619x speedup, val set 2.572x speedup, step: 2
JOB test speedup 1.0144873321757293
TPCH test speedup 3.0634425297173395
TPCH skew test speedup 2.882106618673675
Epoch 2/300 |loss: 0.011404| train set 2.956x speedup, test set 2.882x speedup, val set 2.969x speedup, step: 3
JOB test speedup 0.9909548599750216
TPCH test speedup 3.062977800942175
TPCH skew test speedup 2.7938628660064087
Epoch 3/300 |loss: 0.008256| train set 2.936x speedup, test set 2.794x speedup, val set 2.954x speedup, step: 4
JOB test speedup 0.5431119769408381
TPCH test speedup 4.623759080116466
TPCH skew test speedup 4.172889454548168
Epoch 4/300 |loss: 0.006948| train set 4.188x speedup, test set 4.173x speedup, val set 4.567x speedup, step: 1
JOB test speedup 0.5653598868595101
TPCH test speedup 4.538851940067955
TPCH skew test speedup 4.6995977298409235
Epoch 5/300 |loss: 0.007762| train set 3.808x speedup, test set 4.700x speedup, val set 4.374x speedup, step: 2
JOB test speedup 1.1047722151916624
TPCH test speedup 4.622825162971089
TPCH skew test speedup 4.71506417809911
Epoch 6/300 |loss: 0.005338| train set 4.117x speedup, test set 4.715x speedup, val set 4.483x speedup, step: 3
JOB test speedup 1.0217719872398416
TPCH test speedup 4.26594023879598
TPCH skew test speedup 4.050955334971672
Epoch 7/300 |loss: 0.004668| train set 4.257x speedup, test set 4.051x speedup, val set 4.118x speedup, step: 4
JOB test speedup 1.0867290022769458
TPCH test speedup 4.521473546285807
TPCH skew test speedup 4.764696543633799
Epoch 8/300 |loss: 0.005151| train set 4.532x speedup, test set 4.765x speedup, val set 4.363x speedup, step: 5
JOB test speedup 0.5777276512874185
TPCH test speedup 4.56920509670581
TPCH skew test speedup 4.171444573328312
Epoch 9/300 |loss: 0.004307| train set 4.539x speedup, test set 4.171x speedup, val set 4.216x speedup, step: 6
JOB test speedup 2.8652276151697804
TPCH test speedup 4.52404078981939
TPCH skew test speedup 4.200425853785268
Epoch 10/300 |loss: 0.004161| train set 4.452x speedup, test set 4.200x speedup, val set 4.188x speedup, step: 7
JOB test speedup 2.936063564674868
TPCH test speedup 4.979745337279425
TPCH skew test speedup 4.718708681427359
Epoch 11/300 |loss: 0.003936| train set 4.866x speedup, test set 4.719x speedup, val set 4.917x speedup, step: 8
JOB test speedup 2.9948306472454864
TPCH test speedup 5.044708937837761
TPCH skew test speedup 4.713509553675471
Epoch 12/300 |loss: 0.003276| train set 4.989x speedup, test set 4.714x speedup, val set 4.697x speedup, step: 9
JOB test speedup 1.0749885587908474
TPCH test speedup 4.619837480394153
TPCH skew test speedup 3.556848056845367
Epoch 13/300 |loss: 0.003451| train set 4.393x speedup, test set 3.557x speedup, val set 4.248x speedup, step: 10
JOB test speedup 2.5504180376974324
TPCH test speedup 5.040406867598362
TPCH skew test speedup 4.796243046424052
Epoch 14/300 |loss: 0.003468| train set 5.237x speedup, test set 4.796x speedup, val set 4.949x speedup, step: 1
JOB test speedup 3.0468354950813903
TPCH test speedup 5.147011491906658
TPCH skew test speedup 4.758466920884898
Epoch 15/300 |loss: 0.003256| train set 5.248x speedup, test set 4.758x speedup, val set 4.889x speedup, step: 2
JOB test speedup 1.1189953298264677
TPCH test speedup 5.218004818022519
TPCH skew test speedup 4.8199264603453225
Epoch 16/300 |loss: 0.002800| train set 5.113x speedup, test set 4.820x speedup, val set 4.739x speedup, step: 3
JOB test speedup 2.907874636189443
TPCH test speedup 4.669294746645725
TPCH skew test speedup 4.59556407492347
Epoch 17/300 |loss: 0.003431| train set 4.754x speedup, test set 4.596x speedup, val set 4.564x speedup, step: 4
JOB test speedup 2.781792974105695
TPCH test speedup 3.925689481196815
TPCH skew test speedup 4.203797322426944
Epoch 18/300 |loss: 0.002827| train set 4.979x speedup, test set 4.204x speedup, val set 4.790x speedup, step: 5
JOB test speedup 2.5177461675911084
TPCH test speedup 5.307674304141177
TPCH skew test speedup 4.96892751120756
Epoch 19/300 |loss: 0.002655| train set 5.273x speedup, test set 4.969x speedup, val set 4.832x speedup, step: 6
JOB test speedup 2.884884669394134
TPCH test speedup 3.6186012508898098
TPCH skew test speedup 3.455491980568227
Epoch 20/300 |loss: 0.002471| train set 4.339x speedup, test set 3.455x speedup, val set 3.853x speedup, step: 7
JOB test speedup 2.5403318754038513
TPCH test speedup 4.829729262072421
TPCH skew test speedup 4.6471902795248825
Epoch 21/300 |loss: 0.002591| train set 4.852x speedup, test set 4.647x speedup, val set 4.649x speedup, step: 8
JOB test speedup 2.8823799861923076
TPCH test speedup 4.9688685916038065
TPCH skew test speedup 4.631622460726289
Epoch 22/300 |loss: 0.002609| train set 5.360x speedup, test set 4.632x speedup, val set 4.873x speedup, step: 9
JOB test speedup 2.70838130590095
TPCH test speedup 5.20881195228329
TPCH skew test speedup 4.94674225078301
Epoch 23/300 |loss: 0.002091| train set 5.232x speedup, test set 4.947x speedup, val set 4.930x speedup, step: 10
JOB test speedup 2.589485991990985
TPCH test speedup 5.043041471894937
TPCH skew test speedup 4.7544742717271165
Epoch 24/300 |loss: 0.001941| train set 5.369x speedup, test set 4.754x speedup, val set 4.824x speedup, step: 11
JOB test speedup 2.5092276465229792
TPCH test speedup 4.887327740573557
TPCH skew test speedup 4.638113244108986
Epoch 25/300 |loss: 0.002207| train set 5.308x speedup, test set 4.638x speedup, val set 4.876x speedup, step: 12
JOB test speedup 2.844413729303166
TPCH test speedup 4.2911193751623
TPCH skew test speedup 4.187412316185778
Epoch 26/300 |loss: 0.001801| train set 5.211x speedup, test set 4.187x speedup, val set 4.607x speedup, step: 13
JOB test speedup 2.9947368962029146
TPCH test speedup 5.117123149937406
TPCH skew test speedup 4.762649601218913
Epoch 27/300 |loss: 0.002015| train set 5.237x speedup, test set 4.763x speedup, val set 4.826x speedup, step: 14
JOB test speedup 3.0053336936763793
TPCH test speedup 4.856803119127603
TPCH skew test speedup 4.6130575551648505
Epoch 28/300 |loss: 0.002105| train set 5.297x speedup, test set 4.613x speedup, val set 4.752x speedup, step: 15
JOB test speedup 2.9981416812282813
TPCH test speedup 5.113192465103337
TPCH skew test speedup 5.101053389528263
Epoch 29/300 |loss: 0.001913| train set 5.256x speedup, test set 5.101x speedup, val set 4.951x speedup, step: 1
JOB test speedup 2.9021672379046977
TPCH test speedup 5.11777229852462
TPCH skew test speedup 4.818265862241884
Epoch 30/300 |loss: 0.001820| train set 5.366x speedup, test set 4.818x speedup, val set 5.034x speedup, step: 2
JOB test speedup 2.85865095983103
TPCH test speedup 4.929370417755068
TPCH skew test speedup 4.650826622279814
Epoch 31/300 |loss: 0.001697| train set 5.266x speedup, test set 4.651x speedup, val set 4.786x speedup, step: 3
JOB test speedup 2.9985469562533433
TPCH test speedup 5.072756034112397
TPCH skew test speedup 4.801009465706697
Epoch 32/300 |loss: 0.001647| train set 5.353x speedup, test set 4.801x speedup, val set 4.842x speedup, step: 4
JOB test speedup 3.100520313971259
TPCH test speedup 4.763234565966405
TPCH skew test speedup 4.77487095483244
Epoch 33/300 |loss: 0.001834| train set 5.232x speedup, test set 4.775x speedup, val set 4.748x speedup, step: 5
JOB test speedup 3.1404185946828775
TPCH test speedup 3.469317575659158
TPCH skew test speedup 3.4259037437888673
Epoch 34/300 |loss: 0.001603| train set 5.050x speedup, test set 3.426x speedup, val set 3.829x speedup, step: 6
JOB test speedup 2.7113682055384194
TPCH test speedup 5.194239604162327
TPCH skew test speedup 4.976333436455961
Epoch 35/300 |loss: 0.001590| train set 5.369x speedup, test set 4.976x speedup, val set 4.878x speedup, step: 7
JOB test speedup 3.118568293908414
TPCH test speedup 5.12758417950875
TPCH skew test speedup 4.766892139275567
Epoch 36/300 |loss: 0.001585| train set 5.263x speedup, test set 4.767x speedup, val set 4.688x speedup, step: 8
JOB test speedup 3.1336324819088928
TPCH test speedup 5.07082536266178
TPCH skew test speedup 4.6951225010217135
Epoch 37/300 |loss: 0.001599| train set 5.376x speedup, test set 4.695x speedup, val set 4.703x speedup, step: 9
JOB test speedup 3.0766241155937455
TPCH test speedup 4.97404566913212
TPCH skew test speedup 4.692186491096823
Epoch 38/300 |loss: 0.001234| train set 5.308x speedup, test set 4.692x speedup, val set 4.920x speedup, step: 10
JOB test speedup 2.9947951390492773
TPCH test speedup 3.854666553462535
TPCH skew test speedup 3.5993719724790623
Epoch 39/300 |loss: 0.001571| train set 4.909x speedup, test set 3.599x speedup, val set 3.858x speedup, step: 11
JOB test speedup 3.012370807792009
TPCH test speedup 3.725584756758275
TPCH skew test speedup 3.51026694539767
Epoch 40/300 |loss: 0.001304| train set 5.160x speedup, test set 3.510x speedup, val set 3.712x speedup, step: 12
JOB test speedup 2.8967738758502235
TPCH test speedup 4.507298822837414
TPCH skew test speedup 4.127435609585981
Epoch 41/300 |loss: 0.001358| train set 5.334x speedup, test set 4.127x speedup, val set 4.876x speedup, step: 13
JOB test speedup 2.988109304110561
TPCH test speedup 5.064912088918434
TPCH skew test speedup 4.69037094745442
Epoch 42/300 |loss: 0.001270| train set 5.363x speedup, test set 4.690x speedup, val set 4.800x speedup, step: 14
JOB test speedup 3.008388933039957
TPCH test speedup 5.066078715810113
TPCH skew test speedup 4.689336837640761
Epoch 43/300 |loss: 0.001247| train set 5.371x speedup, test set 4.689x speedup, val set 4.844x speedup, step: 15
JOB test speedup 2.9356522789182886
TPCH test speedup 3.574093543432445
TPCH skew test speedup 3.4693878904632145
Epoch 44/300 |loss: 0.001419| train set 5.006x speedup, test set 3.469x speedup, val set 3.886x speedup, step: 16
JOB test speedup 2.994786507737493
TPCH test speedup 4.94735908459651
TPCH skew test speedup 4.88981051299209
Epoch 45/300 |loss: 0.001080| train set 5.368x speedup, test set 4.890x speedup, val set 4.576x speedup, step: 17
JOB test speedup 2.993145451341607
TPCH test speedup 4.379388504891915
TPCH skew test speedup 3.7726237387974013
Epoch 46/300 |loss: 0.001075| train set 5.295x speedup, test set 3.773x speedup, val set 4.656x speedup, step: 18
JOB test speedup 3.0640663351836044
TPCH test speedup 4.50543050534301
TPCH skew test speedup 4.399103998349271
Epoch 47/300 |loss: 0.001087| train set 5.357x speedup, test set 4.399x speedup, val set 4.624x speedup, step: 19
JOB test speedup 3.0216493329353082
TPCH test speedup 5.313273097907992
TPCH skew test speedup 4.950049678421906
Epoch 48/300 |loss: 0.000978| train set 5.374x speedup, test set 4.950x speedup, val set 4.766x speedup, step: 20
JOB test speedup 3.0271537741520866
TPCH test speedup 5.105223066932863
TPCH skew test speedup 4.976333436455961
Epoch 49/300 |loss: 0.001035| train set 5.348x speedup, test set 4.976x speedup, val set 4.637x speedup, step: 21
JOB test speedup 3.056014688118737
TPCH test speedup 3.6139504155567757
TPCH skew test speedup 3.5209695929063907
Epoch 50/300 |loss: 0.000990| train set 5.318x speedup, test set 3.521x speedup, val set 3.776x speedup, step: 22
JOB test speedup 2.982120779046148
TPCH test speedup 5.043093091894144
TPCH skew test speedup 4.892999131004465
Epoch 51/300 |loss: 0.001030| train set 5.324x speedup, test set 4.893x speedup, val set 4.873x speedup, step: 23
JOB test speedup 3.045838080106886
TPCH test speedup 3.9251515556748733
TPCH skew test speedup 4.5307237806582386
Epoch 52/300 |loss: 0.000957| train set 5.304x speedup, test set 4.531x speedup, val set 4.687x speedup, step: 24
JOB test speedup 2.8269316899193027
TPCH test speedup 5.289266893098905
TPCH skew test speedup 5.176276746233153
Epoch 53/300 |loss: 0.001060| train set 5.298x speedup, test set 5.176x speedup, val set 4.552x speedup, step: 25
JOB test speedup 3.00651990362905
TPCH test speedup 5.082697192028399
TPCH skew test speedup 4.909473971368644
Epoch 54/300 |loss: 0.000986| train set 5.331x speedup, test set 4.909x speedup, val set 4.744x speedup, step: 26
JOB test speedup 3.0061615642140374
TPCH test speedup 5.149490650204773
TPCH skew test speedup 4.869447246292525
Epoch 55/300 |loss: 0.000989| train set 5.381x speedup, test set 4.869x speedup, val set 4.743x speedup, step: 27
JOB test speedup 2.9832131562896818
TPCH test speedup 5.043093091894144
TPCH skew test speedup 4.892999131004465
Epoch 56/300 |loss: 0.000949| train set 5.199x speedup, test set 4.893x speedup, val set 4.543x speedup, step: 28
JOB test speedup 3.0371147910906138
TPCH test speedup 5.010504813308883
TPCH skew test speedup 4.911338606028684
Epoch 57/300 |loss: 0.000984| train set 5.354x speedup, test set 4.911x speedup, val set 4.579x speedup, step: 29
JOB test speedup 3.0173823747783777
TPCH test speedup 5.129441541801207
TPCH skew test speedup 4.359426779509809
Epoch 58/300 |loss: 0.000979| train set 5.355x speedup, test set 4.359x speedup, val set 4.776x speedup, step: 30
JOB test speedup 3.0050384708877793
TPCH test speedup 5.001372861636045
TPCH skew test speedup 4.967704929011177
Epoch 59/300 |loss: 0.001144| train set 5.319x speedup, test set 4.968x speedup, val set 4.727x speedup, step: 31
JOB test speedup 2.857885503913318
TPCH test speedup 4.115199863881856
TPCH skew test speedup 4.033891330144783
Epoch 60/300 |loss: 0.000878| train set 5.334x speedup, test set 4.034x speedup, val set 4.633x speedup, step: 32
JOB test speedup 2.8752099012949035
TPCH test speedup 4.970857768597394
TPCH skew test speedup 4.871158015037819
Epoch 61/300 |loss: 0.000939| train set 5.303x speedup, test set 4.871x speedup, val set 4.602x speedup, step: 33
JOB test speedup 3.0376938310339043
TPCH test speedup 5.231065916077228
TPCH skew test speedup 5.090541127791683
Epoch 62/300 |loss: 0.000971| train set 5.272x speedup, test set 5.091x speedup, val set 4.648x speedup, step: 34
JOB test speedup 3.1085729454320243
TPCH test speedup 5.150068393128982
TPCH skew test speedup 4.8711574902861905
Epoch 63/300 |loss: 0.000879| train set 5.361x speedup, test set 4.871x speedup, val set 4.827x speedup, step: 35
JOB test speedup 3.0019308719590847
TPCH test speedup 5.009123526273377
TPCH skew test speedup 4.090459345085198
Epoch 64/300 |loss: 0.000850| train set 5.369x speedup, test set 4.090x speedup, val set 4.753x speedup, step: 36
JOB test speedup 3.0045060671018566
TPCH test speedup 5.067281416763932
TPCH skew test speedup 5.031474830000074
Epoch 65/300 |loss: 0.000903| train set 5.266x speedup, test set 5.031x speedup, val set 4.681x speedup, step: 37
JOB test speedup 3.0116373244651307
TPCH test speedup 5.12784992458352
TPCH skew test speedup 5.082064389824788
Epoch 66/300 |loss: 0.000854| train set 5.241x speedup, test set 5.082x speedup, val set 4.685x speedup, step: 38
JOB test speedup 2.822067824404228
TPCH test speedup 5.11912626917802
TPCH skew test speedup 5.08382463270383
Epoch 67/300 |loss: 0.000810| train set 5.378x speedup, test set 5.084x speedup, val set 4.615x speedup, step: 39
JOB test speedup 3.0506276807331827
TPCH test speedup 5.186643202556564
TPCH skew test speedup 5.050322945093716
Epoch 68/300 |loss: 0.000826| train set 5.324x speedup, test set 5.050x speedup, val set 4.619x speedup, step: 40
JOB test speedup 3.148228093025278
TPCH test speedup 5.084558018098538
TPCH skew test speedup 5.045191267444999
Epoch 69/300 |loss: 0.000890| train set 5.376x speedup, test set 5.045x speedup, val set 4.780x speedup, step: 41
JOB test speedup 2.908915207036405
TPCH test speedup 5.116708701274411
TPCH skew test speedup 4.886582194862158
Epoch 70/300 |loss: 0.000806| train set 5.307x speedup, test set 4.887x speedup, val set 4.819x speedup, step: 42
JOB test speedup 2.963739014924209
TPCH test speedup 4.945707500501177
TPCH skew test speedup 4.887495780185588
Epoch 71/300 |loss: 0.000912| train set 5.302x speedup, test set 4.887x speedup, val set 4.827x speedup, step: 43
JOB test speedup 2.9882649846932687
TPCH test speedup 5.045114035836825
TPCH skew test speedup 4.891873753011752
Epoch 72/300 |loss: 0.000772| train set 5.319x speedup, test set 4.892x speedup, val set 4.770x speedup, step: 44
JOB test speedup 2.8870020533097036
TPCH test speedup 5.260910180048244
TPCH skew test speedup 4.878334429984713
Epoch 73/300 |loss: 0.000881| train set 5.377x speedup, test set 4.878x speedup, val set 4.774x speedup, step: 45
JOB test speedup 2.9928872626540963
TPCH test speedup 5.083872027321014
TPCH skew test speedup 4.90834100314802
Epoch 74/300 |loss: 0.000721| train set 5.370x speedup, test set 4.908x speedup, val set 4.652x speedup, step: 46
JOB test speedup 3.1488442297347086
TPCH test speedup 5.229822074000242
TPCH skew test speedup 5.093526747042309
Epoch 75/300 |loss: 0.000719| train set 5.232x speedup, test set 5.094x speedup, val set 4.776x speedup, step: 47
JOB test speedup 2.8924035003897117
TPCH test speedup 5.230136683869634
TPCH skew test speedup 5.090541127791683
Epoch 76/300 |loss: 0.000838| train set 5.379x speedup, test set 5.091x speedup, val set 4.778x speedup, step: 48
JOB test speedup 2.9889753361648292
TPCH test speedup 5.254110988575505
TPCH skew test speedup 4.873848152587565
Epoch 77/300 |loss: 0.000741| train set 5.341x speedup, test set 4.874x speedup, val set 4.774x speedup, step: 49
JOB test speedup 2.9409711151528093
TPCH test speedup 5.187228059745163
TPCH skew test speedup 5.112016155298759
Epoch 78/300 |loss: 0.000696| train set 5.388x speedup, test set 5.112x speedup, val set 4.744x speedup, step: 50
JOB test speedup 2.915059855083631
TPCH test speedup 5.12813508726489
TPCH skew test speedup 5.0888536657333585
Epoch 79/300 |loss: 0.000823| train set 5.310x speedup, test set 5.089x speedup, val set 4.809x speedup, step: 51
JOB test speedup 2.885220170438192
TPCH test speedup 5.086612338327379
TPCH skew test speedup 5.065233285580839
Epoch 80/300 |loss: 0.000793| train set 5.365x speedup, test set 5.065x speedup, val set 4.812x speedup, step: 52
JOB test speedup 2.9050616256838606
TPCH test speedup 4.94847218080634
TPCH skew test speedup 4.8886866011019015
Epoch 81/300 |loss: 0.000884| train set 5.314x speedup, test set 4.889x speedup, val set 4.559x speedup, step: 53
early stopping at epoch 81
Training per epoch cost 2.323 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.187s, pg runtime 0.072s, speedup 0.385x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.198s, pg runtime 0.153s, speedup 0.772x
15, opt runtime 0.313s, model runtime 0.386s, pg runtime 0.313s, speedup 0.811x
16, opt runtime 0.441s, model runtime 0.474s, pg runtime 0.453s, speedup 0.957x
17, opt runtime 0.327s, model runtime 0.327s, pg runtime 0.354s, speedup 1.083x
18, opt runtime 2.599s, model runtime 3.004s, pg runtime 2.599s, speedup 0.865x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.891s, speedup 5.964x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 1.225s, pg runtime 0.137s, speedup 0.112x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
33, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 23.961s, pg runtime 32.278s, speedup 1.347x
06, opt runtime 19.263s, model runtime 30.418s, pg runtime 19.263s, speedup 0.633x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.453s, pg runtime 1.356s, speedup 0.934x
20, opt runtime 1.340s, model runtime 1.558s, pg runtime 1.340s, speedup 0.860x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 10.298s, pg runtime 31.210s, speedup 3.031x
24, opt runtime 6.234s, model runtime 10.220s, pg runtime 32.540s, speedup 3.184x
25, opt runtime 1.306s, model runtime 1.418s, pg runtime 1.306s, speedup 0.921x
26, opt runtime 1.342s, model runtime 2.555s, pg runtime 1.342s, speedup 0.525x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 41.909s, pg runtime 70.116s, speedup 1.673x
34, opt runtime 39.191s, model runtime 43.993s, pg runtime 75.984s, speedup 1.727x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.210s, pg runtime 1.100s, speedup 0.909x
40, opt runtime 1.084s, model runtime 1.158s, pg runtime 1.155s, speedup 0.998x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 10.669s, pg runtime 29.760s, speedup 2.790x
06, opt runtime 16.844s, model runtime 16.844s, pg runtime 27.164s, speedup 1.613x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.325s, pg runtime 1.244s, speedup 0.939x
20, opt runtime 1.367s, model runtime 1.425s, pg runtime 1.367s, speedup 0.959x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
24, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
25, opt runtime 1.420s, model runtime 1.837s, pg runtime 1.420s, speedup 0.773x
26, opt runtime 1.187s, model runtime 1.392s, pg runtime 1.187s, speedup 0.852x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 42.439s, pg runtime 68.524s, speedup 1.615x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.958s, pg runtime 0.893s, speedup 0.932x
40, opt runtime 1.004s, model runtime 1.166s, pg runtime 1.004s, speedup 0.861x
====================
JOB best validation speedup epoch: 29, train speedup 5.256, test speedup 2.998, val speedup 4.951
TPCH best validation speedup epoch: 29, train speedup 5.256, test speedup 5.113, val speedup 4.951
TPCH Skew best validation speedup epoch: 29, train speedup 5.256, test speedup 5.101, val speedup 4.951
execution cost 0:04:33.893174
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
construct training samples cost 0:00:01.153610, and there are 9408 training samples
in channel 9
JOB test speedup 0.9482992191637157
TPCH test speedup 2.5439851095259973
TPCH skew test speedup 2.530704080347007
Epoch 0/300 |loss: 0.037324| train set 2.540x speedup, test set 2.531x speedup, val set 2.311x speedup, step: 1
JOB test speedup 2.2359935842095475
TPCH test speedup 2.7387836432096875
TPCH skew test speedup 2.6194938061246753
Epoch 1/300 |loss: 0.017553| train set 2.599x speedup, test set 2.619x speedup, val set 2.572x speedup, step: 2
JOB test speedup 1.0144873321757293
TPCH test speedup 3.0634425297173395
TPCH skew test speedup 2.882106618673675
Epoch 2/300 |loss: 0.011404| train set 2.956x speedup, test set 2.882x speedup, val set 2.969x speedup, step: 3
JOB test speedup 0.9909548599750216
TPCH test speedup 3.062977800942175
TPCH skew test speedup 2.7938628660064087
Epoch 3/300 |loss: 0.008256| train set 2.936x speedup, test set 2.794x speedup, val set 2.954x speedup, step: 4
JOB test speedup 0.5431119769408381
TPCH test speedup 4.623759080116466
TPCH skew test speedup 4.172889454548168
Epoch 4/300 |loss: 0.006948| train set 4.188x speedup, test set 4.173x speedup, val set 4.567x speedup, step: 1
JOB test speedup 0.5649922942824852
TPCH test speedup 4.363352960567086
TPCH skew test speedup 4.508101996148387
Epoch 5/300 |loss: 0.007762| train set 3.544x speedup, test set 4.508x speedup, val set 4.248x speedup, step: 2
JOB test speedup 1.0620546915841766
TPCH test speedup 4.622162808793624
TPCH skew test speedup 4.823099463968703
Epoch 6/300 |loss: 0.005324| train set 4.124x speedup, test set 4.823x speedup, val set 4.475x speedup, step: 3
JOB test speedup 2.364254307045398
TPCH test speedup 4.270891229431045
TPCH skew test speedup 4.001775927019535
Epoch 7/300 |loss: 0.004694| train set 3.754x speedup, test set 4.002x speedup, val set 4.098x speedup, step: 4
JOB test speedup 0.5783795229153798
TPCH test speedup 4.468166689970504
TPCH skew test speedup 4.724275303716791
Epoch 8/300 |loss: 0.005103| train set 4.618x speedup, test set 4.724x speedup, val set 4.326x speedup, step: 5
JOB test speedup 0.5669665456623945
TPCH test speedup 4.39908097098961
TPCH skew test speedup 4.10316691954587
Epoch 9/300 |loss: 0.004329| train set 4.488x speedup, test set 4.103x speedup, val set 4.282x speedup, step: 6
JOB test speedup 2.834571916491705
TPCH test speedup 4.464322425226169
TPCH skew test speedup 4.177070278083835
Epoch 10/300 |loss: 0.004235| train set 4.197x speedup, test set 4.177x speedup, val set 4.196x speedup, step: 7
JOB test speedup 2.4073332175458333
TPCH test speedup 5.075144965524769
TPCH skew test speedup 4.830073944574262
Epoch 11/300 |loss: 0.003848| train set 5.110x speedup, test set 4.830x speedup, val set 4.875x speedup, step: 8
JOB test speedup 1.112480603639688
TPCH test speedup 5.045662917034232
TPCH skew test speedup 4.71250620568981
Epoch 12/300 |loss: 0.003308| train set 4.986x speedup, test set 4.713x speedup, val set 4.652x speedup, step: 9
JOB test speedup 1.0962944419668834
TPCH test speedup 4.673274828705165
TPCH skew test speedup 4.2527593646232775
Epoch 13/300 |loss: 0.003453| train set 4.446x speedup, test set 4.253x speedup, val set 4.252x speedup, step: 10
JOB test speedup 2.405416369563046
TPCH test speedup 4.606711878566139
TPCH skew test speedup 4.396138181842432
Epoch 14/300 |loss: 0.003469| train set 5.257x speedup, test set 4.396x speedup, val set 4.493x speedup, step: 11
JOB test speedup 3.0334573300672707
TPCH test speedup 5.222873835342793
TPCH skew test speedup 4.849693494526169
Epoch 15/300 |loss: 0.003218| train set 5.266x speedup, test set 4.850x speedup, val set 4.788x speedup, step: 12
JOB test speedup 2.741574380674814
TPCH test speedup 5.2196897873364145
TPCH skew test speedup 4.8201066779326105
Epoch 16/300 |loss: 0.002827| train set 5.123x speedup, test set 4.820x speedup, val set 4.657x speedup, step: 13
JOB test speedup 2.6966445143070703
TPCH test speedup 4.950960247278291
TPCH skew test speedup 4.696715819352785
Epoch 17/300 |loss: 0.003428| train set 5.085x speedup, test set 4.697x speedup, val set 4.810x speedup, step: 14
JOB test speedup 2.824287075126693
TPCH test speedup 5.08562659338467
TPCH skew test speedup 4.778858518399101
Epoch 18/300 |loss: 0.002868| train set 5.044x speedup, test set 4.779x speedup, val set 4.805x speedup, step: 15
JOB test speedup 2.7353920345701925
TPCH test speedup 5.311259460071802
TPCH skew test speedup 4.96985745034051
Epoch 19/300 |loss: 0.002639| train set 5.211x speedup, test set 4.970x speedup, val set 4.885x speedup, step: 1
JOB test speedup 2.918874562986455
TPCH test speedup 5.218004818022519
TPCH skew test speedup 4.8199264603453225
Epoch 20/300 |loss: 0.002494| train set 5.285x speedup, test set 4.820x speedup, val set 4.895x speedup, step: 2
JOB test speedup 2.913877229447166
TPCH test speedup 4.7998319756157235
TPCH skew test speedup 4.663730289441187
Epoch 21/300 |loss: 0.002794| train set 4.739x speedup, test set 4.664x speedup, val set 4.554x speedup, step: 3
JOB test speedup 2.9495455818088594
TPCH test speedup 3.5544505891497833
TPCH skew test speedup 3.421937239613557
Epoch 22/300 |loss: 0.002522| train set 4.860x speedup, test set 3.422x speedup, val set 3.779x speedup, step: 4
JOB test speedup 2.392650942947287
TPCH test speedup 5.2040808015311875
TPCH skew test speedup 4.942690184168152
Epoch 23/300 |loss: 0.002139| train set 5.313x speedup, test set 4.943x speedup, val set 4.984x speedup, step: 5
JOB test speedup 2.616512966175219
TPCH test speedup 5.109145168998187
TPCH skew test speedup 4.776996343913076
Epoch 24/300 |loss: 0.001964| train set 5.339x speedup, test set 4.777x speedup, val set 4.882x speedup, step: 6
JOB test speedup 2.800943900149272
TPCH test speedup 4.9611558630186074
TPCH skew test speedup 4.702052341659938
Epoch 25/300 |loss: 0.002226| train set 5.271x speedup, test set 4.702x speedup, val set 4.801x speedup, step: 7
JOB test speedup 3.0837124865002536
TPCH test speedup 5.034533522439037
TPCH skew test speedup 4.907053346545781
Epoch 26/300 |loss: 0.001856| train set 5.171x speedup, test set 4.907x speedup, val set 4.602x speedup, step: 8
JOB test speedup 2.6858280364388785
TPCH test speedup 5.07927385425404
TPCH skew test speedup 4.776197482531867
Epoch 27/300 |loss: 0.002036| train set 5.247x speedup, test set 4.776x speedup, val set 4.745x speedup, step: 9
JOB test speedup 3.107425531945414
TPCH test speedup 4.932242105235471
TPCH skew test speedup 4.8952753903716975
Epoch 28/300 |loss: 0.002000| train set 5.292x speedup, test set 4.895x speedup, val set 4.744x speedup, step: 10
JOB test speedup 3.111394225796636
TPCH test speedup 4.973262981883097
TPCH skew test speedup 4.824931669376816
Epoch 29/300 |loss: 0.001921| train set 5.305x speedup, test set 4.825x speedup, val set 4.577x speedup, step: 11
JOB test speedup 2.8008728614544465
TPCH test speedup 4.952577205603499
TPCH skew test speedup 4.693963202130089
Epoch 30/300 |loss: 0.001793| train set 5.007x speedup, test set 4.694x speedup, val set 4.834x speedup, step: 12
JOB test speedup 3.116914157152853
TPCH test speedup 5.057828334252738
TPCH skew test speedup 4.699522416522399
Epoch 31/300 |loss: 0.001671| train set 5.268x speedup, test set 4.700x speedup, val set 4.622x speedup, step: 13
JOB test speedup 3.143039308788354
TPCH test speedup 4.88965095484368
TPCH skew test speedup 4.827345566960099
Epoch 32/300 |loss: 0.001638| train set 5.322x speedup, test set 4.827x speedup, val set 4.778x speedup, step: 14
JOB test speedup 3.1225864989898238
TPCH test speedup 4.841594428572833
TPCH skew test speedup 4.808062093474638
Epoch 33/300 |loss: 0.001836| train set 5.251x speedup, test set 4.808x speedup, val set 4.533x speedup, step: 15
JOB test speedup 3.148439994508599
TPCH test speedup 3.5436491412210516
TPCH skew test speedup 3.3961406523383917
Epoch 34/300 |loss: 0.001661| train set 5.117x speedup, test set 3.396x speedup, val set 4.665x speedup, step: 16
JOB test speedup 3.1322067176240056
TPCH test speedup 5.051535805365849
TPCH skew test speedup 4.89824282071345
Epoch 35/300 |loss: 0.001539| train set 5.164x speedup, test set 4.898x speedup, val set 4.678x speedup, step: 17
JOB test speedup 3.1296564988092306
TPCH test speedup 5.003342991923955
TPCH skew test speedup 4.634059093956017
Epoch 36/300 |loss: 0.001652| train set 5.262x speedup, test set 4.634x speedup, val set 4.621x speedup, step: 18
JOB test speedup 3.1081693331617717
TPCH test speedup 4.969478396782535
TPCH skew test speedup 4.686408056920582
Epoch 37/300 |loss: 0.001648| train set 5.379x speedup, test set 4.686x speedup, val set 4.845x speedup, step: 19
JOB test speedup 3.1231013634135065
TPCH test speedup 4.955484042975275
TPCH skew test speedup 4.895047366965946
Epoch 38/300 |loss: 0.001334| train set 5.347x speedup, test set 4.895x speedup, val set 4.877x speedup, step: 20
JOB test speedup 3.113794614030995
TPCH test speedup 3.822184476298332
TPCH skew test speedup 3.557668216832287
Epoch 39/300 |loss: 0.001635| train set 4.318x speedup, test set 3.558x speedup, val set 3.489x speedup, step: 21
JOB test speedup 3.041095020134778
TPCH test speedup 3.6700516093296374
TPCH skew test speedup 3.527069584898494
Epoch 40/300 |loss: 0.001418| train set 4.942x speedup, test set 3.527x speedup, val set 3.782x speedup, step: 22
JOB test speedup 3.014867017592301
TPCH test speedup 4.465399236108548
TPCH skew test speedup 4.072740699324598
Epoch 41/300 |loss: 0.001342| train set 5.376x speedup, test set 4.073x speedup, val set 4.605x speedup, step: 23
JOB test speedup 3.20225022069257
TPCH test speedup 5.040710435451763
TPCH skew test speedup 4.891268331825516
Epoch 42/300 |loss: 0.001409| train set 5.331x speedup, test set 4.891x speedup, val set 4.792x speedup, step: 24
JOB test speedup 2.298929872785814
TPCH test speedup 5.066950561496649
TPCH skew test speedup 4.690835498981024
Epoch 43/300 |loss: 0.001346| train set 5.319x speedup, test set 4.691x speedup, val set 4.721x speedup, step: 25
JOB test speedup 3.00902181830527
TPCH test speedup 3.7269895065487644
TPCH skew test speedup 3.5103041797957943
Epoch 44/300 |loss: 0.001445| train set 5.366x speedup, test set 3.510x speedup, val set 4.722x speedup, step: 26
JOB test speedup 3.116906125123678
TPCH test speedup 4.94847218080634
TPCH skew test speedup 4.8886866011019015
Epoch 45/300 |loss: 0.001139| train set 5.369x speedup, test set 4.889x speedup, val set 4.825x speedup, step: 27
JOB test speedup 3.0615693783842435
TPCH test speedup 5.066654081841553
TPCH skew test speedup 4.691782849330835
Epoch 46/300 |loss: 0.001126| train set 5.330x speedup, test set 4.692x speedup, val set 4.682x speedup, step: 28
JOB test speedup 3.02620603083431
TPCH test speedup 5.127242060858154
TPCH skew test speedup 5.08708993919266
Epoch 47/300 |loss: 0.001128| train set 5.385x speedup, test set 5.087x speedup, val set 4.847x speedup, step: 29
JOB test speedup 3.0364368983901953
TPCH test speedup 5.045977494433965
TPCH skew test speedup 4.893409593917548
Epoch 48/300 |loss: 0.001022| train set 5.272x speedup, test set 4.893x speedup, val set 4.597x speedup, step: 30
JOB test speedup 2.2789721307900423
TPCH test speedup 5.033193664307949
TPCH skew test speedup 4.706178762799567
Epoch 49/300 |loss: 0.001087| train set 5.346x speedup, test set 4.706x speedup, val set 4.747x speedup, step: 31
JOB test speedup 3.159856987347695
TPCH test speedup 4.037189856077877
TPCH skew test speedup 3.908944214150347
Epoch 50/300 |loss: 0.001007| train set 5.333x speedup, test set 3.909x speedup, val set 3.687x speedup, step: 32
JOB test speedup 3.1308003749054394
TPCH test speedup 5.045114035836825
TPCH skew test speedup 4.893504689770137
Epoch 51/300 |loss: 0.001055| train set 5.329x speedup, test set 4.894x speedup, val set 4.682x speedup, step: 33
JOB test speedup 2.9506765040692624
TPCH test speedup 5.231065916077228
TPCH skew test speedup 5.112174241301794
Epoch 52/300 |loss: 0.001007| train set 5.304x speedup, test set 5.112x speedup, val set 4.740x speedup, step: 34
JOB test speedup 3.060810644143404
TPCH test speedup 5.045114035836825
TPCH skew test speedup 4.893504689770137
Epoch 53/300 |loss: 0.001148| train set 5.301x speedup, test set 4.894x speedup, val set 4.573x speedup, step: 35
JOB test speedup 3.1597368923002938
TPCH test speedup 5.0396952468292655
TPCH skew test speedup 4.88942406492197
Epoch 54/300 |loss: 0.001037| train set 5.287x speedup, test set 4.889x speedup, val set 4.791x speedup, step: 36
JOB test speedup 3.007960534432721
TPCH test speedup 5.151597785961334
TPCH skew test speedup 4.8699479496251525
Epoch 55/300 |loss: 0.000959| train set 5.378x speedup, test set 4.870x speedup, val set 4.746x speedup, step: 37
JOB test speedup 2.7850863948571702
TPCH test speedup 5.19919405822114
TPCH skew test speedup 5.108188775273595
Epoch 56/300 |loss: 0.000951| train set 5.342x speedup, test set 5.108x speedup, val set 4.737x speedup, step: 38
JOB test speedup 3.06520554280146
TPCH test speedup 4.902931281487279
TPCH skew test speedup 4.897778754991657
Epoch 57/300 |loss: 0.000960| train set 5.229x speedup, test set 4.898x speedup, val set 4.644x speedup, step: 39
JOB test speedup 3.13747873236774
TPCH test speedup 5.254545545578437
TPCH skew test speedup 4.873205015866466
Epoch 58/300 |loss: 0.000969| train set 5.370x speedup, test set 4.873x speedup, val set 4.849x speedup, step: 40
JOB test speedup 3.069197999609101
TPCH test speedup 5.12813508726489
TPCH skew test speedup 5.0888536657333585
Epoch 59/300 |loss: 0.001063| train set 5.327x speedup, test set 5.089x speedup, val set 4.815x speedup, step: 41
JOB test speedup 2.6249257735137688
TPCH test speedup 4.275214971251322
TPCH skew test speedup 4.165431868611719
Epoch 60/300 |loss: 0.000841| train set 5.328x speedup, test set 4.165x speedup, val set 4.669x speedup, step: 42
JOB test speedup 2.201509581967283
TPCH test speedup 4.996163382775162
TPCH skew test speedup 4.901132000590859
Epoch 61/300 |loss: 0.000852| train set 5.272x speedup, test set 4.901x speedup, val set 4.605x speedup, step: 43
JOB test speedup 3.168696284848309
TPCH test speedup 5.231065916077228
TPCH skew test speedup 5.092204269244177
Epoch 62/300 |loss: 0.000952| train set 5.330x speedup, test set 5.092x speedup, val set 4.649x speedup, step: 44
JOB test speedup 3.0497380515100287
TPCH test speedup 5.150697805170836
TPCH skew test speedup 4.870042135773399
Epoch 63/300 |loss: 0.000846| train set 5.379x speedup, test set 4.870x speedup, val set 4.820x speedup, step: 45
JOB test speedup 3.16129279337268
TPCH test speedup 4.171651423444355
TPCH skew test speedup 4.1660787732727105
Epoch 64/300 |loss: 0.000794| train set 5.373x speedup, test set 4.166x speedup, val set 3.986x speedup, step: 46
JOB test speedup 3.078654420411863
TPCH test speedup 5.122536589553857
TPCH skew test speedup 5.084440887317318
Epoch 65/300 |loss: 0.000863| train set 5.373x speedup, test set 5.084x speedup, val set 4.677x speedup, step: 47
JOB test speedup 3.0573623357223476
TPCH test speedup 5.1299393834922835
TPCH skew test speedup 5.082609775124725
Epoch 66/300 |loss: 0.000858| train set 5.375x speedup, test set 5.083x speedup, val set 4.720x speedup, step: 48
JOB test speedup 3.1344436911806746
TPCH test speedup 5.1525180161931186
TPCH skew test speedup 4.864323351540562
Epoch 67/300 |loss: 0.000720| train set 5.381x speedup, test set 4.864x speedup, val set 4.818x speedup, step: 49
JOB test speedup 2.550809773448485
TPCH test speedup 5.1299393834922835
TPCH skew test speedup 5.0854093172549275
Epoch 68/300 |loss: 0.000756| train set 5.334x speedup, test set 5.085x speedup, val set 4.677x speedup, step: 50
JOB test speedup 3.012984747625561
TPCH test speedup 5.1294298474532605
TPCH skew test speedup 5.091153997614511
Epoch 69/300 |loss: 0.000832| train set 5.381x speedup, test set 5.091x speedup, val set 4.810x speedup, step: 51
JOB test speedup 3.035039329104798
TPCH test speedup 5.150697805170836
TPCH skew test speedup 4.870042135773399
Epoch 70/300 |loss: 0.000834| train set 5.336x speedup, test set 4.870x speedup, val set 4.813x speedup, step: 52
JOB test speedup 3.049064041514813
TPCH test speedup 5.1474313718636315
TPCH skew test speedup 4.8665607170392535
Epoch 71/300 |loss: 0.000824| train set 5.380x speedup, test set 4.867x speedup, val set 4.728x speedup, step: 53
JOB test speedup 2.5126913573781042
TPCH test speedup 4.970317307890803
TPCH skew test speedup 4.687904846533385
Epoch 72/300 |loss: 0.000710| train set 5.329x speedup, test set 4.688x speedup, val set 4.695x speedup, step: 54
JOB test speedup 3.0342828084157225
TPCH test speedup 5.0690859908368715
TPCH skew test speedup 4.692702543859118
Epoch 73/300 |loss: 0.000801| train set 5.332x speedup, test set 4.693x speedup, val set 4.720x speedup, step: 55
JOB test speedup 3.0492224769203995
TPCH test speedup 4.966076914919427
TPCH skew test speedup 4.685462258144108
Epoch 74/300 |loss: 0.000712| train set 5.386x speedup, test set 4.685x speedup, val set 4.740x speedup, step: 56
JOB test speedup 2.6644979099715917
TPCH test speedup 4.970317307890803
TPCH skew test speedup 4.687904846533385
Epoch 75/300 |loss: 0.000720| train set 5.288x speedup, test set 4.688x speedup, val set 4.719x speedup, step: 57
JOB test speedup 3.038107246369164
TPCH test speedup 4.950984643109512
TPCH skew test speedup 4.884548944942511
Epoch 76/300 |loss: 0.000811| train set 5.372x speedup, test set 4.885x speedup, val set 4.725x speedup, step: 58
JOB test speedup 2.9043680011739066
TPCH test speedup 4.949304014078196
TPCH skew test speedup 4.890315413024066
Epoch 77/300 |loss: 0.000663| train set 5.341x speedup, test set 4.890x speedup, val set 4.700x speedup, step: 59
JOB test speedup 2.9904697041142305
TPCH test speedup 5.28825078848928
TPCH skew test speedup 4.873205015866466
Epoch 78/300 |loss: 0.000638| train set 5.363x speedup, test set 4.873x speedup, val set 4.746x speedup, step: 60
JOB test speedup 3.102081472133999
TPCH test speedup 5.150697805170836
TPCH skew test speedup 4.870042135773399
Epoch 79/300 |loss: 0.000665| train set 5.383x speedup, test set 4.870x speedup, val set 4.738x speedup, step: 61
JOB test speedup 3.176335026740812
TPCH test speedup 4.950134986087304
TPCH skew test speedup 4.817238815259198
Epoch 80/300 |loss: 0.000704| train set 5.338x speedup, test set 4.817x speedup, val set 4.742x speedup, step: 62
JOB test speedup 2.8440326752445353
TPCH test speedup 5.12813508726489
TPCH skew test speedup 5.0888536657333585
Epoch 81/300 |loss: 0.000862| train set 5.386x speedup, test set 5.089x speedup, val set 4.756x speedup, step: 63
JOB test speedup 3.0935390631977673
TPCH test speedup 4.950984643109512
TPCH skew test speedup 4.884548944942511
Epoch 82/300 |loss: 0.000773| train set 5.373x speedup, test set 4.885x speedup, val set 4.601x speedup, step: 64
JOB test speedup 3.1130987447930294
TPCH test speedup 4.93027137251883
TPCH skew test speedup 4.779856613671668
Epoch 83/300 |loss: 0.000652| train set 5.216x speedup, test set 4.780x speedup, val set 4.653x speedup, step: 65
JOB test speedup 2.90324270237727
TPCH test speedup 5.036391968941777
TPCH skew test speedup 4.88860147251999
Epoch 84/300 |loss: 0.000688| train set 5.384x speedup, test set 4.889x speedup, val set 4.684x speedup, step: 66
JOB test speedup 2.906235959435761
TPCH test speedup 5.231065916077228
TPCH skew test speedup 5.092307248657776
Epoch 85/300 |loss: 0.000617| train set 5.374x speedup, test set 5.092x speedup, val set 4.746x speedup, step: 67
JOB test speedup 3.161211709260569
TPCH test speedup 5.045114035836825
TPCH skew test speedup 4.893504689770137
Epoch 86/300 |loss: 0.000658| train set 5.380x speedup, test set 4.894x speedup, val set 4.604x speedup, step: 68
JOB test speedup 2.961501922153457
TPCH test speedup 5.090191954245259
TPCH skew test speedup 5.106560700958848
Epoch 87/300 |loss: 0.000641| train set 5.338x speedup, test set 5.107x speedup, val set 4.705x speedup, step: 69
early stopping at epoch 87
Training per epoch cost 2.329 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.325s, pg runtime 0.072s, speedup 0.221x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.198s, pg runtime 0.153s, speedup 0.772x
15, opt runtime 0.313s, model runtime 0.407s, pg runtime 0.313s, speedup 0.769x
16, opt runtime 0.441s, model runtime 0.468s, pg runtime 0.453s, speedup 0.969x
17, opt runtime 0.327s, model runtime 0.355s, pg runtime 0.354s, speedup 0.996x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.341s, pg runtime 0.891s, speedup 2.617x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.124s, pg runtime 0.112s, speedup 0.907x
28, opt runtime 0.154s, model runtime 0.476s, pg runtime 0.154s, speedup 0.324x
29, opt runtime 0.136s, model runtime 1.225s, pg runtime 0.137s, speedup 0.112x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
19, opt runtime 1.309s, model runtime 1.382s, pg runtime 1.356s, speedup 0.981x
20, opt runtime 1.340s, model runtime 1.478s, pg runtime 1.340s, speedup 0.907x
21, opt runtime 6.281s, model runtime 6.281s, pg runtime 6.281s, speedup 1.000x
22, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
23, opt runtime 5.961s, model runtime 9.875s, pg runtime 31.210s, speedup 3.161x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 17.327s, pg runtime 501.793s, speedup 28.960x
36, opt runtime 16.438s, model runtime 19.535s, pg runtime 546.887s, speedup 27.995x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.098s, pg runtime 1.100s, speedup 1.001x
40, opt runtime 1.084s, model runtime 1.084s, pg runtime 1.155s, speedup 1.065x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 5.511s, model runtime 6.648s, pg runtime 14.247s, speedup 2.143x
19, opt runtime 1.116s, model runtime 1.317s, pg runtime 1.244s, speedup 0.945x
20, opt runtime 1.367s, model runtime 1.591s, pg runtime 1.367s, speedup 0.860x
21, opt runtime 9.313s, model runtime 9.313s, pg runtime 9.313s, speedup 1.000x
22, opt runtime 26.254s, model runtime 26.254s, pg runtime 26.254s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 14.422s, pg runtime 497.542s, speedup 34.499x
36, opt runtime 15.980s, model runtime 15.980s, pg runtime 504.239s, speedup 31.555x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.853s, pg runtime 0.893s, speedup 1.047x
40, opt runtime 1.004s, model runtime 1.104s, pg runtime 1.004s, speedup 0.909x
====================
JOB best validation speedup epoch: 19, train speedup 5.211, test speedup 2.735, val speedup 4.885
TPCH best validation speedup epoch: 19, train speedup 5.211, test speedup 5.311, val speedup 4.885
TPCH Skew best validation speedup epoch: 19, train speedup 5.211, test speedup 4.970, val speedup 4.885
execution cost 0:04:51.771881
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
construct training samples cost 0:00:01.126738, and there are 9408 training samples
in channel 9
JOB test speedup 0.9482992191637157
TPCH test speedup 2.5439851095259973
TPCH skew test speedup 2.530704080347007
Epoch 0/300 |loss: 0.037324| train set 2.540x speedup, test set 2.531x speedup, val set 2.311x speedup, step: 1
JOB test speedup 2.2359935842095475
TPCH test speedup 2.7387836432096875
TPCH skew test speedup 2.6194938061246753
Epoch 1/300 |loss: 0.017553| train set 2.599x speedup, test set 2.619x speedup, val set 2.572x speedup, step: 2
JOB test speedup 0.9755008555769169
TPCH test speedup 3.0572381248976828
TPCH skew test speedup 2.876984237745062
Epoch 2/300 |loss: 0.011413| train set 2.983x speedup, test set 2.877x speedup, val set 3.023x speedup, step: 3
JOB test speedup 0.9766166227754874
TPCH test speedup 3.1361938691805897
TPCH skew test speedup 2.8904475400649643
Epoch 3/300 |loss: 0.008266| train set 2.906x speedup, test set 2.890x speedup, val set 2.864x speedup, step: 4
JOB test speedup 0.9691496694430328
TPCH test speedup 4.133183919454852
TPCH skew test speedup 3.717095181028719
Epoch 4/300 |loss: 0.006892| train set 3.269x speedup, test set 3.717x speedup, val set 3.977x speedup, step: 1
JOB test speedup 0.5486052763586735
TPCH test speedup 3.651006001545304
TPCH skew test speedup 3.773669755755109
Epoch 5/300 |loss: 0.007601| train set 3.684x speedup, test set 3.774x speedup, val set 3.615x speedup, step: 2
JOB test speedup 1.0602412223157072
TPCH test speedup 4.622825162971089
TPCH skew test speedup 4.822950112061931
Epoch 6/300 |loss: 0.005349| train set 4.395x speedup, test set 4.823x speedup, val set 4.554x speedup, step: 3
JOB test speedup 0.9863774790705253
TPCH test speedup 4.325925950047138
TPCH skew test speedup 4.136598177537109
Epoch 7/300 |loss: 0.004698| train set 3.806x speedup, test set 4.137x speedup, val set 4.141x speedup, step: 4
JOB test speedup 1.114956820900138
TPCH test speedup 4.6445144272123455
TPCH skew test speedup 4.7965821498043475
Epoch 8/300 |loss: 0.005396| train set 4.569x speedup, test set 4.797x speedup, val set 4.457x speedup, step: 5
JOB test speedup 1.1209256714333882
TPCH test speedup 4.506816791731685
TPCH skew test speedup 4.154705400112035
Epoch 9/300 |loss: 0.004287| train set 4.507x speedup, test set 4.155x speedup, val set 4.350x speedup, step: 1
JOB test speedup 2.5845223589092767
TPCH test speedup 4.372832791350958
TPCH skew test speedup 4.063726105230311
Epoch 10/300 |loss: 0.004150| train set 4.222x speedup, test set 4.064x speedup, val set 4.214x speedup, step: 2
JOB test speedup 2.7192218532500103
TPCH test speedup 5.020411276520438
TPCH skew test speedup 4.742730457465151
Epoch 11/300 |loss: 0.003888| train set 5.020x speedup, test set 4.743x speedup, val set 4.929x speedup, step: 3
JOB test speedup 2.880652150164077
TPCH test speedup 5.131544378156027
TPCH skew test speedup 4.79461371796013
Epoch 12/300 |loss: 0.003291| train set 5.108x speedup, test set 4.795x speedup, val set 4.777x speedup, step: 4
JOB test speedup 1.1138272719067628
TPCH test speedup 4.53585900035325
TPCH skew test speedup 4.512175449008695
Epoch 13/300 |loss: 0.003339| train set 4.658x speedup, test set 4.512x speedup, val set 4.515x speedup, step: 5
JOB test speedup 2.756262839418982
TPCH test speedup 4.549534330435604
TPCH skew test speedup 4.576921991065531
Epoch 14/300 |loss: 0.003326| train set 5.267x speedup, test set 4.577x speedup, val set 4.353x speedup, step: 1
JOB test speedup 2.8763932556681566
TPCH test speedup 5.037233846516991
TPCH skew test speedup 3.8930070903500815
Epoch 15/300 |loss: 0.003341| train set 5.299x speedup, test set 3.893x speedup, val set 4.642x speedup, step: 2
JOB test speedup 2.7696149776174237
TPCH test speedup 5.210822395598182
TPCH skew test speedup 4.815011145747392
Epoch 16/300 |loss: 0.002809| train set 5.146x speedup, test set 4.815x speedup, val set 4.809x speedup, step: 3
JOB test speedup 2.9053205792384933
TPCH test speedup 5.3030321539219045
TPCH skew test speedup 4.8244274860663
Epoch 17/300 |loss: 0.003468| train set 4.912x speedup, test set 4.824x speedup, val set 4.888x speedup, step: 4
JOB test speedup 2.8572629798207316
TPCH test speedup 3.866512737386404
TPCH skew test speedup 3.8127350685922514
Epoch 18/300 |loss: 0.002775| train set 5.133x speedup, test set 3.813x speedup, val set 4.189x speedup, step: 5
JOB test speedup 2.906411689086866
TPCH test speedup 5.261165164391934
TPCH skew test speedup 4.928111184750748
Epoch 19/300 |loss: 0.002645| train set 5.228x speedup, test set 4.928x speedup, val set 4.749x speedup, step: 1
JOB test speedup 2.9092500961487566
TPCH test speedup 3.6199860905152503
TPCH skew test speedup 3.437352698715566
Epoch 20/300 |loss: 0.002406| train set 4.888x speedup, test set 3.437x speedup, val set 3.260x speedup, step: 2
JOB test speedup 2.9350840507741913
TPCH test speedup 5.231484049396071
TPCH skew test speedup 4.902907777303276
Epoch 21/300 |loss: 0.002696| train set 5.209x speedup, test set 4.903x speedup, val set 4.702x speedup, step: 3
JOB test speedup 2.7785091856010355
TPCH test speedup 3.917857620298204
TPCH skew test speedup 3.8110351458736953
Epoch 22/300 |loss: 0.002564| train set 4.813x speedup, test set 3.811x speedup, val set 3.784x speedup, step: 4
JOB test speedup 2.5537563092391724
TPCH test speedup 5.004539162271615
TPCH skew test speedup 4.763617517396976
Epoch 23/300 |loss: 0.002153| train set 5.238x speedup, test set 4.764x speedup, val set 4.956x speedup, step: 5
JOB test speedup 2.823654147554486
TPCH test speedup 4.754912600147138
TPCH skew test speedup 4.519389271907702
Epoch 24/300 |loss: 0.001934| train set 5.330x speedup, test set 4.519x speedup, val set 4.671x speedup, step: 6
JOB test speedup 2.631195093435465
TPCH test speedup 4.965399927179938
TPCH skew test speedup 4.731158161623331
Epoch 25/300 |loss: 0.002146| train set 5.273x speedup, test set 4.731x speedup, val set 4.989x speedup, step: 7
JOB test speedup 2.92845446281104
TPCH test speedup 4.783091151336614
TPCH skew test speedup 4.6439690758327234
Epoch 26/300 |loss: 0.001802| train set 5.204x speedup, test set 4.644x speedup, val set 4.693x speedup, step: 8
JOB test speedup 2.880179196786492
TPCH test speedup 5.087466756492779
TPCH skew test speedup 4.807898191091156
Epoch 27/300 |loss: 0.001937| train set 5.207x speedup, test set 4.808x speedup, val set 4.841x speedup, step: 9
JOB test speedup 2.8987076774966027
TPCH test speedup 5.122713333469725
TPCH skew test speedup 4.808833898662249
Epoch 28/300 |loss: 0.001956| train set 5.203x speedup, test set 4.809x speedup, val set 4.723x speedup, step: 10
JOB test speedup 2.855753828929544
TPCH test speedup 3.9758051566550394
TPCH skew test speedup 4.228577766407971
Epoch 29/300 |loss: 0.002005| train set 5.312x speedup, test set 4.229x speedup, val set 4.911x speedup, step: 1
JOB test speedup 2.838718433187004
TPCH test speedup 4.956986517004776
TPCH skew test speedup 4.719815254167808
Epoch 30/300 |loss: 0.001804| train set 5.368x speedup, test set 4.720x speedup, val set 4.935x speedup, step: 2
JOB test speedup 2.7946786371793
TPCH test speedup 5.017156166233089
TPCH skew test speedup 4.717859841407126
Epoch 31/300 |loss: 0.001558| train set 5.172x speedup, test set 4.718x speedup, val set 4.690x speedup, step: 3
JOB test speedup 2.845136453242369
TPCH test speedup 4.959530611422253
TPCH skew test speedup 4.723057898232822
Epoch 32/300 |loss: 0.001633| train set 5.327x speedup, test set 4.723x speedup, val set 4.893x speedup, step: 4
JOB test speedup 2.914374606579403
TPCH test speedup 4.930355546311404
TPCH skew test speedup 4.689994140901579
Epoch 33/300 |loss: 0.001859| train set 5.315x speedup, test set 4.690x speedup, val set 4.886x speedup, step: 5
JOB test speedup 2.940449713712758
TPCH test speedup 3.9778392033587044
TPCH skew test speedup 3.8143294931963183
Epoch 34/300 |loss: 0.001545| train set 5.314x speedup, test set 3.814x speedup, val set 4.864x speedup, step: 6
JOB test speedup 2.9002345008818207
TPCH test speedup 5.007435728596999
TPCH skew test speedup 4.745452516215299
Epoch 35/300 |loss: 0.001425| train set 5.374x speedup, test set 4.745x speedup, val set 4.874x speedup, step: 7
JOB test speedup 2.941224575177597
TPCH test speedup 3.9971616675150954
TPCH skew test speedup 3.8660549462685014
Epoch 36/300 |loss: 0.001560| train set 5.359x speedup, test set 3.866x speedup, val set 3.770x speedup, step: 8
JOB test speedup 2.84654006147858
TPCH test speedup 5.031443870224283
TPCH skew test speedup 4.789782149836666
Epoch 37/300 |loss: 0.001441| train set 5.377x speedup, test set 4.790x speedup, val set 4.964x speedup, step: 9
JOB test speedup 2.8550058460226495
TPCH test speedup 5.103322472744902
TPCH skew test speedup 4.815015172877493
Epoch 38/300 |loss: 0.001243| train set 5.332x speedup, test set 4.815x speedup, val set 4.873x speedup, step: 10
JOB test speedup 2.925570106266747
TPCH test speedup 3.8616604971757607
TPCH skew test speedup 3.5841464998809984
Epoch 39/300 |loss: 0.001328| train set 4.971x speedup, test set 3.584x speedup, val set 3.603x speedup, step: 11
JOB test speedup 2.940167348208837
TPCH test speedup 3.6799595276842845
TPCH skew test speedup 3.494098766854314
Epoch 40/300 |loss: 0.001245| train set 4.510x speedup, test set 3.494x speedup, val set 3.461x speedup, step: 12
JOB test speedup 2.8458987483569502
TPCH test speedup 4.483281932671705
TPCH skew test speedup 4.140529366741137
Epoch 41/300 |loss: 0.001297| train set 5.365x speedup, test set 4.141x speedup, val set 4.874x speedup, step: 13
JOB test speedup 2.8211610776103524
TPCH test speedup 5.009911661226208
TPCH skew test speedup 5.001284319677915
Epoch 42/300 |loss: 0.001321| train set 5.353x speedup, test set 5.001x speedup, val set 4.945x speedup, step: 14
JOB test speedup 2.8343507094032647
TPCH test speedup 5.014789913100529
TPCH skew test speedup 4.755223003637572
Epoch 43/300 |loss: 0.001255| train set 5.375x speedup, test set 4.755x speedup, val set 4.869x speedup, step: 15
JOB test speedup 2.8274686925694543
TPCH test speedup 3.5673102483897856
TPCH skew test speedup 3.55922933953213
Epoch 44/300 |loss: 0.001266| train set 5.136x speedup, test set 3.559x speedup, val set 3.549x speedup, step: 16
JOB test speedup 2.992649042442842
TPCH test speedup 4.965080643053312
TPCH skew test speedup 4.979801735133269
Epoch 45/300 |loss: 0.001053| train set 5.330x speedup, test set 4.980x speedup, val set 4.741x speedup, step: 17
JOB test speedup 2.8030614508483045
TPCH test speedup 5.096768446027228
TPCH skew test speedup 4.81043661302723
Epoch 46/300 |loss: 0.001036| train set 5.307x speedup, test set 4.810x speedup, val set 4.919x speedup, step: 18
JOB test speedup 2.9247126911460217
TPCH test speedup 4.629482489655013
TPCH skew test speedup 4.641610870085379
Epoch 47/300 |loss: 0.001107| train set 5.323x speedup, test set 4.642x speedup, val set 4.785x speedup, step: 19
JOB test speedup 2.5681576465000604
TPCH test speedup 5.009130842267337
TPCH skew test speedup 4.973557551351969
Epoch 48/300 |loss: 0.000983| train set 5.373x speedup, test set 4.974x speedup, val set 4.699x speedup, step: 20
JOB test speedup 2.831675241755423
TPCH test speedup 5.06795320210957
TPCH skew test speedup 4.9904517139746325
Epoch 49/300 |loss: 0.001098| train set 5.347x speedup, test set 4.990x speedup, val set 4.679x speedup, step: 21
JOB test speedup 2.926803440635373
TPCH test speedup 3.5921421095277886
TPCH skew test speedup 3.664051232884933
Epoch 50/300 |loss: 0.000994| train set 5.325x speedup, test set 3.664x speedup, val set 3.772x speedup, step: 22
JOB test speedup 2.9145110677983603
TPCH test speedup 3.993759728219996
TPCH skew test speedup 4.4801155293189705
Epoch 51/300 |loss: 0.001108| train set 5.259x speedup, test set 4.480x speedup, val set 4.743x speedup, step: 23
JOB test speedup 2.813149075445659
TPCH test speedup 3.9467880306178786
TPCH skew test speedup 3.9920947685308135
Epoch 52/300 |loss: 0.000991| train set 5.276x speedup, test set 3.992x speedup, val set 4.815x speedup, step: 24
JOB test speedup 2.751147519062918
TPCH test speedup 5.101558590129184
TPCH skew test speedup 4.9972354292907095
Epoch 53/300 |loss: 0.001027| train set 5.329x speedup, test set 4.997x speedup, val set 4.738x speedup, step: 25
JOB test speedup 2.852400579902832
TPCH test speedup 5.065317730402536
TPCH skew test speedup 4.9554525277214685
Epoch 54/300 |loss: 0.000946| train set 5.370x speedup, test set 4.955x speedup, val set 4.735x speedup, step: 26
JOB test speedup 3.1344798463516024
TPCH test speedup 5.103460021279474
TPCH skew test speedup 4.973614998907851
Epoch 55/300 |loss: 0.000917| train set 5.378x speedup, test set 4.974x speedup, val set 4.877x speedup, step: 27
JOB test speedup 3.08941829871503
TPCH test speedup 3.9756580825781627
TPCH skew test speedup 3.9774762359252938
Epoch 56/300 |loss: 0.000924| train set 5.224x speedup, test set 3.977x speedup, val set 4.690x speedup, step: 28
JOB test speedup 2.928633381880775
TPCH test speedup 4.933448620072874
TPCH skew test speedup 4.947882435403613
Epoch 57/300 |loss: 0.000967| train set 5.217x speedup, test set 4.948x speedup, val set 4.769x speedup, step: 29
JOB test speedup 3.128928065697596
TPCH test speedup 4.075547163774826
TPCH skew test speedup 4.0986101974818165
Epoch 58/300 |loss: 0.001008| train set 5.378x speedup, test set 4.099x speedup, val set 4.791x speedup, step: 30
JOB test speedup 2.843448728374118
TPCH test speedup 4.748536941540803
TPCH skew test speedup 4.747719514194376
Epoch 59/300 |loss: 0.001195| train set 5.371x speedup, test set 4.748x speedup, val set 4.733x speedup, step: 31
early stopping at epoch 59
Training per epoch cost 2.316 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.012s, pg runtime 0.072s, speedup 6.159x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.198s, pg runtime 0.153s, speedup 0.772x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.474s, pg runtime 0.453s, speedup 0.957x
17, opt runtime 0.327s, model runtime 0.327s, pg runtime 0.354s, speedup 1.083x
18, opt runtime 2.599s, model runtime 2.599s, pg runtime 2.599s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.891s, speedup 5.964x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 1.225s, pg runtime 0.137s, speedup 0.112x
30, opt runtime 0.023s, model runtime 0.065s, pg runtime 0.023s, speedup 0.357x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
33, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 133.905s, pg runtime 75.736s, speedup 0.566x
16, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 7.469s, model runtime 7.469s, pg runtime 23.223s, speedup 3.109x
19, opt runtime 1.309s, model runtime 1.309s, pg runtime 1.356s, speedup 1.036x
20, opt runtime 1.340s, model runtime 1.490s, pg runtime 1.340s, speedup 0.899x
21, opt runtime 6.281s, model runtime 22.977s, pg runtime 6.281s, speedup 0.273x
22, opt runtime 25.034s, model runtime 31.752s, pg runtime 25.034s, speedup 0.788x
23, opt runtime 5.961s, model runtime 10.298s, pg runtime 31.210s, speedup 3.031x
24, opt runtime 6.234s, model runtime 10.220s, pg runtime 32.540s, speedup 3.184x
25, opt runtime 1.306s, model runtime 2.482s, pg runtime 1.306s, speedup 0.526x
26, opt runtime 1.342s, model runtime 2.744s, pg runtime 1.342s, speedup 0.489x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 42.151s, pg runtime 70.116s, speedup 1.663x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.098s, pg runtime 1.100s, speedup 1.001x
40, opt runtime 1.084s, model runtime 1.084s, pg runtime 1.155s, speedup 1.065x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 132.632s, pg runtime 93.781s, speedup 0.707x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
18, opt runtime 5.511s, model runtime 6.648s, pg runtime 14.247s, speedup 2.143x
19, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.244s, speedup 1.114x
20, opt runtime 1.367s, model runtime 1.474s, pg runtime 1.367s, speedup 0.928x
21, opt runtime 9.313s, model runtime 29.211s, pg runtime 9.313s, speedup 0.319x
22, opt runtime 26.254s, model runtime 32.932s, pg runtime 26.254s, speedup 0.797x
23, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
24, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
25, opt runtime 1.420s, model runtime 3.248s, pg runtime 1.420s, speedup 0.437x
26, opt runtime 1.187s, model runtime 2.763s, pg runtime 1.187s, speedup 0.430x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 37.989s, pg runtime 68.524s, speedup 1.804x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.853s, pg runtime 0.893s, speedup 1.047x
40, opt runtime 1.004s, model runtime 1.104s, pg runtime 1.004s, speedup 0.909x
====================
JOB best validation speedup epoch: 29, train speedup 5.312, test speedup 2.856, val speedup 4.911
TPCH best validation speedup epoch: 29, train speedup 5.312, test speedup 3.976, val speedup 4.911
TPCH Skew best validation speedup epoch: 29, train speedup 5.312, test speedup 4.229, val speedup 4.911
execution cost 0:03:21.118468
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
construct training samples cost 0:00:01.243680, and there are 9408 training samples
in channel 9
JOB test speedup 0.9482992191637157
TPCH test speedup 2.5439851095259973
TPCH skew test speedup 2.530704080347007
Epoch 0/300 |loss: 0.037324| train set 2.540x speedup, test set 2.531x speedup, val set 2.311x speedup, step: 1
JOB test speedup 2.2359935842095475
TPCH test speedup 2.7387836432096875
TPCH skew test speedup 2.6194938061246753
Epoch 1/300 |loss: 0.017553| train set 2.599x speedup, test set 2.619x speedup, val set 2.572x speedup, step: 2
JOB test speedup 1.0144873321757293
TPCH test speedup 3.0634425297173395
TPCH skew test speedup 2.882106618673675
Epoch 2/300 |loss: 0.011404| train set 2.956x speedup, test set 2.882x speedup, val set 2.969x speedup, step: 3
JOB test speedup 0.9909548599750216
TPCH test speedup 3.062977800942175
TPCH skew test speedup 2.7938628660064087
Epoch 3/300 |loss: 0.008256| train set 2.936x speedup, test set 2.794x speedup, val set 2.954x speedup, step: 4
JOB test speedup 0.5431119769408381
TPCH test speedup 4.623759080116466
TPCH skew test speedup 4.172889454548168
Epoch 4/300 |loss: 0.006948| train set 4.188x speedup, test set 4.173x speedup, val set 4.567x speedup, step: 1
JOB test speedup 0.56472018894655
TPCH test speedup 4.363352960567086
TPCH skew test speedup 4.508101996148387
Epoch 5/300 |loss: 0.007763| train set 4.052x speedup, test set 4.508x speedup, val set 4.239x speedup, step: 2
JOB test speedup 1.0649232593262061
TPCH test speedup 4.649881330191515
TPCH skew test speedup 4.805411871670142
Epoch 6/300 |loss: 0.005333| train set 4.120x speedup, test set 4.805x speedup, val set 4.475x speedup, step: 3
JOB test speedup 1.0071883754105033
TPCH test speedup 4.4078911359708135
TPCH skew test speedup 4.10040588206722
Epoch 7/300 |loss: 0.004656| train set 3.849x speedup, test set 4.100x speedup, val set 4.109x speedup, step: 4
JOB test speedup 0.5752383287350248
TPCH test speedup 4.479788899592654
TPCH skew test speedup 4.720471924998408
Epoch 8/300 |loss: 0.005211| train set 4.527x speedup, test set 4.720x speedup, val set 4.463x speedup, step: 5
JOB test speedup 0.5667437166325124
TPCH test speedup 4.56920509670581
TPCH skew test speedup 4.171444573328312
Epoch 9/300 |loss: 0.004338| train set 4.518x speedup, test set 4.171x speedup, val set 4.273x speedup, step: 6
JOB test speedup 1.07868344316908
TPCH test speedup 4.532743404156439
TPCH skew test speedup 4.205798295181731
Epoch 10/300 |loss: 0.004246| train set 4.296x speedup, test set 4.206x speedup, val set 4.199x speedup, step: 7
JOB test speedup 3.0372133313959053
TPCH test speedup 5.069661509133037
TPCH skew test speedup 4.826098379145191
Epoch 11/300 |loss: 0.003883| train set 5.117x speedup, test set 4.826x speedup, val set 4.858x speedup, step: 8
JOB test speedup 2.9286669134650505
TPCH test speedup 5.045573443155378
TPCH skew test speedup 4.714621519071826
Epoch 12/300 |loss: 0.003273| train set 4.983x speedup, test set 4.715x speedup, val set 4.663x speedup, step: 9
JOB test speedup 0.5506350020194352
TPCH test speedup 4.758764960833238
TPCH skew test speedup 4.694532264091174
Epoch 13/300 |loss: 0.003412| train set 4.791x speedup, test set 4.695x speedup, val set 4.672x speedup, step: 10
JOB test speedup 2.703796727662133
TPCH test speedup 5.001388823091823
TPCH skew test speedup 4.967991884175686
Epoch 14/300 |loss: 0.003455| train set 5.264x speedup, test set 4.968x speedup, val set 4.862x speedup, step: 1
JOB test speedup 2.4312291216029394
TPCH test speedup 5.34770633248242
TPCH skew test speedup 4.951421372080774
Epoch 15/300 |loss: 0.003376| train set 5.148x speedup, test set 4.951x speedup, val set 4.746x speedup, step: 2
JOB test speedup 1.1162340079790465
TPCH test speedup 5.158335382292061
TPCH skew test speedup 4.746652747121156
Epoch 16/300 |loss: 0.002821| train set 5.180x speedup, test set 4.747x speedup, val set 4.630x speedup, step: 3
JOB test speedup 2.9592479684091164
TPCH test speedup 5.02798937029248
TPCH skew test speedup 4.763079811229883
Epoch 17/300 |loss: 0.003432| train set 5.066x speedup, test set 4.763x speedup, val set 4.850x speedup, step: 4
JOB test speedup 2.781362475113755
TPCH test speedup 4.865744477307101
TPCH skew test speedup 4.6847409030985485
Epoch 18/300 |loss: 0.002797| train set 5.252x speedup, test set 4.685x speedup, val set 4.632x speedup, step: 5
JOB test speedup 2.9563253665563387
TPCH test speedup 5.218083975366896
TPCH skew test speedup 4.912073854256282
Epoch 19/300 |loss: 0.002605| train set 5.145x speedup, test set 4.912x speedup, val set 4.885x speedup, step: 1
JOB test speedup 3.081004935047904
TPCH test speedup 3.328273398637186
TPCH skew test speedup 3.201454018072506
Epoch 20/300 |loss: 0.002436| train set 4.756x speedup, test set 3.201x speedup, val set 3.665x speedup, step: 2
JOB test speedup 2.8925870099763342
TPCH test speedup 4.829729262072421
TPCH skew test speedup 4.6471902795248825
Epoch 21/300 |loss: 0.002794| train set 4.890x speedup, test set 4.647x speedup, val set 4.565x speedup, step: 3
JOB test speedup 3.025358801618332
TPCH test speedup 5.0302580100230445
TPCH skew test speedup 4.764959659691504
Epoch 22/300 |loss: 0.002567| train set 5.210x speedup, test set 4.765x speedup, val set 4.946x speedup, step: 4
JOB test speedup 2.390597365915935
TPCH test speedup 5.208544359562121
TPCH skew test speedup 4.94821260507254
Epoch 23/300 |loss: 0.002126| train set 5.223x speedup, test set 4.948x speedup, val set 4.835x speedup, step: 5
JOB test speedup 2.618060314284101
TPCH test speedup 5.008660177925153
TPCH skew test speedup 4.772070124684475
Epoch 24/300 |loss: 0.002002| train set 5.291x speedup, test set 4.772x speedup, val set 4.805x speedup, step: 6
JOB test speedup 3.036120435643719
TPCH test speedup 4.963559450601829
TPCH skew test speedup 4.703030240586681
Epoch 25/300 |loss: 0.002186| train set 5.372x speedup, test set 4.703x speedup, val set 4.990x speedup, step: 7
JOB test speedup 2.9797345160252475
TPCH test speedup 4.8696379411048945
TPCH skew test speedup 4.859013045091098
Epoch 26/300 |loss: 0.001808| train set 5.211x speedup, test set 4.859x speedup, val set 4.674x speedup, step: 8
JOB test speedup 2.6478449026860895
TPCH test speedup 5.112765807838647
TPCH skew test speedup 4.758851603170829
Epoch 27/300 |loss: 0.002024| train set 5.170x speedup, test set 4.759x speedup, val set 4.800x speedup, step: 9
JOB test speedup 3.1368823046284513
TPCH test speedup 4.963837298000361
TPCH skew test speedup 4.614385616608296
Epoch 28/300 |loss: 0.001956| train set 5.322x speedup, test set 4.614x speedup, val set 4.754x speedup, step: 10
JOB test speedup 3.038810522687042
TPCH test speedup 4.7412926896530525
TPCH skew test speedup 4.800674097168728
Epoch 29/300 |loss: 0.001930| train set 5.350x speedup, test set 4.801x speedup, val set 4.915x speedup, step: 1
JOB test speedup 2.976257233063419
TPCH test speedup 5.029796924041103
TPCH skew test speedup 4.762798945001309
Epoch 30/300 |loss: 0.001756| train set 5.380x speedup, test set 4.763x speedup, val set 4.822x speedup, step: 2
JOB test speedup 3.0270282359782232
TPCH test speedup 5.122730728375084
TPCH skew test speedup 4.703960144870486
Epoch 31/300 |loss: 0.001677| train set 5.278x speedup, test set 4.704x speedup, val set 4.631x speedup, step: 3
JOB test speedup 3.031896638200729
TPCH test speedup 5.071994715526757
TPCH skew test speedup 4.694086295180116
Epoch 32/300 |loss: 0.001628| train set 5.323x speedup, test set 4.694x speedup, val set 4.842x speedup, step: 4
JOB test speedup 3.1224082957013413
TPCH test speedup 4.794328683190899
TPCH skew test speedup 4.872784240187923
Epoch 33/300 |loss: 0.001801| train set 5.271x speedup, test set 4.873x speedup, val set 4.554x speedup, step: 5
JOB test speedup 3.03876736516195
TPCH test speedup 3.4675033761304914
TPCH skew test speedup 3.7125541737827703
Epoch 34/300 |loss: 0.001676| train set 5.371x speedup, test set 3.713x speedup, val set 4.726x speedup, step: 6
JOB test speedup 3.0102205132667623
TPCH test speedup 5.100411834904121
TPCH skew test speedup 4.969834441521889
Epoch 35/300 |loss: 0.001605| train set 5.379x speedup, test set 4.970x speedup, val set 4.870x speedup, step: 7
JOB test speedup 3.1191524738974157
TPCH test speedup 4.904640846956708
TPCH skew test speedup 4.674703018538732
Epoch 36/300 |loss: 0.001641| train set 5.214x speedup, test set 4.675x speedup, val set 4.687x speedup, step: 8
JOB test speedup 3.138655311435475
TPCH test speedup 5.023978897794083
TPCH skew test speedup 4.757909495826497
Epoch 37/300 |loss: 0.001528| train set 5.331x speedup, test set 4.758x speedup, val set 4.726x speedup, step: 9
JOB test speedup 3.1222705631750545
TPCH test speedup 4.9930246854651115
TPCH skew test speedup 4.775248495446456
Epoch 38/300 |loss: 0.001239| train set 5.310x speedup, test set 4.775x speedup, val set 4.754x speedup, step: 10
JOB test speedup 2.9872273894188632
TPCH test speedup 3.7031491764793443
TPCH skew test speedup 3.5137499044527436
Epoch 39/300 |loss: 0.001653| train set 4.982x speedup, test set 3.514x speedup, val set 3.801x speedup, step: 11
JOB test speedup 3.0263792982318303
TPCH test speedup 3.610196773562962
TPCH skew test speedup 3.5066111553754578
Epoch 40/300 |loss: 0.001319| train set 5.100x speedup, test set 3.507x speedup, val set 3.385x speedup, step: 12
JOB test speedup 2.8316815573210157
TPCH test speedup 4.657330957937867
TPCH skew test speedup 4.196719540863114
Epoch 41/300 |loss: 0.001369| train set 5.373x speedup, test set 4.197x speedup, val set 4.625x speedup, step: 13
JOB test speedup 2.9973294446973355
TPCH test speedup 4.743648897508821
TPCH skew test speedup 4.798898180235364
Epoch 42/300 |loss: 0.001385| train set 5.287x speedup, test set 4.799x speedup, val set 4.789x speedup, step: 14
JOB test speedup 2.971872178241795
TPCH test speedup 4.240501496574681
TPCH skew test speedup 4.606164078455063
Epoch 43/300 |loss: 0.001292| train set 5.324x speedup, test set 4.606x speedup, val set 4.656x speedup, step: 15
JOB test speedup 3.050330360082251
TPCH test speedup 4.088137092511215
TPCH skew test speedup 4.0837466305863845
Epoch 44/300 |loss: 0.001421| train set 5.376x speedup, test set 4.084x speedup, val set 4.905x speedup, step: 16
JOB test speedup 2.7199377060164953
TPCH test speedup 4.949304014078196
TPCH skew test speedup 4.890315413024066
Epoch 45/300 |loss: 0.001071| train set 5.372x speedup, test set 4.890x speedup, val set 4.740x speedup, step: 17
JOB test speedup 3.0351290615585125
TPCH test speedup 5.123622183833216
TPCH skew test speedup 4.762473134985111
Epoch 46/300 |loss: 0.001053| train set 5.330x speedup, test set 4.762x speedup, val set 4.681x speedup, step: 18
JOB test speedup 3.0496368291408404
TPCH test speedup 5.12870682314447
TPCH skew test speedup 5.088385176787295
Epoch 47/300 |loss: 0.001059| train set 5.362x speedup, test set 5.088x speedup, val set 4.824x speedup, step: 19
JOB test speedup 2.6600471193556214
TPCH test speedup 4.74543692848241
TPCH skew test speedup 4.799384479458221
Epoch 48/300 |loss: 0.001005| train set 5.287x speedup, test set 4.799x speedup, val set 4.595x speedup, step: 20
JOB test speedup 2.9004057098767757
TPCH test speedup 5.043957043442127
TPCH skew test speedup 4.894630818369938
Epoch 49/300 |loss: 0.001056| train set 5.291x speedup, test set 4.895x speedup, val set 4.564x speedup, step: 21
JOB test speedup 3.1308593520824695
TPCH test speedup 3.387589412694005
TPCH skew test speedup 3.447637060978064
Epoch 50/300 |loss: 0.001002| train set 5.335x speedup, test set 3.448x speedup, val set 4.006x speedup, step: 22
JOB test speedup 2.9568214031844047
TPCH test speedup 5.101295538764862
TPCH skew test speedup 4.971517785193365
Epoch 51/300 |loss: 0.001138| train set 5.324x speedup, test set 4.972x speedup, val set 4.724x speedup, step: 23
JOB test speedup 2.9553860706569717
TPCH test speedup 4.778965127234888
TPCH skew test speedup 4.859988047521845
Epoch 52/300 |loss: 0.001007| train set 5.323x speedup, test set 4.860x speedup, val set 4.492x speedup, step: 24
JOB test speedup 2.9678062496752013
TPCH test speedup 5.044249687927667
TPCH skew test speedup 4.891873753011752
Epoch 53/300 |loss: 0.001098| train set 5.161x speedup, test set 4.892x speedup, val set 4.534x speedup, step: 25
JOB test speedup 2.851749433462776
TPCH test speedup 4.744672206732691
TPCH skew test speedup 4.797815667204948
Epoch 54/300 |loss: 0.001020| train set 5.336x speedup, test set 4.798x speedup, val set 4.669x speedup, step: 26
JOB test speedup 3.0202709306647333
TPCH test speedup 5.151597785961334
TPCH skew test speedup 4.8699479496251525
Epoch 55/300 |loss: 0.001028| train set 5.381x speedup, test set 4.870x speedup, val set 4.746x speedup, step: 27
JOB test speedup 2.7417787548205697
TPCH test speedup 4.790214184052791
TPCH skew test speedup 4.874308116019353
Epoch 56/300 |loss: 0.000960| train set 5.257x speedup, test set 4.874x speedup, val set 4.607x speedup, step: 28
JOB test speedup 0.8175185424100588
TPCH test speedup 4.7100718507513415
TPCH skew test speedup 4.81258444338931
Epoch 57/300 |loss: 0.000978| train set 5.307x speedup, test set 4.813x speedup, val set 4.654x speedup, step: 29
JOB test speedup 2.920971390313499
TPCH test speedup 4.744672206732691
TPCH skew test speedup 4.797815667204948
Epoch 58/300 |loss: 0.000970| train set 5.257x speedup, test set 4.798x speedup, val set 4.705x speedup, step: 30
JOB test speedup 0.8545766895312018
TPCH test speedup 4.795609382160506
TPCH skew test speedup 4.872784240187923
Epoch 59/300 |loss: 0.001142| train set 5.322x speedup, test set 4.873x speedup, val set 4.802x speedup, step: 31
JOB test speedup 2.9201808962589033
TPCH test speedup 4.409629312649342
TPCH skew test speedup 4.022296919001356
Epoch 60/300 |loss: 0.000911| train set 5.326x speedup, test set 4.022x speedup, val set 4.528x speedup, step: 32
JOB test speedup 2.9298341970669783
TPCH test speedup 4.714804651426951
TPCH skew test speedup 4.816537766287948
Epoch 61/300 |loss: 0.000891| train set 5.306x speedup, test set 4.817x speedup, val set 4.602x speedup, step: 33
JOB test speedup 2.949885738791416
TPCH test speedup 4.74543692848241
TPCH skew test speedup 4.799384479458221
Epoch 62/300 |loss: 0.000943| train set 5.368x speedup, test set 4.799x speedup, val set 4.802x speedup, step: 34
JOB test speedup 2.9112905388534984
TPCH test speedup 4.741162718334174
TPCH skew test speedup 4.6255694514992305
Epoch 63/300 |loss: 0.000811| train set 5.362x speedup, test set 4.626x speedup, val set 4.671x speedup, step: 35
JOB test speedup 3.167635141369686
TPCH test speedup 4.960826973722392
TPCH skew test speedup 5.071081665930606
Epoch 64/300 |loss: 0.000877| train set 5.385x speedup, test set 5.071x speedup, val set 4.717x speedup, step: 36
JOB test speedup 2.9074699307050764
TPCH test speedup 4.749600443730025
TPCH skew test speedup 4.803780635955505
Epoch 65/300 |loss: 0.000933| train set 5.378x speedup, test set 4.804x speedup, val set 4.650x speedup, step: 37
JOB test speedup 2.7378882392949397
TPCH test speedup 4.744798611924563
TPCH skew test speedup 4.799939712537775
Epoch 66/300 |loss: 0.000946| train set 5.375x speedup, test set 4.800x speedup, val set 4.643x speedup, step: 38
JOB test speedup 2.5806755169601026
TPCH test speedup 4.740642460900852
TPCH skew test speedup 4.7954592531309075
Epoch 67/300 |loss: 0.000828| train set 5.338x speedup, test set 4.795x speedup, val set 4.780x speedup, step: 39
JOB test speedup 3.0471024222098837
TPCH test speedup 4.89048881238124
TPCH skew test speedup 4.882709633238175
Epoch 68/300 |loss: 0.000726| train set 5.330x speedup, test set 4.883x speedup, val set 4.735x speedup, step: 40
JOB test speedup 3.0488686265807137
TPCH test speedup 4.997182692768309
TPCH skew test speedup 4.962341632360867
Epoch 69/300 |loss: 0.000812| train set 5.292x speedup, test set 4.962x speedup, val set 4.840x speedup, step: 41
JOB test speedup 2.6219021361356463
TPCH test speedup 4.619455817827794
TPCH skew test speedup 4.827060280827676
Epoch 70/300 |loss: 0.000883| train set 4.967x speedup, test set 4.827x speedup, val set 4.545x speedup, step: 42
JOB test speedup 2.9184506850122305
TPCH test speedup 4.6407966540108445
TPCH skew test speedup 4.696461077737989
Epoch 71/300 |loss: 0.000913| train set 5.294x speedup, test set 4.696x speedup, val set 4.675x speedup, step: 43
JOB test speedup 0.8170340425209563
TPCH test speedup 4.740642460900852
TPCH skew test speedup 4.7954592531309075
Epoch 72/300 |loss: 0.000762| train set 5.392x speedup, test set 4.795x speedup, val set 4.600x speedup, step: 44
JOB test speedup 3.005093700036912
TPCH test speedup 4.796635320507825
TPCH skew test speedup 4.877588468396385
Epoch 73/300 |loss: 0.000777| train set 5.389x speedup, test set 4.878x speedup, val set 4.729x speedup, step: 45
JOB test speedup 0.8253269704323314
TPCH test speedup 4.834996623905867
TPCH skew test speedup 4.805548829275842
Epoch 74/300 |loss: 0.000673| train set 5.365x speedup, test set 4.806x speedup, val set 4.689x speedup, step: 46
JOB test speedup 2.9903571951245618
TPCH test speedup 4.092151416660514
TPCH skew test speedup 4.1433723155255215
Epoch 75/300 |loss: 0.000860| train set 5.322x speedup, test set 4.143x speedup, val set 4.771x speedup, step: 47
JOB test speedup 2.6250098944435227
TPCH test speedup 4.686442777266651
TPCH skew test speedup 4.759151688061695
Epoch 76/300 |loss: 0.000933| train set 5.366x speedup, test set 4.759x speedup, val set 4.770x speedup, step: 48
early stopping at epoch 76
Training per epoch cost 2.332 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.072s, pg runtime 0.072s, speedup 1.000x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.198s, pg runtime 0.153s, speedup 0.772x
15, opt runtime 0.313s, model runtime 0.407s, pg runtime 0.313s, speedup 0.769x
16, opt runtime 0.441s, model runtime 0.474s, pg runtime 0.453s, speedup 0.957x
17, opt runtime 0.327s, model runtime 0.327s, pg runtime 0.354s, speedup 1.083x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.891s, speedup 5.964x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.654s, pg runtime 0.189s, speedup 0.289x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 1.225s, pg runtime 0.137s, speedup 0.112x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.315s, pg runtime 1.315s, speedup 1.000x
33, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 23.961s, pg runtime 32.278s, speedup 1.347x
06, opt runtime 19.263s, model runtime 30.418s, pg runtime 19.263s, speedup 0.633x
07, opt runtime 7.110s, model runtime 12.431s, pg runtime 14.286s, speedup 1.149x
08, opt runtime 7.237s, model runtime 9.171s, pg runtime 17.708s, speedup 1.931x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.309s, pg runtime 1.356s, speedup 1.036x
20, opt runtime 1.340s, model runtime 1.490s, pg runtime 1.340s, speedup 0.899x
21, opt runtime 6.281s, model runtime 22.977s, pg runtime 6.281s, speedup 0.273x
22, opt runtime 25.034s, model runtime 31.752s, pg runtime 25.034s, speedup 0.788x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.418s, pg runtime 1.306s, speedup 0.921x
26, opt runtime 1.342s, model runtime 2.555s, pg runtime 1.342s, speedup 0.525x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 41.909s, pg runtime 70.116s, speedup 1.673x
34, opt runtime 39.191s, model runtime 43.993s, pg runtime 75.984s, speedup 1.727x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.210s, pg runtime 1.100s, speedup 0.909x
40, opt runtime 1.084s, model runtime 1.158s, pg runtime 1.155s, speedup 0.998x
========== TPCH skew
01, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
02, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 10.669s, pg runtime 29.760s, speedup 2.790x
06, opt runtime 16.844s, model runtime 16.844s, pg runtime 27.164s, speedup 1.613x
07, opt runtime 6.528s, model runtime 14.144s, pg runtime 12.078s, speedup 0.854x
08, opt runtime 5.471s, model runtime 8.538s, pg runtime 13.410s, speedup 1.571x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.244s, speedup 1.114x
20, opt runtime 1.367s, model runtime 1.474s, pg runtime 1.367s, speedup 0.928x
21, opt runtime 9.313s, model runtime 29.211s, pg runtime 9.313s, speedup 0.319x
22, opt runtime 26.254s, model runtime 32.932s, pg runtime 26.254s, speedup 0.797x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.837s, pg runtime 1.420s, speedup 0.773x
26, opt runtime 1.187s, model runtime 1.392s, pg runtime 1.187s, speedup 0.852x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 42.439s, pg runtime 68.524s, speedup 1.615x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.958s, pg runtime 0.893s, speedup 0.932x
40, opt runtime 1.004s, model runtime 1.166s, pg runtime 1.004s, speedup 0.861x
====================
JOB best validation speedup epoch: 29, train speedup 5.350, test speedup 3.039, val speedup 4.915
TPCH best validation speedup epoch: 29, train speedup 5.350, test speedup 4.741, val speedup 4.915
TPCH Skew best validation speedup epoch: 29, train speedup 5.350, test speedup 4.801, val speedup 4.915
execution cost 0:04:18.476774
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
construct training samples cost 0:00:01.136319, and there are 9408 training samples
in channel 9
JOB test speedup 0.9482992191637157
TPCH test speedup 2.5439851095259973
TPCH skew test speedup 2.530704080347007
Epoch 0/300 |loss: 0.037324| train set 2.540x speedup, test set 2.531x speedup, val set 2.311x speedup, step: 1
JOB test speedup 2.2359935842095475
TPCH test speedup 2.7387836432096875
TPCH skew test speedup 2.6194938061246753
Epoch 1/300 |loss: 0.017553| train set 2.599x speedup, test set 2.619x speedup, val set 2.572x speedup, step: 2
JOB test speedup 0.9755008555769169
TPCH test speedup 3.153071219450535
TPCH skew test speedup 2.876984237745062
Epoch 2/300 |loss: 0.011410| train set 2.985x speedup, test set 2.877x speedup, val set 3.023x speedup, step: 3
JOB test speedup 2.1090490376958337
TPCH test speedup 2.9091215201023397
TPCH skew test speedup 2.712491351631176
Epoch 3/300 |loss: 0.008286| train set 2.790x speedup, test set 2.712x speedup, val set 2.659x speedup, step: 4
JOB test speedup 0.9829779910579423
TPCH test speedup 4.618336191371542
TPCH skew test speedup 4.235432908867811
Epoch 4/300 |loss: 0.006869| train set 3.523x speedup, test set 4.235x speedup, val set 4.491x speedup, step: 1
JOB test speedup 1.0494075376566803
TPCH test speedup 3.6833632686104436
TPCH skew test speedup 3.834108711811167
Epoch 5/300 |loss: 0.007494| train set 3.618x speedup, test set 3.834x speedup, val set 3.530x speedup, step: 2
JOB test speedup 1.075367177444578
TPCH test speedup 4.650551652872127
TPCH skew test speedup 4.805263613164486
Epoch 6/300 |loss: 0.005393| train set 4.627x speedup, test set 4.805x speedup, val set 4.554x speedup, step: 3
JOB test speedup 1.023950398554905
TPCH test speedup 4.318596577592462
TPCH skew test speedup 4.000043938155353
Epoch 7/300 |loss: 0.004815| train set 3.642x speedup, test set 4.000x speedup, val set 4.117x speedup, step: 4
JOB test speedup 1.1156600235572822
TPCH test speedup 4.656675558227624
TPCH skew test speedup 4.718189413892709
Epoch 8/300 |loss: 0.005336| train set 4.438x speedup, test set 4.718x speedup, val set 4.391x speedup, step: 5
JOB test speedup 1.084019676456207
TPCH test speedup 4.506375297150072
TPCH skew test speedup 4.155017729264421
Epoch 9/300 |loss: 0.004343| train set 4.430x speedup, test set 4.155x speedup, val set 4.253x speedup, step: 6
JOB test speedup 2.583919917520911
TPCH test speedup 4.522263845021457
TPCH skew test speedup 4.197845056173687
Epoch 10/300 |loss: 0.004154| train set 4.444x speedup, test set 4.198x speedup, val set 4.217x speedup, step: 7
JOB test speedup 2.960986204022424
TPCH test speedup 5.078544727739483
TPCH skew test speedup 4.832967915379754
Epoch 11/300 |loss: 0.003921| train set 5.120x speedup, test set 4.833x speedup, val set 4.891x speedup, step: 8
JOB test speedup 3.040114158830867
TPCH test speedup 5.3305778633736525
TPCH skew test speedup 4.990674106038897
Epoch 12/300 |loss: 0.003329| train set 5.108x speedup, test set 4.991x speedup, val set 4.924x speedup, step: 9
JOB test speedup 1.0502749542979577
TPCH test speedup 4.814048287483843
TPCH skew test speedup 4.788626515485138
Epoch 13/300 |loss: 0.003436| train set 4.398x speedup, test set 4.789x speedup, val set 4.260x speedup, step: 10
JOB test speedup 2.5204450628356025
TPCH test speedup 4.598125758535896
TPCH skew test speedup 4.378732592229004
Epoch 14/300 |loss: 0.003497| train set 5.264x speedup, test set 4.379x speedup, val set 4.860x speedup, step: 1
JOB test speedup 3.0561572821370038
TPCH test speedup 5.417172755395649
TPCH skew test speedup 4.951332542722583
Epoch 15/300 |loss: 0.003359| train set 5.138x speedup, test set 4.951x speedup, val set 4.801x speedup, step: 2
JOB test speedup 2.8688873665547407
TPCH test speedup 5.219262244605925
TPCH skew test speedup 4.8218355990048964
Epoch 16/300 |loss: 0.002813| train set 5.132x speedup, test set 4.822x speedup, val set 4.902x speedup, step: 3
JOB test speedup 2.9323365117867763
TPCH test speedup 5.263322970854596
TPCH skew test speedup 4.946645810088777
Epoch 17/300 |loss: 0.003442| train set 5.059x speedup, test set 4.947x speedup, val set 4.867x speedup, step: 4
JOB test speedup 1.1071182305623826
TPCH test speedup 4.3284606313058624
TPCH skew test speedup 4.723585209998746
Epoch 18/300 |loss: 0.002832| train set 5.060x speedup, test set 4.724x speedup, val set 4.772x speedup, step: 5
JOB test speedup 2.757112520963804
TPCH test speedup 5.253940901237884
TPCH skew test speedup 4.896010070735789
Epoch 19/300 |loss: 0.002588| train set 5.225x speedup, test set 4.896x speedup, val set 4.842x speedup, step: 6
JOB test speedup 2.7772289388731077
TPCH test speedup 5.1271530633201365
TPCH skew test speedup 4.7085672990934455
Epoch 20/300 |loss: 0.002381| train set 4.986x speedup, test set 4.709x speedup, val set 4.812x speedup, step: 7
JOB test speedup 2.806294805579375
TPCH test speedup 5.106941443593488
TPCH skew test speedup 4.931223408887194
Epoch 21/300 |loss: 0.002621| train set 4.859x speedup, test set 4.931x speedup, val set 4.613x speedup, step: 8
JOB test speedup 2.782242623969265
TPCH test speedup 5.023978897794083
TPCH skew test speedup 4.701013075090581
Epoch 22/300 |loss: 0.002486| train set 5.046x speedup, test set 4.701x speedup, val set 4.944x speedup, step: 9
JOB test speedup 2.507341480244387
TPCH test speedup 5.023978897794083
TPCH skew test speedup 4.757909495826497
Epoch 23/300 |loss: 0.002051| train set 5.255x speedup, test set 4.758x speedup, val set 4.827x speedup, step: 10
JOB test speedup 2.818772760601206
TPCH test speedup 4.904581237601521
TPCH skew test speedup 4.651448719363957
Epoch 24/300 |loss: 0.001942| train set 5.328x speedup, test set 4.651x speedup, val set 4.687x speedup, step: 11
JOB test speedup 2.8351613629462262
TPCH test speedup 5.07498146888828
TPCH skew test speedup 4.721059262781196
Epoch 25/300 |loss: 0.002107| train set 5.315x speedup, test set 4.721x speedup, val set 4.975x speedup, step: 12
JOB test speedup 2.800868523955017
TPCH test speedup 4.887205207924306
TPCH skew test speedup 4.90838881880677
Epoch 26/300 |loss: 0.001757| train set 5.206x speedup, test set 4.908x speedup, val set 4.630x speedup, step: 13
JOB test speedup 2.645915416634015
TPCH test speedup 4.9451153716193685
TPCH skew test speedup 4.655948525652971
Epoch 27/300 |loss: 0.001982| train set 5.214x speedup, test set 4.656x speedup, val set 4.814x speedup, step: 14
JOB test speedup 3.0979767807805425
TPCH test speedup 4.817497337665215
TPCH skew test speedup 4.763068450205746
Epoch 28/300 |loss: 0.001965| train set 5.210x speedup, test set 4.763x speedup, val set 4.563x speedup, step: 15
JOB test speedup 2.7740294838408808
TPCH test speedup 4.959978904064746
TPCH skew test speedup 4.725182697079976
Epoch 29/300 |loss: 0.001963| train set 5.290x speedup, test set 4.725x speedup, val set 4.837x speedup, step: 16
JOB test speedup 2.8425740899590886
TPCH test speedup 5.030656325571767
TPCH skew test speedup 4.764344937268209
Epoch 30/300 |loss: 0.001778| train set 5.333x speedup, test set 4.764x speedup, val set 4.947x speedup, step: 17
JOB test speedup 2.809738154202205
TPCH test speedup 5.026408813001379
TPCH skew test speedup 4.654168402455426
Epoch 31/300 |loss: 0.001561| train set 5.202x speedup, test set 4.654x speedup, val set 4.836x speedup, step: 18
JOB test speedup 3.1658545808744427
TPCH test speedup 4.847734620575616
TPCH skew test speedup 4.703719675720502
Epoch 32/300 |loss: 0.001544| train set 5.339x speedup, test set 4.704x speedup, val set 4.657x speedup, step: 19
JOB test speedup 3.116081453568805
TPCH test speedup 4.998884548219412
TPCH skew test speedup 4.9931788999626034
Epoch 33/300 |loss: 0.001608| train set 5.244x speedup, test set 4.993x speedup, val set 4.807x speedup, step: 20
JOB test speedup 2.9442959814773917
TPCH test speedup 3.5780536771293403
TPCH skew test speedup 3.4300417417816793
Epoch 34/300 |loss: 0.001574| train set 4.892x speedup, test set 3.430x speedup, val set 3.685x speedup, step: 21
JOB test speedup 2.934224463871771
TPCH test speedup 3.927583008593163
TPCH skew test speedup 3.7536918584047925
Epoch 35/300 |loss: 0.001485| train set 5.289x speedup, test set 3.754x speedup, val set 4.734x speedup, step: 22
JOB test speedup 2.88169190807506
TPCH test speedup 4.027149222839754
TPCH skew test speedup 4.29433428193342
Epoch 36/300 |loss: 0.001564| train set 5.314x speedup, test set 4.294x speedup, val set 4.860x speedup, step: 23
JOB test speedup 2.9486062121717223
TPCH test speedup 5.155910163841183
TPCH skew test speedup 4.873546153325012
Epoch 37/300 |loss: 0.001522| train set 5.314x speedup, test set 4.874x speedup, val set 4.918x speedup, step: 24
JOB test speedup 2.9859523359218545
TPCH test speedup 4.944281825440778
TPCH skew test speedup 4.702977225836219
Epoch 38/300 |loss: 0.001262| train set 5.326x speedup, test set 4.703x speedup, val set 4.801x speedup, step: 25
JOB test speedup 2.957711873286249
TPCH test speedup 4.469148071019712
TPCH skew test speedup 4.120295420601577
Epoch 39/300 |loss: 0.001545| train set 4.974x speedup, test set 4.120x speedup, val set 4.639x speedup, step: 26
JOB test speedup 2.9658007274752434
TPCH test speedup 3.526468198545589
TPCH skew test speedup 3.4258066295048515
Epoch 40/300 |loss: 0.001227| train set 5.318x speedup, test set 3.426x speedup, val set 4.851x speedup, step: 27
JOB test speedup 2.862055289689039
TPCH test speedup 5.314922969974126
TPCH skew test speedup 4.948619240849111
Epoch 41/300 |loss: 0.001250| train set 5.297x speedup, test set 4.949x speedup, val set 4.733x speedup, step: 28
JOB test speedup 3.1516210365872377
TPCH test speedup 4.965308955940548
TPCH skew test speedup 4.840411523380119
Epoch 42/300 |loss: 0.001286| train set 5.368x speedup, test set 4.840x speedup, val set 4.750x speedup, step: 29
JOB test speedup 2.9952208952212755
TPCH test speedup 5.2613325123556285
TPCH skew test speedup 4.8788260887855595
Epoch 43/300 |loss: 0.001204| train set 5.353x speedup, test set 4.879x speedup, val set 4.703x speedup, step: 30
JOB test speedup 2.812338438025074
TPCH test speedup 4.422572131219104
TPCH skew test speedup 4.960948380172331
Epoch 44/300 |loss: 0.001302| train set 5.293x speedup, test set 4.961x speedup, val set 4.739x speedup, step: 31
JOB test speedup 3.1682618567834973
TPCH test speedup 4.645471032960951
TPCH skew test speedup 4.603186265724552
Epoch 45/300 |loss: 0.001080| train set 5.317x speedup, test set 4.603x speedup, val set 4.574x speedup, step: 32
JOB test speedup 2.82635347282565
TPCH test speedup 5.068214606244882
TPCH skew test speedup 4.69278999875862
Epoch 46/300 |loss: 0.001118| train set 5.326x speedup, test set 4.693x speedup, val set 4.695x speedup, step: 33
JOB test speedup 2.8354597741830685
TPCH test speedup 5.260910180048244
TPCH skew test speedup 4.878334429984713
Epoch 47/300 |loss: 0.001057| train set 5.357x speedup, test set 4.878x speedup, val set 4.725x speedup, step: 34
JOB test speedup 3.039945943179163
TPCH test speedup 5.070386720197276
TPCH skew test speedup 4.939858788717563
Epoch 48/300 |loss: 0.000980| train set 5.378x speedup, test set 4.940x speedup, val set 4.747x speedup, step: 35
JOB test speedup 0.842467808384095
TPCH test speedup 5.012499717946107
TPCH skew test speedup 4.904734412471945
Epoch 49/300 |loss: 0.001000| train set 5.347x speedup, test set 4.905x speedup, val set 4.460x speedup, step: 36
JOB test speedup 3.1612048286402032
TPCH test speedup 4.446695632172304
TPCH skew test speedup 4.375785411676242
Epoch 50/300 |loss: 0.001003| train set 5.353x speedup, test set 4.376x speedup, val set 4.557x speedup, step: 37
JOB test speedup 2.8569475087666154
TPCH test speedup 5.068169539980525
TPCH skew test speedup 4.9650929682714215
Epoch 51/300 |loss: 0.001129| train set 5.326x speedup, test set 4.965x speedup, val set 4.643x speedup, step: 38
JOB test speedup 0.8677487327886498
TPCH test speedup 4.9547654307418565
TPCH skew test speedup 4.9737318650245435
Epoch 52/300 |loss: 0.001019| train set 5.306x speedup, test set 4.974x speedup, val set 4.562x speedup, step: 39
JOB test speedup 2.888438296976817
TPCH test speedup 4.89641531601458
TPCH skew test speedup 4.906664178670191
Epoch 53/300 |loss: 0.000986| train set 5.139x speedup, test set 4.907x speedup, val set 4.474x speedup, step: 40
JOB test speedup 2.801661240904848
TPCH test speedup 4.464108557706314
TPCH skew test speedup 4.4962594516156225
Epoch 54/300 |loss: 0.000951| train set 5.357x speedup, test set 4.496x speedup, val set 4.229x speedup, step: 41
JOB test speedup 3.043200223476198
TPCH test speedup 5.231065916077228
TPCH skew test speedup 5.092307248657776
Epoch 55/300 |loss: 0.000990| train set 5.334x speedup, test set 5.092x speedup, val set 4.893x speedup, step: 42
JOB test speedup 2.968966623937399
TPCH test speedup 4.956810547466071
TPCH skew test speedup 4.793670348974
Epoch 56/300 |loss: 0.001012| train set 5.358x speedup, test set 4.794x speedup, val set 4.579x speedup, step: 43
JOB test speedup 3.17400238490439
TPCH test speedup 4.9113442363490005
TPCH skew test speedup 4.945608881186526
Epoch 57/300 |loss: 0.001000| train set 5.316x speedup, test set 4.946x speedup, val set 4.610x speedup, step: 44
early stopping at epoch 57
Training per epoch cost 2.352 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.187s, pg runtime 0.072s, speedup 0.385x
02, opt runtime 0.183s, model runtime 0.240s, pg runtime 0.189s, speedup 0.788x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 4.238s, pg runtime 0.942s, speedup 0.222x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.313s, pg runtime 0.313s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.458s, pg runtime 0.453s, speedup 0.991x
17, opt runtime 0.327s, model runtime 0.349s, pg runtime 0.354s, speedup 1.012x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.069s, pg runtime 0.086s, speedup 1.250x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.341s, pg runtime 0.891s, speedup 2.617x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.112s, pg runtime 0.112s, speedup 1.000x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.209s, pg runtime 0.137s, speedup 0.653x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 2.411s, pg runtime 0.965s, speedup 0.400x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.525s, pg runtime 1.356s, speedup 0.889x
20, opt runtime 1.340s, model runtime 1.540s, pg runtime 1.340s, speedup 0.870x
21, opt runtime 6.281s, model runtime 22.977s, pg runtime 6.281s, speedup 0.273x
22, opt runtime 25.034s, model runtime 31.752s, pg runtime 25.034s, speedup 0.788x
23, opt runtime 5.961s, model runtime 9.875s, pg runtime 31.210s, speedup 3.161x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 7.533s, pg runtime 7.533s, speedup 1.000x
28, opt runtime 7.268s, model runtime 7.268s, pg runtime 7.268s, speedup 1.000x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
32, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
33, opt runtime 35.538s, model runtime 62.647s, pg runtime 70.116s, speedup 1.119x
34, opt runtime 39.191s, model runtime 62.126s, pg runtime 75.984s, speedup 1.223x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.210s, pg runtime 1.100s, speedup 0.909x
40, opt runtime 1.084s, model runtime 1.158s, pg runtime 1.155s, speedup 0.998x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.235s, pg runtime 1.244s, speedup 1.008x
20, opt runtime 1.367s, model runtime 1.628s, pg runtime 1.367s, speedup 0.840x
21, opt runtime 9.313s, model runtime 29.211s, pg runtime 9.313s, speedup 0.319x
22, opt runtime 26.254s, model runtime 32.932s, pg runtime 26.254s, speedup 0.797x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 67.589s, pg runtime 68.524s, speedup 1.014x
34, opt runtime 41.237s, model runtime 64.256s, pg runtime 78.181s, speedup 1.217x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.958s, pg runtime 0.893s, speedup 0.932x
40, opt runtime 1.004s, model runtime 1.166s, pg runtime 1.004s, speedup 0.861x
====================
JOB best validation speedup epoch: 14, train speedup 5.264, test speedup 2.520, val speedup 4.860
TPCH best validation speedup epoch: 14, train speedup 5.264, test speedup 4.598, val speedup 4.860
TPCH Skew best validation speedup epoch: 14, train speedup 5.264, test speedup 4.379, val speedup 4.860
execution cost 0:03:17.477100
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
construct training samples cost 0:00:01.138447, and there are 9408 training samples
in channel 9
JOB test speedup 0.9482992191637157
TPCH test speedup 2.5439851095259973
TPCH skew test speedup 2.530704080347007
Epoch 0/300 |loss: 0.037324| train set 2.540x speedup, test set 2.531x speedup, val set 2.311x speedup, step: 1
JOB test speedup 2.2359935842095475
TPCH test speedup 2.7387836432096875
TPCH skew test speedup 2.6194938061246753
Epoch 1/300 |loss: 0.017553| train set 2.599x speedup, test set 2.619x speedup, val set 2.572x speedup, step: 2
JOB test speedup 0.9755008555769169
TPCH test speedup 3.0572381248976828
TPCH skew test speedup 2.876984237745062
Epoch 2/300 |loss: 0.011413| train set 2.983x speedup, test set 2.877x speedup, val set 3.023x speedup, step: 3
JOB test speedup 2.1112497441651907
TPCH test speedup 3.1361938691805897
TPCH skew test speedup 2.8904475400649643
Epoch 3/300 |loss: 0.008263| train set 2.895x speedup, test set 2.890x speedup, val set 3.022x speedup, step: 4
JOB test speedup 1.0669403819724457
TPCH test speedup 4.604100960370899
TPCH skew test speedup 4.235504150345148
Epoch 4/300 |loss: 0.006972| train set 4.016x speedup, test set 4.236x speedup, val set 4.475x speedup, step: 1
JOB test speedup 0.5476030790222792
TPCH test speedup 3.654506352833409
TPCH skew test speedup 3.777366482589402
Epoch 5/300 |loss: 0.007512| train set 3.687x speedup, test set 3.777x speedup, val set 3.526x speedup, step: 2
JOB test speedup 1.0761661413894787
TPCH test speedup 4.717835551245393
TPCH skew test speedup 4.8277292748118015
Epoch 6/300 |loss: 0.005404| train set 4.591x speedup, test set 4.828x speedup, val set 4.518x speedup, step: 3
JOB test speedup 0.9889191815219995
TPCH test speedup 4.469039442524596
TPCH skew test speedup 4.1159875906597785
Epoch 7/300 |loss: 0.004751| train set 3.920x speedup, test set 4.116x speedup, val set 4.149x speedup, step: 4
JOB test speedup 1.0697049212368197
TPCH test speedup 4.475230201353234
TPCH skew test speedup 4.624620009946506
Epoch 8/300 |loss: 0.005308| train set 4.427x speedup, test set 4.625x speedup, val set 4.381x speedup, step: 5
JOB test speedup 0.568095307407829
TPCH test speedup 4.62345143727699
TPCH skew test speedup 4.721698362641126
Epoch 9/300 |loss: 0.004229| train set 4.395x speedup, test set 4.722x speedup, val set 4.204x speedup, step: 6
JOB test speedup 2.570082948942164
TPCH test speedup 4.532743404156439
TPCH skew test speedup 4.205798295181731
Epoch 10/300 |loss: 0.004213| train set 4.204x speedup, test set 4.206x speedup, val set 4.211x speedup, step: 7
JOB test speedup 3.005936685157892
TPCH test speedup 4.976281925222847
TPCH skew test speedup 4.717239443634379
Epoch 11/300 |loss: 0.003802| train set 4.935x speedup, test set 4.717x speedup, val set 4.900x speedup, step: 8
JOB test speedup 1.101333665537086
TPCH test speedup 5.005360034178543
TPCH skew test speedup 4.644138970065606
Epoch 12/300 |loss: 0.003292| train set 5.113x speedup, test set 4.644x speedup, val set 4.778x speedup, step: 9
JOB test speedup 1.0837633420317383
TPCH test speedup 4.797162584916052
TPCH skew test speedup 4.551572116548726
Epoch 13/300 |loss: 0.003479| train set 4.598x speedup, test set 4.552x speedup, val set 4.758x speedup, step: 10
JOB test speedup 2.4099391823385488
TPCH test speedup 4.731262613201819
TPCH skew test speedup 3.885578062826305
Epoch 14/300 |loss: 0.003454| train set 4.862x speedup, test set 3.886x speedup, val set 4.766x speedup, step: 1
JOB test speedup 3.0395650622251833
TPCH test speedup 5.146111879606984
TPCH skew test speedup 4.756924740387071
Epoch 15/300 |loss: 0.003375| train set 5.070x speedup, test set 4.757x speedup, val set 4.853x speedup, step: 2
JOB test speedup 2.852811324399903
TPCH test speedup 5.134924685065868
TPCH skew test speedup 4.79645290475203
Epoch 16/300 |loss: 0.002811| train set 5.143x speedup, test set 4.796x speedup, val set 4.914x speedup, step: 3
JOB test speedup 2.8217459143795254
TPCH test speedup 5.135977192209638
TPCH skew test speedup 4.885200067000305
Epoch 17/300 |loss: 0.003401| train set 4.931x speedup, test set 4.885x speedup, val set 4.967x speedup, step: 4
JOB test speedup 2.8967113079736153
TPCH test speedup 5.172433821040728
TPCH skew test speedup 4.833846711461802
Epoch 18/300 |loss: 0.002836| train set 5.130x speedup, test set 4.834x speedup, val set 4.891x speedup, step: 5
JOB test speedup 2.8760509160949055
TPCH test speedup 5.24965029330692
TPCH skew test speedup 4.921270033135003
Epoch 19/300 |loss: 0.002622| train set 5.198x speedup, test set 4.921x speedup, val set 4.860x speedup, step: 1
JOB test speedup 2.8592138127722344
TPCH test speedup 4.372830188865353
TPCH skew test speedup 4.102839787041051
Epoch 20/300 |loss: 0.002462| train set 5.110x speedup, test set 4.103x speedup, val set 4.909x speedup, step: 2
JOB test speedup 2.8201455547658703
TPCH test speedup 5.242063185280262
TPCH skew test speedup 4.917186509411086
Epoch 21/300 |loss: 0.002654| train set 5.091x speedup, test set 4.917x speedup, val set 4.858x speedup, step: 3
JOB test speedup 2.80365758514674
TPCH test speedup 3.5267288730709865
TPCH skew test speedup 3.4258935663333063
Epoch 22/300 |loss: 0.002528| train set 4.805x speedup, test set 3.426x speedup, val set 3.820x speedup, step: 4
JOB test speedup 2.3764596670141507
TPCH test speedup 3.9590235312023965
TPCH skew test speedup 3.6089133422152626
Epoch 23/300 |loss: 0.002125| train set 5.050x speedup, test set 3.609x speedup, val set 4.982x speedup, step: 5
JOB test speedup 2.807057428772268
TPCH test speedup 5.011852642795816
TPCH skew test speedup 4.7729278329894615
Epoch 24/300 |loss: 0.001957| train set 5.347x speedup, test set 4.773x speedup, val set 4.959x speedup, step: 1
JOB test speedup 2.7752790604823163
TPCH test speedup 4.989845200134332
TPCH skew test speedup 4.668885944060659
Epoch 25/300 |loss: 0.002143| train set 5.234x speedup, test set 4.669x speedup, val set 4.858x speedup, step: 2
JOB test speedup 2.910839226774953
TPCH test speedup 3.454845293485236
TPCH skew test speedup 3.4870706697290452
Epoch 26/300 |loss: 0.001785| train set 4.989x speedup, test set 3.487x speedup, val set 3.665x speedup, step: 3
JOB test speedup 2.501153646384676
TPCH test speedup 5.126329884022961
TPCH skew test speedup 4.794078856352956
Epoch 27/300 |loss: 0.002051| train set 5.211x speedup, test set 4.794x speedup, val set 4.845x speedup, step: 4
JOB test speedup 3.0805378119917575
TPCH test speedup 3.492061574484501
TPCH skew test speedup 3.674003484211639
Epoch 28/300 |loss: 0.001979| train set 5.146x speedup, test set 3.674x speedup, val set 4.110x speedup, step: 5
JOB test speedup 2.8796795587408424
TPCH test speedup 3.828853655791727
TPCH skew test speedup 3.7592418595689856
Epoch 29/300 |loss: 0.001897| train set 5.338x speedup, test set 3.759x speedup, val set 4.937x speedup, step: 6
JOB test speedup 2.8394087645605306
TPCH test speedup 5.037830864211044
TPCH skew test speedup 4.793171584042438
Epoch 30/300 |loss: 0.001816| train set 5.356x speedup, test set 4.793x speedup, val set 4.944x speedup, step: 7
JOB test speedup 2.8630551754574007
TPCH test speedup 4.8679647397723445
TPCH skew test speedup 4.639363469400514
Epoch 31/300 |loss: 0.001698| train set 5.349x speedup, test set 4.639x speedup, val set 4.825x speedup, step: 8
JOB test speedup 3.148396381368265
TPCH test speedup 4.769211530583077
TPCH skew test speedup 4.607412952603217
Epoch 32/300 |loss: 0.001651| train set 5.355x speedup, test set 4.607x speedup, val set 4.913x speedup, step: 9
JOB test speedup 2.795356455362008
TPCH test speedup 4.76320293488229
TPCH skew test speedup 4.030109371461778
Epoch 33/300 |loss: 0.001812| train set 5.321x speedup, test set 4.030x speedup, val set 4.924x speedup, step: 10
JOB test speedup 2.943115950917363
TPCH test speedup 3.4417112772304215
TPCH skew test speedup 3.3468508814561826
Epoch 34/300 |loss: 0.001597| train set 5.353x speedup, test set 3.347x speedup, val set 3.690x speedup, step: 11
JOB test speedup 3.0911813792932645
TPCH test speedup 3.983459867388281
TPCH skew test speedup 4.2080986774929885
Epoch 35/300 |loss: 0.001570| train set 5.360x speedup, test set 4.208x speedup, val set 4.797x speedup, step: 12
JOB test speedup 2.89220572451253
TPCH test speedup 5.1287798595919245
TPCH skew test speedup 4.765824016032603
Epoch 36/300 |loss: 0.001609| train set 5.320x speedup, test set 4.766x speedup, val set 4.723x speedup, step: 13
JOB test speedup 2.7163778901458864
TPCH test speedup 4.975170807414745
TPCH skew test speedup 4.691151580652358
Epoch 37/300 |loss: 0.001616| train set 5.380x speedup, test set 4.691x speedup, val set 4.839x speedup, step: 14
JOB test speedup 2.805119714798579
TPCH test speedup 4.841510807945196
TPCH skew test speedup 4.530269191972312
Epoch 38/300 |loss: 0.001311| train set 5.237x speedup, test set 4.530x speedup, val set 4.791x speedup, step: 15
JOB test speedup 2.864041212651345
TPCH test speedup 3.8258691755997445
TPCH skew test speedup 3.5610356740170537
Epoch 39/300 |loss: 0.001584| train set 4.593x speedup, test set 3.561x speedup, val set 3.507x speedup, step: 16
JOB test speedup 2.805403439992774
TPCH test speedup 3.509380837532576
TPCH skew test speedup 3.4093371423109176
Epoch 40/300 |loss: 0.001273| train set 5.364x speedup, test set 3.409x speedup, val set 3.403x speedup, step: 17
JOB test speedup 2.7971515058610477
TPCH test speedup 5.136962364865583
TPCH skew test speedup 4.798278710832147
Epoch 41/300 |loss: 0.001364| train set 5.317x speedup, test set 4.798x speedup, val set 4.817x speedup, step: 18
JOB test speedup 2.959909538411919
TPCH test speedup 4.978540367471151
TPCH skew test speedup 4.718900560945882
Epoch 42/300 |loss: 0.001391| train set 5.139x speedup, test set 4.719x speedup, val set 4.833x speedup, step: 19
JOB test speedup 2.879449331071349
TPCH test speedup 5.070092293039257
TPCH skew test speedup 4.695248788363491
Epoch 43/300 |loss: 0.001267| train set 5.362x speedup, test set 4.695x speedup, val set 4.890x speedup, step: 20
JOB test speedup 2.688652001637901
TPCH test speedup 3.5163621427719143
TPCH skew test speedup 3.534840241238566
Epoch 44/300 |loss: 0.001337| train set 5.280x speedup, test set 3.535x speedup, val set 3.776x speedup, step: 21
JOB test speedup 2.9328837325053296
TPCH test speedup 4.890732534909908
TPCH skew test speedup 4.88330459332919
Epoch 45/300 |loss: 0.001089| train set 5.362x speedup, test set 4.883x speedup, val set 4.674x speedup, step: 22
JOB test speedup 2.895537900674636
TPCH test speedup 3.9525272621492826
TPCH skew test speedup 3.83967323222665
Epoch 46/300 |loss: 0.001054| train set 5.377x speedup, test set 3.840x speedup, val set 4.878x speedup, step: 23
JOB test speedup 2.9348054328610766
TPCH test speedup 4.0595251229857405
TPCH skew test speedup 4.596189778126367
Epoch 47/300 |loss: 0.001111| train set 5.360x speedup, test set 4.596x speedup, val set 4.745x speedup, step: 24
JOB test speedup 0.8357128261216731
TPCH test speedup 5.135250618285749
TPCH skew test speedup 5.18112358820302
Epoch 48/300 |loss: 0.001001| train set 5.373x speedup, test set 5.181x speedup, val set 4.828x speedup, step: 25
JOB test speedup 0.7920707753760399
TPCH test speedup 5.129369556809613
TPCH skew test speedup 4.76793915565998
Epoch 49/300 |loss: 0.001033| train set 5.350x speedup, test set 4.768x speedup, val set 4.831x speedup, step: 26
JOB test speedup 3.08296336278681
TPCH test speedup 3.9945075484884622
TPCH skew test speedup 3.9562153749710305
Epoch 50/300 |loss: 0.001052| train set 5.282x speedup, test set 3.956x speedup, val set 4.875x speedup, step: 27
JOB test speedup 2.877646541909444
TPCH test speedup 5.10857716429974
TPCH skew test speedup 4.977269699546236
Epoch 51/300 |loss: 0.001016| train set 5.286x speedup, test set 4.977x speedup, val set 4.830x speedup, step: 28
JOB test speedup 2.7357145100561
TPCH test speedup 5.047546264937183
TPCH skew test speedup 5.068824611956226
Epoch 52/300 |loss: 0.000942| train set 5.303x speedup, test set 5.069x speedup, val set 4.940x speedup, step: 29
JOB test speedup 0.8327276858516133
TPCH test speedup 5.276520645326223
TPCH skew test speedup 5.166132430480753
Epoch 53/300 |loss: 0.001004| train set 5.291x speedup, test set 5.166x speedup, val set 4.865x speedup, step: 30
JOB test speedup 0.8406170114712042
TPCH test speedup 5.247792955539138
TPCH skew test speedup 5.134728973769499
Epoch 54/300 |loss: 0.000963| train set 5.372x speedup, test set 5.135x speedup, val set 4.865x speedup, step: 31
JOB test speedup 2.463684922001341
TPCH test speedup 5.263212261323217
TPCH skew test speedup 4.8803537465116165
Epoch 55/300 |loss: 0.001007| train set 5.380x speedup, test set 4.880x speedup, val set 4.838x speedup, step: 32
JOB test speedup 0.8395512643688631
TPCH test speedup 4.816077077528639
TPCH skew test speedup 4.816477291949258
Epoch 56/300 |loss: 0.001005| train set 5.319x speedup, test set 4.816x speedup, val set 4.884x speedup, step: 33
JOB test speedup 2.8551909978101535
TPCH test speedup 4.9546667557308774
TPCH skew test speedup 4.896512751381886
Epoch 57/300 |loss: 0.000975| train set 5.229x speedup, test set 4.897x speedup, val set 4.887x speedup, step: 34
JOB test speedup 0.8019339660190684
TPCH test speedup 5.155604420280673
TPCH skew test speedup 4.491123933807207
Epoch 58/300 |loss: 0.000952| train set 5.378x speedup, test set 4.491x speedup, val set 4.867x speedup, step: 35
JOB test speedup 2.7415597962890708
TPCH test speedup 5.21602021530801
TPCH skew test speedup 4.954926093699677
Epoch 59/300 |loss: 0.001108| train set 5.338x speedup, test set 4.955x speedup, val set 4.871x speedup, step: 36
JOB test speedup 0.8494246894690314
TPCH test speedup 4.107776112772438
TPCH skew test speedup 3.975118486016973
Epoch 60/300 |loss: 0.000963| train set 5.284x speedup, test set 3.975x speedup, val set 3.810x speedup, step: 37
JOB test speedup 2.7446773026887135
TPCH test speedup 4.587758901510142
TPCH skew test speedup 4.490779303967101
Epoch 61/300 |loss: 0.000913| train set 5.304x speedup, test set 4.491x speedup, val set 4.729x speedup, step: 38
JOB test speedup 2.965401090375958
TPCH test speedup 5.32342425232737
TPCH skew test speedup 4.958042392590597
Epoch 62/300 |loss: 0.001027| train set 5.383x speedup, test set 4.958x speedup, val set 4.872x speedup, step: 39
JOB test speedup 2.852680346157797
TPCH test speedup 4.220297327102932
TPCH skew test speedup 4.062293109801915
Epoch 63/300 |loss: 0.000869| train set 5.383x speedup, test set 4.062x speedup, val set 4.947x speedup, step: 40
JOB test speedup 2.8322180440536666
TPCH test speedup 5.217534881368572
TPCH skew test speedup 4.075521396340085
Epoch 64/300 |loss: 0.000915| train set 5.285x speedup, test set 4.076x speedup, val set 4.874x speedup, step: 41
JOB test speedup 2.6189592089423277
TPCH test speedup 5.169050272026672
TPCH skew test speedup 5.159164809507609
Epoch 65/300 |loss: 0.001026| train set 5.291x speedup, test set 5.159x speedup, val set 4.866x speedup, step: 42
JOB test speedup 2.784534813170882
TPCH test speedup 5.1937976464481626
TPCH skew test speedup 5.181502687605559
Epoch 66/300 |loss: 0.000881| train set 5.288x speedup, test set 5.182x speedup, val set 4.961x speedup, step: 43
JOB test speedup 0.8506046416757638
TPCH test speedup 5.0150234196872105
TPCH skew test speedup 4.709913716034566
Epoch 67/300 |loss: 0.000823| train set 5.370x speedup, test set 4.710x speedup, val set 4.786x speedup, step: 44
JOB test speedup 0.8247872728764374
TPCH test speedup 5.055711339240065
TPCH skew test speedup 4.782139741692298
Epoch 68/300 |loss: 0.000773| train set 5.370x speedup, test set 4.782x speedup, val set 4.882x speedup, step: 45
JOB test speedup 2.677256440469622
TPCH test speedup 4.837461992761077
TPCH skew test speedup 4.621039001465654
Epoch 69/300 |loss: 0.000895| train set 5.373x speedup, test set 4.621x speedup, val set 4.867x speedup, step: 46
JOB test speedup 2.7109499493386964
TPCH test speedup 5.15729787398856
TPCH skew test speedup 4.954926093699677
Epoch 70/300 |loss: 0.000816| train set 5.312x speedup, test set 4.955x speedup, val set 4.906x speedup, step: 47
JOB test speedup 0.8399665848171416
TPCH test speedup 3.9454633336240166
TPCH skew test speedup 4.702291562658493
Epoch 71/300 |loss: 0.000812| train set 5.338x speedup, test set 4.702x speedup, val set 4.944x speedup, step: 48
JOB test speedup 0.8259811849159143
TPCH test speedup 4.975388718155096
TPCH skew test speedup 4.590225854101265
Epoch 72/300 |loss: 0.000793| train set 5.315x speedup, test set 4.590x speedup, val set 4.824x speedup, step: 49
JOB test speedup 2.7438652307291167
TPCH test speedup 5.3217026374921765
TPCH skew test speedup 4.956918184067814
Epoch 73/300 |loss: 0.000847| train set 5.372x speedup, test set 4.957x speedup, val set 4.870x speedup, step: 50
JOB test speedup 0.8369687840972251
TPCH test speedup 5.165818500277208
TPCH skew test speedup 4.780614400608085
Epoch 74/300 |loss: 0.000699| train set 5.381x speedup, test set 4.781x speedup, val set 4.933x speedup, step: 51
JOB test speedup 2.7154042179084503
TPCH test speedup 3.591179730812466
TPCH skew test speedup 3.450347809446503
Epoch 75/300 |loss: 0.000847| train set 5.308x speedup, test set 3.450x speedup, val set 4.725x speedup, step: 52
JOB test speedup 2.965042694472869
TPCH test speedup 5.322545941836867
TPCH skew test speedup 4.958200228595824
Epoch 76/300 |loss: 0.000897| train set 5.376x speedup, test set 4.958x speedup, val set 4.918x speedup, step: 53
early stopping at epoch 76
Training per epoch cost 2.356 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.187s, pg runtime 0.072s, speedup 0.385x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.018s, pg runtime 0.014s, speedup 0.795x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.198s, pg runtime 0.153s, speedup 0.772x
15, opt runtime 0.313s, model runtime 0.371s, pg runtime 0.313s, speedup 0.844x
16, opt runtime 0.441s, model runtime 0.468s, pg runtime 0.453s, speedup 0.969x
17, opt runtime 0.327s, model runtime 0.358s, pg runtime 0.354s, speedup 0.988x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.083s, pg runtime 0.086s, speedup 1.030x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.341s, pg runtime 0.891s, speedup 2.617x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.540s, pg runtime 0.189s, speedup 0.350x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 1.225s, pg runtime 0.137s, speedup 0.112x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.382s, pg runtime 1.356s, speedup 0.981x
20, opt runtime 1.340s, model runtime 1.478s, pg runtime 1.340s, speedup 0.907x
21, opt runtime 6.281s, model runtime 22.977s, pg runtime 6.281s, speedup 0.273x
22, opt runtime 25.034s, model runtime 31.752s, pg runtime 25.034s, speedup 0.788x
23, opt runtime 5.961s, model runtime 9.875s, pg runtime 31.210s, speedup 3.161x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.306s, model runtime 1.418s, pg runtime 1.306s, speedup 0.921x
26, opt runtime 1.342s, model runtime 2.555s, pg runtime 1.342s, speedup 0.525x
27, opt runtime 7.066s, model runtime 7.355s, pg runtime 7.533s, speedup 1.024x
28, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 17.327s, pg runtime 501.793s, speedup 28.960x
36, opt runtime 16.438s, model runtime 19.535s, pg runtime 546.887s, speedup 27.995x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.098s, pg runtime 1.100s, speedup 1.001x
40, opt runtime 1.084s, model runtime 1.084s, pg runtime 1.155s, speedup 1.065x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.317s, pg runtime 1.244s, speedup 0.945x
20, opt runtime 1.367s, model runtime 1.591s, pg runtime 1.367s, speedup 0.860x
21, opt runtime 9.313s, model runtime 29.211s, pg runtime 9.313s, speedup 0.319x
22, opt runtime 26.254s, model runtime 32.932s, pg runtime 26.254s, speedup 0.797x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.420s, model runtime 1.837s, pg runtime 1.420s, speedup 0.773x
26, opt runtime 1.187s, model runtime 1.392s, pg runtime 1.187s, speedup 0.852x
27, opt runtime 7.213s, model runtime 7.295s, pg runtime 7.213s, speedup 0.989x
28, opt runtime 7.284s, model runtime 7.460s, pg runtime 7.529s, speedup 1.009x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 14.422s, pg runtime 497.542s, speedup 34.499x
36, opt runtime 15.980s, model runtime 15.980s, pg runtime 504.239s, speedup 31.555x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.853s, pg runtime 0.893s, speedup 1.047x
40, opt runtime 1.004s, model runtime 1.104s, pg runtime 1.004s, speedup 0.909x
====================
JOB best validation speedup epoch: 24, train speedup 5.347, test speedup 2.807, val speedup 4.959
TPCH best validation speedup epoch: 24, train speedup 5.347, test speedup 5.012, val speedup 4.959
TPCH Skew best validation speedup epoch: 24, train speedup 5.347, test speedup 4.773, val speedup 4.959
execution cost 0:04:18.645921
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
construct training samples cost 0:00:01.174664, and there are 9408 training samples
in channel 9
JOB test speedup 0.9482992191637157
TPCH test speedup 2.5439851095259973
TPCH skew test speedup 2.530704080347007
Epoch 0/300 |loss: 0.037324| train set 2.540x speedup, test set 2.531x speedup, val set 2.311x speedup, step: 1
JOB test speedup 2.2359935842095475
TPCH test speedup 2.7387836432096875
TPCH skew test speedup 2.6194938061246753
Epoch 1/300 |loss: 0.017553| train set 2.599x speedup, test set 2.619x speedup, val set 2.572x speedup, step: 2
JOB test speedup 0.9755008555769169
TPCH test speedup 3.153071219450535
TPCH skew test speedup 2.876984237745062
Epoch 2/300 |loss: 0.011410| train set 2.985x speedup, test set 2.877x speedup, val set 3.023x speedup, step: 3
JOB test speedup 2.1090490376958337
TPCH test speedup 2.9091215201023397
TPCH skew test speedup 2.712491351631176
Epoch 3/300 |loss: 0.008286| train set 2.790x speedup, test set 2.712x speedup, val set 2.659x speedup, step: 4
JOB test speedup 0.9829779910579423
TPCH test speedup 4.618336191371542
TPCH skew test speedup 4.235432908867811
Epoch 4/300 |loss: 0.006869| train set 3.523x speedup, test set 4.235x speedup, val set 4.491x speedup, step: 1
JOB test speedup 1.0493819475012782
TPCH test speedup 4.054300585427879
TPCH skew test speedup 4.096235708320804
Epoch 5/300 |loss: 0.007491| train set 3.624x speedup, test set 4.096x speedup, val set 3.526x speedup, step: 2
JOB test speedup 1.0750223483976857
TPCH test speedup 4.644906082207695
TPCH skew test speedup 4.774738022945764
Epoch 6/300 |loss: 0.005377| train set 4.350x speedup, test set 4.775x speedup, val set 4.510x speedup, step: 3
JOB test speedup 1.0243879003966885
TPCH test speedup 4.307072424267803
TPCH skew test speedup 4.050955334971672
Epoch 7/300 |loss: 0.004803| train set 3.975x speedup, test set 4.051x speedup, val set 4.164x speedup, step: 4
JOB test speedup 1.1263857010157912
TPCH test speedup 4.73522613602779
TPCH skew test speedup 4.8441336745461125
Epoch 8/300 |loss: 0.005380| train set 4.579x speedup, test set 4.844x speedup, val set 4.523x speedup, step: 5
JOB test speedup 1.08297617089827
TPCH test speedup 4.505685678065104
TPCH skew test speedup 4.153841844644687
Epoch 9/300 |loss: 0.004344| train set 4.449x speedup, test set 4.154x speedup, val set 4.268x speedup, step: 6
JOB test speedup 2.630316236383082
TPCH test speedup 4.435623528189287
TPCH skew test speedup 4.125216004768441
Epoch 10/300 |loss: 0.004160| train set 4.342x speedup, test set 4.125x speedup, val set 4.161x speedup, step: 7
JOB test speedup 2.9517970680593737
TPCH test speedup 5.082775474257264
TPCH skew test speedup 4.834878407137824
Epoch 11/300 |loss: 0.003870| train set 5.112x speedup, test set 4.835x speedup, val set 4.946x speedup, step: 8
JOB test speedup 2.864367089724851
TPCH test speedup 5.131544378156027
TPCH skew test speedup 4.79461371796013
Epoch 12/300 |loss: 0.003374| train set 5.005x speedup, test set 4.795x speedup, val set 4.813x speedup, step: 9
JOB test speedup 1.078866134440647
TPCH test speedup 4.539040519795143
TPCH skew test speedup 4.197206315552533
Epoch 13/300 |loss: 0.003434| train set 4.408x speedup, test set 4.197x speedup, val set 4.341x speedup, step: 10
JOB test speedup 2.5022103691051747
TPCH test speedup 5.0674673071679575
TPCH skew test speedup 4.8124138942036465
Epoch 14/300 |loss: 0.003497| train set 5.253x speedup, test set 4.812x speedup, val set 4.961x speedup, step: 1
JOB test speedup 2.434297394829153
TPCH test speedup 5.347891665860967
TPCH skew test speedup 4.950981828963805
Epoch 15/300 |loss: 0.003491| train set 5.221x speedup, test set 4.951x speedup, val set 4.750x speedup, step: 2
JOB test speedup 2.767439135384424
TPCH test speedup 5.219262244605925
TPCH skew test speedup 4.822412067392937
Epoch 16/300 |loss: 0.002832| train set 5.159x speedup, test set 4.822x speedup, val set 4.899x speedup, step: 3
JOB test speedup 2.9051228819490365
TPCH test speedup 5.105487510938529
TPCH skew test speedup 4.814218357116208
Epoch 17/300 |loss: 0.003604| train set 5.112x speedup, test set 4.814x speedup, val set 5.019x speedup, step: 4
JOB test speedup 2.87157540983043
TPCH test speedup 5.104205972482274
TPCH skew test speedup 4.81492310311685
Epoch 18/300 |loss: 0.002843| train set 5.075x speedup, test set 4.815x speedup, val set 4.859x speedup, step: 5
JOB test speedup 2.8786731517210584
TPCH test speedup 5.225209900302913
TPCH skew test speedup 4.944386656129961
Epoch 19/300 |loss: 0.002545| train set 5.225x speedup, test set 4.944x speedup, val set 4.843x speedup, step: 6
JOB test speedup 2.876064010966982
TPCH test speedup 5.147493085890916
TPCH skew test speedup 4.7589901842228866
Epoch 20/300 |loss: 0.002420| train set 5.004x speedup, test set 4.759x speedup, val set 4.891x speedup, step: 7
JOB test speedup 2.901893230770833
TPCH test speedup 4.938441995108534
TPCH skew test speedup 4.589508991277587
Epoch 21/300 |loss: 0.002668| train set 5.236x speedup, test set 4.590x speedup, val set 4.746x speedup, step: 8
JOB test speedup 2.89198228013411
TPCH test speedup 5.148156764882776
TPCH skew test speedup 4.889342844076763
Epoch 22/300 |loss: 0.002510| train set 5.273x speedup, test set 4.889x speedup, val set 4.947x speedup, step: 9
JOB test speedup 2.869523234739938
TPCH test speedup 5.024410970722556
TPCH skew test speedup 4.758933310197275
Epoch 23/300 |loss: 0.002136| train set 5.264x speedup, test set 4.759x speedup, val set 4.937x speedup, step: 10
JOB test speedup 2.9089257339128562
TPCH test speedup 5.074871454555268
TPCH skew test speedup 4.735143949538334
Epoch 24/300 |loss: 0.002015| train set 5.293x speedup, test set 4.735x speedup, val set 4.715x speedup, step: 11
JOB test speedup 2.838259463221933
TPCH test speedup 5.031017409482993
TPCH skew test speedup 4.789256509554064
Epoch 25/300 |loss: 0.002206| train set 5.352x speedup, test set 4.789x speedup, val set 4.945x speedup, step: 12
JOB test speedup 2.8926619042887376
TPCH test speedup 5.108197377118697
TPCH skew test speedup 4.969201208122463
Epoch 26/300 |loss: 0.001805| train set 5.281x speedup, test set 4.969x speedup, val set 4.690x speedup, step: 13
JOB test speedup 2.891546288910687
TPCH test speedup 5.129259272714366
TPCH skew test speedup 4.767987476954912
Epoch 27/300 |loss: 0.002088| train set 5.210x speedup, test set 4.768x speedup, val set 4.825x speedup, step: 14
JOB test speedup 2.8933069371159137
TPCH test speedup 5.032452802487875
TPCH skew test speedup 4.6772069939949485
Epoch 28/300 |loss: 0.001967| train set 5.272x speedup, test set 4.677x speedup, val set 4.765x speedup, step: 15
JOB test speedup 2.813618107787468
TPCH test speedup 5.118313955702561
TPCH skew test speedup 4.761583378178445
Epoch 29/300 |loss: 0.001942| train set 5.323x speedup, test set 4.762x speedup, val set 4.909x speedup, step: 16
JOB test speedup 2.92044072835988
TPCH test speedup 5.0364175433632665
TPCH skew test speedup 4.793171584042438
Epoch 30/300 |loss: 0.001779| train set 5.362x speedup, test set 4.793x speedup, val set 4.942x speedup, step: 17
JOB test speedup 2.917033690868838
TPCH test speedup 4.717069403610592
TPCH skew test speedup 4.491404888026318
Epoch 31/300 |loss: 0.001707| train set 5.278x speedup, test set 4.491x speedup, val set 4.679x speedup, step: 18
JOB test speedup 2.8640711848537914
TPCH test speedup 4.983712428442943
TPCH skew test speedup 4.722505298004412
Epoch 32/300 |loss: 0.001653| train set 5.315x speedup, test set 4.723x speedup, val set 4.998x speedup, step: 19
JOB test speedup 2.899739284518381
TPCH test speedup 4.953462053638395
TPCH skew test speedup 4.938823133577747
Epoch 33/300 |loss: 0.001813| train set 5.227x speedup, test set 4.939x speedup, val set 4.944x speedup, step: 20
JOB test speedup 2.9060519033756806
TPCH test speedup 3.5814027643196913
TPCH skew test speedup 3.7885395473925736
Epoch 34/300 |loss: 0.001603| train set 5.303x speedup, test set 3.789x speedup, val set 4.863x speedup, step: 21
JOB test speedup 2.816335794521262
TPCH test speedup 5.129673421811274
TPCH skew test speedup 4.7673719731028354
Epoch 35/300 |loss: 0.001505| train set 5.286x speedup, test set 4.767x speedup, val set 4.781x speedup, step: 22
JOB test speedup 2.8540408901503285
TPCH test speedup 4.896788909230861
TPCH skew test speedup 4.492779687007404
Epoch 36/300 |loss: 0.001633| train set 5.321x speedup, test set 4.493x speedup, val set 4.821x speedup, step: 23
JOB test speedup 2.8557106948656252
TPCH test speedup 5.072868598803137
TPCH skew test speedup 4.6955879942943275
Epoch 37/300 |loss: 0.001621| train set 5.381x speedup, test set 4.696x speedup, val set 4.827x speedup, step: 24
JOB test speedup 2.9913775489788335
TPCH test speedup 5.074229071497432
TPCH skew test speedup 4.719891314974764
Epoch 38/300 |loss: 0.001295| train set 5.323x speedup, test set 4.720x speedup, val set 4.846x speedup, step: 25
JOB test speedup 2.969919450415345
TPCH test speedup 3.8258691755997445
TPCH skew test speedup 3.5610356740170537
Epoch 39/300 |loss: 0.001538| train set 4.371x speedup, test set 3.561x speedup, val set 3.523x speedup, step: 26
JOB test speedup 2.9080469910489852
TPCH test speedup 3.5783320042974647
TPCH skew test speedup 3.4306305493756257
Epoch 40/300 |loss: 0.001327| train set 4.937x speedup, test set 3.431x speedup, val set 3.381x speedup, step: 27
JOB test speedup 2.7144484039135555
TPCH test speedup 5.072868598803137
TPCH skew test speedup 4.6955879942943275
Epoch 41/300 |loss: 0.001439| train set 5.289x speedup, test set 4.696x speedup, val set 4.795x speedup, step: 28
JOB test speedup 2.834417422009252
TPCH test speedup 5.039977160327918
TPCH skew test speedup 4.888565075268818
Epoch 42/300 |loss: 0.001290| train set 5.367x speedup, test set 4.889x speedup, val set 4.855x speedup, step: 29
JOB test speedup 2.846888241807985
TPCH test speedup 5.255904933627815
TPCH skew test speedup 4.87531447744396
Epoch 43/300 |loss: 0.001248| train set 5.318x speedup, test set 4.875x speedup, val set 4.746x speedup, step: 30
JOB test speedup 2.8269253538387495
TPCH test speedup 3.5031543086740493
TPCH skew test speedup 3.3699801418468702
Epoch 44/300 |loss: 0.001328| train set 5.306x speedup, test set 3.370x speedup, val set 4.819x speedup, step: 31
JOB test speedup 2.8122101390496437
TPCH test speedup 4.647266921649176
TPCH skew test speedup 4.606513667204311
Epoch 45/300 |loss: 0.001130| train set 5.320x speedup, test set 4.607x speedup, val set 4.798x speedup, step: 32
JOB test speedup 2.8539068038465496
TPCH test speedup 5.137858780804226
TPCH skew test speedup 4.799847825965902
Epoch 46/300 |loss: 0.001106| train set 5.322x speedup, test set 4.800x speedup, val set 4.868x speedup, step: 33
JOB test speedup 2.8390192543836337
TPCH test speedup 5.025045949975109
TPCH skew test speedup 4.832152814167358
Epoch 47/300 |loss: 0.001088| train set 5.382x speedup, test set 4.832x speedup, val set 4.840x speedup, step: 34
JOB test speedup 2.8416114528035785
TPCH test speedup 4.981541388341938
TPCH skew test speedup 4.925522540048043
Epoch 48/300 |loss: 0.001018| train set 5.262x speedup, test set 4.926x speedup, val set 4.397x speedup, step: 35
JOB test speedup 2.7988922682012807
TPCH test speedup 4.874343203411983
TPCH skew test speedup 4.798203089996545
Epoch 49/300 |loss: 0.001152| train set 5.347x speedup, test set 4.798x speedup, val set 4.526x speedup, step: 36
JOB test speedup 2.8455784324488027
TPCH test speedup 3.4949873891776093
TPCH skew test speedup 3.5895653815112443
Epoch 50/300 |loss: 0.001027| train set 5.291x speedup, test set 3.590x speedup, val set 4.668x speedup, step: 37
JOB test speedup 2.76985614871071
TPCH test speedup 5.102576779737996
TPCH skew test speedup 4.973713237675247
Epoch 51/300 |loss: 0.001069| train set 5.280x speedup, test set 4.974x speedup, val set 4.832x speedup, step: 38
JOB test speedup 2.9046741620744427
TPCH test speedup 4.39528758817689
TPCH skew test speedup 4.525614493560454
Epoch 52/300 |loss: 0.000989| train set 5.303x speedup, test set 4.526x speedup, val set 4.464x speedup, step: 39
JOB test speedup 2.642151511531711
TPCH test speedup 4.727356355300772
TPCH skew test speedup 4.5526434456686315
Epoch 53/300 |loss: 0.000986| train set 5.288x speedup, test set 4.553x speedup, val set 4.831x speedup, step: 40
JOB test speedup 2.9602364576763454
TPCH test speedup 4.470685132411949
TPCH skew test speedup 4.5283456869707885
Epoch 54/300 |loss: 0.000900| train set 5.286x speedup, test set 4.528x speedup, val set 4.752x speedup, step: 41
JOB test speedup 3.018802728652079
TPCH test speedup 5.259801609326736
TPCH skew test speedup 4.879495428866659
Epoch 55/300 |loss: 0.000951| train set 5.320x speedup, test set 4.879x speedup, val set 4.850x speedup, step: 42
JOB test speedup 2.8760970614874104
TPCH test speedup 4.511058990848998
TPCH skew test speedup 4.592391430418825
Epoch 56/300 |loss: 0.000931| train set 5.323x speedup, test set 4.592x speedup, val set 4.753x speedup, step: 43
JOB test speedup 2.8581007063419324
TPCH test speedup 4.587533812659213
TPCH skew test speedup 4.426358812872313
Epoch 57/300 |loss: 0.000905| train set 5.316x speedup, test set 4.426x speedup, val set 4.803x speedup, step: 44
JOB test speedup 3.0246425060421758
TPCH test speedup 4.826682771657673
TPCH skew test speedup 4.632951048066773
Epoch 58/300 |loss: 0.000990| train set 5.369x speedup, test set 4.633x speedup, val set 4.718x speedup, step: 45
JOB test speedup 2.792794056232004
TPCH test speedup 5.0955701827012145
TPCH skew test speedup 4.946122161157419
Epoch 59/300 |loss: 0.001111| train set 5.321x speedup, test set 4.946x speedup, val set 4.831x speedup, step: 46
JOB test speedup 3.040460482814597
TPCH test speedup 5.063992350037274
TPCH skew test speedup 5.079016454828986
Epoch 60/300 |loss: 0.000942| train set 5.334x speedup, test set 5.079x speedup, val set 4.741x speedup, step: 47
JOB test speedup 2.864509843428977
TPCH test speedup 4.882050214893704
TPCH skew test speedup 4.874078831611158
Epoch 61/300 |loss: 0.000845| train set 5.310x speedup, test set 4.874x speedup, val set 4.756x speedup, step: 48
JOB test speedup 2.9612944469356584
TPCH test speedup 5.293818924330134
TPCH skew test speedup 5.009820480182685
Epoch 62/300 |loss: 0.000971| train set 5.268x speedup, test set 5.010x speedup, val set 4.786x speedup, step: 49
JOB test speedup 2.8222560615680368
TPCH test speedup 4.712020000957135
TPCH skew test speedup 4.550086839395812
Epoch 63/300 |loss: 0.000923| train set 5.370x speedup, test set 4.550x speedup, val set 4.747x speedup, step: 50
early stopping at epoch 63
Training per epoch cost 2.377 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.325s, pg runtime 0.072s, speedup 0.221x
02, opt runtime 0.183s, model runtime 0.186s, pg runtime 0.189s, speedup 1.017x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.883s, pg runtime 0.802s, speedup 0.908x
07, opt runtime 0.919s, model runtime 4.195s, pg runtime 0.942s, speedup 0.224x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 0.313s, model runtime 0.386s, pg runtime 0.313s, speedup 0.811x
16, opt runtime 0.441s, model runtime 0.458s, pg runtime 0.453s, speedup 0.991x
17, opt runtime 0.327s, model runtime 0.327s, pg runtime 0.354s, speedup 1.083x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.061s, model runtime 0.084s, pg runtime 0.086s, speedup 1.022x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.341s, pg runtime 0.891s, speedup 2.617x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.112s, pg runtime 0.112s, speedup 1.000x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.196s, pg runtime 0.137s, speedup 0.699x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 2.411s, pg runtime 0.965s, speedup 0.400x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 18.665s, pg runtime 18.665s, speedup 1.000x
02, opt runtime 25.356s, model runtime 25.356s, pg runtime 25.356s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.525s, pg runtime 1.356s, speedup 0.889x
20, opt runtime 1.340s, model runtime 1.540s, pg runtime 1.340s, speedup 0.870x
21, opt runtime 6.281s, model runtime 22.977s, pg runtime 6.281s, speedup 0.273x
22, opt runtime 25.034s, model runtime 31.752s, pg runtime 25.034s, speedup 0.788x
23, opt runtime 5.961s, model runtime 5.961s, pg runtime 31.210s, speedup 5.236x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.306s, model runtime 1.306s, pg runtime 1.306s, speedup 1.000x
26, opt runtime 1.342s, model runtime 1.342s, pg runtime 1.342s, speedup 1.000x
27, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
28, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
29, opt runtime 5.414s, model runtime 5.780s, pg runtime 5.414s, speedup 0.937x
30, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 35.538s, pg runtime 70.116s, speedup 1.973x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
36, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.210s, pg runtime 1.100s, speedup 0.909x
40, opt runtime 1.084s, model runtime 1.158s, pg runtime 1.155s, speedup 0.998x
========== TPCH skew
01, opt runtime 19.593s, model runtime 19.593s, pg runtime 19.593s, speedup 1.000x
02, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.235s, pg runtime 1.244s, speedup 1.008x
20, opt runtime 1.367s, model runtime 1.628s, pg runtime 1.367s, speedup 0.840x
21, opt runtime 9.313s, model runtime 29.211s, pg runtime 9.313s, speedup 0.319x
22, opt runtime 26.254s, model runtime 32.932s, pg runtime 26.254s, speedup 0.797x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
26, opt runtime 1.187s, model runtime 1.187s, pg runtime 1.187s, speedup 1.000x
27, opt runtime 7.213s, model runtime 7.213s, pg runtime 7.213s, speedup 1.000x
28, opt runtime 7.284s, model runtime 7.529s, pg runtime 7.529s, speedup 1.000x
29, opt runtime 5.132s, model runtime 5.567s, pg runtime 5.132s, speedup 0.922x
30, opt runtime 5.219s, model runtime 5.502s, pg runtime 5.219s, speedup 0.948x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 38.067s, pg runtime 68.524s, speedup 1.800x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
36, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.958s, pg runtime 0.893s, speedup 0.932x
40, opt runtime 1.004s, model runtime 1.166s, pg runtime 1.004s, speedup 0.861x
====================
JOB best validation speedup epoch: 14, train speedup 5.253, test speedup 2.502, val speedup 4.961
TPCH best validation speedup epoch: 14, train speedup 5.253, test speedup 5.067, val speedup 4.961
TPCH Skew best validation speedup epoch: 14, train speedup 5.253, test speedup 4.812, val speedup 4.961
execution cost 0:03:39.075642
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1c.sql' '10b.sql' '11b.sql' '12a.sql' '13d.sql' '14c.sql' '15d.sql'
 '16a.sql' '17a.sql' '18a.sql' '19a.sql' '2b.sql' '20b.sql' '21a.sql'
 '22b.sql' '23c.sql' '24a.sql' '25a.sql' '26c.sql' '27a.sql' '28a.sql'
 '29a.sql' '3c.sql' '30b.sql' '31b.sql' '32a.sql' '33a.sql' '4c.sql'
 '5b.sql' '6c.sql' '7a.sql' '8a.sql' '9a.sql']
load JOB succ
load TPCH...
[0, 1, 3, 6, 7, 9] [4, 2] [5, 8]
[0, 3, 6, 7, 8, 9] [5, 1] [2, 4]
[0, 2, 3, 4, 8, 9] [1, 5] [7, 6]
[1, 2, 3, 5, 7, 8] [4, 0] [9, 6]
[0, 3, 4, 7, 8, 9] [1, 6] [2, 5]
[0, 1, 2, 6, 8, 9] [4, 5] [3, 7]
[2, 3, 4, 6, 7, 9] [1, 0] [5, 8]
[0, 2, 3, 6, 7, 9] [4, 1] [5, 8]
[0, 2, 3, 7, 8, 9] [1, 6] [5, 4]
[0, 1, 4, 6, 8, 9] [5, 2] [7, 3]
[0, 2, 5, 7, 8, 9] [3, 4] [1, 6]
[0, 3, 5, 6, 7, 9] [2, 8] [4, 1]
[0, 1, 2, 3, 8, 9] [7, 6] [4, 5]
[0, 1, 2, 4, 5, 9] [8, 3] [6, 7]
[2, 4, 5, 6, 7, 9] [0, 3] [1, 8]
[1, 2, 3, 7, 8, 9] [5, 6] [4, 0]
[0, 1, 2, 6, 8, 9] [3, 5] [4, 7]
[0, 2, 3, 4, 5, 8] [7, 6] [9, 1]
[0, 1, 3, 6, 8, 9] [4, 2] [5, 7]
[0, 1, 2, 3, 6, 7] [8, 9] [4, 5]
load TPCH succ
load TPCH_Skew...
[0, 1, 3, 4, 5, 8] [9, 6] [7, 2]
[1, 4, 5, 6, 7, 8] [3, 2] [9, 0]
[2, 3, 5, 6, 8, 9] [0, 1] [4, 7]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
[0, 1, 2, 3, 5, 8] [6, 7] [4, 9]
[2, 3, 4, 5, 7, 9] [0, 1] [6, 8]
[0, 2, 3, 7, 8, 9] [5, 1] [6, 4]
[1, 3, 4, 5, 8, 9] [2, 7] [0, 6]
[0, 1, 3, 6, 7, 9] [4, 8] [2, 5]
[0, 3, 6, 7, 8, 9] [1, 4] [5, 2]
[1, 3, 4, 7, 8, 9] [5, 2] [0, 6]
[1, 2, 3, 4, 6, 8] [5, 7] [0, 9]
[1, 2, 6, 7, 8, 9] [5, 4] [3, 0]
[0, 4, 5, 6, 8, 9] [3, 1] [2, 7]
[0, 4, 5, 6, 8, 9] [7, 1] [3, 2]
[0, 1, 3, 4, 5, 6] [7, 8] [2, 9]
[0, 1, 2, 5, 7, 9] [8, 6] [3, 4]
[0, 1, 2, 5, 6, 9] [3, 4] [8, 7]
[1, 2, 3, 4, 6, 8] [5, 7] [9, 0]
[0, 4, 5, 6, 7, 8] [3, 9] [1, 2]
load TPCH Skew succ
construct training samples cost 0:00:01.116059, and there are 9408 training samples
in channel 9
JOB test speedup 0.9482992191637157
TPCH test speedup 2.5439851095259973
TPCH skew test speedup 2.530704080347007
Epoch 0/300 |loss: 0.037324| train set 2.540x speedup, test set 2.531x speedup, val set 2.311x speedup, step: 1
JOB test speedup 2.2359935842095475
TPCH test speedup 2.7387836432096875
TPCH skew test speedup 2.6194938061246753
Epoch 1/300 |loss: 0.017553| train set 2.599x speedup, test set 2.619x speedup, val set 2.572x speedup, step: 2
JOB test speedup 1.0144873321757293
TPCH test speedup 3.0634425297173395
TPCH skew test speedup 2.882106618673675
Epoch 2/300 |loss: 0.011404| train set 2.956x speedup, test set 2.882x speedup, val set 2.969x speedup, step: 3
JOB test speedup 0.9909548599750216
TPCH test speedup 3.062977800942175
TPCH skew test speedup 2.7938628660064087
Epoch 3/300 |loss: 0.008256| train set 2.936x speedup, test set 2.794x speedup, val set 2.954x speedup, step: 4
JOB test speedup 0.5431119769408381
TPCH test speedup 4.623759080116466
TPCH skew test speedup 4.172889454548168
Epoch 4/300 |loss: 0.006948| train set 4.188x speedup, test set 4.173x speedup, val set 4.567x speedup, step: 1
JOB test speedup 0.5653598868595101
TPCH test speedup 4.378517653747003
TPCH skew test speedup 4.524300847765975
Epoch 5/300 |loss: 0.007762| train set 3.931x speedup, test set 4.524x speedup, val set 4.374x speedup, step: 2
JOB test speedup 1.105082733768536
TPCH test speedup 4.622825162971089
TPCH skew test speedup 4.822950112061931
Epoch 6/300 |loss: 0.005351| train set 4.122x speedup, test set 4.823x speedup, val set 4.483x speedup, step: 3
JOB test speedup 1.073951106483679
TPCH test speedup 4.306039340299115
TPCH skew test speedup 4.050955334971672
Epoch 7/300 |loss: 0.004692| train set 3.910x speedup, test set 4.051x speedup, val set 4.081x speedup, step: 4
JOB test speedup 0.576873869183983
TPCH test speedup 4.521473546285807
TPCH skew test speedup 4.764696543633799
Epoch 8/300 |loss: 0.005222| train set 4.533x speedup, test set 4.765x speedup, val set 4.496x speedup, step: 5
JOB test speedup 0.5668288787451207
TPCH test speedup 4.56920509670581
TPCH skew test speedup 4.171444573328312
Epoch 9/300 |loss: 0.004299| train set 4.524x speedup, test set 4.171x speedup, val set 4.284x speedup, step: 6
JOB test speedup 2.739868981559823
TPCH test speedup 4.357201824901534
TPCH skew test speedup 4.131204052470126
Epoch 10/300 |loss: 0.004182| train set 4.346x speedup, test set 4.131x speedup, val set 4.203x speedup, step: 7
JOB test speedup 3.0601349554221304
TPCH test speedup 5.075144965524769
TPCH skew test speedup 4.830073944574262
Epoch 11/300 |loss: 0.003828| train set 5.227x speedup, test set 4.830x speedup, val set 4.982x speedup, step: 8
JOB test speedup 1.123463524087302
TPCH test speedup 5.065656763980343
TPCH skew test speedup 4.7403647993308535
Epoch 12/300 |loss: 0.003273| train set 4.907x speedup, test set 4.740x speedup, val set 4.671x speedup, step: 9
JOB test speedup 1.086146470811868
TPCH test speedup 4.5918095433383
TPCH skew test speedup 4.1732294189834045
Epoch 13/300 |loss: 0.003352| train set 4.193x speedup, test set 4.173x speedup, val set 4.124x speedup, step: 10
JOB test speedup 2.6390422905380673
TPCH test speedup 4.683451833150451
TPCH skew test speedup 4.62380352667901
Epoch 14/300 |loss: 0.003430| train set 5.258x speedup, test set 4.624x speedup, val set 4.853x speedup, step: 1
JOB test speedup 3.0895200382667527
TPCH test speedup 5.152052819057621
TPCH skew test speedup 4.761636279858041
Epoch 15/300 |loss: 0.003247| train set 5.064x speedup, test set 4.762x speedup, val set 4.699x speedup, step: 2
JOB test speedup 1.079475832127372
TPCH test speedup 5.218004818022519
TPCH skew test speedup 4.746563273145709
Epoch 16/300 |loss: 0.002762| train set 5.064x speedup, test set 4.747x speedup, val set 4.745x speedup, step: 3
JOB test speedup 2.9155032990287912
TPCH test speedup 5.012153694629007
TPCH skew test speedup 4.694388703789571
Epoch 17/300 |loss: 0.003330| train set 4.632x speedup, test set 4.694x speedup, val set 4.495x speedup, step: 4
JOB test speedup 2.6628424567596047
TPCH test speedup 5.117330282021885
TPCH skew test speedup 4.761774052700928
Epoch 18/300 |loss: 0.002786| train set 5.157x speedup, test set 4.762x speedup, val set 4.710x speedup, step: 5
JOB test speedup 2.923605057759799
TPCH test speedup 5.321357739110726
TPCH skew test speedup 4.894855129888563
Epoch 19/300 |loss: 0.002637| train set 5.309x speedup, test set 4.895x speedup, val set 4.668x speedup, step: 6
JOB test speedup 2.8900539748719054
TPCH test speedup 3.316156489403367
TPCH skew test speedup 3.2285582188111723
Epoch 20/300 |loss: 0.002448| train set 4.979x speedup, test set 3.229x speedup, val set 3.669x speedup, step: 7
JOB test speedup 2.3468087144157477
TPCH test speedup 4.803856366205629
TPCH skew test speedup 4.667337708185263
Epoch 21/300 |loss: 0.002653| train set 4.718x speedup, test set 4.667x speedup, val set 4.634x speedup, step: 8
JOB test speedup 2.90271114431911
TPCH test speedup 5.0302580100230445
TPCH skew test speedup 4.764959659691504
Epoch 22/300 |loss: 0.002579| train set 5.215x speedup, test set 4.765x speedup, val set 4.808x speedup, step: 9
JOB test speedup 2.452283525454
TPCH test speedup 5.028646945505783
TPCH skew test speedup 4.763865712556433
Epoch 23/300 |loss: 0.002146| train set 5.215x speedup, test set 4.764x speedup, val set 4.818x speedup, step: 10
JOB test speedup 2.757671061885346
TPCH test speedup 4.725750535184008
TPCH skew test speedup 4.635830369317009
Epoch 24/300 |loss: 0.001981| train set 5.328x speedup, test set 4.636x speedup, val set 4.957x speedup, step: 1
JOB test speedup 2.9553760248921104
TPCH test speedup 5.028646945505783
TPCH skew test speedup 4.706827604286952
Epoch 25/300 |loss: 0.002248| train set 5.283x speedup, test set 4.707x speedup, val set 4.946x speedup, step: 2
JOB test speedup 2.984342174731526
TPCH test speedup 4.8798878890687005
TPCH skew test speedup 4.877661633332659
Epoch 26/300 |loss: 0.001826| train set 5.281x speedup, test set 4.878x speedup, val set 4.821x speedup, step: 3
JOB test speedup 2.658138420946698
TPCH test speedup 5.093898444121016
TPCH skew test speedup 4.78429679039445
Epoch 27/300 |loss: 0.002143| train set 5.244x speedup, test set 4.784x speedup, val set 4.876x speedup, step: 4
JOB test speedup 3.0875830349831817
TPCH test speedup 4.839124275650331
TPCH skew test speedup 4.593079638197147
Epoch 28/300 |loss: 0.002176| train set 5.241x speedup, test set 4.593x speedup, val set 4.738x speedup, step: 5
JOB test speedup 2.999649197073114
TPCH test speedup 4.956278989827846
TPCH skew test speedup 4.6982559255716705
Epoch 29/300 |loss: 0.001996| train set 5.298x speedup, test set 4.698x speedup, val set 4.838x speedup, step: 6
JOB test speedup 3.0082318802920605
TPCH test speedup 5.030656325571767
TPCH skew test speedup 4.764344937268209
Epoch 30/300 |loss: 0.001862| train set 5.317x speedup, test set 4.764x speedup, val set 4.911x speedup, step: 7
JOB test speedup 3.1228360126824515
TPCH test speedup 5.02950595407238
TPCH skew test speedup 4.76541239755334
Epoch 31/300 |loss: 0.001688| train set 5.255x speedup, test set 4.765x speedup, val set 4.685x speedup, step: 8
JOB test speedup 3.0298147485848816
TPCH test speedup 5.02950595407238
TPCH skew test speedup 4.76541239755334
Epoch 32/300 |loss: 0.001725| train set 5.352x speedup, test set 4.765x speedup, val set 4.878x speedup, step: 9
JOB test speedup 3.0270987349082588
TPCH test speedup 4.782431377357094
TPCH skew test speedup 4.64254261129032
Epoch 33/300 |loss: 0.001846| train set 5.193x speedup, test set 4.643x speedup, val set 4.759x speedup, step: 10
JOB test speedup 3.127918367019961
TPCH test speedup 3.469317575659158
TPCH skew test speedup 3.385596911078906
Epoch 34/300 |loss: 0.001662| train set 5.133x speedup, test set 3.386x speedup, val set 3.666x speedup, step: 11
JOB test speedup 3.001554475487446
TPCH test speedup 5.128477325105408
TPCH skew test speedup 4.76844079039696
Epoch 35/300 |loss: 0.001611| train set 5.365x speedup, test set 4.768x speedup, val set 4.831x speedup, step: 12
JOB test speedup 3.150338271592989
TPCH test speedup 5.01978286080308
TPCH skew test speedup 4.678114184740212
Epoch 36/300 |loss: 0.001688| train set 5.210x speedup, test set 4.678x speedup, val set 4.742x speedup, step: 13
JOB test speedup 3.154752964982253
TPCH test speedup 4.975621932082946
TPCH skew test speedup 4.693247762208866
Epoch 37/300 |loss: 0.001646| train set 5.322x speedup, test set 4.693x speedup, val set 4.744x speedup, step: 14
JOB test speedup 3.130807814036779
TPCH test speedup 4.996244500640328
TPCH skew test speedup 4.781248230504832
Epoch 38/300 |loss: 0.001310| train set 5.274x speedup, test set 4.781x speedup, val set 4.830x speedup, step: 15
JOB test speedup 3.102330681436458
TPCH test speedup 3.8253206681645384
TPCH skew test speedup 3.5616085726272706
Epoch 39/300 |loss: 0.001698| train set 4.966x speedup, test set 3.562x speedup, val set 3.514x speedup, step: 16
JOB test speedup 3.0510783711951537
TPCH test speedup 3.618572471788142
TPCH skew test speedup 3.525471299082401
Epoch 40/300 |loss: 0.001440| train set 5.130x speedup, test set 3.525x speedup, val set 3.349x speedup, step: 17
JOB test speedup 2.971538607857493
TPCH test speedup 5.1287798595919245
TPCH skew test speedup 4.765824016032603
Epoch 41/300 |loss: 0.001410| train set 5.355x speedup, test set 4.766x speedup, val set 4.770x speedup, step: 18
JOB test speedup 2.9817334268923363
TPCH test speedup 5.229361323124406
TPCH skew test speedup 5.092932329965639
Epoch 42/300 |loss: 0.001406| train set 5.316x speedup, test set 5.093x speedup, val set 4.712x speedup, step: 19
JOB test speedup 3.180733772718887
TPCH test speedup 3.64096435005025
TPCH skew test speedup 3.4871094509903027
Epoch 43/300 |loss: 0.001426| train set 5.270x speedup, test set 3.487x speedup, val set 4.701x speedup, step: 20
JOB test speedup 3.113049862350973
TPCH test speedup 3.60742182421782
TPCH skew test speedup 3.6387334885393443
Epoch 44/300 |loss: 0.001515| train set 4.891x speedup, test set 3.639x speedup, val set 3.389x speedup, step: 21
JOB test speedup 3.103957712325577
TPCH test speedup 4.953000905025145
TPCH skew test speedup 4.894974962256397
Epoch 45/300 |loss: 0.001208| train set 5.370x speedup, test set 4.895x speedup, val set 4.907x speedup, step: 22
JOB test speedup 2.989629799364521
TPCH test speedup 5.276055414358344
TPCH skew test speedup 4.839790910068839
Epoch 46/300 |loss: 0.001235| train set 5.254x speedup, test set 4.840x speedup, val set 4.769x speedup, step: 23
JOB test speedup 2.999452790776038
TPCH test speedup 5.172249796673795
TPCH skew test speedup 5.164038265082182
Epoch 47/300 |loss: 0.001285| train set 5.378x speedup, test set 5.164x speedup, val set 4.946x speedup, step: 24
JOB test speedup 2.9574416488835378
TPCH test speedup 5.191165962137835
TPCH skew test speedup 5.178488031138912
Epoch 48/300 |loss: 0.001079| train set 5.287x speedup, test set 5.178x speedup, val set 4.880x speedup, step: 25
JOB test speedup 2.1870616376011203
TPCH test speedup 5.106108438925043
TPCH skew test speedup 4.978021186331635
Epoch 49/300 |loss: 0.001118| train set 5.334x speedup, test set 4.978x speedup, val set 4.637x speedup, step: 26
JOB test speedup 2.9776014332239846
TPCH test speedup 4.395116938075497
TPCH skew test speedup 4.402978794761356
Epoch 50/300 |loss: 0.001108| train set 5.324x speedup, test set 4.403x speedup, val set 4.841x speedup, step: 27
JOB test speedup 3.1161145272732096
TPCH test speedup 5.045577934490912
TPCH skew test speedup 4.895785653354518
Epoch 51/300 |loss: 0.001192| train set 5.315x speedup, test set 4.896x speedup, val set 4.608x speedup, step: 28
JOB test speedup 3.114833497782145
TPCH test speedup 5.146061414159106
TPCH skew test speedup 5.193881172830259
Epoch 52/300 |loss: 0.001002| train set 5.298x speedup, test set 5.194x speedup, val set 4.870x speedup, step: 29
JOB test speedup 3.0025040491222845
TPCH test speedup 5.235195889245334
TPCH skew test speedup 5.09735986652726
Epoch 53/300 |loss: 0.001183| train set 5.345x speedup, test set 5.097x speedup, val set 4.713x speedup, step: 30
JOB test speedup 2.7990503722797277
TPCH test speedup 4.944350664765201
TPCH skew test speedup 4.889377251094913
Epoch 54/300 |loss: 0.001077| train set 5.365x speedup, test set 4.889x speedup, val set 4.909x speedup, step: 31
JOB test speedup 2.977972077138672
TPCH test speedup 5.133892594999187
TPCH skew test speedup 5.09556476613074
Epoch 55/300 |loss: 0.001005| train set 5.372x speedup, test set 5.096x speedup, val set 4.743x speedup, step: 32
JOB test speedup 3.0051529117079534
TPCH test speedup 5.088896285922798
TPCH skew test speedup 5.110675607034995
Epoch 56/300 |loss: 0.001001| train set 5.263x speedup, test set 5.111x speedup, val set 4.785x speedup, step: 33
JOB test speedup 2.9887259036247884
TPCH test speedup 5.100424604882686
TPCH skew test speedup 5.114331085250051
Epoch 57/300 |loss: 0.000992| train set 5.359x speedup, test set 5.114x speedup, val set 4.691x speedup, step: 34
JOB test speedup 2.698266814423366
TPCH test speedup 5.237373763494663
TPCH skew test speedup 5.097908539834257
Epoch 58/300 |loss: 0.000958| train set 5.348x speedup, test set 5.098x speedup, val set 4.815x speedup, step: 35
JOB test speedup 3.0007909511754502
TPCH test speedup 5.007106126821257
TPCH skew test speedup 4.947429929664465
Epoch 59/300 |loss: 0.001206| train set 5.370x speedup, test set 4.947x speedup, val set 4.688x speedup, step: 36
JOB test speedup 2.596133410887778
TPCH test speedup 4.254326320324932
TPCH skew test speedup 4.143113968456177
Epoch 60/300 |loss: 0.000939| train set 5.334x speedup, test set 4.143x speedup, val set 4.557x speedup, step: 37
JOB test speedup 2.899405134279403
TPCH test speedup 5.049629471178686
TPCH skew test speedup 4.978195813033829
Epoch 61/300 |loss: 0.000907| train set 5.272x speedup, test set 4.978x speedup, val set 4.608x speedup, step: 38
JOB test speedup 2.9045587968533515
TPCH test speedup 5.181664625348985
TPCH skew test speedup 5.174046790440556
Epoch 62/300 |loss: 0.001017| train set 5.381x speedup, test set 5.174x speedup, val set 4.548x speedup, step: 39
JOB test speedup 2.990462077304531
TPCH test speedup 5.115392000103443
TPCH skew test speedup 5.081675988601759
Epoch 63/300 |loss: 0.000921| train set 5.263x speedup, test set 5.082x speedup, val set 4.823x speedup, step: 40
JOB test speedup 2.712122803952538
TPCH test speedup 3.559965111591978
TPCH skew test speedup 3.573561310565798
Epoch 64/300 |loss: 0.000847| train set 5.372x speedup, test set 3.574x speedup, val set 4.705x speedup, step: 41
JOB test speedup 2.980402475531923
TPCH test speedup 4.970118761793125
TPCH skew test speedup 4.8960069689365655
Epoch 65/300 |loss: 0.000858| train set 5.370x speedup, test set 4.896x speedup, val set 4.684x speedup, step: 42
JOB test speedup 3.0464928973779672
TPCH test speedup 5.091851597010776
TPCH skew test speedup 4.982524175308068
Epoch 66/300 |loss: 0.000862| train set 5.354x speedup, test set 4.983x speedup, val set 4.612x speedup, step: 43
JOB test speedup 3.1553610641218737
TPCH test speedup 5.232943383366843
TPCH skew test speedup 5.086054885467477
Epoch 67/300 |loss: 0.000897| train set 5.372x speedup, test set 5.086x speedup, val set 4.740x speedup, step: 44
JOB test speedup 3.0658485396105655
TPCH test speedup 5.2302902798131
TPCH skew test speedup 5.094700110724899
Epoch 68/300 |loss: 0.000826| train set 5.325x speedup, test set 5.095x speedup, val set 4.639x speedup, step: 45
JOB test speedup 2.9727299980673956
TPCH test speedup 5.132998789212358
TPCH skew test speedup 5.095667881508912
Epoch 69/300 |loss: 0.000975| train set 5.266x speedup, test set 5.096x speedup, val set 4.625x speedup, step: 46
JOB test speedup 3.12509206618455
TPCH test speedup 5.134196996144614
TPCH skew test speedup 5.0944473577656755
Epoch 70/300 |loss: 0.000835| train set 5.353x speedup, test set 5.094x speedup, val set 4.827x speedup, step: 47
JOB test speedup 2.940040354401394
TPCH test speedup 5.091397559158523
TPCH skew test speedup 5.052427903468793
Epoch 71/300 |loss: 0.000809| train set 5.249x speedup, test set 5.052x speedup, val set 4.689x speedup, step: 48
JOB test speedup 2.9870121521351454
TPCH test speedup 4.429758481215758
TPCH skew test speedup 4.395617825317116
Epoch 72/300 |loss: 0.000786| train set 5.274x speedup, test set 4.396x speedup, val set 4.817x speedup, step: 49
JOB test speedup 2.838251857699582
TPCH test speedup 5.298593515468817
TPCH skew test speedup 5.177415454269955
Epoch 73/300 |loss: 0.000835| train set 5.328x speedup, test set 5.177x speedup, val set 4.774x speedup, step: 50
JOB test speedup 3.0395945557019184
TPCH test speedup 5.068379792179435
TPCH skew test speedup 4.900360670139102
Epoch 74/300 |loss: 0.000772| train set 5.368x speedup, test set 4.900x speedup, val set 4.742x speedup, step: 51
JOB test speedup 3.1331323682284142
TPCH test speedup 3.6274547252899625
TPCH skew test speedup 3.596589022116062
Epoch 75/300 |loss: 0.000903| train set 5.317x speedup, test set 3.597x speedup, val set 3.313x speedup, step: 52
JOB test speedup 2.940450209811035
TPCH test speedup 5.036907540325588
TPCH skew test speedup 4.987099508801951
Epoch 76/300 |loss: 0.000820| train set 5.375x speedup, test set 4.987x speedup, val set 4.765x speedup, step: 53
JOB test speedup 2.9794950509269116
TPCH test speedup 5.237373763494663
TPCH skew test speedup 5.097908539834257
Epoch 77/300 |loss: 0.000690| train set 5.362x speedup, test set 5.098x speedup, val set 4.686x speedup, step: 54
JOB test speedup 3.001232250587489
TPCH test speedup 5.04049799208062
TPCH skew test speedup 4.899805460121187
Epoch 78/300 |loss: 0.000665| train set 5.383x speedup, test set 4.900x speedup, val set 4.646x speedup, step: 55
JOB test speedup 2.9736230897235787
TPCH test speedup 5.012929818577746
TPCH skew test speedup 4.915316469392823
Epoch 79/300 |loss: 0.000844| train set 5.299x speedup, test set 4.915x speedup, val set 4.695x speedup, step: 56
JOB test speedup 3.0297027069610483
TPCH test speedup 4.950929562897694
TPCH skew test speedup 4.89352225329259
Epoch 80/300 |loss: 0.000837| train set 5.348x speedup, test set 4.894x speedup, val set 4.572x speedup, step: 57
early stopping at epoch 80
Training per epoch cost 2.356 s
Optimal speedup on JOB test set is 3.967x
Optimal speedup on tpch test set is 5.508x
Optimal speedup on tpch skew test set is 5.284x
========== JOB
01, opt runtime 0.012s, model runtime 0.325s, pg runtime 0.072s, speedup 0.221x
02, opt runtime 0.183s, model runtime 0.196s, pg runtime 0.189s, speedup 0.967x
03, opt runtime 0.014s, model runtime 0.014s, pg runtime 0.014s, speedup 1.000x
04, opt runtime 0.348s, model runtime 0.484s, pg runtime 0.348s, speedup 0.718x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 4.238s, pg runtime 0.942s, speedup 0.222x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.959s, model runtime 6.722s, pg runtime 2.959s, speedup 0.440x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 0.463s, model runtime 0.463s, pg runtime 0.557s, speedup 1.203x
13, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 0.313s, model runtime 0.407s, pg runtime 0.313s, speedup 0.769x
16, opt runtime 0.441s, model runtime 0.474s, pg runtime 0.453s, speedup 0.957x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.599s, model runtime 2.601s, pg runtime 2.599s, speedup 0.999x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.061s, model runtime 0.069s, pg runtime 0.086s, speedup 1.250x
21, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
22, opt runtime 0.136s, model runtime 0.341s, pg runtime 0.891s, speedup 2.617x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
25, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
26, opt runtime 0.020s, model runtime 0.022s, pg runtime 0.020s, speedup 0.921x
27, opt runtime 0.060s, model runtime 0.096s, pg runtime 0.112s, speedup 1.171x
28, opt runtime 0.154s, model runtime 0.177s, pg runtime 0.154s, speedup 0.874x
29, opt runtime 0.136s, model runtime 0.209s, pg runtime 0.137s, speedup 0.653x
30, opt runtime 0.023s, model runtime 0.024s, pg runtime 0.023s, speedup 0.971x
31, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
32, opt runtime 1.315s, model runtime 1.494s, pg runtime 1.315s, speedup 0.880x
33, opt runtime 0.250s, model runtime 0.256s, pg runtime 0.250s, speedup 0.978x
========== TPCH
01, opt runtime 18.665s, model runtime 34.611s, pg runtime 18.665s, speedup 0.539x
02, opt runtime 25.356s, model runtime 38.255s, pg runtime 25.356s, speedup 0.663x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 29.763s, model runtime 29.763s, pg runtime 91.648s, speedup 3.079x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 7.110s, model runtime 7.110s, pg runtime 14.286s, speedup 2.009x
08, opt runtime 7.237s, model runtime 7.237s, pg runtime 17.708s, speedup 2.447x
09, opt runtime 4.881s, model runtime 4.881s, pg runtime 4.881s, speedup 1.000x
10, opt runtime 5.086s, model runtime 5.086s, pg runtime 5.086s, speedup 1.000x
11, opt runtime 25.043s, model runtime 25.043s, pg runtime 73.019s, speedup 2.916x
12, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 2.995s, model runtime 2.995s, pg runtime 14.646s, speedup 4.890x
15, opt runtime 47.518s, model runtime 47.518s, pg runtime 75.736s, speedup 1.594x
16, opt runtime 48.784s, model runtime 48.784s, pg runtime 78.349s, speedup 1.606x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 7.469s, model runtime 14.931s, pg runtime 23.223s, speedup 1.555x
19, opt runtime 1.309s, model runtime 1.309s, pg runtime 1.356s, speedup 1.036x
20, opt runtime 1.340s, model runtime 1.490s, pg runtime 1.340s, speedup 0.899x
21, opt runtime 6.281s, model runtime 22.977s, pg runtime 6.281s, speedup 0.273x
22, opt runtime 25.034s, model runtime 31.752s, pg runtime 25.034s, speedup 0.788x
23, opt runtime 5.961s, model runtime 9.875s, pg runtime 31.210s, speedup 3.161x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.306s, model runtime 1.418s, pg runtime 1.306s, speedup 0.921x
26, opt runtime 1.342s, model runtime 2.555s, pg runtime 1.342s, speedup 0.525x
27, opt runtime 7.066s, model runtime 7.355s, pg runtime 7.533s, speedup 1.024x
28, opt runtime 7.268s, model runtime 7.333s, pg runtime 7.268s, speedup 0.991x
29, opt runtime 5.414s, model runtime 5.414s, pg runtime 5.414s, speedup 1.000x
30, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
31, opt runtime 25.363s, model runtime 25.363s, pg runtime 611.327s, speedup 24.103x
32, opt runtime 24.706s, model runtime 24.706s, pg runtime 610.808s, speedup 24.723x
33, opt runtime 35.538s, model runtime 41.909s, pg runtime 70.116s, speedup 1.673x
34, opt runtime 39.191s, model runtime 43.993s, pg runtime 75.984s, speedup 1.727x
35, opt runtime 16.138s, model runtime 17.327s, pg runtime 501.793s, speedup 28.960x
36, opt runtime 16.438s, model runtime 19.535s, pg runtime 546.887s, speedup 27.995x
37, opt runtime 15.754s, model runtime 15.754s, pg runtime 15.754s, speedup 1.000x
38, opt runtime 13.961s, model runtime 13.961s, pg runtime 13.961s, speedup 1.000x
39, opt runtime 1.098s, model runtime 1.210s, pg runtime 1.100s, speedup 0.909x
40, opt runtime 1.084s, model runtime 1.158s, pg runtime 1.155s, speedup 0.998x
========== TPCH skew
01, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
02, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
03, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
04, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
05, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
06, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
07, opt runtime 6.528s, model runtime 6.528s, pg runtime 12.078s, speedup 1.850x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 3.892s, model runtime 3.892s, pg runtime 3.892s, speedup 1.000x
10, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.755s, model runtime 24.755s, pg runtime 69.653s, speedup 2.814x
13, opt runtime 2.748s, model runtime 2.748s, pg runtime 11.962s, speedup 4.352x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 51.456s, model runtime 51.456s, pg runtime 93.781s, speedup 1.823x
16, opt runtime 48.088s, model runtime 48.088s, pg runtime 77.369s, speedup 1.609x
17, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
18, opt runtime 5.511s, model runtime 5.511s, pg runtime 14.247s, speedup 2.585x
19, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.244s, speedup 1.114x
20, opt runtime 1.367s, model runtime 1.474s, pg runtime 1.367s, speedup 0.928x
21, opt runtime 9.313s, model runtime 29.211s, pg runtime 9.313s, speedup 0.319x
22, opt runtime 26.254s, model runtime 32.932s, pg runtime 26.254s, speedup 0.797x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.420s, model runtime 1.837s, pg runtime 1.420s, speedup 0.773x
26, opt runtime 1.187s, model runtime 1.392s, pg runtime 1.187s, speedup 0.852x
27, opt runtime 7.213s, model runtime 7.295s, pg runtime 7.213s, speedup 0.989x
28, opt runtime 7.284s, model runtime 7.460s, pg runtime 7.529s, speedup 1.009x
29, opt runtime 5.132s, model runtime 5.132s, pg runtime 5.132s, speedup 1.000x
30, opt runtime 5.219s, model runtime 5.219s, pg runtime 5.219s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.152s, model runtime 25.152s, pg runtime 613.332s, speedup 24.385x
33, opt runtime 37.989s, model runtime 42.439s, pg runtime 68.524s, speedup 1.615x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 14.422s, model runtime 14.422s, pg runtime 497.542s, speedup 34.499x
36, opt runtime 15.980s, model runtime 15.980s, pg runtime 504.239s, speedup 31.555x
37, opt runtime 23.059s, model runtime 23.059s, pg runtime 23.059s, speedup 1.000x
38, opt runtime 23.956s, model runtime 23.956s, pg runtime 23.956s, speedup 1.000x
39, opt runtime 0.853s, model runtime 0.958s, pg runtime 0.893s, speedup 0.932x
40, opt runtime 1.004s, model runtime 1.166s, pg runtime 1.004s, speedup 0.861x
====================
JOB best validation speedup epoch: 24, train speedup 5.328, test speedup 2.758, val speedup 4.957
TPCH best validation speedup epoch: 24, train speedup 5.328, test speedup 4.726, val speedup 4.957
TPCH Skew best validation speedup epoch: 24, train speedup 5.328, test speedup 4.636, val speedup 4.957
execution cost 0:04:32.168391
==================================================
