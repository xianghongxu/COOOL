all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:02.253067, and there are 13720 training samples
in channel 9
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.2004900640191734
Epoch 0/300 |loss: 0.033366| train set 2.526x speedup, test set 1.200x speedup, val set 1.109x speedup, step: 1
JOB test speedup 1.0299265891701357
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.938977054830216
Epoch 1/300 |loss: 0.012050| train set 2.218x speedup, test set 1.939x speedup, val set 0.925x speedup, step: 2
JOB test speedup 0.9165188568800773
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.009187| train set 3.325x speedup, test set 1.491x speedup, val set 0.925x speedup, step: 3
JOB test speedup 0.9967454287920982
TPCH test speedup 9.669632797414597
TPCH skew test speedup 1.9407621188763453
Epoch 3/300 |loss: 0.006834| train set 3.926x speedup, test set 1.941x speedup, val set 0.927x speedup, step: 4
JOB test speedup 0.9526747620739853
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 4/300 |loss: 0.007278| train set 3.757x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 5
JOB test speedup 0.995199549759563
TPCH test speedup 6.183233697972903
TPCH skew test speedup 0.7800589496906053
Epoch 5/300 |loss: 0.005655| train set 4.025x speedup, test set 0.780x speedup, val set 0.668x speedup, step: 6
JOB test speedup 0.9372388926516995
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 6/300 |loss: 0.004709| train set 4.108x speedup, test set 0.979x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.891395271893762
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 7/300 |loss: 0.003991| train set 4.553x speedup, test set 0.979x speedup, val set 0.886x speedup, step: 8
JOB test speedup 0.808229205148558
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 8/300 |loss: 0.004293| train set 4.528x speedup, test set 0.979x speedup, val set 0.886x speedup, step: 9
JOB test speedup 0.8816874906230383
TPCH test speedup 5.39982318379696
TPCH skew test speedup 0.9786338862294391
Epoch 9/300 |loss: 0.003919| train set 4.506x speedup, test set 0.979x speedup, val set 0.667x speedup, step: 10
JOB test speedup 0.8460711480439941
TPCH test speedup 8.117521852460504
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.003303| train set 4.707x speedup, test set 0.982x speedup, val set 0.887x speedup, step: 11
JOB test speedup 0.846336058844473
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.003224| train set 4.840x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 12
JOB test speedup 0.8390919464396153
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9817637166756344
Epoch 12/300 |loss: 0.003053| train set 4.688x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.8602017656857996
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9817637166756344
Epoch 13/300 |loss: 0.002886| train set 4.873x speedup, test set 0.982x speedup, val set 0.887x speedup, step: 14
JOB test speedup 0.7726224264132977
TPCH test speedup 8.117521852460504
TPCH skew test speedup 0.7797704117006798
Epoch 14/300 |loss: 0.002500| train set 4.591x speedup, test set 0.780x speedup, val set 0.887x speedup, step: 15
JOB test speedup 0.8291726233113715
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9781797901403877
Epoch 15/300 |loss: 0.002573| train set 4.796x speedup, test set 0.978x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.8312344518199317
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 16/300 |loss: 0.002490| train set 4.883x speedup, test set 0.982x speedup, val set 0.668x speedup, step: 17
JOB test speedup 0.7773010172079572
TPCH test speedup 4.10673605755523
TPCH skew test speedup 0.9813067120737639
Epoch 17/300 |loss: 0.002184| train set 4.844x speedup, test set 0.981x speedup, val set 0.668x speedup, step: 18
JOB test speedup 0.8426411066594423
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9813067120737639
Epoch 18/300 |loss: 0.001974| train set 4.840x speedup, test set 0.981x speedup, val set 0.669x speedup, step: 19
JOB test speedup 0.7844243218940178
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 19/300 |loss: 0.001909| train set 4.879x speedup, test set 0.982x speedup, val set 0.668x speedup, step: 20
JOB test speedup 0.8946418603503895
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 20/300 |loss: 0.001894| train set 4.890x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 21
JOB test speedup 0.8155466743412162
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 21/300 |loss: 0.001786| train set 4.634x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 22
JOB test speedup 0.7687720335491408
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.7797704117006798
Epoch 22/300 |loss: 0.001654| train set 4.875x speedup, test set 0.780x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.8180468916822036
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9302716218091621
Epoch 23/300 |loss: 0.001698| train set 4.860x speedup, test set 0.930x speedup, val set 0.689x speedup, step: 24
JOB test speedup 0.8175794421397172
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9302716218091621
Epoch 24/300 |loss: 0.001825| train set 4.466x speedup, test set 0.930x speedup, val set 0.689x speedup, step: 25
JOB test speedup 0.7592795900250092
TPCH test speedup 4.320175388140374
TPCH skew test speedup 1.032863251464744
Epoch 25/300 |loss: 0.001469| train set 4.895x speedup, test set 1.033x speedup, val set 0.689x speedup, step: 26
JOB test speedup 0.8880852518390127
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 26/300 |loss: 0.001389| train set 4.895x speedup, test set 1.012x speedup, val set 0.688x speedup, step: 27
JOB test speedup 0.7733433146873961
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8360951501764292
Epoch 27/300 |loss: 0.001428| train set 4.871x speedup, test set 0.836x speedup, val set 0.688x speedup, step: 28
JOB test speedup 0.8187036492579093
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 28/300 |loss: 0.001376| train set 4.895x speedup, test set 1.072x speedup, val set 0.688x speedup, step: 29
JOB test speedup 0.7541137139868558
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8360951501764292
Epoch 29/300 |loss: 0.001548| train set 4.829x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 30
JOB test speedup 0.8576323024065396
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 30/300 |loss: 0.001236| train set 4.910x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 31
JOB test speedup 0.7784855376514703
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001270| train set 4.860x speedup, test set 1.072x speedup, val set 0.689x speedup, step: 32
JOB test speedup 0.7756010774057753
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001151| train set 4.892x speedup, test set 1.073x speedup, val set 0.688x speedup, step: 33
JOB test speedup 0.7797399393306479
TPCH test speedup 4.320175388140374
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001191| train set 4.782x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 34
JOB test speedup 0.7684934820564963
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 34/300 |loss: 0.001228| train set 4.878x speedup, test set 1.072x speedup, val set 0.689x speedup, step: 35
JOB test speedup 0.769017622920978
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 35/300 |loss: 0.001397| train set 4.856x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.7778205795054217
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 36/300 |loss: 0.001096| train set 4.906x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 37
JOB test speedup 0.7820646491135259
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8360951501764292
Epoch 37/300 |loss: 0.001177| train set 4.911x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8182673819792976
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 38/300 |loss: 0.001195| train set 4.829x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 39
JOB test speedup 0.7662291368366733
TPCH test speedup 4.320175388140374
TPCH skew test speedup 1.0722058282917282
Epoch 39/300 |loss: 0.001155| train set 4.701x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7836638580223925
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001129| train set 4.505x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.7541997893478917
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001164| train set 4.895x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 42
JOB test speedup 0.785192793807998
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001208| train set 4.855x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 43
JOB test speedup 0.8090289915294865
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 43/300 |loss: 0.001109| train set 4.903x speedup, test set 0.836x speedup, val set 0.717x speedup, step: 44
JOB test speedup 0.7735786164601869
TPCH test speedup 4.320175388140374
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.000978| train set 4.818x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 45
JOB test speedup 0.7758560043362641
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 45/300 |loss: 0.000963| train set 4.903x speedup, test set 0.836x speedup, val set 0.726x speedup, step: 46
JOB test speedup 0.7916391071656338
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.7987593055989559
Epoch 46/300 |loss: 0.001019| train set 4.703x speedup, test set 0.799x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.8482916075862931
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.7987593055989559
Epoch 47/300 |loss: 0.000985| train set 4.896x speedup, test set 0.799x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.7720216788440823
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001258| train set 4.853x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.796538840149609
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8362488596291769
Epoch 49/300 |loss: 0.001157| train set 4.869x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 50
early stopping at epoch 49
Training per epoch cost 3.821 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.526, test speedup 0.860, val speedup 1.109
TPCH best validation speedup epoch: 0, train speedup 2.526, test speedup 3.303, val speedup 1.109
TPCH Skew best validation speedup epoch: 0, train speedup 2.526, test speedup 1.200, val speedup 1.109
execution cost 0:04:21.554245
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.874630, and there are 13720 training samples
in channel 9
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.2004900640191734
Epoch 0/300 |loss: 0.033366| train set 2.526x speedup, test set 1.200x speedup, val set 1.109x speedup, step: 1
JOB test speedup 1.0549155699288069
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.938977054830216
Epoch 1/300 |loss: 0.012052| train set 2.218x speedup, test set 1.939x speedup, val set 0.925x speedup, step: 2
JOB test speedup 0.9544689859191171
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.009177| train set 3.330x speedup, test set 1.491x speedup, val set 0.927x speedup, step: 3
JOB test speedup 0.8934067375844578
TPCH test speedup 9.669632797414597
TPCH skew test speedup 1.9407621188763453
Epoch 3/300 |loss: 0.006822| train set 3.922x speedup, test set 1.941x speedup, val set 0.927x speedup, step: 4
JOB test speedup 0.9050206748760405
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 4/300 |loss: 0.007214| train set 3.585x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 5
JOB test speedup 0.9807153517649759
TPCH test speedup 8.117521852460504
TPCH skew test speedup 0.9817637166756344
Epoch 5/300 |loss: 0.005593| train set 4.096x speedup, test set 0.982x speedup, val set 0.668x speedup, step: 6
JOB test speedup 0.8925453601026162
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 6/300 |loss: 0.004661| train set 4.119x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 7
JOB test speedup 0.8953338658953249
TPCH test speedup 8.117521852460504
TPCH skew test speedup 0.7800589496906053
Epoch 7/300 |loss: 0.004054| train set 3.978x speedup, test set 0.780x speedup, val set 0.668x speedup, step: 8
JOB test speedup 0.9311432329413705
TPCH test speedup 5.39982318379696
TPCH skew test speedup 0.7800589496906053
Epoch 8/300 |loss: 0.004310| train set 4.345x speedup, test set 0.780x speedup, val set 0.689x speedup, step: 9
JOB test speedup 0.89607457873592
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.7800589496906053
Epoch 9/300 |loss: 0.003805| train set 4.511x speedup, test set 0.780x speedup, val set 0.647x speedup, step: 10
JOB test speedup 0.8031279853247015
TPCH test speedup 5.39982318379696
TPCH skew test speedup 0.9786338862294391
Epoch 10/300 |loss: 0.003171| train set 4.697x speedup, test set 0.979x speedup, val set 0.689x speedup, step: 11
JOB test speedup 0.930413288151885
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.003158| train set 4.701x speedup, test set 0.982x speedup, val set 0.708x speedup, step: 12
JOB test speedup 0.7807534441263752
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 12/300 |loss: 0.003159| train set 4.363x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.7863553012107114
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9817637166756344
Epoch 13/300 |loss: 0.002779| train set 4.804x speedup, test set 0.982x speedup, val set 0.708x speedup, step: 14
JOB test speedup 0.7948668681420729
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9817637166756344
Epoch 14/300 |loss: 0.002445| train set 4.682x speedup, test set 0.982x speedup, val set 0.887x speedup, step: 15
JOB test speedup 0.8826728947517014
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0690157018936535
Epoch 15/300 |loss: 0.002488| train set 4.687x speedup, test set 1.069x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.8217422904921572
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9817637166756344
Epoch 16/300 |loss: 0.002377| train set 4.702x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 17
JOB test speedup 0.7627295536917974
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9813067120737639
Epoch 17/300 |loss: 0.002161| train set 4.849x speedup, test set 0.981x speedup, val set 0.719x speedup, step: 18
JOB test speedup 0.8473028730616927
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9813067120737639
Epoch 18/300 |loss: 0.002017| train set 4.041x speedup, test set 0.981x speedup, val set 0.689x speedup, step: 19
JOB test speedup 0.8068548184275772
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 19/300 |loss: 0.001914| train set 4.864x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 20
JOB test speedup 0.8987883464822897
TPCH test speedup 5.39982318379696
TPCH skew test speedup 0.9817637166756344
Epoch 20/300 |loss: 0.001962| train set 4.884x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 21
JOB test speedup 0.8169692810257871
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9817637166756344
Epoch 21/300 |loss: 0.001748| train set 4.891x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 22
JOB test speedup 0.7938118237069471
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9817637166756344
Epoch 22/300 |loss: 0.001592| train set 4.887x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.9220578960376636
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 23/300 |loss: 0.001652| train set 4.861x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 24
JOB test speedup 0.7723663027326284
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9817637166756344
Epoch 24/300 |loss: 0.001764| train set 4.658x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 25
JOB test speedup 0.7930286394660273
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001569| train set 4.894x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 26
JOB test speedup 0.7954643990229104
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001303| train set 4.888x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 27
JOB test speedup 0.8870773416676352
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 1.0722058282917282
Epoch 27/300 |loss: 0.001491| train set 4.900x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.7780720416171534
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001423| train set 4.889x speedup, test set 1.073x speedup, val set 0.717x speedup, step: 29
JOB test speedup 0.7834354390192533
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 29/300 |loss: 0.001441| train set 4.830x speedup, test set 1.072x speedup, val set 0.689x speedup, step: 30
JOB test speedup 0.800370475765647
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 30/300 |loss: 0.001217| train set 4.861x speedup, test set 0.836x speedup, val set 0.773x speedup, step: 31
JOB test speedup 0.8016572642515246
TPCH test speedup 5.398567432253971
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001275| train set 4.894x speedup, test set 1.072x speedup, val set 0.850x speedup, step: 32
JOB test speedup 0.8026608004071185
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001123| train set 4.883x speedup, test set 1.073x speedup, val set 0.717x speedup, step: 33
JOB test speedup 0.9027715008113827
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001187| train set 4.900x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 34
JOB test speedup 0.7810201742324692
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.8360951501764292
Epoch 34/300 |loss: 0.001167| train set 4.888x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.7968833000378568
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.8364268861084918
Epoch 35/300 |loss: 0.001317| train set 4.907x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.9227828845552123
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001104| train set 4.905x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.7877329504604302
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 37/300 |loss: 0.001094| train set 4.896x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.7812964059267089
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001059| train set 4.896x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 39
JOB test speedup 0.7727917817225554
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 39/300 |loss: 0.001072| train set 4.555x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7971792234716546
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001100| train set 4.711x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 41
JOB test speedup 0.7826750396903578
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 41/300 |loss: 0.001071| train set 4.895x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7926303118073731
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001257| train set 4.761x speedup, test set 1.073x speedup, val set 0.729x speedup, step: 43
JOB test speedup 0.7861492692980765
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001211| train set 4.826x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 44
early stopping at epoch 43
Training per epoch cost 3.818 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.526, test speedup 0.860, val speedup 1.109
TPCH best validation speedup epoch: 0, train speedup 2.526, test speedup 3.303, val speedup 1.109
TPCH Skew best validation speedup epoch: 0, train speedup 2.526, test speedup 1.200, val speedup 1.109
execution cost 0:03:49.660059
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.853542, and there are 13720 training samples
in channel 9
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.2004900640191734
Epoch 0/300 |loss: 0.033366| train set 2.526x speedup, test set 1.200x speedup, val set 1.109x speedup, step: 1
JOB test speedup 1.029490150998308
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.938977054830216
Epoch 1/300 |loss: 0.012051| train set 2.218x speedup, test set 1.939x speedup, val set 0.925x speedup, step: 2
JOB test speedup 0.9059334713723084
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.009142| train set 3.272x speedup, test set 1.491x speedup, val set 1.193x speedup, step: 3
JOB test speedup 0.9163106431441018
TPCH test speedup 9.669632797414597
TPCH skew test speedup 1.9407621188763453
Epoch 3/300 |loss: 0.006767| train set 3.929x speedup, test set 1.941x speedup, val set 0.927x speedup, step: 4
JOB test speedup 0.9342125622345571
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 4/300 |loss: 0.007314| train set 3.755x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 5
JOB test speedup 0.9799622251690653
TPCH test speedup 6.183233697972903
TPCH skew test speedup 0.7800589496906053
Epoch 5/300 |loss: 0.005510| train set 4.148x speedup, test set 0.780x speedup, val set 0.668x speedup, step: 6
JOB test speedup 0.9426881827724108
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 6/300 |loss: 0.004708| train set 4.214x speedup, test set 0.979x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.8864297432449485
TPCH test speedup 8.117521852460504
TPCH skew test speedup 0.9817637166756344
Epoch 7/300 |loss: 0.004004| train set 3.873x speedup, test set 0.982x speedup, val set 0.786x speedup, step: 8
JOB test speedup 0.7912215158226586
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 8/300 |loss: 0.004344| train set 4.352x speedup, test set 0.982x speedup, val set 0.887x speedup, step: 9
JOB test speedup 0.932213036364152
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.7800589496906053
Epoch 9/300 |loss: 0.003849| train set 4.696x speedup, test set 0.780x speedup, val set 0.668x speedup, step: 10
JOB test speedup 0.781417379523387
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.003417| train set 4.694x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 11
JOB test speedup 0.8150174625216356
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.003342| train set 4.841x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 12
JOB test speedup 0.91548032195798
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 12/300 |loss: 0.003141| train set 4.737x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.8754063381330567
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 13/300 |loss: 0.002948| train set 4.574x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 14
JOB test speedup 0.7967305870661607
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 14/300 |loss: 0.002702| train set 4.676x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.9413937974100068
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 15/300 |loss: 0.002664| train set 4.661x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.8090155150364609
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 16/300 |loss: 0.002486| train set 4.891x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 17
JOB test speedup 0.7770752905418163
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 17/300 |loss: 0.002278| train set 4.713x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 18
JOB test speedup 0.9183623621306604
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 18/300 |loss: 0.001999| train set 4.747x speedup, test set 0.982x speedup, val set 0.666x speedup, step: 19
JOB test speedup 0.8530822659918087
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 19/300 |loss: 0.001919| train set 4.856x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 20
JOB test speedup 0.8286176177367638
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 20/300 |loss: 0.001995| train set 4.871x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 21
JOB test speedup 0.831036236135215
TPCH test speedup 5.662532596213745
TPCH skew test speedup 0.9817637166756344
Epoch 21/300 |loss: 0.001776| train set 4.800x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 22
JOB test speedup 0.781664777862306
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 22/300 |loss: 0.001674| train set 4.887x speedup, test set 0.982x speedup, val set 0.688x speedup, step: 23
JOB test speedup 0.8067934189440964
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 23/300 |loss: 0.001619| train set 4.843x speedup, test set 0.982x speedup, val set 0.688x speedup, step: 24
JOB test speedup 0.7542065771073667
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9302716218091621
Epoch 24/300 |loss: 0.001712| train set 4.785x speedup, test set 0.930x speedup, val set 0.689x speedup, step: 25
JOB test speedup 0.784743356064117
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 25/300 |loss: 0.001572| train set 4.894x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 26
JOB test speedup 0.7986410270391914
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 26/300 |loss: 0.001516| train set 4.899x speedup, test set 0.982x speedup, val set 0.686x speedup, step: 27
JOB test speedup 0.890198791176648
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001477| train set 4.873x speedup, test set 1.073x speedup, val set 0.688x speedup, step: 28
JOB test speedup 0.8050284244572936
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9302716218091621
Epoch 28/300 |loss: 0.001438| train set 4.900x speedup, test set 0.930x speedup, val set 0.689x speedup, step: 29
JOB test speedup 0.796566358692671
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 29/300 |loss: 0.001421| train set 4.910x speedup, test set 0.982x speedup, val set 0.688x speedup, step: 30
JOB test speedup 0.8241716807219803
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001314| train set 4.859x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 31
JOB test speedup 0.7856301719782698
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9813067120737639
Epoch 31/300 |loss: 0.001385| train set 4.907x speedup, test set 0.981x speedup, val set 0.666x speedup, step: 32
JOB test speedup 0.7851011155452469
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001184| train set 4.889x speedup, test set 1.073x speedup, val set 0.688x speedup, step: 33
JOB test speedup 0.9489201887743571
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001196| train set 4.842x speedup, test set 1.073x speedup, val set 0.666x speedup, step: 34
JOB test speedup 0.7582866596035629
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727350141666414
Epoch 34/300 |loss: 0.001308| train set 4.902x speedup, test set 1.073x speedup, val set 0.666x speedup, step: 35
JOB test speedup 0.813280318820444
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001284| train set 4.697x speedup, test set 1.073x speedup, val set 0.666x speedup, step: 36
JOB test speedup 0.7847861149140812
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001101| train set 4.889x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 37
JOB test speedup 0.813220349431951
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0722058282917282
Epoch 37/300 |loss: 0.001099| train set 4.865x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.7825623226561479
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0724586230372417
Epoch 38/300 |loss: 0.001133| train set 4.896x speedup, test set 1.072x speedup, val set 0.666x speedup, step: 39
JOB test speedup 0.8014036821929496
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 39/300 |loss: 0.001129| train set 4.727x speedup, test set 1.072x speedup, val set 0.666x speedup, step: 40
JOB test speedup 0.8151802204067197
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001238| train set 4.686x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 41
JOB test speedup 0.7600518455380456
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001100| train set 4.873x speedup, test set 1.073x speedup, val set 0.666x speedup, step: 42
JOB test speedup 0.823258312926072
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001274| train set 4.839x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 43
JOB test speedup 0.8368672061876028
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001160| train set 4.902x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.7745739374361932
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001026| train set 4.892x speedup, test set 1.073x speedup, val set 0.666x speedup, step: 45
JOB test speedup 0.7654152671179095
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 45/300 |loss: 0.000937| train set 4.908x speedup, test set 1.072x speedup, val set 0.703x speedup, step: 46
JOB test speedup 0.7949937271755413
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 46/300 |loss: 0.001026| train set 4.894x speedup, test set 1.072x speedup, val set 0.703x speedup, step: 47
JOB test speedup 0.7903341954461581
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 47/300 |loss: 0.001006| train set 4.885x speedup, test set 1.072x speedup, val set 0.702x speedup, step: 48
JOB test speedup 0.760437032414133
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001101| train set 4.827x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 49
JOB test speedup 0.7737213508938419
TPCH test speedup 4.320175388140374
TPCH skew test speedup 1.0722058282917282
Epoch 49/300 |loss: 0.001182| train set 4.903x speedup, test set 1.072x speedup, val set 0.703x speedup, step: 50
JOB test speedup 0.7802541543310473
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001069| train set 4.828x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 51
JOB test speedup 0.7939114002400945
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001021| train set 4.909x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 52
JOB test speedup 0.8239278340299058
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 52/300 |loss: 0.000923| train set 4.901x speedup, test set 1.072x speedup, val set 0.703x speedup, step: 53
JOB test speedup 0.828914106503596
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 53/300 |loss: 0.000920| train set 4.905x speedup, test set 1.072x speedup, val set 0.703x speedup, step: 54
JOB test speedup 0.7920240720142888
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 54/300 |loss: 0.000954| train set 4.909x speedup, test set 1.072x speedup, val set 0.704x speedup, step: 55
JOB test speedup 0.8186265720943718
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 55/300 |loss: 0.000865| train set 4.900x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 56
JOB test speedup 0.7981089424890243
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727350141666414
Epoch 56/300 |loss: 0.000922| train set 4.848x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 57
JOB test speedup 0.7821503003724635
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 57/300 |loss: 0.000982| train set 4.837x speedup, test set 1.072x speedup, val set 0.702x speedup, step: 58
JOB test speedup 0.8200125194823856
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0730427386394326
Epoch 58/300 |loss: 0.000997| train set 4.857x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 59
JOB test speedup 0.8326499364358874
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 59/300 |loss: 0.000876| train set 4.894x speedup, test set 1.072x speedup, val set 0.702x speedup, step: 60
JOB test speedup 0.7673305051451521
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 60/300 |loss: 0.000948| train set 4.851x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 61
JOB test speedup 0.8363599759277541
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 61/300 |loss: 0.000865| train set 4.885x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 62
JOB test speedup 0.7995134094600733
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 62/300 |loss: 0.000893| train set 4.895x speedup, test set 1.072x speedup, val set 0.702x speedup, step: 63
JOB test speedup 0.8412920054748811
TPCH test speedup 4.320175388140374
TPCH skew test speedup 1.0727514430351917
Epoch 63/300 |loss: 0.000943| train set 4.901x speedup, test set 1.073x speedup, val set 0.729x speedup, step: 64
JOB test speedup 0.8763234459990664
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 64/300 |loss: 0.000924| train set 4.911x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 65
early stopping at epoch 64
Training per epoch cost 3.820 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.526, test speedup 0.860, val speedup 1.109
TPCH best validation speedup epoch: 0, train speedup 2.526, test speedup 3.303, val speedup 1.109
TPCH Skew best validation speedup epoch: 0, train speedup 2.526, test speedup 1.200, val speedup 1.109
execution cost 0:05:33.116165
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.868570, and there are 13720 training samples
in channel 9
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.2004900640191734
Epoch 0/300 |loss: 0.033366| train set 2.526x speedup, test set 1.200x speedup, val set 1.109x speedup, step: 1
JOB test speedup 1.0299265891701357
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.938977054830216
Epoch 1/300 |loss: 0.012050| train set 2.218x speedup, test set 1.939x speedup, val set 0.925x speedup, step: 2
JOB test speedup 0.9165188568800773
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.009188| train set 3.325x speedup, test set 1.491x speedup, val set 0.925x speedup, step: 3
JOB test speedup 0.8946035994650732
TPCH test speedup 9.669632797414597
TPCH skew test speedup 1.9407621188763453
Epoch 3/300 |loss: 0.006857| train set 3.927x speedup, test set 1.941x speedup, val set 0.927x speedup, step: 4
JOB test speedup 0.9564140739961517
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 4/300 |loss: 0.007215| train set 3.757x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 5
JOB test speedup 0.938015669420843
TPCH test speedup 6.183233697972903
TPCH skew test speedup 0.7800589496906053
Epoch 5/300 |loss: 0.005560| train set 4.173x speedup, test set 0.780x speedup, val set 0.689x speedup, step: 6
JOB test speedup 0.9183990995161125
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 6/300 |loss: 0.004709| train set 4.106x speedup, test set 0.979x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.9110756646620985
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9817637166756344
Epoch 7/300 |loss: 0.004009| train set 4.751x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 8
JOB test speedup 0.8765212696019434
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 8/300 |loss: 0.004241| train set 4.362x speedup, test set 0.979x speedup, val set 0.887x speedup, step: 9
JOB test speedup 0.91415711904654
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.7800589496906053
Epoch 9/300 |loss: 0.003883| train set 4.588x speedup, test set 0.780x speedup, val set 0.668x speedup, step: 10
JOB test speedup 0.8405084368218199
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.003164| train set 4.670x speedup, test set 0.982x speedup, val set 0.668x speedup, step: 11
JOB test speedup 0.9072735239428656
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.003168| train set 4.848x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 12
JOB test speedup 0.7561693883085037
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.8364268861084918
Epoch 12/300 |loss: 0.003198| train set 4.672x speedup, test set 0.836x speedup, val set 0.951x speedup, step: 13
JOB test speedup 0.8250068731466518
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.002837| train set 4.531x speedup, test set 1.073x speedup, val set 0.708x speedup, step: 14
JOB test speedup 0.86782269323603
TPCH test speedup 6.183233697972903
TPCH skew test speedup 0.8364268861084918
Epoch 14/300 |loss: 0.002535| train set 4.805x speedup, test set 0.836x speedup, val set 0.951x speedup, step: 15
JOB test speedup 0.9903285995323482
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0690157018936535
Epoch 15/300 |loss: 0.002622| train set 4.686x speedup, test set 1.069x speedup, val set 0.727x speedup, step: 16
JOB test speedup 0.8881517663755234
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002439| train set 4.813x speedup, test set 1.073x speedup, val set 0.669x speedup, step: 17
JOB test speedup 0.797605781412735
TPCH test speedup 10.089641724511921
TPCH skew test speedup 0.8364268861084918
Epoch 17/300 |loss: 0.002229| train set 4.749x speedup, test set 0.836x speedup, val set 0.709x speedup, step: 18
JOB test speedup 0.8005455286341544
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002029| train set 4.592x speedup, test set 1.073x speedup, val set 0.730x speedup, step: 19
JOB test speedup 0.8061186523389865
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 19/300 |loss: 0.001936| train set 4.867x speedup, test set 0.836x speedup, val set 0.773x speedup, step: 20
JOB test speedup 0.925191089845225
TPCH test speedup 6.168466654639402
TPCH skew test speedup 0.8364268861084918
Epoch 20/300 |loss: 0.001880| train set 4.891x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 21
JOB test speedup 0.8134988063070643
TPCH test speedup 5.662532596213745
TPCH skew test speedup 0.8364268861084918
Epoch 21/300 |loss: 0.001743| train set 4.878x speedup, test set 0.836x speedup, val set 0.707x speedup, step: 22
JOB test speedup 0.7995073708038555
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.7987593055989559
Epoch 22/300 |loss: 0.001591| train set 4.867x speedup, test set 0.799x speedup, val set 0.886x speedup, step: 23
JOB test speedup 0.8526001998518139
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 23/300 |loss: 0.001644| train set 4.879x speedup, test set 1.012x speedup, val set 0.728x speedup, step: 24
JOB test speedup 0.8190281613791547
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 24/300 |loss: 0.001723| train set 4.811x speedup, test set 1.012x speedup, val set 0.717x speedup, step: 25
JOB test speedup 0.8575075770447226
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001559| train set 4.906x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.8532391345347013
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001430| train set 4.877x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 27
JOB test speedup 0.9067491639465252
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0722058282917282
Epoch 27/300 |loss: 0.001377| train set 4.868x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.8588576474625484
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001310| train set 4.907x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 29
JOB test speedup 0.8135281355957928
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8360951501764292
Epoch 29/300 |loss: 0.001325| train set 4.824x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.8967344518648473
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 30/300 |loss: 0.001119| train set 4.853x speedup, test set 0.836x speedup, val set 0.728x speedup, step: 31
JOB test speedup 0.797216534129344
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001294| train set 4.888x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.8353356865368308
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001129| train set 4.900x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.9450500057258214
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.8364268861084918
Epoch 33/300 |loss: 0.001162| train set 4.816x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.8584090990715276
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 34/300 |loss: 0.001166| train set 4.901x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.8057225973426617
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001311| train set 4.864x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.7995916169268242
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8360951501764292
Epoch 36/300 |loss: 0.001084| train set 4.818x speedup, test set 0.836x speedup, val set 0.728x speedup, step: 37
JOB test speedup 0.8455490486880133
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8360951501764292
Epoch 37/300 |loss: 0.001100| train set 4.854x speedup, test set 0.836x speedup, val set 0.773x speedup, step: 38
JOB test speedup 0.8271100510165802
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001063| train set 4.906x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.8097810740187669
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 39/300 |loss: 0.001036| train set 4.844x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.8135134631706034
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 40/300 |loss: 0.001187| train set 4.848x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.8087898034491001
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0722058282917282
Epoch 41/300 |loss: 0.001078| train set 4.892x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.862370349481096
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 42/300 |loss: 0.001240| train set 4.910x speedup, test set 1.072x speedup, val set 0.726x speedup, step: 43
JOB test speedup 0.873775420337196
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001132| train set 4.895x speedup, test set 1.073x speedup, val set 0.897x speedup, step: 44
JOB test speedup 0.805305226890892
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.000986| train set 4.807x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 45
JOB test speedup 0.815229014153295
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 45/300 |loss: 0.000974| train set 4.907x speedup, test set 1.072x speedup, val set 0.728x speedup, step: 46
JOB test speedup 0.8473948782854556
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0722058282917282
Epoch 46/300 |loss: 0.000951| train set 4.903x speedup, test set 1.072x speedup, val set 0.726x speedup, step: 47
JOB test speedup 0.805386631110076
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 47/300 |loss: 0.000904| train set 4.897x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.8139818621540224
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001124| train set 4.897x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.931250364338806
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8360951501764292
Epoch 49/300 |loss: 0.001152| train set 4.810x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.9333219909046335
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0722058282917282
Epoch 50/300 |loss: 0.001151| train set 4.905x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 51
early stopping at epoch 50
Training per epoch cost 3.837 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.526, test speedup 0.860, val speedup 1.109
TPCH best validation speedup epoch: 0, train speedup 2.526, test speedup 3.303, val speedup 1.109
TPCH Skew best validation speedup epoch: 0, train speedup 2.526, test speedup 1.200, val speedup 1.109
execution cost 0:04:26.739080
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.911693, and there are 13720 training samples
in channel 9
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.2004900640191734
Epoch 0/300 |loss: 0.033366| train set 2.526x speedup, test set 1.200x speedup, val set 1.109x speedup, step: 1
JOB test speedup 1.0299265891701357
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.938977054830216
Epoch 1/300 |loss: 0.012050| train set 2.218x speedup, test set 1.939x speedup, val set 0.925x speedup, step: 2
JOB test speedup 0.9059334713723084
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.009192| train set 3.333x speedup, test set 1.491x speedup, val set 0.925x speedup, step: 3
JOB test speedup 0.9383419278792876
TPCH test speedup 9.669632797414597
TPCH skew test speedup 1.9407621188763453
Epoch 3/300 |loss: 0.006839| train set 3.927x speedup, test set 1.941x speedup, val set 0.927x speedup, step: 4
JOB test speedup 0.9417688373015848
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 4/300 |loss: 0.007262| train set 3.734x speedup, test set 0.979x speedup, val set 0.667x speedup, step: 5
JOB test speedup 0.9874635784867443
TPCH test speedup 6.183233697972903
TPCH skew test speedup 0.7800589496906053
Epoch 5/300 |loss: 0.005573| train set 4.110x speedup, test set 0.780x speedup, val set 0.668x speedup, step: 6
JOB test speedup 0.9372015326405241
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 6/300 |loss: 0.004719| train set 4.121x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 7
JOB test speedup 0.9198692470672919
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9817637166756344
Epoch 7/300 |loss: 0.004090| train set 4.623x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 8
JOB test speedup 0.9511825677964902
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 8/300 |loss: 0.004347| train set 4.576x speedup, test set 0.979x speedup, val set 0.886x speedup, step: 9
JOB test speedup 0.911824203862453
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 9/300 |loss: 0.003819| train set 4.510x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 10
JOB test speedup 0.8591440495831094
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 10/300 |loss: 0.003258| train set 4.677x speedup, test set 0.979x speedup, val set 0.886x speedup, step: 11
JOB test speedup 0.8979047713028943
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.003157| train set 4.822x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 12
JOB test speedup 0.8729980326173868
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9463941788545615
Epoch 12/300 |loss: 0.003007| train set 4.727x speedup, test set 0.946x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.8027718658626961
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 13/300 |loss: 0.002700| train set 4.830x speedup, test set 0.982x speedup, val set 0.668x speedup, step: 14
JOB test speedup 0.8238553084149269
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.7800589496906053
Epoch 14/300 |loss: 0.002397| train set 4.563x speedup, test set 0.780x speedup, val set 0.886x speedup, step: 15
JOB test speedup 0.9438021874707981
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9786338862294391
Epoch 15/300 |loss: 0.002523| train set 4.681x speedup, test set 0.979x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.8465850523934983
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9302716218091621
Epoch 16/300 |loss: 0.002376| train set 4.889x speedup, test set 0.930x speedup, val set 0.666x speedup, step: 17
JOB test speedup 0.901025306578078
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9813067120737639
Epoch 17/300 |loss: 0.002211| train set 4.689x speedup, test set 0.981x speedup, val set 0.689x speedup, step: 18
JOB test speedup 0.8296467217189333
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 18/300 |loss: 0.001981| train set 4.305x speedup, test set 0.982x speedup, val set 0.666x speedup, step: 19
JOB test speedup 0.8666694424614865
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9302716218091621
Epoch 19/300 |loss: 0.002067| train set 4.906x speedup, test set 0.930x speedup, val set 0.689x speedup, step: 20
JOB test speedup 0.8331937394448967
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 20/300 |loss: 0.001908| train set 4.845x speedup, test set 0.982x speedup, val set 0.666x speedup, step: 21
JOB test speedup 0.8277696375141456
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 21/300 |loss: 0.001743| train set 4.814x speedup, test set 0.982x speedup, val set 0.666x speedup, step: 22
JOB test speedup 0.8327353284033517
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001657| train set 4.882x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.89060507171903
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9302716218091621
Epoch 23/300 |loss: 0.001693| train set 4.863x speedup, test set 0.930x speedup, val set 0.666x speedup, step: 24
JOB test speedup 0.8171427657849988
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9302716218091621
Epoch 24/300 |loss: 0.001854| train set 4.625x speedup, test set 0.930x speedup, val set 0.666x speedup, step: 25
JOB test speedup 0.8366329579841433
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0110849455697632
Epoch 25/300 |loss: 0.001596| train set 4.905x speedup, test set 1.011x speedup, val set 0.689x speedup, step: 26
JOB test speedup 0.88531172263943
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001422| train set 4.891x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 27
JOB test speedup 0.9368003818491607
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 27/300 |loss: 0.001455| train set 4.886x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.9342395818511054
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 28/300 |loss: 0.001399| train set 4.902x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.8750605412074749
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.8360951501764292
Epoch 29/300 |loss: 0.001422| train set 4.817x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.8663898538746533
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001173| train set 4.893x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 31
JOB test speedup 0.8070453048349971
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001276| train set 4.852x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.9153828385412516
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001165| train set 4.868x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.8450941428603169
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001142| train set 4.896x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 34
JOB test speedup 0.8196135199338654
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 34/300 |loss: 0.001165| train set 4.892x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.9200763422666973
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8360951501764292
Epoch 35/300 |loss: 0.001352| train set 4.849x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8900238630073652
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 36/300 |loss: 0.001040| train set 4.766x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8488108886040349
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 37/300 |loss: 0.001077| train set 4.892x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8289226421692881
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 38/300 |loss: 0.001093| train set 4.822x speedup, test set 1.072x speedup, val set 0.703x speedup, step: 39
JOB test speedup 0.8213285047271504
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 39/300 |loss: 0.001064| train set 4.888x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.8263175721084157
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 40/300 |loss: 0.001070| train set 4.855x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.8351998840789797
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 41/300 |loss: 0.001077| train set 4.889x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.8854458711335409
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 42/300 |loss: 0.001252| train set 4.858x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.9204157954644936
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 43/300 |loss: 0.001112| train set 4.895x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.802038840254248
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 44/300 |loss: 0.000934| train set 4.906x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.9489165389203071
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 45/300 |loss: 0.000923| train set 4.894x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.8406378041911503
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 46/300 |loss: 0.000954| train set 4.900x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.8201282948625227
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 47/300 |loss: 0.000918| train set 4.900x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.8353078191586691
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8360951501764292
Epoch 48/300 |loss: 0.001169| train set 4.843x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.9289637527007794
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8360951501764292
Epoch 49/300 |loss: 0.001074| train set 4.891x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 50
early stopping at epoch 49
Training per epoch cost 3.883 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.526, test speedup 0.860, val speedup 1.109
TPCH best validation speedup epoch: 0, train speedup 2.526, test speedup 3.303, val speedup 1.109
TPCH Skew best validation speedup epoch: 0, train speedup 2.526, test speedup 1.200, val speedup 1.109
execution cost 0:04:24.148732
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.852237, and there are 13720 training samples
in channel 9
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.2004900640191734
Epoch 0/300 |loss: 0.033366| train set 2.526x speedup, test set 1.200x speedup, val set 1.109x speedup, step: 1
JOB test speedup 1.0546378583439513
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.938977054830216
Epoch 1/300 |loss: 0.012052| train set 2.218x speedup, test set 1.939x speedup, val set 0.925x speedup, step: 2
JOB test speedup 0.9231626771173379
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.009217| train set 3.327x speedup, test set 1.491x speedup, val set 0.925x speedup, step: 3
JOB test speedup 0.9509792409424979
TPCH test speedup 8.25604914444693
TPCH skew test speedup 1.9407621188763453
Epoch 3/300 |loss: 0.006812| train set 3.930x speedup, test set 1.941x speedup, val set 0.927x speedup, step: 4
JOB test speedup 0.9050206748760405
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 4/300 |loss: 0.007236| train set 3.584x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 5
JOB test speedup 0.976953033580082
TPCH test speedup 6.183233697972903
TPCH skew test speedup 0.7800589496906053
Epoch 5/300 |loss: 0.005602| train set 4.138x speedup, test set 0.780x speedup, val set 0.668x speedup, step: 6
JOB test speedup 0.8859488286901408
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 6/300 |loss: 0.004668| train set 4.087x speedup, test set 0.979x speedup, val set 0.667x speedup, step: 7
JOB test speedup 0.9053748351937398
TPCH test speedup 5.39982318379696
TPCH skew test speedup 0.7800589496906053
Epoch 7/300 |loss: 0.004042| train set 4.442x speedup, test set 0.780x speedup, val set 0.668x speedup, step: 8
JOB test speedup 0.8024923370096635
TPCH test speedup 5.39982318379696
TPCH skew test speedup 0.9786338862294391
Epoch 8/300 |loss: 0.004264| train set 4.360x speedup, test set 0.979x speedup, val set 0.887x speedup, step: 9
JOB test speedup 0.913841188518531
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.7800589496906053
Epoch 9/300 |loss: 0.003916| train set 4.487x speedup, test set 0.780x speedup, val set 0.646x speedup, step: 10
JOB test speedup 0.8302276097071445
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.003263| train set 4.593x speedup, test set 0.982x speedup, val set 0.668x speedup, step: 11
JOB test speedup 0.9118727074550512
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.003107| train set 4.829x speedup, test set 0.982x speedup, val set 0.668x speedup, step: 12
JOB test speedup 0.7747189420445507
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 12/300 |loss: 0.003088| train set 4.678x speedup, test set 1.073x speedup, val set 0.951x speedup, step: 13
JOB test speedup 0.8098651238252366
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 13/300 |loss: 0.002805| train set 4.623x speedup, test set 0.982x speedup, val set 0.668x speedup, step: 14
JOB test speedup 0.8789148305940226
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.8364268861084918
Epoch 14/300 |loss: 0.002431| train set 4.799x speedup, test set 0.836x speedup, val set 0.952x speedup, step: 15
JOB test speedup 1.0199450963500094
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0690157018936535
Epoch 15/300 |loss: 0.002410| train set 4.774x speedup, test set 1.069x speedup, val set 0.727x speedup, step: 16
JOB test speedup 1.0532316765625551
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 16/300 |loss: 0.002307| train set 4.894x speedup, test set 0.982x speedup, val set 0.668x speedup, step: 17
JOB test speedup 0.8605138068630103
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 17/300 |loss: 0.002054| train set 4.835x speedup, test set 1.072x speedup, val set 0.689x speedup, step: 18
JOB test speedup 0.9120036696322338
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.001859| train set 4.318x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 19
JOB test speedup 0.8198586227436344
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.001848| train set 4.894x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 20
JOB test speedup 0.8839837017485708
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.8364268861084918
Epoch 20/300 |loss: 0.001695| train set 4.871x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 21
JOB test speedup 0.8259014084500876
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.001673| train set 4.849x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 22
JOB test speedup 0.8146797757206191
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0690157018936535
Epoch 22/300 |loss: 0.001554| train set 4.861x speedup, test set 1.069x speedup, val set 0.728x speedup, step: 23
JOB test speedup 0.8206446550827923
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001554| train set 4.884x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 24
JOB test speedup 0.7821755134741891
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 24/300 |loss: 0.001590| train set 4.665x speedup, test set 1.012x speedup, val set 0.689x speedup, step: 25
JOB test speedup 0.8076540803034142
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001423| train set 4.903x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.8035253827796194
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001321| train set 4.879x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 27
JOB test speedup 0.9317033105995268
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.8360951501764292
Epoch 27/300 |loss: 0.001392| train set 4.895x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.7945007063892005
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 28/300 |loss: 0.001358| train set 4.856x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.7771534606957912
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.8364268861084918
Epoch 29/300 |loss: 0.001427| train set 4.820x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.8396985123487339
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 30/300 |loss: 0.001181| train set 4.890x speedup, test set 0.836x speedup, val set 0.728x speedup, step: 31
JOB test speedup 0.7839656725498267
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001251| train set 4.847x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.7989366981674162
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001096| train set 4.883x speedup, test set 1.073x speedup, val set 0.720x speedup, step: 33
JOB test speedup 0.8122651212020375
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.8364268861084918
Epoch 33/300 |loss: 0.001143| train set 4.900x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.8133508124374937
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.8360951501764292
Epoch 34/300 |loss: 0.001142| train set 4.892x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.7879844398712116
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001260| train set 4.869x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.7808936567136527
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8360951501764292
Epoch 36/300 |loss: 0.001084| train set 4.814x speedup, test set 0.836x speedup, val set 0.717x speedup, step: 37
JOB test speedup 0.7870176386317503
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0722058282917282
Epoch 37/300 |loss: 0.001077| train set 4.900x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.7859266952236562
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001073| train set 4.821x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.769032567170821
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 39/300 |loss: 0.001141| train set 4.902x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.796464696556135
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001110| train set 4.882x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.7994897441928738
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 41/300 |loss: 0.001020| train set 4.880x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7899547472044925
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001181| train set 4.896x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.8369281859513942
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001246| train set 4.906x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
early stopping at epoch 43
Training per epoch cost 3.855 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.526, test speedup 0.860, val speedup 1.109
TPCH best validation speedup epoch: 0, train speedup 2.526, test speedup 3.303, val speedup 1.109
TPCH Skew best validation speedup epoch: 0, train speedup 2.526, test speedup 1.200, val speedup 1.109
execution cost 0:03:52.180752
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.833643, and there are 13720 training samples
in channel 9
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.2004900640191734
Epoch 0/300 |loss: 0.033366| train set 2.526x speedup, test set 1.200x speedup, val set 1.109x speedup, step: 1
JOB test speedup 1.0549155699288069
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.938977054830216
Epoch 1/300 |loss: 0.012050| train set 2.218x speedup, test set 1.939x speedup, val set 0.925x speedup, step: 2
JOB test speedup 0.8845305488001841
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.009160| train set 3.272x speedup, test set 1.491x speedup, val set 0.927x speedup, step: 3
JOB test speedup 0.9146369986884016
TPCH test speedup 9.669632797414597
TPCH skew test speedup 1.9407621188763453
Epoch 3/300 |loss: 0.006800| train set 3.902x speedup, test set 1.941x speedup, val set 0.927x speedup, step: 4
JOB test speedup 0.9261814695340935
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 4/300 |loss: 0.007181| train set 3.756x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 5
JOB test speedup 0.9845737490429183
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9817637166756344
Epoch 5/300 |loss: 0.005587| train set 4.117x speedup, test set 0.982x speedup, val set 0.677x speedup, step: 6
JOB test speedup 0.902156801312429
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 6/300 |loss: 0.004645| train set 4.103x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 7
JOB test speedup 0.9230719442393243
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9817637166756344
Epoch 7/300 |loss: 0.003951| train set 4.674x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 8
JOB test speedup 0.9220888330312211
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 8/300 |loss: 0.004176| train set 4.639x speedup, test set 0.979x speedup, val set 0.887x speedup, step: 9
JOB test speedup 0.9716098206220319
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9817637166756344
Epoch 9/300 |loss: 0.003721| train set 4.790x speedup, test set 0.982x speedup, val set 0.705x speedup, step: 10
JOB test speedup 0.8692922857373824
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.003062| train set 4.755x speedup, test set 0.982x speedup, val set 0.887x speedup, step: 11
JOB test speedup 0.9134824219883226
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9786338862294391
Epoch 11/300 |loss: 0.003002| train set 4.723x speedup, test set 0.979x speedup, val set 0.773x speedup, step: 12
JOB test speedup 0.7885101580816035
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9817637166756344
Epoch 12/300 |loss: 0.002973| train set 4.714x speedup, test set 0.982x speedup, val set 0.773x speedup, step: 13
JOB test speedup 0.7893250221263732
TPCH test speedup 6.944019498499311
TPCH skew test speedup 0.9817637166756344
Epoch 13/300 |loss: 0.002689| train set 4.677x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 14
JOB test speedup 0.7930793209668637
TPCH test speedup 6.944019498499311
TPCH skew test speedup 0.9817637166756344
Epoch 14/300 |loss: 0.002390| train set 4.678x speedup, test set 0.982x speedup, val set 0.887x speedup, step: 15
JOB test speedup 0.9076075506700182
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9786338862294391
Epoch 15/300 |loss: 0.002408| train set 4.579x speedup, test set 0.979x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.943481146378376
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.7800589496906053
Epoch 16/300 |loss: 0.002327| train set 4.891x speedup, test set 0.780x speedup, val set 0.773x speedup, step: 17
JOB test speedup 0.7703778337347336
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 17/300 |loss: 0.002121| train set 4.825x speedup, test set 0.982x speedup, val set 0.887x speedup, step: 18
JOB test speedup 0.8618585097893366
TPCH test speedup 6.944019498499311
TPCH skew test speedup 0.9817637166756344
Epoch 18/300 |loss: 0.001986| train set 4.307x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 19
JOB test speedup 0.8822832202191151
TPCH test speedup 7.3386230456129615
TPCH skew test speedup 0.9786338862294391
Epoch 19/300 |loss: 0.002028| train set 4.868x speedup, test set 0.979x speedup, val set 0.689x speedup, step: 20
JOB test speedup 0.8141950130209682
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9786338862294391
Epoch 20/300 |loss: 0.001979| train set 4.841x speedup, test set 0.979x speedup, val set 0.689x speedup, step: 21
JOB test speedup 0.7766993163214239
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 21/300 |loss: 0.001889| train set 4.819x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 22
JOB test speedup 0.8946035025090648
TPCH test speedup 5.2556484470293725
TPCH skew test speedup 0.9786338862294391
Epoch 22/300 |loss: 0.001725| train set 4.857x speedup, test set 0.979x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.7731595126652517
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 23/300 |loss: 0.001698| train set 4.888x speedup, test set 0.979x speedup, val set 0.689x speedup, step: 24
JOB test speedup 0.7982084599549001
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9302716218091621
Epoch 24/300 |loss: 0.001822| train set 4.668x speedup, test set 0.930x speedup, val set 0.690x speedup, step: 25
JOB test speedup 0.7887171311759036
TPCH test speedup 10.089641724511921
TPCH skew test speedup 0.8969886460782887
Epoch 25/300 |loss: 0.001528| train set 4.902x speedup, test set 0.897x speedup, val set 0.689x speedup, step: 26
JOB test speedup 0.792422039254548
TPCH test speedup 5.662532596213745
TPCH skew test speedup 0.8364268861084918
Epoch 26/300 |loss: 0.001330| train set 4.888x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 27
JOB test speedup 0.7913673330992992
TPCH test speedup 6.3523249585765456
TPCH skew test speedup 0.8364268861084918
Epoch 27/300 |loss: 0.001463| train set 4.880x speedup, test set 0.836x speedup, val set 0.688x speedup, step: 28
JOB test speedup 0.7917274238611695
TPCH test speedup 5.22697296709472
TPCH skew test speedup 0.8364268861084918
Epoch 28/300 |loss: 0.001384| train set 4.885x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 29
JOB test speedup 0.8798363835031572
TPCH test speedup 5.922207392700119
TPCH skew test speedup 1.0690157018936535
Epoch 29/300 |loss: 0.001379| train set 4.900x speedup, test set 1.069x speedup, val set 0.689x speedup, step: 30
JOB test speedup 0.7768776794892193
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8364268861084918
Epoch 30/300 |loss: 0.001196| train set 4.862x speedup, test set 0.836x speedup, val set 0.800x speedup, step: 31
JOB test speedup 0.7797879235731133
TPCH test speedup 10.089641724511921
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001256| train set 4.853x speedup, test set 1.073x speedup, val set 0.688x speedup, step: 32
JOB test speedup 0.7799818481605034
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001128| train set 4.882x speedup, test set 1.073x speedup, val set 0.688x speedup, step: 33
JOB test speedup 0.7820120702419905
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8364268861084918
Epoch 33/300 |loss: 0.001154| train set 4.887x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 34
JOB test speedup 0.7797586240621177
TPCH test speedup 5.922207392700119
TPCH skew test speedup 0.8360951501764292
Epoch 34/300 |loss: 0.001174| train set 4.758x speedup, test set 0.836x speedup, val set 0.716x speedup, step: 35
JOB test speedup 0.7807930273569533
TPCH test speedup 5.922207392700119
TPCH skew test speedup 1.0690157018936535
Epoch 35/300 |loss: 0.001339| train set 4.583x speedup, test set 1.069x speedup, val set 0.689x speedup, step: 36
JOB test speedup 0.7585556929165648
TPCH test speedup 5.922207392700119
TPCH skew test speedup 0.8364268861084918
Epoch 36/300 |loss: 0.001093| train set 4.897x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 37
JOB test speedup 0.8820151250685934
TPCH test speedup 5.922207392700119
TPCH skew test speedup 1.0690157018936535
Epoch 37/300 |loss: 0.001030| train set 4.901x speedup, test set 1.069x speedup, val set 0.728x speedup, step: 38
JOB test speedup 0.7767299882414477
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001077| train set 4.903x speedup, test set 1.073x speedup, val set 0.688x speedup, step: 39
JOB test speedup 0.7756634241089434
TPCH test speedup 5.922207392700119
TPCH skew test speedup 1.0690157018936535
Epoch 39/300 |loss: 0.001101| train set 4.898x speedup, test set 1.069x speedup, val set 0.688x speedup, step: 40
JOB test speedup 0.8075283366015356
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001152| train set 4.870x speedup, test set 1.073x speedup, val set 0.688x speedup, step: 41
JOB test speedup 0.7998277358562469
TPCH test speedup 6.3523249585765456
TPCH skew test speedup 0.8364268861084918
Epoch 41/300 |loss: 0.001077| train set 4.891x speedup, test set 0.836x speedup, val set 0.688x speedup, step: 42
JOB test speedup 0.7585815093367339
TPCH test speedup 5.662532596213745
TPCH skew test speedup 0.8364268861084918
Epoch 42/300 |loss: 0.001201| train set 4.890x speedup, test set 0.836x speedup, val set 0.950x speedup, step: 43
JOB test speedup 0.7835485084524304
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001165| train set 4.819x speedup, test set 1.073x speedup, val set 0.688x speedup, step: 44
JOB test speedup 0.761216363283859
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8364268861084918
Epoch 44/300 |loss: 0.001043| train set 4.889x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 45
JOB test speedup 0.7794707444454649
TPCH test speedup 10.089641724511921
TPCH skew test speedup 0.8364268861084918
Epoch 45/300 |loss: 0.001104| train set 4.901x speedup, test set 0.836x speedup, val set 0.688x speedup, step: 46
JOB test speedup 0.7834152687433725
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001064| train set 4.888x speedup, test set 1.073x speedup, val set 0.688x speedup, step: 47
early stopping at epoch 46
Training per epoch cost 3.792 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.526, test speedup 0.860, val speedup 1.109
TPCH best validation speedup epoch: 0, train speedup 2.526, test speedup 3.303, val speedup 1.109
TPCH Skew best validation speedup epoch: 0, train speedup 2.526, test speedup 1.200, val speedup 1.109
execution cost 0:04:03.366633
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.875621, and there are 13720 training samples
in channel 9
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.2004900640191734
Epoch 0/300 |loss: 0.033366| train set 2.526x speedup, test set 1.200x speedup, val set 1.109x speedup, step: 1
JOB test speedup 1.0549155699288069
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.938977054830216
Epoch 1/300 |loss: 0.012052| train set 2.218x speedup, test set 1.939x speedup, val set 0.925x speedup, step: 2
JOB test speedup 0.9544689859191171
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.009177| train set 3.330x speedup, test set 1.491x speedup, val set 0.927x speedup, step: 3
JOB test speedup 0.8934067375844578
TPCH test speedup 9.669632797414597
TPCH skew test speedup 1.9407621188763453
Epoch 3/300 |loss: 0.006822| train set 3.922x speedup, test set 1.941x speedup, val set 0.927x speedup, step: 4
JOB test speedup 0.9030726490646168
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 4/300 |loss: 0.007219| train set 3.585x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 5
JOB test speedup 0.9485104987267307
TPCH test speedup 5.755131742909048
TPCH skew test speedup 0.7800589496906053
Epoch 5/300 |loss: 0.005592| train set 4.118x speedup, test set 0.780x speedup, val set 0.667x speedup, step: 6
JOB test speedup 0.9075077248604051
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 6/300 |loss: 0.004642| train set 4.104x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 7
JOB test speedup 0.8427645489152777
TPCH test speedup 8.117521852460504
TPCH skew test speedup 0.9817637166756344
Epoch 7/300 |loss: 0.004011| train set 4.675x speedup, test set 0.982x speedup, val set 0.786x speedup, step: 8
JOB test speedup 0.9061125071469669
TPCH test speedup 5.39982318379696
TPCH skew test speedup 0.9786338862294391
Epoch 8/300 |loss: 0.004243| train set 4.349x speedup, test set 0.979x speedup, val set 0.887x speedup, step: 9
JOB test speedup 0.8892263801092594
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9817637166756344
Epoch 9/300 |loss: 0.003883| train set 4.487x speedup, test set 0.982x speedup, val set 0.647x speedup, step: 10
JOB test speedup 0.8242825029959995
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.003278| train set 4.679x speedup, test set 0.982x speedup, val set 0.733x speedup, step: 11
JOB test speedup 0.9150093429482711
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.003265| train set 4.711x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.7692045887595884
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9817637166756344
Epoch 12/300 |loss: 0.002964| train set 4.606x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.7793752125193087
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 13/300 |loss: 0.002870| train set 4.602x speedup, test set 0.982x speedup, val set 0.799x speedup, step: 14
JOB test speedup 0.7964579802015201
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9817637166756344
Epoch 14/300 |loss: 0.002516| train set 4.564x speedup, test set 0.982x speedup, val set 0.887x speedup, step: 15
JOB test speedup 0.8880650119927138
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9786338862294391
Epoch 15/300 |loss: 0.002566| train set 4.682x speedup, test set 0.979x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.766209515344034
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 16/300 |loss: 0.002350| train set 4.890x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 17
JOB test speedup 0.8035371386272143
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9813067120737639
Epoch 17/300 |loss: 0.002207| train set 4.829x speedup, test set 0.981x speedup, val set 0.773x speedup, step: 18
JOB test speedup 0.7636918020905885
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9813067120737639
Epoch 18/300 |loss: 0.001959| train set 4.891x speedup, test set 0.981x speedup, val set 0.689x speedup, step: 19
JOB test speedup 0.8600488514957599
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 19/300 |loss: 0.001887| train set 4.887x speedup, test set 0.982x speedup, val set 0.730x speedup, step: 20
JOB test speedup 0.8125979239528762
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 20/300 |loss: 0.001975| train set 4.884x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 21
JOB test speedup 0.7838511614619742
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 21/300 |loss: 0.001749| train set 4.865x speedup, test set 0.982x speedup, val set 0.773x speedup, step: 22
JOB test speedup 0.7525836373419341
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0690157018936535
Epoch 22/300 |loss: 0.001639| train set 4.842x speedup, test set 1.069x speedup, val set 0.885x speedup, step: 23
JOB test speedup 0.8332291005121576
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 23/300 |loss: 0.001645| train set 4.857x speedup, test set 0.982x speedup, val set 0.688x speedup, step: 24
JOB test speedup 0.7792019958761178
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 24/300 |loss: 0.001815| train set 4.513x speedup, test set 0.982x speedup, val set 0.709x speedup, step: 25
JOB test speedup 0.8712107147814763
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001610| train set 4.893x speedup, test set 1.073x speedup, val set 0.730x speedup, step: 26
JOB test speedup 0.7949947273315436
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0690157018936535
Epoch 26/300 |loss: 0.001415| train set 4.891x speedup, test set 1.069x speedup, val set 0.688x speedup, step: 27
JOB test speedup 0.8560294953945055
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0732521468634937
Epoch 27/300 |loss: 0.001542| train set 4.876x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.7738086511135556
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001453| train set 4.896x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 29
JOB test speedup 0.7600345802478797
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 29/300 |loss: 0.001407| train set 4.855x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.772004288152054
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001195| train set 4.910x speedup, test set 1.073x speedup, val set 0.958x speedup, step: 31
JOB test speedup 0.7629627946903549
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001245| train set 4.854x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.7615263894387352
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001110| train set 4.888x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 33
JOB test speedup 0.8951883171364216
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001103| train set 4.854x speedup, test set 1.073x speedup, val set 0.717x speedup, step: 34
JOB test speedup 0.7881725242042632
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 34/300 |loss: 0.001274| train set 4.896x speedup, test set 1.072x speedup, val set 0.728x speedup, step: 35
JOB test speedup 0.7731054271023172
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001283| train set 4.904x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.770994015743707
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001054| train set 4.902x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.7726769642753408
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 37/300 |loss: 0.001019| train set 4.902x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.7840640368469229
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001060| train set 4.892x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 39
JOB test speedup 0.7627201508447254
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0724586230372417
Epoch 39/300 |loss: 0.001029| train set 4.890x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.8040857893618496
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001071| train set 4.875x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 41
JOB test speedup 0.8114712151816782
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001033| train set 4.894x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 42
JOB test speedup 0.8475006606859306
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001177| train set 4.851x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.8250958764070143
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001173| train set 4.895x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.7795099109314578
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.000980| train set 4.891x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.81036447556298
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 45/300 |loss: 0.000945| train set 4.905x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.7991493623644571
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0110849455697632
Epoch 46/300 |loss: 0.000975| train set 4.890x speedup, test set 1.011x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.796056180150679
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 47/300 |loss: 0.000959| train set 4.894x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.7915207908336751
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 48/300 |loss: 0.001091| train set 4.842x speedup, test set 0.836x speedup, val set 0.728x speedup, step: 49
JOB test speedup 0.7731029999089358
TPCH test speedup 5.398567432253971
TPCH skew test speedup 1.0722058282917282
Epoch 49/300 |loss: 0.001109| train set 4.874x speedup, test set 1.072x speedup, val set 0.702x speedup, step: 50
early stopping at epoch 49
Training per epoch cost 3.869 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.526, test speedup 0.860, val speedup 1.109
TPCH best validation speedup epoch: 0, train speedup 2.526, test speedup 3.303, val speedup 1.109
TPCH Skew best validation speedup epoch: 0, train speedup 2.526, test speedup 1.200, val speedup 1.109
execution cost 0:04:23.265963
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.920803, and there are 13720 training samples
in channel 9
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.2004900640191734
Epoch 0/300 |loss: 0.033366| train set 2.526x speedup, test set 1.200x speedup, val set 1.109x speedup, step: 1
JOB test speedup 1.0299265891701357
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.938977054830216
Epoch 1/300 |loss: 0.012050| train set 2.218x speedup, test set 1.939x speedup, val set 0.925x speedup, step: 2
JOB test speedup 0.9165188568800773
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.009188| train set 3.325x speedup, test set 1.491x speedup, val set 0.925x speedup, step: 3
JOB test speedup 0.9159207449939133
TPCH test speedup 9.669632797414597
TPCH skew test speedup 1.9407621188763453
Epoch 3/300 |loss: 0.006844| train set 3.929x speedup, test set 1.941x speedup, val set 0.927x speedup, step: 4
JOB test speedup 0.9678805489965318
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 4/300 |loss: 0.007208| train set 3.608x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 5
JOB test speedup 0.9205021339465819
TPCH test speedup 6.183233697972903
TPCH skew test speedup 0.7800589496906053
Epoch 5/300 |loss: 0.005645| train set 3.723x speedup, test set 0.780x speedup, val set 0.667x speedup, step: 6
JOB test speedup 0.9272641305872267
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 6/300 |loss: 0.004683| train set 3.990x speedup, test set 0.979x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.8995300240038903
TPCH test speedup 8.117521852460504
TPCH skew test speedup 0.9817637166756344
Epoch 7/300 |loss: 0.004049| train set 4.036x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 8
JOB test speedup 0.9574296115615105
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 8/300 |loss: 0.004419| train set 4.517x speedup, test set 0.979x speedup, val set 0.886x speedup, step: 9
JOB test speedup 0.9363314190139693
TPCH test speedup 5.755131742909048
TPCH skew test speedup 0.7800589496906053
Epoch 9/300 |loss: 0.003824| train set 4.792x speedup, test set 0.780x speedup, val set 0.886x speedup, step: 10
JOB test speedup 0.8622366165539196
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.003208| train set 4.687x speedup, test set 0.982x speedup, val set 0.887x speedup, step: 11
JOB test speedup 0.8072536322904085
TPCH test speedup 8.117521852460504
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.003178| train set 4.826x speedup, test set 0.982x speedup, val set 0.886x speedup, step: 12
JOB test speedup 0.7729685430264158
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.7800589496906053
Epoch 12/300 |loss: 0.003078| train set 4.683x speedup, test set 0.780x speedup, val set 0.887x speedup, step: 13
JOB test speedup 0.8667862074596159
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 13/300 |loss: 0.002784| train set 4.858x speedup, test set 0.982x speedup, val set 0.887x speedup, step: 14
JOB test speedup 0.8296656180581953
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.7800589496906053
Epoch 14/300 |loss: 0.002441| train set 4.592x speedup, test set 0.780x speedup, val set 0.886x speedup, step: 15
JOB test speedup 0.8028113854772609
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9781797901403877
Epoch 15/300 |loss: 0.002536| train set 4.755x speedup, test set 0.978x speedup, val set 0.887x speedup, step: 16
JOB test speedup 0.7917854075332023
TPCH test speedup 5.662532596213745
TPCH skew test speedup 0.9817637166756344
Epoch 16/300 |loss: 0.002361| train set 4.889x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 17
JOB test speedup 0.7790855431606786
TPCH test speedup 8.658764667286961
TPCH skew test speedup 0.9813067120737639
Epoch 17/300 |loss: 0.002064| train set 4.837x speedup, test set 0.981x speedup, val set 0.887x speedup, step: 18
JOB test speedup 0.7730756230074705
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9813067120737639
Epoch 18/300 |loss: 0.001843| train set 4.846x speedup, test set 0.981x speedup, val set 0.689x speedup, step: 19
JOB test speedup 0.7886195329494805
TPCH test speedup 5.634092974709447
TPCH skew test speedup 0.8874397048921043
Epoch 19/300 |loss: 0.001741| train set 4.863x speedup, test set 0.887x speedup, val set 0.690x speedup, step: 20
JOB test speedup 0.8057088113380466
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9302716218091621
Epoch 20/300 |loss: 0.001687| train set 4.883x speedup, test set 0.930x speedup, val set 0.667x speedup, step: 21
JOB test speedup 0.7603827946308398
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9817637166756344
Epoch 21/300 |loss: 0.001587| train set 4.820x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 22
JOB test speedup 0.7503731581430328
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9298612885054874
Epoch 22/300 |loss: 0.001520| train set 4.861x speedup, test set 0.930x speedup, val set 0.888x speedup, step: 23
JOB test speedup 0.7597292941381041
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9177986471488142
Epoch 23/300 |loss: 0.001535| train set 4.874x speedup, test set 0.918x speedup, val set 0.679x speedup, step: 24
JOB test speedup 0.7754075508131916
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9302716218091621
Epoch 24/300 |loss: 0.001737| train set 4.662x speedup, test set 0.930x speedup, val set 0.689x speedup, step: 25
JOB test speedup 0.7495164225095383
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9298612885054874
Epoch 25/300 |loss: 0.001536| train set 4.900x speedup, test set 0.930x speedup, val set 0.689x speedup, step: 26
JOB test speedup 0.7594962451036081
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 26/300 |loss: 0.001306| train set 4.759x speedup, test set 1.012x speedup, val set 0.689x speedup, step: 27
JOB test speedup 0.7718125791670543
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 27/300 |loss: 0.001420| train set 4.881x speedup, test set 1.072x speedup, val set 0.688x speedup, step: 28
JOB test speedup 0.7729011542112472
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001309| train set 4.895x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 29
JOB test speedup 0.7728574750692518
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 29/300 |loss: 0.001373| train set 4.824x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.8138058655978292
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 30/300 |loss: 0.001134| train set 4.888x speedup, test set 1.072x speedup, val set 0.703x speedup, step: 31
JOB test speedup 0.767837383601799
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001247| train set 4.853x speedup, test set 1.072x speedup, val set 0.703x speedup, step: 32
JOB test speedup 0.7623352853907515
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001150| train set 4.893x speedup, test set 1.073x speedup, val set 0.666x speedup, step: 33
JOB test speedup 0.7646380058609468
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 33/300 |loss: 0.001147| train set 4.833x speedup, test set 1.012x speedup, val set 0.703x speedup, step: 34
JOB test speedup 0.7665645808753037
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 34/300 |loss: 0.001168| train set 4.887x speedup, test set 1.072x speedup, val set 0.728x speedup, step: 35
JOB test speedup 0.7786148717018488
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.0722058282917282
Epoch 35/300 |loss: 0.001362| train set 4.662x speedup, test set 1.072x speedup, val set 0.773x speedup, step: 36
JOB test speedup 0.7779033379840793
TPCH test speedup 8.803116840026908
TPCH skew test speedup 1.0722058282917282
Epoch 36/300 |loss: 0.001045| train set 4.890x speedup, test set 1.072x speedup, val set 0.689x speedup, step: 37
JOB test speedup 0.7686570369545506
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 37/300 |loss: 0.001134| train set 4.894x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.7584735992014715
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001093| train set 4.905x speedup, test set 1.073x speedup, val set 0.693x speedup, step: 39
JOB test speedup 0.7409441412627682
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 39/300 |loss: 0.001119| train set 4.900x speedup, test set 1.072x speedup, val set 0.703x speedup, step: 40
JOB test speedup 0.7439857076939942
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001136| train set 4.862x speedup, test set 1.073x speedup, val set 0.917x speedup, step: 41
JOB test speedup 0.7406013444905509
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 41/300 |loss: 0.001131| train set 4.893x speedup, test set 1.012x speedup, val set 0.689x speedup, step: 42
JOB test speedup 0.7692198075936422
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 42/300 |loss: 0.001236| train set 4.860x speedup, test set 1.012x speedup, val set 0.961x speedup, step: 43
JOB test speedup 0.7400093447884648
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001085| train set 4.904x speedup, test set 1.073x speedup, val set 0.767x speedup, step: 44
JOB test speedup 0.7540967906178077
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001018| train set 4.814x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 45
JOB test speedup 0.7498461088206586
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.000972| train set 4.899x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 46
JOB test speedup 0.7590478084945126
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001017| train set 4.893x speedup, test set 1.073x speedup, val set 0.666x speedup, step: 47
JOB test speedup 0.7539252129580492
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.000940| train set 4.889x speedup, test set 1.073x speedup, val set 0.909x speedup, step: 48
JOB test speedup 0.739068232517727
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001155| train set 4.839x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 49
JOB test speedup 0.772017838413667
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0722058282917282
Epoch 49/300 |loss: 0.001148| train set 4.887x speedup, test set 1.072x speedup, val set 0.909x speedup, step: 50
early stopping at epoch 49
Training per epoch cost 3.852 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.526, test speedup 0.860, val speedup 1.109
TPCH best validation speedup epoch: 0, train speedup 2.526, test speedup 3.303, val speedup 1.109
TPCH Skew best validation speedup epoch: 0, train speedup 2.526, test speedup 1.200, val speedup 1.109
execution cost 0:04:22.147672
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.967564, and there are 13720 training samples
in channel 9
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.2004900640191734
Epoch 0/300 |loss: 0.033366| train set 2.526x speedup, test set 1.200x speedup, val set 1.109x speedup, step: 1
JOB test speedup 1.0549155699288069
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.938977054830216
Epoch 1/300 |loss: 0.012052| train set 2.218x speedup, test set 1.939x speedup, val set 0.925x speedup, step: 2
JOB test speedup 0.887117241684555
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.009176| train set 3.326x speedup, test set 1.491x speedup, val set 1.012x speedup, step: 3
JOB test speedup 0.9354372293218801
TPCH test speedup 9.669632797414597
TPCH skew test speedup 1.9407621188763453
Epoch 3/300 |loss: 0.006817| train set 3.767x speedup, test set 1.941x speedup, val set 0.927x speedup, step: 4
JOB test speedup 0.9251040985232183
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 4/300 |loss: 0.007154| train set 3.752x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 5
JOB test speedup 0.9512543754263078
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9817637166756344
Epoch 5/300 |loss: 0.005534| train set 4.094x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 6
JOB test speedup 0.9253380098982077
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9786338862294391
Epoch 6/300 |loss: 0.004601| train set 4.121x speedup, test set 0.979x speedup, val set 0.668x speedup, step: 7
JOB test speedup 0.9355176263995911
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.7800589496906053
Epoch 7/300 |loss: 0.003919| train set 4.468x speedup, test set 0.780x speedup, val set 0.668x speedup, step: 8
JOB test speedup 0.9430737545038161
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 8/300 |loss: 0.004018| train set 4.387x speedup, test set 0.979x speedup, val set 0.887x speedup, step: 9
JOB test speedup 0.9543694434504069
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9817637166756344
Epoch 9/300 |loss: 0.003703| train set 4.596x speedup, test set 0.982x speedup, val set 0.668x speedup, step: 10
JOB test speedup 0.8070603120245458
TPCH test speedup 8.661995537726837
TPCH skew test speedup 0.9786338862294391
Epoch 10/300 |loss: 0.003073| train set 4.076x speedup, test set 0.979x speedup, val set 0.708x speedup, step: 11
JOB test speedup 0.9518393567596085
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.003087| train set 4.885x speedup, test set 0.982x speedup, val set 0.647x speedup, step: 12
JOB test speedup 0.9239934252857639
TPCH test speedup 9.669632797414597
TPCH skew test speedup 0.9817637166756344
Epoch 12/300 |loss: 0.003063| train set 4.742x speedup, test set 0.982x speedup, val set 0.769x speedup, step: 13
JOB test speedup 0.8120973564206361
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 13/300 |loss: 0.002877| train set 4.805x speedup, test set 0.982x speedup, val set 0.688x speedup, step: 14
JOB test speedup 0.908586369502114
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 14/300 |loss: 0.002530| train set 4.679x speedup, test set 0.982x speedup, val set 0.850x speedup, step: 15
JOB test speedup 0.9672500297495972
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.9786338862294391
Epoch 15/300 |loss: 0.002496| train set 4.682x speedup, test set 0.979x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.9862187657143475
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 16/300 |loss: 0.002334| train set 4.886x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 17
JOB test speedup 0.9305521066055259
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 17/300 |loss: 0.002168| train set 4.815x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 18
JOB test speedup 0.9212935128281609
TPCH test speedup 5.39982318379696
TPCH skew test speedup 0.7800543294796163
Epoch 18/300 |loss: 0.001990| train set 4.340x speedup, test set 0.780x speedup, val set 0.666x speedup, step: 19
JOB test speedup 0.9407441384456483
TPCH test speedup 5.774973960403742
TPCH skew test speedup 0.7800589496906053
Epoch 19/300 |loss: 0.001872| train set 4.874x speedup, test set 0.780x speedup, val set 0.689x speedup, step: 20
JOB test speedup 0.8292520550679287
TPCH test speedup 5.922207392700119
TPCH skew test speedup 0.7800589496906053
Epoch 20/300 |loss: 0.001781| train set 4.861x speedup, test set 0.780x speedup, val set 0.667x speedup, step: 21
JOB test speedup 0.8224521520390805
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9817637166756344
Epoch 21/300 |loss: 0.001684| train set 4.840x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 22
JOB test speedup 0.8070036676971597
TPCH test speedup 5.39982318379696
TPCH skew test speedup 0.7800589496906053
Epoch 22/300 |loss: 0.001636| train set 4.850x speedup, test set 0.780x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.8016596745444966
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 0.9817637166756344
Epoch 23/300 |loss: 0.001593| train set 4.866x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 24
JOB test speedup 0.7752447452784758
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 24/300 |loss: 0.001777| train set 4.652x speedup, test set 0.982x speedup, val set 0.667x speedup, step: 25
JOB test speedup 0.8966955227079707
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 25/300 |loss: 0.001477| train set 4.907x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 26
JOB test speedup 0.8266995435151386
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001285| train set 4.895x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 27
JOB test speedup 0.9395989074937752
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 27/300 |loss: 0.001409| train set 4.895x speedup, test set 0.836x speedup, val set 0.728x speedup, step: 28
JOB test speedup 0.9050292767108771
TPCH test speedup 5.398567432253971
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001317| train set 4.858x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 29
JOB test speedup 0.8897317268667806
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 29/300 |loss: 0.001504| train set 4.811x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 30
JOB test speedup 0.8323811418013483
TPCH test speedup 4.180647752613569
TPCH skew test speedup 0.8364268861084918
Epoch 30/300 |loss: 0.001165| train set 4.903x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 31
JOB test speedup 0.7991292516539206
TPCH test speedup 4.0131816882398965
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001248| train set 4.853x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 32
JOB test speedup 0.9174681889149124
TPCH test speedup 4.0131816882398965
TPCH skew test speedup 0.8364268861084918
Epoch 32/300 |loss: 0.001128| train set 4.880x speedup, test set 0.836x speedup, val set 0.688x speedup, step: 33
JOB test speedup 0.930892611892339
TPCH test speedup 4.320175388140374
TPCH skew test speedup 0.8364268861084918
Epoch 33/300 |loss: 0.001220| train set 4.843x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 34
JOB test speedup 0.955146656960629
TPCH test speedup 4.319710551277606
TPCH skew test speedup 0.8360951501764292
Epoch 34/300 |loss: 0.001224| train set 4.891x speedup, test set 0.836x speedup, val set 0.728x speedup, step: 35
JOB test speedup 0.8346265436327398
TPCH test speedup 4.083735291605358
TPCH skew test speedup 0.8364268861084918
Epoch 35/300 |loss: 0.001384| train set 4.904x speedup, test set 0.836x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.9064495095990367
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8364268861084918
Epoch 36/300 |loss: 0.001048| train set 4.896x speedup, test set 0.836x speedup, val set 0.689x speedup, step: 37
JOB test speedup 0.9246026244372374
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8364268861084918
Epoch 37/300 |loss: 0.001050| train set 4.902x speedup, test set 0.836x speedup, val set 0.728x speedup, step: 38
JOB test speedup 0.7974887023085814
TPCH test speedup 4.402046136928784
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001121| train set 4.825x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 39
JOB test speedup 0.7909592369397097
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8364268861084918
Epoch 39/300 |loss: 0.001088| train set 4.875x speedup, test set 0.836x speedup, val set 0.666x speedup, step: 40
JOB test speedup 0.8123969569417717
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.011570113917866
Epoch 40/300 |loss: 0.001083| train set 4.891x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.802284092530748
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9815184567858845
Epoch 41/300 |loss: 0.001144| train set 4.888x speedup, test set 0.982x speedup, val set 0.666x speedup, step: 42
JOB test speedup 0.8483770173296907
TPCH test speedup 4.402046136928784
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001309| train set 4.843x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.8168773570956587
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001164| train set 4.897x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.8181196584182676
TPCH test speedup 5.662532596213745
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.000997| train set 4.877x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.8982172134780333
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8360951501764292
Epoch 45/300 |loss: 0.000955| train set 4.899x speedup, test set 0.836x speedup, val set 0.726x speedup, step: 46
JOB test speedup 0.9233137797205085
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8367808881163842
Epoch 46/300 |loss: 0.000952| train set 4.898x speedup, test set 0.837x speedup, val set 0.702x speedup, step: 47
JOB test speedup 0.9082360904564586
TPCH test speedup 4.320175388140374
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.000946| train set 4.817x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.8905372384689567
TPCH test speedup 4.083735291605358
TPCH skew test speedup 0.8364268861084918
Epoch 48/300 |loss: 0.001097| train set 4.854x speedup, test set 0.836x speedup, val set 0.728x speedup, step: 49
JOB test speedup 0.8992005928932335
TPCH test speedup 4.402046136928784
TPCH skew test speedup 0.8360951501764292
Epoch 49/300 |loss: 0.001118| train set 4.876x speedup, test set 0.836x speedup, val set 0.702x speedup, step: 50
early stopping at epoch 49
Training per epoch cost 3.825 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.526, test speedup 0.860, val speedup 1.109
TPCH best validation speedup epoch: 0, train speedup 2.526, test speedup 3.303, val speedup 1.109
TPCH Skew best validation speedup epoch: 0, train speedup 2.526, test speedup 1.200, val speedup 1.109
execution cost 0:04:21.230407
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.243053, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9441807308954646
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010646| train set 2.898x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 0.9998260476976032
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010832| train set 3.965x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9551706226847102
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.541477900848911
Epoch 4/300 |loss: 0.007853| train set 3.866x speedup, test set 1.541x speedup, val set 0.968x speedup, step: 5
JOB test speedup 0.9542438845319171
TPCH test speedup 4.964421461081998
TPCH skew test speedup 1.9407621188763453
Epoch 5/300 |loss: 0.006969| train set 3.954x speedup, test set 1.941x speedup, val set 0.967x speedup, step: 6
JOB test speedup 0.9458769855728255
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005401| train set 4.590x speedup, test set 1.953x speedup, val set 0.967x speedup, step: 7
JOB test speedup 0.9714535597261258
TPCH test speedup 6.778791205110246
TPCH skew test speedup 1.2896847196847903
Epoch 7/300 |loss: 0.005032| train set 4.178x speedup, test set 1.290x speedup, val set 0.981x speedup, step: 8
JOB test speedup 0.925244437637004
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004587| train set 4.644x speedup, test set 1.953x speedup, val set 0.689x speedup, step: 9
JOB test speedup 0.938665526883888
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 9/300 |loss: 0.004186| train set 4.682x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 10
JOB test speedup 0.869685588329213
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 10/300 |loss: 0.004973| train set 4.672x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 11
JOB test speedup 0.8890147198432481
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.004070| train set 4.068x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.8696438051138985
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 12/300 |loss: 0.003278| train set 4.285x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.8712855488454765
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003332| train set 4.235x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 14
JOB test speedup 0.8164895791922577
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003214| train set 4.736x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.8551740269769244
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 15/300 |loss: 0.002981| train set 4.304x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.8379134980955625
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002795| train set 4.894x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 17
JOB test speedup 0.8786671180686557
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002654| train set 4.810x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 18
JOB test speedup 0.8703983419264602
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002446| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.8775703634046235
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002153| train set 4.918x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.8654841851994618
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.001869| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.8702684175885194
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.001925| train set 4.887x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.7627121709401103
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001808| train set 4.842x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 23
JOB test speedup 0.880252458286462
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001789| train set 4.725x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 24
JOB test speedup 0.8637745907959704
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001577| train set 4.919x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.8718672195875756
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001622| train set 4.933x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.7799022421828926
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001511| train set 4.906x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.7691404197205707
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001331| train set 4.812x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.7709741674612044
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001290| train set 4.942x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 29
JOB test speedup 0.8820423180060873
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001321| train set 4.889x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.7703878787134973
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001249| train set 4.772x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 31
JOB test speedup 0.7671846787655441
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001241| train set 4.818x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 32
JOB test speedup 0.8625760405736053
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001195| train set 4.929x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7629635954016106
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001283| train set 4.933x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.7687812863755638
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001131| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.7701396650495562
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001267| train set 4.928x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.7746011101184364
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001267| train set 4.934x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 37
JOB test speedup 0.8806995585109366
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001138| train set 4.889x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8762036809120388
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001097| train set 4.934x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 39
JOB test speedup 0.7622556080871878
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001195| train set 4.929x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7633192611322362
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001120| train set 4.938x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 41
JOB test speedup 0.8773625092403134
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001086| train set 4.941x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7696062833631463
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001032| train set 4.842x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.7709977214697501
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001111| train set 4.922x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 44
JOB test speedup 0.7750856728612866
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001325| train set 4.737x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7698221702575972
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001090| train set 4.879x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.776747364081933
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001081| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.7720352297161923
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001114| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.7749916310992664
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001027| train set 4.850x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 49
JOB test speedup 0.7670373382305602
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.001031| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.7738319841725299
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001073| train set 4.930x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 51
JOB test speedup 0.782160548161946
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001087| train set 4.929x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 52
early stopping at epoch 51
Training per epoch cost 2.535 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:11.646760
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.247818, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9441807308954646
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010655| train set 2.880x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 0.9776683416008638
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.4909581349036352
Epoch 3/300 |loss: 0.010794| train set 3.961x speedup, test set 1.491x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9505082437984693
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.4909581349036352
Epoch 4/300 |loss: 0.007970| train set 3.780x speedup, test set 1.491x speedup, val set 0.968x speedup, step: 5
JOB test speedup 0.9500667242015756
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.9407621188763453
Epoch 5/300 |loss: 0.007065| train set 3.986x speedup, test set 1.941x speedup, val set 0.979x speedup, step: 6
JOB test speedup 0.9802081999024883
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005441| train set 4.149x speedup, test set 1.953x speedup, val set 0.923x speedup, step: 7
JOB test speedup 0.9505944955509591
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.2896847196847903
Epoch 7/300 |loss: 0.005099| train set 4.215x speedup, test set 1.290x speedup, val set 0.979x speedup, step: 8
JOB test speedup 0.9308814555575029
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004616| train set 4.745x speedup, test set 1.953x speedup, val set 0.925x speedup, step: 9
JOB test speedup 0.9319527396888956
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004180| train set 4.151x speedup, test set 1.953x speedup, val set 0.968x speedup, step: 10
JOB test speedup 0.8871541219541332
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 10/300 |loss: 0.005008| train set 4.122x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 11
JOB test speedup 0.9431189115986319
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 11/300 |loss: 0.004059| train set 3.880x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.9461966112581441
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.011570113917866
Epoch 12/300 |loss: 0.003307| train set 4.733x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 13
JOB test speedup 0.9017829864666153
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003359| train set 4.759x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 14
JOB test speedup 0.8783413699260062
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003181| train set 4.577x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.8928196907405878
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003133| train set 4.179x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.8887352603741445
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002980| train set 4.902x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 17
JOB test speedup 0.908876519885217
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002659| train set 4.933x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 18
JOB test speedup 0.8593405495519157
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002568| train set 4.919x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 19
JOB test speedup 0.9261466701084672
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002304| train set 4.907x speedup, test set 1.073x speedup, val set 0.729x speedup, step: 20
JOB test speedup 0.8560405387839166
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002159| train set 4.929x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.9124784283001237
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.002029| train set 4.808x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.9177450464841147
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001982| train set 4.826x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.8955329116514825
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001907| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.8963933694781939
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.011570113917866
Epoch 24/300 |loss: 0.001715| train set 4.848x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.9002727977239127
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001781| train set 4.888x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 26
JOB test speedup 0.9168606246629969
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001596| train set 4.895x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 27
JOB test speedup 0.7865096017281974
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001407| train set 4.662x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 28
JOB test speedup 0.865884301099453
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001367| train set 4.933x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 29
JOB test speedup 0.8969811324744291
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001442| train set 4.932x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 30
JOB test speedup 0.8587924996118591
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 30/300 |loss: 0.001339| train set 4.684x speedup, test set 1.106x speedup, val set 0.666x speedup, step: 31
JOB test speedup 0.8554889952056619
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001314| train set 4.793x speedup, test set 1.072x speedup, val set 0.689x speedup, step: 32
JOB test speedup 0.8755968069511828
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001233| train set 4.916x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 33
JOB test speedup 0.8624998956465799
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001263| train set 4.931x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 34
JOB test speedup 0.7446767879658647
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001203| train set 4.938x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 35
JOB test speedup 0.8625835051974445
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001384| train set 4.926x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 36
JOB test speedup 0.8346496762914808
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001285| train set 4.940x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 37
JOB test speedup 0.8007912036086194
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001156| train set 4.938x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 38
JOB test speedup 0.8644570636918278
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001054| train set 4.933x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 39
JOB test speedup 0.7379510387170364
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001219| train set 4.904x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 40
JOB test speedup 0.7457601911509031
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001143| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.8500405462525706
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001101| train set 4.944x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7390316474064
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001064| train set 4.599x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 43
JOB test speedup 0.8699874251574857
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0730427386394326
Epoch 43/300 |loss: 0.001159| train set 4.814x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 44
JOB test speedup 0.7427108360259075
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001213| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7674223756333108
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001061| train set 4.928x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.8783090912950499
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001068| train set 4.782x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.8891518207349496
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001206| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
early stopping at epoch 47
Training per epoch cost 2.503 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:02:54.629561
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.236371, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015587| train set 2.689x speedup, test set 1.374x speedup, val set 1.193x speedup, step: 2
JOB test speedup 1.0150646203384428
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010664| train set 3.052x speedup, test set 1.490x speedup, val set 0.994x speedup, step: 3
JOB test speedup 0.9998503878895907
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010766| train set 3.971x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 1.0400734182238656
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.4909581349036352
Epoch 4/300 |loss: 0.007925| train set 3.472x speedup, test set 1.491x speedup, val set 0.997x speedup, step: 5
JOB test speedup 1.0512939649432942
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.006904| train set 3.961x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 6
JOB test speedup 1.0013589430730208
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005398| train set 4.056x speedup, test set 1.953x speedup, val set 0.996x speedup, step: 7
JOB test speedup 1.0565441069762957
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.2896847196847903
Epoch 7/300 |loss: 0.005007| train set 4.311x speedup, test set 1.290x speedup, val set 0.996x speedup, step: 8
JOB test speedup 1.0297679612800368
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.2896847196847903
Epoch 8/300 |loss: 0.004539| train set 4.611x speedup, test set 1.290x speedup, val set 0.981x speedup, step: 9
JOB test speedup 1.0202924611653073
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004356| train set 4.620x speedup, test set 1.953x speedup, val set 0.998x speedup, step: 10
JOB test speedup 0.9844027615703294
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 10/300 |loss: 0.005134| train set 4.090x speedup, test set 1.953x speedup, val set 0.997x speedup, step: 11
JOB test speedup 0.9502659483329765
TPCH test speedup 8.4816832137052
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.004233| train set 4.227x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.9197564210302633
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 12/300 |loss: 0.003413| train set 4.829x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.9315801530718573
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003401| train set 4.235x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 14
JOB test speedup 0.8785450615582278
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003350| train set 4.850x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 15
JOB test speedup 0.9102150640592631
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003139| train set 4.408x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 16
JOB test speedup 0.8656760364005953
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.003012| train set 4.795x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 17
JOB test speedup 0.8903728897355218
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002755| train set 4.901x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 18
JOB test speedup 0.8680080522921844
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002458| train set 4.923x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.9427366339746921
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002170| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.8442730743235982
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002031| train set 4.913x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.8250387509606608
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.002013| train set 4.894x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.8795020309593987
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.002026| train set 4.521x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 23
JOB test speedup 0.8233483405628396
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001907| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.8470885646677994
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001683| train set 4.887x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.8439986910879334
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001847| train set 4.894x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.8968101808067528
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001537| train set 4.937x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.8821134214510991
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001422| train set 4.880x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.8455096029915341
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001383| train set 4.934x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 29
JOB test speedup 0.8761885226916117
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001498| train set 4.895x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.9191459705153109
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001341| train set 4.816x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 31
JOB test speedup 0.8975780726448852
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001352| train set 4.849x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.8891743211306573
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001282| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.8956811338432219
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001293| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.8775127336228726
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001206| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.8973601948923425
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001254| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.909482294634495
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001213| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.9006714998680473
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001170| train set 4.929x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8653823527005358
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001146| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.9006774763012846
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001125| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.8998520163413946
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001119| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.9041558568633217
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001103| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.8974573127294818
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001083| train set 4.919x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.9368801649467812
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001142| train set 4.919x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.8814964399300262
TPCH test speedup 5.1831003698754134
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001235| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.864373914614776
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001031| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.8996694560585564
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001105| train set 4.950x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.9299186690107725
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0722058282917282
Epoch 47/300 |loss: 0.001135| train set 4.947x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.9162902723948044
TPCH test speedup 8.117521852460504
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001003| train set 4.868x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.9302475390756532
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.000975| train set 4.943x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.8954885492788707
TPCH test speedup 6.408649839329796
TPCH skew test speedup 1.1058053740032083
Epoch 50/300 |loss: 0.001087| train set 4.944x speedup, test set 1.106x speedup, val set 0.731x speedup, step: 51
JOB test speedup 0.9258683298723072
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001141| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 52
early stopping at epoch 51
Training per epoch cost 2.474 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:06.936229
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.296763, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9441807308954646
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010646| train set 2.898x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 0.9998260476976032
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010830| train set 3.965x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9762972402569061
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.3753465385821884
Epoch 4/300 |loss: 0.007853| train set 3.993x speedup, test set 1.375x speedup, val set 0.967x speedup, step: 5
JOB test speedup 0.9542464930152977
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.006924| train set 3.835x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 6
JOB test speedup 0.9722708963107138
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005422| train set 4.583x speedup, test set 1.953x speedup, val set 0.979x speedup, step: 7
JOB test speedup 0.9272059886502644
TPCH test speedup 4.320175388140374
TPCH skew test speedup 1.2896847196847903
Epoch 7/300 |loss: 0.005054| train set 4.324x speedup, test set 1.290x speedup, val set 0.981x speedup, step: 8
JOB test speedup 0.9076075298793501
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 8/300 |loss: 0.004687| train set 4.506x speedup, test set 1.073x speedup, val set 0.709x speedup, step: 9
JOB test speedup 0.8806064992996481
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004233| train set 4.732x speedup, test set 1.953x speedup, val set 0.689x speedup, step: 10
JOB test speedup 0.865847079095152
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 10/300 |loss: 0.005125| train set 4.236x speedup, test set 1.073x speedup, val set 0.968x speedup, step: 11
JOB test speedup 0.9051936939353796
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 11/300 |loss: 0.004096| train set 4.200x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.9242903119545889
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.011570113917866
Epoch 12/300 |loss: 0.003330| train set 4.869x speedup, test set 1.012x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.8719174213192685
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003361| train set 4.244x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 14
JOB test speedup 0.8888421469620618
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 14/300 |loss: 0.003167| train set 4.856x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.870991049605058
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003124| train set 4.574x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.8383958044350515
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.003024| train set 4.779x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 17
JOB test speedup 0.9592408132995928
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002735| train set 4.880x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 18
JOB test speedup 0.8902134359658288
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002576| train set 4.913x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 19
JOB test speedup 0.9255734320402699
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002237| train set 4.911x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.8768131372176661
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002065| train set 4.913x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.9119698644649119
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.001967| train set 4.757x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.8663866275207746
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001973| train set 4.909x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.8529053540590692
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001935| train set 4.748x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.8902244088728853
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001783| train set 4.935x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 25
JOB test speedup 0.8999588770886228
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001746| train set 4.877x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.8480850819869434
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001529| train set 4.801x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.7359011057894879
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 27/300 |loss: 0.001427| train set 4.872x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 28
JOB test speedup 0.8762296524274824
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001420| train set 4.919x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 29
JOB test speedup 0.8647648110112197
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001438| train set 4.883x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.716946058900501
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001376| train set 4.819x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 31
JOB test speedup 0.7656699804682824
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001321| train set 4.807x speedup, test set 1.073x speedup, val set 0.673x speedup, step: 32
JOB test speedup 0.8599831886890307
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001243| train set 4.877x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7120614042713878
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001294| train set 4.926x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 34
JOB test speedup 0.7451395886361275
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001188| train set 4.915x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 35
JOB test speedup 0.8741776745353969
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001297| train set 4.911x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 36
JOB test speedup 0.872072905883935
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001290| train set 4.896x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 37
JOB test speedup 0.8373362184383399
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001141| train set 4.892x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 38
JOB test speedup 0.747097829076433
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001107| train set 4.837x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 39
JOB test speedup 0.7741924386497966
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001202| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7534061387914922
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001123| train set 4.774x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.8387722373909796
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001124| train set 4.935x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 42
JOB test speedup 0.7077721017551749
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001062| train set 4.935x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 43
JOB test speedup 0.7547553869885962
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001127| train set 4.922x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.7387735977576187
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001213| train set 4.895x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 45
JOB test speedup 0.7163070361434409
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001084| train set 4.929x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.760071842587863
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001080| train set 4.809x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.794894963398513
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001148| train set 4.933x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.7599681915656068
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001073| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.8767971022267901
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.001015| train set 4.947x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 50
JOB test speedup 0.7591685501403775
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001210| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 51
JOB test speedup 0.7683296674701995
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001164| train set 4.902x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 52
early stopping at epoch 51
Training per epoch cost 2.443 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:05.668405
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.263429, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015606| train set 2.608x speedup, test set 1.374x speedup, val set 1.193x speedup, step: 2
JOB test speedup 0.981544519571236
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010649| train set 3.736x speedup, test set 1.490x speedup, val set 0.994x speedup, step: 3
JOB test speedup 0.9998503878895907
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010817| train set 3.806x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9724700928627292
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 4/300 |loss: 0.008004| train set 3.775x speedup, test set 1.688x speedup, val set 0.997x speedup, step: 5
JOB test speedup 0.981347456022284
TPCH test speedup 5.774973960403742
TPCH skew test speedup 1.9407621188763453
Epoch 5/300 |loss: 0.006965| train set 3.862x speedup, test set 1.941x speedup, val set 0.979x speedup, step: 6
JOB test speedup 1.0391070815060282
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005380| train set 3.837x speedup, test set 1.953x speedup, val set 0.995x speedup, step: 7
JOB test speedup 1.0555832389769246
TPCH test speedup 6.778791205110246
TPCH skew test speedup 1.6881961066309221
Epoch 7/300 |loss: 0.005002| train set 4.183x speedup, test set 1.688x speedup, val set 0.986x speedup, step: 8
JOB test speedup 1.0150793758843275
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004690| train set 4.401x speedup, test set 1.953x speedup, val set 0.981x speedup, step: 9
JOB test speedup 0.9063103937796928
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004299| train set 4.341x speedup, test set 1.953x speedup, val set 0.997x speedup, step: 10
JOB test speedup 0.9768286222688798
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 10/300 |loss: 0.005115| train set 4.081x speedup, test set 1.953x speedup, val set 0.998x speedup, step: 11
JOB test speedup 0.9520008444628529
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 11/300 |loss: 0.004362| train set 4.111x speedup, test set 1.953x speedup, val set 0.997x speedup, step: 12
JOB test speedup 0.9681961441899585
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.7593746647537367
Epoch 12/300 |loss: 0.003554| train set 4.839x speedup, test set 1.759x speedup, val set 0.695x speedup, step: 13
JOB test speedup 0.961349447435435
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 13/300 |loss: 0.003501| train set 4.217x speedup, test set 1.953x speedup, val set 0.695x speedup, step: 14
JOB test speedup 0.9783991383278429
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 14/300 |loss: 0.003269| train set 4.829x speedup, test set 0.982x speedup, val set 0.703x speedup, step: 15
JOB test speedup 0.9707473040547288
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003118| train set 4.272x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 16
JOB test speedup 0.9379429089612832
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 16/300 |loss: 0.003139| train set 4.761x speedup, test set 0.982x speedup, val set 0.703x speedup, step: 17
JOB test speedup 0.9514840709432505
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002796| train set 4.893x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 18
JOB test speedup 0.956845169918711
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 18/300 |loss: 0.002528| train set 4.867x speedup, test set 1.953x speedup, val set 0.703x speedup, step: 19
JOB test speedup 0.9012976852316456
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 19/300 |loss: 0.002298| train set 4.901x speedup, test set 1.953x speedup, val set 0.703x speedup, step: 20
JOB test speedup 0.9468557261333393
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002085| train set 4.891x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 21
JOB test speedup 0.8658009377893424
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.7213902139310262
Epoch 21/300 |loss: 0.002112| train set 4.937x speedup, test set 1.721x speedup, val set 0.695x speedup, step: 22
JOB test speedup 0.9361183248206306
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 22/300 |loss: 0.002151| train set 4.621x speedup, test set 0.982x speedup, val set 0.694x speedup, step: 23
JOB test speedup 0.834952428427271
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001976| train set 4.935x speedup, test set 1.073x speedup, val set 0.690x speedup, step: 24
JOB test speedup 0.8356289068240472
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001836| train set 4.939x speedup, test set 1.073x speedup, val set 0.695x speedup, step: 25
JOB test speedup 0.9420799375524236
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001915| train set 4.899x speedup, test set 1.073x speedup, val set 0.738x speedup, step: 26
JOB test speedup 0.8402824872118037
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001667| train set 4.940x speedup, test set 1.073x speedup, val set 0.696x speedup, step: 27
JOB test speedup 0.8494017131836022
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001590| train set 4.754x speedup, test set 1.073x speedup, val set 0.695x speedup, step: 28
JOB test speedup 0.8835659983412257
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001556| train set 4.880x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.8458818608969643
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001644| train set 4.927x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.8770527889398567
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001456| train set 4.855x speedup, test set 1.073x speedup, val set 0.736x speedup, step: 31
JOB test speedup 0.7580819159849462
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001442| train set 4.830x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 32
JOB test speedup 0.851693872538789
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001312| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7525909078096338
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001286| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.8947099243751147
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001343| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.9004653747816771
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001337| train set 4.929x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8907279233025677
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001368| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8453104585233632
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001169| train set 4.858x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.9093068373061063
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001222| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.9080576880355125
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001178| train set 4.941x speedup, test set 1.073x speedup, val set 0.743x speedup, step: 40
JOB test speedup 0.7978843034612144
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001113| train set 4.941x speedup, test set 1.073x speedup, val set 0.743x speedup, step: 41
JOB test speedup 0.8972988190486233
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001122| train set 4.939x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 42
JOB test speedup 0.7439944000302982
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 42/300 |loss: 0.001061| train set 4.927x speedup, test set 1.106x speedup, val set 0.690x speedup, step: 43
JOB test speedup 0.7899415773916252
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001214| train set 4.929x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.9151261222941466
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001352| train set 4.855x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7969258404968415
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001015| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.8015357319372262
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001089| train set 4.843x speedup, test set 1.073x speedup, val set 0.743x speedup, step: 47
JOB test speedup 0.9204480935180133
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001087| train set 4.929x speedup, test set 1.073x speedup, val set 0.744x speedup, step: 48
JOB test speedup 0.7634864173288993
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.1006543550351717
Epoch 48/300 |loss: 0.000991| train set 4.949x speedup, test set 1.101x speedup, val set 0.743x speedup, step: 49
JOB test speedup 0.9077259939311872
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.001021| train set 4.946x speedup, test set 1.073x speedup, val set 0.744x speedup, step: 50
JOB test speedup 0.813886235628504
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001086| train set 4.796x speedup, test set 1.073x speedup, val set 0.729x speedup, step: 51
JOB test speedup 0.9117503493056895
TPCH test speedup 8.4816832137052
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001079| train set 4.939x speedup, test set 1.073x speedup, val set 0.743x speedup, step: 52
early stopping at epoch 51
Training per epoch cost 2.534 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:10.825340
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.294262, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.965139698312885
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010668| train set 2.809x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 1.0250009546032106
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010838| train set 3.806x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9762972402569061
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.6881961066309221
Epoch 4/300 |loss: 0.007917| train set 4.392x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 5
JOB test speedup 0.9496867115970123
TPCH test speedup 4.964421461081998
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.007095| train set 3.961x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 6
JOB test speedup 0.9431041872527022
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005379| train set 3.966x speedup, test set 1.953x speedup, val set 0.967x speedup, step: 7
JOB test speedup 0.95788473467208
TPCH test speedup 6.778791205110246
TPCH skew test speedup 1.953110004413681
Epoch 7/300 |loss: 0.005027| train set 4.299x speedup, test set 1.953x speedup, val set 0.981x speedup, step: 8
JOB test speedup 0.9317774815093975
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004640| train set 4.522x speedup, test set 1.953x speedup, val set 0.969x speedup, step: 9
JOB test speedup 0.9430220680031319
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 9/300 |loss: 0.004275| train set 4.690x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 10
JOB test speedup 0.8792029743614852
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 10/300 |loss: 0.004936| train set 4.220x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 11
JOB test speedup 0.9004934062124328
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 11/300 |loss: 0.004016| train set 3.917x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.9130828438480082
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.011570113917866
Epoch 12/300 |loss: 0.003352| train set 4.840x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 13
JOB test speedup 0.8899771080939424
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003329| train set 4.049x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 14
JOB test speedup 0.8888935308961243
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003264| train set 4.826x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.8973722511586988
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003079| train set 4.695x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.9227578817574366
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002895| train set 4.903x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 17
JOB test speedup 0.931408551371029
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002729| train set 4.905x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 18
JOB test speedup 0.8788174426107662
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002572| train set 4.913x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 19
JOB test speedup 0.9237773564851753
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002259| train set 4.890x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.9013580201970914
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002052| train set 4.902x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.9014845866535209
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.002005| train set 4.890x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.8729804326799891
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001998| train set 4.739x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.8284801933283291
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001896| train set 4.927x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.8610269915649164
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.011570113917866
Epoch 24/300 |loss: 0.001781| train set 4.795x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.8955108230204882
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001825| train set 4.878x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.8985061306768964
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001593| train set 4.912x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.7635829836304356
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001370| train set 4.837x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.8659326806743366
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001378| train set 4.891x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.7938233877008131
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001403| train set 4.756x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.7414388248045565
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001313| train set 4.832x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 31
JOB test speedup 0.8621991314856161
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001353| train set 4.780x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.8396264559701827
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001240| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7402729334645909
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001237| train set 4.850x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.7080858341148176
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001222| train set 4.937x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.8338391476680144
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001274| train set 4.923x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8365656111656821
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001296| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8302394048298303
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001131| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8479403084019587
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001139| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.749282386421642
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001168| train set 4.937x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7512651362854841
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001099| train set 4.916x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 41
JOB test speedup 0.8318277927408662
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001117| train set 4.928x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 42
JOB test speedup 0.7441320962905373
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001088| train set 4.895x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.7436196852080816
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001336| train set 4.889x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.7706794410005324
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001305| train set 4.942x speedup, test set 1.073x speedup, val set 0.951x speedup, step: 45
early stopping at epoch 44
Training per epoch cost 2.522 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:02:45.836519
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.265756, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9441807308954646
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010645| train set 2.898x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 1.0253962839464927
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010782| train set 4.128x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9551415660109729
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.4909581349036352
Epoch 4/300 |loss: 0.007955| train set 4.221x speedup, test set 1.491x speedup, val set 0.967x speedup, step: 5
JOB test speedup 0.9542822088388514
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.007017| train set 3.817x speedup, test set 1.688x speedup, val set 0.967x speedup, step: 6
JOB test speedup 0.9539808043451578
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005402| train set 4.124x speedup, test set 1.953x speedup, val set 0.967x speedup, step: 7
JOB test speedup 0.9628962526576929
TPCH test speedup 6.778791205110246
TPCH skew test speedup 1.6881961066309221
Epoch 7/300 |loss: 0.005045| train set 4.089x speedup, test set 1.688x speedup, val set 0.967x speedup, step: 8
JOB test speedup 0.933205456218167
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004584| train set 4.512x speedup, test set 1.953x speedup, val set 0.689x speedup, step: 9
JOB test speedup 0.9575697591389065
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 9/300 |loss: 0.004264| train set 4.829x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 10
JOB test speedup 0.9107850675830598
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.004982| train set 4.078x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 11
JOB test speedup 0.8905741153989998
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.004054| train set 4.105x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.877183810981407
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.011570113917866
Epoch 12/300 |loss: 0.003331| train set 4.832x speedup, test set 1.012x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.8659788681998635
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003255| train set 4.142x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 14
JOB test speedup 0.846653030712804
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003145| train set 4.847x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.899812924345658
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003031| train set 4.380x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 16
JOB test speedup 0.8477018034529292
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002882| train set 4.913x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 17
JOB test speedup 0.9038264849993547
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002816| train set 4.881x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 18
JOB test speedup 0.8849821370408303
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002528| train set 4.890x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.9372569064201427
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002227| train set 4.913x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.919545662522426
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.001985| train set 4.922x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.8497586422498707
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.002014| train set 4.877x speedup, test set 1.073x speedup, val set 0.729x speedup, step: 22
JOB test speedup 0.8751336103416887
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001900| train set 4.788x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 23
JOB test speedup 0.8456305265919056
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001897| train set 4.928x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.7744719084969509
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001701| train set 4.928x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.8834284241087865
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001685| train set 4.883x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.7836234345397556
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001438| train set 4.910x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.7771744135059542
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001316| train set 4.761x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.8458578486379759
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001334| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.9002295619735897
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001399| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.7801389414522556
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001192| train set 4.900x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 31
JOB test speedup 0.7577683295510623
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0724586230372417
Epoch 31/300 |loss: 0.001262| train set 4.829x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.8337410076694485
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001177| train set 4.933x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7099556496269606
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0722058282917282
Epoch 33/300 |loss: 0.001240| train set 4.922x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.7262223591025418
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001202| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.8110219558712656
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001388| train set 4.928x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8665316363534901
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001255| train set 4.861x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8544173472628547
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0722058282917282
Epoch 37/300 |loss: 0.001111| train set 4.888x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8627018071548063
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0722058282917282
Epoch 38/300 |loss: 0.001086| train set 4.934x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.8251150076141814
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001147| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7377646162507554
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001106| train set 4.373x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.7232021587782513
TPCH test speedup 8.4816832137052
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001135| train set 4.940x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 42
JOB test speedup 0.7454975160808326
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001046| train set 4.926x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.7535275211904595
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0722058282917282
Epoch 43/300 |loss: 0.001099| train set 4.933x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.7807867758106478
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001196| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7325907821418597
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001073| train set 4.876x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.7337381873938424
TPCH test speedup 7.3742020611861605
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001065| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.7707791790535593
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001147| train set 4.856x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.7397857033661133
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.000999| train set 4.937x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 49
JOB test speedup 0.805691300155028
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.001003| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.7828552131980644
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727350141666414
Epoch 50/300 |loss: 0.001096| train set 4.941x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 51
JOB test speedup 0.8905400987588223
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001131| train set 4.943x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 52
early stopping at epoch 51
Training per epoch cost 2.517 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:10.049773
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.345727, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9441807308954646
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010667| train set 2.807x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 0.9998260476976032
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010782| train set 3.802x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9392863504791813
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.6881961066309221
Epoch 4/300 |loss: 0.007951| train set 3.534x speedup, test set 1.688x speedup, val set 0.997x speedup, step: 5
JOB test speedup 0.9543541864140528
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.007109| train set 3.779x speedup, test set 1.688x speedup, val set 0.967x speedup, step: 6
JOB test speedup 0.9425109939643127
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005464| train set 4.031x speedup, test set 1.953x speedup, val set 0.967x speedup, step: 7
JOB test speedup 0.9258081627702515
TPCH test speedup 6.778791205110246
TPCH skew test speedup 1.6881961066309221
Epoch 7/300 |loss: 0.005215| train set 4.193x speedup, test set 1.688x speedup, val set 0.981x speedup, step: 8
JOB test speedup 0.9148926208665407
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004668| train set 4.523x speedup, test set 1.953x speedup, val set 0.925x speedup, step: 9
JOB test speedup 0.9363282547987318
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 9/300 |loss: 0.004257| train set 4.663x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 10
JOB test speedup 0.9160925157554484
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 10/300 |loss: 0.004902| train set 4.225x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 11
JOB test speedup 0.9591567818054808
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 11/300 |loss: 0.004098| train set 4.204x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.9436169095316363
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.011570113917866
Epoch 12/300 |loss: 0.003381| train set 4.861x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 13
JOB test speedup 0.8850406196656824
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003356| train set 4.188x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 14
JOB test speedup 0.9342530063311014
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003293| train set 4.427x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 15
JOB test speedup 0.9053499455385358
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003126| train set 4.717x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 16
JOB test speedup 0.9118384713112775
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002967| train set 4.849x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 17
JOB test speedup 0.9174689792251335
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002673| train set 4.888x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 18
JOB test speedup 0.9105497874750517
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002606| train set 4.915x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.8978907086614252
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002260| train set 4.912x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.804713636050472
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002053| train set 4.915x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 21
JOB test speedup 0.9085453232658979
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.002007| train set 4.811x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 22
JOB test speedup 0.7969275876682858
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001898| train set 4.823x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 23
JOB test speedup 0.8857290708762928
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001899| train set 4.745x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.8695543652310751
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 24/300 |loss: 0.001604| train set 4.848x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.8700602494134838
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001741| train set 4.895x speedup, test set 1.073x speedup, val set 0.951x speedup, step: 26
JOB test speedup 0.7722842469687742
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001564| train set 4.914x speedup, test set 1.073x speedup, val set 0.769x speedup, step: 27
JOB test speedup 0.7649009246508511
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001410| train set 4.821x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 28
JOB test speedup 0.7725723341832682
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001367| train set 4.891x speedup, test set 1.073x speedup, val set 0.757x speedup, step: 29
JOB test speedup 0.8698850497410734
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001407| train set 4.942x speedup, test set 1.073x speedup, val set 0.770x speedup, step: 30
JOB test speedup 0.7578121749852343
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001325| train set 4.742x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 31
JOB test speedup 0.7634231605087327
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001275| train set 4.789x speedup, test set 1.073x speedup, val set 0.754x speedup, step: 32
JOB test speedup 0.8673988301918985
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001251| train set 4.889x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7909324123216884
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001319| train set 4.708x speedup, test set 1.073x speedup, val set 0.787x speedup, step: 34
JOB test speedup 0.7901988603889748
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001165| train set 4.942x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 35
JOB test speedup 0.7635084169769105
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001330| train set 4.899x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.872875274859461
TPCH test speedup 5.430862635824322
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001331| train set 4.940x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 37
JOB test speedup 0.8962611061329147
TPCH test speedup 8.4816832137052
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001092| train set 4.943x speedup, test set 1.073x speedup, val set 0.747x speedup, step: 38
JOB test speedup 0.7880334630310184
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001116| train set 4.929x speedup, test set 1.073x speedup, val set 0.757x speedup, step: 39
JOB test speedup 0.7906889913347745
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001152| train set 4.936x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 40
JOB test speedup 0.7817748069655838
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001203| train set 4.603x speedup, test set 1.073x speedup, val set 0.750x speedup, step: 41
JOB test speedup 0.7889815730701761
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001175| train set 4.941x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 42
JOB test speedup 0.7823292622520924
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001113| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.7878156638080125
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001114| train set 4.932x speedup, test set 1.073x speedup, val set 0.757x speedup, step: 44
JOB test speedup 0.7873713102837898
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001318| train set 4.945x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7862486348153348
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001049| train set 4.922x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.778220560132014
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001088| train set 4.803x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 47
JOB test speedup 0.8993858741937041
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001224| train set 4.918x speedup, test set 1.073x speedup, val set 0.756x speedup, step: 48
JOB test speedup 0.7982784798494952
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001029| train set 4.944x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.7970134248945698
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.001024| train set 4.941x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 50
JOB test speedup 0.8135537083723611
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001128| train set 4.946x speedup, test set 1.073x speedup, val set 0.831x speedup, step: 51
JOB test speedup 0.7973605548065609
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001106| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 52
JOB test speedup 0.7691075270480123
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 52/300 |loss: 0.001020| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 53
JOB test speedup 0.7788241879775979
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 53/300 |loss: 0.001079| train set 4.945x speedup, test set 1.073x speedup, val set 0.750x speedup, step: 54
JOB test speedup 0.787583199673398
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 54/300 |loss: 0.001128| train set 4.943x speedup, test set 1.073x speedup, val set 0.879x speedup, step: 55
early stopping at epoch 54
Training per epoch cost 2.534 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:21.251153
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.253568, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9441807308954646
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010646| train set 2.898x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 0.9998260476976032
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010833| train set 3.965x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9551415660109729
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.541477900848911
Epoch 4/300 |loss: 0.007838| train set 3.961x speedup, test set 1.541x speedup, val set 0.967x speedup, step: 5
JOB test speedup 0.9542485453386778
TPCH test speedup 4.964421461081998
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.006938| train set 3.959x speedup, test set 1.688x speedup, val set 0.967x speedup, step: 6
JOB test speedup 0.9626989538996782
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005412| train set 4.590x speedup, test set 1.953x speedup, val set 0.923x speedup, step: 7
JOB test speedup 0.9495760430734468
TPCH test speedup 6.778791205110246
TPCH skew test speedup 1.2896847196847903
Epoch 7/300 |loss: 0.005046| train set 4.211x speedup, test set 1.290x speedup, val set 0.981x speedup, step: 8
JOB test speedup 0.9122267008477679
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004587| train set 4.474x speedup, test set 1.953x speedup, val set 0.689x speedup, step: 9
JOB test speedup 0.9466355286455937
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004275| train set 4.707x speedup, test set 1.953x speedup, val set 0.781x speedup, step: 10
JOB test speedup 0.9003780274544321
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.005036| train set 4.218x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 11
JOB test speedup 0.8811544421440735
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.004022| train set 3.901x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.8651594086643678
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 12/300 |loss: 0.003316| train set 4.845x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.8813418235795696
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003214| train set 4.293x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 14
JOB test speedup 0.8420975699874921
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 14/300 |loss: 0.003092| train set 4.676x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.8718654660370831
TPCH test speedup 8.4816832137052
TPCH skew test speedup 0.9817637166756344
Epoch 15/300 |loss: 0.002966| train set 4.592x speedup, test set 0.982x speedup, val set 0.666x speedup, step: 16
JOB test speedup 0.7855857042999261
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002953| train set 4.906x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 17
JOB test speedup 0.8872254758153176
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002781| train set 4.906x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 18
JOB test speedup 0.8494933351651983
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002463| train set 4.899x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 19
JOB test speedup 0.87590780775101
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002248| train set 4.889x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.8577756395574644
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.001971| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.8347528684535422
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.001905| train set 4.892x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.7562641008905184
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001841| train set 4.934x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.8160330752770428
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001794| train set 4.712x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.8150349153618281
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001642| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.860570135701594
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001725| train set 4.881x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.8088842311030106
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001492| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.7214281917370213
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001346| train set 4.799x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 28
JOB test speedup 0.7288883867238919
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001341| train set 4.937x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.7930663102767894
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001410| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.7611923268018541
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001423| train set 4.909x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 31
JOB test speedup 0.7248213384187479
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001314| train set 4.824x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.8144151741801676
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001207| train set 4.878x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7592500479896709
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001284| train set 4.856x speedup, test set 1.073x speedup, val set 0.698x speedup, step: 34
JOB test speedup 0.7666556657585628
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001202| train set 4.774x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 35
JOB test speedup 0.7852397147735826
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001417| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8580979391616761
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001271| train set 4.856x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8603643612917306
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001146| train set 4.894x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8384856351601098
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001103| train set 4.880x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.7193258403960351
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001160| train set 4.725x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7352188348995116
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001194| train set 4.937x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 41
JOB test speedup 0.7458666929522989
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001196| train set 4.943x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7597236273579844
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001071| train set 4.652x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 43
JOB test speedup 0.7369733365076904
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001126| train set 4.927x speedup, test set 1.073x speedup, val set 0.666x speedup, step: 44
JOB test speedup 0.7447841677410207
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001265| train set 4.731x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7093055982435251
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001085| train set 4.292x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.737573425987347
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001070| train set 4.864x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.7175201530165467
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001180| train set 4.915x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.7480226600818116
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001073| train set 4.941x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.7338316274387061
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.001046| train set 4.945x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.7545314412601735
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001097| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 51
JOB test speedup 0.7591074087829468
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001150| train set 4.924x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 52
early stopping at epoch 51
Training per epoch cost 2.513 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:08.540796
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.247907, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.4899043968187573
Epoch 1/300 |loss: 0.015631| train set 2.689x speedup, test set 1.490x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9809020008982133
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.010633| train set 3.546x speedup, test set 1.491x speedup, val set 0.994x speedup, step: 3
JOB test speedup 0.9997839553599459
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010818| train set 3.652x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 1.0255371709262586
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.9407621188763453
Epoch 4/300 |loss: 0.007824| train set 3.443x speedup, test set 1.941x speedup, val set 0.980x speedup, step: 5
JOB test speedup 1.0650342564975264
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.006905| train set 3.963x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 6
JOB test speedup 1.0435059740919028
TPCH test speedup 4.7324470037218385
TPCH skew test speedup 1.6881961066309221
Epoch 6/300 |loss: 0.005380| train set 3.950x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 7
JOB test speedup 1.0201651966197343
TPCH test speedup 6.05232747179417
TPCH skew test speedup 1.6881961066309221
Epoch 7/300 |loss: 0.005075| train set 4.190x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 8
JOB test speedup 0.969305416112751
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004648| train set 4.623x speedup, test set 1.953x speedup, val set 0.981x speedup, step: 9
JOB test speedup 1.000998939627898
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004224| train set 4.394x speedup, test set 1.953x speedup, val set 0.997x speedup, step: 10
JOB test speedup 0.9201286210390208
TPCH test speedup 8.658764667286961
TPCH skew test speedup 1.953110004413681
Epoch 10/300 |loss: 0.005073| train set 4.094x speedup, test set 1.953x speedup, val set 0.997x speedup, step: 11
JOB test speedup 0.9644585163993855
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 11/300 |loss: 0.004320| train set 4.209x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 12
JOB test speedup 0.9097946747799869
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.011570113917866
Epoch 12/300 |loss: 0.003415| train set 4.827x speedup, test set 1.012x speedup, val set 0.738x speedup, step: 13
JOB test speedup 0.9594874637592054
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003445| train set 4.218x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 14
JOB test speedup 0.9277374923506436
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003343| train set 4.872x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 15
JOB test speedup 0.8669350338633357
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0635916188615377
Epoch 15/300 |loss: 0.003198| train set 4.288x speedup, test set 1.064x speedup, val set 0.703x speedup, step: 16
JOB test speedup 0.8669957921638803
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002993| train set 4.784x speedup, test set 1.073x speedup, val set 0.743x speedup, step: 17
JOB test speedup 0.9225242267725936
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002788| train set 4.935x speedup, test set 1.073x speedup, val set 0.743x speedup, step: 18
JOB test speedup 0.9336902120367814
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002550| train set 4.911x speedup, test set 1.073x speedup, val set 0.743x speedup, step: 19
JOB test speedup 0.9195758250310595
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002250| train set 4.915x speedup, test set 1.073x speedup, val set 0.743x speedup, step: 20
JOB test speedup 0.8903435781414281
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002193| train set 4.918x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.9348828019124352
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.002112| train set 4.889x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.9397036497704703
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.002104| train set 4.653x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 23
JOB test speedup 0.9076764457796334
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001947| train set 4.929x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.8956809759099497
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001743| train set 4.909x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 25
JOB test speedup 0.937917699574566
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001823| train set 4.916x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.9512880495486358
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001549| train set 4.803x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.8662030131365357
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001457| train set 4.772x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.8889488338889139
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001387| train set 4.817x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.9134792650014504
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001523| train set 4.799x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 30
JOB test speedup 0.8428637974606337
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001355| train set 4.928x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 31
JOB test speedup 0.8165781745151961
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001360| train set 4.795x speedup, test set 1.073x speedup, val set 0.724x speedup, step: 32
JOB test speedup 0.9145133868007562
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001226| train set 4.926x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.789921184105187
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001293| train set 4.903x speedup, test set 1.073x speedup, val set 0.724x speedup, step: 34
JOB test speedup 0.8546890285397722
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001170| train set 4.853x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.8972231233745107
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001316| train set 4.780x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8826880382568562
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001314| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8474614931053233
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001155| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8443358291147542
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001129| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.8554618541106047
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001168| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7901483824789908
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001211| train set 4.609x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 41
JOB test speedup 0.8443046430635199
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001215| train set 4.945x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7519323558491235
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001089| train set 4.683x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.781835592277789
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001167| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.900599154259137
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001330| train set 4.899x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7516561179640754
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001062| train set 4.749x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.8051211463326216
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001183| train set 4.781x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 47
JOB test speedup 0.9106379768452709
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001133| train set 4.926x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 48
early stopping at epoch 47
Training per epoch cost 2.517 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
========== TPCH
========== TPCH skew
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:02:56.141644
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.269844, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.965139698312885
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010668| train set 2.809x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 1.0017019260192572
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010838| train set 3.823x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9393614842561687
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.6881961066309221
Epoch 4/300 |loss: 0.007906| train set 3.950x speedup, test set 1.688x speedup, val set 0.996x speedup, step: 5
JOB test speedup 0.9502889745962159
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.007233| train set 3.746x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 6
JOB test speedup 0.9498904448019986
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.6881961066309221
Epoch 6/300 |loss: 0.005443| train set 4.145x speedup, test set 1.688x speedup, val set 0.967x speedup, step: 7
JOB test speedup 0.9145847150557833
TPCH test speedup 6.778791205110246
TPCH skew test speedup 1.2896847196847903
Epoch 7/300 |loss: 0.005111| train set 4.172x speedup, test set 1.290x speedup, val set 0.981x speedup, step: 8
JOB test speedup 0.9146011696943603
TPCH test speedup 8.4816832137052
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004551| train set 4.755x speedup, test set 1.953x speedup, val set 0.981x speedup, step: 9
JOB test speedup 0.9413613457117506
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004283| train set 4.698x speedup, test set 1.953x speedup, val set 0.689x speedup, step: 10
JOB test speedup 0.8824489845207967
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.1058053740032083
Epoch 10/300 |loss: 0.005085| train set 4.255x speedup, test set 1.106x speedup, val set 0.689x speedup, step: 11
JOB test speedup 0.90060315222881
TPCH test speedup 8.53694466392328
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.004044| train set 3.902x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.9161605908932184
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.011570113917866
Epoch 12/300 |loss: 0.003306| train set 4.746x speedup, test set 1.012x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.8725470730593927
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003289| train set 4.182x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 14
JOB test speedup 0.8825835977702708
TPCH test speedup 7.75995194641342
TPCH skew test speedup 0.9817637166756344
Epoch 14/300 |loss: 0.003171| train set 4.584x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.9447087477678153
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003132| train set 3.996x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.9041394746910766
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002891| train set 4.891x speedup, test set 1.073x speedup, val set 0.717x speedup, step: 17
JOB test speedup 0.912315143937193
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002685| train set 4.907x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 18
JOB test speedup 0.8735790209156361
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002583| train set 4.914x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.9041680530951782
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002329| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.9036259945474794
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002144| train set 4.925x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.8794715800808448
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.002068| train set 4.890x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.897328996843795
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.002093| train set 4.937x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 23
JOB test speedup 0.8532375763861981
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001964| train set 4.742x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.8152112879848584
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001729| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.889940876264709
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001731| train set 4.771x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.8379909659255602
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001582| train set 4.906x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.7977957420325007
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001457| train set 4.541x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.8694804578982165
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001373| train set 4.892x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.8456173444023124
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001470| train set 4.888x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.8410674858886266
TPCH test speedup 6.667256570801456
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001284| train set 4.790x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 31
JOB test speedup 0.862736531223385
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001324| train set 4.793x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 32
JOB test speedup 0.8778919393120818
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001258| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.8352026464212257
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001246| train set 4.744x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 34
JOB test speedup 0.8922352573388718
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001214| train set 4.930x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 35
JOB test speedup 0.8275026843830259
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001349| train set 4.788x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 36
JOB test speedup 0.8374030469295322
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001350| train set 4.929x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 37
JOB test speedup 0.8259323929918364
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001127| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.871831589746919
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001099| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.8885040501730481
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001085| train set 4.933x speedup, test set 1.073x speedup, val set 0.717x speedup, step: 40
JOB test speedup 0.7720998962512244
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001169| train set 4.839x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.8390018542898897
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001086| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7674327286794552
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001027| train set 4.718x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 43
JOB test speedup 0.7642544019206557
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001102| train set 4.921x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.8662790633099281
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001270| train set 4.944x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7739583024249451
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001025| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.8705965924247281
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001092| train set 4.897x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 47
JOB test speedup 0.8643295800085012
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001196| train set 4.921x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.863922339514617
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001015| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.8742288294053806
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.001003| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.8878843891358129
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001133| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 51
JOB test speedup 0.8624233586839959
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001166| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 52
early stopping at epoch 51
Training per epoch cost 2.505 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.198s, pg runtime 0.189s, speedup 0.958x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 0.449s, pg runtime 0.404s, speedup 0.900x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.975s, pg runtime 1.437s, speedup 0.361x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
10, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
11, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
12, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
13, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
14, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
15, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
16, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
17, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
18, opt runtime 0.612s, model runtime 1.438s, pg runtime 1.357s, speedup 0.944x
19, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
20, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
21, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.137s, speedup 0.915x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.131s, pg runtime 0.129s, speedup 0.990x
24, opt runtime 0.348s, model runtime 0.372s, pg runtime 0.391s, speedup 1.051x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
12, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
13, opt runtime 7.851s, model runtime 7.851s, pg runtime 13.622s, speedup 1.735x
14, opt runtime 7.442s, model runtime 8.035s, pg runtime 14.838s, speedup 1.847x
15, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
16, opt runtime 6.810s, model runtime 7.859s, pg runtime 13.796s, speedup 1.755x
17, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
18, opt runtime 6.656s, model runtime 7.351s, pg runtime 15.260s, speedup 2.076x
19, opt runtime 7.913s, model runtime 7.913s, pg runtime 15.548s, speedup 1.965x
20, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 29.063s, pg runtime 91.786s, speedup 3.158x
12, opt runtime 33.249s, model runtime 33.249s, pg runtime 103.551s, speedup 3.114x
13, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
14, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
15, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
16, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
17, opt runtime 30.778s, model runtime 30.778s, pg runtime 100.158s, speedup 3.254x
18, opt runtime 30.030s, model runtime 30.030s, pg runtime 85.930s, speedup 2.861x
19, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
20, opt runtime 29.576s, model runtime 29.576s, pg runtime 113.059s, speedup 3.823x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:10.048564
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.313647, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9441807308954646
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010646| train set 2.898x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 1.000202192695786
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010807| train set 3.962x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9720481929413411
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.4909581349036352
Epoch 4/300 |loss: 0.007878| train set 3.865x speedup, test set 1.491x speedup, val set 0.968x speedup, step: 5
JOB test speedup 0.9747757159329203
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.006893| train set 3.996x speedup, test set 1.688x speedup, val set 0.967x speedup, step: 6
JOB test speedup 0.9504452763590294
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005446| train set 4.136x speedup, test set 1.953x speedup, val set 0.967x speedup, step: 7
JOB test speedup 0.9789644101102486
TPCH test speedup 6.05232747179417
TPCH skew test speedup 1.953110004413681
Epoch 7/300 |loss: 0.005107| train set 4.310x speedup, test set 1.953x speedup, val set 0.979x speedup, step: 8
JOB test speedup 0.9576075410067185
TPCH test speedup 8.4816832137052
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004665| train set 4.765x speedup, test set 1.953x speedup, val set 0.968x speedup, step: 9
JOB test speedup 0.942468683914585
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 9/300 |loss: 0.004325| train set 4.511x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 10
JOB test speedup 0.8836124485779254
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 10/300 |loss: 0.005212| train set 4.083x speedup, test set 1.953x speedup, val set 0.968x speedup, step: 11
JOB test speedup 0.9433163349687348
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.004205| train set 4.201x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.9407616081537045
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.011570113917866
Epoch 12/300 |loss: 0.003345| train set 4.878x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 13
JOB test speedup 0.9293254339583162
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003369| train set 4.281x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 14
JOB test speedup 0.9385808859078536
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003261| train set 4.873x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 15
JOB test speedup 0.9432673929982925
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003140| train set 4.263x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 16
JOB test speedup 0.8670083971441966
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.003047| train set 4.621x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 17
JOB test speedup 0.9239564910759993
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002811| train set 4.893x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 18
JOB test speedup 0.8560331407357246
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002556| train set 4.926x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.8710058849158216
TPCH test speedup 8.4816832137052
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002246| train set 4.896x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.8616906414320207
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002018| train set 4.916x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.8811640150901108
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.001969| train set 4.886x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.8896404087273814
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.002095| train set 4.882x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 23
JOB test speedup 0.8190450177373021
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001797| train set 4.729x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.8552986707409185
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001582| train set 4.854x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.8607744059382008
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001747| train set 4.918x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 26
JOB test speedup 0.8207342360694845
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001568| train set 4.914x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.843558166841129
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001359| train set 4.750x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.7898751396884482
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001334| train set 4.928x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.7977437925953373
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0735529366841365
Epoch 29/300 |loss: 0.001519| train set 4.930x speedup, test set 1.074x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.8524009090188439
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001368| train set 4.833x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 31
JOB test speedup 0.8446869602127357
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0724586230372417
Epoch 31/300 |loss: 0.001205| train set 4.838x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.8825152432085216
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001168| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7526069688078545
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001252| train set 4.855x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.852479507063133
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001173| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.833961089827792
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001194| train set 4.928x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8342851498263688
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001226| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8431273778678584
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001127| train set 4.896x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.9363610641027348
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001059| train set 4.849x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.7406154137559692
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001074| train set 4.927x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7536150509969242
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001076| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.8550118316468679
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001117| train set 4.944x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7429925511066301
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001112| train set 4.642x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.7491895404840236
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001119| train set 4.901x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 44
JOB test speedup 0.7536844116415117
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001244| train set 4.688x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7991235911155106
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001106| train set 4.886x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.7520851721320195
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001094| train set 4.929x speedup, test set 1.073x speedup, val set 0.718x speedup, step: 47
JOB test speedup 0.74837667148962
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001140| train set 4.923x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
early stopping at epoch 47
Training per epoch cost 2.471 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.198s, pg runtime 0.189s, speedup 0.958x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 0.449s, pg runtime 0.404s, speedup 0.900x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.975s, pg runtime 1.437s, speedup 0.361x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
10, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
11, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
12, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
13, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
14, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
15, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
16, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
17, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
18, opt runtime 0.612s, model runtime 1.438s, pg runtime 1.357s, speedup 0.944x
19, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
20, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
21, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.137s, speedup 0.915x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.131s, pg runtime 0.129s, speedup 0.990x
24, opt runtime 0.348s, model runtime 0.372s, pg runtime 0.391s, speedup 1.051x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
12, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
13, opt runtime 7.851s, model runtime 7.851s, pg runtime 13.622s, speedup 1.735x
14, opt runtime 7.442s, model runtime 8.035s, pg runtime 14.838s, speedup 1.847x
15, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
16, opt runtime 6.810s, model runtime 7.859s, pg runtime 13.796s, speedup 1.755x
17, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
18, opt runtime 6.656s, model runtime 7.351s, pg runtime 15.260s, speedup 2.076x
19, opt runtime 7.913s, model runtime 7.913s, pg runtime 15.548s, speedup 1.965x
20, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 29.063s, pg runtime 91.786s, speedup 3.158x
12, opt runtime 33.249s, model runtime 33.249s, pg runtime 103.551s, speedup 3.114x
13, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
14, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
15, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
16, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
17, opt runtime 30.778s, model runtime 30.778s, pg runtime 100.158s, speedup 3.254x
18, opt runtime 30.030s, model runtime 30.030s, pg runtime 85.930s, speedup 2.861x
19, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
20, opt runtime 29.576s, model runtime 29.576s, pg runtime 113.059s, speedup 3.823x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:02:54.646311
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.319567, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015606| train set 2.608x speedup, test set 1.374x speedup, val set 1.193x speedup, step: 2
JOB test speedup 0.981544519571236
TPCH test speedup 5.2392305893835855
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010649| train set 3.736x speedup, test set 1.490x speedup, val set 0.994x speedup, step: 3
JOB test speedup 0.9998503878895907
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010814| train set 3.806x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9724700928627292
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 4/300 |loss: 0.007956| train set 4.216x speedup, test set 1.688x speedup, val set 0.980x speedup, step: 5
JOB test speedup 0.9838304950902139
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.915891085944348
Epoch 5/300 |loss: 0.007031| train set 3.961x speedup, test set 1.916x speedup, val set 0.979x speedup, step: 6
JOB test speedup 1.071690427970711
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005375| train set 3.829x speedup, test set 1.953x speedup, val set 0.995x speedup, step: 7
JOB test speedup 1.050525034879706
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 7/300 |loss: 0.005067| train set 4.072x speedup, test set 1.953x speedup, val set 0.979x speedup, step: 8
JOB test speedup 0.9920875473824696
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004645| train set 4.626x speedup, test set 1.953x speedup, val set 0.981x speedup, step: 9
JOB test speedup 1.003445021328342
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004310| train set 4.621x speedup, test set 1.953x speedup, val set 0.997x speedup, step: 10
JOB test speedup 0.8898335294302243
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 10/300 |loss: 0.005220| train set 4.087x speedup, test set 1.953x speedup, val set 0.997x speedup, step: 11
JOB test speedup 0.960304859601213
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 11/300 |loss: 0.004204| train set 4.140x speedup, test set 1.953x speedup, val set 0.981x speedup, step: 12
JOB test speedup 0.9170513605001658
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.7593746647537367
Epoch 12/300 |loss: 0.003445| train set 4.859x speedup, test set 1.759x speedup, val set 0.981x speedup, step: 13
JOB test speedup 0.9590366270478282
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 13/300 |loss: 0.003375| train set 4.283x speedup, test set 1.953x speedup, val set 0.988x speedup, step: 14
JOB test speedup 0.8736464932179464
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003171| train set 4.845x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 15
JOB test speedup 0.9083859196168099
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 15/300 |loss: 0.003042| train set 4.256x speedup, test set 1.106x speedup, val set 0.703x speedup, step: 16
JOB test speedup 0.9066507156547219
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 16/300 |loss: 0.002915| train set 4.911x speedup, test set 1.953x speedup, val set 0.997x speedup, step: 17
JOB test speedup 0.9492611602950884
TPCH test speedup 8.4816832137052
TPCH skew test speedup 1.953110004413681
Epoch 17/300 |loss: 0.002752| train set 4.907x speedup, test set 1.953x speedup, val set 0.997x speedup, step: 18
JOB test speedup 0.9439255351376631
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002438| train set 4.916x speedup, test set 1.073x speedup, val set 0.981x speedup, step: 19
JOB test speedup 0.9250434713367056
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002235| train set 4.891x speedup, test set 1.073x speedup, val set 0.997x speedup, step: 20
JOB test speedup 0.942057370106201
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002042| train set 4.918x speedup, test set 1.073x speedup, val set 0.950x speedup, step: 21
JOB test speedup 0.9117690457698191
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.002082| train set 4.880x speedup, test set 1.073x speedup, val set 0.981x speedup, step: 22
JOB test speedup 0.9429930791754774
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.002035| train set 4.840x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 23
JOB test speedup 0.9150131740433847
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001923| train set 4.912x speedup, test set 1.073x speedup, val set 0.997x speedup, step: 24
JOB test speedup 0.8535205967785265
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001743| train set 4.846x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 25
JOB test speedup 0.9252311627694605
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001796| train set 4.882x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 26
JOB test speedup 0.9112239802994889
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001538| train set 4.941x speedup, test set 1.073x speedup, val set 0.738x speedup, step: 27
JOB test speedup 0.7795374816519908
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001445| train set 4.781x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 28
JOB test speedup 0.9064242041540755
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001409| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.9145056992379028
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001387| train set 4.937x speedup, test set 1.073x speedup, val set 0.729x speedup, step: 30
JOB test speedup 0.8110357649208252
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001267| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 31
JOB test speedup 0.7543650258884756
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001309| train set 4.724x speedup, test set 1.073x speedup, val set 0.724x speedup, step: 32
JOB test speedup 0.942975726233335
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001247| train set 4.926x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.8153100463797848
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001232| train set 4.943x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.8795923007834004
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001218| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.9040625380042059
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001351| train set 4.926x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8871555144345743
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001332| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.9340361647136152
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001149| train set 4.895x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.9260045638803724
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001141| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.8133855678971809
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 39/300 |loss: 0.001150| train set 4.920x speedup, test set 1.106x speedup, val set 0.731x speedup, step: 40
JOB test speedup 0.7234670189647375
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001086| train set 4.940x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 41
JOB test speedup 0.8351827329658273
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001100| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7741322445487638
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 42/300 |loss: 0.001044| train set 4.943x speedup, test set 1.106x speedup, val set 0.732x speedup, step: 43
JOB test speedup 0.7138602309181502
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 43/300 |loss: 0.001131| train set 4.932x speedup, test set 1.106x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.8144994922238089
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001170| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7371440303392065
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001072| train set 4.920x speedup, test set 1.073x speedup, val set 0.731x speedup, step: 46
JOB test speedup 0.8419083927035913
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001081| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.9547243226452425
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001187| train set 4.933x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.7651830144891086
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 48/300 |loss: 0.001021| train set 4.945x speedup, test set 1.106x speedup, val set 0.731x speedup, step: 49
JOB test speedup 0.8861704635323416
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.000995| train set 4.945x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.7568845428055062
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 50/300 |loss: 0.001038| train set 4.801x speedup, test set 1.106x speedup, val set 0.727x speedup, step: 51
JOB test speedup 0.8747227321868161
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001095| train set 4.950x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 52
JOB test speedup 0.7672371739177077
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 52/300 |loss: 0.000990| train set 4.944x speedup, test set 1.073x speedup, val set 0.731x speedup, step: 53
JOB test speedup 0.9246662797142912
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 53/300 |loss: 0.001058| train set 4.941x speedup, test set 1.106x speedup, val set 0.912x speedup, step: 54
JOB test speedup 0.8131882016960104
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 54/300 |loss: 0.001024| train set 4.730x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 55
JOB test speedup 0.8718976872144122
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 55/300 |loss: 0.001030| train set 4.948x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 56
JOB test speedup 0.7706580005030363
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 56/300 |loss: 0.000970| train set 4.934x speedup, test set 1.106x speedup, val set 0.732x speedup, step: 57
JOB test speedup 0.8096954614278042
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 57/300 |loss: 0.000984| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 58
JOB test speedup 0.7257205530017945
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 58/300 |loss: 0.000992| train set 4.941x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 59
JOB test speedup 0.9245705411841851
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 59/300 |loss: 0.000950| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 60
JOB test speedup 0.730362520781469
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 60/300 |loss: 0.001007| train set 4.939x speedup, test set 1.106x speedup, val set 0.727x speedup, step: 61
JOB test speedup 0.8615379018720709
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 61/300 |loss: 0.001037| train set 4.947x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 62
early stopping at epoch 61
Training per epoch cost 2.459 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.198s, pg runtime 0.189s, speedup 0.958x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 0.449s, pg runtime 0.404s, speedup 0.900x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.975s, pg runtime 1.437s, speedup 0.361x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
10, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
11, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
12, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
13, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
14, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
15, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
16, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
17, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
18, opt runtime 0.612s, model runtime 1.438s, pg runtime 1.357s, speedup 0.944x
19, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
20, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
21, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.137s, speedup 0.915x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.131s, pg runtime 0.129s, speedup 0.990x
24, opt runtime 0.348s, model runtime 0.372s, pg runtime 0.391s, speedup 1.051x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
12, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
13, opt runtime 7.851s, model runtime 7.851s, pg runtime 13.622s, speedup 1.735x
14, opt runtime 7.442s, model runtime 8.035s, pg runtime 14.838s, speedup 1.847x
15, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
16, opt runtime 6.810s, model runtime 7.859s, pg runtime 13.796s, speedup 1.755x
17, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
18, opt runtime 6.656s, model runtime 7.351s, pg runtime 15.260s, speedup 2.076x
19, opt runtime 7.913s, model runtime 7.913s, pg runtime 15.548s, speedup 1.965x
20, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 29.063s, pg runtime 91.786s, speedup 3.158x
12, opt runtime 33.249s, model runtime 33.249s, pg runtime 103.551s, speedup 3.114x
13, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
14, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
15, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
16, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
17, opt runtime 30.778s, model runtime 30.778s, pg runtime 100.158s, speedup 3.254x
18, opt runtime 30.030s, model runtime 30.030s, pg runtime 85.930s, speedup 2.861x
19, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
20, opt runtime 29.576s, model runtime 29.576s, pg runtime 113.059s, speedup 3.823x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:41.201572
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.286533, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9441807308954646
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010641| train set 2.879x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 1.0017019260192572
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010845| train set 3.967x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9764036210317407
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.4909581349036352
Epoch 4/300 |loss: 0.007878| train set 3.815x speedup, test set 1.491x speedup, val set 0.966x speedup, step: 5
JOB test speedup 0.9636278546879309
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.007122| train set 3.995x speedup, test set 1.688x speedup, val set 0.967x speedup, step: 6
JOB test speedup 0.9381489977725775
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005454| train set 4.073x speedup, test set 1.953x speedup, val set 0.967x speedup, step: 7
JOB test speedup 0.963400509612594
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.953110004413681
Epoch 7/300 |loss: 0.005126| train set 4.189x speedup, test set 1.953x speedup, val set 0.979x speedup, step: 8
JOB test speedup 0.9135146523029601
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 8/300 |loss: 0.004711| train set 4.515x speedup, test set 1.106x speedup, val set 0.732x speedup, step: 9
JOB test speedup 0.94529715392944
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004380| train set 4.619x speedup, test set 1.953x speedup, val set 0.689x speedup, step: 10
JOB test speedup 0.8588125663899859
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.005089| train set 4.069x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 11
JOB test speedup 0.9425029024788584
TPCH test speedup 5.527780872935055
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.004079| train set 3.904x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.9286653433207168
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 12/300 |loss: 0.003365| train set 4.881x speedup, test set 1.012x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.8725107843176807
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 13/300 |loss: 0.003388| train set 4.170x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 14
JOB test speedup 0.8767757225045131
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003170| train set 4.772x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.9107071506942092
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.002983| train set 4.359x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 16
JOB test speedup 0.9021544164277617
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002869| train set 4.777x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 17
JOB test speedup 0.9128654952651746
TPCH test speedup 8.4816832137052
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002758| train set 4.913x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 18
JOB test speedup 0.8678764071984849
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002529| train set 4.918x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.9268503584263138
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002099| train set 4.924x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.9087236693466827
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002032| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.940930828290103
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.001932| train set 4.894x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.9108494623378811
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001990| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 23
JOB test speedup 0.9324183656489142
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001817| train set 4.855x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.9390933011803176
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001598| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.910518368645651
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001721| train set 4.927x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.8022350492441752
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001505| train set 4.903x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.8232688143375848
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001370| train set 4.776x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.7966284745722636
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001350| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.9315386675771736
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001359| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.9067753176409287
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001324| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 31
JOB test speedup 0.7908098086631477
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001267| train set 4.835x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.9154206386610022
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001229| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7999921069319552
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0722058282917282
Epoch 33/300 |loss: 0.001262| train set 4.846x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.800610683607211
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001174| train set 4.939x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 35
JOB test speedup 0.7417055295755643
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001264| train set 4.933x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8670620520930891
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001248| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8950174051619909
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001084| train set 4.897x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.9046035612500702
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001101| train set 4.856x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 39
JOB test speedup 0.9371459703429851
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001157| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7866470244671395
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001108| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.8932646139401397
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001123| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7858378879117754
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001063| train set 4.713x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 43
JOB test speedup 0.7901284811546646
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001131| train set 4.909x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.8824174488017813
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001213| train set 4.943x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.8143738511027877
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001039| train set 4.933x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.7964202682530026
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001102| train set 4.795x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.9197304098611047
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0722058282917282
Epoch 47/300 |loss: 0.001152| train set 4.923x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 48
early stopping at epoch 47
Training per epoch cost 2.478 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.198s, pg runtime 0.189s, speedup 0.958x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 0.449s, pg runtime 0.404s, speedup 0.900x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.975s, pg runtime 1.437s, speedup 0.361x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
10, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
11, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
12, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
13, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
14, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
15, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
16, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
17, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
18, opt runtime 0.612s, model runtime 1.438s, pg runtime 1.357s, speedup 0.944x
19, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
20, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
21, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.137s, speedup 0.915x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.131s, pg runtime 0.129s, speedup 0.990x
24, opt runtime 0.348s, model runtime 0.372s, pg runtime 0.391s, speedup 1.051x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
12, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
13, opt runtime 7.851s, model runtime 7.851s, pg runtime 13.622s, speedup 1.735x
14, opt runtime 7.442s, model runtime 8.035s, pg runtime 14.838s, speedup 1.847x
15, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
16, opt runtime 6.810s, model runtime 7.859s, pg runtime 13.796s, speedup 1.755x
17, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
18, opt runtime 6.656s, model runtime 7.351s, pg runtime 15.260s, speedup 2.076x
19, opt runtime 7.913s, model runtime 7.913s, pg runtime 15.548s, speedup 1.965x
20, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 29.063s, pg runtime 91.786s, speedup 3.158x
12, opt runtime 33.249s, model runtime 33.249s, pg runtime 103.551s, speedup 3.114x
13, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
14, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
15, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
16, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
17, opt runtime 30.778s, model runtime 30.778s, pg runtime 100.158s, speedup 3.254x
18, opt runtime 30.030s, model runtime 30.030s, pg runtime 85.930s, speedup 2.861x
19, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
20, opt runtime 29.576s, model runtime 29.576s, pg runtime 113.059s, speedup 3.823x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:02:54.676945
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.263219, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9441807308954646
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010646| train set 2.898x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 1.000202192695786
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010839| train set 3.961x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9763088958759455
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.4909581349036352
Epoch 4/300 |loss: 0.007972| train set 3.824x speedup, test set 1.491x speedup, val set 0.968x speedup, step: 5
JOB test speedup 0.9542852956021391
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.006987| train set 3.998x speedup, test set 1.688x speedup, val set 0.967x speedup, step: 6
JOB test speedup 0.9760173508410616
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005445| train set 4.167x speedup, test set 1.953x speedup, val set 0.967x speedup, step: 7
JOB test speedup 0.9635019660955285
TPCH test speedup 6.778791205110246
TPCH skew test speedup 1.2896847196847903
Epoch 7/300 |loss: 0.005092| train set 4.085x speedup, test set 1.290x speedup, val set 0.979x speedup, step: 8
JOB test speedup 0.9377119498232939
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004612| train set 4.741x speedup, test set 1.953x speedup, val set 0.689x speedup, step: 9
JOB test speedup 0.9449227651084621
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004253| train set 4.420x speedup, test set 1.953x speedup, val set 0.885x speedup, step: 10
JOB test speedup 0.9207601745851085
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 10/300 |loss: 0.005189| train set 4.188x speedup, test set 1.953x speedup, val set 0.971x speedup, step: 11
JOB test speedup 0.9552130561106895
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.004252| train set 4.101x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.902395429516414
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0632408684052463
Epoch 12/300 |loss: 0.003330| train set 4.878x speedup, test set 1.063x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.8371326043838382
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003357| train set 4.158x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 14
JOB test speedup 0.8181761304339555
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003166| train set 4.862x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.8873711791770047
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003023| train set 4.409x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.811952525926981
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002891| train set 4.889x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 17
JOB test speedup 0.8830330678443992
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002806| train set 4.934x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 18
JOB test speedup 0.8577476234124501
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002412| train set 4.901x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.8602774493230159
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002137| train set 4.924x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.9019332439238709
TPCH test speedup 8.730400735833248
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.001970| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.8605821862981723
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.001888| train set 4.809x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.9005105468278616
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001980| train set 4.835x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.84842553682212
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001722| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.8950054464567148
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001565| train set 4.837x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.7951882450380812
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001664| train set 4.872x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.9015782623573129
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001452| train set 4.924x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.838199301424758
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001309| train set 4.763x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 28
JOB test speedup 0.7943545062162325
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001347| train set 4.844x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.9659585427702264
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001445| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.773393114442483
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001270| train set 4.928x speedup, test set 1.073x speedup, val set 0.704x speedup, step: 31
JOB test speedup 0.8216140473376651
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001250| train set 4.836x speedup, test set 1.073x speedup, val set 0.724x speedup, step: 32
JOB test speedup 0.9097043072420127
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001172| train set 4.924x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.8041863590569112
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001219| train set 4.930x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.8170366820317246
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001201| train set 4.896x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.904057186983851
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001201| train set 4.919x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.9695948081424582
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001291| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.9873897682921235
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001118| train set 4.895x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8232445891363057
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001086| train set 4.939x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 39
JOB test speedup 0.7909194467156179
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001149| train set 4.909x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.8593639634372415
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001111| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.947287045293313
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001035| train set 4.945x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.8442043785991594
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001031| train set 4.856x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.8014093815632729
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001110| train set 4.900x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 44
JOB test speedup 0.8085231662161791
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001274| train set 4.923x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 45
JOB test speedup 0.7675765050990174
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001022| train set 4.928x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.8488864142956501
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001064| train set 4.941x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.8328376590784029
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001100| train set 4.843x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.8430038705609886
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.000982| train set 4.829x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.8218607608470564
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.000999| train set 4.929x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.8466503784546142
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001108| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 51
JOB test speedup 0.8568035548934232
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001231| train set 4.941x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 52
early stopping at epoch 51
Training per epoch cost 2.475 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.198s, pg runtime 0.189s, speedup 0.958x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 0.449s, pg runtime 0.404s, speedup 0.900x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.975s, pg runtime 1.437s, speedup 0.361x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
10, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
11, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
12, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
13, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
14, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
15, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
16, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
17, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
18, opt runtime 0.612s, model runtime 1.438s, pg runtime 1.357s, speedup 0.944x
19, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
20, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
21, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.137s, speedup 0.915x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.131s, pg runtime 0.129s, speedup 0.990x
24, opt runtime 0.348s, model runtime 0.372s, pg runtime 0.391s, speedup 1.051x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
12, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
13, opt runtime 7.851s, model runtime 7.851s, pg runtime 13.622s, speedup 1.735x
14, opt runtime 7.442s, model runtime 8.035s, pg runtime 14.838s, speedup 1.847x
15, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
16, opt runtime 6.810s, model runtime 7.859s, pg runtime 13.796s, speedup 1.755x
17, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
18, opt runtime 6.656s, model runtime 7.351s, pg runtime 15.260s, speedup 2.076x
19, opt runtime 7.913s, model runtime 7.913s, pg runtime 15.548s, speedup 1.965x
20, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 29.063s, pg runtime 91.786s, speedup 3.158x
12, opt runtime 33.249s, model runtime 33.249s, pg runtime 103.551s, speedup 3.114x
13, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
14, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
15, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
16, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
17, opt runtime 30.778s, model runtime 30.778s, pg runtime 100.158s, speedup 3.254x
18, opt runtime 30.030s, model runtime 30.030s, pg runtime 85.930s, speedup 2.861x
19, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
20, opt runtime 29.576s, model runtime 29.576s, pg runtime 113.059s, speedup 3.823x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:08.073568
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.294905, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015700| train set 2.681x speedup, test set 1.374x speedup, val set 1.149x speedup, step: 2
JOB test speedup 0.9323314140717684
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.010691| train set 2.946x speedup, test set 1.491x speedup, val set 0.995x speedup, step: 3
JOB test speedup 1.0231703689931009
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010802| train set 3.957x speedup, test set 1.375x speedup, val set 0.997x speedup, step: 4
JOB test speedup 0.9759046097524162
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.6881961066309221
Epoch 4/300 |loss: 0.007921| train set 3.945x speedup, test set 1.688x speedup, val set 0.997x speedup, step: 5
JOB test speedup 0.9847899295765487
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.006968| train set 4.000x speedup, test set 1.688x speedup, val set 0.967x speedup, step: 6
JOB test speedup 0.9806052821126924
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005404| train set 4.063x speedup, test set 1.953x speedup, val set 0.966x speedup, step: 7
JOB test speedup 0.9235258903968452
TPCH test speedup 6.05232747179417
TPCH skew test speedup 1.2896847196847903
Epoch 7/300 |loss: 0.005068| train set 4.315x speedup, test set 1.290x speedup, val set 0.979x speedup, step: 8
JOB test speedup 0.9386658515575037
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004524| train set 4.611x speedup, test set 1.953x speedup, val set 0.966x speedup, step: 9
JOB test speedup 0.9965024261464184
TPCH test speedup 8.4816832137052
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004299| train set 4.341x speedup, test set 1.953x speedup, val set 0.968x speedup, step: 10
JOB test speedup 0.9291978224049215
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 10/300 |loss: 0.005076| train set 4.209x speedup, test set 1.953x speedup, val set 0.968x speedup, step: 11
JOB test speedup 0.962396698331117
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 11/300 |loss: 0.004260| train set 4.202x speedup, test set 1.953x speedup, val set 0.968x speedup, step: 12
JOB test speedup 0.8867597055966294
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.7593746647537367
Epoch 12/300 |loss: 0.003431| train set 4.854x speedup, test set 1.759x speedup, val set 0.968x speedup, step: 13
JOB test speedup 0.985305172113129
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003364| train set 4.227x speedup, test set 1.073x speedup, val set 0.969x speedup, step: 14
JOB test speedup 0.874838698816879
TPCH test speedup 8.658764667286961
TPCH skew test speedup 1.1058053740032083
Epoch 14/300 |loss: 0.003155| train set 4.739x speedup, test set 1.106x speedup, val set 0.968x speedup, step: 15
JOB test speedup 0.9054672601764491
TPCH test speedup 8.658764667286961
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.002989| train set 4.294x speedup, test set 1.073x speedup, val set 0.901x speedup, step: 16
JOB test speedup 0.8933800077726195
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002894| train set 4.802x speedup, test set 1.073x speedup, val set 0.968x speedup, step: 17
JOB test speedup 0.9216995241961202
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002673| train set 4.934x speedup, test set 1.073x speedup, val set 0.997x speedup, step: 18
JOB test speedup 0.858371135262281
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002355| train set 4.706x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.940020026180015
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002231| train set 4.936x speedup, test set 1.073x speedup, val set 0.968x speedup, step: 20
JOB test speedup 0.9372873573603191
TPCH test speedup 8.117521852460504
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002046| train set 4.923x speedup, test set 1.073x speedup, val set 0.968x speedup, step: 21
JOB test speedup 0.8809576402576105
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.001919| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.9200055092760075
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001790| train set 4.804x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 23
JOB test speedup 0.8899449500743565
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 23/300 |loss: 0.001934| train set 4.927x speedup, test set 1.953x speedup, val set 0.968x speedup, step: 24
JOB test speedup 0.8877107431915721
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001668| train set 4.868x speedup, test set 1.073x speedup, val set 0.968x speedup, step: 25
JOB test speedup 0.8894179514345052
TPCH test speedup 5.514874662540593
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001706| train set 4.944x speedup, test set 1.073x speedup, val set 0.968x speedup, step: 26
JOB test speedup 0.9138070278072343
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001514| train set 4.908x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.8205935793692063
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001323| train set 4.886x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.9652158649655848
TPCH test speedup 8.658764667286961
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001342| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.913893745527749
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001341| train set 4.943x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.796728078153024
TPCH test speedup 8.658764667286961
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001321| train set 4.835x speedup, test set 1.073x speedup, val set 0.731x speedup, step: 31
JOB test speedup 0.8290367598499148
TPCH test speedup 8.658764667286961
TPCH skew test speedup 1.0727427051927263
Epoch 31/300 |loss: 0.001287| train set 4.795x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.9410421258906488
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001186| train set 4.926x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7623812877819985
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001282| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.9011988899716188
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001188| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.7636175144135001
TPCH test speedup 8.658764667286961
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001266| train set 4.930x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8415920204051577
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001293| train set 4.933x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 37
JOB test speedup 0.8691396766225782
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001122| train set 4.944x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.9470379411051137
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001179| train set 4.933x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.8077684571377619
TPCH test speedup 8.658764667286961
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001158| train set 4.937x speedup, test set 1.073x speedup, val set 0.732x speedup, step: 40
JOB test speedup 0.7579321888926214
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001137| train set 4.937x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.9053787598200087
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001105| train set 4.945x speedup, test set 1.073x speedup, val set 0.728x speedup, step: 42
JOB test speedup 0.8009089209632574
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.1058053740032083
Epoch 42/300 |loss: 0.001068| train set 4.712x speedup, test set 1.106x speedup, val set 0.732x speedup, step: 43
JOB test speedup 0.7753014760200947
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001070| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.7826115561342517
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.1058053740032083
Epoch 44/300 |loss: 0.001210| train set 4.886x speedup, test set 1.106x speedup, val set 0.731x speedup, step: 45
JOB test speedup 0.7759777700170621
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001016| train set 4.936x speedup, test set 1.073x speedup, val set 0.951x speedup, step: 46
JOB test speedup 0.805436443632486
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001135| train set 4.856x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.8727729358080587
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001145| train set 4.930x speedup, test set 1.073x speedup, val set 0.787x speedup, step: 48
JOB test speedup 0.7736148834721184
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.000983| train set 4.946x speedup, test set 1.073x speedup, val set 0.951x speedup, step: 49
JOB test speedup 0.8619594002163348
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.001070| train set 4.944x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.8425807895444168
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001061| train set 4.945x speedup, test set 1.073x speedup, val set 0.951x speedup, step: 51
JOB test speedup 0.7951485803300872
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001166| train set 4.936x speedup, test set 1.073x speedup, val set 0.951x speedup, step: 52
JOB test speedup 0.7741053951357559
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 52/300 |loss: 0.001099| train set 4.930x speedup, test set 1.073x speedup, val set 0.886x speedup, step: 53
early stopping at epoch 52
Training per epoch cost 2.444 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.198s, pg runtime 0.189s, speedup 0.958x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 0.449s, pg runtime 0.404s, speedup 0.900x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.975s, pg runtime 1.437s, speedup 0.361x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
10, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
11, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
12, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
13, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
14, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
15, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
16, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
17, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
18, opt runtime 0.612s, model runtime 1.438s, pg runtime 1.357s, speedup 0.944x
19, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
20, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
21, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.137s, speedup 0.915x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.131s, pg runtime 0.129s, speedup 0.990x
24, opt runtime 0.348s, model runtime 0.372s, pg runtime 0.391s, speedup 1.051x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
12, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
13, opt runtime 7.851s, model runtime 7.851s, pg runtime 13.622s, speedup 1.735x
14, opt runtime 7.442s, model runtime 8.035s, pg runtime 14.838s, speedup 1.847x
15, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
16, opt runtime 6.810s, model runtime 7.859s, pg runtime 13.796s, speedup 1.755x
17, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
18, opt runtime 6.656s, model runtime 7.351s, pg runtime 15.260s, speedup 2.076x
19, opt runtime 7.913s, model runtime 7.913s, pg runtime 15.548s, speedup 1.965x
20, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 29.063s, pg runtime 91.786s, speedup 3.158x
12, opt runtime 33.249s, model runtime 33.249s, pg runtime 103.551s, speedup 3.114x
13, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
14, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
15, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
16, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
17, opt runtime 30.778s, model runtime 30.778s, pg runtime 100.158s, speedup 3.254x
18, opt runtime 30.030s, model runtime 30.030s, pg runtime 85.930s, speedup 2.861x
19, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
20, opt runtime 29.576s, model runtime 29.576s, pg runtime 113.059s, speedup 3.823x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:09.478566
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.288614, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.8596970327576392
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.4338023485944955
Epoch 1/300 |loss: 0.015667| train set 2.688x speedup, test set 1.434x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9957408549583336
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4909581349036352
Epoch 2/300 |loss: 0.010707| train set 2.814x speedup, test set 1.491x speedup, val set 0.994x speedup, step: 3
JOB test speedup 0.9994152262738586
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010755| train set 3.650x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9763549533292694
TPCH test speedup 4.532939918461172
TPCH skew test speedup 1.4909581349036352
Epoch 4/300 |loss: 0.007923| train set 4.229x speedup, test set 1.491x speedup, val set 0.968x speedup, step: 5
JOB test speedup 0.9582053029480128
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.4909581349036352
Epoch 5/300 |loss: 0.006962| train set 3.667x speedup, test set 1.491x speedup, val set 0.979x speedup, step: 6
JOB test speedup 1.0143535706148714
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005388| train set 4.353x speedup, test set 1.953x speedup, val set 0.926x speedup, step: 7
JOB test speedup 1.0241673594857479
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 7/300 |loss: 0.005150| train set 4.201x speedup, test set 1.688x speedup, val set 0.981x speedup, step: 8
JOB test speedup 0.9743799061323091
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004549| train set 4.509x speedup, test set 1.953x speedup, val set 0.925x speedup, step: 9
JOB test speedup 0.943628672117757
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004221| train set 4.483x speedup, test set 1.953x speedup, val set 0.969x speedup, step: 10
JOB test speedup 0.9876078766295215
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 10/300 |loss: 0.005217| train set 4.196x speedup, test set 1.953x speedup, val set 0.981x speedup, step: 11
JOB test speedup 0.954049970521672
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 11/300 |loss: 0.004274| train set 3.906x speedup, test set 1.953x speedup, val set 0.968x speedup, step: 12
JOB test speedup 0.9123906258822898
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.7593746647537367
Epoch 12/300 |loss: 0.003508| train set 4.806x speedup, test set 1.759x speedup, val set 0.981x speedup, step: 13
JOB test speedup 0.957712913202451
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 13/300 |loss: 0.003394| train set 4.243x speedup, test set 1.953x speedup, val set 0.972x speedup, step: 14
JOB test speedup 0.9295465225304551
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 14/300 |loss: 0.003163| train set 4.871x speedup, test set 1.106x speedup, val set 0.968x speedup, step: 15
JOB test speedup 0.9580344227931252
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003020| train set 4.609x speedup, test set 1.073x speedup, val set 0.968x speedup, step: 16
JOB test speedup 0.9102838160497987
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002884| train set 4.776x speedup, test set 1.073x speedup, val set 0.981x speedup, step: 17
JOB test speedup 0.9355250262756557
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002681| train set 4.914x speedup, test set 1.073x speedup, val set 0.969x speedup, step: 18
JOB test speedup 0.8985396806591878
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002412| train set 4.913x speedup, test set 1.073x speedup, val set 0.969x speedup, step: 19
JOB test speedup 0.8780881365441611
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002204| train set 4.895x speedup, test set 1.073x speedup, val set 0.968x speedup, step: 20
JOB test speedup 0.8352548139299937
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 20/300 |loss: 0.002028| train set 4.917x speedup, test set 1.106x speedup, val set 0.706x speedup, step: 21
JOB test speedup 0.8470201270821861
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 21/300 |loss: 0.002126| train set 4.750x speedup, test set 1.953x speedup, val set 0.981x speedup, step: 22
JOB test speedup 0.8458872262349494
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.002001| train set 4.882x speedup, test set 1.073x speedup, val set 0.981x speedup, step: 23
JOB test speedup 0.8441876129127678
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0409097260791567
Epoch 23/300 |loss: 0.001821| train set 4.937x speedup, test set 1.041x speedup, val set 0.738x speedup, step: 24
JOB test speedup 0.8655366854615935
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 24/300 |loss: 0.001689| train set 4.887x speedup, test set 1.012x speedup, val set 0.709x speedup, step: 25
JOB test speedup 0.8543828364021293
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 25/300 |loss: 0.001754| train set 4.937x speedup, test set 1.106x speedup, val set 0.739x speedup, step: 26
JOB test speedup 0.8662328191376962
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001590| train set 4.915x speedup, test set 1.073x speedup, val set 0.713x speedup, step: 27
JOB test speedup 0.7508513497690669
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001408| train set 4.890x speedup, test set 1.073x speedup, val set 0.709x speedup, step: 28
JOB test speedup 0.8425702071644987
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 28/300 |loss: 0.001331| train set 4.936x speedup, test set 1.012x speedup, val set 0.709x speedup, step: 29
JOB test speedup 0.8741251178449889
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0409097260791567
Epoch 29/300 |loss: 0.001450| train set 4.945x speedup, test set 1.041x speedup, val set 0.738x speedup, step: 30
JOB test speedup 0.8596825932334324
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001281| train set 4.942x speedup, test set 1.073x speedup, val set 0.713x speedup, step: 31
JOB test speedup 0.8730259227583229
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 31/300 |loss: 0.001255| train set 4.820x speedup, test set 1.012x speedup, val set 0.713x speedup, step: 32
JOB test speedup 0.8501928737269051
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001223| train set 4.880x speedup, test set 1.073x speedup, val set 0.709x speedup, step: 33
JOB test speedup 0.7384243724763937
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001257| train set 4.937x speedup, test set 1.073x speedup, val set 0.709x speedup, step: 34
JOB test speedup 0.7689968658260575
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0409097260791567
Epoch 34/300 |loss: 0.001210| train set 4.926x speedup, test set 1.041x speedup, val set 0.713x speedup, step: 35
JOB test speedup 0.909320685915294
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001351| train set 4.796x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 36
JOB test speedup 0.801041183422477
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 36/300 |loss: 0.001386| train set 4.861x speedup, test set 1.106x speedup, val set 0.739x speedup, step: 37
JOB test speedup 0.9251609942246733
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001127| train set 4.860x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 38
JOB test speedup 0.9509571603701086
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001075| train set 4.846x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 39
JOB test speedup 0.8007427488583995
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0960749431824588
Epoch 39/300 |loss: 0.001143| train set 4.914x speedup, test set 1.096x speedup, val set 0.713x speedup, step: 40
JOB test speedup 0.8222813393027806
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001091| train set 4.721x speedup, test set 1.073x speedup, val set 0.713x speedup, step: 41
JOB test speedup 0.9149114168483916
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 41/300 |loss: 0.001080| train set 4.942x speedup, test set 1.106x speedup, val set 0.739x speedup, step: 42
JOB test speedup 0.7407301349704597
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 42/300 |loss: 0.001044| train set 4.727x speedup, test set 1.106x speedup, val set 0.713x speedup, step: 43
JOB test speedup 0.7645343509189352
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001132| train set 4.928x speedup, test set 1.073x speedup, val set 0.713x speedup, step: 44
JOB test speedup 0.9449672362659822
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.1058053740032083
Epoch 44/300 |loss: 0.001214| train set 4.798x speedup, test set 1.106x speedup, val set 0.739x speedup, step: 45
JOB test speedup 0.7557520472014339
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001103| train set 4.933x speedup, test set 1.073x speedup, val set 0.731x speedup, step: 46
JOB test speedup 0.8126469707476399
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001157| train set 4.799x speedup, test set 1.073x speedup, val set 0.738x speedup, step: 47
JOB test speedup 0.8788167603705787
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001225| train set 4.936x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 48
early stopping at epoch 47
Training per epoch cost 2.478 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.198s, pg runtime 0.189s, speedup 0.958x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 0.449s, pg runtime 0.404s, speedup 0.900x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.975s, pg runtime 1.437s, speedup 0.361x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
10, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
11, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
12, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
13, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
14, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
15, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
16, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
17, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
18, opt runtime 0.612s, model runtime 1.438s, pg runtime 1.357s, speedup 0.944x
19, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
20, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
21, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.137s, speedup 0.915x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.131s, pg runtime 0.129s, speedup 0.990x
24, opt runtime 0.348s, model runtime 0.372s, pg runtime 0.391s, speedup 1.051x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
12, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
13, opt runtime 7.851s, model runtime 7.851s, pg runtime 13.622s, speedup 1.735x
14, opt runtime 7.442s, model runtime 8.035s, pg runtime 14.838s, speedup 1.847x
15, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
16, opt runtime 6.810s, model runtime 7.859s, pg runtime 13.796s, speedup 1.755x
17, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
18, opt runtime 6.656s, model runtime 7.351s, pg runtime 15.260s, speedup 2.076x
19, opt runtime 7.913s, model runtime 7.913s, pg runtime 15.548s, speedup 1.965x
20, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 29.063s, pg runtime 91.786s, speedup 3.158x
12, opt runtime 33.249s, model runtime 33.249s, pg runtime 103.551s, speedup 3.114x
13, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
14, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
15, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
16, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
17, opt runtime 30.778s, model runtime 30.778s, pg runtime 100.158s, speedup 3.254x
18, opt runtime 30.030s, model runtime 30.030s, pg runtime 85.930s, speedup 2.861x
19, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
20, opt runtime 29.576s, model runtime 29.576s, pg runtime 113.059s, speedup 3.823x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:02:54.423122
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.335986, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.9441807308954646
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010646| train set 2.898x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 1.0017019260192572
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010828| train set 3.828x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9756664431066676
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.4909581349036352
Epoch 4/300 |loss: 0.007878| train set 3.863x speedup, test set 1.491x speedup, val set 0.968x speedup, step: 5
JOB test speedup 0.9507871259314141
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.9407621188763453
Epoch 5/300 |loss: 0.007042| train set 3.868x speedup, test set 1.941x speedup, val set 0.967x speedup, step: 6
JOB test speedup 0.9760173508410616
TPCH test speedup 5.034963087867809
TPCH skew test speedup 1.953110004413681
Epoch 6/300 |loss: 0.005417| train set 4.610x speedup, test set 1.953x speedup, val set 0.967x speedup, step: 7
JOB test speedup 0.9384742531181264
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 7/300 |loss: 0.004986| train set 3.988x speedup, test set 1.953x speedup, val set 0.979x speedup, step: 8
JOB test speedup 0.9377119498232939
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 8/300 |loss: 0.004565| train set 4.400x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 9
JOB test speedup 0.9217062396581649
TPCH test speedup 6.944019498499311
TPCH skew test speedup 0.9817637166756344
Epoch 9/300 |loss: 0.004273| train set 4.641x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 10
JOB test speedup 0.8537053940364416
TPCH test speedup 7.75995194641342
TPCH skew test speedup 0.9817637166756344
Epoch 10/300 |loss: 0.005118| train set 4.188x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 11
JOB test speedup 0.9128141731388808
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.004056| train set 4.138x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.9678355074446956
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9302716218091621
Epoch 12/300 |loss: 0.003291| train set 4.328x speedup, test set 0.930x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.8835464427411256
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003212| train set 4.767x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 14
JOB test speedup 0.8370644644225845
TPCH test speedup 7.75995194641342
TPCH skew test speedup 0.9817637166756344
Epoch 14/300 |loss: 0.003152| train set 4.848x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.9027831660383937
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003046| train set 4.347x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.8603225031174989
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002820| train set 4.783x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 17
JOB test speedup 0.8713141095311234
TPCH test speedup 6.667256570801456
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002794| train set 4.898x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 18
JOB test speedup 0.9010724774916666
TPCH test speedup 8.730400735833248
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002633| train set 4.910x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.8680303092197078
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002292| train set 4.928x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 20
JOB test speedup 0.8820969170780082
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002144| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.8912610990810661
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.002089| train set 4.935x speedup, test set 1.073x speedup, val set 0.729x speedup, step: 22
JOB test speedup 0.7810394992739679
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.002088| train set 4.838x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.8437343500925831
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0623113863700104
Epoch 23/300 |loss: 0.001859| train set 4.931x speedup, test set 1.062x speedup, val set 0.689x speedup, step: 24
JOB test speedup 0.8330513425787922
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 24/300 |loss: 0.001720| train set 4.832x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.8327032328294544
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001729| train set 4.889x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.7803231035260911
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001503| train set 4.917x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.7263724239880267
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001374| train set 4.718x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 28
JOB test speedup 0.7509488893083275
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0411878721416785
Epoch 28/300 |loss: 0.001383| train set 4.835x speedup, test set 1.041x speedup, val set 0.689x speedup, step: 29
JOB test speedup 0.8840795888740534
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001383| train set 4.888x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 30
JOB test speedup 0.7760258227803217
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001313| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 31
JOB test speedup 0.7682840498445129
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001259| train set 4.822x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.8995691302276302
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001225| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7650513911908813
TPCH test speedup 6.183696136901216
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001241| train set 4.933x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 34
JOB test speedup 0.7582366778567268
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001197| train set 4.855x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.8639604455497547
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001429| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.7985772690380197
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001282| train set 4.859x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8770680333828985
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001151| train set 4.891x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8671141044410781
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001089| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.788558052347095
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001145| train set 4.928x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7730661624452186
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001098| train set 4.253x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 41
JOB test speedup 0.8666274386469548
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001149| train set 4.937x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7720835672410021
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001064| train set 4.922x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 43
JOB test speedup 0.7799228813700466
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001118| train set 4.929x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 44
JOB test speedup 0.7741452555077125
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001359| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7459324143271269
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001093| train set 4.792x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.8050969041769811
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001063| train set 4.915x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.7669052929945478
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0722058282917282
Epoch 47/300 |loss: 0.001123| train set 4.841x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.7727364530138953
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.000982| train set 4.945x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.7736451355192323
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.001024| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.7734071467835129
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001126| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 51
JOB test speedup 0.8271800164593771
TPCH test speedup 7.75995194641342
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001186| train set 4.938x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 52
early stopping at epoch 51
Training per epoch cost 2.488 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.198s, pg runtime 0.189s, speedup 0.958x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 0.449s, pg runtime 0.404s, speedup 0.900x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.975s, pg runtime 1.437s, speedup 0.361x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
10, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
11, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
12, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
13, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
14, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
15, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
16, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
17, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
18, opt runtime 0.612s, model runtime 1.438s, pg runtime 1.357s, speedup 0.944x
19, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
20, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
21, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.137s, speedup 0.915x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.131s, pg runtime 0.129s, speedup 0.990x
24, opt runtime 0.348s, model runtime 0.372s, pg runtime 0.391s, speedup 1.051x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
12, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
13, opt runtime 7.851s, model runtime 7.851s, pg runtime 13.622s, speedup 1.735x
14, opt runtime 7.442s, model runtime 8.035s, pg runtime 14.838s, speedup 1.847x
15, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
16, opt runtime 6.810s, model runtime 7.859s, pg runtime 13.796s, speedup 1.755x
17, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
18, opt runtime 6.656s, model runtime 7.351s, pg runtime 15.260s, speedup 2.076x
19, opt runtime 7.913s, model runtime 7.913s, pg runtime 15.548s, speedup 1.965x
20, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 29.063s, pg runtime 91.786s, speedup 3.158x
12, opt runtime 33.249s, model runtime 33.249s, pg runtime 103.551s, speedup 3.114x
13, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
14, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
15, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
16, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
17, opt runtime 30.778s, model runtime 30.778s, pg runtime 100.158s, speedup 3.254x
18, opt runtime 30.030s, model runtime 30.030s, pg runtime 85.930s, speedup 2.861x
19, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
20, opt runtime 29.576s, model runtime 29.576s, pg runtime 113.059s, speedup 3.823x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:09.450758
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.290336, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.965139698312885
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010641| train set 2.833x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 1.000202192695786
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4497636032790604
Epoch 3/300 |loss: 0.010792| train set 3.962x speedup, test set 1.450x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9393614842561687
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.4909581349036352
Epoch 4/300 |loss: 0.008040| train set 4.247x speedup, test set 1.491x speedup, val set 0.997x speedup, step: 5
JOB test speedup 0.9636501057221003
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.4909581349036352
Epoch 5/300 |loss: 0.007201| train set 3.845x speedup, test set 1.491x speedup, val set 0.970x speedup, step: 6
JOB test speedup 0.9875568991856558
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.6881961066309221
Epoch 6/300 |loss: 0.005425| train set 3.969x speedup, test set 1.688x speedup, val set 0.970x speedup, step: 7
JOB test speedup 0.934344630888189
TPCH test speedup 5.544229074338731
TPCH skew test speedup 1.6881961066309221
Epoch 7/300 |loss: 0.005035| train set 4.320x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 8
JOB test speedup 0.9461132070706719
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 8/300 |loss: 0.004618| train set 4.636x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 9
JOB test speedup 0.9391343381626142
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 9/300 |loss: 0.004327| train set 4.717x speedup, test set 1.073x speedup, val set 0.688x speedup, step: 10
JOB test speedup 0.939545725219783
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 10/300 |loss: 0.005148| train set 4.196x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 11
JOB test speedup 0.964926375774123
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 11/300 |loss: 0.004133| train set 4.195x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 12
JOB test speedup 0.942630259157586
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 12/300 |loss: 0.003352| train set 4.881x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 13
JOB test speedup 0.8808493965421204
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003366| train set 4.169x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 14
JOB test speedup 0.8743987475797059
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003199| train set 4.879x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.8802166071771802
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003108| train set 4.544x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 16
JOB test speedup 0.8717926979933737
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.002934| train set 4.776x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 17
JOB test speedup 0.8715494414347223
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002733| train set 4.902x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 18
JOB test speedup 0.8073077949460938
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002458| train set 4.924x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.9030944515543168
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002201| train set 4.868x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.8872709426223495
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002087| train set 4.935x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 21
JOB test speedup 0.8967461259940768
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.001987| train set 4.924x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.8150695248277565
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.001968| train set 4.908x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 23
JOB test speedup 0.8466406614896621
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001916| train set 4.744x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 24
JOB test speedup 0.9068032369167146
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 24/300 |loss: 0.001726| train set 4.849x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.9051309213927622
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001783| train set 4.892x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 26
JOB test speedup 0.7235468385764332
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001521| train set 4.791x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.7919108147158899
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001425| train set 4.864x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.8993146739352738
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001383| train set 4.943x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 29
JOB test speedup 0.9004399603349458
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001380| train set 4.894x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.7461344660099276
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001330| train set 4.855x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 31
JOB test speedup 0.7586506585368966
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0722058282917282
Epoch 31/300 |loss: 0.001309| train set 4.821x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 32
JOB test speedup 0.7536953306837916
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001213| train set 4.924x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.7671755460320264
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0722058282917282
Epoch 33/300 |loss: 0.001312| train set 4.937x speedup, test set 1.072x speedup, val set 0.728x speedup, step: 34
JOB test speedup 0.7390106042337011
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001195| train set 4.937x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.836139815279653
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001397| train set 4.941x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.7650171028421954
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001289| train set 4.743x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8358275423544612
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001074| train set 4.945x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.7973292829063158
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0722058282917282
Epoch 38/300 |loss: 0.001117| train set 4.938x speedup, test set 1.072x speedup, val set 0.727x speedup, step: 39
JOB test speedup 0.7412460807273541
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001091| train set 4.941x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7661713806279256
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001121| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 41
JOB test speedup 0.7966511266001647
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001137| train set 4.948x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7875693057198798
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001088| train set 4.723x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.7648024347723859
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001105| train set 4.852x speedup, test set 1.073x speedup, val set 0.703x speedup, step: 44
JOB test speedup 0.8122266717594989
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001380| train set 4.811x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7069258014248416
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001059| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.7700748534776695
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001115| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.7567617036343582
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001215| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.7612138507599019
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001038| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.8742708209540009
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.000957| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.7466435173797761
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001034| train set 4.810x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 51
JOB test speedup 0.7752255633464082
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001135| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 52
JOB test speedup 0.7419389138940647
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 52/300 |loss: 0.001069| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 53
JOB test speedup 0.7466128105315002
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 53/300 |loss: 0.001115| train set 4.895x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 54
JOB test speedup 0.8111924420762626
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 54/300 |loss: 0.001047| train set 4.926x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 55
JOB test speedup 0.8121025514139744
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727350141666414
Epoch 55/300 |loss: 0.001068| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 56
JOB test speedup 0.8019552155462926
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 56/300 |loss: 0.001131| train set 4.937x speedup, test set 1.073x speedup, val set 0.866x speedup, step: 57
JOB test speedup 0.8116657966416091
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 57/300 |loss: 0.001067| train set 4.863x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 58
early stopping at epoch 57
Training per epoch cost 2.463 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.198s, pg runtime 0.189s, speedup 0.958x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 0.449s, pg runtime 0.404s, speedup 0.900x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.975s, pg runtime 1.437s, speedup 0.361x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
10, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
11, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
12, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
13, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
14, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
15, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
16, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
17, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
18, opt runtime 0.612s, model runtime 1.438s, pg runtime 1.357s, speedup 0.944x
19, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
20, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
21, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.137s, speedup 0.915x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.131s, pg runtime 0.129s, speedup 0.990x
24, opt runtime 0.348s, model runtime 0.372s, pg runtime 0.391s, speedup 1.051x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
12, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
13, opt runtime 7.851s, model runtime 7.851s, pg runtime 13.622s, speedup 1.735x
14, opt runtime 7.442s, model runtime 8.035s, pg runtime 14.838s, speedup 1.847x
15, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
16, opt runtime 6.810s, model runtime 7.859s, pg runtime 13.796s, speedup 1.755x
17, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
18, opt runtime 6.656s, model runtime 7.351s, pg runtime 15.260s, speedup 2.076x
19, opt runtime 7.913s, model runtime 7.913s, pg runtime 15.548s, speedup 1.965x
20, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 29.063s, pg runtime 91.786s, speedup 3.158x
12, opt runtime 33.249s, model runtime 33.249s, pg runtime 103.551s, speedup 3.114x
13, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
14, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
15, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
16, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
17, opt runtime 30.778s, model runtime 30.778s, pg runtime 100.158s, speedup 3.254x
18, opt runtime 30.030s, model runtime 30.030s, pg runtime 85.930s, speedup 2.861x
19, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
20, opt runtime 29.576s, model runtime 29.576s, pg runtime 113.059s, speedup 3.823x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:27.319389
==================================================
all print will write to path record/postgresql/cross/one/TCNN/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/point
seed: 42
shuffle_num: 1
slow: 0
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['16', '10', '30', '17', '9', '5', '13']
test queries:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
test query:  ['10b.sql' '10c.sql' '10a.sql' '13c.sql' '13d.sql' '13b.sql' '13a.sql'
 '16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '30a.sql' '30b.sql' '30c.sql' '5b.sql'
 '5c.sql' '5a.sql' '9c.sql' '9d.sql' '9a.sql' '9b.sql']
load JOB succ
load TPCH...
TPCH test template [5, 20, 4, 15]
load TPCH succ
load TPCH_Skew...
TPCH test template [3, 1, 4, 8]
load TPCH Skew succ
construct training samples cost 0:00:01.259078, and there are 10682 training samples
in channel 9
JOB test speedup 0.7989221881053353
TPCH test speedup 5.770062975899051
TPCH skew test speedup 1.7478982058559192
Epoch 0/300 |loss: 0.038686| train set 2.158x speedup, test set 1.748x speedup, val set 1.150x speedup, step: 1
JOB test speedup 0.859512586178119
TPCH test speedup 3.303336561647923
TPCH skew test speedup 1.3744498330320993
Epoch 1/300 |loss: 0.015720| train set 2.615x speedup, test set 1.374x speedup, val set 1.128x speedup, step: 2
JOB test speedup 0.965139698312885
TPCH test speedup 4.196141997665447
TPCH skew test speedup 1.4899043968187573
Epoch 2/300 |loss: 0.010668| train set 2.809x speedup, test set 1.490x speedup, val set 0.997x speedup, step: 3
JOB test speedup 1.0250009546032106
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 3/300 |loss: 0.010846| train set 3.826x speedup, test set 1.375x speedup, val set 0.995x speedup, step: 4
JOB test speedup 0.9764100841172278
TPCH test speedup 4.255860577687987
TPCH skew test speedup 1.3753465385821884
Epoch 4/300 |loss: 0.007907| train set 4.225x speedup, test set 1.375x speedup, val set 0.967x speedup, step: 5
JOB test speedup 0.9621391716543328
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 5/300 |loss: 0.007254| train set 3.872x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 6
JOB test speedup 0.9627134824184126
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.6881961066309221
Epoch 6/300 |loss: 0.005472| train set 4.498x speedup, test set 1.688x speedup, val set 0.979x speedup, step: 7
JOB test speedup 0.9669467295163807
TPCH test speedup 4.602709388117864
TPCH skew test speedup 1.2896847196847903
Epoch 7/300 |loss: 0.005121| train set 4.063x speedup, test set 1.290x speedup, val set 0.981x speedup, step: 8
JOB test speedup 0.9208411288681908
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.953110004413681
Epoch 8/300 |loss: 0.004511| train set 4.623x speedup, test set 1.953x speedup, val set 0.981x speedup, step: 9
JOB test speedup 0.9394390178825193
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.953110004413681
Epoch 9/300 |loss: 0.004213| train set 4.484x speedup, test set 1.953x speedup, val set 0.981x speedup, step: 10
JOB test speedup 0.8827326281896523
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 10/300 |loss: 0.005106| train set 4.671x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 11
JOB test speedup 0.8897089964671077
TPCH test speedup 8.99604086857612
TPCH skew test speedup 0.9817637166756344
Epoch 11/300 |loss: 0.004040| train set 4.201x speedup, test set 0.982x speedup, val set 0.689x speedup, step: 12
JOB test speedup 0.9439489950344059
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.011570113917866
Epoch 12/300 |loss: 0.003315| train set 4.804x speedup, test set 1.012x speedup, val set 0.689x speedup, step: 13
JOB test speedup 0.8779965213963518
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 13/300 |loss: 0.003334| train set 4.653x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 14
JOB test speedup 0.8921439047092257
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 14/300 |loss: 0.003110| train set 4.690x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 15
JOB test speedup 0.919559871713575
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 15/300 |loss: 0.003084| train set 4.504x speedup, test set 1.073x speedup, val set 0.666x speedup, step: 16
JOB test speedup 0.863831369956459
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 16/300 |loss: 0.003030| train set 4.899x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 17
JOB test speedup 0.8630394187915174
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 17/300 |loss: 0.002767| train set 4.909x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 18
JOB test speedup 0.8582680748937964
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 18/300 |loss: 0.002577| train set 4.923x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 19
JOB test speedup 0.8609979000963908
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 19/300 |loss: 0.002271| train set 4.892x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 20
JOB test speedup 0.892464813363876
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 20/300 |loss: 0.002169| train set 4.911x speedup, test set 1.073x speedup, val set 0.702x speedup, step: 21
JOB test speedup 0.8842863654090924
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 21/300 |loss: 0.002060| train set 4.888x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 22
JOB test speedup 0.8732060637736716
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 22/300 |loss: 0.002039| train set 4.931x speedup, test set 1.073x speedup, val set 0.689x speedup, step: 23
JOB test speedup 0.8603718717584087
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 23/300 |loss: 0.001919| train set 4.932x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 24
JOB test speedup 0.8719823189574701
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.011570113917866
Epoch 24/300 |loss: 0.001760| train set 4.845x speedup, test set 1.012x speedup, val set 0.727x speedup, step: 25
JOB test speedup 0.9049007499586817
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 25/300 |loss: 0.001846| train set 4.887x speedup, test set 1.073x speedup, val set 0.734x speedup, step: 26
JOB test speedup 0.8888353814279513
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 26/300 |loss: 0.001631| train set 4.855x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 27
JOB test speedup 0.7689888435919394
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 27/300 |loss: 0.001420| train set 4.842x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 28
JOB test speedup 0.8757109035129687
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 28/300 |loss: 0.001401| train set 4.885x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 29
JOB test speedup 0.873321214715033
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 29/300 |loss: 0.001381| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 30
JOB test speedup 0.8493004475445054
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 30/300 |loss: 0.001271| train set 4.863x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 31
JOB test speedup 0.784212172842253
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 31/300 |loss: 0.001285| train set 4.759x speedup, test set 1.073x speedup, val set 0.686x speedup, step: 32
JOB test speedup 0.868926066218099
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 32/300 |loss: 0.001253| train set 4.929x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 33
JOB test speedup 0.757768407810903
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 33/300 |loss: 0.001252| train set 4.931x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 34
JOB test speedup 0.890096247150813
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 34/300 |loss: 0.001240| train set 4.940x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 35
JOB test speedup 0.869710621240662
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 35/300 |loss: 0.001334| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 36
JOB test speedup 0.8247649253460887
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 36/300 |loss: 0.001297| train set 4.941x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 37
JOB test speedup 0.8812573725062905
TPCH test speedup 6.785749388686904
TPCH skew test speedup 1.0727514430351917
Epoch 37/300 |loss: 0.001134| train set 4.886x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 38
JOB test speedup 0.8836266705427893
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 38/300 |loss: 0.001101| train set 4.943x speedup, test set 1.073x speedup, val set 0.725x speedup, step: 39
JOB test speedup 0.722887245287987
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 39/300 |loss: 0.001126| train set 4.936x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 40
JOB test speedup 0.7868113189162846
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 40/300 |loss: 0.001138| train set 4.942x speedup, test set 1.073x speedup, val set 0.726x speedup, step: 41
JOB test speedup 0.8293830202727921
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 41/300 |loss: 0.001118| train set 4.946x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 42
JOB test speedup 0.7276390236057856
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 42/300 |loss: 0.001091| train set 4.838x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 43
JOB test speedup 0.7898096247405434
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 43/300 |loss: 0.001241| train set 4.919x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 44
JOB test speedup 0.7755707875803945
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 44/300 |loss: 0.001272| train set 4.734x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 45
JOB test speedup 0.7705613239701287
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 45/300 |loss: 0.001079| train set 4.932x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 46
JOB test speedup 0.8737126561661818
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 46/300 |loss: 0.001080| train set 4.933x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 47
JOB test speedup 0.884895840658152
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 47/300 |loss: 0.001184| train set 4.850x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 48
JOB test speedup 0.7383586547266031
TPCH test speedup 8.99604086857612
TPCH skew test speedup 1.0727514430351917
Epoch 48/300 |loss: 0.001030| train set 4.939x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 49
JOB test speedup 0.8674245805042261
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 49/300 |loss: 0.001004| train set 4.947x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 50
JOB test speedup 0.779864136860532
TPCH test speedup 6.944019498499311
TPCH skew test speedup 1.0727514430351917
Epoch 50/300 |loss: 0.001100| train set 4.942x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 51
JOB test speedup 0.87378930620612
TPCH test speedup 5.527780872935055
TPCH skew test speedup 1.0727514430351917
Epoch 51/300 |loss: 0.001129| train set 4.934x speedup, test set 1.073x speedup, val set 0.727x speedup, step: 52
early stopping at epoch 51
Training per epoch cost 2.480 s
Optimal speedup on JOB test set is 2.520x
Optimal speedup on tpch test set is 11.825x
Optimal speedup on tpch skew test set is 2.065x
========== JOB
01, opt runtime 0.183s, model runtime 0.198s, pg runtime 0.189s, speedup 0.958x
02, opt runtime 1.299s, model runtime 5.593s, pg runtime 5.855s, speedup 1.047x
03, opt runtime 0.399s, model runtime 0.449s, pg runtime 0.404s, speedup 0.900x
04, opt runtime 0.637s, model runtime 1.418s, pg runtime 0.637s, speedup 0.449x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.661s, model runtime 1.445s, pg runtime 0.661s, speedup 0.457x
07, opt runtime 1.437s, model runtime 3.975s, pg runtime 1.437s, speedup 0.361x
08, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
09, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
10, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
11, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
12, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
13, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
14, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
15, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
16, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
17, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
18, opt runtime 0.612s, model runtime 1.438s, pg runtime 1.357s, speedup 0.944x
19, opt runtime 0.189s, model runtime 0.667s, pg runtime 0.189s, speedup 0.284x
20, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
21, opt runtime 0.136s, model runtime 0.149s, pg runtime 0.137s, speedup 0.915x
22, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
23, opt runtime 0.129s, model runtime 0.131s, pg runtime 0.129s, speedup 0.990x
24, opt runtime 0.348s, model runtime 0.372s, pg runtime 0.391s, speedup 1.051x
25, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
26, opt runtime 0.250s, model runtime 0.262s, pg runtime 0.250s, speedup 0.954x
27, opt runtime 0.278s, model runtime 0.278s, pg runtime 0.948s, speedup 3.415x
========== TPCH
01, opt runtime 18.392s, model runtime 18.392s, pg runtime 18.392s, speedup 1.000x
02, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
03, opt runtime 17.779s, model runtime 17.779s, pg runtime 17.779s, speedup 1.000x
04, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
05, opt runtime 14.857s, model runtime 14.857s, pg runtime 14.857s, speedup 1.000x
06, opt runtime 19.263s, model runtime 19.263s, pg runtime 19.263s, speedup 1.000x
07, opt runtime 15.831s, model runtime 15.831s, pg runtime 15.831s, speedup 1.000x
08, opt runtime 9.432s, model runtime 9.432s, pg runtime 9.432s, speedup 1.000x
09, opt runtime 26.874s, model runtime 26.874s, pg runtime 26.874s, speedup 1.000x
10, opt runtime 21.143s, model runtime 21.143s, pg runtime 21.143s, speedup 1.000x
11, opt runtime 7.237s, model runtime 8.427s, pg runtime 17.708s, speedup 2.101x
12, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
13, opt runtime 7.851s, model runtime 7.851s, pg runtime 13.622s, speedup 1.735x
14, opt runtime 7.442s, model runtime 8.035s, pg runtime 14.838s, speedup 1.847x
15, opt runtime 7.110s, model runtime 7.841s, pg runtime 14.286s, speedup 1.822x
16, opt runtime 6.810s, model runtime 7.859s, pg runtime 13.796s, speedup 1.755x
17, opt runtime 6.460s, model runtime 7.335s, pg runtime 16.134s, speedup 2.200x
18, opt runtime 6.656s, model runtime 7.351s, pg runtime 15.260s, speedup 2.076x
19, opt runtime 7.913s, model runtime 7.913s, pg runtime 15.548s, speedup 1.965x
20, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
21, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
22, opt runtime 7.096s, model runtime 9.079s, pg runtime 7.096s, speedup 0.782x
23, opt runtime 7.063s, model runtime 9.862s, pg runtime 7.063s, speedup 0.716x
24, opt runtime 7.268s, model runtime 10.315s, pg runtime 7.268s, speedup 0.705x
25, opt runtime 6.854s, model runtime 10.279s, pg runtime 6.854s, speedup 0.667x
26, opt runtime 6.905s, model runtime 9.336s, pg runtime 6.905s, speedup 0.740x
27, opt runtime 6.663s, model runtime 9.628s, pg runtime 6.663s, speedup 0.692x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 7.066s, model runtime 9.776s, pg runtime 7.533s, speedup 0.771x
30, opt runtime 6.961s, model runtime 9.536s, pg runtime 6.961s, speedup 0.730x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 23.619s, model runtime 37.947s, pg runtime 23.619s, speedup 0.622x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 28.185s, model runtime 45.585s, pg runtime 28.185s, speedup 0.618x
04, opt runtime 22.802s, model runtime 34.903s, pg runtime 22.802s, speedup 0.653x
05, opt runtime 19.407s, model runtime 36.031s, pg runtime 19.407s, speedup 0.539x
06, opt runtime 34.077s, model runtime 35.459s, pg runtime 34.077s, speedup 0.961x
07, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
08, opt runtime 18.839s, model runtime 32.324s, pg runtime 18.839s, speedup 0.583x
09, opt runtime 30.267s, model runtime 35.649s, pg runtime 30.267s, speedup 0.849x
10, opt runtime 19.593s, model runtime 31.978s, pg runtime 19.593s, speedup 0.613x
11, opt runtime 29.063s, model runtime 29.063s, pg runtime 91.786s, speedup 3.158x
12, opt runtime 33.249s, model runtime 33.249s, pg runtime 103.551s, speedup 3.114x
13, opt runtime 33.759s, model runtime 33.759s, pg runtime 98.290s, speedup 2.912x
14, opt runtime 36.646s, model runtime 36.646s, pg runtime 98.171s, speedup 2.679x
15, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
16, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
17, opt runtime 30.778s, model runtime 30.778s, pg runtime 100.158s, speedup 3.254x
18, opt runtime 30.030s, model runtime 30.030s, pg runtime 85.930s, speedup 2.861x
19, opt runtime 28.776s, model runtime 28.776s, pg runtime 86.923s, speedup 3.021x
20, opt runtime 29.576s, model runtime 29.576s, pg runtime 113.059s, speedup 3.823x
21, opt runtime 10.669s, model runtime 29.760s, pg runtime 29.760s, speedup 1.000x
22, opt runtime 16.844s, model runtime 27.164s, pg runtime 27.164s, speedup 1.000x
23, opt runtime 20.708s, model runtime 20.708s, pg runtime 20.708s, speedup 1.000x
24, opt runtime 30.649s, model runtime 30.649s, pg runtime 30.649s, speedup 1.000x
25, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
26, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
27, opt runtime 28.312s, model runtime 28.312s, pg runtime 28.312s, speedup 1.000x
28, opt runtime 11.965s, model runtime 11.965s, pg runtime 11.965s, speedup 1.000x
29, opt runtime 21.883s, model runtime 24.220s, pg runtime 24.220s, speedup 1.000x
30, opt runtime 13.053s, model runtime 13.053s, pg runtime 13.053s, speedup 1.000x
31, opt runtime 2.983s, model runtime 2.994s, pg runtime 11.844s, speedup 3.955x
32, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
33, opt runtime 3.020s, model runtime 3.020s, pg runtime 13.874s, speedup 4.594x
34, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
35, opt runtime 2.718s, model runtime 3.567s, pg runtime 12.519s, speedup 3.509x
36, opt runtime 2.748s, model runtime 3.118s, pg runtime 11.962s, speedup 3.837x
37, opt runtime 3.090s, model runtime 3.090s, pg runtime 14.431s, speedup 4.670x
38, opt runtime 3.079s, model runtime 3.079s, pg runtime 13.817s, speedup 4.488x
39, opt runtime 2.923s, model runtime 4.105s, pg runtime 13.811s, speedup 3.365x
40, opt runtime 2.833s, model runtime 3.237s, pg runtime 12.441s, speedup 3.844x
====================
JOB best validation speedup epoch: 0, train speedup 2.158, test speedup 0.799, val speedup 1.150
TPCH best validation speedup epoch: 0, train speedup 2.158, test speedup 5.770, val speedup 1.150
TPCH Skew best validation speedup epoch: 0, train speedup 2.158, test speedup 1.748, val speedup 1.150
execution cost 0:03:08.005214
==================================================
