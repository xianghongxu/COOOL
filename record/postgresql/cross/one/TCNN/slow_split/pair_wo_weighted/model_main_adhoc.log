all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.916157, and there are 37025 training samples
in channel 9
JOB test speedup 0.6240206387832709
TPCH test speedup 0.9951307510965463
TPCH skew test speedup 0.970349615681918
Epoch 0/50 |loss: 0.365060| train set 0.246x speedup, test set 0.970x speedup, val set 0.294x speedup, step: 1, train time 24.33 s
JOB test speedup 0.44431241825307194
TPCH test speedup 1.1568832999487395
TPCH skew test speedup 1.1148993579478137
Epoch 1/50 |loss: 0.284487| train set 0.243x speedup, test set 1.115x speedup, val set 0.269x speedup, step: 2, train time 23.45 s
JOB test speedup 0.5005098315955732
TPCH test speedup 1.1676227074898813
TPCH skew test speedup 1.1328507867176163
Epoch 2/50 |loss: 0.254185| train set 0.242x speedup, test set 1.133x speedup, val set 0.269x speedup, step: 3, train time 23.19 s
JOB test speedup 0.41962284021708457
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 3/50 |loss: 0.233567| train set 0.245x speedup, test set 1.107x speedup, val set 0.266x speedup, step: 4, train time 23.39 s
JOB test speedup 0.4315485220341706
TPCH test speedup 1.2562247262068105
TPCH skew test speedup 1.288484171055384
Epoch 4/50 |loss: 0.218372| train set 0.244x speedup, test set 1.288x speedup, val set 0.269x speedup, step: 5, train time 23.18 s
JOB test speedup 0.4372203153862146
TPCH test speedup 2.2014423616799705
TPCH skew test speedup 2.114835485710253
Epoch 5/50 |loss: 0.204839| train set 0.236x speedup, test set 2.115x speedup, val set 0.269x speedup, step: 6, train time 23.15 s
JOB test speedup 0.4353019861640341
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 6/50 |loss: 0.195414| train set 0.240x speedup, test set 1.107x speedup, val set 0.266x speedup, step: 7, train time 23.38 s
JOB test speedup 0.46596524544949697
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 7/50 |loss: 0.186633| train set 0.237x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 8, train time 23.37 s
JOB test speedup 0.42893532336556267
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 8/50 |loss: 0.178425| train set 0.236x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 9, train time 23.38 s
JOB test speedup 0.41674858197477754
TPCH test speedup 1.5390070659594453
TPCH skew test speedup 1.6700612143735087
Epoch 9/50 |loss: 0.173216| train set 0.239x speedup, test set 1.670x speedup, val set 0.266x speedup, step: 10, train time 23.22 s
JOB test speedup 0.46440119881634084
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 10/50 |loss: 0.166214| train set 0.235x speedup, test set 1.107x speedup, val set 0.266x speedup, step: 11, train time 23.18 s
JOB test speedup 0.5187902441335053
TPCH test speedup 1.2562247262068105
TPCH skew test speedup 1.288484171055384
Epoch 11/50 |loss: 0.161075| train set 0.236x speedup, test set 1.288x speedup, val set 0.266x speedup, step: 12, train time 23.20 s
JOB test speedup 0.5008954853229238
TPCH test speedup 1.7922211413867983
TPCH skew test speedup 1.7656915748868904
Epoch 12/50 |loss: 0.157344| train set 0.242x speedup, test set 1.766x speedup, val set 0.266x speedup, step: 13, train time 23.19 s
JOB test speedup 0.4622438117598626
TPCH test speedup 1.2190064358560389
TPCH skew test speedup 1.2524818941687643
Epoch 13/50 |loss: 0.151986| train set 0.235x speedup, test set 1.252x speedup, val set 0.269x speedup, step: 14, train time 23.28 s
JOB test speedup 0.4211892339279719
TPCH test speedup 1.2562247262068105
TPCH skew test speedup 1.288484171055384
Epoch 14/50 |loss: 0.151064| train set 0.237x speedup, test set 1.288x speedup, val set 0.266x speedup, step: 15, train time 23.38 s
JOB test speedup 0.4383080565675122
TPCH test speedup 1.2562247262068105
TPCH skew test speedup 1.288484171055384
Epoch 15/50 |loss: 0.146320| train set 0.235x speedup, test set 1.288x speedup, val set 0.269x speedup, step: 16, train time 23.66 s
JOB test speedup 0.41301129924233304
TPCH test speedup 1.7922211413867983
TPCH skew test speedup 1.7656915748868904
Epoch 16/50 |loss: 0.144747| train set 0.236x speedup, test set 1.766x speedup, val set 0.266x speedup, step: 17, train time 24.09 s
JOB test speedup 0.4808694362946833
TPCH test speedup 1.2217490676070197
TPCH skew test speedup 1.2376105049749357
Epoch 17/50 |loss: 0.142726| train set 0.236x speedup, test set 1.238x speedup, val set 0.266x speedup, step: 18, train time 23.40 s
JOB test speedup 0.4737586427339968
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 18/50 |loss: 0.137353| train set 0.236x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 19, train time 23.59 s
JOB test speedup 0.46146816707524707
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 19/50 |loss: 0.137304| train set 0.236x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 20, train time 23.50 s
JOB test speedup 0.46627879717877047
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 20/50 |loss: 0.135290| train set 0.238x speedup, test set 1.107x speedup, val set 0.266x speedup, step: 21, train time 23.51 s
JOB test speedup 0.46673257834473947
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 21/50 |loss: 0.132264| train set 0.238x speedup, test set 0.978x speedup, val set 0.266x speedup, step: 22, train time 23.60 s
JOB test speedup 0.46858139594577836
TPCH test speedup 1.2562247262068105
TPCH skew test speedup 1.288484171055384
Epoch 22/50 |loss: 0.132590| train set 0.236x speedup, test set 1.288x speedup, val set 0.269x speedup, step: 23, train time 23.66 s
JOB test speedup 0.4090301139189495
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 23/50 |loss: 0.129666| train set 0.233x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 24, train time 23.79 s
JOB test speedup 0.4310153239174011
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 24/50 |loss: 0.126109| train set 0.232x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 25, train time 23.71 s
JOB test speedup 0.41631415349144457
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 25/50 |loss: 0.126227| train set 0.234x speedup, test set 1.107x speedup, val set 0.266x speedup, step: 26, train time 23.97 s
JOB test speedup 0.4652066855270113
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 26/50 |loss: 0.122804| train set 0.240x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 27, train time 23.79 s
JOB test speedup 0.4285272222196135
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 27/50 |loss: 0.122937| train set 0.237x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 28, train time 23.96 s
JOB test speedup 0.4724619312132843
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 28/50 |loss: 0.119589| train set 0.236x speedup, test set 1.657x speedup, val set 0.265x speedup, step: 29, train time 23.89 s
JOB test speedup 0.5142433377627177
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 29/50 |loss: 0.121026| train set 0.233x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 30, train time 23.81 s
JOB test speedup 0.39438537706654025
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 30/50 |loss: 0.119522| train set 0.236x speedup, test set 1.657x speedup, val set 0.262x speedup, step: 31, train time 23.88 s
JOB test speedup 0.44647021050494123
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 31/50 |loss: 0.117744| train set 0.232x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 32, train time 23.88 s
JOB test speedup 0.43211887775739727
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 32/50 |loss: 0.118524| train set 0.233x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 33, train time 23.80 s
JOB test speedup 0.42651357407277096
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 33/50 |loss: 0.116322| train set 0.232x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 34, train time 24.07 s
JOB test speedup 0.423286255921285
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 34/50 |loss: 0.117909| train set 0.236x speedup, test set 1.635x speedup, val set 0.266x speedup, step: 35, train time 23.90 s
JOB test speedup 0.4194597906196849
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 35/50 |loss: 0.114012| train set 0.235x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 36, train time 23.89 s
JOB test speedup 0.45070918270915844
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 36/50 |loss: 0.110966| train set 0.234x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 37, train time 23.81 s
JOB test speedup 0.4702060236642367
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 37/50 |loss: 0.111349| train set 0.233x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 38, train time 23.99 s
JOB test speedup 0.4133292577318381
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 38/50 |loss: 0.112290| train set 0.232x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 39, train time 23.99 s
JOB test speedup 0.46750053688602317
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 39/50 |loss: 0.110424| train set 0.233x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 40, train time 24.10 s
JOB test speedup 0.42461921798412827
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 40/50 |loss: 0.109473| train set 0.236x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 41, train time 24.10 s
JOB test speedup 0.5523434573581009
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 41/50 |loss: 0.110395| train set 0.236x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 42, train time 24.00 s
JOB test speedup 0.4554905925671277
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 42/50 |loss: 0.108864| train set 0.237x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 43, train time 24.18 s
JOB test speedup 0.45448414452848385
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 43/50 |loss: 0.107152| train set 0.232x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 44, train time 24.67 s
JOB test speedup 0.46016004576019554
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.557862106056903
Epoch 44/50 |loss: 0.105897| train set 0.233x speedup, test set 1.558x speedup, val set 0.262x speedup, step: 45, train time 23.97 s
JOB test speedup 0.47616212498183663
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 45/50 |loss: 0.105366| train set 0.237x speedup, test set 1.383x speedup, val set 0.288x speedup, step: 46, train time 23.98 s
JOB test speedup 0.4067300589383564
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 46/50 |loss: 0.104863| train set 0.233x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 47, train time 24.09 s
JOB test speedup 0.4451070679341685
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 47/50 |loss: 0.104587| train set 0.232x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 48, train time 23.97 s
JOB test speedup 0.45664597046756084
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 48/50 |loss: 0.104038| train set 0.205x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 49, train time 23.98 s
JOB test speedup 0.45416144498916705
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 49/50 |loss: 0.102012| train set 0.234x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 50, train time 23.97 s
Training per epoch cost 23.729 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 19.941s, pg runtime 0.206s, speedup 0.010x
02, opt runtime 4.223s, model runtime 30.512s, pg runtime 18.741s, speedup 0.614x
03, opt runtime 1.763s, model runtime 18.644s, pg runtime 1.763s, speedup 0.095x
04, opt runtime 1.386s, model runtime 18.916s, pg runtime 1.386s, speedup 0.073x
05, opt runtime 3.504s, model runtime 7.826s, pg runtime 6.143s, speedup 0.785x
06, opt runtime 2.593s, model runtime 25.213s, pg runtime 8.283s, speedup 0.329x
07, opt runtime 2.046s, model runtime 7.753s, pg runtime 5.879s, speedup 0.758x
08, opt runtime 1.737s, model runtime 7.168s, pg runtime 5.994s, speedup 0.836x
09, opt runtime 2.324s, model runtime 11.658s, pg runtime 10.605s, speedup 0.910x
10, opt runtime 3.248s, model runtime 19.559s, pg runtime 10.538s, speedup 0.539x
11, opt runtime 0.294s, model runtime 9.920s, pg runtime 2.352s, speedup 0.237x
12, opt runtime 4.443s, model runtime 31.658s, pg runtime 13.945s, speedup 0.440x
13, opt runtime 5.179s, model runtime 15.879s, pg runtime 10.685s, speedup 0.673x
14, opt runtime 0.157s, model runtime 10.874s, pg runtime 0.393s, speedup 0.036x
15, opt runtime 1.829s, model runtime 29.394s, pg runtime 53.885s, speedup 1.833x
16, opt runtime 1.876s, model runtime 8.986s, pg runtime 6.089s, speedup 0.678x
17, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
18, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
19, opt runtime 0.379s, model runtime 5.607s, pg runtime 3.645s, speedup 0.650x
20, opt runtime 0.626s, model runtime 12.350s, pg runtime 2.558s, speedup 0.207x
21, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
22, opt runtime 3.136s, model runtime 22.651s, pg runtime 5.620s, speedup 0.248x
23, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
24, opt runtime 0.332s, model runtime 7.761s, pg runtime 0.332s, speedup 0.043x
25, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
26, opt runtime 0.965s, model runtime 9.814s, pg runtime 0.965s, speedup 0.098x
========== TPCH
01, opt runtime 28.639s, model runtime 66.677s, pg runtime 91.784s, speedup 1.377x
02, opt runtime 29.763s, model runtime 65.146s, pg runtime 91.648s, speedup 1.407x
03, opt runtime 30.267s, model runtime 65.922s, pg runtime 100.885s, speedup 1.530x
04, opt runtime 29.286s, model runtime 67.254s, pg runtime 92.131s, speedup 1.370x
05, opt runtime 29.269s, model runtime 65.185s, pg runtime 91.296s, speedup 1.401x
06, opt runtime 29.502s, model runtime 65.691s, pg runtime 112.305s, speedup 1.710x
07, opt runtime 27.886s, model runtime 64.928s, pg runtime 97.629s, speedup 1.504x
08, opt runtime 30.705s, model runtime 70.161s, pg runtime 89.698s, speedup 1.278x
09, opt runtime 27.651s, model runtime 67.744s, pg runtime 91.255s, speedup 1.347x
10, opt runtime 33.637s, model runtime 70.561s, pg runtime 90.618s, speedup 1.284x
11, opt runtime 53.298s, model runtime 641.154s, pg runtime 148.707s, speedup 0.232x
12, opt runtime 48.784s, model runtime 648.484s, pg runtime 78.349s, speedup 0.121x
13, opt runtime 53.440s, model runtime 627.477s, pg runtime 140.742s, speedup 0.224x
14, opt runtime 47.812s, model runtime 643.955s, pg runtime 83.069s, speedup 0.129x
15, opt runtime 47.518s, model runtime 624.264s, pg runtime 75.736s, speedup 0.121x
16, opt runtime 48.067s, model runtime 632.688s, pg runtime 81.014s, speedup 0.128x
17, opt runtime 47.738s, model runtime 621.410s, pg runtime 76.021s, speedup 0.122x
18, opt runtime 47.804s, model runtime 637.747s, pg runtime 81.177s, speedup 0.127x
19, opt runtime 49.511s, model runtime 698.879s, pg runtime 87.329s, speedup 0.125x
20, opt runtime 51.276s, model runtime 631.737s, pg runtime 79.222s, speedup 0.125x
21, opt runtime 24.391s, model runtime 597.697s, pg runtime 601.866s, speedup 1.007x
22, opt runtime 24.079s, model runtime 600.642s, pg runtime 608.707s, speedup 1.013x
23, opt runtime 24.662s, model runtime 609.600s, pg runtime 613.999s, speedup 1.007x
24, opt runtime 24.459s, model runtime 604.056s, pg runtime 608.717s, speedup 1.008x
25, opt runtime 25.236s, model runtime 618.593s, pg runtime 601.756s, speedup 0.973x
26, opt runtime 25.363s, model runtime 607.433s, pg runtime 611.327s, speedup 1.006x
27, opt runtime 24.706s, model runtime 596.799s, pg runtime 610.808s, speedup 1.023x
28, opt runtime 25.075s, model runtime 607.146s, pg runtime 612.430s, speedup 1.009x
29, opt runtime 24.840s, model runtime 613.317s, pg runtime 626.529s, speedup 1.022x
30, opt runtime 24.920s, model runtime 600.533s, pg runtime 610.993s, speedup 1.017x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 29.063s, model runtime 67.790s, pg runtime 91.786s, speedup 1.354x
02, opt runtime 33.249s, model runtime 71.275s, pg runtime 103.551s, speedup 1.453x
03, opt runtime 33.759s, model runtime 70.794s, pg runtime 98.290s, speedup 1.388x
04, opt runtime 36.646s, model runtime 66.614s, pg runtime 98.171s, speedup 1.474x
05, opt runtime 32.482s, model runtime 72.642s, pg runtime 123.411s, speedup 1.699x
06, opt runtime 31.996s, model runtime 66.753s, pg runtime 120.854s, speedup 1.810x
07, opt runtime 30.778s, model runtime 68.265s, pg runtime 100.158s, speedup 1.467x
08, opt runtime 30.030s, model runtime 67.656s, pg runtime 85.930s, speedup 1.270x
09, opt runtime 28.776s, model runtime 70.439s, pg runtime 86.923s, speedup 1.234x
10, opt runtime 29.576s, model runtime 71.065s, pg runtime 113.059s, speedup 1.591x
11, opt runtime 53.915s, model runtime 648.981s, pg runtime 80.711s, speedup 0.124x
12, opt runtime 53.203s, model runtime 634.254s, pg runtime 79.156s, speedup 0.125x
13, opt runtime 51.456s, model runtime 660.212s, pg runtime 93.781s, speedup 0.142x
14, opt runtime 54.696s, model runtime 674.445s, pg runtime 98.172s, speedup 0.146x
15, opt runtime 51.200s, model runtime 626.707s, pg runtime 77.674s, speedup 0.124x
16, opt runtime 47.844s, model runtime 609.493s, pg runtime 80.007s, speedup 0.131x
17, opt runtime 54.335s, model runtime 618.380s, pg runtime 95.799s, speedup 0.155x
18, opt runtime 48.088s, model runtime 633.370s, pg runtime 77.369s, speedup 0.122x
19, opt runtime 52.382s, model runtime 654.522s, pg runtime 82.710s, speedup 0.126x
20, opt runtime 52.135s, model runtime 634.708s, pg runtime 102.039s, speedup 0.161x
21, opt runtime 24.737s, model runtime 604.720s, pg runtime 616.762s, speedup 1.020x
22, opt runtime 25.478s, model runtime 614.298s, pg runtime 642.079s, speedup 1.045x
23, opt runtime 24.016s, model runtime 607.795s, pg runtime 601.228s, speedup 0.989x
24, opt runtime 24.103s, model runtime 605.196s, pg runtime 616.889s, speedup 1.019x
25, opt runtime 24.136s, model runtime 619.954s, pg runtime 609.432s, speedup 0.983x
26, opt runtime 25.431s, model runtime 622.963s, pg runtime 625.988s, speedup 1.005x
27, opt runtime 24.451s, model runtime 609.888s, pg runtime 628.615s, speedup 1.031x
28, opt runtime 24.465s, model runtime 612.708s, pg runtime 644.779s, speedup 1.052x
29, opt runtime 25.152s, model runtime 612.131s, pg runtime 613.332s, speedup 1.002x
30, opt runtime 24.505s, model runtime 595.223s, pg runtime 621.574s, speedup 1.044x
31, opt runtime 16.756s, model runtime 38.272s, pg runtime 602.586s, speedup 15.745x
32, opt runtime 16.542s, model runtime 34.826s, pg runtime 461.957s, speedup 13.265x
33, opt runtime 16.136s, model runtime 34.764s, pg runtime 410.283s, speedup 11.802x
34, opt runtime 14.422s, model runtime 36.667s, pg runtime 497.542s, speedup 13.569x
35, opt runtime 15.980s, model runtime 35.716s, pg runtime 504.239s, speedup 14.118x
36, opt runtime 16.482s, model runtime 36.634s, pg runtime 622.915s, speedup 17.004x
37, opt runtime 16.301s, model runtime 37.863s, pg runtime 646.719s, speedup 17.081x
38, opt runtime 16.194s, model runtime 34.791s, pg runtime 439.255s, speedup 12.626x
39, opt runtime 16.149s, model runtime 34.948s, pg runtime 423.122s, speedup 12.107x
40, opt runtime 13.751s, model runtime 37.676s, pg runtime 434.625s, speedup 11.536x
====================
JOB best validation speedup epoch: 0, train speedup 0.246, test speedup 0.624, val speedup 0.294
TPCH best validation speedup epoch: 0, train speedup 0.246, test speedup 0.995, val speedup 0.294
TPCH Skew best validation speedup epoch: 0, train speedup 0.246, test speedup 0.970, val speedup 0.294
execution cost 0:20:54.236375
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:02.001900, and there are 37025 training samples
in channel 9
JOB test speedup 0.6647717248753648
TPCH test speedup 1.775207336586341
TPCH skew test speedup 1.7191237678558664
Epoch 0/50 |loss: 0.365363| train set 0.248x speedup, test set 1.719x speedup, val set 0.275x speedup, step: 1, train time 24.96 s
JOB test speedup 0.4777918345783338
TPCH test speedup 0.9951307510965463
TPCH skew test speedup 0.970349615681918
Epoch 1/50 |loss: 0.284051| train set 0.240x speedup, test set 0.970x speedup, val set 0.271x speedup, step: 2, train time 23.51 s
JOB test speedup 0.4969693380911839
TPCH test speedup 1.2971395163634811
TPCH skew test speedup 1.2605120986320966
Epoch 2/50 |loss: 0.253852| train set 0.240x speedup, test set 1.261x speedup, val set 0.269x speedup, step: 3, train time 23.42 s
JOB test speedup 0.45007029563193046
TPCH test speedup 1.3182402254529662
TPCH skew test speedup 1.2937179392512963
Epoch 3/50 |loss: 0.233112| train set 0.244x speedup, test set 1.294x speedup, val set 0.269x speedup, step: 4, train time 23.46 s
JOB test speedup 0.4620520569761605
TPCH test speedup 0.9414215138088411
TPCH skew test speedup 1.0568117230370135
Epoch 4/50 |loss: 0.216970| train set 0.247x speedup, test set 1.057x speedup, val set 0.269x speedup, step: 5, train time 23.50 s
JOB test speedup 0.4066532619117823
TPCH test speedup 0.815317709828323
TPCH skew test speedup 0.8005895020234369
Epoch 5/50 |loss: 0.204909| train set 0.237x speedup, test set 0.801x speedup, val set 0.269x speedup, step: 6, train time 23.77 s
JOB test speedup 0.47063746282714475
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 6/50 |loss: 0.195019| train set 0.240x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 7, train time 23.57 s
JOB test speedup 0.49875376156466095
TPCH test speedup 1.1944435348714895
TPCH skew test speedup 1.176546980724341
Epoch 7/50 |loss: 0.184976| train set 0.237x speedup, test set 1.177x speedup, val set 0.269x speedup, step: 8, train time 23.32 s
JOB test speedup 0.4040473176917798
TPCH test speedup 1.1944435348714895
TPCH skew test speedup 1.176546980724341
Epoch 8/50 |loss: 0.178256| train set 0.238x speedup, test set 1.177x speedup, val set 0.269x speedup, step: 9, train time 23.77 s
JOB test speedup 0.4619791401719251
TPCH test speedup 1.4668341998710444
TPCH skew test speedup 1.4240742132704398
Epoch 9/50 |loss: 0.172247| train set 0.240x speedup, test set 1.424x speedup, val set 0.269x speedup, step: 10, train time 24.02 s
JOB test speedup 0.4966391305375662
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 10/50 |loss: 0.167149| train set 0.240x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 11, train time 23.88 s
JOB test speedup 0.4932091176180104
TPCH test speedup 1.1944435348714895
TPCH skew test speedup 1.176546980724341
Epoch 11/50 |loss: 0.161734| train set 0.236x speedup, test set 1.177x speedup, val set 0.269x speedup, step: 12, train time 24.00 s
JOB test speedup 0.43922895480681057
TPCH test speedup 1.4319331899719006
TPCH skew test speedup 1.4300560415123929
Epoch 12/50 |loss: 0.158400| train set 0.238x speedup, test set 1.430x speedup, val set 0.269x speedup, step: 13, train time 24.22 s
JOB test speedup 0.5088268756368626
TPCH test speedup 1.1944435348714895
TPCH skew test speedup 1.176546980724341
Epoch 13/50 |loss: 0.152919| train set 0.236x speedup, test set 1.177x speedup, val set 0.269x speedup, step: 14, train time 24.20 s
JOB test speedup 0.4807784970676424
TPCH test speedup 1.3329393803816474
TPCH skew test speedup 1.3940991676970726
Epoch 14/50 |loss: 0.152224| train set 0.237x speedup, test set 1.394x speedup, val set 0.269x speedup, step: 15, train time 23.91 s
JOB test speedup 0.4013386130949389
TPCH test speedup 1.1944435348714895
TPCH skew test speedup 1.176546980724341
Epoch 15/50 |loss: 0.148185| train set 0.234x speedup, test set 1.177x speedup, val set 0.269x speedup, step: 16, train time 24.09 s
JOB test speedup 0.44540325958789223
TPCH test speedup 1.8013212452830998
TPCH skew test speedup 1.6473381181873947
Epoch 16/50 |loss: 0.144666| train set 0.244x speedup, test set 1.647x speedup, val set 0.269x speedup, step: 17, train time 24.78 s
JOB test speedup 0.5265368376030951
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 17/50 |loss: 0.141510| train set 0.240x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 18, train time 24.15 s
JOB test speedup 0.46764010925844407
TPCH test speedup 1.1944435348714895
TPCH skew test speedup 1.176546980724341
Epoch 18/50 |loss: 0.137879| train set 0.236x speedup, test set 1.177x speedup, val set 0.269x speedup, step: 19, train time 24.07 s
JOB test speedup 0.47111340768540166
TPCH test speedup 0.9801657401875877
TPCH skew test speedup 0.9268888037783396
Epoch 19/50 |loss: 0.138194| train set 0.234x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 20, train time 24.15 s
JOB test speedup 0.46272453762113325
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 20/50 |loss: 0.134849| train set 0.238x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 21, train time 24.01 s
JOB test speedup 0.4299603267037846
TPCH test speedup 1.1944435348714895
TPCH skew test speedup 1.176546980724341
Epoch 21/50 |loss: 0.133601| train set 0.235x speedup, test set 1.177x speedup, val set 0.269x speedup, step: 22, train time 24.28 s
JOB test speedup 0.47770462382409884
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 22/50 |loss: 0.131637| train set 0.240x speedup, test set 0.927x speedup, val set 0.291x speedup, step: 1, train time 24.00 s
JOB test speedup 0.41169011191241606
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 23/50 |loss: 0.129263| train set 0.233x speedup, test set 2.025x speedup, val set 0.266x speedup, step: 2, train time 24.29 s
JOB test speedup 0.45771025629406153
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 24/50 |loss: 0.124797| train set 0.233x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 3, train time 24.21 s
JOB test speedup 0.4295048630781463
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 25/50 |loss: 0.125712| train set 0.241x speedup, test set 0.927x speedup, val set 0.266x speedup, step: 4, train time 24.13 s
JOB test speedup 0.4973475113568918
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 26/50 |loss: 0.121806| train set 0.239x speedup, test set 1.383x speedup, val set 0.273x speedup, step: 5, train time 23.99 s
JOB test speedup 0.48172892456522726
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 27/50 |loss: 0.122448| train set 0.237x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 6, train time 24.19 s
JOB test speedup 0.4744013863737959
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 28/50 |loss: 0.119765| train set 0.237x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 7, train time 24.21 s
JOB test speedup 0.5053708582068852
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 29/50 |loss: 0.118925| train set 0.234x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 8, train time 23.89 s
JOB test speedup 0.46728090334105077
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 30/50 |loss: 0.119447| train set 0.237x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 9, train time 24.28 s
JOB test speedup 0.3943109038000829
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 31/50 |loss: 0.116254| train set 0.236x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 10, train time 24.18 s
JOB test speedup 0.46055674922480416
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 32/50 |loss: 0.116529| train set 0.232x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 11, train time 24.10 s
JOB test speedup 0.4433778158755415
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 33/50 |loss: 0.113395| train set 0.233x speedup, test set 1.657x speedup, val set 0.269x speedup, step: 12, train time 23.89 s
JOB test speedup 0.5090290857860803
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 34/50 |loss: 0.116150| train set 0.237x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 13, train time 24.29 s
JOB test speedup 0.502030032204263
TPCH test speedup 0.9801657401875877
TPCH skew test speedup 0.9268888037783396
Epoch 35/50 |loss: 0.112989| train set 0.233x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 14, train time 23.98 s
JOB test speedup 0.49638184610388836
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 36/50 |loss: 0.108409| train set 0.235x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 15, train time 23.97 s
JOB test speedup 0.5232381018690523
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 37/50 |loss: 0.110215| train set 0.233x speedup, test set 0.927x speedup, val set 0.292x speedup, step: 1, train time 23.98 s
JOB test speedup 0.4515798855460965
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 38/50 |loss: 0.108650| train set 0.233x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 2, train time 23.97 s
JOB test speedup 0.5160547181182046
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 39/50 |loss: 0.106707| train set 0.232x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 3, train time 24.12 s
JOB test speedup 0.4685116873167162
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 40/50 |loss: 0.108063| train set 0.235x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 4, train time 24.08 s
JOB test speedup 0.4263417965699582
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 41/50 |loss: 0.110672| train set 0.236x speedup, test set 1.383x speedup, val set 0.292x speedup, step: 5, train time 23.96 s
JOB test speedup 0.45984123177921465
TPCH test speedup 1.1547583817426588
TPCH skew test speedup 1.0419840579164177
Epoch 42/50 |loss: 0.106756| train set 0.236x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 6, train time 24.19 s
JOB test speedup 0.4839717708884054
TPCH test speedup 1.813733372854894
TPCH skew test speedup 1.6565563741121219
Epoch 43/50 |loss: 0.104847| train set 0.236x speedup, test set 1.657x speedup, val set 0.269x speedup, step: 7, train time 24.85 s
JOB test speedup 0.5031460281187393
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 44/50 |loss: 0.103730| train set 0.237x speedup, test set 2.025x speedup, val set 0.265x speedup, step: 8, train time 24.18 s
JOB test speedup 0.459709415331765
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 45/50 |loss: 0.104668| train set 0.237x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 9, train time 23.68 s
JOB test speedup 0.4557513270582395
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 46/50 |loss: 0.102080| train set 0.233x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 10, train time 24.11 s
JOB test speedup 0.39781710118857583
TPCH test speedup 1.1547583817426588
TPCH skew test speedup 1.1677493726835455
Epoch 47/50 |loss: 0.103702| train set 0.232x speedup, test set 1.168x speedup, val set 0.269x speedup, step: 11, train time 24.17 s
JOB test speedup 0.47393915021077065
TPCH test speedup 1.1732413453090889
TPCH skew test speedup 1.176546980724341
Epoch 48/50 |loss: 0.101939| train set 0.233x speedup, test set 1.177x speedup, val set 0.269x speedup, step: 12, train time 24.12 s
JOB test speedup 0.4774268731124021
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 49/50 |loss: 0.101528| train set 0.234x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 13, train time 24.01 s
Training per epoch cost 24.042 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 19.941s, pg runtime 0.206s, speedup 0.010x
02, opt runtime 4.223s, model runtime 37.578s, pg runtime 18.741s, speedup 0.499x
03, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
04, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
05, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
06, opt runtime 2.593s, model runtime 24.533s, pg runtime 8.283s, speedup 0.338x
07, opt runtime 2.046s, model runtime 6.177s, pg runtime 5.879s, speedup 0.952x
08, opt runtime 1.737s, model runtime 5.445s, pg runtime 5.994s, speedup 1.101x
09, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
10, opt runtime 3.248s, model runtime 19.559s, pg runtime 10.538s, speedup 0.539x
11, opt runtime 0.294s, model runtime 8.250s, pg runtime 2.352s, speedup 0.285x
12, opt runtime 4.443s, model runtime 31.658s, pg runtime 13.945s, speedup 0.440x
13, opt runtime 5.179s, model runtime 15.879s, pg runtime 10.685s, speedup 0.673x
14, opt runtime 0.157s, model runtime 26.201s, pg runtime 0.393s, speedup 0.015x
15, opt runtime 1.829s, model runtime 7.190s, pg runtime 53.885s, speedup 7.495x
16, opt runtime 1.876s, model runtime 7.214s, pg runtime 6.089s, speedup 0.844x
17, opt runtime 2.413s, model runtime 8.452s, pg runtime 57.198s, speedup 6.768x
18, opt runtime 0.953s, model runtime 4.243s, pg runtime 4.730s, speedup 1.115x
19, opt runtime 0.379s, model runtime 3.207s, pg runtime 3.645s, speedup 1.137x
20, opt runtime 0.626s, model runtime 12.350s, pg runtime 2.558s, speedup 0.207x
21, opt runtime 0.434s, model runtime 1.090s, pg runtime 0.434s, speedup 0.398x
22, opt runtime 3.136s, model runtime 22.651s, pg runtime 5.620s, speedup 0.248x
23, opt runtime 4.173s, model runtime 10.443s, pg runtime 8.279s, speedup 0.793x
24, opt runtime 0.332s, model runtime 7.761s, pg runtime 0.332s, speedup 0.043x
25, opt runtime 2.971s, model runtime 21.664s, pg runtime 8.605s, speedup 0.397x
26, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
========== TPCH
01, opt runtime 28.639s, model runtime 55.667s, pg runtime 91.784s, speedup 1.649x
02, opt runtime 29.763s, model runtime 65.728s, pg runtime 91.648s, speedup 1.394x
03, opt runtime 30.267s, model runtime 58.240s, pg runtime 100.885s, speedup 1.732x
04, opt runtime 29.286s, model runtime 53.165s, pg runtime 92.131s, speedup 1.733x
05, opt runtime 29.269s, model runtime 54.072s, pg runtime 91.296s, speedup 1.688x
06, opt runtime 29.502s, model runtime 54.889s, pg runtime 112.305s, speedup 2.046x
07, opt runtime 27.886s, model runtime 53.051s, pg runtime 97.629s, speedup 1.840x
08, opt runtime 30.705s, model runtime 67.632s, pg runtime 89.698s, speedup 1.326x
09, opt runtime 27.651s, model runtime 67.222s, pg runtime 91.255s, speedup 1.358x
10, opt runtime 33.637s, model runtime 53.032s, pg runtime 90.618s, speedup 1.709x
11, opt runtime 53.298s, model runtime 730.999s, pg runtime 148.707s, speedup 0.203x
12, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
13, opt runtime 53.440s, model runtime 695.290s, pg runtime 140.742s, speedup 0.202x
14, opt runtime 47.812s, model runtime 707.934s, pg runtime 83.069s, speedup 0.117x
15, opt runtime 47.518s, model runtime 739.548s, pg runtime 75.736s, speedup 0.102x
16, opt runtime 48.067s, model runtime 698.400s, pg runtime 81.014s, speedup 0.116x
17, opt runtime 47.738s, model runtime 722.099s, pg runtime 76.021s, speedup 0.105x
18, opt runtime 47.804s, model runtime 690.849s, pg runtime 81.177s, speedup 0.118x
19, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
20, opt runtime 51.276s, model runtime 714.055s, pg runtime 79.222s, speedup 0.111x
21, opt runtime 24.391s, model runtime 597.697s, pg runtime 601.866s, speedup 1.007x
22, opt runtime 24.079s, model runtime 600.642s, pg runtime 608.707s, speedup 1.013x
23, opt runtime 24.662s, model runtime 609.600s, pg runtime 613.999s, speedup 1.007x
24, opt runtime 24.459s, model runtime 604.056s, pg runtime 608.717s, speedup 1.008x
25, opt runtime 25.236s, model runtime 618.593s, pg runtime 601.756s, speedup 0.973x
26, opt runtime 25.363s, model runtime 607.433s, pg runtime 611.327s, speedup 1.006x
27, opt runtime 24.706s, model runtime 596.799s, pg runtime 610.808s, speedup 1.023x
28, opt runtime 25.075s, model runtime 607.146s, pg runtime 612.430s, speedup 1.009x
29, opt runtime 24.840s, model runtime 613.317s, pg runtime 626.529s, speedup 1.022x
30, opt runtime 24.920s, model runtime 600.533s, pg runtime 610.993s, speedup 1.017x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 29.063s, model runtime 55.250s, pg runtime 91.786s, speedup 1.661x
02, opt runtime 33.249s, model runtime 61.610s, pg runtime 103.551s, speedup 1.681x
03, opt runtime 33.759s, model runtime 63.571s, pg runtime 98.290s, speedup 1.546x
04, opt runtime 36.646s, model runtime 52.341s, pg runtime 98.171s, speedup 1.876x
05, opt runtime 32.482s, model runtime 54.278s, pg runtime 123.411s, speedup 2.274x
06, opt runtime 31.996s, model runtime 55.524s, pg runtime 120.854s, speedup 2.177x
07, opt runtime 30.778s, model runtime 53.160s, pg runtime 100.158s, speedup 1.884x
08, opt runtime 30.030s, model runtime 77.102s, pg runtime 85.930s, speedup 1.115x
09, opt runtime 28.776s, model runtime 66.441s, pg runtime 86.923s, speedup 1.308x
10, opt runtime 29.576s, model runtime 48.325s, pg runtime 113.059s, speedup 2.340x
11, opt runtime 53.915s, model runtime 717.609s, pg runtime 80.711s, speedup 0.112x
12, opt runtime 53.203s, model runtime 682.780s, pg runtime 79.156s, speedup 0.116x
13, opt runtime 51.456s, model runtime 682.003s, pg runtime 93.781s, speedup 0.138x
14, opt runtime 54.696s, model runtime 730.826s, pg runtime 98.172s, speedup 0.134x
15, opt runtime 51.200s, model runtime 747.184s, pg runtime 77.674s, speedup 0.104x
16, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
17, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
18, opt runtime 48.088s, model runtime 686.899s, pg runtime 77.369s, speedup 0.113x
19, opt runtime 52.382s, model runtime 831.522s, pg runtime 82.710s, speedup 0.099x
20, opt runtime 52.135s, model runtime 689.404s, pg runtime 102.039s, speedup 0.148x
21, opt runtime 24.737s, model runtime 604.720s, pg runtime 616.762s, speedup 1.020x
22, opt runtime 25.478s, model runtime 614.298s, pg runtime 642.079s, speedup 1.045x
23, opt runtime 24.016s, model runtime 607.795s, pg runtime 601.228s, speedup 0.989x
24, opt runtime 24.103s, model runtime 605.196s, pg runtime 616.889s, speedup 1.019x
25, opt runtime 24.136s, model runtime 619.954s, pg runtime 609.432s, speedup 0.983x
26, opt runtime 25.431s, model runtime 622.963s, pg runtime 625.988s, speedup 1.005x
27, opt runtime 24.451s, model runtime 609.888s, pg runtime 628.615s, speedup 1.031x
28, opt runtime 24.465s, model runtime 612.708s, pg runtime 644.779s, speedup 1.052x
29, opt runtime 25.152s, model runtime 612.131s, pg runtime 613.332s, speedup 1.002x
30, opt runtime 24.505s, model runtime 595.223s, pg runtime 621.574s, speedup 1.044x
31, opt runtime 16.756s, model runtime 38.272s, pg runtime 602.586s, speedup 15.745x
32, opt runtime 16.542s, model runtime 34.826s, pg runtime 461.957s, speedup 13.265x
33, opt runtime 16.136s, model runtime 34.764s, pg runtime 410.283s, speedup 11.802x
34, opt runtime 14.422s, model runtime 36.667s, pg runtime 497.542s, speedup 13.569x
35, opt runtime 15.980s, model runtime 35.716s, pg runtime 504.239s, speedup 14.118x
36, opt runtime 16.482s, model runtime 36.634s, pg runtime 622.915s, speedup 17.004x
37, opt runtime 16.301s, model runtime 37.863s, pg runtime 646.719s, speedup 17.081x
38, opt runtime 16.194s, model runtime 34.791s, pg runtime 439.255s, speedup 12.626x
39, opt runtime 16.149s, model runtime 34.948s, pg runtime 423.122s, speedup 12.107x
40, opt runtime 13.751s, model runtime 37.676s, pg runtime 434.625s, speedup 11.536x
====================
JOB best validation speedup epoch: 37, train speedup 0.233, test speedup 0.523, val speedup 0.292
TPCH best validation speedup epoch: 37, train speedup 0.233, test speedup 0.947, val speedup 0.292
TPCH Skew best validation speedup epoch: 37, train speedup 0.233, test speedup 0.927, val speedup 0.292
execution cost 0:21:11.376522
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.937857, and there are 37025 training samples
in channel 9
JOB test speedup 0.6397068587785786
TPCH test speedup 0.9951307510965463
TPCH skew test speedup 0.970349615681918
Epoch 0/50 |loss: 0.365268| train set 0.243x speedup, test set 0.970x speedup, val set 0.271x speedup, step: 1, train time 25.08 s
JOB test speedup 0.48899729098209627
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 1/50 |loss: 0.285152| train set 0.240x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 2, train time 23.50 s
JOB test speedup 0.473199526299785
TPCH test speedup 0.9666617377942683
TPCH skew test speedup 0.9449507089136788
Epoch 2/50 |loss: 0.253201| train set 0.240x speedup, test set 0.945x speedup, val set 0.269x speedup, step: 3, train time 23.37 s
JOB test speedup 0.4149609023384007
TPCH test speedup 1.3182402254529662
TPCH skew test speedup 1.2937179392512963
Epoch 3/50 |loss: 0.232527| train set 0.244x speedup, test set 1.294x speedup, val set 0.269x speedup, step: 4, train time 23.39 s
JOB test speedup 0.4105324596310147
TPCH test speedup 0.9666617377942683
TPCH skew test speedup 0.9449507089136788
Epoch 4/50 |loss: 0.216793| train set 0.240x speedup, test set 0.945x speedup, val set 0.270x speedup, step: 5, train time 23.57 s
JOB test speedup 0.41367228949307105
TPCH test speedup 1.0391236917105608
TPCH skew test speedup 1.065862830757853
Epoch 5/50 |loss: 0.204283| train set 0.237x speedup, test set 1.066x speedup, val set 0.269x speedup, step: 6, train time 23.58 s
JOB test speedup 0.4314375356704195
TPCH test speedup 1.2256141931974205
TPCH skew test speedup 1.2058028043314153
Epoch 6/50 |loss: 0.194170| train set 0.239x speedup, test set 1.206x speedup, val set 0.266x speedup, step: 7, train time 23.48 s
JOB test speedup 0.4625639225016444
TPCH test speedup 1.2907499108599079
TPCH skew test speedup 1.3236548380507873
Epoch 7/50 |loss: 0.184926| train set 0.238x speedup, test set 1.324x speedup, val set 0.270x speedup, step: 8, train time 23.42 s
JOB test speedup 0.40160930370902326
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 8/50 |loss: 0.177518| train set 0.235x speedup, test set 0.927x speedup, val set 0.266x speedup, step: 9, train time 23.49 s
JOB test speedup 0.41942328785372446
TPCH test speedup 1.7922211413867983
TPCH skew test speedup 1.7656915748868904
Epoch 9/50 |loss: 0.172821| train set 0.236x speedup, test set 1.766x speedup, val set 0.266x speedup, step: 10, train time 23.58 s
JOB test speedup 0.4612349204479016
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 10/50 |loss: 0.167845| train set 0.236x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 11, train time 23.48 s
JOB test speedup 0.46795812864799574
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 11/50 |loss: 0.161350| train set 0.235x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 12, train time 23.68 s
JOB test speedup 0.4401821004729717
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 12/50 |loss: 0.157579| train set 0.234x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 13, train time 23.69 s
JOB test speedup 0.4486947485992199
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 13/50 |loss: 0.153034| train set 0.236x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 14, train time 23.78 s
JOB test speedup 0.40449677235476805
TPCH test speedup 1.0391236917105608
TPCH skew test speedup 1.065862830757853
Epoch 14/50 |loss: 0.151924| train set 0.237x speedup, test set 1.066x speedup, val set 0.266x speedup, step: 15, train time 23.77 s
JOB test speedup 0.40691067494740024
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 15/50 |loss: 0.147744| train set 0.235x speedup, test set 1.042x speedup, val set 0.266x speedup, step: 16, train time 23.69 s
JOB test speedup 0.509419307905505
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 16/50 |loss: 0.146013| train set 0.240x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 17, train time 24.91 s
JOB test speedup 0.49302585688758893
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 17/50 |loss: 0.142709| train set 0.237x speedup, test set 0.927x speedup, val set 0.266x speedup, step: 18, train time 24.07 s
JOB test speedup 0.400316449033416
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 18/50 |loss: 0.138589| train set 0.237x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 19, train time 23.97 s
JOB test speedup 0.4983519443711903
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 19/50 |loss: 0.138077| train set 0.236x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 20, train time 24.09 s
JOB test speedup 0.4001641294926833
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 20/50 |loss: 0.134212| train set 0.238x speedup, test set 0.927x speedup, val set 0.266x speedup, step: 21, train time 24.07 s
JOB test speedup 0.48387056804812634
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 21/50 |loss: 0.134633| train set 0.235x speedup, test set 0.927x speedup, val set 0.266x speedup, step: 22, train time 24.17 s
JOB test speedup 0.4649356046744833
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 22/50 |loss: 0.129720| train set 0.239x speedup, test set 0.927x speedup, val set 0.266x speedup, step: 23, train time 23.99 s
JOB test speedup 0.42805077847217293
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 23/50 |loss: 0.130157| train set 0.233x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 24, train time 23.98 s
JOB test speedup 0.47755309229013243
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 24/50 |loss: 0.125639| train set 0.233x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 25, train time 24.08 s
JOB test speedup 0.45732375359798055
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 25/50 |loss: 0.126098| train set 0.235x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 26, train time 24.11 s
JOB test speedup 0.5340230001915601
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 26/50 |loss: 0.123308| train set 0.240x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 27, train time 24.31 s
JOB test speedup 0.4512905642911709
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 27/50 |loss: 0.122403| train set 0.237x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 28, train time 24.21 s
JOB test speedup 0.47513944838244027
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 28/50 |loss: 0.119787| train set 0.236x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 1, train time 24.05 s
JOB test speedup 0.5191935824702408
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 29/50 |loss: 0.119530| train set 0.233x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 2, train time 23.98 s
JOB test speedup 0.49294441432181224
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 30/50 |loss: 0.118929| train set 0.233x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 3, train time 24.04 s
JOB test speedup 0.49834453270648893
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 31/50 |loss: 0.117679| train set 0.234x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 4, train time 23.97 s
JOB test speedup 0.5152596598477827
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 32/50 |loss: 0.117295| train set 0.233x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 5, train time 24.07 s
JOB test speedup 0.4652036725445295
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 33/50 |loss: 0.116242| train set 0.234x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 6, train time 24.18 s
JOB test speedup 0.4773352348148267
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 34/50 |loss: 0.115596| train set 0.235x speedup, test set 0.927x speedup, val set 0.288x speedup, step: 7, train time 24.01 s
JOB test speedup 0.43244388954514823
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 35/50 |loss: 0.112563| train set 0.231x speedup, test set 1.657x speedup, val set 0.273x speedup, step: 8, train time 24.08 s
JOB test speedup 0.490165389284377
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 36/50 |loss: 0.110186| train set 0.232x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 9, train time 24.07 s
JOB test speedup 0.5107058899975923
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 37/50 |loss: 0.112515| train set 0.233x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 10, train time 23.99 s
JOB test speedup 0.43673673166048455
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 38/50 |loss: 0.109894| train set 0.233x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 11, train time 24.11 s
JOB test speedup 0.43676292283164775
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 39/50 |loss: 0.109908| train set 0.232x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 12, train time 24.10 s
JOB test speedup 0.40375916556623037
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 40/50 |loss: 0.108511| train set 0.236x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 13, train time 24.27 s
JOB test speedup 0.44324517029490607
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 41/50 |loss: 0.108959| train set 0.235x speedup, test set 1.383x speedup, val set 0.288x speedup, step: 14, train time 24.08 s
JOB test speedup 0.47784880228024196
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 42/50 |loss: 0.107411| train set 0.236x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 15, train time 24.10 s
JOB test speedup 0.45221746381259487
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 43/50 |loss: 0.107726| train set 0.232x speedup, test set 1.657x speedup, val set 0.269x speedup, step: 16, train time 24.61 s
JOB test speedup 0.4606022886350461
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 44/50 |loss: 0.106031| train set 0.241x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 17, train time 23.99 s
JOB test speedup 0.4599881558529539
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 45/50 |loss: 0.106710| train set 0.237x speedup, test set 1.383x speedup, val set 0.270x speedup, step: 18, train time 24.18 s
JOB test speedup 0.4842195465569638
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 46/50 |loss: 0.104716| train set 0.231x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 19, train time 24.18 s
JOB test speedup 0.5005274434640886
TPCH test speedup 1.782455966265559
TPCH skew test speedup 1.7151478654983137
Epoch 47/50 |loss: 0.103721| train set 0.233x speedup, test set 1.715x speedup, val set 0.269x speedup, step: 20, train time 24.20 s
JOB test speedup 0.5009922294933302
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 48/50 |loss: 0.104751| train set 0.233x speedup, test set 1.657x speedup, val set 0.288x speedup, step: 21, train time 24.09 s
JOB test speedup 0.4769662788857331
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 49/50 |loss: 0.103532| train set 0.232x speedup, test set 1.383x speedup, val set 0.266x speedup, step: 22, train time 24.01 s
Training per epoch cost 23.977 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
02, opt runtime 4.223s, model runtime 37.578s, pg runtime 18.741s, speedup 0.499x
03, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
04, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
05, opt runtime 3.504s, model runtime 12.987s, pg runtime 6.143s, speedup 0.473x
06, opt runtime 2.593s, model runtime 24.533s, pg runtime 8.283s, speedup 0.338x
07, opt runtime 2.046s, model runtime 11.467s, pg runtime 5.879s, speedup 0.513x
08, opt runtime 1.737s, model runtime 6.227s, pg runtime 5.994s, speedup 0.963x
09, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
10, opt runtime 3.248s, model runtime 32.247s, pg runtime 10.538s, speedup 0.327x
11, opt runtime 0.294s, model runtime 8.273s, pg runtime 2.352s, speedup 0.284x
12, opt runtime 4.443s, model runtime 31.658s, pg runtime 13.945s, speedup 0.440x
13, opt runtime 5.179s, model runtime 18.810s, pg runtime 10.685s, speedup 0.568x
14, opt runtime 0.157s, model runtime 26.201s, pg runtime 0.393s, speedup 0.015x
15, opt runtime 1.829s, model runtime 7.190s, pg runtime 53.885s, speedup 7.495x
16, opt runtime 1.876s, model runtime 9.374s, pg runtime 6.089s, speedup 0.650x
17, opt runtime 2.413s, model runtime 4.212s, pg runtime 57.198s, speedup 13.581x
18, opt runtime 0.953s, model runtime 4.243s, pg runtime 4.730s, speedup 1.115x
19, opt runtime 0.379s, model runtime 5.607s, pg runtime 3.645s, speedup 0.650x
20, opt runtime 0.626s, model runtime 4.388s, pg runtime 2.558s, speedup 0.583x
21, opt runtime 0.434s, model runtime 39.520s, pg runtime 0.434s, speedup 0.011x
22, opt runtime 3.136s, model runtime 22.651s, pg runtime 5.620s, speedup 0.248x
23, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
24, opt runtime 0.332s, model runtime 5.604s, pg runtime 0.332s, speedup 0.059x
25, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
26, opt runtime 0.965s, model runtime 16.301s, pg runtime 0.965s, speedup 0.059x
========== TPCH
01, opt runtime 28.639s, model runtime 55.667s, pg runtime 91.784s, speedup 1.649x
02, opt runtime 29.763s, model runtime 65.728s, pg runtime 91.648s, speedup 1.394x
03, opt runtime 30.267s, model runtime 58.240s, pg runtime 100.885s, speedup 1.732x
04, opt runtime 29.286s, model runtime 53.165s, pg runtime 92.131s, speedup 1.733x
05, opt runtime 29.269s, model runtime 54.072s, pg runtime 91.296s, speedup 1.688x
06, opt runtime 29.502s, model runtime 54.889s, pg runtime 112.305s, speedup 2.046x
07, opt runtime 27.886s, model runtime 53.051s, pg runtime 97.629s, speedup 1.840x
08, opt runtime 30.705s, model runtime 67.632s, pg runtime 89.698s, speedup 1.326x
09, opt runtime 27.651s, model runtime 67.222s, pg runtime 91.255s, speedup 1.358x
10, opt runtime 33.637s, model runtime 53.032s, pg runtime 90.618s, speedup 1.709x
11, opt runtime 53.298s, model runtime 253.402s, pg runtime 148.707s, speedup 0.587x
12, opt runtime 48.784s, model runtime 247.061s, pg runtime 78.349s, speedup 0.317x
13, opt runtime 53.440s, model runtime 244.673s, pg runtime 140.742s, speedup 0.575x
14, opt runtime 47.812s, model runtime 240.726s, pg runtime 83.069s, speedup 0.345x
15, opt runtime 47.518s, model runtime 241.327s, pg runtime 75.736s, speedup 0.314x
16, opt runtime 48.067s, model runtime 237.398s, pg runtime 81.014s, speedup 0.341x
17, opt runtime 47.738s, model runtime 244.194s, pg runtime 76.021s, speedup 0.311x
18, opt runtime 47.804s, model runtime 235.923s, pg runtime 81.177s, speedup 0.344x
19, opt runtime 49.511s, model runtime 251.544s, pg runtime 87.329s, speedup 0.347x
20, opt runtime 51.276s, model runtime 242.194s, pg runtime 79.222s, speedup 0.327x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 29.063s, model runtime 55.250s, pg runtime 91.786s, speedup 1.661x
02, opt runtime 33.249s, model runtime 61.610s, pg runtime 103.551s, speedup 1.681x
03, opt runtime 33.759s, model runtime 63.571s, pg runtime 98.290s, speedup 1.546x
04, opt runtime 36.646s, model runtime 52.341s, pg runtime 98.171s, speedup 1.876x
05, opt runtime 32.482s, model runtime 54.278s, pg runtime 123.411s, speedup 2.274x
06, opt runtime 31.996s, model runtime 55.524s, pg runtime 120.854s, speedup 2.177x
07, opt runtime 30.778s, model runtime 53.160s, pg runtime 100.158s, speedup 1.884x
08, opt runtime 30.030s, model runtime 77.102s, pg runtime 85.930s, speedup 1.115x
09, opt runtime 28.776s, model runtime 66.441s, pg runtime 86.923s, speedup 1.308x
10, opt runtime 29.576s, model runtime 48.325s, pg runtime 113.059s, speedup 2.340x
11, opt runtime 53.915s, model runtime 241.072s, pg runtime 80.711s, speedup 0.335x
12, opt runtime 53.203s, model runtime 244.254s, pg runtime 79.156s, speedup 0.324x
13, opt runtime 51.456s, model runtime 233.644s, pg runtime 93.781s, speedup 0.401x
14, opt runtime 54.696s, model runtime 255.805s, pg runtime 98.172s, speedup 0.384x
15, opt runtime 51.200s, model runtime 253.524s, pg runtime 77.674s, speedup 0.306x
16, opt runtime 47.844s, model runtime 229.269s, pg runtime 80.007s, speedup 0.349x
17, opt runtime 54.335s, model runtime 234.245s, pg runtime 95.799s, speedup 0.409x
18, opt runtime 48.088s, model runtime 243.678s, pg runtime 77.369s, speedup 0.318x
19, opt runtime 52.382s, model runtime 263.086s, pg runtime 82.710s, speedup 0.314x
20, opt runtime 52.135s, model runtime 254.548s, pg runtime 102.039s, speedup 0.401x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 38.272s, pg runtime 602.586s, speedup 15.745x
32, opt runtime 16.542s, model runtime 34.826s, pg runtime 461.957s, speedup 13.265x
33, opt runtime 16.136s, model runtime 34.764s, pg runtime 410.283s, speedup 11.802x
34, opt runtime 14.422s, model runtime 36.667s, pg runtime 497.542s, speedup 13.569x
35, opt runtime 15.980s, model runtime 35.716s, pg runtime 504.239s, speedup 14.118x
36, opt runtime 16.482s, model runtime 36.634s, pg runtime 622.915s, speedup 17.004x
37, opt runtime 16.301s, model runtime 37.863s, pg runtime 646.719s, speedup 17.081x
38, opt runtime 16.194s, model runtime 34.791s, pg runtime 439.255s, speedup 12.626x
39, opt runtime 16.149s, model runtime 34.948s, pg runtime 423.122s, speedup 12.107x
40, opt runtime 13.751s, model runtime 37.676s, pg runtime 434.625s, speedup 11.536x
====================
JOB best validation speedup epoch: 28, train speedup 0.236, test speedup 0.475, val speedup 0.288
TPCH best validation speedup epoch: 28, train speedup 0.236, test speedup 1.717, val speedup 0.288
TPCH Skew best validation speedup epoch: 28, train speedup 0.236, test speedup 1.657, val speedup 0.288
execution cost 0:21:06.475553
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.958024, and there are 37025 training samples
in channel 9
JOB test speedup 0.5898408687314272
TPCH test speedup 1.775207336586341
TPCH skew test speedup 1.7191237678558664
Epoch 0/50 |loss: 0.365088| train set 0.247x speedup, test set 1.719x speedup, val set 0.294x speedup, step: 1, train time 25.43 s
JOB test speedup 0.4727496702167494
TPCH test speedup 1.1568832999487395
TPCH skew test speedup 1.1148993579478137
Epoch 1/50 |loss: 0.285939| train set 0.239x speedup, test set 1.115x speedup, val set 0.266x speedup, step: 2, train time 23.91 s
JOB test speedup 0.48844081705148745
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 2/50 |loss: 0.254674| train set 0.244x speedup, test set 1.107x speedup, val set 0.270x speedup, step: 3, train time 24.02 s
JOB test speedup 0.3996957462221005
TPCH test speedup 1.3182402254529662
TPCH skew test speedup 1.2937179392512963
Epoch 3/50 |loss: 0.233150| train set 0.242x speedup, test set 1.294x speedup, val set 0.266x speedup, step: 4, train time 23.90 s
JOB test speedup 0.41640773067108533
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 4/50 |loss: 0.217810| train set 0.244x speedup, test set 1.107x speedup, val set 0.274x speedup, step: 5, train time 24.07 s
JOB test speedup 0.43043314313427217
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 5/50 |loss: 0.204700| train set 0.238x speedup, test set 1.107x speedup, val set 0.266x speedup, step: 6, train time 24.07 s
JOB test speedup 0.4092107982168541
TPCH test speedup 1.0233763026759561
TPCH skew test speedup 0.9981043294498111
Epoch 6/50 |loss: 0.194588| train set 0.241x speedup, test set 0.998x speedup, val set 0.266x speedup, step: 7, train time 23.78 s
JOB test speedup 0.40310545692460653
TPCH test speedup 1.2135472463288435
TPCH skew test speedup 1.1849529680828008
Epoch 7/50 |loss: 0.185500| train set 0.237x speedup, test set 1.185x speedup, val set 0.269x speedup, step: 8, train time 24.10 s
JOB test speedup 0.39380256079071707
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 8/50 |loss: 0.177770| train set 0.236x speedup, test set 1.107x speedup, val set 0.266x speedup, step: 9, train time 23.98 s
JOB test speedup 0.3950886819916694
TPCH test speedup 1.1676227074898813
TPCH skew test speedup 1.1328507867176163
Epoch 9/50 |loss: 0.173408| train set 0.236x speedup, test set 1.133x speedup, val set 0.269x speedup, step: 10, train time 23.97 s
JOB test speedup 0.4386416878177184
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 10/50 |loss: 0.167051| train set 0.240x speedup, test set 1.107x speedup, val set 0.266x speedup, step: 11, train time 23.88 s
JOB test speedup 0.40575026961861155
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 11/50 |loss: 0.160999| train set 0.235x speedup, test set 1.042x speedup, val set 0.266x speedup, step: 12, train time 23.98 s
JOB test speedup 0.4325895943419378
TPCH test speedup 1.0233763026759561
TPCH skew test speedup 0.9981043294498111
Epoch 12/50 |loss: 0.158708| train set 0.234x speedup, test set 0.998x speedup, val set 0.266x speedup, step: 13, train time 24.01 s
JOB test speedup 0.37350797809346226
TPCH test speedup 1.1676227074898813
TPCH skew test speedup 1.1328507867176163
Epoch 13/50 |loss: 0.153027| train set 0.237x speedup, test set 1.133x speedup, val set 0.266x speedup, step: 14, train time 24.21 s
JOB test speedup 0.3967208202700321
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 14/50 |loss: 0.153509| train set 0.237x speedup, test set 0.978x speedup, val set 0.266x speedup, step: 15, train time 24.08 s
JOB test speedup 0.39682139030910096
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 15/50 |loss: 0.146527| train set 0.234x speedup, test set 1.107x speedup, val set 0.266x speedup, step: 16, train time 24.17 s
JOB test speedup 0.3903332141808794
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 16/50 |loss: 0.145571| train set 0.234x speedup, test set 0.978x speedup, val set 0.266x speedup, step: 17, train time 24.68 s
JOB test speedup 0.41440272715861504
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 17/50 |loss: 0.142230| train set 0.237x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 18, train time 24.20 s
JOB test speedup 0.4167237039221925
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 18/50 |loss: 0.138356| train set 0.237x speedup, test set 0.927x speedup, val set 0.270x speedup, step: 19, train time 23.97 s
JOB test speedup 0.38368308526132977
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 19/50 |loss: 0.139111| train set 0.236x speedup, test set 0.978x speedup, val set 0.266x speedup, step: 20, train time 23.98 s
JOB test speedup 0.3978403329835805
TPCH test speedup 0.9951307510965463
TPCH skew test speedup 0.970349615681918
Epoch 20/50 |loss: 0.134348| train set 0.238x speedup, test set 0.970x speedup, val set 0.271x speedup, step: 21, train time 24.09 s
JOB test speedup 0.41368282123692446
TPCH test speedup 0.9481101487663014
TPCH skew test speedup 0.923494224017495
Epoch 21/50 |loss: 0.132085| train set 0.239x speedup, test set 0.923x speedup, val set 0.266x speedup, step: 22, train time 23.99 s
JOB test speedup 0.4436395308155784
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 22/50 |loss: 0.131215| train set 0.241x speedup, test set 0.978x speedup, val set 0.271x speedup, step: 23, train time 24.16 s
JOB test speedup 0.38082048285167963
TPCH test speedup 0.930732999027941
TPCH skew test speedup 0.9099724206780012
Epoch 23/50 |loss: 0.129941| train set 0.234x speedup, test set 0.910x speedup, val set 0.266x speedup, step: 24, train time 24.09 s
JOB test speedup 0.3807278588570553
TPCH test speedup 1.385666705351164
TPCH skew test speedup 1.3460965866673762
Epoch 24/50 |loss: 0.124149| train set 0.233x speedup, test set 1.346x speedup, val set 0.271x speedup, step: 25, train time 23.92 s
JOB test speedup 0.37982076089939015
TPCH test speedup 0.9951307510965463
TPCH skew test speedup 0.970349615681918
Epoch 25/50 |loss: 0.125210| train set 0.234x speedup, test set 0.970x speedup, val set 0.266x speedup, step: 26, train time 24.21 s
JOB test speedup 0.4353586100457883
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 26/50 |loss: 0.121403| train set 0.239x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 27, train time 24.02 s
JOB test speedup 0.3732087739710071
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 27/50 |loss: 0.121105| train set 0.237x speedup, test set 1.107x speedup, val set 0.271x speedup, step: 28, train time 24.18 s
JOB test speedup 0.3876632235524988
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 28/50 |loss: 0.120022| train set 0.237x speedup, test set 1.107x speedup, val set 0.271x speedup, step: 29, train time 24.18 s
JOB test speedup 0.3936240013173373
TPCH test speedup 0.9831955923154964
TPCH skew test speedup 0.9591613843577474
Epoch 29/50 |loss: 0.119906| train set 0.233x speedup, test set 0.959x speedup, val set 0.269x speedup, step: 30, train time 24.08 s
JOB test speedup 0.3761120077925793
TPCH test speedup 1.6640108152980224
TPCH skew test speedup 1.6032880039761104
Epoch 30/50 |loss: 0.119584| train set 0.233x speedup, test set 1.603x speedup, val set 0.266x speedup, step: 31, train time 24.29 s
JOB test speedup 0.43144793805550524
TPCH test speedup 0.9951307510965463
TPCH skew test speedup 0.970349615681918
Epoch 31/50 |loss: 0.116440| train set 0.236x speedup, test set 0.970x speedup, val set 0.269x speedup, step: 32, train time 24.10 s
JOB test speedup 0.3849880254403499
TPCH test speedup 1.385666705351164
TPCH skew test speedup 1.3460965866673762
Epoch 32/50 |loss: 0.118707| train set 0.233x speedup, test set 1.346x speedup, val set 0.269x speedup, step: 33, train time 24.16 s
JOB test speedup 0.3761120077925793
TPCH test speedup 1.5049672748077234
TPCH skew test speedup 1.384752358119398
Epoch 33/50 |loss: 0.114014| train set 0.232x speedup, test set 1.385x speedup, val set 0.269x speedup, step: 34, train time 24.26 s
JOB test speedup 0.39231548675991884
TPCH test speedup 1.1918571989756097
TPCH skew test speedup 1.0829461674842566
Epoch 34/50 |loss: 0.115222| train set 0.237x speedup, test set 1.083x speedup, val set 0.266x speedup, step: 35, train time 24.18 s
JOB test speedup 0.39891452288185675
TPCH test speedup 1.2620524239596167
TPCH skew test speedup 1.168184020523928
Epoch 35/50 |loss: 0.112973| train set 0.232x speedup, test set 1.168x speedup, val set 0.269x speedup, step: 36, train time 24.11 s
JOB test speedup 0.38956364021953466
TPCH test speedup 1.117766545487467
TPCH skew test speedup 1.0984806337787574
Epoch 36/50 |loss: 0.110341| train set 0.232x speedup, test set 1.098x speedup, val set 0.266x speedup, step: 37, train time 24.17 s
JOB test speedup 0.3808466908916307
TPCH test speedup 1.385666705351164
TPCH skew test speedup 1.3460965866673762
Epoch 37/50 |loss: 0.112151| train set 0.233x speedup, test set 1.346x speedup, val set 0.292x speedup, step: 38, train time 24.12 s
JOB test speedup 0.4020197942248647
TPCH test speedup 1.385666705351164
TPCH skew test speedup 1.3460965866673762
Epoch 38/50 |loss: 0.108357| train set 0.234x speedup, test set 1.346x speedup, val set 0.269x speedup, step: 39, train time 24.21 s
JOB test speedup 0.39344755940443654
TPCH test speedup 1.6640108152980224
TPCH skew test speedup 1.6032880039761104
Epoch 39/50 |loss: 0.107930| train set 0.236x speedup, test set 1.603x speedup, val set 0.269x speedup, step: 40, train time 23.68 s
JOB test speedup 0.38628484051940015
TPCH test speedup 1.6640108152980224
TPCH skew test speedup 1.6032880039761104
Epoch 40/50 |loss: 0.107463| train set 0.236x speedup, test set 1.603x speedup, val set 0.269x speedup, step: 41, train time 24.01 s
JOB test speedup 0.4387114453818762
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 41/50 |loss: 0.110415| train set 0.237x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 42, train time 24.12 s
JOB test speedup 0.40132657090717483
TPCH test speedup 1.6640108152980224
TPCH skew test speedup 1.6032880039761104
Epoch 42/50 |loss: 0.107042| train set 0.237x speedup, test set 1.603x speedup, val set 0.269x speedup, step: 43, train time 24.09 s
JOB test speedup 0.41330806982219065
TPCH test speedup 1.6640108152980224
TPCH skew test speedup 1.6032880039761104
Epoch 43/50 |loss: 0.105599| train set 0.232x speedup, test set 1.603x speedup, val set 0.269x speedup, step: 44, train time 24.67 s
JOB test speedup 0.4131529027737691
TPCH test speedup 1.6640108152980224
TPCH skew test speedup 1.6032880039761104
Epoch 44/50 |loss: 0.105692| train set 0.237x speedup, test set 1.603x speedup, val set 0.269x speedup, step: 45, train time 24.11 s
JOB test speedup 0.4096279021091931
TPCH test speedup 1.1076430772963712
TPCH skew test speedup 1.0736038691770196
Epoch 45/50 |loss: 0.105865| train set 0.236x speedup, test set 1.074x speedup, val set 0.270x speedup, step: 46, train time 23.98 s
JOB test speedup 0.39354647651807767
TPCH test speedup 1.6640108152980224
TPCH skew test speedup 1.6032880039761104
Epoch 46/50 |loss: 0.103859| train set 0.233x speedup, test set 1.603x speedup, val set 0.269x speedup, step: 47, train time 24.02 s
JOB test speedup 0.4054559227362149
TPCH test speedup 1.5890672380361082
TPCH skew test speedup 1.1418890973009859
Epoch 47/50 |loss: 0.103995| train set 0.233x speedup, test set 1.142x speedup, val set 0.269x speedup, step: 48, train time 24.10 s
JOB test speedup 0.3900798539265807
TPCH test speedup 1.6640108152980224
TPCH skew test speedup 1.6032880039761104
Epoch 48/50 |loss: 0.104920| train set 0.233x speedup, test set 1.603x speedup, val set 0.270x speedup, step: 49, train time 23.89 s
JOB test speedup 0.41498006397746345
TPCH test speedup 0.972665023450925
TPCH skew test speedup 0.8949302549999345
Epoch 49/50 |loss: 0.102324| train set 0.233x speedup, test set 0.895x speedup, val set 0.269x speedup, step: 50, train time 24.22 s
Training per epoch cost 24.117 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 9.661s, pg runtime 0.206s, speedup 0.021x
02, opt runtime 4.223s, model runtime 20.836s, pg runtime 18.741s, speedup 0.899x
03, opt runtime 1.763s, model runtime 18.644s, pg runtime 1.763s, speedup 0.095x
04, opt runtime 1.386s, model runtime 18.916s, pg runtime 1.386s, speedup 0.073x
05, opt runtime 3.504s, model runtime 12.987s, pg runtime 6.143s, speedup 0.473x
06, opt runtime 2.593s, model runtime 25.213s, pg runtime 8.283s, speedup 0.329x
07, opt runtime 2.046s, model runtime 7.753s, pg runtime 5.879s, speedup 0.758x
08, opt runtime 1.737s, model runtime 7.168s, pg runtime 5.994s, speedup 0.836x
09, opt runtime 2.324s, model runtime 11.658s, pg runtime 10.605s, speedup 0.910x
10, opt runtime 3.248s, model runtime 19.559s, pg runtime 10.538s, speedup 0.539x
11, opt runtime 0.294s, model runtime 9.920s, pg runtime 2.352s, speedup 0.237x
12, opt runtime 4.443s, model runtime 31.658s, pg runtime 13.945s, speedup 0.440x
13, opt runtime 5.179s, model runtime 18.810s, pg runtime 10.685s, speedup 0.568x
14, opt runtime 0.157s, model runtime 26.201s, pg runtime 0.393s, speedup 0.015x
15, opt runtime 1.829s, model runtime 29.394s, pg runtime 53.885s, speedup 1.833x
16, opt runtime 1.876s, model runtime 30.372s, pg runtime 6.089s, speedup 0.200x
17, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
18, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
19, opt runtime 0.379s, model runtime 5.607s, pg runtime 3.645s, speedup 0.650x
20, opt runtime 0.626s, model runtime 4.159s, pg runtime 2.558s, speedup 0.615x
21, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
22, opt runtime 3.136s, model runtime 22.651s, pg runtime 5.620s, speedup 0.248x
23, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
24, opt runtime 0.332s, model runtime 7.761s, pg runtime 0.332s, speedup 0.043x
25, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
26, opt runtime 0.965s, model runtime 16.301s, pg runtime 0.965s, speedup 0.059x
========== TPCH
01, opt runtime 28.639s, model runtime 39.020s, pg runtime 91.784s, speedup 2.352x
02, opt runtime 29.763s, model runtime 38.793s, pg runtime 91.648s, speedup 2.362x
03, opt runtime 30.267s, model runtime 38.331s, pg runtime 100.885s, speedup 2.632x
04, opt runtime 29.286s, model runtime 42.947s, pg runtime 92.131s, speedup 2.145x
05, opt runtime 29.269s, model runtime 39.118s, pg runtime 91.296s, speedup 2.334x
06, opt runtime 29.502s, model runtime 38.752s, pg runtime 112.305s, speedup 2.898x
07, opt runtime 27.886s, model runtime 44.136s, pg runtime 97.629s, speedup 2.212x
08, opt runtime 30.705s, model runtime 39.759s, pg runtime 89.698s, speedup 2.256x
09, opt runtime 27.651s, model runtime 43.038s, pg runtime 91.255s, speedup 2.120x
10, opt runtime 33.637s, model runtime 39.535s, pg runtime 90.618s, speedup 2.292x
11, opt runtime 53.298s, model runtime 641.154s, pg runtime 148.707s, speedup 0.232x
12, opt runtime 48.784s, model runtime 648.484s, pg runtime 78.349s, speedup 0.121x
13, opt runtime 53.440s, model runtime 627.477s, pg runtime 140.742s, speedup 0.224x
14, opt runtime 47.812s, model runtime 643.955s, pg runtime 83.069s, speedup 0.129x
15, opt runtime 47.518s, model runtime 624.264s, pg runtime 75.736s, speedup 0.121x
16, opt runtime 48.067s, model runtime 632.688s, pg runtime 81.014s, speedup 0.128x
17, opt runtime 47.738s, model runtime 621.410s, pg runtime 76.021s, speedup 0.122x
18, opt runtime 47.804s, model runtime 637.747s, pg runtime 81.177s, speedup 0.127x
19, opt runtime 49.511s, model runtime 698.879s, pg runtime 87.329s, speedup 0.125x
20, opt runtime 51.276s, model runtime 631.737s, pg runtime 79.222s, speedup 0.125x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 29.063s, model runtime 51.461s, pg runtime 91.786s, speedup 1.784x
02, opt runtime 33.249s, model runtime 48.002s, pg runtime 103.551s, speedup 2.157x
03, opt runtime 33.759s, model runtime 47.750s, pg runtime 98.290s, speedup 2.058x
04, opt runtime 36.646s, model runtime 46.946s, pg runtime 98.171s, speedup 2.091x
05, opt runtime 32.482s, model runtime 49.506s, pg runtime 123.411s, speedup 2.493x
06, opt runtime 31.996s, model runtime 54.161s, pg runtime 120.854s, speedup 2.231x
07, opt runtime 30.778s, model runtime 53.156s, pg runtime 100.158s, speedup 1.884x
08, opt runtime 30.030s, model runtime 54.118s, pg runtime 85.930s, speedup 1.588x
09, opt runtime 28.776s, model runtime 46.914s, pg runtime 86.923s, speedup 1.853x
10, opt runtime 29.576s, model runtime 51.292s, pg runtime 113.059s, speedup 2.204x
11, opt runtime 53.915s, model runtime 648.981s, pg runtime 80.711s, speedup 0.124x
12, opt runtime 53.203s, model runtime 634.254s, pg runtime 79.156s, speedup 0.125x
13, opt runtime 51.456s, model runtime 660.212s, pg runtime 93.781s, speedup 0.142x
14, opt runtime 54.696s, model runtime 674.445s, pg runtime 98.172s, speedup 0.146x
15, opt runtime 51.200s, model runtime 626.707s, pg runtime 77.674s, speedup 0.124x
16, opt runtime 47.844s, model runtime 609.493s, pg runtime 80.007s, speedup 0.131x
17, opt runtime 54.335s, model runtime 618.380s, pg runtime 95.799s, speedup 0.155x
18, opt runtime 48.088s, model runtime 633.370s, pg runtime 77.369s, speedup 0.122x
19, opt runtime 52.382s, model runtime 654.522s, pg runtime 82.710s, speedup 0.126x
20, opt runtime 52.135s, model runtime 634.708s, pg runtime 102.039s, speedup 0.161x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 38.272s, pg runtime 602.586s, speedup 15.745x
32, opt runtime 16.542s, model runtime 34.826s, pg runtime 461.957s, speedup 13.265x
33, opt runtime 16.136s, model runtime 34.764s, pg runtime 410.283s, speedup 11.802x
34, opt runtime 14.422s, model runtime 36.667s, pg runtime 497.542s, speedup 13.569x
35, opt runtime 15.980s, model runtime 35.716s, pg runtime 504.239s, speedup 14.118x
36, opt runtime 16.482s, model runtime 36.634s, pg runtime 622.915s, speedup 17.004x
37, opt runtime 16.301s, model runtime 37.863s, pg runtime 646.719s, speedup 17.081x
38, opt runtime 16.194s, model runtime 34.791s, pg runtime 439.255s, speedup 12.626x
39, opt runtime 16.149s, model runtime 34.948s, pg runtime 423.122s, speedup 12.107x
40, opt runtime 13.751s, model runtime 37.676s, pg runtime 434.625s, speedup 11.536x
====================
JOB best validation speedup epoch: 0, train speedup 0.247, test speedup 0.590, val speedup 0.294
TPCH best validation speedup epoch: 0, train speedup 0.247, test speedup 1.775, val speedup 0.294
TPCH Skew best validation speedup epoch: 0, train speedup 0.247, test speedup 1.719, val speedup 0.294
execution cost 0:21:14.977549
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.899555, and there are 37025 training samples
in channel 9
JOB test speedup 0.6689301584571391
TPCH test speedup 1.6422753869107358
TPCH skew test speedup 1.5775598256178205
Epoch 0/50 |loss: 0.366811| train set 0.247x speedup, test set 1.578x speedup, val set 0.294x speedup, step: 1, train time 24.82 s
JOB test speedup 0.45435545944103445
TPCH test speedup 1.1568832999487395
TPCH skew test speedup 1.1148993579478137
Epoch 1/50 |loss: 0.290279| train set 0.238x speedup, test set 1.115x speedup, val set 0.271x speedup, step: 2, train time 23.90 s
JOB test speedup 0.4450325374338453
TPCH test speedup 1.2071004967488832
TPCH skew test speedup 1.2515190842509134
Epoch 2/50 |loss: 0.256092| train set 0.243x speedup, test set 1.252x speedup, val set 0.265x speedup, step: 3, train time 23.87 s
JOB test speedup 0.43338495319765796
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 3/50 |loss: 0.237288| train set 0.245x speedup, test set 1.260x speedup, val set 0.288x speedup, step: 4, train time 23.88 s
JOB test speedup 0.4270578462969742
TPCH test speedup 1.8361266201084374
TPCH skew test speedup 1.7859002832424349
Epoch 4/50 |loss: 0.220469| train set 0.243x speedup, test set 1.786x speedup, val set 0.266x speedup, step: 5, train time 23.87 s
JOB test speedup 0.444482284683777
TPCH test speedup 1.2185198449178023
TPCH skew test speedup 1.230082832956353
Epoch 5/50 |loss: 0.206257| train set 0.243x speedup, test set 1.230x speedup, val set 0.266x speedup, step: 6, train time 23.89 s
JOB test speedup 0.4499484994317762
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.4121527937746565
Epoch 6/50 |loss: 0.198140| train set 0.239x speedup, test set 1.412x speedup, val set 0.266x speedup, step: 7, train time 23.78 s
JOB test speedup 0.4350112382057825
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 7/50 |loss: 0.187074| train set 0.237x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 8, train time 23.95 s
JOB test speedup 0.40563865651099834
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 8/50 |loss: 0.178181| train set 0.238x speedup, test set 2.025x speedup, val set 0.266x speedup, step: 9, train time 23.90 s
JOB test speedup 0.42299535150403217
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 9/50 |loss: 0.173106| train set 0.238x speedup, test set 1.657x speedup, val set 0.269x speedup, step: 10, train time 23.90 s
JOB test speedup 0.42998374554467533
TPCH test speedup 1.6382958704521873
TPCH skew test speedup 1.5790593988866977
Epoch 10/50 |loss: 0.166352| train set 0.239x speedup, test set 1.579x speedup, val set 0.269x speedup, step: 11, train time 23.97 s
JOB test speedup 0.4841729407411829
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 11/50 |loss: 0.161091| train set 0.234x speedup, test set 1.260x speedup, val set 0.266x speedup, step: 12, train time 24.01 s
JOB test speedup 0.42155755836895037
TPCH test speedup 1.782455966265559
TPCH skew test speedup 1.7151478654983137
Epoch 12/50 |loss: 0.158640| train set 0.235x speedup, test set 1.715x speedup, val set 0.269x speedup, step: 13, train time 24.20 s
JOB test speedup 0.39505290524466385
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 13/50 |loss: 0.154517| train set 0.236x speedup, test set 1.107x speedup, val set 0.269x speedup, step: 14, train time 23.96 s
JOB test speedup 0.3970762584919648
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 14/50 |loss: 0.154010| train set 0.236x speedup, test set 1.657x speedup, val set 0.269x speedup, step: 15, train time 23.99 s
JOB test speedup 0.3918029453479707
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 15/50 |loss: 0.148036| train set 0.233x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 16, train time 23.81 s
JOB test speedup 0.4750144880876792
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 16/50 |loss: 0.146239| train set 0.238x speedup, test set 1.657x speedup, val set 0.269x speedup, step: 17, train time 24.59 s
JOB test speedup 0.4315366445299486
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 17/50 |loss: 0.143418| train set 0.237x speedup, test set 1.657x speedup, val set 0.269x speedup, step: 18, train time 23.90 s
JOB test speedup 0.46616080642883473
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 18/50 |loss: 0.140724| train set 0.235x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 19, train time 24.00 s
JOB test speedup 0.4624459477340639
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 19/50 |loss: 0.139686| train set 0.235x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 20, train time 23.87 s
JOB test speedup 0.4057281193815891
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 20/50 |loss: 0.135716| train set 0.237x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 21, train time 23.96 s
JOB test speedup 0.47039362327064843
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 21/50 |loss: 0.137086| train set 0.237x speedup, test set 1.107x speedup, val set 0.266x speedup, step: 22, train time 23.88 s
JOB test speedup 0.45847253354750805
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 22/50 |loss: 0.132997| train set 0.239x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 23, train time 23.99 s
JOB test speedup 0.3838247255746432
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 23/50 |loss: 0.131282| train set 0.233x speedup, test set 1.657x speedup, val set 0.266x speedup, step: 24, train time 23.90 s
JOB test speedup 0.42983198917585896
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 24/50 |loss: 0.127074| train set 0.233x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 25, train time 24.17 s
JOB test speedup 0.4403694985116118
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 25/50 |loss: 0.128351| train set 0.241x speedup, test set 2.025x speedup, val set 0.266x speedup, step: 26, train time 23.88 s
JOB test speedup 0.5075095961112743
TPCH test speedup 1.2352807237334174
TPCH skew test speedup 1.125527547937537
Epoch 26/50 |loss: 0.124435| train set 0.239x speedup, test set 1.126x speedup, val set 0.269x speedup, step: 27, train time 24.07 s
JOB test speedup 0.42762750337469685
TPCH test speedup 1.8807809621679192
TPCH skew test speedup 1.9998066742717782
Epoch 27/50 |loss: 0.125893| train set 0.237x speedup, test set 2.000x speedup, val set 0.269x speedup, step: 28, train time 24.09 s
JOB test speedup 0.47403442552128555
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 28/50 |loss: 0.122367| train set 0.236x speedup, test set 1.657x speedup, val set 0.269x speedup, step: 29, train time 23.89 s
JOB test speedup 0.48020081922116253
TPCH test speedup 0.8730150681380691
TPCH skew test speedup 0.7704613121350723
Epoch 29/50 |loss: 0.122371| train set 0.234x speedup, test set 0.770x speedup, val set 0.269x speedup, step: 30, train time 24.01 s
JOB test speedup 0.45340167421216687
TPCH test speedup 1.1020661547720412
TPCH skew test speedup 1.0017680930619146
Epoch 30/50 |loss: 0.122074| train set 0.233x speedup, test set 1.002x speedup, val set 0.266x speedup, step: 31, train time 24.01 s
JOB test speedup 0.4744688025157518
TPCH test speedup 1.1020661547720412
TPCH skew test speedup 1.0017680930619146
Epoch 31/50 |loss: 0.118134| train set 0.232x speedup, test set 1.002x speedup, val set 0.266x speedup, step: 32, train time 23.92 s
JOB test speedup 0.4325561986343131
TPCH test speedup 1.1285483763078548
TPCH skew test speedup 1.0228994261412985
Epoch 32/50 |loss: 0.120728| train set 0.233x speedup, test set 1.023x speedup, val set 0.269x speedup, step: 33, train time 23.98 s
JOB test speedup 0.4334552027349664
TPCH test speedup 1.104228930626381
TPCH skew test speedup 1.0017680930619146
Epoch 33/50 |loss: 0.117949| train set 0.232x speedup, test set 1.002x speedup, val set 0.269x speedup, step: 34, train time 23.99 s
JOB test speedup 0.4500593670685784
TPCH test speedup 0.8313907178434911
TPCH skew test speedup 0.7704613121350723
Epoch 34/50 |loss: 0.119452| train set 0.233x speedup, test set 0.770x speedup, val set 0.266x speedup, step: 35, train time 23.97 s
JOB test speedup 0.39410956720764634
TPCH test speedup 1.1020661547720412
TPCH skew test speedup 1.0017680930619146
Epoch 35/50 |loss: 0.115001| train set 0.232x speedup, test set 1.002x speedup, val set 0.269x speedup, step: 36, train time 23.90 s
JOB test speedup 0.49907989816823145
TPCH test speedup 1.1020661547720412
TPCH skew test speedup 1.0017680930619146
Epoch 36/50 |loss: 0.111970| train set 0.232x speedup, test set 1.002x speedup, val set 0.269x speedup, step: 37, train time 24.08 s
JOB test speedup 0.45135220621144573
TPCH test speedup 1.1285483763078548
TPCH skew test speedup 1.0228994261412985
Epoch 37/50 |loss: 0.114924| train set 0.233x speedup, test set 1.023x speedup, val set 0.269x speedup, step: 38, train time 24.00 s
JOB test speedup 0.448696489088328
TPCH test speedup 1.1285483763078548
TPCH skew test speedup 1.0228994261412985
Epoch 38/50 |loss: 0.113956| train set 0.232x speedup, test set 1.023x speedup, val set 0.269x speedup, step: 39, train time 23.99 s
JOB test speedup 0.467418701146511
TPCH test speedup 0.8463735467961956
TPCH skew test speedup 0.7829002713880945
Epoch 39/50 |loss: 0.110821| train set 0.232x speedup, test set 0.783x speedup, val set 0.269x speedup, step: 40, train time 24.11 s
JOB test speedup 0.39206642570691724
TPCH test speedup 1.007136099806245
TPCH skew test speedup 0.9771173769625965
Epoch 40/50 |loss: 0.111210| train set 0.235x speedup, test set 0.977x speedup, val set 0.269x speedup, step: 41, train time 23.79 s
JOB test speedup 0.46307448147892055
TPCH test speedup 1.1285483763078548
TPCH skew test speedup 1.0228994261412985
Epoch 41/50 |loss: 0.112708| train set 0.236x speedup, test set 1.023x speedup, val set 0.269x speedup, step: 42, train time 24.18 s
JOB test speedup 0.4244543077314928
TPCH test speedup 0.8313907178434911
TPCH skew test speedup 0.7704613121350723
Epoch 42/50 |loss: 0.110314| train set 0.236x speedup, test set 0.770x speedup, val set 0.269x speedup, step: 43, train time 24.03 s
JOB test speedup 0.4770244333183833
TPCH test speedup 1.1285483763078548
TPCH skew test speedup 1.0228994261412985
Epoch 43/50 |loss: 0.109760| train set 0.232x speedup, test set 1.023x speedup, val set 0.269x speedup, step: 44, train time 24.49 s
JOB test speedup 0.4143000747297883
TPCH test speedup 0.972665023450925
TPCH skew test speedup 0.8949302549999345
Epoch 44/50 |loss: 0.106143| train set 0.236x speedup, test set 0.895x speedup, val set 0.266x speedup, step: 45, train time 23.88 s
JOB test speedup 0.4664600986986546
TPCH test speedup 0.7096988026342592
TPCH skew test speedup 0.6933477701238289
Epoch 45/50 |loss: 0.108585| train set 0.236x speedup, test set 0.693x speedup, val set 0.269x speedup, step: 46, train time 23.99 s
JOB test speedup 0.4516206999227971
TPCH test speedup 1.1285483763078548
TPCH skew test speedup 1.0228994261412985
Epoch 46/50 |loss: 0.107684| train set 0.232x speedup, test set 1.023x speedup, val set 0.269x speedup, step: 47, train time 23.91 s
JOB test speedup 0.4255010094410207
TPCH test speedup 1.1285483763078548
TPCH skew test speedup 1.0228994261412985
Epoch 47/50 |loss: 0.104908| train set 0.232x speedup, test set 1.023x speedup, val set 0.269x speedup, step: 48, train time 23.96 s
JOB test speedup 0.4704211410667844
TPCH test speedup 0.8313907178434911
TPCH skew test speedup 0.7704613121350723
Epoch 48/50 |loss: 0.106200| train set 0.233x speedup, test set 0.770x speedup, val set 0.266x speedup, step: 49, train time 24.08 s
JOB test speedup 0.4294271851426357
TPCH test speedup 1.1285483763078548
TPCH skew test speedup 1.0228994261412985
Epoch 49/50 |loss: 0.102589| train set 0.238x speedup, test set 1.023x speedup, val set 0.266x speedup, step: 50, train time 23.99 s
Training per epoch cost 24.002 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 8.539s, pg runtime 0.206s, speedup 0.024x
02, opt runtime 4.223s, model runtime 30.512s, pg runtime 18.741s, speedup 0.614x
03, opt runtime 1.763s, model runtime 26.798s, pg runtime 1.763s, speedup 0.066x
04, opt runtime 1.386s, model runtime 26.858s, pg runtime 1.386s, speedup 0.052x
05, opt runtime 3.504s, model runtime 7.826s, pg runtime 6.143s, speedup 0.785x
06, opt runtime 2.593s, model runtime 11.947s, pg runtime 8.283s, speedup 0.693x
07, opt runtime 2.046s, model runtime 7.753s, pg runtime 5.879s, speedup 0.758x
08, opt runtime 1.737s, model runtime 7.168s, pg runtime 5.994s, speedup 0.836x
09, opt runtime 2.324s, model runtime 11.658s, pg runtime 10.605s, speedup 0.910x
10, opt runtime 3.248s, model runtime 14.609s, pg runtime 10.538s, speedup 0.721x
11, opt runtime 0.294s, model runtime 9.920s, pg runtime 2.352s, speedup 0.237x
12, opt runtime 4.443s, model runtime 14.118s, pg runtime 13.945s, speedup 0.988x
13, opt runtime 5.179s, model runtime 12.886s, pg runtime 10.685s, speedup 0.829x
14, opt runtime 0.157s, model runtime 26.201s, pg runtime 0.393s, speedup 0.015x
15, opt runtime 1.829s, model runtime 29.394s, pg runtime 53.885s, speedup 1.833x
16, opt runtime 1.876s, model runtime 8.986s, pg runtime 6.089s, speedup 0.678x
17, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
18, opt runtime 0.953s, model runtime 4.503s, pg runtime 4.730s, speedup 1.051x
19, opt runtime 0.379s, model runtime 5.607s, pg runtime 3.645s, speedup 0.650x
20, opt runtime 0.626s, model runtime 4.159s, pg runtime 2.558s, speedup 0.615x
21, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
22, opt runtime 3.136s, model runtime 22.651s, pg runtime 5.620s, speedup 0.248x
23, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
24, opt runtime 0.332s, model runtime 7.761s, pg runtime 0.332s, speedup 0.043x
25, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
26, opt runtime 0.965s, model runtime 9.814s, pg runtime 0.965s, speedup 0.098x
========== TPCH
01, opt runtime 28.639s, model runtime 39.020s, pg runtime 91.784s, speedup 2.352x
02, opt runtime 29.763s, model runtime 38.793s, pg runtime 91.648s, speedup 2.362x
03, opt runtime 30.267s, model runtime 38.331s, pg runtime 100.885s, speedup 2.632x
04, opt runtime 29.286s, model runtime 42.947s, pg runtime 92.131s, speedup 2.145x
05, opt runtime 29.269s, model runtime 39.118s, pg runtime 91.296s, speedup 2.334x
06, opt runtime 29.502s, model runtime 38.752s, pg runtime 112.305s, speedup 2.898x
07, opt runtime 27.886s, model runtime 44.136s, pg runtime 97.629s, speedup 2.212x
08, opt runtime 30.705s, model runtime 39.759s, pg runtime 89.698s, speedup 2.256x
09, opt runtime 27.651s, model runtime 43.038s, pg runtime 91.255s, speedup 2.120x
10, opt runtime 33.637s, model runtime 39.535s, pg runtime 90.618s, speedup 2.292x
11, opt runtime 53.298s, model runtime 641.154s, pg runtime 148.707s, speedup 0.232x
12, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
13, opt runtime 53.440s, model runtime 627.477s, pg runtime 140.742s, speedup 0.224x
14, opt runtime 47.812s, model runtime 707.934s, pg runtime 83.069s, speedup 0.117x
15, opt runtime 47.518s, model runtime 739.548s, pg runtime 75.736s, speedup 0.102x
16, opt runtime 48.067s, model runtime 698.400s, pg runtime 81.014s, speedup 0.116x
17, opt runtime 47.738s, model runtime 722.099s, pg runtime 76.021s, speedup 0.105x
18, opt runtime 47.804s, model runtime 690.849s, pg runtime 81.177s, speedup 0.118x
19, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
20, opt runtime 51.276s, model runtime 714.055s, pg runtime 79.222s, speedup 0.111x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 29.063s, model runtime 51.461s, pg runtime 91.786s, speedup 1.784x
02, opt runtime 33.249s, model runtime 48.002s, pg runtime 103.551s, speedup 2.157x
03, opt runtime 33.759s, model runtime 47.750s, pg runtime 98.290s, speedup 2.058x
04, opt runtime 36.646s, model runtime 46.946s, pg runtime 98.171s, speedup 2.091x
05, opt runtime 32.482s, model runtime 49.506s, pg runtime 123.411s, speedup 2.493x
06, opt runtime 31.996s, model runtime 54.161s, pg runtime 120.854s, speedup 2.231x
07, opt runtime 30.778s, model runtime 53.156s, pg runtime 100.158s, speedup 1.884x
08, opt runtime 30.030s, model runtime 54.118s, pg runtime 85.930s, speedup 1.588x
09, opt runtime 28.776s, model runtime 46.914s, pg runtime 86.923s, speedup 1.853x
10, opt runtime 29.576s, model runtime 51.292s, pg runtime 113.059s, speedup 2.204x
11, opt runtime 53.915s, model runtime 717.609s, pg runtime 80.711s, speedup 0.112x
12, opt runtime 53.203s, model runtime 682.780s, pg runtime 79.156s, speedup 0.116x
13, opt runtime 51.456s, model runtime 682.003s, pg runtime 93.781s, speedup 0.138x
14, opt runtime 54.696s, model runtime 730.826s, pg runtime 98.172s, speedup 0.134x
15, opt runtime 51.200s, model runtime 747.184s, pg runtime 77.674s, speedup 0.104x
16, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
17, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
18, opt runtime 48.088s, model runtime 686.899s, pg runtime 77.369s, speedup 0.113x
19, opt runtime 52.382s, model runtime 831.522s, pg runtime 82.710s, speedup 0.099x
20, opt runtime 52.135s, model runtime 634.708s, pg runtime 102.039s, speedup 0.161x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 38.272s, pg runtime 602.586s, speedup 15.745x
32, opt runtime 16.542s, model runtime 34.826s, pg runtime 461.957s, speedup 13.265x
33, opt runtime 16.136s, model runtime 34.764s, pg runtime 410.283s, speedup 11.802x
34, opt runtime 14.422s, model runtime 36.667s, pg runtime 497.542s, speedup 13.569x
35, opt runtime 15.980s, model runtime 35.716s, pg runtime 504.239s, speedup 14.118x
36, opt runtime 16.482s, model runtime 36.634s, pg runtime 622.915s, speedup 17.004x
37, opt runtime 16.301s, model runtime 37.863s, pg runtime 646.719s, speedup 17.081x
38, opt runtime 16.194s, model runtime 34.791s, pg runtime 439.255s, speedup 12.626x
39, opt runtime 16.149s, model runtime 34.948s, pg runtime 423.122s, speedup 12.107x
40, opt runtime 13.751s, model runtime 37.676s, pg runtime 434.625s, speedup 11.536x
====================
JOB best validation speedup epoch: 0, train speedup 0.247, test speedup 0.669, val speedup 0.294
TPCH best validation speedup epoch: 0, train speedup 0.247, test speedup 1.642, val speedup 0.294
TPCH Skew best validation speedup epoch: 0, train speedup 0.247, test speedup 1.578, val speedup 0.294
execution cost 0:21:07.235991
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:02.296593, and there are 37025 training samples
in channel 9
JOB test speedup 0.6086771447189221
TPCH test speedup 1.611227424609813
TPCH skew test speedup 1.567278558731583
Epoch 0/50 |loss: 0.363884| train set 0.248x speedup, test set 1.567x speedup, val set 0.296x speedup, step: 1, train time 24.80 s
JOB test speedup 0.462718149639214
TPCH test speedup 0.9666617377942683
TPCH skew test speedup 0.9449507089136788
Epoch 1/50 |loss: 0.285075| train set 0.239x speedup, test set 0.945x speedup, val set 0.269x speedup, step: 2, train time 23.39 s
JOB test speedup 0.4736814250662376
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 2/50 |loss: 0.254106| train set 0.244x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 3, train time 23.31 s
JOB test speedup 0.4812071748617589
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 3/50 |loss: 0.233707| train set 0.245x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 4, train time 23.39 s
JOB test speedup 0.4589211243090368
TPCH test speedup 1.1944435348714895
TPCH skew test speedup 1.176546980724341
Epoch 4/50 |loss: 0.217290| train set 0.244x speedup, test set 1.177x speedup, val set 0.292x speedup, step: 5, train time 23.28 s
JOB test speedup 0.4503699449077292
TPCH test speedup 1.3841093743809338
TPCH skew test speedup 1.452112318406411
Epoch 5/50 |loss: 0.205613| train set 0.238x speedup, test set 1.452x speedup, val set 0.269x speedup, step: 6, train time 23.88 s
JOB test speedup 0.4325997877851833
TPCH test speedup 1.2256141931974205
TPCH skew test speedup 1.2058028043314153
Epoch 6/50 |loss: 0.195994| train set 0.240x speedup, test set 1.206x speedup, val set 0.269x speedup, step: 7, train time 23.99 s
JOB test speedup 0.43097310718331144
TPCH test speedup 1.1944435348714895
TPCH skew test speedup 1.176546980724341
Epoch 7/50 |loss: 0.186047| train set 0.237x speedup, test set 1.177x speedup, val set 0.269x speedup, step: 8, train time 24.01 s
JOB test speedup 0.4101704016442939
TPCH test speedup 1.3182402254529662
TPCH skew test speedup 1.2937179392512963
Epoch 8/50 |loss: 0.177729| train set 0.236x speedup, test set 1.294x speedup, val set 0.284x speedup, step: 9, train time 24.21 s
JOB test speedup 0.4175114952935418
TPCH test speedup 1.4586626528195896
TPCH skew test speedup 1.406440677393477
Epoch 9/50 |loss: 0.172704| train set 0.240x speedup, test set 1.406x speedup, val set 0.269x speedup, step: 10, train time 24.08 s
JOB test speedup 0.44115618652751326
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 10/50 |loss: 0.166991| train set 0.239x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 11, train time 24.20 s
JOB test speedup 0.4665154956724565
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 11/50 |loss: 0.162605| train set 0.238x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 12, train time 24.31 s
JOB test speedup 0.5058745645422912
TPCH test speedup 1.3530177396565715
TPCH skew test speedup 1.2623970112438216
Epoch 12/50 |loss: 0.158857| train set 0.236x speedup, test set 1.262x speedup, val set 0.269x speedup, step: 13, train time 23.98 s
JOB test speedup 0.4140338479392973
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 13/50 |loss: 0.152013| train set 0.235x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 14, train time 23.99 s
JOB test speedup 0.45373799963748734
TPCH test speedup 1.0233763026759561
TPCH skew test speedup 0.9981043294498111
Epoch 14/50 |loss: 0.152437| train set 0.237x speedup, test set 0.998x speedup, val set 0.269x speedup, step: 15, train time 24.03 s
JOB test speedup 0.4031775981616806
TPCH test speedup 2.1590357879348048
TPCH skew test speedup 2.1129260128497704
Epoch 15/50 |loss: 0.148422| train set 0.235x speedup, test set 2.113x speedup, val set 0.269x speedup, step: 16, train time 24.08 s
JOB test speedup 0.4523669342225421
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 16/50 |loss: 0.145940| train set 0.235x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 17, train time 24.91 s
JOB test speedup 0.47113836784168944
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 17/50 |loss: 0.143052| train set 0.237x speedup, test set 0.927x speedup, val set 0.269x speedup, step: 18, train time 24.28 s
JOB test speedup 0.44768755864797066
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 18/50 |loss: 0.139407| train set 0.236x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 19, train time 24.09 s
JOB test speedup 0.43157779623443443
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 19/50 |loss: 0.137826| train set 0.236x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 20, train time 24.10 s
JOB test speedup 0.4395563224921166
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 20/50 |loss: 0.134415| train set 0.238x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 21, train time 24.07 s
JOB test speedup 0.4483886809605369
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 21/50 |loss: 0.134783| train set 0.238x speedup, test set 0.978x speedup, val set 0.266x speedup, step: 22, train time 24.30 s
JOB test speedup 0.42478070908190974
TPCH test speedup 1.2114217195353711
TPCH skew test speedup 1.197802854714418
Epoch 22/50 |loss: 0.132309| train set 0.241x speedup, test set 1.198x speedup, val set 0.269x speedup, step: 23, train time 24.11 s
JOB test speedup 0.38677981876859524
TPCH test speedup 2.1590357879348048
TPCH skew test speedup 2.1129260128497704
Epoch 23/50 |loss: 0.131320| train set 0.233x speedup, test set 2.113x speedup, val set 0.269x speedup, step: 24, train time 24.12 s
JOB test speedup 0.41393660794863707
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 24/50 |loss: 0.126984| train set 0.233x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 25, train time 24.30 s
JOB test speedup 0.40233601117037676
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 25/50 |loss: 0.127737| train set 0.239x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 26, train time 24.21 s
JOB test speedup 0.4644230698721874
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 26/50 |loss: 0.123445| train set 0.240x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 27, train time 24.17 s
JOB test speedup 0.385385567025547
TPCH test speedup 0.8948944181341552
TPCH skew test speedup 0.8685131138492942
Epoch 27/50 |loss: 0.122796| train set 0.237x speedup, test set 0.869x speedup, val set 0.269x speedup, step: 28, train time 24.37 s
JOB test speedup 0.4407333940261994
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 28/50 |loss: 0.119749| train set 0.236x speedup, test set 1.383x speedup, val set 0.272x speedup, step: 29, train time 24.31 s
JOB test speedup 0.45073304932405167
TPCH test speedup 0.9690651711766763
TPCH skew test speedup 0.887934166052845
Epoch 29/50 |loss: 0.120844| train set 0.233x speedup, test set 0.888x speedup, val set 0.269x speedup, step: 30, train time 24.38 s
JOB test speedup 0.4354874813326669
TPCH test speedup 1.8898566796540355
TPCH skew test speedup 2.0247048498667444
Epoch 30/50 |loss: 0.119929| train set 0.233x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 31, train time 24.17 s
JOB test speedup 0.4381976427023854
TPCH test speedup 0.972665023450925
TPCH skew test speedup 0.8949302549999345
Epoch 31/50 |loss: 0.118840| train set 0.233x speedup, test set 0.895x speedup, val set 0.269x speedup, step: 32, train time 24.20 s
JOB test speedup 0.42745074774077585
TPCH test speedup 0.9690651711766763
TPCH skew test speedup 0.887934166052845
Epoch 32/50 |loss: 0.119365| train set 0.234x speedup, test set 0.888x speedup, val set 0.269x speedup, step: 33, train time 24.18 s
JOB test speedup 0.417113240866308
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 33/50 |loss: 0.114862| train set 0.232x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 34, train time 24.29 s
JOB test speedup 0.4375533423735617
TPCH test speedup 0.972665023450925
TPCH skew test speedup 0.8949302549999345
Epoch 34/50 |loss: 0.116496| train set 0.234x speedup, test set 0.895x speedup, val set 0.269x speedup, step: 35, train time 24.07 s
JOB test speedup 0.4031501644143346
TPCH test speedup 1.2352807237334174
TPCH skew test speedup 1.125527547937537
Epoch 35/50 |loss: 0.113318| train set 0.232x speedup, test set 1.126x speedup, val set 0.269x speedup, step: 36, train time 24.19 s
JOB test speedup 0.4344049886232013
TPCH test speedup 0.9690651711766763
TPCH skew test speedup 0.887934166052845
Epoch 36/50 |loss: 0.111580| train set 0.236x speedup, test set 0.888x speedup, val set 0.269x speedup, step: 37, train time 24.26 s
JOB test speedup 0.4420140478831288
TPCH test speedup 0.9690651711766763
TPCH skew test speedup 0.887934166052845
Epoch 37/50 |loss: 0.111771| train set 0.233x speedup, test set 0.888x speedup, val set 0.269x speedup, step: 38, train time 24.07 s
JOB test speedup 0.4332203124230733
TPCH test speedup 1.6493223803198438
TPCH skew test speedup 1.464161501665427
Epoch 38/50 |loss: 0.112870| train set 0.233x speedup, test set 1.464x speedup, val set 0.269x speedup, step: 39, train time 24.09 s
JOB test speedup 0.4593253131190927
TPCH test speedup 1.2352807237334174
TPCH skew test speedup 1.125527547937537
Epoch 39/50 |loss: 0.111733| train set 0.233x speedup, test set 1.126x speedup, val set 0.266x speedup, step: 40, train time 24.21 s
JOB test speedup 0.4072995876456651
TPCH test speedup 0.8948944181341552
TPCH skew test speedup 0.8685131138492942
Epoch 40/50 |loss: 0.108459| train set 0.236x speedup, test set 0.869x speedup, val set 0.408x speedup, step: 1, train time 24.09 s
JOB test speedup 0.4567101773068845
TPCH test speedup 0.972665023450925
TPCH skew test speedup 0.8949302549999345
Epoch 41/50 |loss: 0.111383| train set 0.237x speedup, test set 0.895x speedup, val set 0.269x speedup, step: 2, train time 23.87 s
JOB test speedup 0.45268070204117133
TPCH test speedup 0.972665023450925
TPCH skew test speedup 0.8949302549999345
Epoch 42/50 |loss: 0.109796| train set 0.236x speedup, test set 0.895x speedup, val set 0.292x speedup, step: 3, train time 24.10 s
JOB test speedup 0.4159988994251752
TPCH test speedup 1.2352807237334174
TPCH skew test speedup 1.125527547937537
Epoch 43/50 |loss: 0.107397| train set 0.232x speedup, test set 1.126x speedup, val set 0.269x speedup, step: 4, train time 24.88 s
JOB test speedup 0.38845572955985685
TPCH test speedup 0.9690651711766763
TPCH skew test speedup 0.887934166052845
Epoch 44/50 |loss: 0.105300| train set 0.238x speedup, test set 0.888x speedup, val set 0.269x speedup, step: 5, train time 23.89 s
JOB test speedup 0.4745808656727739
TPCH test speedup 0.972665023450925
TPCH skew test speedup 0.8949302549999345
Epoch 45/50 |loss: 0.105337| train set 0.236x speedup, test set 0.895x speedup, val set 0.269x speedup, step: 6, train time 23.88 s
JOB test speedup 0.4596504631793713
TPCH test speedup 0.972665023450925
TPCH skew test speedup 0.8949302549999345
Epoch 46/50 |loss: 0.105168| train set 0.233x speedup, test set 0.895x speedup, val set 0.269x speedup, step: 7, train time 23.87 s
JOB test speedup 0.4540034866650405
TPCH test speedup 1.6493223803198438
TPCH skew test speedup 1.464161501665427
Epoch 47/50 |loss: 0.104440| train set 0.232x speedup, test set 1.464x speedup, val set 0.269x speedup, step: 8, train time 24.12 s
JOB test speedup 0.4741496509012313
TPCH test speedup 0.972665023450925
TPCH skew test speedup 0.8949302549999345
Epoch 48/50 |loss: 0.103777| train set 0.205x speedup, test set 0.895x speedup, val set 0.269x speedup, step: 9, train time 24.17 s
JOB test speedup 0.4525107555951834
TPCH test speedup 0.972665023450925
TPCH skew test speedup 0.8949302549999345
Epoch 49/50 |loss: 0.101835| train set 0.234x speedup, test set 0.895x speedup, val set 0.269x speedup, step: 10, train time 24.18 s
Training per epoch cost 24.109 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 11.702s, pg runtime 0.206s, speedup 0.018x
02, opt runtime 4.223s, model runtime 53.823s, pg runtime 18.741s, speedup 0.348x
03, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
04, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
05, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
06, opt runtime 2.593s, model runtime 51.747s, pg runtime 8.283s, speedup 0.160x
07, opt runtime 2.046s, model runtime 36.795s, pg runtime 5.879s, speedup 0.160x
08, opt runtime 1.737s, model runtime 27.852s, pg runtime 5.994s, speedup 0.215x
09, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
10, opt runtime 3.248s, model runtime 32.247s, pg runtime 10.538s, speedup 0.327x
11, opt runtime 0.294s, model runtime 8.250s, pg runtime 2.352s, speedup 0.285x
12, opt runtime 4.443s, model runtime 31.658s, pg runtime 13.945s, speedup 0.440x
13, opt runtime 5.179s, model runtime 8.803s, pg runtime 10.685s, speedup 1.214x
14, opt runtime 0.157s, model runtime 26.201s, pg runtime 0.393s, speedup 0.015x
15, opt runtime 1.829s, model runtime 7.190s, pg runtime 53.885s, speedup 7.495x
16, opt runtime 1.876s, model runtime 30.372s, pg runtime 6.089s, speedup 0.200x
17, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
18, opt runtime 0.953s, model runtime 4.243s, pg runtime 4.730s, speedup 1.115x
19, opt runtime 0.379s, model runtime 6.369s, pg runtime 3.645s, speedup 0.572x
20, opt runtime 0.626s, model runtime 12.350s, pg runtime 2.558s, speedup 0.207x
21, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
22, opt runtime 3.136s, model runtime 20.318s, pg runtime 5.620s, speedup 0.277x
23, opt runtime 4.173s, model runtime 12.053s, pg runtime 8.279s, speedup 0.687x
24, opt runtime 0.332s, model runtime 4.465s, pg runtime 0.332s, speedup 0.074x
25, opt runtime 2.971s, model runtime 21.664s, pg runtime 8.605s, speedup 0.397x
26, opt runtime 0.965s, model runtime 9.037s, pg runtime 0.965s, speedup 0.107x
========== TPCH
01, opt runtime 28.639s, model runtime 55.667s, pg runtime 91.784s, speedup 1.649x
02, opt runtime 29.763s, model runtime 65.728s, pg runtime 91.648s, speedup 1.394x
03, opt runtime 30.267s, model runtime 58.240s, pg runtime 100.885s, speedup 1.732x
04, opt runtime 29.286s, model runtime 53.165s, pg runtime 92.131s, speedup 1.733x
05, opt runtime 29.269s, model runtime 54.072s, pg runtime 91.296s, speedup 1.688x
06, opt runtime 29.502s, model runtime 54.889s, pg runtime 112.305s, speedup 2.046x
07, opt runtime 27.886s, model runtime 53.051s, pg runtime 97.629s, speedup 1.840x
08, opt runtime 30.705s, model runtime 67.632s, pg runtime 89.698s, speedup 1.326x
09, opt runtime 27.651s, model runtime 67.222s, pg runtime 91.255s, speedup 1.358x
10, opt runtime 33.637s, model runtime 53.032s, pg runtime 90.618s, speedup 1.709x
11, opt runtime 53.298s, model runtime 253.402s, pg runtime 148.707s, speedup 0.587x
12, opt runtime 48.784s, model runtime 247.061s, pg runtime 78.349s, speedup 0.317x
13, opt runtime 53.440s, model runtime 244.673s, pg runtime 140.742s, speedup 0.575x
14, opt runtime 47.812s, model runtime 240.726s, pg runtime 83.069s, speedup 0.345x
15, opt runtime 47.518s, model runtime 241.327s, pg runtime 75.736s, speedup 0.314x
16, opt runtime 48.067s, model runtime 237.398s, pg runtime 81.014s, speedup 0.341x
17, opt runtime 47.738s, model runtime 244.194s, pg runtime 76.021s, speedup 0.311x
18, opt runtime 47.804s, model runtime 235.923s, pg runtime 81.177s, speedup 0.344x
19, opt runtime 49.511s, model runtime 251.544s, pg runtime 87.329s, speedup 0.347x
20, opt runtime 51.276s, model runtime 242.194s, pg runtime 79.222s, speedup 0.327x
21, opt runtime 24.391s, model runtime 601.866s, pg runtime 601.866s, speedup 1.000x
22, opt runtime 24.079s, model runtime 608.707s, pg runtime 608.707s, speedup 1.000x
23, opt runtime 24.662s, model runtime 613.999s, pg runtime 613.999s, speedup 1.000x
24, opt runtime 24.459s, model runtime 608.717s, pg runtime 608.717s, speedup 1.000x
25, opt runtime 25.236s, model runtime 601.756s, pg runtime 601.756s, speedup 1.000x
26, opt runtime 25.363s, model runtime 611.327s, pg runtime 611.327s, speedup 1.000x
27, opt runtime 24.706s, model runtime 610.808s, pg runtime 610.808s, speedup 1.000x
28, opt runtime 25.075s, model runtime 612.430s, pg runtime 612.430s, speedup 1.000x
29, opt runtime 24.840s, model runtime 626.529s, pg runtime 626.529s, speedup 1.000x
30, opt runtime 24.920s, model runtime 610.993s, pg runtime 610.993s, speedup 1.000x
31, opt runtime 16.268s, model runtime 570.684s, pg runtime 432.766s, speedup 0.758x
32, opt runtime 15.120s, model runtime 561.136s, pg runtime 566.078s, speedup 1.009x
33, opt runtime 16.639s, model runtime 577.387s, pg runtime 462.544s, speedup 0.801x
34, opt runtime 16.280s, model runtime 612.284s, pg runtime 634.990s, speedup 1.037x
35, opt runtime 16.528s, model runtime 639.582s, pg runtime 620.762s, speedup 0.971x
36, opt runtime 18.690s, model runtime 626.432s, pg runtime 651.942s, speedup 1.041x
37, opt runtime 16.438s, model runtime 579.969s, pg runtime 546.887s, speedup 0.943x
38, opt runtime 16.138s, model runtime 571.514s, pg runtime 501.793s, speedup 0.878x
39, opt runtime 16.770s, model runtime 578.345s, pg runtime 594.754s, speedup 1.028x
40, opt runtime 16.305s, model runtime 568.943s, pg runtime 436.168s, speedup 0.767x
========== TPCH skew
01, opt runtime 29.063s, model runtime 55.250s, pg runtime 91.786s, speedup 1.661x
02, opt runtime 33.249s, model runtime 61.610s, pg runtime 103.551s, speedup 1.681x
03, opt runtime 33.759s, model runtime 63.571s, pg runtime 98.290s, speedup 1.546x
04, opt runtime 36.646s, model runtime 52.341s, pg runtime 98.171s, speedup 1.876x
05, opt runtime 32.482s, model runtime 54.278s, pg runtime 123.411s, speedup 2.274x
06, opt runtime 31.996s, model runtime 55.524s, pg runtime 120.854s, speedup 2.177x
07, opt runtime 30.778s, model runtime 53.160s, pg runtime 100.158s, speedup 1.884x
08, opt runtime 30.030s, model runtime 77.102s, pg runtime 85.930s, speedup 1.115x
09, opt runtime 28.776s, model runtime 66.441s, pg runtime 86.923s, speedup 1.308x
10, opt runtime 29.576s, model runtime 48.325s, pg runtime 113.059s, speedup 2.340x
11, opt runtime 53.915s, model runtime 241.072s, pg runtime 80.711s, speedup 0.335x
12, opt runtime 53.203s, model runtime 244.254s, pg runtime 79.156s, speedup 0.324x
13, opt runtime 51.456s, model runtime 233.644s, pg runtime 93.781s, speedup 0.401x
14, opt runtime 54.696s, model runtime 255.805s, pg runtime 98.172s, speedup 0.384x
15, opt runtime 51.200s, model runtime 253.524s, pg runtime 77.674s, speedup 0.306x
16, opt runtime 47.844s, model runtime 229.269s, pg runtime 80.007s, speedup 0.349x
17, opt runtime 54.335s, model runtime 234.245s, pg runtime 95.799s, speedup 0.409x
18, opt runtime 48.088s, model runtime 243.678s, pg runtime 77.369s, speedup 0.318x
19, opt runtime 52.382s, model runtime 263.086s, pg runtime 82.710s, speedup 0.314x
20, opt runtime 52.135s, model runtime 254.548s, pg runtime 102.039s, speedup 0.401x
21, opt runtime 24.737s, model runtime 616.762s, pg runtime 616.762s, speedup 1.000x
22, opt runtime 25.478s, model runtime 642.079s, pg runtime 642.079s, speedup 1.000x
23, opt runtime 24.016s, model runtime 601.228s, pg runtime 601.228s, speedup 1.000x
24, opt runtime 24.103s, model runtime 616.889s, pg runtime 616.889s, speedup 1.000x
25, opt runtime 24.136s, model runtime 609.432s, pg runtime 609.432s, speedup 1.000x
26, opt runtime 25.431s, model runtime 625.988s, pg runtime 625.988s, speedup 1.000x
27, opt runtime 24.451s, model runtime 628.615s, pg runtime 628.615s, speedup 1.000x
28, opt runtime 24.465s, model runtime 644.779s, pg runtime 644.779s, speedup 1.000x
29, opt runtime 25.152s, model runtime 613.332s, pg runtime 613.332s, speedup 1.000x
30, opt runtime 24.505s, model runtime 621.574s, pg runtime 621.574s, speedup 1.000x
31, opt runtime 16.756s, model runtime 630.388s, pg runtime 602.586s, speedup 0.956x
32, opt runtime 16.542s, model runtime 576.972s, pg runtime 461.957s, speedup 0.801x
33, opt runtime 16.136s, model runtime 568.776s, pg runtime 410.283s, speedup 0.721x
34, opt runtime 14.422s, model runtime 579.896s, pg runtime 497.542s, speedup 0.858x
35, opt runtime 15.980s, model runtime 569.756s, pg runtime 504.239s, speedup 0.885x
36, opt runtime 16.482s, model runtime 607.850s, pg runtime 622.915s, speedup 1.025x
37, opt runtime 16.301s, model runtime 634.653s, pg runtime 646.719s, speedup 1.019x
38, opt runtime 16.194s, model runtime 570.813s, pg runtime 439.255s, speedup 0.770x
39, opt runtime 16.149s, model runtime 574.556s, pg runtime 423.122s, speedup 0.736x
40, opt runtime 13.751s, model runtime 569.754s, pg runtime 434.625s, speedup 0.763x
====================
JOB best validation speedup epoch: 40, train speedup 0.236, test speedup 0.407, val speedup 0.408
TPCH best validation speedup epoch: 40, train speedup 0.236, test speedup 0.895, val speedup 0.408
TPCH Skew best validation speedup epoch: 40, train speedup 0.236, test speedup 0.869, val speedup 0.408
execution cost 0:21:15.892363
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.895987, and there are 37025 training samples
in channel 9
JOB test speedup 0.5905423089205657
TPCH test speedup 1.775207336586341
TPCH skew test speedup 1.7191237678558664
Epoch 0/50 |loss: 0.364752| train set 0.247x speedup, test set 1.719x speedup, val set 0.275x speedup, step: 1, train time 24.87 s
JOB test speedup 0.5340713051987437
TPCH test speedup 1.1568832999487395
TPCH skew test speedup 1.1148993579478137
Epoch 1/50 |loss: 0.287453| train set 0.240x speedup, test set 1.115x speedup, val set 0.272x speedup, step: 2, train time 23.40 s
JOB test speedup 0.5137737836899848
TPCH test speedup 1.2723240578486938
TPCH skew test speedup 1.2515190842509134
Epoch 2/50 |loss: 0.256216| train set 0.243x speedup, test set 1.252x speedup, val set 0.269x speedup, step: 3, train time 23.58 s
JOB test speedup 0.45231308837454887
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 3/50 |loss: 0.237051| train set 0.244x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 4, train time 23.29 s
JOB test speedup 0.5630792307908355
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 4/50 |loss: 0.219127| train set 0.249x speedup, test set 0.927x speedup, val set 0.270x speedup, step: 5, train time 23.21 s
JOB test speedup 0.4670500952932316
TPCH test speedup 0.9898379480348941
TPCH skew test speedup 1.065862830757853
Epoch 5/50 |loss: 0.206097| train set 0.237x speedup, test set 1.066x speedup, val set 0.269x speedup, step: 6, train time 23.35 s
JOB test speedup 0.4582597986449709
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 6/50 |loss: 0.196229| train set 0.240x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 7, train time 23.28 s
JOB test speedup 0.42026939778195704
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 7/50 |loss: 0.187014| train set 0.238x speedup, test set 0.927x speedup, val set 0.271x speedup, step: 8, train time 23.40 s
JOB test speedup 0.43523937603542434
TPCH test speedup 1.8456636963072446
TPCH skew test speedup 1.912773665505178
Epoch 8/50 |loss: 0.178818| train set 0.235x speedup, test set 1.913x speedup, val set 0.269x speedup, step: 9, train time 23.29 s
JOB test speedup 0.41042595494940187
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 9/50 |loss: 0.174555| train set 0.237x speedup, test set 0.927x speedup, val set 0.271x speedup, step: 10, train time 23.57 s
JOB test speedup 0.475596559237518
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 10/50 |loss: 0.167077| train set 0.239x speedup, test set 1.107x speedup, val set 0.269x speedup, step: 11, train time 23.67 s
JOB test speedup 0.44242976092459035
TPCH test speedup 0.9414215138088411
TPCH skew test speedup 0.9200365175524414
Epoch 11/50 |loss: 0.162768| train set 0.235x speedup, test set 0.920x speedup, val set 0.269x speedup, step: 12, train time 23.39 s
JOB test speedup 0.431688685977072
TPCH test speedup 0.7096988026342592
TPCH skew test speedup 0.6933477701238289
Epoch 12/50 |loss: 0.158975| train set 0.234x speedup, test set 0.693x speedup, val set 0.269x speedup, step: 13, train time 23.48 s
JOB test speedup 0.45879195847704135
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 13/50 |loss: 0.154344| train set 0.237x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 14, train time 23.40 s
JOB test speedup 0.44570121131720736
TPCH test speedup 0.9959384935086321
TPCH skew test speedup 0.9713286321643543
Epoch 14/50 |loss: 0.153416| train set 0.237x speedup, test set 0.971x speedup, val set 0.269x speedup, step: 15, train time 23.47 s
JOB test speedup 0.43458912106609554
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 15/50 |loss: 0.147591| train set 0.234x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 16, train time 23.57 s
JOB test speedup 0.4981865682148069
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 16/50 |loss: 0.144677| train set 0.243x speedup, test set 0.978x speedup, val set 0.279x speedup, step: 1, train time 24.27 s
JOB test speedup 0.4744148102442093
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 17/50 |loss: 0.142504| train set 0.239x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 2, train time 23.78 s
JOB test speedup 0.41258371183998055
TPCH test speedup 1.4094915116273814
TPCH skew test speedup 1.3682366550068472
Epoch 18/50 |loss: 0.138502| train set 0.236x speedup, test set 1.368x speedup, val set 0.269x speedup, step: 3, train time 23.88 s
JOB test speedup 0.5094052589868275
TPCH test speedup 0.773599893240599
TPCH skew test speedup 0.7555671905049803
Epoch 19/50 |loss: 0.138944| train set 0.236x speedup, test set 0.756x speedup, val set 0.269x speedup, step: 4, train time 23.79 s
JOB test speedup 0.4023008179175097
TPCH test speedup 0.8979634319626834
TPCH skew test speedup 0.8752053570054956
Epoch 20/50 |loss: 0.134872| train set 0.238x speedup, test set 0.875x speedup, val set 0.269x speedup, step: 5, train time 23.98 s
JOB test speedup 0.4748466625232091
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 21/50 |loss: 0.133738| train set 0.237x speedup, test set 0.978x speedup, val set 0.266x speedup, step: 6, train time 23.92 s
JOB test speedup 0.45277379204919094
TPCH test speedup 1.0771483204648111
TPCH skew test speedup 1.0419840579164177
Epoch 22/50 |loss: 0.131361| train set 0.238x speedup, test set 1.042x speedup, val set 0.270x speedup, step: 7, train time 23.98 s
JOB test speedup 0.36786965359161633
TPCH test speedup 2.0246767708451925
TPCH skew test speedup 1.9615066697240688
Epoch 23/50 |loss: 0.128197| train set 0.233x speedup, test set 1.962x speedup, val set 0.266x speedup, step: 8, train time 23.98 s
JOB test speedup 0.44286755942589695
TPCH test speedup 1.007136099806245
TPCH skew test speedup 0.9771173769625965
Epoch 24/50 |loss: 0.124167| train set 0.233x speedup, test set 0.977x speedup, val set 0.269x speedup, step: 9, train time 23.89 s
JOB test speedup 0.41676361496696923
TPCH test speedup 1.3151299959328164
TPCH skew test speedup 1.1831578567092362
Epoch 25/50 |loss: 0.124935| train set 0.233x speedup, test set 1.183x speedup, val set 0.288x speedup, step: 1, train time 23.91 s
JOB test speedup 0.4973726523514789
TPCH test speedup 0.8979634319626834
TPCH skew test speedup 0.8752053570054956
Epoch 26/50 |loss: 0.121354| train set 0.240x speedup, test set 0.875x speedup, val set 0.269x speedup, step: 2, train time 24.07 s
JOB test speedup 0.3817555821140826
TPCH test speedup 0.8927981487204522
TPCH skew test speedup 0.8690934150587791
Epoch 27/50 |loss: 0.121545| train set 0.237x speedup, test set 0.869x speedup, val set 0.269x speedup, step: 3, train time 23.98 s
JOB test speedup 0.4608272491893735
TPCH test speedup 1.007136099806245
TPCH skew test speedup 0.9771173769625965
Epoch 28/50 |loss: 0.119166| train set 0.236x speedup, test set 0.977x speedup, val set 0.292x speedup, step: 1, train time 23.98 s
JOB test speedup 0.4543535938136074
TPCH test speedup 1.1055779536865145
TPCH skew test speedup 1.0757676437534804
Epoch 29/50 |loss: 0.118520| train set 0.233x speedup, test set 1.076x speedup, val set 0.269x speedup, step: 2, train time 24.00 s
JOB test speedup 0.4700033321506734
TPCH test speedup 0.8979634319626834
TPCH skew test speedup 0.8752053570054956
Epoch 30/50 |loss: 0.119106| train set 0.236x speedup, test set 0.875x speedup, val set 0.269x speedup, step: 3, train time 24.20 s
JOB test speedup 0.4449152795533884
TPCH test speedup 1.0640499915132897
TPCH skew test speedup 1.0665482623063194
Epoch 31/50 |loss: 0.116066| train set 0.232x speedup, test set 1.067x speedup, val set 0.269x speedup, step: 4, train time 23.96 s
JOB test speedup 0.41142779091946186
TPCH test speedup 1.1055779536865145
TPCH skew test speedup 1.0757676437534804
Epoch 32/50 |loss: 0.115476| train set 0.233x speedup, test set 1.076x speedup, val set 0.292x speedup, step: 5, train time 24.20 s
JOB test speedup 0.43170721972862675
TPCH test speedup 1.0006430377987179
TPCH skew test speedup 0.9695053600391068
Epoch 33/50 |loss: 0.115106| train set 0.233x speedup, test set 0.970x speedup, val set 0.292x speedup, step: 6, train time 24.00 s
JOB test speedup 0.42113240273461594
TPCH test speedup 0.7723351206320996
TPCH skew test speedup 0.7512343781661147
Epoch 34/50 |loss: 0.116487| train set 0.238x speedup, test set 0.751x speedup, val set 0.292x speedup, step: 1, train time 23.98 s
JOB test speedup 0.37911834492556035
TPCH test speedup 0.9359446506875757
TPCH skew test speedup 0.9695053600391068
Epoch 35/50 |loss: 0.111314| train set 0.233x speedup, test set 0.970x speedup, val set 0.269x speedup, step: 2, train time 24.25 s
JOB test speedup 0.4468010906099289
TPCH test speedup 1.0006430377987179
TPCH skew test speedup 0.9695053600391068
Epoch 36/50 |loss: 0.110481| train set 0.233x speedup, test set 0.970x speedup, val set 0.269x speedup, step: 3, train time 24.01 s
JOB test speedup 0.4613748530303358
TPCH test speedup 0.7723351206320996
TPCH skew test speedup 0.7512343781661147
Epoch 37/50 |loss: 0.111960| train set 0.233x speedup, test set 0.751x speedup, val set 0.292x speedup, step: 4, train time 23.97 s
JOB test speedup 0.45586707643008434
TPCH test speedup 1.0006430377987179
TPCH skew test speedup 0.9695053600391068
Epoch 38/50 |loss: 0.110677| train set 0.233x speedup, test set 0.970x speedup, val set 0.269x speedup, step: 5, train time 24.07 s
JOB test speedup 0.4492286636471684
TPCH test speedup 1.0271304574483995
TPCH skew test speedup 1.0388219034491255
Epoch 39/50 |loss: 0.109630| train set 0.232x speedup, test set 1.039x speedup, val set 0.269x speedup, step: 6, train time 24.01 s
JOB test speedup 0.46102284247459285
TPCH test speedup 1.007136099806245
TPCH skew test speedup 0.9771173769625965
Epoch 40/50 |loss: 0.108786| train set 0.236x speedup, test set 0.977x speedup, val set 0.269x speedup, step: 7, train time 24.27 s
JOB test speedup 0.445179737946281
TPCH test speedup 0.828936819350597
TPCH skew test speedup 0.8082161610919388
Epoch 41/50 |loss: 0.109479| train set 0.236x speedup, test set 0.808x speedup, val set 0.292x speedup, step: 8, train time 24.09 s
JOB test speedup 0.4494877526475526
TPCH test speedup 1.0006430377987179
TPCH skew test speedup 0.9695053600391068
Epoch 42/50 |loss: 0.107446| train set 0.236x speedup, test set 0.970x speedup, val set 0.292x speedup, step: 9, train time 24.11 s
JOB test speedup 0.451145202778439
TPCH test speedup 1.0006430377987179
TPCH skew test speedup 0.9695053600391068
Epoch 43/50 |loss: 0.105972| train set 0.232x speedup, test set 0.970x speedup, val set 0.269x speedup, step: 10, train time 24.88 s
JOB test speedup 0.4565414222179803
TPCH test speedup 0.8979634319626834
TPCH skew test speedup 0.8752053570054956
Epoch 44/50 |loss: 0.106345| train set 0.237x speedup, test set 0.875x speedup, val set 0.292x speedup, step: 11, train time 24.09 s
JOB test speedup 0.44948434577861485
TPCH test speedup 1.0006430377987179
TPCH skew test speedup 0.9695053600391068
Epoch 45/50 |loss: 0.106492| train set 0.236x speedup, test set 0.970x speedup, val set 0.292x speedup, step: 12, train time 24.20 s
JOB test speedup 0.4468010906099289
TPCH test speedup 1.0006430377987179
TPCH skew test speedup 0.9695053600391068
Epoch 46/50 |loss: 0.104988| train set 0.232x speedup, test set 0.970x speedup, val set 0.269x speedup, step: 13, train time 24.18 s
JOB test speedup 0.4592886015206514
TPCH test speedup 1.007136099806245
TPCH skew test speedup 0.9771173769625965
Epoch 47/50 |loss: 0.103319| train set 0.233x speedup, test set 0.977x speedup, val set 0.269x speedup, step: 14, train time 24.08 s
JOB test speedup 0.4753740562181912
TPCH test speedup 1.0006430377987179
TPCH skew test speedup 0.9695053600391068
Epoch 48/50 |loss: 0.104041| train set 0.233x speedup, test set 0.970x speedup, val set 0.292x speedup, step: 1, train time 24.19 s
JOB test speedup 0.43950506914166954
TPCH test speedup 0.8979634319626834
TPCH skew test speedup 0.8752053570054956
Epoch 49/50 |loss: 0.102871| train set 0.234x speedup, test set 0.875x speedup, val set 0.292x speedup, step: 2, train time 24.18 s
Training per epoch cost 23.892 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 11.702s, pg runtime 0.206s, speedup 0.018x
02, opt runtime 4.223s, model runtime 53.823s, pg runtime 18.741s, speedup 0.348x
03, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
04, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
05, opt runtime 3.504s, model runtime 7.826s, pg runtime 6.143s, speedup 0.785x
06, opt runtime 2.593s, model runtime 25.213s, pg runtime 8.283s, speedup 0.329x
07, opt runtime 2.046s, model runtime 11.467s, pg runtime 5.879s, speedup 0.513x
08, opt runtime 1.737s, model runtime 6.227s, pg runtime 5.994s, speedup 0.963x
09, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
10, opt runtime 3.248s, model runtime 32.247s, pg runtime 10.538s, speedup 0.327x
11, opt runtime 0.294s, model runtime 14.294s, pg runtime 2.352s, speedup 0.165x
12, opt runtime 4.443s, model runtime 31.658s, pg runtime 13.945s, speedup 0.440x
13, opt runtime 5.179s, model runtime 8.803s, pg runtime 10.685s, speedup 1.214x
14, opt runtime 0.157s, model runtime 26.201s, pg runtime 0.393s, speedup 0.015x
15, opt runtime 1.829s, model runtime 7.190s, pg runtime 53.885s, speedup 7.495x
16, opt runtime 1.876s, model runtime 7.214s, pg runtime 6.089s, speedup 0.844x
17, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
18, opt runtime 0.953s, model runtime 4.243s, pg runtime 4.730s, speedup 1.115x
19, opt runtime 0.379s, model runtime 6.369s, pg runtime 3.645s, speedup 0.572x
20, opt runtime 0.626s, model runtime 12.350s, pg runtime 2.558s, speedup 0.207x
21, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
22, opt runtime 3.136s, model runtime 22.651s, pg runtime 5.620s, speedup 0.248x
23, opt runtime 4.173s, model runtime 10.443s, pg runtime 8.279s, speedup 0.793x
24, opt runtime 0.332s, model runtime 7.761s, pg runtime 0.332s, speedup 0.043x
25, opt runtime 2.971s, model runtime 21.664s, pg runtime 8.605s, speedup 0.397x
26, opt runtime 0.965s, model runtime 9.814s, pg runtime 0.965s, speedup 0.098x
========== TPCH
01, opt runtime 28.639s, model runtime 66.677s, pg runtime 91.784s, speedup 1.377x
02, opt runtime 29.763s, model runtime 65.146s, pg runtime 91.648s, speedup 1.407x
03, opt runtime 30.267s, model runtime 65.922s, pg runtime 100.885s, speedup 1.530x
04, opt runtime 29.286s, model runtime 67.254s, pg runtime 92.131s, speedup 1.370x
05, opt runtime 29.269s, model runtime 65.185s, pg runtime 91.296s, speedup 1.401x
06, opt runtime 29.502s, model runtime 65.691s, pg runtime 112.305s, speedup 1.710x
07, opt runtime 27.886s, model runtime 64.928s, pg runtime 97.629s, speedup 1.504x
08, opt runtime 30.705s, model runtime 70.161s, pg runtime 89.698s, speedup 1.278x
09, opt runtime 27.651s, model runtime 67.744s, pg runtime 91.255s, speedup 1.347x
10, opt runtime 33.637s, model runtime 70.561s, pg runtime 90.618s, speedup 1.284x
11, opt runtime 53.298s, model runtime 253.402s, pg runtime 148.707s, speedup 0.587x
12, opt runtime 48.784s, model runtime 247.061s, pg runtime 78.349s, speedup 0.317x
13, opt runtime 53.440s, model runtime 244.673s, pg runtime 140.742s, speedup 0.575x
14, opt runtime 47.812s, model runtime 240.726s, pg runtime 83.069s, speedup 0.345x
15, opt runtime 47.518s, model runtime 241.327s, pg runtime 75.736s, speedup 0.314x
16, opt runtime 48.067s, model runtime 237.398s, pg runtime 81.014s, speedup 0.341x
17, opt runtime 47.738s, model runtime 244.194s, pg runtime 76.021s, speedup 0.311x
18, opt runtime 47.804s, model runtime 235.923s, pg runtime 81.177s, speedup 0.344x
19, opt runtime 49.511s, model runtime 251.544s, pg runtime 87.329s, speedup 0.347x
20, opt runtime 51.276s, model runtime 242.194s, pg runtime 79.222s, speedup 0.327x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 570.684s, pg runtime 432.766s, speedup 0.758x
32, opt runtime 15.120s, model runtime 561.136s, pg runtime 566.078s, speedup 1.009x
33, opt runtime 16.639s, model runtime 577.387s, pg runtime 462.544s, speedup 0.801x
34, opt runtime 16.280s, model runtime 612.284s, pg runtime 634.990s, speedup 1.037x
35, opt runtime 16.528s, model runtime 639.582s, pg runtime 620.762s, speedup 0.971x
36, opt runtime 18.690s, model runtime 626.432s, pg runtime 651.942s, speedup 1.041x
37, opt runtime 16.438s, model runtime 579.969s, pg runtime 546.887s, speedup 0.943x
38, opt runtime 16.138s, model runtime 571.514s, pg runtime 501.793s, speedup 0.878x
39, opt runtime 16.770s, model runtime 578.345s, pg runtime 594.754s, speedup 1.028x
40, opt runtime 16.305s, model runtime 568.943s, pg runtime 436.168s, speedup 0.767x
========== TPCH skew
01, opt runtime 29.063s, model runtime 67.790s, pg runtime 91.786s, speedup 1.354x
02, opt runtime 33.249s, model runtime 71.275s, pg runtime 103.551s, speedup 1.453x
03, opt runtime 33.759s, model runtime 70.794s, pg runtime 98.290s, speedup 1.388x
04, opt runtime 36.646s, model runtime 66.614s, pg runtime 98.171s, speedup 1.474x
05, opt runtime 32.482s, model runtime 72.642s, pg runtime 123.411s, speedup 1.699x
06, opt runtime 31.996s, model runtime 66.753s, pg runtime 120.854s, speedup 1.810x
07, opt runtime 30.778s, model runtime 68.265s, pg runtime 100.158s, speedup 1.467x
08, opt runtime 30.030s, model runtime 67.656s, pg runtime 85.930s, speedup 1.270x
09, opt runtime 28.776s, model runtime 70.439s, pg runtime 86.923s, speedup 1.234x
10, opt runtime 29.576s, model runtime 71.065s, pg runtime 113.059s, speedup 1.591x
11, opt runtime 53.915s, model runtime 241.072s, pg runtime 80.711s, speedup 0.335x
12, opt runtime 53.203s, model runtime 244.254s, pg runtime 79.156s, speedup 0.324x
13, opt runtime 51.456s, model runtime 233.644s, pg runtime 93.781s, speedup 0.401x
14, opt runtime 54.696s, model runtime 255.805s, pg runtime 98.172s, speedup 0.384x
15, opt runtime 51.200s, model runtime 253.524s, pg runtime 77.674s, speedup 0.306x
16, opt runtime 47.844s, model runtime 229.269s, pg runtime 80.007s, speedup 0.349x
17, opt runtime 54.335s, model runtime 234.245s, pg runtime 95.799s, speedup 0.409x
18, opt runtime 48.088s, model runtime 243.678s, pg runtime 77.369s, speedup 0.318x
19, opt runtime 52.382s, model runtime 263.086s, pg runtime 82.710s, speedup 0.314x
20, opt runtime 52.135s, model runtime 254.548s, pg runtime 102.039s, speedup 0.401x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 630.388s, pg runtime 602.586s, speedup 0.956x
32, opt runtime 16.542s, model runtime 576.972s, pg runtime 461.957s, speedup 0.801x
33, opt runtime 16.136s, model runtime 568.776s, pg runtime 410.283s, speedup 0.721x
34, opt runtime 14.422s, model runtime 579.896s, pg runtime 497.542s, speedup 0.858x
35, opt runtime 15.980s, model runtime 569.756s, pg runtime 504.239s, speedup 0.885x
36, opt runtime 16.482s, model runtime 607.850s, pg runtime 622.915s, speedup 1.025x
37, opt runtime 16.301s, model runtime 634.653s, pg runtime 646.719s, speedup 1.019x
38, opt runtime 16.194s, model runtime 570.813s, pg runtime 439.255s, speedup 0.770x
39, opt runtime 16.149s, model runtime 574.556s, pg runtime 423.122s, speedup 0.736x
40, opt runtime 13.751s, model runtime 569.754s, pg runtime 434.625s, speedup 0.763x
====================
JOB best validation speedup epoch: 48, train speedup 0.233, test speedup 0.475, val speedup 0.292
TPCH best validation speedup epoch: 48, train speedup 0.233, test speedup 1.001, val speedup 0.292
TPCH Skew best validation speedup epoch: 48, train speedup 0.233, test speedup 0.970, val speedup 0.292
execution cost 0:21:02.266805
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.948553, and there are 37025 training samples
in channel 9
JOB test speedup 0.49551907584686444
TPCH test speedup 0.9818233170718986
TPCH skew test speedup 0.9665328654791386
Epoch 0/50 |loss: 0.364933| train set 0.246x speedup, test set 0.967x speedup, val set 0.272x speedup, step: 1, train time 25.14 s
JOB test speedup 0.4710168564377825
TPCH test speedup 0.9592892789193483
TPCH skew test speedup 0.9324275214131502
Epoch 1/50 |loss: 0.285412| train set 0.239x speedup, test set 0.932x speedup, val set 0.269x speedup, step: 2, train time 23.56 s
JOB test speedup 0.5324268748324464
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 2/50 |loss: 0.255129| train set 0.239x speedup, test set 1.107x speedup, val set 0.269x speedup, step: 3, train time 23.59 s
JOB test speedup 0.4118976399005785
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 3/50 |loss: 0.236088| train set 0.244x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 4, train time 23.80 s
JOB test speedup 0.4413385623807066
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 4/50 |loss: 0.218180| train set 0.244x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 5, train time 23.51 s
JOB test speedup 0.45444252415073866
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 5/50 |loss: 0.205186| train set 0.238x speedup, test set 1.260x speedup, val set 0.266x speedup, step: 6, train time 23.67 s
JOB test speedup 0.4397227772902379
TPCH test speedup 1.2717428518985765
TPCH skew test speedup 1.2474689834422739
Epoch 6/50 |loss: 0.195513| train set 0.241x speedup, test set 1.247x speedup, val set 0.266x speedup, step: 7, train time 23.78 s
JOB test speedup 0.4366535223240848
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 7/50 |loss: 0.185435| train set 0.237x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 8, train time 23.90 s
JOB test speedup 0.42176833880741693
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 8/50 |loss: 0.177872| train set 0.235x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 9, train time 23.88 s
JOB test speedup 0.43323134079941317
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 9/50 |loss: 0.172402| train set 0.239x speedup, test set 1.107x speedup, val set 0.269x speedup, step: 10, train time 23.89 s
JOB test speedup 0.41746233048579046
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 10/50 |loss: 0.165901| train set 0.241x speedup, test set 1.260x speedup, val set 0.266x speedup, step: 11, train time 23.98 s
JOB test speedup 0.49495851213255676
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 11/50 |loss: 0.162370| train set 0.235x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 12, train time 23.99 s
JOB test speedup 0.4327167211315802
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 12/50 |loss: 0.157912| train set 0.238x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 13, train time 24.20 s
JOB test speedup 0.42432786022817676
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 13/50 |loss: 0.152022| train set 0.237x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 14, train time 23.91 s
JOB test speedup 0.4434306152327855
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 14/50 |loss: 0.152374| train set 0.238x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 15, train time 24.09 s
JOB test speedup 0.4334596487440971
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 15/50 |loss: 0.147029| train set 0.234x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 16, train time 24.11 s
JOB test speedup 0.44650353641946255
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 16/50 |loss: 0.143820| train set 0.238x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 17, train time 24.79 s
JOB test speedup 0.4698179463762211
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 17/50 |loss: 0.142073| train set 0.239x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 18, train time 24.22 s
JOB test speedup 0.42032353727817334
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 18/50 |loss: 0.136581| train set 0.236x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 19, train time 23.98 s
JOB test speedup 0.5069023127196913
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 19/50 |loss: 0.137060| train set 0.235x speedup, test set 0.978x speedup, val set 0.269x speedup, step: 20, train time 24.09 s
JOB test speedup 0.44359419025323926
TPCH test speedup 1.0233763026759561
TPCH skew test speedup 0.9981043294498111
Epoch 20/50 |loss: 0.133254| train set 0.238x speedup, test set 0.998x speedup, val set 0.269x speedup, step: 21, train time 24.12 s
JOB test speedup 0.42201899737835125
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 21/50 |loss: 0.131975| train set 0.238x speedup, test set 1.260x speedup, val set 0.266x speedup, step: 22, train time 24.17 s
JOB test speedup 0.4645384132895636
TPCH test speedup 1.2669079066319044
TPCH skew test speedup 1.2353291373153616
Epoch 22/50 |loss: 0.128301| train set 0.241x speedup, test set 1.235x speedup, val set 0.269x speedup, step: 23, train time 23.81 s
JOB test speedup 0.42880141564995616
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 23/50 |loss: 0.128642| train set 0.233x speedup, test set 1.260x speedup, val set 0.266x speedup, step: 24, train time 23.91 s
JOB test speedup 0.47951504144929025
TPCH test speedup 1.4094915116273814
TPCH skew test speedup 1.3682366550068472
Epoch 24/50 |loss: 0.123617| train set 0.233x speedup, test set 1.368x speedup, val set 0.269x speedup, step: 25, train time 23.78 s
JOB test speedup 0.41340908080724936
TPCH test speedup 1.2717428518985765
TPCH skew test speedup 1.2474689834422739
Epoch 25/50 |loss: 0.124616| train set 0.238x speedup, test set 1.247x speedup, val set 0.266x speedup, step: 26, train time 23.92 s
JOB test speedup 0.5347353039759927
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 26/50 |loss: 0.121641| train set 0.239x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 27, train time 24.30 s
JOB test speedup 0.42023579536170635
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 27/50 |loss: 0.119813| train set 0.237x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 28, train time 24.07 s
JOB test speedup 0.48485335337167795
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 28/50 |loss: 0.119936| train set 0.235x speedup, test set 1.657x speedup, val set 0.269x speedup, step: 29, train time 24.18 s
JOB test speedup 0.48962348039377845
TPCH test speedup 2.0370534844740087
TPCH skew test speedup 1.9922919786672064
Epoch 29/50 |loss: 0.118470| train set 0.233x speedup, test set 1.992x speedup, val set 0.269x speedup, step: 30, train time 24.18 s
JOB test speedup 0.46931345470634617
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 30/50 |loss: 0.116666| train set 0.236x speedup, test set 2.025x speedup, val set 0.266x speedup, step: 31, train time 24.26 s
JOB test speedup 0.4981593739534062
TPCH test speedup 1.0015522433663717
TPCH skew test speedup 0.9779749477646028
Epoch 31/50 |loss: 0.116795| train set 0.235x speedup, test set 0.978x speedup, val set 0.266x speedup, step: 32, train time 24.13 s
JOB test speedup 0.45578806212499395
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 32/50 |loss: 0.116602| train set 0.234x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 33, train time 24.01 s
JOB test speedup 0.4621568278269331
TPCH test speedup 2.0370534844740087
TPCH skew test speedup 1.9922919786672064
Epoch 33/50 |loss: 0.114816| train set 0.232x speedup, test set 1.992x speedup, val set 0.266x speedup, step: 34, train time 24.29 s
JOB test speedup 0.44143923477267566
TPCH test speedup 1.2717428518985765
TPCH skew test speedup 1.2474689834422739
Epoch 34/50 |loss: 0.116077| train set 0.234x speedup, test set 1.247x speedup, val set 0.266x speedup, step: 35, train time 24.11 s
JOB test speedup 0.41525280400312736
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 35/50 |loss: 0.111542| train set 0.232x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 36, train time 23.91 s
JOB test speedup 0.45492530567961964
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 36/50 |loss: 0.108943| train set 0.232x speedup, test set 2.025x speedup, val set 0.266x speedup, step: 37, train time 24.17 s
JOB test speedup 0.4149038745968558
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 37/50 |loss: 0.109632| train set 0.233x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 38, train time 24.08 s
JOB test speedup 0.4283809568242699
TPCH test speedup 2.0370534844740087
TPCH skew test speedup 1.9922919786672064
Epoch 38/50 |loss: 0.109466| train set 0.233x speedup, test set 1.992x speedup, val set 0.269x speedup, step: 39, train time 24.07 s
JOB test speedup 0.4185021959120204
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 39/50 |loss: 0.109695| train set 0.233x speedup, test set 2.025x speedup, val set 0.266x speedup, step: 40, train time 24.07 s
JOB test speedup 0.4059662679972497
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 40/50 |loss: 0.109033| train set 0.235x speedup, test set 2.025x speedup, val set 0.266x speedup, step: 41, train time 24.20 s
JOB test speedup 0.4638008352331697
TPCH test speedup 1.4094915116273814
TPCH skew test speedup 1.3682366550068472
Epoch 41/50 |loss: 0.109531| train set 0.237x speedup, test set 1.368x speedup, val set 0.269x speedup, step: 42, train time 24.09 s
JOB test speedup 0.4377755775856415
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 42/50 |loss: 0.106148| train set 0.236x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 43, train time 24.08 s
JOB test speedup 0.4236527108929135
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 43/50 |loss: 0.106587| train set 0.232x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 44, train time 24.67 s
JOB test speedup 0.44094815299917045
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 44/50 |loss: 0.105183| train set 0.237x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 45, train time 23.92 s
JOB test speedup 0.4988168760300428
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 45/50 |loss: 0.105970| train set 0.236x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 46, train time 23.99 s
JOB test speedup 0.39450416679585476
TPCH test speedup 1.4094915116273814
TPCH skew test speedup 1.3682366550068472
Epoch 46/50 |loss: 0.104418| train set 0.233x speedup, test set 1.368x speedup, val set 0.269x speedup, step: 47, train time 24.26 s
JOB test speedup 0.41526587854733943
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 47/50 |loss: 0.105380| train set 0.232x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 48, train time 23.99 s
JOB test speedup 0.4341722891133487
TPCH test speedup 2.06414446540182
TPCH skew test speedup 2.0247048498667444
Epoch 48/50 |loss: 0.103091| train set 0.205x speedup, test set 2.025x speedup, val set 0.269x speedup, step: 49, train time 24.01 s
JOB test speedup 0.44298316648490094
TPCH test speedup 1.422408732444734
TPCH skew test speedup 1.3834465565073948
Epoch 49/50 |loss: 0.100194| train set 0.232x speedup, test set 1.383x speedup, val set 0.269x speedup, step: 50, train time 24.00 s
Training per epoch cost 24.057 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 19.941s, pg runtime 0.206s, speedup 0.010x
02, opt runtime 4.223s, model runtime 53.823s, pg runtime 18.741s, speedup 0.348x
03, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
04, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
05, opt runtime 3.504s, model runtime 7.826s, pg runtime 6.143s, speedup 0.785x
06, opt runtime 2.593s, model runtime 11.947s, pg runtime 8.283s, speedup 0.693x
07, opt runtime 2.046s, model runtime 7.753s, pg runtime 5.879s, speedup 0.758x
08, opt runtime 1.737s, model runtime 7.168s, pg runtime 5.994s, speedup 0.836x
09, opt runtime 2.324s, model runtime 11.658s, pg runtime 10.605s, speedup 0.910x
10, opt runtime 3.248s, model runtime 14.609s, pg runtime 10.538s, speedup 0.721x
11, opt runtime 0.294s, model runtime 9.920s, pg runtime 2.352s, speedup 0.237x
12, opt runtime 4.443s, model runtime 31.658s, pg runtime 13.945s, speedup 0.440x
13, opt runtime 5.179s, model runtime 15.879s, pg runtime 10.685s, speedup 0.673x
14, opt runtime 0.157s, model runtime 10.874s, pg runtime 0.393s, speedup 0.036x
15, opt runtime 1.829s, model runtime 29.394s, pg runtime 53.885s, speedup 1.833x
16, opt runtime 1.876s, model runtime 30.372s, pg runtime 6.089s, speedup 0.200x
17, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
18, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
19, opt runtime 0.379s, model runtime 5.607s, pg runtime 3.645s, speedup 0.650x
20, opt runtime 0.626s, model runtime 4.159s, pg runtime 2.558s, speedup 0.615x
21, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
22, opt runtime 3.136s, model runtime 22.651s, pg runtime 5.620s, speedup 0.248x
23, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
24, opt runtime 0.332s, model runtime 7.761s, pg runtime 0.332s, speedup 0.043x
25, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
26, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
========== TPCH
01, opt runtime 28.639s, model runtime 66.677s, pg runtime 91.784s, speedup 1.377x
02, opt runtime 29.763s, model runtime 65.146s, pg runtime 91.648s, speedup 1.407x
03, opt runtime 30.267s, model runtime 65.922s, pg runtime 100.885s, speedup 1.530x
04, opt runtime 29.286s, model runtime 67.254s, pg runtime 92.131s, speedup 1.370x
05, opt runtime 29.269s, model runtime 65.185s, pg runtime 91.296s, speedup 1.401x
06, opt runtime 29.502s, model runtime 65.691s, pg runtime 112.305s, speedup 1.710x
07, opt runtime 27.886s, model runtime 64.928s, pg runtime 97.629s, speedup 1.504x
08, opt runtime 30.705s, model runtime 70.161s, pg runtime 89.698s, speedup 1.278x
09, opt runtime 27.651s, model runtime 67.744s, pg runtime 91.255s, speedup 1.347x
10, opt runtime 33.637s, model runtime 70.561s, pg runtime 90.618s, speedup 1.284x
11, opt runtime 53.298s, model runtime 641.154s, pg runtime 148.707s, speedup 0.232x
12, opt runtime 48.784s, model runtime 648.484s, pg runtime 78.349s, speedup 0.121x
13, opt runtime 53.440s, model runtime 627.477s, pg runtime 140.742s, speedup 0.224x
14, opt runtime 47.812s, model runtime 643.955s, pg runtime 83.069s, speedup 0.129x
15, opt runtime 47.518s, model runtime 624.264s, pg runtime 75.736s, speedup 0.121x
16, opt runtime 48.067s, model runtime 632.688s, pg runtime 81.014s, speedup 0.128x
17, opt runtime 47.738s, model runtime 722.099s, pg runtime 76.021s, speedup 0.105x
18, opt runtime 47.804s, model runtime 637.747s, pg runtime 81.177s, speedup 0.127x
19, opt runtime 49.511s, model runtime 698.879s, pg runtime 87.329s, speedup 0.125x
20, opt runtime 51.276s, model runtime 714.055s, pg runtime 79.222s, speedup 0.111x
21, opt runtime 24.391s, model runtime 597.697s, pg runtime 601.866s, speedup 1.007x
22, opt runtime 24.079s, model runtime 600.642s, pg runtime 608.707s, speedup 1.013x
23, opt runtime 24.662s, model runtime 609.600s, pg runtime 613.999s, speedup 1.007x
24, opt runtime 24.459s, model runtime 604.056s, pg runtime 608.717s, speedup 1.008x
25, opt runtime 25.236s, model runtime 618.593s, pg runtime 601.756s, speedup 0.973x
26, opt runtime 25.363s, model runtime 607.433s, pg runtime 611.327s, speedup 1.006x
27, opt runtime 24.706s, model runtime 596.799s, pg runtime 610.808s, speedup 1.023x
28, opt runtime 25.075s, model runtime 607.146s, pg runtime 612.430s, speedup 1.009x
29, opt runtime 24.840s, model runtime 613.317s, pg runtime 626.529s, speedup 1.022x
30, opt runtime 24.920s, model runtime 600.533s, pg runtime 610.993s, speedup 1.017x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 29.063s, model runtime 67.790s, pg runtime 91.786s, speedup 1.354x
02, opt runtime 33.249s, model runtime 71.275s, pg runtime 103.551s, speedup 1.453x
03, opt runtime 33.759s, model runtime 70.794s, pg runtime 98.290s, speedup 1.388x
04, opt runtime 36.646s, model runtime 66.614s, pg runtime 98.171s, speedup 1.474x
05, opt runtime 32.482s, model runtime 72.642s, pg runtime 123.411s, speedup 1.699x
06, opt runtime 31.996s, model runtime 66.753s, pg runtime 120.854s, speedup 1.810x
07, opt runtime 30.778s, model runtime 68.265s, pg runtime 100.158s, speedup 1.467x
08, opt runtime 30.030s, model runtime 67.656s, pg runtime 85.930s, speedup 1.270x
09, opt runtime 28.776s, model runtime 70.439s, pg runtime 86.923s, speedup 1.234x
10, opt runtime 29.576s, model runtime 71.065s, pg runtime 113.059s, speedup 1.591x
11, opt runtime 53.915s, model runtime 648.981s, pg runtime 80.711s, speedup 0.124x
12, opt runtime 53.203s, model runtime 634.254s, pg runtime 79.156s, speedup 0.125x
13, opt runtime 51.456s, model runtime 660.212s, pg runtime 93.781s, speedup 0.142x
14, opt runtime 54.696s, model runtime 674.445s, pg runtime 98.172s, speedup 0.146x
15, opt runtime 51.200s, model runtime 626.707s, pg runtime 77.674s, speedup 0.124x
16, opt runtime 47.844s, model runtime 609.493s, pg runtime 80.007s, speedup 0.131x
17, opt runtime 54.335s, model runtime 618.380s, pg runtime 95.799s, speedup 0.155x
18, opt runtime 48.088s, model runtime 686.899s, pg runtime 77.369s, speedup 0.113x
19, opt runtime 52.382s, model runtime 654.522s, pg runtime 82.710s, speedup 0.126x
20, opt runtime 52.135s, model runtime 634.708s, pg runtime 102.039s, speedup 0.161x
21, opt runtime 24.737s, model runtime 604.720s, pg runtime 616.762s, speedup 1.020x
22, opt runtime 25.478s, model runtime 614.298s, pg runtime 642.079s, speedup 1.045x
23, opt runtime 24.016s, model runtime 607.795s, pg runtime 601.228s, speedup 0.989x
24, opt runtime 24.103s, model runtime 605.196s, pg runtime 616.889s, speedup 1.019x
25, opt runtime 24.136s, model runtime 619.954s, pg runtime 609.432s, speedup 0.983x
26, opt runtime 25.431s, model runtime 622.963s, pg runtime 625.988s, speedup 1.005x
27, opt runtime 24.451s, model runtime 609.888s, pg runtime 628.615s, speedup 1.031x
28, opt runtime 24.465s, model runtime 612.708s, pg runtime 644.779s, speedup 1.052x
29, opt runtime 25.152s, model runtime 612.131s, pg runtime 613.332s, speedup 1.002x
30, opt runtime 24.505s, model runtime 595.223s, pg runtime 621.574s, speedup 1.044x
31, opt runtime 16.756s, model runtime 38.272s, pg runtime 602.586s, speedup 15.745x
32, opt runtime 16.542s, model runtime 34.826s, pg runtime 461.957s, speedup 13.265x
33, opt runtime 16.136s, model runtime 34.764s, pg runtime 410.283s, speedup 11.802x
34, opt runtime 14.422s, model runtime 36.667s, pg runtime 497.542s, speedup 13.569x
35, opt runtime 15.980s, model runtime 35.716s, pg runtime 504.239s, speedup 14.118x
36, opt runtime 16.482s, model runtime 36.634s, pg runtime 622.915s, speedup 17.004x
37, opt runtime 16.301s, model runtime 37.863s, pg runtime 646.719s, speedup 17.081x
38, opt runtime 16.194s, model runtime 34.791s, pg runtime 439.255s, speedup 12.626x
39, opt runtime 16.149s, model runtime 34.948s, pg runtime 423.122s, speedup 12.107x
40, opt runtime 13.751s, model runtime 37.676s, pg runtime 434.625s, speedup 11.536x
====================
JOB best validation speedup epoch: 0, train speedup 0.246, test speedup 0.496, val speedup 0.272
TPCH best validation speedup epoch: 0, train speedup 0.246, test speedup 0.982, val speedup 0.272
TPCH Skew best validation speedup epoch: 0, train speedup 0.246, test speedup 0.967, val speedup 0.272
execution cost 0:21:11.145340
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.971794, and there are 37025 training samples
in channel 9
JOB test speedup 0.6378225728854822
TPCH test speedup 1.775207336586341
TPCH skew test speedup 1.7191237678558664
Epoch 0/50 |loss: 0.366085| train set 0.247x speedup, test set 1.719x speedup, val set 0.272x speedup, step: 1, train time 24.67 s
JOB test speedup 0.4446214761797762
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 1/50 |loss: 0.286050| train set 0.242x speedup, test set 1.107x speedup, val set 0.268x speedup, step: 2, train time 23.21 s
JOB test speedup 0.47032531999453425
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 2/50 |loss: 0.255467| train set 0.256x speedup, test set 1.107x speedup, val set 0.269x speedup, step: 3, train time 23.41 s
JOB test speedup 0.43537522451630867
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 3/50 |loss: 0.236723| train set 0.245x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 4, train time 23.21 s
JOB test speedup 0.4107702745950536
TPCH test speedup 1.094365612939695
TPCH skew test speedup 1.0648654571822938
Epoch 4/50 |loss: 0.219721| train set 0.244x speedup, test set 1.065x speedup, val set 0.270x speedup, step: 5, train time 23.38 s
JOB test speedup 0.4397426343687877
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 5/50 |loss: 0.206189| train set 0.237x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 6, train time 23.47 s
JOB test speedup 0.4730564203108836
TPCH test speedup 0.94716654881895
TPCH skew test speedup 0.9268888037783396
Epoch 6/50 |loss: 0.195037| train set 0.240x speedup, test set 0.927x speedup, val set 0.266x speedup, step: 7, train time 23.51 s
JOB test speedup 0.45438130730301596
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 7/50 |loss: 0.187189| train set 0.237x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 8, train time 23.63 s
JOB test speedup 0.4236457522007631
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 8/50 |loss: 0.178939| train set 0.236x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 9, train time 23.77 s
JOB test speedup 0.44413729939635455
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 9/50 |loss: 0.174670| train set 0.243x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 10, train time 24.08 s
JOB test speedup 0.4511486377912254
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 10/50 |loss: 0.167866| train set 0.240x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 11, train time 23.99 s
JOB test speedup 0.46707905379272097
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 11/50 |loss: 0.164269| train set 0.239x speedup, test set 1.033x speedup, val set 0.284x speedup, step: 1, train time 23.99 s
JOB test speedup 0.4325894153443113
TPCH test speedup 0.9414215138088411
TPCH skew test speedup 0.9200365175524414
Epoch 12/50 |loss: 0.159264| train set 0.239x speedup, test set 0.920x speedup, val set 0.269x speedup, step: 2, train time 24.21 s
JOB test speedup 0.4083398918747385
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 13/50 |loss: 0.154391| train set 0.236x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 3, train time 24.21 s
JOB test speedup 0.4765636281924427
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 14/50 |loss: 0.152421| train set 0.237x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 4, train time 24.01 s
JOB test speedup 0.4140861535842663
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 15/50 |loss: 0.148642| train set 0.234x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 5, train time 23.97 s
JOB test speedup 0.42584468705206896
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 16/50 |loss: 0.147020| train set 0.242x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 6, train time 24.60 s
JOB test speedup 0.4484403003460036
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 17/50 |loss: 0.143772| train set 0.236x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 7, train time 24.07 s
JOB test speedup 0.4648948449893122
TPCH test speedup 1.6017837580961645
TPCH skew test speedup 1.634795692311029
Epoch 18/50 |loss: 0.138619| train set 0.239x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 8, train time 24.10 s
JOB test speedup 0.4710360841901605
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 19/50 |loss: 0.139435| train set 0.235x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 9, train time 24.07 s
JOB test speedup 0.4159597619478153
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 20/50 |loss: 0.135437| train set 0.234x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 10, train time 24.09 s
JOB test speedup 0.43049474195781007
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 21/50 |loss: 0.134395| train set 0.238x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 11, train time 24.32 s
JOB test speedup 0.5247521002903963
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 22/50 |loss: 0.130608| train set 0.236x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 12, train time 24.06 s
JOB test speedup 0.4247192917003898
TPCH test speedup 1.0694456313069631
TPCH skew test speedup 1.0419840579164177
Epoch 23/50 |loss: 0.131069| train set 0.233x speedup, test set 1.042x speedup, val set 0.269x speedup, step: 13, train time 23.91 s
JOB test speedup 0.44506297544760315
TPCH test speedup 1.4094915116273814
TPCH skew test speedup 1.3682366550068472
Epoch 24/50 |loss: 0.127067| train set 0.234x speedup, test set 1.368x speedup, val set 0.269x speedup, step: 14, train time 24.07 s
JOB test speedup 0.43147273494597915
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 25/50 |loss: 0.128295| train set 0.238x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 15, train time 24.07 s
JOB test speedup 0.49020084421176396
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 26/50 |loss: 0.123745| train set 0.241x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 16, train time 24.18 s
JOB test speedup 0.4248223688242156
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 27/50 |loss: 0.123537| train set 0.237x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 17, train time 23.81 s
JOB test speedup 0.48065649791668974
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 28/50 |loss: 0.120905| train set 0.236x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 18, train time 24.27 s
JOB test speedup 0.46570043070478506
TPCH test speedup 1.5201242593605493
TPCH skew test speedup 1.5509710015462181
Epoch 29/50 |loss: 0.121078| train set 0.232x speedup, test set 1.551x speedup, val set 0.269x speedup, step: 19, train time 24.09 s
JOB test speedup 0.46113249309343707
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 30/50 |loss: 0.121271| train set 0.233x speedup, test set 1.635x speedup, val set 0.266x speedup, step: 20, train time 24.30 s
JOB test speedup 0.5081316670422602
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 31/50 |loss: 0.118649| train set 0.233x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 21, train time 24.19 s
JOB test speedup 0.4221590977253617
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 32/50 |loss: 0.118892| train set 0.233x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 22, train time 24.12 s
JOB test speedup 0.427356820293947
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 33/50 |loss: 0.116590| train set 0.233x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 23, train time 24.22 s
JOB test speedup 0.4298317157857365
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 34/50 |loss: 0.118147| train set 0.237x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 24, train time 23.99 s
JOB test speedup 0.413175189565557
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 35/50 |loss: 0.114683| train set 0.232x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 25, train time 24.30 s
JOB test speedup 0.44235593314961597
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 36/50 |loss: 0.111251| train set 0.233x speedup, test set 1.033x speedup, val set 0.266x speedup, step: 26, train time 24.20 s
JOB test speedup 0.46332704574282535
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 37/50 |loss: 0.112940| train set 0.233x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 27, train time 24.01 s
JOB test speedup 0.40643476364106385
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 38/50 |loss: 0.111898| train set 0.233x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 28, train time 23.99 s
JOB test speedup 0.4304886449018591
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 39/50 |loss: 0.109151| train set 0.232x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 29, train time 24.00 s
JOB test speedup 0.4352093691169055
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 40/50 |loss: 0.107908| train set 0.236x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 30, train time 24.01 s
JOB test speedup 0.47112043592105013
TPCH test speedup 0.9414215138088411
TPCH skew test speedup 0.9200365175524414
Epoch 41/50 |loss: 0.112177| train set 0.236x speedup, test set 0.920x speedup, val set 0.269x speedup, step: 31, train time 24.08 s
JOB test speedup 0.4485166078632189
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 42/50 |loss: 0.107901| train set 0.237x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 32, train time 23.99 s
JOB test speedup 0.4389483750947742
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 43/50 |loss: 0.107457| train set 0.231x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 33, train time 24.31 s
JOB test speedup 0.3886312024875953
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 44/50 |loss: 0.105383| train set 0.239x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 34, train time 23.99 s
JOB test speedup 0.464356338189276
TPCH test speedup 0.9414215138088411
TPCH skew test speedup 0.9200365175524414
Epoch 45/50 |loss: 0.105388| train set 0.238x speedup, test set 0.920x speedup, val set 0.269x speedup, step: 35, train time 23.98 s
JOB test speedup 0.4352093691169055
TPCH test speedup 1.0621272092052017
TPCH skew test speedup 1.0333323095990314
Epoch 46/50 |loss: 0.104972| train set 0.233x speedup, test set 1.033x speedup, val set 0.269x speedup, step: 36, train time 23.89 s
JOB test speedup 0.4303964414970534
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 47/50 |loss: 0.106368| train set 0.232x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 37, train time 23.68 s
JOB test speedup 0.4433319170434835
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 48/50 |loss: 0.104295| train set 0.206x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 38, train time 23.78 s
JOB test speedup 0.4509766603713242
TPCH test speedup 1.4094915116273814
TPCH skew test speedup 1.3682366550068472
Epoch 49/50 |loss: 0.101455| train set 0.234x speedup, test set 1.368x speedup, val set 0.269x speedup, step: 39, train time 24.10 s
Training per epoch cost 23.991 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 11.702s, pg runtime 0.206s, speedup 0.018x
02, opt runtime 4.223s, model runtime 53.823s, pg runtime 18.741s, speedup 0.348x
03, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
04, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
05, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
06, opt runtime 2.593s, model runtime 24.533s, pg runtime 8.283s, speedup 0.338x
07, opt runtime 2.046s, model runtime 6.177s, pg runtime 5.879s, speedup 0.952x
08, opt runtime 1.737s, model runtime 5.445s, pg runtime 5.994s, speedup 1.101x
09, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
10, opt runtime 3.248s, model runtime 32.247s, pg runtime 10.538s, speedup 0.327x
11, opt runtime 0.294s, model runtime 8.250s, pg runtime 2.352s, speedup 0.285x
12, opt runtime 4.443s, model runtime 31.658s, pg runtime 13.945s, speedup 0.440x
13, opt runtime 5.179s, model runtime 18.810s, pg runtime 10.685s, speedup 0.568x
14, opt runtime 0.157s, model runtime 33.014s, pg runtime 0.393s, speedup 0.012x
15, opt runtime 1.829s, model runtime 9.516s, pg runtime 53.885s, speedup 5.662x
16, opt runtime 1.876s, model runtime 7.643s, pg runtime 6.089s, speedup 0.797x
17, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
18, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
19, opt runtime 0.379s, model runtime 6.369s, pg runtime 3.645s, speedup 0.572x
20, opt runtime 0.626s, model runtime 12.350s, pg runtime 2.558s, speedup 0.207x
21, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
22, opt runtime 3.136s, model runtime 20.318s, pg runtime 5.620s, speedup 0.277x
23, opt runtime 4.173s, model runtime 12.053s, pg runtime 8.279s, speedup 0.687x
24, opt runtime 0.332s, model runtime 7.761s, pg runtime 0.332s, speedup 0.043x
25, opt runtime 2.971s, model runtime 21.664s, pg runtime 8.605s, speedup 0.397x
26, opt runtime 0.965s, model runtime 11.079s, pg runtime 0.965s, speedup 0.087x
========== TPCH
01, opt runtime 28.639s, model runtime 66.677s, pg runtime 91.784s, speedup 1.377x
02, opt runtime 29.763s, model runtime 65.146s, pg runtime 91.648s, speedup 1.407x
03, opt runtime 30.267s, model runtime 65.922s, pg runtime 100.885s, speedup 1.530x
04, opt runtime 29.286s, model runtime 67.254s, pg runtime 92.131s, speedup 1.370x
05, opt runtime 29.269s, model runtime 65.185s, pg runtime 91.296s, speedup 1.401x
06, opt runtime 29.502s, model runtime 65.691s, pg runtime 112.305s, speedup 1.710x
07, opt runtime 27.886s, model runtime 64.928s, pg runtime 97.629s, speedup 1.504x
08, opt runtime 30.705s, model runtime 70.161s, pg runtime 89.698s, speedup 1.278x
09, opt runtime 27.651s, model runtime 67.744s, pg runtime 91.255s, speedup 1.347x
10, opt runtime 33.637s, model runtime 70.561s, pg runtime 90.618s, speedup 1.284x
11, opt runtime 53.298s, model runtime 730.999s, pg runtime 148.707s, speedup 0.203x
12, opt runtime 48.784s, model runtime 681.199s, pg runtime 78.349s, speedup 0.115x
13, opt runtime 53.440s, model runtime 695.290s, pg runtime 140.742s, speedup 0.202x
14, opt runtime 47.812s, model runtime 707.934s, pg runtime 83.069s, speedup 0.117x
15, opt runtime 47.518s, model runtime 739.548s, pg runtime 75.736s, speedup 0.102x
16, opt runtime 48.067s, model runtime 698.400s, pg runtime 81.014s, speedup 0.116x
17, opt runtime 47.738s, model runtime 722.099s, pg runtime 76.021s, speedup 0.105x
18, opt runtime 47.804s, model runtime 690.849s, pg runtime 81.177s, speedup 0.118x
19, opt runtime 49.511s, model runtime 797.741s, pg runtime 87.329s, speedup 0.109x
20, opt runtime 51.276s, model runtime 714.055s, pg runtime 79.222s, speedup 0.111x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 29.063s, model runtime 67.790s, pg runtime 91.786s, speedup 1.354x
02, opt runtime 33.249s, model runtime 71.275s, pg runtime 103.551s, speedup 1.453x
03, opt runtime 33.759s, model runtime 70.794s, pg runtime 98.290s, speedup 1.388x
04, opt runtime 36.646s, model runtime 66.614s, pg runtime 98.171s, speedup 1.474x
05, opt runtime 32.482s, model runtime 72.642s, pg runtime 123.411s, speedup 1.699x
06, opt runtime 31.996s, model runtime 66.753s, pg runtime 120.854s, speedup 1.810x
07, opt runtime 30.778s, model runtime 68.265s, pg runtime 100.158s, speedup 1.467x
08, opt runtime 30.030s, model runtime 67.656s, pg runtime 85.930s, speedup 1.270x
09, opt runtime 28.776s, model runtime 70.439s, pg runtime 86.923s, speedup 1.234x
10, opt runtime 29.576s, model runtime 71.065s, pg runtime 113.059s, speedup 1.591x
11, opt runtime 53.915s, model runtime 717.609s, pg runtime 80.711s, speedup 0.112x
12, opt runtime 53.203s, model runtime 682.780s, pg runtime 79.156s, speedup 0.116x
13, opt runtime 51.456s, model runtime 682.003s, pg runtime 93.781s, speedup 0.138x
14, opt runtime 54.696s, model runtime 730.826s, pg runtime 98.172s, speedup 0.134x
15, opt runtime 51.200s, model runtime 747.184s, pg runtime 77.674s, speedup 0.104x
16, opt runtime 47.844s, model runtime 684.231s, pg runtime 80.007s, speedup 0.117x
17, opt runtime 54.335s, model runtime 683.904s, pg runtime 95.799s, speedup 0.140x
18, opt runtime 48.088s, model runtime 686.899s, pg runtime 77.369s, speedup 0.113x
19, opt runtime 52.382s, model runtime 831.522s, pg runtime 82.710s, speedup 0.099x
20, opt runtime 52.135s, model runtime 689.404s, pg runtime 102.039s, speedup 0.148x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 38.272s, pg runtime 602.586s, speedup 15.745x
32, opt runtime 16.542s, model runtime 34.826s, pg runtime 461.957s, speedup 13.265x
33, opt runtime 16.136s, model runtime 34.764s, pg runtime 410.283s, speedup 11.802x
34, opt runtime 14.422s, model runtime 36.667s, pg runtime 497.542s, speedup 13.569x
35, opt runtime 15.980s, model runtime 35.716s, pg runtime 504.239s, speedup 14.118x
36, opt runtime 16.482s, model runtime 36.634s, pg runtime 622.915s, speedup 17.004x
37, opt runtime 16.301s, model runtime 37.863s, pg runtime 646.719s, speedup 17.081x
38, opt runtime 16.194s, model runtime 34.791s, pg runtime 439.255s, speedup 12.626x
39, opt runtime 16.149s, model runtime 34.948s, pg runtime 423.122s, speedup 12.107x
40, opt runtime 13.751s, model runtime 37.676s, pg runtime 434.625s, speedup 11.536x
====================
JOB best validation speedup epoch: 11, train speedup 0.239, test speedup 0.467, val speedup 0.284
TPCH best validation speedup epoch: 11, train speedup 0.239, test speedup 1.062, val speedup 0.284
TPCH Skew best validation speedup epoch: 11, train speedup 0.239, test speedup 1.033, val speedup 0.284
execution cost 0:21:09.466834
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(280, 49)
(280, 49)
construct training samples cost 0:00:01.925269, and there are 37025 training samples
in channel 9
JOB test speedup 0.4794219862527757
TPCH test speedup 1.775207336586341
TPCH skew test speedup 1.7191237678558664
Epoch 0/50 |loss: 0.364713| train set 0.247x speedup, test set 1.719x speedup, val set 0.275x speedup, step: 1, train time 24.97 s
JOB test speedup 0.4891427129867413
TPCH test speedup 1.7149731655151055
TPCH skew test speedup 1.6774705654882525
Epoch 1/50 |loss: 0.286562| train set 0.238x speedup, test set 1.677x speedup, val set 0.269x speedup, step: 2, train time 23.20 s
JOB test speedup 0.42756657593610453
TPCH test speedup 1.2750723778336939
TPCH skew test speedup 1.2504110531190502
Epoch 2/50 |loss: 0.254585| train set 0.239x speedup, test set 1.250x speedup, val set 0.269x speedup, step: 3, train time 23.38 s
JOB test speedup 0.4440475316524888
TPCH test speedup 1.2822492528149458
TPCH skew test speedup 1.2600999781810185
Epoch 3/50 |loss: 0.234739| train set 0.244x speedup, test set 1.260x speedup, val set 0.269x speedup, step: 4, train time 23.30 s
JOB test speedup 0.44356863307049055
TPCH test speedup 1.7149731655151055
TPCH skew test speedup 1.6774705654882525
Epoch 4/50 |loss: 0.218961| train set 0.240x speedup, test set 1.677x speedup, val set 0.270x speedup, step: 5, train time 23.38 s
JOB test speedup 0.45304481422504883
TPCH test speedup 1.3182402254529662
TPCH skew test speedup 1.2937179392512963
Epoch 5/50 |loss: 0.205822| train set 0.242x speedup, test set 1.294x speedup, val set 0.269x speedup, step: 6, train time 23.11 s
JOB test speedup 0.4497889747560799
TPCH test speedup 1.4191948685553126
TPCH skew test speedup 1.482847212703375
Epoch 6/50 |loss: 0.195916| train set 0.239x speedup, test set 1.483x speedup, val set 0.269x speedup, step: 7, train time 23.20 s
JOB test speedup 0.4061859385173647
TPCH test speedup 1.1944435348714895
TPCH skew test speedup 1.176546980724341
Epoch 7/50 |loss: 0.187451| train set 0.238x speedup, test set 1.177x speedup, val set 0.270x speedup, step: 8, train time 23.31 s
JOB test speedup 0.408867279832352
TPCH test speedup 1.2717428518985765
TPCH skew test speedup 1.2474689834422739
Epoch 8/50 |loss: 0.179924| train set 0.235x speedup, test set 1.247x speedup, val set 0.266x speedup, step: 9, train time 23.37 s
JOB test speedup 0.4423241369198507
TPCH test speedup 1.188213532570252
TPCH skew test speedup 1.1680960292079436
Epoch 9/50 |loss: 0.175138| train set 0.243x speedup, test set 1.168x speedup, val set 0.269x speedup, step: 10, train time 23.17 s
JOB test speedup 0.451872114883823
TPCH test speedup 1.2562770230765474
TPCH skew test speedup 1.2504110531190502
Epoch 10/50 |loss: 0.166544| train set 0.239x speedup, test set 1.250x speedup, val set 0.269x speedup, step: 11, train time 23.80 s
JOB test speedup 0.4769566315232874
TPCH test speedup 1.2676169682742469
TPCH skew test speedup 1.2391569547865293
Epoch 11/50 |loss: 0.162610| train set 0.240x speedup, test set 1.239x speedup, val set 0.269x speedup, step: 12, train time 23.87 s
JOB test speedup 0.43740114876667713
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 12/50 |loss: 0.159560| train set 0.234x speedup, test set 1.097x speedup, val set 0.269x speedup, step: 13, train time 23.98 s
JOB test speedup 0.425715514101813
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 13/50 |loss: 0.154822| train set 0.236x speedup, test set 1.097x speedup, val set 0.270x speedup, step: 14, train time 23.98 s
JOB test speedup 0.41060215937729533
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 14/50 |loss: 0.153058| train set 0.237x speedup, test set 1.097x speedup, val set 0.269x speedup, step: 15, train time 24.25 s
JOB test speedup 0.410249817008754
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 15/50 |loss: 0.147968| train set 0.235x speedup, test set 1.097x speedup, val set 0.269x speedup, step: 16, train time 24.27 s
JOB test speedup 0.40694656756311565
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 16/50 |loss: 0.146097| train set 0.234x speedup, test set 1.097x speedup, val set 0.269x speedup, step: 17, train time 24.90 s
JOB test speedup 0.45981956766355914
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 17/50 |loss: 0.143417| train set 0.238x speedup, test set 1.097x speedup, val set 0.269x speedup, step: 18, train time 24.12 s
JOB test speedup 0.4199092501735391
TPCH test speedup 1.169155559697912
TPCH skew test speedup 1.097230043517699
Epoch 18/50 |loss: 0.138099| train set 0.238x speedup, test set 1.097x speedup, val set 0.270x speedup, step: 19, train time 24.08 s
JOB test speedup 0.4656743898009046
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 19/50 |loss: 0.138254| train set 0.236x speedup, test set 1.097x speedup, val set 0.270x speedup, step: 20, train time 24.11 s
JOB test speedup 0.4279750017402227
TPCH test speedup 1.2094411759179033
TPCH skew test speedup 1.2673908913369034
Epoch 20/50 |loss: 0.133132| train set 0.238x speedup, test set 1.267x speedup, val set 0.269x speedup, step: 21, train time 24.18 s
JOB test speedup 0.44165730732851605
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 21/50 |loss: 0.131504| train set 0.238x speedup, test set 1.097x speedup, val set 0.267x speedup, step: 22, train time 24.18 s
JOB test speedup 0.4711191850262529
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 22/50 |loss: 0.131097| train set 0.241x speedup, test set 1.097x speedup, val set 0.276x speedup, step: 1, train time 23.87 s
JOB test speedup 0.37057421999400614
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 23/50 |loss: 0.127854| train set 0.233x speedup, test set 1.097x speedup, val set 0.269x speedup, step: 2, train time 24.11 s
JOB test speedup 0.45199496560403474
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 24/50 |loss: 0.125379| train set 0.233x speedup, test set 1.635x speedup, val set 0.270x speedup, step: 3, train time 24.19 s
JOB test speedup 0.4230088330963898
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 25/50 |loss: 0.125111| train set 0.235x speedup, test set 1.097x speedup, val set 0.187x speedup, step: 4, train time 24.00 s
JOB test speedup 0.44801313696302936
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 26/50 |loss: 0.123028| train set 0.239x speedup, test set 1.097x speedup, val set 0.270x speedup, step: 5, train time 24.12 s
JOB test speedup 0.4293093436983534
TPCH test speedup 1.169155559697912
TPCH skew test speedup 1.097230043517699
Epoch 27/50 |loss: 0.121670| train set 0.238x speedup, test set 1.097x speedup, val set 0.269x speedup, step: 6, train time 24.17 s
JOB test speedup 0.4251193565204933
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 28/50 |loss: 0.120303| train set 0.238x speedup, test set 1.097x speedup, val set 0.269x speedup, step: 7, train time 24.11 s
JOB test speedup 0.4524281010940598
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 29/50 |loss: 0.119966| train set 0.234x speedup, test set 1.097x speedup, val set 0.270x speedup, step: 8, train time 24.18 s
JOB test speedup 0.44548555860444694
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 30/50 |loss: 0.118685| train set 0.234x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 9, train time 24.08 s
JOB test speedup 0.46515885751135694
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 31/50 |loss: 0.115623| train set 0.233x speedup, test set 1.097x speedup, val set 0.270x speedup, step: 10, train time 23.99 s
JOB test speedup 0.42454114754205646
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 32/50 |loss: 0.117568| train set 0.233x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 11, train time 24.06 s
JOB test speedup 0.4622404636376487
TPCH test speedup 1.075531065609675
TPCH skew test speedup 1.047870186102104
Epoch 33/50 |loss: 0.114438| train set 0.232x speedup, test set 1.048x speedup, val set 0.269x speedup, step: 12, train time 24.15 s
JOB test speedup 0.42276116417916293
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 34/50 |loss: 0.117541| train set 0.233x speedup, test set 1.097x speedup, val set 0.273x speedup, step: 13, train time 24.28 s
JOB test speedup 0.4709941874353157
TPCH test speedup 1.169155559697912
TPCH skew test speedup 1.097230043517699
Epoch 35/50 |loss: 0.112905| train set 0.231x speedup, test set 1.097x speedup, val set 0.269x speedup, step: 14, train time 24.31 s
JOB test speedup 0.45614497181516495
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 36/50 |loss: 0.108837| train set 0.232x speedup, test set 1.097x speedup, val set 0.267x speedup, step: 15, train time 24.07 s
JOB test speedup 0.4729265887503178
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 37/50 |loss: 0.110875| train set 0.233x speedup, test set 1.097x speedup, val set 0.292x speedup, step: 1, train time 23.97 s
JOB test speedup 0.3756654471064657
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 38/50 |loss: 0.110957| train set 0.233x speedup, test set 1.635x speedup, val set 0.266x speedup, step: 2, train time 24.30 s
JOB test speedup 0.4483868928580533
TPCH test speedup 1.1392979361873683
TPCH skew test speedup 1.1069899161318457
Epoch 39/50 |loss: 0.108063| train set 0.234x speedup, test set 1.107x speedup, val set 0.270x speedup, step: 3, train time 23.87 s
JOB test speedup 0.44855192104365205
TPCH test speedup 1.7172801428064595
TPCH skew test speedup 1.6565563741121219
Epoch 40/50 |loss: 0.110060| train set 0.235x speedup, test set 1.657x speedup, val set 0.409x speedup, step: 1, train time 24.28 s
JOB test speedup 0.4191017589963087
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 41/50 |loss: 0.109691| train set 0.235x speedup, test set 1.097x speedup, val set 0.293x speedup, step: 2, train time 23.78 s
JOB test speedup 0.4144391664248089
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 42/50 |loss: 0.107524| train set 0.236x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 3, train time 24.21 s
JOB test speedup 0.3861489286302028
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 43/50 |loss: 0.107671| train set 0.232x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 4, train time 24.88 s
JOB test speedup 0.4426888338821891
TPCH test speedup 2.0370534844740087
TPCH skew test speedup 1.9922919786672064
Epoch 44/50 |loss: 0.105268| train set 0.242x speedup, test set 1.992x speedup, val set 0.269x speedup, step: 5, train time 23.82 s
JOB test speedup 0.4124675325601712
TPCH test speedup 1.2094411759179033
TPCH skew test speedup 1.217355581764209
Epoch 45/50 |loss: 0.105955| train set 0.236x speedup, test set 1.217x speedup, val set 0.269x speedup, step: 6, train time 23.99 s
JOB test speedup 0.4426888338821891
TPCH test speedup 1.130995977266711
TPCH skew test speedup 1.097230043517699
Epoch 46/50 |loss: 0.104050| train set 0.233x speedup, test set 1.097x speedup, val set 0.187x speedup, step: 7, train time 24.11 s
JOB test speedup 0.3907175326589309
TPCH test speedup 1.6984875918786528
TPCH skew test speedup 1.634795692311029
Epoch 47/50 |loss: 0.103551| train set 0.232x speedup, test set 1.635x speedup, val set 0.269x speedup, step: 8, train time 23.78 s
JOB test speedup 0.446047745113007
TPCH test speedup 1.0006430377987179
TPCH skew test speedup 0.9695053600391068
Epoch 48/50 |loss: 0.104294| train set 0.233x speedup, test set 0.970x speedup, val set 0.266x speedup, step: 9, train time 24.48 s
JOB test speedup 0.4404380903922037
TPCH test speedup 1.169155559697912
TPCH skew test speedup 1.097230043517699
Epoch 49/50 |loss: 0.102192| train set 0.233x speedup, test set 1.097x speedup, val set 0.274x speedup, step: 10, train time 24.21 s
Training per epoch cost 23.991 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 9.448s, pg runtime 0.206s, speedup 0.022x
02, opt runtime 4.223s, model runtime 37.578s, pg runtime 18.741s, speedup 0.499x
03, opt runtime 1.763s, model runtime 52.058s, pg runtime 1.763s, speedup 0.034x
04, opt runtime 1.386s, model runtime 69.530s, pg runtime 1.386s, speedup 0.020x
05, opt runtime 3.504s, model runtime 9.656s, pg runtime 6.143s, speedup 0.636x
06, opt runtime 2.593s, model runtime 51.747s, pg runtime 8.283s, speedup 0.160x
07, opt runtime 2.046s, model runtime 6.177s, pg runtime 5.879s, speedup 0.952x
08, opt runtime 1.737s, model runtime 5.445s, pg runtime 5.994s, speedup 1.101x
09, opt runtime 2.324s, model runtime 32.563s, pg runtime 10.605s, speedup 0.326x
10, opt runtime 3.248s, model runtime 32.247s, pg runtime 10.538s, speedup 0.327x
11, opt runtime 0.294s, model runtime 8.250s, pg runtime 2.352s, speedup 0.285x
12, opt runtime 4.443s, model runtime 31.658s, pg runtime 13.945s, speedup 0.440x
13, opt runtime 5.179s, model runtime 8.803s, pg runtime 10.685s, speedup 1.214x
14, opt runtime 0.157s, model runtime 26.201s, pg runtime 0.393s, speedup 0.015x
15, opt runtime 1.829s, model runtime 7.190s, pg runtime 53.885s, speedup 7.495x
16, opt runtime 1.876s, model runtime 7.214s, pg runtime 6.089s, speedup 0.844x
17, opt runtime 2.413s, model runtime 4.212s, pg runtime 57.198s, speedup 13.581x
18, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
19, opt runtime 0.379s, model runtime 6.369s, pg runtime 3.645s, speedup 0.572x
20, opt runtime 0.626s, model runtime 12.350s, pg runtime 2.558s, speedup 0.207x
21, opt runtime 0.434s, model runtime 19.696s, pg runtime 0.434s, speedup 0.022x
22, opt runtime 3.136s, model runtime 48.516s, pg runtime 5.620s, speedup 0.116x
23, opt runtime 4.173s, model runtime 18.653s, pg runtime 8.279s, speedup 0.444x
24, opt runtime 0.332s, model runtime 7.761s, pg runtime 0.332s, speedup 0.043x
25, opt runtime 2.971s, model runtime 21.664s, pg runtime 8.605s, speedup 0.397x
26, opt runtime 0.965s, model runtime 16.301s, pg runtime 0.965s, speedup 0.059x
========== TPCH
01, opt runtime 28.639s, model runtime 55.667s, pg runtime 91.784s, speedup 1.649x
02, opt runtime 29.763s, model runtime 65.728s, pg runtime 91.648s, speedup 1.394x
03, opt runtime 30.267s, model runtime 58.240s, pg runtime 100.885s, speedup 1.732x
04, opt runtime 29.286s, model runtime 53.165s, pg runtime 92.131s, speedup 1.733x
05, opt runtime 29.269s, model runtime 54.072s, pg runtime 91.296s, speedup 1.688x
06, opt runtime 29.502s, model runtime 54.889s, pg runtime 112.305s, speedup 2.046x
07, opt runtime 27.886s, model runtime 53.051s, pg runtime 97.629s, speedup 1.840x
08, opt runtime 30.705s, model runtime 67.632s, pg runtime 89.698s, speedup 1.326x
09, opt runtime 27.651s, model runtime 67.222s, pg runtime 91.255s, speedup 1.358x
10, opt runtime 33.637s, model runtime 53.032s, pg runtime 90.618s, speedup 1.709x
11, opt runtime 53.298s, model runtime 253.402s, pg runtime 148.707s, speedup 0.587x
12, opt runtime 48.784s, model runtime 247.061s, pg runtime 78.349s, speedup 0.317x
13, opt runtime 53.440s, model runtime 244.673s, pg runtime 140.742s, speedup 0.575x
14, opt runtime 47.812s, model runtime 240.726s, pg runtime 83.069s, speedup 0.345x
15, opt runtime 47.518s, model runtime 241.327s, pg runtime 75.736s, speedup 0.314x
16, opt runtime 48.067s, model runtime 237.398s, pg runtime 81.014s, speedup 0.341x
17, opt runtime 47.738s, model runtime 244.194s, pg runtime 76.021s, speedup 0.311x
18, opt runtime 47.804s, model runtime 235.923s, pg runtime 81.177s, speedup 0.344x
19, opt runtime 49.511s, model runtime 251.544s, pg runtime 87.329s, speedup 0.347x
20, opt runtime 51.276s, model runtime 242.194s, pg runtime 79.222s, speedup 0.327x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 35.491s, pg runtime 432.766s, speedup 12.194x
32, opt runtime 15.120s, model runtime 37.014s, pg runtime 566.078s, speedup 15.294x
33, opt runtime 16.639s, model runtime 36.395s, pg runtime 462.544s, speedup 12.709x
34, opt runtime 16.280s, model runtime 38.281s, pg runtime 634.990s, speedup 16.587x
35, opt runtime 16.528s, model runtime 37.271s, pg runtime 620.762s, speedup 16.655x
36, opt runtime 18.690s, model runtime 40.603s, pg runtime 651.942s, speedup 16.057x
37, opt runtime 16.438s, model runtime 35.682s, pg runtime 546.887s, speedup 15.327x
38, opt runtime 16.138s, model runtime 34.736s, pg runtime 501.793s, speedup 14.446x
39, opt runtime 16.770s, model runtime 37.165s, pg runtime 594.754s, speedup 16.003x
40, opt runtime 16.305s, model runtime 36.660s, pg runtime 436.168s, speedup 11.898x
========== TPCH skew
01, opt runtime 29.063s, model runtime 55.250s, pg runtime 91.786s, speedup 1.661x
02, opt runtime 33.249s, model runtime 61.610s, pg runtime 103.551s, speedup 1.681x
03, opt runtime 33.759s, model runtime 63.571s, pg runtime 98.290s, speedup 1.546x
04, opt runtime 36.646s, model runtime 52.341s, pg runtime 98.171s, speedup 1.876x
05, opt runtime 32.482s, model runtime 54.278s, pg runtime 123.411s, speedup 2.274x
06, opt runtime 31.996s, model runtime 55.524s, pg runtime 120.854s, speedup 2.177x
07, opt runtime 30.778s, model runtime 53.160s, pg runtime 100.158s, speedup 1.884x
08, opt runtime 30.030s, model runtime 77.102s, pg runtime 85.930s, speedup 1.115x
09, opt runtime 28.776s, model runtime 66.441s, pg runtime 86.923s, speedup 1.308x
10, opt runtime 29.576s, model runtime 48.325s, pg runtime 113.059s, speedup 2.340x
11, opt runtime 53.915s, model runtime 241.072s, pg runtime 80.711s, speedup 0.335x
12, opt runtime 53.203s, model runtime 244.254s, pg runtime 79.156s, speedup 0.324x
13, opt runtime 51.456s, model runtime 233.644s, pg runtime 93.781s, speedup 0.401x
14, opt runtime 54.696s, model runtime 255.805s, pg runtime 98.172s, speedup 0.384x
15, opt runtime 51.200s, model runtime 253.524s, pg runtime 77.674s, speedup 0.306x
16, opt runtime 47.844s, model runtime 229.269s, pg runtime 80.007s, speedup 0.349x
17, opt runtime 54.335s, model runtime 234.245s, pg runtime 95.799s, speedup 0.409x
18, opt runtime 48.088s, model runtime 243.678s, pg runtime 77.369s, speedup 0.318x
19, opt runtime 52.382s, model runtime 263.086s, pg runtime 82.710s, speedup 0.314x
20, opt runtime 52.135s, model runtime 254.548s, pg runtime 102.039s, speedup 0.401x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 38.272s, pg runtime 602.586s, speedup 15.745x
32, opt runtime 16.542s, model runtime 34.826s, pg runtime 461.957s, speedup 13.265x
33, opt runtime 16.136s, model runtime 34.764s, pg runtime 410.283s, speedup 11.802x
34, opt runtime 14.422s, model runtime 36.667s, pg runtime 497.542s, speedup 13.569x
35, opt runtime 15.980s, model runtime 35.716s, pg runtime 504.239s, speedup 14.118x
36, opt runtime 16.482s, model runtime 36.634s, pg runtime 622.915s, speedup 17.004x
37, opt runtime 16.301s, model runtime 37.863s, pg runtime 646.719s, speedup 17.081x
38, opt runtime 16.194s, model runtime 34.791s, pg runtime 439.255s, speedup 12.626x
39, opt runtime 16.149s, model runtime 34.948s, pg runtime 423.122s, speedup 12.107x
40, opt runtime 13.751s, model runtime 37.676s, pg runtime 434.625s, speedup 11.536x
====================
JOB best validation speedup epoch: 40, train speedup 0.235, test speedup 0.449, val speedup 0.409
TPCH best validation speedup epoch: 40, train speedup 0.235, test speedup 1.717, val speedup 0.409
TPCH Skew best validation speedup epoch: 40, train speedup 0.235, test speedup 1.657, val speedup 0.409
execution cost 0:21:06.766730
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.642701, and there are 26041 training samples
in channel 9
JOB test speedup 0.9072541800093104
TPCH test speedup 1.2305682646072817
TPCH skew test speedup 1.1100570801270278
Epoch 0/50 |loss: 0.373907| train set 1.498x speedup, test set 1.110x speedup, val set 0.515x speedup, step: 1, train time 18.27 s
JOB test speedup 1.1103581328473187
TPCH test speedup 2.562639375435389
TPCH skew test speedup 2.173901857247425
Epoch 1/50 |loss: 0.294826| train set 1.766x speedup, test set 2.174x speedup, val set 0.516x speedup, step: 1, train time 16.99 s
JOB test speedup 0.9249844076556911
TPCH test speedup 1.8070664169694275
TPCH skew test speedup 1.6181496086499556
Epoch 2/50 |loss: 0.266943| train set 1.745x speedup, test set 1.618x speedup, val set 1.470x speedup, step: 1, train time 16.90 s
JOB test speedup 0.9190185888929996
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 3/50 |loss: 0.250327| train set 1.710x speedup, test set 2.300x speedup, val set 1.470x speedup, step: 1, train time 16.82 s
JOB test speedup 0.8900052932858973
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 4/50 |loss: 0.234682| train set 1.785x speedup, test set 2.310x speedup, val set 1.160x speedup, step: 2, train time 17.07 s
JOB test speedup 1.5222198563708536
TPCH test speedup 2.541375455514956
TPCH skew test speedup 2.4933796051512838
Epoch 5/50 |loss: 0.227603| train set 1.787x speedup, test set 2.493x speedup, val set 1.470x speedup, step: 3, train time 16.99 s
JOB test speedup 0.8900853211147419
TPCH test speedup 2.544110105691499
TPCH skew test speedup 2.5030621095008483
Epoch 6/50 |loss: 0.211965| train set 1.785x speedup, test set 2.503x speedup, val set 0.512x speedup, step: 4, train time 16.80 s
JOB test speedup 0.9213652016927013
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 7/50 |loss: 0.206517| train set 1.760x speedup, test set 2.310x speedup, val set 1.469x speedup, step: 5, train time 16.92 s
JOB test speedup 2.7436058610283993
TPCH test speedup 3.5545667806167605
TPCH skew test speedup 2.9584924854242955
Epoch 8/50 |loss: 0.198527| train set 1.796x speedup, test set 2.958x speedup, val set 1.492x speedup, step: 1, train time 16.98 s
JOB test speedup 1.4669480213596926
TPCH test speedup 2.3223464738692683
TPCH skew test speedup 2.2250100845673804
Epoch 9/50 |loss: 0.193289| train set 1.794x speedup, test set 2.225x speedup, val set 0.512x speedup, step: 2, train time 16.90 s
JOB test speedup 2.252139785393203
TPCH test speedup 2.21382881007082
TPCH skew test speedup 2.130069675141409
Epoch 10/50 |loss: 0.184710| train set 1.793x speedup, test set 2.130x speedup, val set 1.492x speedup, step: 1, train time 16.99 s
JOB test speedup 1.988736035238465
TPCH test speedup 2.08401284688638
TPCH skew test speedup 2.0383732744050844
Epoch 11/50 |loss: 0.182558| train set 1.667x speedup, test set 2.038x speedup, val set 0.432x speedup, step: 2, train time 16.72 s
JOB test speedup 1.1042537653287974
TPCH test speedup 2.3044468909392064
TPCH skew test speedup 2.136332149056228
Epoch 12/50 |loss: 0.179432| train set 1.776x speedup, test set 2.136x speedup, val set 1.019x speedup, step: 3, train time 16.98 s
JOB test speedup 1.8027575294005824
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 13/50 |loss: 0.176010| train set 1.763x speedup, test set 2.127x speedup, val set 1.469x speedup, step: 4, train time 16.78 s
JOB test speedup 0.9110403596402099
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 14/50 |loss: 0.172898| train set 1.789x speedup, test set 2.310x speedup, val set 1.321x speedup, step: 5, train time 17.08 s
JOB test speedup 1.3959279742292763
TPCH test speedup 2.3044468909392064
TPCH skew test speedup 2.1094824468839417
Epoch 15/50 |loss: 0.170004| train set 1.798x speedup, test set 2.109x speedup, val set 0.512x speedup, step: 6, train time 16.99 s
JOB test speedup 0.8995800406318872
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 16/50 |loss: 0.170045| train set 1.760x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 7, train time 16.79 s
JOB test speedup 1.7832589509789045
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 17/50 |loss: 0.161495| train set 1.791x speedup, test set 2.127x speedup, val set 1.470x speedup, step: 8, train time 16.90 s
JOB test speedup 1.0664777657749676
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 18/50 |loss: 0.160773| train set 1.799x speedup, test set 2.046x speedup, val set 1.479x speedup, step: 9, train time 16.98 s
JOB test speedup 1.89725673578158
TPCH test speedup 2.3471925201569386
TPCH skew test speedup 2.3097278570640705
Epoch 19/50 |loss: 0.159834| train set 1.778x speedup, test set 2.310x speedup, val set 0.432x speedup, step: 10, train time 16.88 s
JOB test speedup 0.9160318335027658
TPCH test speedup 2.1022255459575296
TPCH skew test speedup 2.045891742032457
Epoch 20/50 |loss: 0.156390| train set 1.763x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 11, train time 16.91 s
JOB test speedup 1.1039194183291927
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 21/50 |loss: 0.153551| train set 1.799x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 12, train time 16.92 s
JOB test speedup 2.000666129989658
TPCH test speedup 2.2577396603967874
TPCH skew test speedup 2.170735414173334
Epoch 22/50 |loss: 0.154963| train set 1.780x speedup, test set 2.171x speedup, val set 0.512x speedup, step: 13, train time 16.80 s
JOB test speedup 1.1072248483113265
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 23/50 |loss: 0.151256| train set 1.797x speedup, test set 2.119x speedup, val set 1.470x speedup, step: 14, train time 16.98 s
JOB test speedup 1.421416293863182
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 24/50 |loss: 0.146828| train set 1.777x speedup, test set 2.127x speedup, val set 1.470x speedup, step: 15, train time 17.09 s
JOB test speedup 1.0974268183271392
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 25/50 |loss: 0.149046| train set 1.801x speedup, test set 3.912x speedup, val set 1.469x speedup, step: 16, train time 17.00 s
JOB test speedup 0.8757799647691403
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 26/50 |loss: 0.147183| train set 1.801x speedup, test set 2.119x speedup, val set 1.469x speedup, step: 17, train time 17.19 s
JOB test speedup 1.9933726472409303
TPCH test speedup 2.132842699572543
TPCH skew test speedup 2.1034570214219523
Epoch 27/50 |loss: 0.146793| train set 1.783x speedup, test set 2.103x speedup, val set 0.476x speedup, step: 18, train time 16.90 s
JOB test speedup 1.029101987817126
TPCH test speedup 2.356393836875425
TPCH skew test speedup 2.3097278570640705
Epoch 28/50 |loss: 0.143830| train set 1.778x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 19, train time 17.19 s
JOB test speedup 1.9890579321005437
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 29/50 |loss: 0.139762| train set 1.799x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 20, train time 17.28 s
JOB test speedup 2.0191284432965886
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 30/50 |loss: 0.141409| train set 1.768x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 21, train time 17.26 s
JOB test speedup 0.9116520344732978
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 31/50 |loss: 0.138386| train set 1.799x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 22, train time 17.29 s
JOB test speedup 1.454493030259667
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 32/50 |loss: 0.138556| train set 1.781x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 23, train time 17.10 s
JOB test speedup 0.9124963040725459
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 33/50 |loss: 0.135833| train set 1.801x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 24, train time 17.11 s
JOB test speedup 0.911908096306744
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 34/50 |loss: 0.138906| train set 1.802x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 25, train time 17.20 s
JOB test speedup 0.8990059150191028
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 35/50 |loss: 0.134681| train set 1.764x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 26, train time 17.00 s
JOB test speedup 0.8892976577749758
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 36/50 |loss: 0.131428| train set 1.777x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 27, train time 16.89 s
JOB test speedup 2.0142101061911144
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 37/50 |loss: 0.132540| train set 1.801x speedup, test set 3.912x speedup, val set 1.469x speedup, step: 28, train time 17.10 s
JOB test speedup 1.4345680998711037
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 38/50 |loss: 0.132164| train set 1.776x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 29, train time 17.23 s
JOB test speedup 1.418834859766611
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 39/50 |loss: 0.132292| train set 1.748x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 30, train time 17.20 s
JOB test speedup 0.9124504309616432
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 40/50 |loss: 0.131366| train set 1.802x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 31, train time 17.18 s
JOB test speedup 0.9178094381079581
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 41/50 |loss: 0.128744| train set 1.800x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 32, train time 17.19 s
JOB test speedup 1.0871505470512874
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 42/50 |loss: 0.128728| train set 1.799x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 33, train time 16.90 s
JOB test speedup 1.0982683723360482
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 43/50 |loss: 0.125296| train set 1.798x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 34, train time 17.18 s
JOB test speedup 2.02084000078363
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 44/50 |loss: 0.127569| train set 1.801x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 35, train time 17.08 s
JOB test speedup 0.8900193513301518
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 45/50 |loss: 0.127332| train set 1.782x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 36, train time 17.29 s
JOB test speedup 1.4319038851561199
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 46/50 |loss: 0.125983| train set 1.763x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 37, train time 17.29 s
JOB test speedup 1.0679655118414837
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 47/50 |loss: 0.126104| train set 1.803x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 38, train time 17.29 s
JOB test speedup 1.0991216744421084
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 48/50 |loss: 0.123462| train set 1.800x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 39, train time 17.09 s
JOB test speedup 0.9124504309616432
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 49/50 |loss: 0.124322| train set 1.801x speedup, test set 3.912x speedup, val set 1.470x speedup, step: 40, train time 17.20 s
Training per epoch cost 17.061 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.080s, pg runtime 6.143s, speedup 1.010x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 2.971s, pg runtime 8.605s, speedup 2.897x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
13, opt runtime 53.440s, model runtime 136.731s, pg runtime 140.742s, speedup 1.029x
14, opt runtime 47.812s, model runtime 139.115s, pg runtime 83.069s, speedup 0.597x
15, opt runtime 47.518s, model runtime 133.905s, pg runtime 75.736s, speedup 0.566x
16, opt runtime 48.067s, model runtime 135.202s, pg runtime 81.014s, speedup 0.599x
17, opt runtime 47.738s, model runtime 83.106s, pg runtime 76.021s, speedup 0.915x
18, opt runtime 47.804s, model runtime 136.805s, pg runtime 81.177s, speedup 0.593x
19, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
20, opt runtime 51.276s, model runtime 84.921s, pg runtime 79.222s, speedup 0.933x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 341.320s, pg runtime 432.766s, speedup 1.268x
32, opt runtime 15.120s, model runtime 353.483s, pg runtime 566.078s, speedup 1.601x
33, opt runtime 16.639s, model runtime 353.418s, pg runtime 462.544s, speedup 1.309x
34, opt runtime 16.280s, model runtime 367.037s, pg runtime 634.990s, speedup 1.730x
35, opt runtime 16.528s, model runtime 354.584s, pg runtime 620.762s, speedup 1.751x
36, opt runtime 18.690s, model runtime 355.233s, pg runtime 651.942s, speedup 1.835x
37, opt runtime 16.438s, model runtime 352.471s, pg runtime 546.887s, speedup 1.552x
38, opt runtime 16.138s, model runtime 345.514s, pg runtime 501.793s, speedup 1.452x
39, opt runtime 16.770s, model runtime 344.251s, pg runtime 594.754s, speedup 1.728x
40, opt runtime 16.305s, model runtime 343.002s, pg runtime 436.168s, speedup 1.272x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 167.703s, pg runtime 80.711s, speedup 0.481x
12, opt runtime 53.203s, model runtime 135.711s, pg runtime 79.156s, speedup 0.583x
13, opt runtime 51.456s, model runtime 132.632s, pg runtime 93.781s, speedup 0.707x
14, opt runtime 54.696s, model runtime 141.455s, pg runtime 98.172s, speedup 0.694x
15, opt runtime 51.200s, model runtime 137.865s, pg runtime 77.674s, speedup 0.563x
16, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
17, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
18, opt runtime 48.088s, model runtime 83.930s, pg runtime 77.369s, speedup 0.922x
19, opt runtime 52.382s, model runtime 161.008s, pg runtime 82.710s, speedup 0.514x
20, opt runtime 52.135s, model runtime 137.176s, pg runtime 102.039s, speedup 0.744x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 359.909s, pg runtime 602.586s, speedup 1.674x
32, opt runtime 16.542s, model runtime 339.860s, pg runtime 461.957s, speedup 1.359x
33, opt runtime 16.136s, model runtime 338.732s, pg runtime 410.283s, speedup 1.211x
34, opt runtime 14.422s, model runtime 344.192s, pg runtime 497.542s, speedup 1.446x
35, opt runtime 15.980s, model runtime 338.670s, pg runtime 504.239s, speedup 1.489x
36, opt runtime 16.482s, model runtime 353.788s, pg runtime 622.915s, speedup 1.761x
37, opt runtime 16.301s, model runtime 349.420s, pg runtime 646.719s, speedup 1.851x
38, opt runtime 16.194s, model runtime 347.772s, pg runtime 439.255s, speedup 1.263x
39, opt runtime 16.149s, model runtime 348.583s, pg runtime 423.122s, speedup 1.214x
40, opt runtime 13.751s, model runtime 345.840s, pg runtime 434.625s, speedup 1.257x
====================
JOB best validation speedup epoch: 10, train speedup 1.793, test speedup 2.252, val speedup 1.492
TPCH best validation speedup epoch: 10, train speedup 1.793, test speedup 2.214, val speedup 1.492
TPCH Skew best validation speedup epoch: 10, train speedup 1.793, test speedup 2.130, val speedup 1.492
execution cost 0:15:12.957920
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.373002, and there are 26041 training samples
in channel 9
JOB test speedup 0.9052357682214425
TPCH test speedup 2.5280725300233615
TPCH skew test speedup 2.491817333804585
Epoch 0/50 |loss: 0.375113| train set 1.659x speedup, test set 2.492x speedup, val set 0.375x speedup, step: 1, train time 18.09 s
JOB test speedup 1.117054822993275
TPCH test speedup 2.532123252718241
TPCH skew test speedup 2.474385761412128
Epoch 1/50 |loss: 0.295620| train set 1.768x speedup, test set 2.474x speedup, val set 0.364x speedup, step: 2, train time 17.08 s
JOB test speedup 0.9187107117232904
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 2/50 |loss: 0.265905| train set 1.737x speedup, test set 2.300x speedup, val set 0.515x speedup, step: 1, train time 16.89 s
JOB test speedup 0.9035505990580975
TPCH test speedup 2.562639375435389
TPCH skew test speedup 2.173901857247425
Epoch 3/50 |loss: 0.249862| train set 1.706x speedup, test set 2.174x speedup, val set 0.515x speedup, step: 2, train time 17.08 s
JOB test speedup 0.8979232895056728
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 4/50 |loss: 0.235159| train set 1.786x speedup, test set 2.300x speedup, val set 0.515x speedup, step: 3, train time 16.99 s
JOB test speedup 1.4334974119529316
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 5/50 |loss: 0.226002| train set 1.783x speedup, test set 2.310x speedup, val set 1.492x speedup, step: 1, train time 16.80 s
JOB test speedup 1.4047181418638015
TPCH test speedup 2.51050226999699
TPCH skew test speedup 2.5030621095008483
Epoch 6/50 |loss: 0.215052| train set 1.786x speedup, test set 2.503x speedup, val set 0.512x speedup, step: 2, train time 17.08 s
JOB test speedup 0.9345104450256502
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 7/50 |loss: 0.208035| train set 1.743x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 3, train time 17.20 s
JOB test speedup 1.5128467481683485
TPCH test speedup 5.667702103543765
TPCH skew test speedup 5.364450798040867
Epoch 8/50 |loss: 0.199187| train set 1.795x speedup, test set 5.364x speedup, val set 1.492x speedup, step: 1, train time 17.07 s
JOB test speedup 1.4713238275836693
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 9/50 |loss: 0.194638| train set 1.790x speedup, test set 2.310x speedup, val set 0.515x speedup, step: 2, train time 17.00 s
JOB test speedup 2.2018545163093126
TPCH test speedup 5.554424646763744
TPCH skew test speedup 5.364450798040867
Epoch 10/50 |loss: 0.186965| train set 1.796x speedup, test set 5.364x speedup, val set 0.515x speedup, step: 3, train time 17.07 s
JOB test speedup 1.5781154251966985
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 11/50 |loss: 0.183238| train set 1.686x speedup, test set 2.310x speedup, val set 0.515x speedup, step: 4, train time 17.09 s
JOB test speedup 1.13410468761487
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 12/50 |loss: 0.181459| train set 1.773x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 5, train time 17.13 s
JOB test speedup 1.4708830881825208
TPCH test speedup 4.291673447618084
TPCH skew test speedup 4.128046231222904
Epoch 13/50 |loss: 0.177493| train set 1.762x speedup, test set 4.128x speedup, val set 0.515x speedup, step: 6, train time 17.04 s
JOB test speedup 1.4507156078709798
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 14/50 |loss: 0.175047| train set 1.778x speedup, test set 2.310x speedup, val set 0.515x speedup, step: 7, train time 17.08 s
JOB test speedup 1.5785178049017219
TPCH test speedup 5.073172480128221
TPCH skew test speedup 4.804303612783904
Epoch 15/50 |loss: 0.170565| train set 1.798x speedup, test set 4.804x speedup, val set 0.515x speedup, step: 8, train time 17.01 s
JOB test speedup 1.4630280630326828
TPCH test speedup 2.132842699572543
TPCH skew test speedup 2.0950196128864844
Epoch 16/50 |loss: 0.171332| train set 1.764x speedup, test set 2.095x speedup, val set 0.512x speedup, step: 9, train time 17.20 s
JOB test speedup 1.4519555511532776
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.233971416495877
Epoch 17/50 |loss: 0.163964| train set 1.790x speedup, test set 2.234x speedup, val set 0.515x speedup, step: 10, train time 17.27 s
JOB test speedup 0.9059474307021782
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 18/50 |loss: 0.161783| train set 1.796x speedup, test set 2.046x speedup, val set 1.492x speedup, step: 11, train time 17.27 s
JOB test speedup 1.424115362674711
TPCH test speedup 2.1468785010101428
TPCH skew test speedup 2.071058997097277
Epoch 19/50 |loss: 0.161035| train set 1.782x speedup, test set 2.071x speedup, val set 0.515x speedup, step: 12, train time 17.27 s
JOB test speedup 0.929552373389085
TPCH test speedup 2.1022255459575296
TPCH skew test speedup 2.045891742032457
Epoch 20/50 |loss: 0.158712| train set 1.758x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 13, train time 17.19 s
JOB test speedup 1.5626469459915853
TPCH test speedup 2.158598565512259
TPCH skew test speedup 2.079391165928911
Epoch 21/50 |loss: 0.154592| train set 1.796x speedup, test set 2.079x speedup, val set 0.515x speedup, step: 14, train time 17.20 s
JOB test speedup 1.4524564069685175
TPCH test speedup 3.9418761131929765
TPCH skew test speedup 3.788170240341355
Epoch 22/50 |loss: 0.155714| train set 1.781x speedup, test set 3.788x speedup, val set 1.492x speedup, step: 15, train time 17.19 s
JOB test speedup 1.1388808806604998
TPCH test speedup 4.282774436514494
TPCH skew test speedup 4.227085002774161
Epoch 23/50 |loss: 0.150176| train set 1.799x speedup, test set 4.227x speedup, val set 0.515x speedup, step: 16, train time 17.02 s
JOB test speedup 1.4201789444893427
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 24/50 |loss: 0.149334| train set 1.779x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 17, train time 17.00 s
JOB test speedup 1.1318420630718216
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 25/50 |loss: 0.149256| train set 1.800x speedup, test set 4.471x speedup, val set 1.492x speedup, step: 1, train time 17.17 s
JOB test speedup 1.4460114351253759
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 26/50 |loss: 0.148372| train set 1.800x speedup, test set 4.075x speedup, val set 1.492x speedup, step: 2, train time 17.19 s
JOB test speedup 2.1056397280780357
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 27/50 |loss: 0.145335| train set 1.802x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 3, train time 17.30 s
JOB test speedup 1.9235827548256899
TPCH test speedup 4.322535057891434
TPCH skew test speedup 4.128046231222904
Epoch 28/50 |loss: 0.143102| train set 1.796x speedup, test set 4.128x speedup, val set 0.515x speedup, step: 4, train time 17.18 s
JOB test speedup 1.928571095599076
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 29/50 |loss: 0.139628| train set 1.800x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 5, train time 17.09 s
JOB test speedup 1.4659267634242477
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 30/50 |loss: 0.141981| train set 1.685x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 6, train time 17.28 s
JOB test speedup 1.447204134152236
TPCH test speedup 2.1415602818686748
TPCH skew test speedup 2.079391165928911
Epoch 31/50 |loss: 0.138608| train set 1.799x speedup, test set 2.079x speedup, val set 0.515x speedup, step: 7, train time 17.36 s
JOB test speedup 1.4722561635849836
TPCH test speedup 2.1415602818686748
TPCH skew test speedup 2.079391165928911
Epoch 32/50 |loss: 0.139750| train set 1.780x speedup, test set 2.079x speedup, val set 0.515x speedup, step: 8, train time 17.19 s
JOB test speedup 1.505436560856333
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1034570214219523
Epoch 33/50 |loss: 0.136942| train set 1.781x speedup, test set 2.103x speedup, val set 0.515x speedup, step: 9, train time 17.18 s
JOB test speedup 1.1177806709338074
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 34/50 |loss: 0.138178| train set 1.801x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 10, train time 17.16 s
JOB test speedup 0.9192749181627069
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 35/50 |loss: 0.134755| train set 1.798x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 11, train time 17.18 s
JOB test speedup 1.409376287141096
TPCH test speedup 2.249652692057737
TPCH skew test speedup 2.1792640528377936
Epoch 36/50 |loss: 0.131460| train set 1.781x speedup, test set 2.179x speedup, val set 0.515x speedup, step: 12, train time 17.36 s
JOB test speedup 1.5031010673101297
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 37/50 |loss: 0.130795| train set 1.799x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 13, train time 17.17 s
JOB test speedup 2.0224966083222777
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 38/50 |loss: 0.129876| train set 1.776x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 14, train time 17.23 s
JOB test speedup 0.9320793038138084
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.045891742032457
Epoch 39/50 |loss: 0.132508| train set 1.766x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 15, train time 17.28 s
JOB test speedup 0.9360944285746063
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 40/50 |loss: 0.131187| train set 1.802x speedup, test set 2.127x speedup, val set 1.492x speedup, step: 1, train time 17.02 s
JOB test speedup 1.4941507067098243
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 41/50 |loss: 0.126966| train set 1.781x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 2, train time 16.97 s
JOB test speedup 0.9133321034585821
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 42/50 |loss: 0.128772| train set 1.798x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 3, train time 17.21 s
JOB test speedup 1.1334937900073916
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.045891742032457
Epoch 43/50 |loss: 0.126221| train set 1.799x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 4, train time 17.13 s
JOB test speedup 1.0956549957815456
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 44/50 |loss: 0.126691| train set 1.801x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 5, train time 17.09 s
JOB test speedup 0.9105566546273954
TPCH test speedup 2.21382881007082
TPCH skew test speedup 2.144586749162988
Epoch 45/50 |loss: 0.125709| train set 1.749x speedup, test set 2.145x speedup, val set 0.515x speedup, step: 6, train time 17.26 s
JOB test speedup 1.3804128104393953
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 46/50 |loss: 0.127453| train set 1.800x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 7, train time 17.19 s
JOB test speedup 1.1061509742523694
TPCH test speedup 2.1415602818686748
TPCH skew test speedup 2.1034570214219523
Epoch 47/50 |loss: 0.123599| train set 1.801x speedup, test set 2.103x speedup, val set 0.515x speedup, step: 8, train time 17.18 s
JOB test speedup 1.1092662454015192
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 48/50 |loss: 0.121951| train set 1.798x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 9, train time 17.31 s
JOB test speedup 1.123560591339341
TPCH test speedup 2.1679443799180516
TPCH skew test speedup 2.1176124094757207
Epoch 49/50 |loss: 0.122985| train set 1.800x speedup, test set 2.118x speedup, val set 0.515x speedup, step: 10, train time 16.98 s
Training per epoch cost 17.160 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
10, opt runtime 3.248s, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 51.645s, pg runtime 13.945s, speedup 0.270x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
13, opt runtime 53.440s, model runtime 136.731s, pg runtime 140.742s, speedup 1.029x
14, opt runtime 47.812s, model runtime 139.115s, pg runtime 83.069s, speedup 0.597x
15, opt runtime 47.518s, model runtime 133.905s, pg runtime 75.736s, speedup 0.566x
16, opt runtime 48.067s, model runtime 135.202s, pg runtime 81.014s, speedup 0.599x
17, opt runtime 47.738s, model runtime 135.818s, pg runtime 76.021s, speedup 0.560x
18, opt runtime 47.804s, model runtime 136.805s, pg runtime 81.177s, speedup 0.593x
19, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
20, opt runtime 51.276s, model runtime 134.457s, pg runtime 79.222s, speedup 0.589x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 341.320s, pg runtime 432.766s, speedup 1.268x
32, opt runtime 15.120s, model runtime 353.483s, pg runtime 566.078s, speedup 1.601x
33, opt runtime 16.639s, model runtime 353.418s, pg runtime 462.544s, speedup 1.309x
34, opt runtime 16.280s, model runtime 367.037s, pg runtime 634.990s, speedup 1.730x
35, opt runtime 16.528s, model runtime 354.584s, pg runtime 620.762s, speedup 1.751x
36, opt runtime 18.690s, model runtime 355.233s, pg runtime 651.942s, speedup 1.835x
37, opt runtime 16.438s, model runtime 352.471s, pg runtime 546.887s, speedup 1.552x
38, opt runtime 16.138s, model runtime 345.514s, pg runtime 501.793s, speedup 1.452x
39, opt runtime 16.770s, model runtime 344.251s, pg runtime 594.754s, speedup 1.728x
40, opt runtime 16.305s, model runtime 343.002s, pg runtime 436.168s, speedup 1.272x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 140.245s, pg runtime 80.711s, speedup 0.575x
12, opt runtime 53.203s, model runtime 135.711s, pg runtime 79.156s, speedup 0.583x
13, opt runtime 51.456s, model runtime 132.632s, pg runtime 93.781s, speedup 0.707x
14, opt runtime 54.696s, model runtime 141.455s, pg runtime 98.172s, speedup 0.694x
15, opt runtime 51.200s, model runtime 137.865s, pg runtime 77.674s, speedup 0.563x
16, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
17, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
18, opt runtime 48.088s, model runtime 135.391s, pg runtime 77.369s, speedup 0.571x
19, opt runtime 52.382s, model runtime 146.665s, pg runtime 82.710s, speedup 0.564x
20, opt runtime 52.135s, model runtime 137.176s, pg runtime 102.039s, speedup 0.744x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 359.909s, pg runtime 602.586s, speedup 1.674x
32, opt runtime 16.542s, model runtime 339.860s, pg runtime 461.957s, speedup 1.359x
33, opt runtime 16.136s, model runtime 338.732s, pg runtime 410.283s, speedup 1.211x
34, opt runtime 14.422s, model runtime 344.192s, pg runtime 497.542s, speedup 1.446x
35, opt runtime 15.980s, model runtime 338.670s, pg runtime 504.239s, speedup 1.489x
36, opt runtime 16.482s, model runtime 353.788s, pg runtime 622.915s, speedup 1.761x
37, opt runtime 16.301s, model runtime 349.420s, pg runtime 646.719s, speedup 1.851x
38, opt runtime 16.194s, model runtime 347.772s, pg runtime 439.255s, speedup 1.263x
39, opt runtime 16.149s, model runtime 348.583s, pg runtime 423.122s, speedup 1.214x
40, opt runtime 13.751s, model runtime 345.840s, pg runtime 434.625s, speedup 1.257x
====================
JOB best validation speedup epoch: 40, train speedup 1.802, test speedup 0.936, val speedup 1.492
TPCH best validation speedup epoch: 40, train speedup 1.802, test speedup 2.177, val speedup 1.492
TPCH Skew best validation speedup epoch: 40, train speedup 1.802, test speedup 2.127, val speedup 1.492
execution cost 0:15:18.560522
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.292744, and there are 26041 training samples
in channel 9
JOB test speedup 0.9072541800093104
TPCH test speedup 5.903149777237632
TPCH skew test speedup 5.7239040155619865
Epoch 0/50 |loss: 0.374806| train set 1.599x speedup, test set 5.724x speedup, val set 0.399x speedup, step: 1, train time 17.91 s
JOB test speedup 1.971187046848708
TPCH test speedup 6.700821430239476
TPCH skew test speedup 6.516214602098856
Epoch 1/50 |loss: 0.297300| train set 1.782x speedup, test set 6.516x speedup, val set 0.515x speedup, step: 1, train time 16.48 s
JOB test speedup 1.951749704992628
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 2/50 |loss: 0.267299| train set 1.739x speedup, test set 2.300x speedup, val set 0.515x speedup, step: 1, train time 16.29 s
JOB test speedup 1.4749607539613014
TPCH test speedup 2.5280725300233615
TPCH skew test speedup 2.4868772094303204
Epoch 3/50 |loss: 0.251686| train set 1.709x speedup, test set 2.487x speedup, val set 0.515x speedup, step: 2, train time 16.28 s
JOB test speedup 2.0078031489195127
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 4/50 |loss: 0.236789| train set 1.761x speedup, test set 2.300x speedup, val set 0.512x speedup, step: 3, train time 16.31 s
JOB test speedup 1.4954656697740585
TPCH test speedup 6.7238588746882915
TPCH skew test speedup 6.537161359481754
Epoch 5/50 |loss: 0.228108| train set 1.758x speedup, test set 6.537x speedup, val set 0.515x speedup, step: 4, train time 16.40 s
JOB test speedup 1.7654015827909544
TPCH test speedup 2.2117568605944355
TPCH skew test speedup 2.1874825568489755
Epoch 6/50 |loss: 0.216926| train set 1.771x speedup, test set 2.187x speedup, val set 0.512x speedup, step: 5, train time 16.57 s
JOB test speedup 0.8982986162910044
TPCH test speedup 1.9263353812319546
TPCH skew test speedup 2.045891742032457
Epoch 7/50 |loss: 0.209276| train set 1.793x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 6, train time 16.42 s
JOB test speedup 1.4786038288242265
TPCH test speedup 4.871036560746036
TPCH skew test speedup 4.789167173667022
Epoch 8/50 |loss: 0.201016| train set 1.699x speedup, test set 4.789x speedup, val set 1.492x speedup, step: 1, train time 16.42 s
JOB test speedup 1.4791882033379342
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 9/50 |loss: 0.195291| train set 1.791x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 2, train time 16.49 s
JOB test speedup 2.1508903504841803
TPCH test speedup 2.132842699572543
TPCH skew test speedup 2.0713334842175164
Epoch 10/50 |loss: 0.187491| train set 1.672x speedup, test set 2.071x speedup, val set 0.512x speedup, step: 3, train time 16.50 s
JOB test speedup 1.510578724031749
TPCH test speedup 2.4768669392601703
TPCH skew test speedup 2.369292402862133
Epoch 11/50 |loss: 0.183978| train set 1.773x speedup, test set 2.369x speedup, val set 0.515x speedup, step: 4, train time 16.59 s
JOB test speedup 1.9506844584131908
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 12/50 |loss: 0.182105| train set 1.774x speedup, test set 2.046x speedup, val set 0.438x speedup, step: 5, train time 16.71 s
JOB test speedup 1.4920985934026998
TPCH test speedup 4.871036560746036
TPCH skew test speedup 4.789167173667022
Epoch 13/50 |loss: 0.178955| train set 1.797x speedup, test set 4.789x speedup, val set 1.469x speedup, step: 6, train time 16.60 s
JOB test speedup 1.4879050487153993
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 14/50 |loss: 0.174931| train set 1.793x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 7, train time 16.59 s
JOB test speedup 1.4871223286872712
TPCH test speedup 4.322535057891434
TPCH skew test speedup 4.128046231222904
Epoch 15/50 |loss: 0.171492| train set 1.797x speedup, test set 4.128x speedup, val set 0.512x speedup, step: 8, train time 16.78 s
JOB test speedup 1.4223331780120734
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 16/50 |loss: 0.170254| train set 1.796x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 9, train time 16.70 s
JOB test speedup 1.5376349315840583
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 17/50 |loss: 0.165037| train set 1.772x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 10, train time 16.57 s
JOB test speedup 1.4767096090073881
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 18/50 |loss: 0.161713| train set 1.795x speedup, test set 2.046x speedup, val set 0.513x speedup, step: 11, train time 16.61 s
JOB test speedup 1.4887951714530765
TPCH test speedup 2.3177652104417876
TPCH skew test speedup 2.195352475109108
Epoch 19/50 |loss: 0.161670| train set 1.779x speedup, test set 2.195x speedup, val set 0.438x speedup, step: 12, train time 16.60 s
JOB test speedup 1.4784711363256018
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 20/50 |loss: 0.158642| train set 1.764x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 13, train time 16.70 s
JOB test speedup 1.5376349315840583
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 21/50 |loss: 0.156835| train set 1.801x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 14, train time 16.87 s
JOB test speedup 1.4826472143684823
TPCH test speedup 2.1982188325885033
TPCH skew test speedup 2.071058997097277
Epoch 22/50 |loss: 0.156957| train set 1.779x speedup, test set 2.071x speedup, val set 1.000x speedup, step: 15, train time 16.89 s
JOB test speedup 0.9283679424610786
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 23/50 |loss: 0.153652| train set 1.799x speedup, test set 2.046x speedup, val set 0.440x speedup, step: 16, train time 16.69 s
JOB test speedup 1.4283151358263555
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 24/50 |loss: 0.149917| train set 1.777x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 17, train time 16.69 s
JOB test speedup 0.923221235952329
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.233971416495877
Epoch 25/50 |loss: 0.151219| train set 1.779x speedup, test set 2.234x speedup, val set 1.427x speedup, step: 18, train time 16.90 s
JOB test speedup 1.4692560527607486
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 26/50 |loss: 0.148383| train set 1.800x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 19, train time 16.77 s
JOB test speedup 1.476873189973643
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.045891742032457
Epoch 27/50 |loss: 0.147400| train set 1.802x speedup, test set 2.046x speedup, val set 0.438x speedup, step: 20, train time 16.87 s
JOB test speedup 1.5351985471472898
TPCH test speedup 4.449513954706877
TPCH skew test speedup 4.128046231222904
Epoch 28/50 |loss: 0.146441| train set 1.795x speedup, test set 4.128x speedup, val set 0.515x speedup, step: 21, train time 16.88 s
JOB test speedup 1.5376349315840583
TPCH test speedup 2.1054497054696255
TPCH skew test speedup 2.045891742032457
Epoch 29/50 |loss: 0.142085| train set 1.801x speedup, test set 2.046x speedup, val set 0.438x speedup, step: 22, train time 17.08 s
JOB test speedup 1.490144819838288
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 30/50 |loss: 0.142985| train set 1.801x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 23, train time 16.77 s
JOB test speedup 1.4491659775197658
TPCH test speedup 2.158598565512259
TPCH skew test speedup 2.0549453654438206
Epoch 31/50 |loss: 0.140849| train set 1.801x speedup, test set 2.055x speedup, val set 0.515x speedup, step: 24, train time 17.01 s
JOB test speedup 1.540247378228557
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.045891742032457
Epoch 32/50 |loss: 0.141161| train set 1.781x speedup, test set 2.046x speedup, val set 1.000x speedup, step: 25, train time 16.71 s
JOB test speedup 1.462848406129686
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 33/50 |loss: 0.139073| train set 1.799x speedup, test set 2.046x speedup, val set 0.438x speedup, step: 26, train time 17.01 s
JOB test speedup 1.537841728549817
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 34/50 |loss: 0.140488| train set 1.800x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 27, train time 17.08 s
JOB test speedup 0.9145434015984719
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.045891742032457
Epoch 35/50 |loss: 0.136553| train set 1.799x speedup, test set 2.046x speedup, val set 0.440x speedup, step: 28, train time 17.01 s
JOB test speedup 1.4799227528852055
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 36/50 |loss: 0.132882| train set 1.781x speedup, test set 2.046x speedup, val set 0.440x speedup, step: 29, train time 17.47 s
JOB test speedup 1.5143045839596196
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 37/50 |loss: 0.135587| train set 1.799x speedup, test set 2.046x speedup, val set 1.000x speedup, step: 30, train time 16.90 s
JOB test speedup 1.4692560527607486
TPCH test speedup 2.1022255459575296
TPCH skew test speedup 2.045891742032457
Epoch 38/50 |loss: 0.134354| train set 1.776x speedup, test set 2.046x speedup, val set 0.438x speedup, step: 31, train time 17.09 s
JOB test speedup 1.4343230307367143
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 39/50 |loss: 0.134981| train set 1.767x speedup, test set 2.046x speedup, val set 0.438x speedup, step: 32, train time 16.89 s
JOB test speedup 0.9200392272573655
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 40/50 |loss: 0.132804| train set 1.801x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 33, train time 16.88 s
JOB test speedup 1.4670313862190745
TPCH test speedup 2.1052371480212946
TPCH skew test speedup 1.8232575392452344
Epoch 41/50 |loss: 0.129871| train set 1.779x speedup, test set 1.823x speedup, val set 0.440x speedup, step: 34, train time 17.18 s
JOB test speedup 1.4692560527607486
TPCH test speedup 3.785469257508429
TPCH skew test speedup 3.646560037733149
Epoch 42/50 |loss: 0.130499| train set 1.800x speedup, test set 3.647x speedup, val set 0.797x speedup, step: 35, train time 16.79 s
JOB test speedup 0.9324939028838418
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 43/50 |loss: 0.128523| train set 1.799x speedup, test set 2.127x speedup, val set 0.440x speedup, step: 36, train time 17.08 s
JOB test speedup 1.477450106462973
TPCH test speedup 2.2705220743043224
TPCH skew test speedup 2.198637070944153
Epoch 44/50 |loss: 0.128971| train set 1.800x speedup, test set 2.199x speedup, val set 0.440x speedup, step: 37, train time 17.00 s
JOB test speedup 0.9177181033409096
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.0713334842175164
Epoch 45/50 |loss: 0.128985| train set 1.781x speedup, test set 2.071x speedup, val set 0.440x speedup, step: 38, train time 16.82 s
JOB test speedup 1.477570382413866
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 46/50 |loss: 0.128422| train set 1.782x speedup, test set 2.046x speedup, val set 0.438x speedup, step: 39, train time 16.99 s
JOB test speedup 1.5141929558872966
TPCH test speedup 2.172418619884508
TPCH skew test speedup 1.8795559621556446
Epoch 47/50 |loss: 0.128906| train set 1.801x speedup, test set 1.880x speedup, val set 0.440x speedup, step: 40, train time 16.90 s
JOB test speedup 1.516861495278541
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 48/50 |loss: 0.124196| train set 1.802x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 41, train time 17.09 s
JOB test speedup 1.5143045839596196
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 49/50 |loss: 0.126054| train set 1.800x speedup, test set 4.471x speedup, val set 0.440x speedup, step: 42, train time 16.79 s
Training per epoch cost 16.792 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 2.323s, pg runtime 1.386s, speedup 0.597x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 6.057s, pg runtime 5.879s, speedup 0.971x
08, opt runtime 1.737s, model runtime 6.128s, pg runtime 5.994s, speedup 0.978x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 4.443s, model runtime 50.837s, pg runtime 13.945s, speedup 0.274x
13, opt runtime 5.179s, model runtime 10.240s, pg runtime 10.685s, speedup 1.043x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.238s, pg runtime 8.605s, speedup 1.045x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 56.876s, pg runtime 91.784s, speedup 1.614x
02, opt runtime 29.763s, model runtime 55.506s, pg runtime 91.648s, speedup 1.651x
03, opt runtime 30.267s, model runtime 57.401s, pg runtime 100.885s, speedup 1.758x
04, opt runtime 29.286s, model runtime 58.701s, pg runtime 92.131s, speedup 1.569x
05, opt runtime 29.269s, model runtime 57.330s, pg runtime 91.296s, speedup 1.592x
06, opt runtime 29.502s, model runtime 60.311s, pg runtime 112.305s, speedup 1.862x
07, opt runtime 27.886s, model runtime 58.497s, pg runtime 97.629s, speedup 1.669x
08, opt runtime 30.705s, model runtime 56.560s, pg runtime 89.698s, speedup 1.586x
09, opt runtime 27.651s, model runtime 58.506s, pg runtime 91.255s, speedup 1.560x
10, opt runtime 33.637s, model runtime 57.182s, pg runtime 90.618s, speedup 1.585x
11, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
12, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
13, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
14, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
15, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
16, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
17, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
18, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
19, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
20, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
02, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
03, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
04, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
05, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
06, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
07, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
08, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
09, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
10, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
11, opt runtime 53.915s, model runtime 167.703s, pg runtime 80.711s, speedup 0.481x
12, opt runtime 53.203s, model runtime 163.373s, pg runtime 79.156s, speedup 0.485x
13, opt runtime 51.456s, model runtime 157.240s, pg runtime 93.781s, speedup 0.596x
14, opt runtime 54.696s, model runtime 167.507s, pg runtime 98.172s, speedup 0.586x
15, opt runtime 51.200s, model runtime 163.049s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 152.849s, pg runtime 80.007s, speedup 0.523x
17, opt runtime 54.335s, model runtime 159.237s, pg runtime 95.799s, speedup 0.602x
18, opt runtime 48.088s, model runtime 162.057s, pg runtime 77.369s, speedup 0.477x
19, opt runtime 52.382s, model runtime 161.008s, pg runtime 82.710s, speedup 0.514x
20, opt runtime 52.135s, model runtime 165.502s, pg runtime 102.039s, speedup 0.617x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 23.924s, pg runtime 602.586s, speedup 25.187x
32, opt runtime 16.542s, model runtime 21.754s, pg runtime 461.957s, speedup 21.235x
33, opt runtime 16.136s, model runtime 21.514s, pg runtime 410.283s, speedup 19.070x
34, opt runtime 14.422s, model runtime 21.896s, pg runtime 497.542s, speedup 22.723x
35, opt runtime 15.980s, model runtime 21.470s, pg runtime 504.239s, speedup 23.486x
36, opt runtime 16.482s, model runtime 25.428s, pg runtime 622.915s, speedup 24.497x
37, opt runtime 16.301s, model runtime 22.800s, pg runtime 646.719s, speedup 28.365x
38, opt runtime 16.194s, model runtime 21.815s, pg runtime 439.255s, speedup 20.136x
39, opt runtime 16.149s, model runtime 21.405s, pg runtime 423.122s, speedup 19.768x
40, opt runtime 13.751s, model runtime 21.917s, pg runtime 434.625s, speedup 19.831x
====================
JOB best validation speedup epoch: 8, train speedup 1.699, test speedup 1.479, val speedup 1.492
TPCH best validation speedup epoch: 8, train speedup 1.699, test speedup 4.871, val speedup 1.492
TPCH Skew best validation speedup epoch: 8, train speedup 1.699, test speedup 4.789, val speedup 1.492
execution cost 0:14:57.199926
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.294144, and there are 26041 training samples
in channel 9
JOB test speedup 0.907662776252682
TPCH test speedup 2.5376505668295644
TPCH skew test speedup 2.167558383892869
Epoch 0/50 |loss: 0.374513| train set 1.531x speedup, test set 2.168x speedup, val set 0.515x speedup, step: 1, train time 17.63 s
JOB test speedup 1.1070115792101238
TPCH test speedup 2.5376505668295644
TPCH skew test speedup 2.167558383892869
Epoch 1/50 |loss: 0.295415| train set 1.745x speedup, test set 2.168x speedup, val set 0.516x speedup, step: 1, train time 16.61 s
JOB test speedup 1.102654042328648
TPCH test speedup 2.3709069878144224
TPCH skew test speedup 2.021062031109837
Epoch 2/50 |loss: 0.266913| train set 1.639x speedup, test set 2.021x speedup, val set 0.515x speedup, step: 2, train time 16.47 s
JOB test speedup 0.9031228972112811
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 3/50 |loss: 0.250919| train set 1.708x speedup, test set 2.300x speedup, val set 0.515x speedup, step: 3, train time 16.31 s
JOB test speedup 1.1129482318629647
TPCH test speedup 2.320737413746396
TPCH skew test speedup 2.2707850180898994
Epoch 4/50 |loss: 0.233768| train set 1.785x speedup, test set 2.271x speedup, val set 1.470x speedup, step: 1, train time 16.49 s
JOB test speedup 1.457670970418542
TPCH test speedup 2.21382881007082
TPCH skew test speedup 2.1792640528377936
Epoch 5/50 |loss: 0.227085| train set 1.793x speedup, test set 2.179x speedup, val set 0.515x speedup, step: 2, train time 16.57 s
JOB test speedup 1.3535639214548265
TPCH test speedup 1.5567620169271636
TPCH skew test speedup 1.5273189241536667
Epoch 6/50 |loss: 0.213794| train set 1.789x speedup, test set 1.527x speedup, val set 0.512x speedup, step: 3, train time 16.40 s
JOB test speedup 0.9203747618216199
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 7/50 |loss: 0.206910| train set 1.792x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 4, train time 16.68 s
JOB test speedup 2.5920881372842155
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 8/50 |loss: 0.198944| train set 1.778x speedup, test set 2.310x speedup, val set 1.483x speedup, step: 1, train time 16.38 s
JOB test speedup 1.4624848996776405
TPCH test speedup 1.4800914112491816
TPCH skew test speedup 1.4451007153423097
Epoch 9/50 |loss: 0.194360| train set 1.756x speedup, test set 1.445x speedup, val set 0.512x speedup, step: 2, train time 16.57 s
JOB test speedup 2.166109622595174
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 10/50 |loss: 0.188131| train set 1.794x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 3, train time 16.50 s
JOB test speedup 2.0974931915406754
TPCH test speedup 2.356393836875425
TPCH skew test speedup 2.3097278570640705
Epoch 11/50 |loss: 0.184615| train set 1.792x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 4, train time 16.52 s
JOB test speedup 1.112609654922079
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 12/50 |loss: 0.180807| train set 1.775x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 5, train time 16.59 s
JOB test speedup 1.0558605329066897
TPCH test speedup 1.4800914112491816
TPCH skew test speedup 1.4451007153423097
Epoch 13/50 |loss: 0.178511| train set 1.778x speedup, test set 1.445x speedup, val set 0.515x speedup, step: 6, train time 16.70 s
JOB test speedup 0.920629968232483
TPCH test speedup 2.21382881007082
TPCH skew test speedup 2.1792640528377936
Epoch 14/50 |loss: 0.174211| train set 1.800x speedup, test set 2.179x speedup, val set 0.512x speedup, step: 7, train time 16.52 s
JOB test speedup 2.3079795977698216
TPCH test speedup 4.822403375680847
TPCH skew test speedup 4.5506001614016505
Epoch 15/50 |loss: 0.172349| train set 1.797x speedup, test set 4.551x speedup, val set 0.512x speedup, step: 8, train time 16.70 s
JOB test speedup 2.0560659556192538
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.3097278570640705
Epoch 16/50 |loss: 0.171116| train set 1.767x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 9, train time 16.51 s
JOB test speedup 1.0574853864963858
TPCH test speedup 2.21382881007082
TPCH skew test speedup 2.144586749162988
Epoch 17/50 |loss: 0.166312| train set 1.763x speedup, test set 2.145x speedup, val set 0.512x speedup, step: 10, train time 16.76 s
JOB test speedup 2.0611530612292377
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.2524942355337605
Epoch 18/50 |loss: 0.163896| train set 1.798x speedup, test set 2.252x speedup, val set 0.512x speedup, step: 11, train time 16.59 s
JOB test speedup 1.9772385811421613
TPCH test speedup 3.193336631393018
TPCH skew test speedup 2.6885876289567303
Epoch 19/50 |loss: 0.163152| train set 1.782x speedup, test set 2.689x speedup, val set 0.513x speedup, step: 12, train time 16.51 s
JOB test speedup 1.0842626683962182
TPCH test speedup 1.4800914112491816
TPCH skew test speedup 1.4451007153423097
Epoch 20/50 |loss: 0.160277| train set 1.761x speedup, test set 1.445x speedup, val set 0.513x speedup, step: 13, train time 16.70 s
JOB test speedup 2.185651434287963
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 21/50 |loss: 0.158360| train set 1.799x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 14, train time 16.78 s
JOB test speedup 1.1238103959729586
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 22/50 |loss: 0.156229| train set 1.779x speedup, test set 2.310x speedup, val set 1.469x speedup, step: 15, train time 16.62 s
JOB test speedup 1.140198208041359
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 23/50 |loss: 0.152807| train set 1.795x speedup, test set 4.471x speedup, val set 0.515x speedup, step: 16, train time 16.77 s
JOB test speedup 1.4855782222438112
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 24/50 |loss: 0.151477| train set 1.790x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 17, train time 16.78 s
JOB test speedup 1.1495392917871703
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.2524942355337605
Epoch 25/50 |loss: 0.151002| train set 1.799x speedup, test set 2.252x speedup, val set 0.514x speedup, step: 18, train time 16.62 s
JOB test speedup 1.4263828926974067
TPCH test speedup 1.13910356566258
TPCH skew test speedup 1.099253079854066
Epoch 26/50 |loss: 0.150386| train set 1.796x speedup, test set 1.099x speedup, val set 0.512x speedup, step: 19, train time 16.79 s
JOB test speedup 2.0497960005252964
TPCH test speedup 5.099784604554435
TPCH skew test speedup 4.97279299448149
Epoch 27/50 |loss: 0.148679| train set 1.782x speedup, test set 4.973x speedup, val set 0.515x speedup, step: 20, train time 16.80 s
JOB test speedup 1.5386784452395423
TPCH test speedup 5.664971360670266
TPCH skew test speedup 5.350165517427882
Epoch 28/50 |loss: 0.145257| train set 1.794x speedup, test set 5.350x speedup, val set 0.515x speedup, step: 21, train time 16.78 s
JOB test speedup 2.1010383585247134
TPCH test speedup 2.496666813678225
TPCH skew test speedup 3.5024307615092445
Epoch 29/50 |loss: 0.144016| train set 1.796x speedup, test set 3.502x speedup, val set 0.512x speedup, step: 22, train time 17.12 s
JOB test speedup 1.476824367436319
TPCH test speedup 1.4800914112491816
TPCH skew test speedup 1.4451007153423097
Epoch 30/50 |loss: 0.143432| train set 1.767x speedup, test set 1.445x speedup, val set 0.512x speedup, step: 23, train time 17.36 s
JOB test speedup 1.5004827133789678
TPCH test speedup 1.181093735104071
TPCH skew test speedup 1.1272187045517543
Epoch 31/50 |loss: 0.140690| train set 1.800x speedup, test set 1.127x speedup, val set 0.515x speedup, step: 24, train time 17.29 s
JOB test speedup 2.0938701651880613
TPCH test speedup 5.44173798946637
TPCH skew test speedup 5.364450798040867
Epoch 32/50 |loss: 0.140790| train set 1.782x speedup, test set 5.364x speedup, val set 0.512x speedup, step: 25, train time 17.27 s
JOB test speedup 1.4866525831898925
TPCH test speedup 5.426638710717213
TPCH skew test speedup 5.052930178332367
Epoch 33/50 |loss: 0.139664| train set 1.798x speedup, test set 5.053x speedup, val set 0.512x speedup, step: 26, train time 17.13 s
JOB test speedup 2.1220466616817695
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 34/50 |loss: 0.139550| train set 1.800x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 27, train time 17.28 s
JOB test speedup 0.912313134661994
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 35/50 |loss: 0.138330| train set 1.797x speedup, test set 4.461x speedup, val set 0.515x speedup, step: 28, train time 17.12 s
JOB test speedup 1.481010215974967
TPCH test speedup 4.810541723440621
TPCH skew test speedup 4.5404400413014745
Epoch 36/50 |loss: 0.134514| train set 1.773x speedup, test set 4.540x speedup, val set 0.515x speedup, step: 29, train time 17.17 s
JOB test speedup 2.1220466616817695
TPCH test speedup 5.426638710717213
TPCH skew test speedup 5.350337171004237
Epoch 37/50 |loss: 0.135373| train set 1.798x speedup, test set 5.350x speedup, val set 1.492x speedup, step: 1, train time 17.09 s
JOB test speedup 1.4671035399388483
TPCH test speedup 4.250781285668791
TPCH skew test speedup 4.128761659258103
Epoch 38/50 |loss: 0.133609| train set 1.798x speedup, test set 4.129x speedup, val set 0.512x speedup, step: 2, train time 17.19 s
JOB test speedup 1.4673818906916924
TPCH test speedup 5.426638710717213
TPCH skew test speedup 5.2528547189075345
Epoch 39/50 |loss: 0.134718| train set 1.747x speedup, test set 5.253x speedup, val set 0.515x speedup, step: 3, train time 17.30 s
JOB test speedup 0.9403864499222085
TPCH test speedup 1.13910356566258
TPCH skew test speedup 1.099253079854066
Epoch 40/50 |loss: 0.133656| train set 1.801x speedup, test set 1.099x speedup, val set 0.515x speedup, step: 4, train time 17.30 s
JOB test speedup 0.9129617061045696
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 41/50 |loss: 0.130432| train set 1.798x speedup, test set 4.461x speedup, val set 0.515x speedup, step: 5, train time 17.32 s
JOB test speedup 2.098770513954307
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 42/50 |loss: 0.130286| train set 1.798x speedup, test set 4.461x speedup, val set 0.515x speedup, step: 6, train time 17.05 s
JOB test speedup 1.0917000405956123
TPCH test speedup 1.4800914112491816
TPCH skew test speedup 1.4451007153423097
Epoch 43/50 |loss: 0.129655| train set 1.797x speedup, test set 1.445x speedup, val set 0.515x speedup, step: 7, train time 17.21 s
JOB test speedup 0.933135287168749
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 44/50 |loss: 0.129631| train set 1.802x speedup, test set 4.461x speedup, val set 0.515x speedup, step: 8, train time 17.06 s
JOB test speedup 0.8904441531834085
TPCH test speedup 1.5882606341048766
TPCH skew test speedup 1.5079100033845574
Epoch 45/50 |loss: 0.129203| train set 1.782x speedup, test set 1.508x speedup, val set 0.515x speedup, step: 9, train time 17.11 s
JOB test speedup 1.7879637756934297
TPCH test speedup 1.1711527835115483
TPCH skew test speedup 1.2742281764947891
Epoch 46/50 |loss: 0.127483| train set 1.799x speedup, test set 1.274x speedup, val set 0.515x speedup, step: 10, train time 17.20 s
JOB test speedup 1.1300268324749063
TPCH test speedup 4.260040414906979
TPCH skew test speedup 4.137161179340261
Epoch 47/50 |loss: 0.125754| train set 1.801x speedup, test set 4.137x speedup, val set 1.501x speedup, step: 1, train time 17.10 s
JOB test speedup 1.9642401243572905
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 48/50 |loss: 0.125437| train set 1.802x speedup, test set 4.461x speedup, val set 1.492x speedup, step: 2, train time 17.39 s
JOB test speedup 2.100689638814858
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 49/50 |loss: 0.124923| train set 1.799x speedup, test set 4.461x speedup, val set 1.492x speedup, step: 3, train time 17.50 s
Training per epoch cost 16.884 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.393s, speedup 2.504x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
13, opt runtime 53.440s, model runtime 136.731s, pg runtime 140.742s, speedup 1.029x
14, opt runtime 47.812s, model runtime 139.115s, pg runtime 83.069s, speedup 0.597x
15, opt runtime 47.518s, model runtime 133.905s, pg runtime 75.736s, speedup 0.566x
16, opt runtime 48.067s, model runtime 135.202s, pg runtime 81.014s, speedup 0.599x
17, opt runtime 47.738s, model runtime 135.818s, pg runtime 76.021s, speedup 0.560x
18, opt runtime 47.804s, model runtime 136.805s, pg runtime 81.177s, speedup 0.593x
19, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
20, opt runtime 51.276s, model runtime 134.457s, pg runtime 79.222s, speedup 0.589x
21, opt runtime 24.391s, model runtime 68.525s, pg runtime 601.866s, speedup 8.783x
22, opt runtime 24.079s, model runtime 48.310s, pg runtime 608.707s, speedup 12.600x
23, opt runtime 24.662s, model runtime 53.254s, pg runtime 613.999s, speedup 11.530x
24, opt runtime 24.459s, model runtime 61.334s, pg runtime 608.717s, speedup 9.925x
25, opt runtime 25.236s, model runtime 73.109s, pg runtime 601.756s, speedup 8.231x
26, opt runtime 25.363s, model runtime 66.430s, pg runtime 611.327s, speedup 9.203x
27, opt runtime 24.706s, model runtime 55.387s, pg runtime 610.808s, speedup 11.028x
28, opt runtime 25.075s, model runtime 55.796s, pg runtime 612.430s, speedup 10.976x
29, opt runtime 24.840s, model runtime 55.171s, pg runtime 626.529s, speedup 11.356x
30, opt runtime 24.920s, model runtime 50.692s, pg runtime 610.993s, speedup 12.053x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 140.245s, pg runtime 80.711s, speedup 0.575x
12, opt runtime 53.203s, model runtime 135.711s, pg runtime 79.156s, speedup 0.583x
13, opt runtime 51.456s, model runtime 132.632s, pg runtime 93.781s, speedup 0.707x
14, opt runtime 54.696s, model runtime 141.455s, pg runtime 98.172s, speedup 0.694x
15, opt runtime 51.200s, model runtime 137.865s, pg runtime 77.674s, speedup 0.563x
16, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
17, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
18, opt runtime 48.088s, model runtime 135.391s, pg runtime 77.369s, speedup 0.571x
19, opt runtime 52.382s, model runtime 146.665s, pg runtime 82.710s, speedup 0.564x
20, opt runtime 52.135s, model runtime 137.176s, pg runtime 102.039s, speedup 0.744x
21, opt runtime 24.737s, model runtime 65.855s, pg runtime 616.762s, speedup 9.365x
22, opt runtime 25.478s, model runtime 56.775s, pg runtime 642.079s, speedup 11.309x
23, opt runtime 24.016s, model runtime 52.161s, pg runtime 601.228s, speedup 11.526x
24, opt runtime 24.103s, model runtime 62.689s, pg runtime 616.889s, speedup 9.840x
25, opt runtime 24.136s, model runtime 51.883s, pg runtime 609.432s, speedup 11.746x
26, opt runtime 25.431s, model runtime 68.652s, pg runtime 625.988s, speedup 9.118x
27, opt runtime 24.451s, model runtime 48.035s, pg runtime 628.615s, speedup 13.087x
28, opt runtime 24.465s, model runtime 49.500s, pg runtime 644.779s, speedup 13.026x
29, opt runtime 25.152s, model runtime 51.169s, pg runtime 613.332s, speedup 11.986x
30, opt runtime 24.505s, model runtime 51.462s, pg runtime 621.574s, speedup 12.078x
31, opt runtime 16.756s, model runtime 23.924s, pg runtime 602.586s, speedup 25.187x
32, opt runtime 16.542s, model runtime 21.754s, pg runtime 461.957s, speedup 21.235x
33, opt runtime 16.136s, model runtime 21.514s, pg runtime 410.283s, speedup 19.070x
34, opt runtime 14.422s, model runtime 21.896s, pg runtime 497.542s, speedup 22.723x
35, opt runtime 15.980s, model runtime 21.470s, pg runtime 504.239s, speedup 23.486x
36, opt runtime 16.482s, model runtime 25.428s, pg runtime 622.915s, speedup 24.497x
37, opt runtime 16.301s, model runtime 22.800s, pg runtime 646.719s, speedup 28.365x
38, opt runtime 16.194s, model runtime 21.815s, pg runtime 439.255s, speedup 20.136x
39, opt runtime 16.149s, model runtime 21.405s, pg runtime 423.122s, speedup 19.768x
40, opt runtime 13.751s, model runtime 21.917s, pg runtime 434.625s, speedup 19.831x
====================
JOB best validation speedup epoch: 47, train speedup 1.801, test speedup 1.130, val speedup 1.501
TPCH best validation speedup epoch: 47, train speedup 1.801, test speedup 4.260, val speedup 1.501
TPCH Skew best validation speedup epoch: 47, train speedup 1.801, test speedup 4.137, val speedup 1.501
execution cost 0:15:03.357051
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.339503, and there are 26041 training samples
in channel 9
JOB test speedup 0.9076544058441081
TPCH test speedup 1.700771407495005
TPCH skew test speedup 1.6281025552992214
Epoch 0/50 |loss: 0.376564| train set 1.642x speedup, test set 1.628x speedup, val set 0.422x speedup, step: 1, train time 18.07 s
JOB test speedup 1.0959197054556507
TPCH test speedup 2.5376505668295644
TPCH skew test speedup 2.167558383892869
Epoch 1/50 |loss: 0.298556| train set 1.767x speedup, test set 2.168x speedup, val set 0.515x speedup, step: 1, train time 16.91 s
JOB test speedup 0.9161732798939429
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 2/50 |loss: 0.268140| train set 1.742x speedup, test set 2.310x speedup, val set 0.515x speedup, step: 1, train time 16.89 s
JOB test speedup 1.4931261307685264
TPCH test speedup 2.3732170682889357
TPCH skew test speedup 2.3043175602116714
Epoch 3/50 |loss: 0.250953| train set 1.712x speedup, test set 2.304x speedup, val set 0.515x speedup, step: 2, train time 16.79 s
JOB test speedup 1.1423292491216008
TPCH test speedup 2.1209972456970627
TPCH skew test speedup 2.045891742032457
Epoch 4/50 |loss: 0.236444| train set 1.764x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 3, train time 17.11 s
JOB test speedup 1.4966539268040886
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 5/50 |loss: 0.226805| train set 1.787x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 4, train time 16.80 s
JOB test speedup 0.9357415039887381
TPCH test speedup 2.224022490134563
TPCH skew test speedup 2.196143561928886
Epoch 6/50 |loss: 0.214863| train set 1.789x speedup, test set 2.196x speedup, val set 0.512x speedup, step: 5, train time 16.80 s
JOB test speedup 1.10811515640524
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 7/50 |loss: 0.207179| train set 1.791x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 6, train time 16.80 s
JOB test speedup 2.527490791370195
TPCH test speedup 2.224022490134563
TPCH skew test speedup 2.196143561928886
Epoch 8/50 |loss: 0.199719| train set 1.702x speedup, test set 2.196x speedup, val set 1.492x speedup, step: 1, train time 17.01 s
JOB test speedup 1.4735687009454006
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 9/50 |loss: 0.193087| train set 1.788x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 2, train time 16.89 s
JOB test speedup 2.28713895941063
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 10/50 |loss: 0.183965| train set 1.792x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 3, train time 16.88 s
JOB test speedup 2.240087536279786
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 11/50 |loss: 0.182423| train set 1.672x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 4, train time 16.90 s
JOB test speedup 1.1335294810180978
TPCH test speedup 2.1022255459575296
TPCH skew test speedup 2.045891742032457
Epoch 12/50 |loss: 0.179386| train set 1.774x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 5, train time 16.61 s
JOB test speedup 1.1026779828808382
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 13/50 |loss: 0.175996| train set 1.793x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 6, train time 16.88 s
JOB test speedup 1.1375744525331062
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.3097278570640705
Epoch 14/50 |loss: 0.173505| train set 1.795x speedup, test set 2.310x speedup, val set 0.515x speedup, step: 7, train time 16.81 s
JOB test speedup 1.781995237771558
TPCH test speedup 4.323505663829091
TPCH skew test speedup 2.7197236745477285
Epoch 15/50 |loss: 0.168273| train set 1.798x speedup, test set 2.720x speedup, val set 0.515x speedup, step: 8, train time 16.82 s
JOB test speedup 0.9222583786454596
TPCH test speedup 2.158598565512259
TPCH skew test speedup 2.1176124094757207
Epoch 16/50 |loss: 0.168724| train set 1.793x speedup, test set 2.118x speedup, val set 0.512x speedup, step: 9, train time 16.93 s
JOB test speedup 1.076947060437607
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 17/50 |loss: 0.162003| train set 1.761x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 10, train time 16.87 s
JOB test speedup 1.473517473569102
TPCH test speedup 2.1022255459575296
TPCH skew test speedup 2.045891742032457
Epoch 18/50 |loss: 0.162938| train set 1.799x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 11, train time 17.00 s
JOB test speedup 2.018031165885502
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 19/50 |loss: 0.159990| train set 1.774x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 12, train time 16.99 s
JOB test speedup 0.9822177638791514
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 20/50 |loss: 0.156577| train set 1.793x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 13, train time 17.01 s
JOB test speedup 1.1323474152137427
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 21/50 |loss: 0.154470| train set 1.801x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 14, train time 17.12 s
JOB test speedup 1.0931077879732143
TPCH test speedup 2.195906435861374
TPCH skew test speedup 2.1267426758963386
Epoch 22/50 |loss: 0.155169| train set 1.777x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 15, train time 16.81 s
JOB test speedup 1.1767676485195377
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 23/50 |loss: 0.149911| train set 1.796x speedup, test set 2.048x speedup, val set 0.515x speedup, step: 16, train time 17.02 s
JOB test speedup 2.0390153115536473
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 24/50 |loss: 0.147670| train set 1.744x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 17, train time 17.07 s
JOB test speedup 1.1958524812040359
TPCH test speedup 2.1519599395154527
TPCH skew test speedup 2.0481281291365914
Epoch 25/50 |loss: 0.149246| train set 1.800x speedup, test set 2.048x speedup, val set 0.515x speedup, step: 18, train time 16.90 s
JOB test speedup 1.4266083327112085
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 26/50 |loss: 0.146079| train set 1.799x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 19, train time 17.10 s
JOB test speedup 1.1359204939393186
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 27/50 |loss: 0.145414| train set 1.779x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 20, train time 17.09 s
JOB test speedup 1.0436864653384197
TPCH test speedup 2.132842699572543
TPCH skew test speedup 2.1034570214219523
Epoch 28/50 |loss: 0.142091| train set 1.782x speedup, test set 2.103x speedup, val set 0.515x speedup, step: 21, train time 16.80 s
JOB test speedup 1.1387836139732725
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 29/50 |loss: 0.139779| train set 1.800x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 22, train time 16.97 s
JOB test speedup 1.4690331582640384
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 30/50 |loss: 0.139913| train set 1.660x speedup, test set 2.048x speedup, val set 0.512x speedup, step: 23, train time 17.01 s
JOB test speedup 0.9024041595381366
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 31/50 |loss: 0.136946| train set 1.798x speedup, test set 2.048x speedup, val set 0.515x speedup, step: 24, train time 16.82 s
JOB test speedup 1.1054623569022537
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 32/50 |loss: 0.137052| train set 1.782x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 25, train time 16.89 s
JOB test speedup 0.9185679497480683
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 33/50 |loss: 0.135893| train set 1.800x speedup, test set 2.048x speedup, val set 0.512x speedup, step: 26, train time 16.97 s
JOB test speedup 0.9073099125592333
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 34/50 |loss: 0.136179| train set 1.800x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 27, train time 16.93 s
JOB test speedup 0.9018989243204975
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 35/50 |loss: 0.134566| train set 1.763x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 28, train time 17.02 s
JOB test speedup 1.4310343855490149
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 36/50 |loss: 0.130803| train set 1.783x speedup, test set 2.048x speedup, val set 0.515x speedup, step: 29, train time 16.90 s
JOB test speedup 0.9010600968233294
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 37/50 |loss: 0.130995| train set 1.798x speedup, test set 2.048x speedup, val set 0.515x speedup, step: 30, train time 16.89 s
JOB test speedup 0.9107265911824691
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 38/50 |loss: 0.130625| train set 1.779x speedup, test set 2.048x speedup, val set 0.512x speedup, step: 31, train time 17.12 s
JOB test speedup 0.9158962729766552
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 39/50 |loss: 0.132143| train set 1.766x speedup, test set 2.048x speedup, val set 0.512x speedup, step: 32, train time 16.88 s
JOB test speedup 0.9055263271459258
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 40/50 |loss: 0.129581| train set 1.801x speedup, test set 2.048x speedup, val set 0.515x speedup, step: 33, train time 17.00 s
JOB test speedup 0.9250368011388481
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 41/50 |loss: 0.127074| train set 1.798x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 34, train time 16.98 s
JOB test speedup 0.9157470021983909
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 42/50 |loss: 0.126985| train set 1.800x speedup, test set 2.048x speedup, val set 0.515x speedup, step: 35, train time 17.07 s
JOB test speedup 1.0872583892537078
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 43/50 |loss: 0.126510| train set 1.799x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 36, train time 17.21 s
JOB test speedup 0.9072105738256532
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 44/50 |loss: 0.126190| train set 1.801x speedup, test set 2.048x speedup, val set 0.512x speedup, step: 37, train time 17.00 s
JOB test speedup 0.9065538990196564
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 45/50 |loss: 0.123943| train set 1.748x speedup, test set 2.048x speedup, val set 0.512x speedup, step: 38, train time 17.00 s
JOB test speedup 1.0418471060835643
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 46/50 |loss: 0.124363| train set 1.800x speedup, test set 2.048x speedup, val set 0.512x speedup, step: 39, train time 17.02 s
JOB test speedup 1.0782105547406284
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 47/50 |loss: 0.123634| train set 1.803x speedup, test set 2.048x speedup, val set 0.515x speedup, step: 40, train time 17.02 s
JOB test speedup 1.0993714560213514
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 48/50 |loss: 0.121492| train set 1.800x speedup, test set 2.048x speedup, val set 0.515x speedup, step: 41, train time 17.18 s
JOB test speedup 0.8984544240962687
TPCH test speedup 2.087333250345017
TPCH skew test speedup 2.0481281291365914
Epoch 49/50 |loss: 0.122005| train set 1.800x speedup, test set 2.048x speedup, val set 0.515x speedup, step: 42, train time 17.21 s
Training per epoch cost 16.975 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 2.323s, pg runtime 1.386s, speedup 0.597x
05, opt runtime 3.504s, model runtime 3.504s, pg runtime 6.143s, speedup 1.753x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
08, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 10.240s, pg runtime 10.685s, speedup 1.043x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 2.971s, pg runtime 8.605s, speedup 2.897x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 56.876s, pg runtime 91.784s, speedup 1.614x
02, opt runtime 29.763s, model runtime 55.506s, pg runtime 91.648s, speedup 1.651x
03, opt runtime 30.267s, model runtime 57.401s, pg runtime 100.885s, speedup 1.758x
04, opt runtime 29.286s, model runtime 58.701s, pg runtime 92.131s, speedup 1.569x
05, opt runtime 29.269s, model runtime 57.330s, pg runtime 91.296s, speedup 1.592x
06, opt runtime 29.502s, model runtime 60.311s, pg runtime 112.305s, speedup 1.862x
07, opt runtime 27.886s, model runtime 58.497s, pg runtime 97.629s, speedup 1.669x
08, opt runtime 30.705s, model runtime 56.560s, pg runtime 89.698s, speedup 1.586x
09, opt runtime 27.651s, model runtime 58.506s, pg runtime 91.255s, speedup 1.560x
10, opt runtime 33.637s, model runtime 57.182s, pg runtime 90.618s, speedup 1.585x
11, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
12, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
13, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
14, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
15, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
16, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
17, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
18, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
19, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
20, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 341.320s, pg runtime 432.766s, speedup 1.268x
32, opt runtime 15.120s, model runtime 353.483s, pg runtime 566.078s, speedup 1.601x
33, opt runtime 16.639s, model runtime 353.418s, pg runtime 462.544s, speedup 1.309x
34, opt runtime 16.280s, model runtime 367.037s, pg runtime 634.990s, speedup 1.730x
35, opt runtime 16.528s, model runtime 354.584s, pg runtime 620.762s, speedup 1.751x
36, opt runtime 18.690s, model runtime 355.233s, pg runtime 651.942s, speedup 1.835x
37, opt runtime 16.438s, model runtime 352.471s, pg runtime 546.887s, speedup 1.552x
38, opt runtime 16.138s, model runtime 345.514s, pg runtime 501.793s, speedup 1.452x
39, opt runtime 16.770s, model runtime 344.251s, pg runtime 594.754s, speedup 1.728x
40, opt runtime 16.305s, model runtime 343.002s, pg runtime 436.168s, speedup 1.272x
========== TPCH skew
01, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
02, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
03, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
04, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
05, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
06, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
07, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
08, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
09, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
10, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
11, opt runtime 53.915s, model runtime 167.703s, pg runtime 80.711s, speedup 0.481x
12, opt runtime 53.203s, model runtime 163.373s, pg runtime 79.156s, speedup 0.485x
13, opt runtime 51.456s, model runtime 157.240s, pg runtime 93.781s, speedup 0.596x
14, opt runtime 54.696s, model runtime 167.507s, pg runtime 98.172s, speedup 0.586x
15, opt runtime 51.200s, model runtime 163.049s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 152.849s, pg runtime 80.007s, speedup 0.523x
17, opt runtime 54.335s, model runtime 159.237s, pg runtime 95.799s, speedup 0.602x
18, opt runtime 48.088s, model runtime 162.057s, pg runtime 77.369s, speedup 0.477x
19, opt runtime 52.382s, model runtime 161.008s, pg runtime 82.710s, speedup 0.514x
20, opt runtime 52.135s, model runtime 165.502s, pg runtime 102.039s, speedup 0.617x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 359.909s, pg runtime 602.586s, speedup 1.674x
32, opt runtime 16.542s, model runtime 339.860s, pg runtime 461.957s, speedup 1.359x
33, opt runtime 16.136s, model runtime 338.732s, pg runtime 410.283s, speedup 1.211x
34, opt runtime 14.422s, model runtime 344.192s, pg runtime 497.542s, speedup 1.446x
35, opt runtime 15.980s, model runtime 338.670s, pg runtime 504.239s, speedup 1.489x
36, opt runtime 16.482s, model runtime 353.788s, pg runtime 622.915s, speedup 1.761x
37, opt runtime 16.301s, model runtime 349.420s, pg runtime 646.719s, speedup 1.851x
38, opt runtime 16.194s, model runtime 347.772s, pg runtime 439.255s, speedup 1.263x
39, opt runtime 16.149s, model runtime 348.583s, pg runtime 423.122s, speedup 1.214x
40, opt runtime 13.751s, model runtime 345.840s, pg runtime 434.625s, speedup 1.257x
====================
JOB best validation speedup epoch: 8, train speedup 1.702, test speedup 2.527, val speedup 1.492
TPCH best validation speedup epoch: 8, train speedup 1.702, test speedup 2.224, val speedup 1.492
TPCH Skew best validation speedup epoch: 8, train speedup 1.702, test speedup 2.196, val speedup 1.492
execution cost 0:15:10.188392
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.315853, and there are 26041 training samples
in channel 9
JOB test speedup 0.9004310831708547
TPCH test speedup 2.5280725300233615
TPCH skew test speedup 2.491817333804585
Epoch 0/50 |loss: 0.375704| train set 1.643x speedup, test set 2.492x speedup, val set 1.337x speedup, step: 1, train time 18.00 s
JOB test speedup 2.0118329219828865
TPCH test speedup 2.39270565945717
TPCH skew test speedup 2.0265759313691056
Epoch 1/50 |loss: 0.296216| train set 1.726x speedup, test set 2.027x speedup, val set 0.515x speedup, step: 2, train time 16.27 s
JOB test speedup 1.0453521005651174
TPCH test speedup 1.5635002841815782
TPCH skew test speedup 1.5231249260813438
Epoch 2/50 |loss: 0.267014| train set 1.712x speedup, test set 1.523x speedup, val set 0.515x speedup, step: 3, train time 16.43 s
JOB test speedup 1.4874749956298228
TPCH test speedup 1.5729504459199322
TPCH skew test speedup 1.5192978443845213
Epoch 3/50 |loss: 0.251218| train set 1.709x speedup, test set 1.519x speedup, val set 0.515x speedup, step: 4, train time 16.50 s
JOB test speedup 0.9137942907902962
TPCH test speedup 1.5527299534818986
TPCH skew test speedup 1.5262544541570422
Epoch 4/50 |loss: 0.235886| train set 1.790x speedup, test set 1.526x speedup, val set 0.512x speedup, step: 5, train time 16.31 s
JOB test speedup 1.449278738906346
TPCH test speedup 2.08401284688638
TPCH skew test speedup 2.0383732744050844
Epoch 5/50 |loss: 0.226388| train set 1.758x speedup, test set 2.038x speedup, val set 0.515x speedup, step: 6, train time 16.32 s
JOB test speedup 1.4738185355452658
TPCH test speedup 2.08401284688638
TPCH skew test speedup 2.0383732744050844
Epoch 6/50 |loss: 0.213297| train set 1.771x speedup, test set 2.038x speedup, val set 0.512x speedup, step: 7, train time 16.41 s
JOB test speedup 1.379948980055908
TPCH test speedup 1.4416118058856402
TPCH skew test speedup 1.4073108285657774
Epoch 7/50 |loss: 0.206072| train set 1.792x speedup, test set 1.407x speedup, val set 0.515x speedup, step: 8, train time 16.50 s
JOB test speedup 2.1287158961819452
TPCH test speedup 1.5635002841815782
TPCH skew test speedup 1.5231249260813438
Epoch 8/50 |loss: 0.198149| train set 1.796x speedup, test set 1.523x speedup, val set 1.483x speedup, step: 1, train time 16.49 s
JOB test speedup 1.4699591078522862
TPCH test speedup 1.4746490108713428
TPCH skew test speedup 1.4413455488636018
Epoch 9/50 |loss: 0.194181| train set 1.790x speedup, test set 1.441x speedup, val set 0.512x speedup, step: 2, train time 16.57 s
JOB test speedup 2.1220466616817695
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 10/50 |loss: 0.184015| train set 1.798x speedup, test set 4.075x speedup, val set 0.515x speedup, step: 3, train time 16.40 s
JOB test speedup 2.1000617363303955
TPCH test speedup 4.891367913172929
TPCH skew test speedup 4.804303612783904
Epoch 11/50 |loss: 0.182410| train set 1.665x speedup, test set 4.804x speedup, val set 0.515x speedup, step: 4, train time 16.48 s
JOB test speedup 1.0860494854533638
TPCH test speedup 1.4661142088741284
TPCH skew test speedup 1.426704432352805
Epoch 12/50 |loss: 0.179375| train set 1.773x speedup, test set 1.427x speedup, val set 0.512x speedup, step: 5, train time 16.53 s
JOB test speedup 1.9945236848508718
TPCH test speedup 2.21253483270547
TPCH skew test speedup 2.1312151555819505
Epoch 13/50 |loss: 0.176846| train set 1.760x speedup, test set 2.131x speedup, val set 0.515x speedup, step: 6, train time 16.60 s
JOB test speedup 1.9988117638680838
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 14/50 |loss: 0.172819| train set 1.795x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 7, train time 16.71 s
JOB test speedup 1.4884650026878705
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 15/50 |loss: 0.169760| train set 1.797x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 8, train time 16.46 s
JOB test speedup 1.457398542380662
TPCH test speedup 2.1623864965805244
TPCH skew test speedup 2.094504334873351
Epoch 16/50 |loss: 0.169364| train set 1.760x speedup, test set 2.095x speedup, val set 0.512x speedup, step: 9, train time 16.79 s
JOB test speedup 1.4982599990782746
TPCH test speedup 4.2329436485172405
TPCH skew test speedup 4.058203935956812
Epoch 17/50 |loss: 0.160875| train set 1.793x speedup, test set 4.058x speedup, val set 0.515x speedup, step: 10, train time 16.58 s
JOB test speedup 1.449955997664905
TPCH test speedup 1.682330464047006
TPCH skew test speedup 1.5219683560688946
Epoch 18/50 |loss: 0.161259| train set 1.797x speedup, test set 1.522x speedup, val set 0.512x speedup, step: 11, train time 16.49 s
JOB test speedup 1.453154442305172
TPCH test speedup 2.1351975582264062
TPCH skew test speedup 2.058585916694861
Epoch 19/50 |loss: 0.160405| train set 1.774x speedup, test set 2.059x speedup, val set 0.512x speedup, step: 12, train time 16.48 s
JOB test speedup 1.062145533453052
TPCH test speedup 2.21253483270547
TPCH skew test speedup 2.140463353681208
Epoch 20/50 |loss: 0.157113| train set 1.765x speedup, test set 2.140x speedup, val set 0.512x speedup, step: 13, train time 16.50 s
JOB test speedup 2.0934132381754558
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 21/50 |loss: 0.155696| train set 1.800x speedup, test set 4.471x speedup, val set 0.515x speedup, step: 14, train time 16.69 s
JOB test speedup 2.0120146278345614
TPCH test speedup 2.3186076839785543
TPCH skew test speedup 2.2448995777601515
Epoch 22/50 |loss: 0.153639| train set 1.799x speedup, test set 2.245x speedup, val set 0.512x speedup, step: 15, train time 16.68 s
JOB test speedup 1.1321752287258315
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 23/50 |loss: 0.150693| train set 1.800x speedup, test set 4.471x speedup, val set 0.515x speedup, step: 16, train time 16.60 s
JOB test speedup 1.9500737098221939
TPCH test speedup 2.21253483270547
TPCH skew test speedup 2.140463353681208
Epoch 24/50 |loss: 0.147937| train set 1.777x speedup, test set 2.140x speedup, val set 0.512x speedup, step: 17, train time 16.68 s
JOB test speedup 1.0963816300611366
TPCH test speedup 2.1623864965805244
TPCH skew test speedup 2.117229143344254
Epoch 25/50 |loss: 0.149575| train set 1.782x speedup, test set 2.117x speedup, val set 0.514x speedup, step: 18, train time 16.39 s
JOB test speedup 1.4334757890123477
TPCH test speedup 4.2329436485172405
TPCH skew test speedup 4.058203935956812
Epoch 26/50 |loss: 0.149056| train set 1.796x speedup, test set 4.058x speedup, val set 1.469x speedup, step: 19, train time 16.59 s
JOB test speedup 2.0995132661543363
TPCH test speedup 1.529575400235617
TPCH skew test speedup 1.8371830911649154
Epoch 27/50 |loss: 0.147470| train set 1.799x speedup, test set 1.837x speedup, val set 0.515x speedup, step: 20, train time 16.49 s
JOB test speedup 2.0136617523227014
TPCH test speedup 1.5360405729455757
TPCH skew test speedup 1.5200078584912753
Epoch 28/50 |loss: 0.143867| train set 1.777x speedup, test set 1.520x speedup, val set 0.512x speedup, step: 21, train time 16.58 s
JOB test speedup 1.9783732201145012
TPCH test speedup 1.4746490108713428
TPCH skew test speedup 1.4413455488636018
Epoch 29/50 |loss: 0.141743| train set 1.671x speedup, test set 1.441x speedup, val set 0.512x speedup, step: 22, train time 16.61 s
JOB test speedup 1.4317028623851675
TPCH test speedup 1.4746490108713428
TPCH skew test speedup 1.4413455488636018
Epoch 30/50 |loss: 0.142916| train set 1.657x speedup, test set 1.441x speedup, val set 0.512x speedup, step: 23, train time 16.73 s
JOB test speedup 1.4463484464587502
TPCH test speedup 1.4746490108713428
TPCH skew test speedup 1.4413455488636018
Epoch 31/50 |loss: 0.140343| train set 1.800x speedup, test set 1.441x speedup, val set 0.515x speedup, step: 24, train time 16.59 s
JOB test speedup 2.124622759772775
TPCH test speedup 4.2329436485172405
TPCH skew test speedup 4.058203935956812
Epoch 32/50 |loss: 0.139302| train set 1.781x speedup, test set 4.058x speedup, val set 0.512x speedup, step: 25, train time 16.77 s
JOB test speedup 1.5263222912993362
TPCH test speedup 2.21253483270547
TPCH skew test speedup 2.140463353681208
Epoch 33/50 |loss: 0.138674| train set 1.798x speedup, test set 2.140x speedup, val set 0.512x speedup, step: 26, train time 16.68 s
JOB test speedup 2.1038287757618948
TPCH test speedup 0.9354520381108535
TPCH skew test speedup 0.9120918584242713
Epoch 34/50 |loss: 0.141201| train set 1.799x speedup, test set 0.912x speedup, val set 0.515x speedup, step: 27, train time 16.78 s
JOB test speedup 0.9254191578978365
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 35/50 |loss: 0.135246| train set 1.765x speedup, test set 4.075x speedup, val set 0.515x speedup, step: 28, train time 16.67 s
JOB test speedup 1.523983606581776
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 36/50 |loss: 0.132602| train set 1.779x speedup, test set 4.461x speedup, val set 1.256x speedup, step: 29, train time 16.70 s
JOB test speedup 2.094397627546556
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 37/50 |loss: 0.134180| train set 1.800x speedup, test set 4.075x speedup, val set 1.256x speedup, step: 30, train time 16.75 s
JOB test speedup 1.5290376724781258
TPCH test speedup 2.21253483270547
TPCH skew test speedup 2.140463353681208
Epoch 38/50 |loss: 0.132628| train set 1.796x speedup, test set 2.140x speedup, val set 0.512x speedup, step: 31, train time 16.88 s
JOB test speedup 1.4837993266696907
TPCH test speedup 2.21253483270547
TPCH skew test speedup 2.140463353681208
Epoch 39/50 |loss: 0.132991| train set 1.743x speedup, test set 2.140x speedup, val set 0.512x speedup, step: 32, train time 16.89 s
JOB test speedup 0.9257984350932443
TPCH test speedup 2.1623864965805244
TPCH skew test speedup 2.094504334873351
Epoch 40/50 |loss: 0.132568| train set 1.800x speedup, test set 2.095x speedup, val set 0.515x speedup, step: 33, train time 16.80 s
JOB test speedup 1.4801273654889116
TPCH test speedup 2.162632557172397
TPCH skew test speedup 2.114066491435642
Epoch 41/50 |loss: 0.129314| train set 1.780x speedup, test set 2.114x speedup, val set 1.256x speedup, step: 34, train time 16.77 s
JOB test speedup 0.9413278485290386
TPCH test speedup 1.1537318412188635
TPCH skew test speedup 1.1380895599657486
Epoch 42/50 |loss: 0.129794| train set 1.800x speedup, test set 1.138x speedup, val set 1.256x speedup, step: 35, train time 16.61 s
JOB test speedup 1.0971505683898806
TPCH test speedup 2.21253483270547
TPCH skew test speedup 2.140463353681208
Epoch 43/50 |loss: 0.127006| train set 1.800x speedup, test set 2.140x speedup, val set 0.515x speedup, step: 36, train time 16.59 s
JOB test speedup 0.906897938704618
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 44/50 |loss: 0.129879| train set 1.801x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 37, train time 16.60 s
JOB test speedup 0.9397384825422742
TPCH test speedup 1.4746490108713428
TPCH skew test speedup 1.4413455488636018
Epoch 45/50 |loss: 0.128855| train set 1.767x speedup, test set 1.441x speedup, val set 0.512x speedup, step: 38, train time 16.77 s
JOB test speedup 0.9139256233085711
TPCH test speedup 1.4800914112491816
TPCH skew test speedup 1.4451007153423097
Epoch 46/50 |loss: 0.126749| train set 1.801x speedup, test set 1.445x speedup, val set 0.512x speedup, step: 39, train time 16.60 s
JOB test speedup 1.1267424655086768
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 47/50 |loss: 0.128693| train set 1.801x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 40, train time 16.68 s
JOB test speedup 1.1321258022616614
TPCH test speedup 1.4746490108713428
TPCH skew test speedup 1.4413455488636018
Epoch 48/50 |loss: 0.124061| train set 1.801x speedup, test set 1.441x speedup, val set 0.515x speedup, step: 41, train time 17.08 s
JOB test speedup 0.9279636957111911
TPCH test speedup 2.21253483270547
TPCH skew test speedup 2.140463353681208
Epoch 49/50 |loss: 0.124092| train set 1.801x speedup, test set 2.140x speedup, val set 0.515x speedup, step: 42, train time 16.97 s
Training per epoch cost 16.641 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 2.323s, pg runtime 1.386s, speedup 0.597x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 91.571s, pg runtime 148.707s, speedup 1.624x
12, opt runtime 48.784s, model runtime 85.611s, pg runtime 78.349s, speedup 0.915x
13, opt runtime 53.440s, model runtime 86.638s, pg runtime 140.742s, speedup 1.624x
14, opt runtime 47.812s, model runtime 88.819s, pg runtime 83.069s, speedup 0.935x
15, opt runtime 47.518s, model runtime 83.137s, pg runtime 75.736s, speedup 0.911x
16, opt runtime 48.067s, model runtime 87.942s, pg runtime 81.014s, speedup 0.921x
17, opt runtime 47.738s, model runtime 83.106s, pg runtime 76.021s, speedup 0.915x
18, opt runtime 47.804s, model runtime 87.416s, pg runtime 81.177s, speedup 0.929x
19, opt runtime 49.511s, model runtime 92.597s, pg runtime 87.329s, speedup 0.943x
20, opt runtime 51.276s, model runtime 84.921s, pg runtime 79.222s, speedup 0.933x
21, opt runtime 24.391s, model runtime 318.834s, pg runtime 601.866s, speedup 1.888x
22, opt runtime 24.079s, model runtime 320.574s, pg runtime 608.707s, speedup 1.899x
23, opt runtime 24.662s, model runtime 317.659s, pg runtime 613.999s, speedup 1.933x
24, opt runtime 24.459s, model runtime 316.659s, pg runtime 608.717s, speedup 1.922x
25, opt runtime 25.236s, model runtime 324.062s, pg runtime 601.756s, speedup 1.857x
26, opt runtime 25.363s, model runtime 312.889s, pg runtime 611.327s, speedup 1.954x
27, opt runtime 24.706s, model runtime 329.304s, pg runtime 610.808s, speedup 1.855x
28, opt runtime 25.075s, model runtime 339.226s, pg runtime 612.430s, speedup 1.805x
29, opt runtime 24.840s, model runtime 330.901s, pg runtime 626.529s, speedup 1.893x
30, opt runtime 24.920s, model runtime 318.881s, pg runtime 610.993s, speedup 1.916x
31, opt runtime 16.268s, model runtime 349.951s, pg runtime 432.766s, speedup 1.237x
32, opt runtime 15.120s, model runtime 350.307s, pg runtime 566.078s, speedup 1.616x
33, opt runtime 16.639s, model runtime 343.997s, pg runtime 462.544s, speedup 1.345x
34, opt runtime 16.280s, model runtime 379.482s, pg runtime 634.990s, speedup 1.673x
35, opt runtime 16.528s, model runtime 362.680s, pg runtime 620.762s, speedup 1.712x
36, opt runtime 18.690s, model runtime 356.056s, pg runtime 651.942s, speedup 1.831x
37, opt runtime 16.438s, model runtime 349.045s, pg runtime 546.887s, speedup 1.567x
38, opt runtime 16.138s, model runtime 349.458s, pg runtime 501.793s, speedup 1.436x
39, opt runtime 16.770s, model runtime 354.159s, pg runtime 594.754s, speedup 1.679x
40, opt runtime 16.305s, model runtime 348.685s, pg runtime 436.168s, speedup 1.251x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 87.162s, pg runtime 80.711s, speedup 0.926x
12, opt runtime 53.203s, model runtime 88.372s, pg runtime 79.156s, speedup 0.896x
13, opt runtime 51.456s, model runtime 84.214s, pg runtime 93.781s, speedup 1.114x
14, opt runtime 54.696s, model runtime 91.625s, pg runtime 98.172s, speedup 1.071x
15, opt runtime 51.200s, model runtime 84.681s, pg runtime 77.674s, speedup 0.917x
16, opt runtime 47.844s, model runtime 86.036s, pg runtime 80.007s, speedup 0.930x
17, opt runtime 54.335s, model runtime 85.400s, pg runtime 95.799s, speedup 1.122x
18, opt runtime 48.088s, model runtime 83.930s, pg runtime 77.369s, speedup 0.922x
19, opt runtime 52.382s, model runtime 102.152s, pg runtime 82.710s, speedup 0.810x
20, opt runtime 52.135s, model runtime 91.553s, pg runtime 102.039s, speedup 1.115x
21, opt runtime 24.737s, model runtime 317.284s, pg runtime 616.762s, speedup 1.944x
22, opt runtime 25.478s, model runtime 358.349s, pg runtime 642.079s, speedup 1.792x
23, opt runtime 24.016s, model runtime 330.550s, pg runtime 601.228s, speedup 1.819x
24, opt runtime 24.103s, model runtime 320.618s, pg runtime 616.889s, speedup 1.924x
25, opt runtime 24.136s, model runtime 317.754s, pg runtime 609.432s, speedup 1.918x
26, opt runtime 25.431s, model runtime 323.350s, pg runtime 625.988s, speedup 1.936x
27, opt runtime 24.451s, model runtime 315.860s, pg runtime 628.615s, speedup 1.990x
28, opt runtime 24.465s, model runtime 328.857s, pg runtime 644.779s, speedup 1.961x
29, opt runtime 25.152s, model runtime 313.847s, pg runtime 613.332s, speedup 1.954x
30, opt runtime 24.505s, model runtime 311.638s, pg runtime 621.574s, speedup 1.995x
31, opt runtime 16.756s, model runtime 363.182s, pg runtime 602.586s, speedup 1.659x
32, opt runtime 16.542s, model runtime 343.670s, pg runtime 461.957s, speedup 1.344x
33, opt runtime 16.136s, model runtime 338.095s, pg runtime 410.283s, speedup 1.214x
34, opt runtime 14.422s, model runtime 349.086s, pg runtime 497.542s, speedup 1.425x
35, opt runtime 15.980s, model runtime 342.141s, pg runtime 504.239s, speedup 1.474x
36, opt runtime 16.482s, model runtime 349.021s, pg runtime 622.915s, speedup 1.785x
37, opt runtime 16.301s, model runtime 358.543s, pg runtime 646.719s, speedup 1.804x
38, opt runtime 16.194s, model runtime 351.176s, pg runtime 439.255s, speedup 1.251x
39, opt runtime 16.149s, model runtime 354.585s, pg runtime 423.122s, speedup 1.193x
40, opt runtime 13.751s, model runtime 340.982s, pg runtime 434.625s, speedup 1.275x
====================
JOB best validation speedup epoch: 8, train speedup 1.796, test speedup 2.129, val speedup 1.483
TPCH best validation speedup epoch: 8, train speedup 1.796, test speedup 1.564, val speedup 1.483
TPCH Skew best validation speedup epoch: 8, train speedup 1.796, test speedup 1.523, val speedup 1.483
execution cost 0:14:49.817457
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.341004, and there are 26041 training samples
in channel 9
JOB test speedup 0.9004310831708547
TPCH test speedup 1.2305682646072817
TPCH skew test speedup 1.1100570801270278
Epoch 0/50 |loss: 0.375451| train set 1.660x speedup, test set 1.110x speedup, val set 0.679x speedup, step: 1, train time 18.16 s
JOB test speedup 1.08900551270509
TPCH test speedup 2.3841886907290926
TPCH skew test speedup 2.307294305493192
Epoch 1/50 |loss: 0.298279| train set 1.745x speedup, test set 2.307x speedup, val set 0.364x speedup, step: 2, train time 16.67 s
JOB test speedup 0.9213705536514895
TPCH test speedup 1.1914032439230222
TPCH skew test speedup 1.1461877326287448
Epoch 2/50 |loss: 0.266117| train set 1.724x speedup, test set 1.146x speedup, val set 0.515x speedup, step: 3, train time 16.68 s
JOB test speedup 0.9072377858662043
TPCH test speedup 2.5280725300233615
TPCH skew test speedup 2.491817333804585
Epoch 3/50 |loss: 0.249834| train set 1.708x speedup, test set 2.492x speedup, val set 1.492x speedup, step: 1, train time 16.51 s
JOB test speedup 1.1269526580640397
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 4/50 |loss: 0.235862| train set 1.747x speedup, test set 2.310x speedup, val set 1.470x speedup, step: 2, train time 16.80 s
JOB test speedup 1.4507131499109858
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 5/50 |loss: 0.226999| train set 1.758x speedup, test set 2.310x speedup, val set 1.492x speedup, step: 1, train time 16.63 s
JOB test speedup 1.4673601025699399
TPCH test speedup 2.51050226999699
TPCH skew test speedup 2.5030621095008483
Epoch 6/50 |loss: 0.214219| train set 1.770x speedup, test set 2.503x speedup, val set 0.512x speedup, step: 2, train time 16.81 s
JOB test speedup 2.144229637845422
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 7/50 |loss: 0.207283| train set 1.667x speedup, test set 2.127x speedup, val set 1.493x speedup, step: 1, train time 16.81 s
JOB test speedup 2.6054036640680516
TPCH test speedup 2.544110105691499
TPCH skew test speedup 2.5030621095008483
Epoch 8/50 |loss: 0.198626| train set 1.697x speedup, test set 2.503x speedup, val set 1.483x speedup, step: 2, train time 16.69 s
JOB test speedup 1.4681612758512803
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 9/50 |loss: 0.193502| train set 1.789x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 3, train time 16.80 s
JOB test speedup 2.3080939850593807
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 10/50 |loss: 0.184114| train set 1.798x speedup, test set 2.310x speedup, val set 1.493x speedup, step: 1, train time 16.91 s
JOB test speedup 2.2561637812319124
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 11/50 |loss: 0.181453| train set 1.683x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 2, train time 16.68 s
JOB test speedup 2.1011914203833966
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 12/50 |loss: 0.179613| train set 1.794x speedup, test set 2.310x speedup, val set 1.470x speedup, step: 3, train time 16.80 s
JOB test speedup 2.0182709517925845
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 13/50 |loss: 0.176276| train set 1.794x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 4, train time 17.08 s
JOB test speedup 2.1282006630360084
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.3097278570640705
Epoch 14/50 |loss: 0.172225| train set 1.801x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 5, train time 16.80 s
JOB test speedup 2.3030497956643394
TPCH test speedup 5.554424646763744
TPCH skew test speedup 5.364450798040867
Epoch 15/50 |loss: 0.169024| train set 1.796x speedup, test set 5.364x speedup, val set 1.470x speedup, step: 6, train time 16.78 s
JOB test speedup 1.436269705821849
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 16/50 |loss: 0.167950| train set 1.800x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 7, train time 16.89 s
JOB test speedup 1.932507090925695
TPCH test speedup 2.2705220743043224
TPCH skew test speedup 2.233971416495877
Epoch 17/50 |loss: 0.160070| train set 1.798x speedup, test set 2.234x speedup, val set 1.470x speedup, step: 8, train time 16.92 s
JOB test speedup 2.097512094948153
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 18/50 |loss: 0.161724| train set 1.797x speedup, test set 2.046x speedup, val set 1.470x speedup, step: 9, train time 16.98 s
JOB test speedup 1.9105542129514481
TPCH test speedup 2.4384685272951847
TPCH skew test speedup 2.195352475109108
Epoch 19/50 |loss: 0.158531| train set 1.780x speedup, test set 2.195x speedup, val set 0.512x speedup, step: 10, train time 17.01 s
JOB test speedup 0.9376289804025179
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 20/50 |loss: 0.156866| train set 1.761x speedup, test set 2.046x speedup, val set 0.510x speedup, step: 11, train time 17.14 s
JOB test speedup 2.2374843422354385
TPCH test speedup 2.1415602818686748
TPCH skew test speedup 2.079391165928911
Epoch 21/50 |loss: 0.155123| train set 1.797x speedup, test set 2.079x speedup, val set 0.511x speedup, step: 12, train time 16.97 s
JOB test speedup 2.4719203264033576
TPCH test speedup 6.5650217010004015
TPCH skew test speedup 6.537161359481754
Epoch 22/50 |loss: 0.153198| train set 1.780x speedup, test set 6.537x speedup, val set 1.461x speedup, step: 13, train time 17.19 s
JOB test speedup 1.1584638749814025
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 23/50 |loss: 0.150280| train set 1.797x speedup, test set 4.471x speedup, val set 0.511x speedup, step: 14, train time 16.98 s
JOB test speedup 1.9220867291604773
TPCH test speedup 2.356393836875425
TPCH skew test speedup 2.3097278570640705
Epoch 24/50 |loss: 0.146566| train set 1.777x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 15, train time 17.00 s
JOB test speedup 1.189818716309331
TPCH test speedup 1.6149243850188064
TPCH skew test speedup 1.6138829573999485
Epoch 25/50 |loss: 0.147960| train set 1.799x speedup, test set 1.614x speedup, val set 0.511x speedup, step: 16, train time 16.90 s
JOB test speedup 1.4553278520473978
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.2524942355337605
Epoch 26/50 |loss: 0.147195| train set 1.797x speedup, test set 2.252x speedup, val set 0.512x speedup, step: 17, train time 16.90 s
JOB test speedup 2.099509176341352
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.3097278570640705
Epoch 27/50 |loss: 0.144208| train set 1.799x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 18, train time 16.98 s
JOB test speedup 1.0854403313563945
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.2801196376664254
Epoch 28/50 |loss: 0.142761| train set 1.794x speedup, test set 2.280x speedup, val set 0.512x speedup, step: 19, train time 16.89 s
JOB test speedup 2.1975759932045693
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.2524942355337605
Epoch 29/50 |loss: 0.138397| train set 1.782x speedup, test set 2.252x speedup, val set 0.512x speedup, step: 20, train time 17.11 s
JOB test speedup 1.9866292242232226
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 30/50 |loss: 0.141648| train set 1.795x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 21, train time 17.08 s
JOB test speedup 1.1247367956931162
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.233971416495877
Epoch 31/50 |loss: 0.138695| train set 1.796x speedup, test set 2.234x speedup, val set 0.512x speedup, step: 22, train time 17.18 s
JOB test speedup 1.9935868249888082
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 32/50 |loss: 0.138252| train set 1.782x speedup, test set 2.127x speedup, val set 1.470x speedup, step: 23, train time 17.10 s
JOB test speedup 2.0928817088523437
TPCH test speedup 1.6485071389702572
TPCH skew test speedup 1.5016178721892417
Epoch 33/50 |loss: 0.135515| train set 1.798x speedup, test set 1.502x speedup, val set 0.512x speedup, step: 24, train time 17.03 s
JOB test speedup 1.132700939653539
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 34/50 |loss: 0.138712| train set 1.800x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 25, train time 17.19 s
JOB test speedup 1.086258265820967
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 35/50 |loss: 0.135236| train set 1.800x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 26, train time 17.10 s
JOB test speedup 1.987214998621452
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 36/50 |loss: 0.131954| train set 1.781x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 27, train time 16.80 s
JOB test speedup 2.1053987126295692
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 37/50 |loss: 0.133971| train set 1.798x speedup, test set 2.127x speedup, val set 1.470x speedup, step: 28, train time 17.19 s
JOB test speedup 2.0424474741349767
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 38/50 |loss: 0.131596| train set 1.778x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 29, train time 16.84 s
JOB test speedup 1.0632448430662855
TPCH test speedup 1.6439514604249776
TPCH skew test speedup 1.4840696866605534
Epoch 39/50 |loss: 0.132855| train set 1.750x speedup, test set 1.484x speedup, val set 0.512x speedup, step: 30, train time 17.08 s
JOB test speedup 0.9291533095741341
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.0713334842175164
Epoch 40/50 |loss: 0.131185| train set 1.801x speedup, test set 2.071x speedup, val set 0.512x speedup, step: 31, train time 16.87 s
JOB test speedup 1.8451614864016084
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 41/50 |loss: 0.129344| train set 1.780x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 32, train time 17.08 s
JOB test speedup 2.1522667033992238
TPCH test speedup 4.291673447618084
TPCH skew test speedup 4.128046231222904
Epoch 42/50 |loss: 0.129767| train set 1.801x speedup, test set 4.128x speedup, val set 0.512x speedup, step: 33, train time 16.92 s
JOB test speedup 1.1436631743205088
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 43/50 |loss: 0.127087| train set 1.796x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 34, train time 16.82 s
JOB test speedup 1.1042169923487428
TPCH test speedup 1.8608679662649465
TPCH skew test speedup 1.4840696866605534
Epoch 44/50 |loss: 0.129738| train set 1.801x speedup, test set 1.484x speedup, val set 0.512x speedup, step: 35, train time 16.89 s
JOB test speedup 1.0848979638403262
TPCH test speedup 1.6554086578751837
TPCH skew test speedup 1.4972678814418618
Epoch 45/50 |loss: 0.128517| train set 1.781x speedup, test set 1.497x speedup, val set 0.438x speedup, step: 36, train time 16.99 s
JOB test speedup 1.050072602522908
TPCH test speedup 1.6394676707091962
TPCH skew test speedup 1.4840696866605534
Epoch 46/50 |loss: 0.125828| train set 1.768x speedup, test set 1.484x speedup, val set 0.512x speedup, step: 37, train time 17.07 s
JOB test speedup 1.1054800791189334
TPCH test speedup 2.21382881007082
TPCH skew test speedup 2.144586749162988
Epoch 47/50 |loss: 0.125908| train set 1.769x speedup, test set 2.145x speedup, val set 1.469x speedup, step: 38, train time 16.88 s
JOB test speedup 1.1312934813034043
TPCH test speedup 2.158598565512259
TPCH skew test speedup 2.1176124094757207
Epoch 48/50 |loss: 0.122515| train set 1.801x speedup, test set 2.118x speedup, val set 0.512x speedup, step: 39, train time 16.88 s
JOB test speedup 1.1311251164982306
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.0713334842175164
Epoch 49/50 |loss: 0.124054| train set 1.800x speedup, test set 2.071x speedup, val set 1.470x speedup, step: 40, train time 16.80 s
Training per epoch cost 16.945 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 3.504s, pg runtime 6.143s, speedup 1.753x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 2.971s, pg runtime 8.605s, speedup 2.897x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 91.571s, pg runtime 148.707s, speedup 1.624x
12, opt runtime 48.784s, model runtime 85.611s, pg runtime 78.349s, speedup 0.915x
13, opt runtime 53.440s, model runtime 86.638s, pg runtime 140.742s, speedup 1.624x
14, opt runtime 47.812s, model runtime 88.819s, pg runtime 83.069s, speedup 0.935x
15, opt runtime 47.518s, model runtime 83.137s, pg runtime 75.736s, speedup 0.911x
16, opt runtime 48.067s, model runtime 87.942s, pg runtime 81.014s, speedup 0.921x
17, opt runtime 47.738s, model runtime 83.106s, pg runtime 76.021s, speedup 0.915x
18, opt runtime 47.804s, model runtime 87.416s, pg runtime 81.177s, speedup 0.929x
19, opt runtime 49.511s, model runtime 92.597s, pg runtime 87.329s, speedup 0.943x
20, opt runtime 51.276s, model runtime 84.921s, pg runtime 79.222s, speedup 0.933x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 341.320s, pg runtime 432.766s, speedup 1.268x
32, opt runtime 15.120s, model runtime 353.483s, pg runtime 566.078s, speedup 1.601x
33, opt runtime 16.639s, model runtime 353.418s, pg runtime 462.544s, speedup 1.309x
34, opt runtime 16.280s, model runtime 367.037s, pg runtime 634.990s, speedup 1.730x
35, opt runtime 16.528s, model runtime 354.584s, pg runtime 620.762s, speedup 1.751x
36, opt runtime 18.690s, model runtime 355.233s, pg runtime 651.942s, speedup 1.835x
37, opt runtime 16.438s, model runtime 352.471s, pg runtime 546.887s, speedup 1.552x
38, opt runtime 16.138s, model runtime 345.514s, pg runtime 501.793s, speedup 1.452x
39, opt runtime 16.770s, model runtime 344.251s, pg runtime 594.754s, speedup 1.728x
40, opt runtime 16.305s, model runtime 343.002s, pg runtime 436.168s, speedup 1.272x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 87.162s, pg runtime 80.711s, speedup 0.926x
12, opt runtime 53.203s, model runtime 88.372s, pg runtime 79.156s, speedup 0.896x
13, opt runtime 51.456s, model runtime 84.214s, pg runtime 93.781s, speedup 1.114x
14, opt runtime 54.696s, model runtime 91.625s, pg runtime 98.172s, speedup 1.071x
15, opt runtime 51.200s, model runtime 84.681s, pg runtime 77.674s, speedup 0.917x
16, opt runtime 47.844s, model runtime 86.036s, pg runtime 80.007s, speedup 0.930x
17, opt runtime 54.335s, model runtime 85.400s, pg runtime 95.799s, speedup 1.122x
18, opt runtime 48.088s, model runtime 83.930s, pg runtime 77.369s, speedup 0.922x
19, opt runtime 52.382s, model runtime 102.152s, pg runtime 82.710s, speedup 0.810x
20, opt runtime 52.135s, model runtime 91.553s, pg runtime 102.039s, speedup 1.115x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 359.909s, pg runtime 602.586s, speedup 1.674x
32, opt runtime 16.542s, model runtime 339.860s, pg runtime 461.957s, speedup 1.359x
33, opt runtime 16.136s, model runtime 338.732s, pg runtime 410.283s, speedup 1.211x
34, opt runtime 14.422s, model runtime 344.192s, pg runtime 497.542s, speedup 1.446x
35, opt runtime 15.980s, model runtime 338.670s, pg runtime 504.239s, speedup 1.489x
36, opt runtime 16.482s, model runtime 353.788s, pg runtime 622.915s, speedup 1.761x
37, opt runtime 16.301s, model runtime 349.420s, pg runtime 646.719s, speedup 1.851x
38, opt runtime 16.194s, model runtime 347.772s, pg runtime 439.255s, speedup 1.263x
39, opt runtime 16.149s, model runtime 348.583s, pg runtime 423.122s, speedup 1.214x
40, opt runtime 13.751s, model runtime 345.840s, pg runtime 434.625s, speedup 1.257x
====================
JOB best validation speedup epoch: 10, train speedup 1.798, test speedup 2.308, val speedup 1.493
TPCH best validation speedup epoch: 10, train speedup 1.798, test speedup 2.377, val speedup 1.493
TPCH Skew best validation speedup epoch: 10, train speedup 1.798, test speedup 2.310, val speedup 1.493
execution cost 0:15:06.100805
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.300738, and there are 26041 training samples
in channel 9
JOB test speedup 0.9072541800093104
TPCH test speedup 1.2305682646072817
TPCH skew test speedup 1.1100570801270278
Epoch 0/50 |loss: 0.374853| train set 1.660x speedup, test set 1.110x speedup, val set 0.516x speedup, step: 1, train time 17.67 s
JOB test speedup 1.0896737215467611
TPCH test speedup 5.776772123875959
TPCH skew test speedup 5.389153826567194
Epoch 1/50 |loss: 0.297075| train set 1.723x speedup, test set 5.389x speedup, val set 0.516x speedup, step: 1, train time 16.21 s
JOB test speedup 1.0997071448780735
TPCH test speedup 1.8070664169694275
TPCH skew test speedup 1.6181496086499556
Epoch 2/50 |loss: 0.267010| train set 1.727x speedup, test set 1.618x speedup, val set 0.515x speedup, step: 2, train time 16.12 s
JOB test speedup 1.0960888554065682
TPCH test speedup 2.3177652104417876
TPCH skew test speedup 2.1445920804892133
Epoch 3/50 |loss: 0.249594| train set 1.791x speedup, test set 2.145x speedup, val set 0.515x speedup, step: 3, train time 16.22 s
JOB test speedup 2.1465116058328264
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 4/50 |loss: 0.234612| train set 1.792x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 4, train time 16.29 s
JOB test speedup 1.9896785417749636
TPCH test speedup 4.2822764517324226
TPCH skew test speedup 4.119683644423823
Epoch 5/50 |loss: 0.226131| train set 1.755x speedup, test set 4.120x speedup, val set 0.512x speedup, step: 5, train time 16.27 s
JOB test speedup 1.8698582981670437
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 6/50 |loss: 0.212379| train set 1.753x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 6, train time 16.40 s
JOB test speedup 1.0995640737274042
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 7/50 |loss: 0.206255| train set 1.761x speedup, test set 2.046x speedup, val set 1.469x speedup, step: 1, train time 16.49 s
JOB test speedup 2.320065996757537
TPCH test speedup 3.785469257508429
TPCH skew test speedup 3.646560037733149
Epoch 8/50 |loss: 0.199036| train set 1.798x speedup, test set 3.647x speedup, val set 1.483x speedup, step: 1, train time 16.27 s
JOB test speedup 2.0154886573162627
TPCH test speedup 2.158598565512259
TPCH skew test speedup 2.1034570214219523
Epoch 9/50 |loss: 0.193773| train set 1.790x speedup, test set 2.103x speedup, val set 0.515x speedup, step: 2, train time 16.49 s
JOB test speedup 2.22434973243125
TPCH test speedup 3.785469257508429
TPCH skew test speedup 3.646560037733149
Epoch 10/50 |loss: 0.186437| train set 1.669x speedup, test set 3.647x speedup, val set 0.515x speedup, step: 3, train time 16.41 s
JOB test speedup 2.124286506621689
TPCH test speedup 3.9586617930419608
TPCH skew test speedup 3.646560037733149
Epoch 11/50 |loss: 0.184028| train set 1.669x speedup, test set 3.647x speedup, val set 0.512x speedup, step: 4, train time 16.30 s
JOB test speedup 2.1005472349204393
TPCH test speedup 4.6528178833697735
TPCH skew test speedup 4.578794901182424
Epoch 12/50 |loss: 0.180598| train set 1.775x speedup, test set 4.579x speedup, val set 0.515x speedup, step: 5, train time 16.39 s
JOB test speedup 2.1064594925001665
TPCH test speedup 3.785469257508429
TPCH skew test speedup 3.646560037733149
Epoch 13/50 |loss: 0.178979| train set 1.791x speedup, test set 3.647x speedup, val set 1.469x speedup, step: 6, train time 16.39 s
JOB test speedup 2.100595020102927
TPCH test speedup 5.329900247383579
TPCH skew test speedup 4.774172357710005
Epoch 14/50 |loss: 0.174076| train set 1.795x speedup, test set 4.774x speedup, val set 0.512x speedup, step: 7, train time 16.49 s
JOB test speedup 2.7058015788774936
TPCH test speedup 3.809459602041378
TPCH skew test speedup 3.646560037733149
Epoch 15/50 |loss: 0.171199| train set 1.798x speedup, test set 3.647x speedup, val set 0.515x speedup, step: 8, train time 16.60 s
JOB test speedup 2.0101922383947883
TPCH test speedup 3.785469257508429
TPCH skew test speedup 3.646560037733149
Epoch 16/50 |loss: 0.169849| train set 1.766x speedup, test set 3.647x speedup, val set 0.512x speedup, step: 9, train time 16.39 s
JOB test speedup 2.1723548817911897
TPCH test speedup 3.940617447560656
TPCH skew test speedup 3.8056219548164503
Epoch 17/50 |loss: 0.163210| train set 1.762x speedup, test set 3.806x speedup, val set 0.512x speedup, step: 10, train time 16.48 s
JOB test speedup 2.1502654077428467
TPCH test speedup 3.785469257508429
TPCH skew test speedup 3.646560037733149
Epoch 18/50 |loss: 0.162117| train set 1.799x speedup, test set 3.647x speedup, val set 0.512x speedup, step: 11, train time 16.62 s
JOB test speedup 2.0157738838206516
TPCH test speedup 3.785469257508429
TPCH skew test speedup 3.646560037733149
Epoch 19/50 |loss: 0.163035| train set 1.780x speedup, test set 3.647x speedup, val set 0.512x speedup, step: 12, train time 16.51 s
JOB test speedup 2.25916546888105
TPCH test speedup 4.586681916133835
TPCH skew test speedup 4.112418740931118
Epoch 20/50 |loss: 0.159476| train set 1.763x speedup, test set 4.112x speedup, val set 0.512x speedup, step: 13, train time 16.49 s
JOB test speedup 2.277874502970365
TPCH test speedup 4.5990304860862965
TPCH skew test speedup 4.461192760837642
Epoch 21/50 |loss: 0.156235| train set 1.798x speedup, test set 4.461x speedup, val set 0.515x speedup, step: 14, train time 16.52 s
JOB test speedup 2.364435958762906
TPCH test speedup 3.8340117823643114
TPCH skew test speedup 3.728179620151622
Epoch 22/50 |loss: 0.158079| train set 1.780x speedup, test set 3.728x speedup, val set 1.469x speedup, step: 15, train time 16.52 s
JOB test speedup 2.368317784987264
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 23/50 |loss: 0.152481| train set 1.672x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 16, train time 16.50 s
JOB test speedup 2.062092825523875
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 24/50 |loss: 0.149512| train set 1.773x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 17, train time 16.70 s
JOB test speedup 2.9712134085584685
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 25/50 |loss: 0.151020| train set 1.797x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 18, train time 16.69 s
JOB test speedup 1.9701541197283463
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 26/50 |loss: 0.149961| train set 1.795x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 19, train time 16.68 s
JOB test speedup 2.1011914203833966
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 27/50 |loss: 0.149416| train set 1.798x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 20, train time 16.59 s
JOB test speedup 2.1018467131424616
TPCH test speedup 3.809459602041378
TPCH skew test speedup 3.646560037733149
Epoch 28/50 |loss: 0.143726| train set 1.793x speedup, test set 3.647x speedup, val set 0.515x speedup, step: 21, train time 16.78 s
JOB test speedup 2.1490007612817275
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 29/50 |loss: 0.142284| train set 1.801x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 22, train time 16.68 s
JOB test speedup 2.103824669118582
TPCH test speedup 3.8340117823643114
TPCH skew test speedup 3.646560037733149
Epoch 30/50 |loss: 0.143057| train set 1.686x speedup, test set 3.647x speedup, val set 0.512x speedup, step: 23, train time 16.70 s
JOB test speedup 2.10549755549199
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 31/50 |loss: 0.139864| train set 1.780x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 24, train time 16.67 s
JOB test speedup 2.1106607638104364
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 32/50 |loss: 0.140113| train set 1.780x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 25, train time 16.69 s
JOB test speedup 2.1055138386778833
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 33/50 |loss: 0.136828| train set 1.780x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 26, train time 16.81 s
JOB test speedup 2.1057581166926305
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 34/50 |loss: 0.140102| train set 1.800x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 27, train time 16.80 s
JOB test speedup 1.1331690904517413
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 35/50 |loss: 0.137370| train set 1.800x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 28, train time 16.71 s
JOB test speedup 2.1514906710170956
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 36/50 |loss: 0.133236| train set 1.777x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 29, train time 16.81 s
JOB test speedup 2.110677126955475
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 37/50 |loss: 0.134344| train set 1.781x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 30, train time 16.69 s
JOB test speedup 2.101434696410945
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 38/50 |loss: 0.132059| train set 1.776x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 31, train time 16.71 s
JOB test speedup 2.1055138386778833
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 39/50 |loss: 0.133167| train set 1.767x speedup, test set 4.461x speedup, val set 0.515x speedup, step: 32, train time 16.61 s
JOB test speedup 1.1299858838964563
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 40/50 |loss: 0.133245| train set 1.798x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 33, train time 16.88 s
JOB test speedup 2.110677126955475
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 41/50 |loss: 0.129650| train set 1.800x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 34, train time 16.48 s
JOB test speedup 2.1011914203833966
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 42/50 |loss: 0.130186| train set 1.799x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 35, train time 16.59 s
JOB test speedup 1.1299905739130371
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.079391165928911
Epoch 43/50 |loss: 0.128148| train set 1.798x speedup, test set 2.079x speedup, val set 0.515x speedup, step: 36, train time 16.72 s
JOB test speedup 2.1086522628118702
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 44/50 |loss: 0.127079| train set 1.801x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 37, train time 16.78 s
JOB test speedup 1.1299905739130371
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 45/50 |loss: 0.128362| train set 1.780x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 38, train time 16.69 s
JOB test speedup 2.104330080227521
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 46/50 |loss: 0.128137| train set 1.800x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 39, train time 16.99 s
JOB test speedup 2.1535187622595497
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 47/50 |loss: 0.127087| train set 1.801x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 40, train time 16.85 s
JOB test speedup 2.138182058982283
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 48/50 |loss: 0.125231| train set 1.802x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 41, train time 18.31 s
JOB test speedup 2.1106607638104364
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 49/50 |loss: 0.124284| train set 1.799x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 42, train time 17.49 s
Training per epoch cost 16.643 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 2.323s, pg runtime 1.386s, speedup 0.597x
05, opt runtime 3.504s, model runtime 3.504s, pg runtime 6.143s, speedup 1.753x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
08, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.393s, speedup 2.504x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.379s, pg runtime 3.645s, speedup 9.614x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
12, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
13, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
14, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
15, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
16, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
17, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
18, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
19, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
20, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 167.703s, pg runtime 80.711s, speedup 0.481x
12, opt runtime 53.203s, model runtime 163.373s, pg runtime 79.156s, speedup 0.485x
13, opt runtime 51.456s, model runtime 157.240s, pg runtime 93.781s, speedup 0.596x
14, opt runtime 54.696s, model runtime 167.507s, pg runtime 98.172s, speedup 0.586x
15, opt runtime 51.200s, model runtime 163.049s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 152.849s, pg runtime 80.007s, speedup 0.523x
17, opt runtime 54.335s, model runtime 159.237s, pg runtime 95.799s, speedup 0.602x
18, opt runtime 48.088s, model runtime 162.057s, pg runtime 77.369s, speedup 0.477x
19, opt runtime 52.382s, model runtime 161.008s, pg runtime 82.710s, speedup 0.514x
20, opt runtime 52.135s, model runtime 165.502s, pg runtime 102.039s, speedup 0.617x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 8, train speedup 1.798, test speedup 2.320, val speedup 1.483
TPCH best validation speedup epoch: 8, train speedup 1.798, test speedup 3.785, val speedup 1.483
TPCH Skew best validation speedup epoch: 8, train speedup 1.798, test speedup 3.647, val speedup 1.483
execution cost 0:14:50.646282
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.599335, and there are 26041 training samples
in channel 9
JOB test speedup 0.9072541800093104
TPCH test speedup 3.377618737063465
TPCH skew test speedup 2.5195720150978236
Epoch 0/50 |loss: 0.375983| train set 1.530x speedup, test set 2.520x speedup, val set 0.429x speedup, step: 1, train time 18.18 s
JOB test speedup 1.0831938224412125
TPCH test speedup 2.562639375435389
TPCH skew test speedup 2.173901857247425
Epoch 1/50 |loss: 0.296925| train set 1.767x speedup, test set 2.174x speedup, val set 0.516x speedup, step: 1, train time 16.72 s
JOB test speedup 0.9257741070312052
TPCH test speedup 1.1914032439230222
TPCH skew test speedup 1.1461877326287448
Epoch 2/50 |loss: 0.267313| train set 1.744x speedup, test set 1.146x speedup, val set 1.492x speedup, step: 1, train time 16.70 s
JOB test speedup 0.9015292921415262
TPCH test speedup 1.4416118058856402
TPCH skew test speedup 1.4073108285657774
Epoch 3/50 |loss: 0.252071| train set 1.786x speedup, test set 1.407x speedup, val set 0.515x speedup, step: 2, train time 16.49 s
JOB test speedup 1.0823365337495832
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 4/50 |loss: 0.238600| train set 1.790x speedup, test set 2.046x speedup, val set 1.470x speedup, step: 3, train time 16.38 s
JOB test speedup 1.544562358530879
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 5/50 |loss: 0.228037| train set 1.789x speedup, test set 2.046x speedup, val set 1.492x speedup, step: 4, train time 16.48 s
JOB test speedup 1.41784408834079
TPCH test speedup 1.4416118058856402
TPCH skew test speedup 1.4073108285657774
Epoch 6/50 |loss: 0.216539| train set 1.771x speedup, test set 1.407x speedup, val set 0.512x speedup, step: 5, train time 16.47 s
JOB test speedup 0.9194398727792409
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 7/50 |loss: 0.206280| train set 1.698x speedup, test set 2.046x speedup, val set 1.492x speedup, step: 6, train time 16.39 s
JOB test speedup 2.765663510124909
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 8/50 |loss: 0.199181| train set 1.792x speedup, test set 2.046x speedup, val set 1.483x speedup, step: 7, train time 16.40 s
JOB test speedup 1.4702584196345745
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 9/50 |loss: 0.195145| train set 1.790x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 8, train time 16.50 s
JOB test speedup 2.1847814740515004
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 10/50 |loss: 0.187279| train set 1.794x speedup, test set 2.046x speedup, val set 1.469x speedup, step: 9, train time 16.50 s
JOB test speedup 1.5794138011638474
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 11/50 |loss: 0.184691| train set 1.668x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 10, train time 16.48 s
JOB test speedup 2.0150253383043415
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 12/50 |loss: 0.181434| train set 1.777x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 11, train time 16.69 s
JOB test speedup 1.5768690177759987
TPCH test speedup 4.291673447618084
TPCH skew test speedup 4.128046231222904
Epoch 13/50 |loss: 0.178198| train set 1.797x speedup, test set 4.128x speedup, val set 1.469x speedup, step: 12, train time 16.67 s
JOB test speedup 1.4616581544295764
TPCH test speedup 2.1022255459575296
TPCH skew test speedup 2.045891742032457
Epoch 14/50 |loss: 0.175238| train set 1.800x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 13, train time 16.58 s
JOB test speedup 1.7564800785760717
TPCH test speedup 4.291673447618084
TPCH skew test speedup 4.128046231222904
Epoch 15/50 |loss: 0.172200| train set 1.799x speedup, test set 4.128x speedup, val set 0.512x speedup, step: 14, train time 16.59 s
JOB test speedup 1.370468154063121
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 16/50 |loss: 0.169758| train set 1.762x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 15, train time 16.69 s
JOB test speedup 1.8979371608120108
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 17/50 |loss: 0.163466| train set 1.777x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 16, train time 16.71 s
JOB test speedup 1.4618799059224448
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 18/50 |loss: 0.162416| train set 1.763x speedup, test set 2.046x speedup, val set 1.470x speedup, step: 17, train time 16.58 s
JOB test speedup 0.8752967315930656
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 19/50 |loss: 0.161706| train set 1.776x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 18, train time 16.68 s
JOB test speedup 0.9369053421191327
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 20/50 |loss: 0.158600| train set 1.761x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 19, train time 16.69 s
JOB test speedup 2.1505568977930194
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 21/50 |loss: 0.155882| train set 1.799x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 20, train time 16.68 s
JOB test speedup 2.125010190035436
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 22/50 |loss: 0.156293| train set 1.776x speedup, test set 2.046x speedup, val set 1.469x speedup, step: 21, train time 16.78 s
JOB test speedup 2.1051133750718765
TPCH test speedup 4.291673447618084
TPCH skew test speedup 4.128046231222904
Epoch 23/50 |loss: 0.153443| train set 1.800x speedup, test set 4.128x speedup, val set 0.512x speedup, step: 22, train time 16.80 s
JOB test speedup 1.419405101479374
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 24/50 |loss: 0.150559| train set 1.771x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 23, train time 16.89 s
JOB test speedup 0.9693178842341085
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 25/50 |loss: 0.151226| train set 1.799x speedup, test set 2.046x speedup, val set 1.492x speedup, step: 1, train time 16.92 s
JOB test speedup 1.350758676208157
TPCH test speedup 2.132842699572543
TPCH skew test speedup 2.079391165928911
Epoch 26/50 |loss: 0.148922| train set 1.799x speedup, test set 2.079x speedup, val set 0.512x speedup, step: 2, train time 17.76 s
JOB test speedup 1.447834619755824
TPCH test speedup 2.1022255459575296
TPCH skew test speedup 2.045891742032457
Epoch 27/50 |loss: 0.147314| train set 1.799x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 3, train time 17.60 s
JOB test speedup 1.0486720328092753
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 28/50 |loss: 0.144260| train set 1.795x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 4, train time 16.88 s
JOB test speedup 1.4551539314899564
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 29/50 |loss: 0.143101| train set 1.796x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 5, train time 17.60 s
JOB test speedup 1.4587603441635644
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 30/50 |loss: 0.144416| train set 1.795x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 6, train time 17.29 s
JOB test speedup 1.4558123602927049
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 31/50 |loss: 0.140611| train set 1.798x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 7, train time 17.23 s
JOB test speedup 1.4462573979241273
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 32/50 |loss: 0.140403| train set 1.782x speedup, test set 2.046x speedup, val set 1.469x speedup, step: 8, train time 17.17 s
JOB test speedup 1.4662677718871626
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 33/50 |loss: 0.138633| train set 1.798x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 9, train time 16.89 s
JOB test speedup 1.4648348367509991
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 34/50 |loss: 0.139318| train set 1.801x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 10, train time 16.79 s
JOB test speedup 0.9248471615328425
TPCH test speedup 2.132842699572543
TPCH skew test speedup 2.045891742032457
Epoch 35/50 |loss: 0.137098| train set 1.796x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 11, train time 16.79 s
JOB test speedup 1.4489237877044492
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 36/50 |loss: 0.133785| train set 1.778x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 12, train time 16.96 s
JOB test speedup 1.459182014474748
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 37/50 |loss: 0.132677| train set 1.799x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 13, train time 16.90 s
JOB test speedup 1.4579076195743246
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 38/50 |loss: 0.131887| train set 1.794x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 14, train time 17.08 s
JOB test speedup 1.4395903313152107
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 39/50 |loss: 0.133440| train set 1.745x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 15, train time 16.92 s
JOB test speedup 0.903796478834595
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 40/50 |loss: 0.133866| train set 1.800x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 16, train time 16.79 s
JOB test speedup 0.9105829590029698
TPCH test speedup 3.8855486809948108
TPCH skew test speedup 2.562968742309763
Epoch 41/50 |loss: 0.129857| train set 1.778x speedup, test set 2.563x speedup, val set 0.515x speedup, step: 17, train time 16.87 s
JOB test speedup 0.9131095206682838
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 42/50 |loss: 0.129848| train set 1.799x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 18, train time 16.97 s
JOB test speedup 0.9120893126803544
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 43/50 |loss: 0.128908| train set 1.797x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 19, train time 16.83 s
JOB test speedup 0.9077722409220927
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 44/50 |loss: 0.129036| train set 1.802x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 20, train time 16.82 s
JOB test speedup 0.8980329299083142
TPCH test speedup 2.1679443799180516
TPCH skew test speedup 2.1267426758963386
Epoch 45/50 |loss: 0.127851| train set 1.781x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 21, train time 16.98 s
JOB test speedup 1.4699428854428636
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 46/50 |loss: 0.127065| train set 1.800x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 22, train time 17.01 s
JOB test speedup 0.8917893445385418
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 47/50 |loss: 0.128705| train set 1.800x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 23, train time 16.80 s
JOB test speedup 2.0196186051437657
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 48/50 |loss: 0.122866| train set 1.801x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 24, train time 16.79 s
JOB test speedup 1.4563793154335796
TPCH test speedup 3.785469257508429
TPCH skew test speedup 3.646560037733149
Epoch 49/50 |loss: 0.126330| train set 1.799x speedup, test set 3.647x speedup, val set 0.515x speedup, step: 25, train time 16.90 s
Training per epoch cost 16.846 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 2.323s, pg runtime 1.386s, speedup 0.597x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
10, opt runtime 3.248s, model runtime 3.248s, pg runtime 10.538s, speedup 3.244x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 50.837s, pg runtime 13.945s, speedup 0.274x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
12, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
13, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
14, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
15, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
16, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
17, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
18, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
19, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
20, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 341.320s, pg runtime 432.766s, speedup 1.268x
32, opt runtime 15.120s, model runtime 353.483s, pg runtime 566.078s, speedup 1.601x
33, opt runtime 16.639s, model runtime 353.418s, pg runtime 462.544s, speedup 1.309x
34, opt runtime 16.280s, model runtime 367.037s, pg runtime 634.990s, speedup 1.730x
35, opt runtime 16.528s, model runtime 354.584s, pg runtime 620.762s, speedup 1.751x
36, opt runtime 18.690s, model runtime 355.233s, pg runtime 651.942s, speedup 1.835x
37, opt runtime 16.438s, model runtime 352.471s, pg runtime 546.887s, speedup 1.552x
38, opt runtime 16.138s, model runtime 345.514s, pg runtime 501.793s, speedup 1.452x
39, opt runtime 16.770s, model runtime 344.251s, pg runtime 594.754s, speedup 1.728x
40, opt runtime 16.305s, model runtime 343.002s, pg runtime 436.168s, speedup 1.272x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 167.703s, pg runtime 80.711s, speedup 0.481x
12, opt runtime 53.203s, model runtime 163.373s, pg runtime 79.156s, speedup 0.485x
13, opt runtime 51.456s, model runtime 157.240s, pg runtime 93.781s, speedup 0.596x
14, opt runtime 54.696s, model runtime 167.507s, pg runtime 98.172s, speedup 0.586x
15, opt runtime 51.200s, model runtime 163.049s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 152.849s, pg runtime 80.007s, speedup 0.523x
17, opt runtime 54.335s, model runtime 159.237s, pg runtime 95.799s, speedup 0.602x
18, opt runtime 48.088s, model runtime 162.057s, pg runtime 77.369s, speedup 0.477x
19, opt runtime 52.382s, model runtime 161.008s, pg runtime 82.710s, speedup 0.514x
20, opt runtime 52.135s, model runtime 165.502s, pg runtime 102.039s, speedup 0.617x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 359.909s, pg runtime 602.586s, speedup 1.674x
32, opt runtime 16.542s, model runtime 339.860s, pg runtime 461.957s, speedup 1.359x
33, opt runtime 16.136s, model runtime 338.732s, pg runtime 410.283s, speedup 1.211x
34, opt runtime 14.422s, model runtime 344.192s, pg runtime 497.542s, speedup 1.446x
35, opt runtime 15.980s, model runtime 338.670s, pg runtime 504.239s, speedup 1.489x
36, opt runtime 16.482s, model runtime 353.788s, pg runtime 622.915s, speedup 1.761x
37, opt runtime 16.301s, model runtime 349.420s, pg runtime 646.719s, speedup 1.851x
38, opt runtime 16.194s, model runtime 347.772s, pg runtime 439.255s, speedup 1.263x
39, opt runtime 16.149s, model runtime 348.583s, pg runtime 423.122s, speedup 1.214x
40, opt runtime 13.751s, model runtime 345.840s, pg runtime 434.625s, speedup 1.257x
====================
JOB best validation speedup epoch: 25, train speedup 1.799, test speedup 0.969, val speedup 1.492
TPCH best validation speedup epoch: 25, train speedup 1.799, test speedup 2.095, val speedup 1.492
TPCH Skew best validation speedup epoch: 25, train speedup 1.799, test speedup 2.046, val speedup 1.492
execution cost 0:15:02.656122
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.356927, and there are 26041 training samples
in channel 9
JOB test speedup 0.9072541800093104
TPCH test speedup 1.2305682646072817
TPCH skew test speedup 1.1100570801270278
Epoch 0/50 |loss: 0.374003| train set 1.660x speedup, test set 1.110x speedup, val set 0.429x speedup, step: 1, train time 17.57 s
JOB test speedup 0.9137292280524911
TPCH test speedup 6.700821430239476
TPCH skew test speedup 6.516214602098856
Epoch 1/50 |loss: 0.298454| train set 1.782x speedup, test set 6.516x speedup, val set 0.515x speedup, step: 1, train time 16.32 s
JOB test speedup 1.0914514409301237
TPCH test speedup 1.641004648444058
TPCH skew test speedup 1.6095249815187038
Epoch 2/50 |loss: 0.268249| train set 1.740x speedup, test set 1.610x speedup, val set 0.515x speedup, step: 1, train time 16.30 s
JOB test speedup 0.9068325925805851
TPCH test speedup 2.544110105691499
TPCH skew test speedup 2.5030621095008483
Epoch 3/50 |loss: 0.252681| train set 1.709x speedup, test set 2.503x speedup, val set 0.515x speedup, step: 2, train time 16.37 s
JOB test speedup 1.1082880534466837
TPCH test speedup 2.1468785010101428
TPCH skew test speedup 2.045891742032457
Epoch 4/50 |loss: 0.236228| train set 1.791x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 3, train time 16.38 s
JOB test speedup 1.4672485152678032
TPCH test speedup 2.2534596628546746
TPCH skew test speedup 2.196143561928886
Epoch 5/50 |loss: 0.229061| train set 1.757x speedup, test set 2.196x speedup, val set 1.492x speedup, step: 1, train time 16.39 s
JOB test speedup 0.9072085136025261
TPCH test speedup 2.224022490134563
TPCH skew test speedup 2.196143561928886
Epoch 6/50 |loss: 0.216524| train set 1.789x speedup, test set 2.196x speedup, val set 0.512x speedup, step: 2, train time 16.30 s
JOB test speedup 0.9224915918777143
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.0713334842175164
Epoch 7/50 |loss: 0.209055| train set 1.748x speedup, test set 2.071x speedup, val set 1.492x speedup, step: 1, train time 16.50 s
JOB test speedup 2.172666416180629
TPCH test speedup 2.224022490134563
TPCH skew test speedup 2.196143561928886
Epoch 8/50 |loss: 0.201333| train set 1.796x speedup, test set 2.196x speedup, val set 1.491x speedup, step: 2, train time 16.58 s
JOB test speedup 1.4747962814946975
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 9/50 |loss: 0.196672| train set 1.791x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 3, train time 17.70 s
JOB test speedup 2.1777514485280673
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 10/50 |loss: 0.189392| train set 1.796x speedup, test set 2.127x speedup, val set 0.721x speedup, step: 4, train time 17.89 s
JOB test speedup 1.2454334220252883
TPCH test speedup 2.4828661378196792
TPCH skew test speedup 2.501487684935357
Epoch 11/50 |loss: 0.185793| train set 1.685x speedup, test set 2.501x speedup, val set 0.512x speedup, step: 5, train time 17.08 s
JOB test speedup 2.026508768747207
TPCH test speedup 2.356393836875425
TPCH skew test speedup 2.3097278570640705
Epoch 12/50 |loss: 0.181492| train set 1.774x speedup, test set 2.310x speedup, val set 1.478x speedup, step: 6, train time 17.00 s
JOB test speedup 1.4812339688683565
TPCH test speedup 5.340139000325813
TPCH skew test speedup 5.256993765935433
Epoch 13/50 |loss: 0.178996| train set 1.793x speedup, test set 5.257x speedup, val set 0.513x speedup, step: 7, train time 16.89 s
JOB test speedup 1.4644419328383502
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 14/50 |loss: 0.176125| train set 1.779x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 8, train time 16.92 s
JOB test speedup 1.7373656930093637
TPCH test speedup 4.738164732159204
TPCH skew test speedup 4.471000930458193
Epoch 15/50 |loss: 0.173816| train set 1.797x speedup, test set 4.471x speedup, val set 0.512x speedup, step: 9, train time 16.78 s
JOB test speedup 1.481063499428607
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.045891742032457
Epoch 16/50 |loss: 0.170758| train set 1.796x speedup, test set 2.046x speedup, val set 0.513x speedup, step: 10, train time 16.79 s
JOB test speedup 1.5103419534770834
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 17/50 |loss: 0.164489| train set 1.771x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 11, train time 16.59 s
JOB test speedup 1.4678495634235542
TPCH test speedup 2.1679443799180516
TPCH skew test speedup 2.1176124094757207
Epoch 18/50 |loss: 0.163043| train set 1.795x speedup, test set 2.118x speedup, val set 1.478x speedup, step: 12, train time 16.48 s
JOB test speedup 1.1520331782532442
TPCH test speedup 2.482099456496856
TPCH skew test speedup 2.470465026232988
Epoch 19/50 |loss: 0.164239| train set 1.777x speedup, test set 2.470x speedup, val set 0.512x speedup, step: 13, train time 16.60 s
JOB test speedup 0.954235726013453
TPCH test speedup 2.1679443799180516
TPCH skew test speedup 2.1176124094757207
Epoch 20/50 |loss: 0.160941| train set 1.763x speedup, test set 2.118x speedup, val set 0.512x speedup, step: 14, train time 16.69 s
JOB test speedup 1.5173114130122736
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 21/50 |loss: 0.157481| train set 1.799x speedup, test set 2.119x speedup, val set 0.515x speedup, step: 15, train time 16.50 s
JOB test speedup 1.4479515057147223
TPCH test speedup 2.3246509749153805
TPCH skew test speedup 2.280165188094074
Epoch 22/50 |loss: 0.157958| train set 1.796x speedup, test set 2.280x speedup, val set 1.479x speedup, step: 16, train time 16.58 s
JOB test speedup 1.1879797306877324
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 23/50 |loss: 0.153379| train set 1.800x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 17, train time 16.68 s
JOB test speedup 1.9415677794483372
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 24/50 |loss: 0.151422| train set 1.777x speedup, test set 2.119x speedup, val set 0.513x speedup, step: 18, train time 16.70 s
JOB test speedup 1.1643483882317973
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 25/50 |loss: 0.151716| train set 1.799x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 19, train time 16.70 s
JOB test speedup 1.4360833845876315
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.9259290446019453
Epoch 26/50 |loss: 0.151963| train set 1.799x speedup, test set 2.926x speedup, val set 0.513x speedup, step: 20, train time 16.66 s
JOB test speedup 1.5028959155003359
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 27/50 |loss: 0.150475| train set 1.798x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 21, train time 16.78 s
JOB test speedup 0.7834401195561164
TPCH test speedup 2.3306870550762584
TPCH skew test speedup 2.3097278570640705
Epoch 28/50 |loss: 0.146065| train set 1.797x speedup, test set 2.310x speedup, val set 0.513x speedup, step: 22, train time 16.61 s
JOB test speedup 1.107153360212713
TPCH test speedup 2.482099456496856
TPCH skew test speedup 2.4038728055355993
Epoch 29/50 |loss: 0.143822| train set 1.794x speedup, test set 2.404x speedup, val set 0.513x speedup, step: 23, train time 16.71 s
JOB test speedup 1.4675297597274832
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 30/50 |loss: 0.144549| train set 1.797x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 24, train time 16.68 s
JOB test speedup 1.4402063243215826
TPCH test speedup 3.998694715843691
TPCH skew test speedup 3.8335547667949084
Epoch 31/50 |loss: 0.141719| train set 1.797x speedup, test set 3.834x speedup, val set 0.513x speedup, step: 25, train time 16.63 s
JOB test speedup 1.9988684275391175
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 32/50 |loss: 0.142227| train set 1.781x speedup, test set 2.119x speedup, val set 0.513x speedup, step: 26, train time 16.50 s
JOB test speedup 1.471489773593279
TPCH test speedup 3.998694715843691
TPCH skew test speedup 3.8808337771196704
Epoch 33/50 |loss: 0.139794| train set 1.798x speedup, test set 3.881x speedup, val set 0.513x speedup, step: 27, train time 16.69 s
JOB test speedup 2.086595787560769
TPCH test speedup 4.030884325959783
TPCH skew test speedup 3.911609093039202
Epoch 34/50 |loss: 0.140801| train set 1.800x speedup, test set 3.912x speedup, val set 0.513x speedup, step: 28, train time 16.87 s
JOB test speedup 0.9183616573945003
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 35/50 |loss: 0.139633| train set 1.795x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 29, train time 16.54 s
JOB test speedup 1.460095091802294
TPCH test speedup 2.1970671879460975
TPCH skew test speedup 2.1186194064273023
Epoch 36/50 |loss: 0.135521| train set 1.777x speedup, test set 2.119x speedup, val set 0.513x speedup, step: 30, train time 16.67 s
JOB test speedup 2.013126167495513
TPCH test speedup 5.340139000325813
TPCH skew test speedup 5.256993765935433
Epoch 37/50 |loss: 0.137272| train set 1.795x speedup, test set 5.257x speedup, val set 0.513x speedup, step: 31, train time 16.68 s
JOB test speedup 1.1514429220566078
TPCH test speedup 5.152308551700688
TPCH skew test speedup 4.717935279781826
Epoch 38/50 |loss: 0.134319| train set 1.776x speedup, test set 4.718x speedup, val set 0.512x speedup, step: 32, train time 16.50 s
JOB test speedup 1.4517038205170552
TPCH test speedup 4.5981251881831655
TPCH skew test speedup 4.673236897323765
Epoch 39/50 |loss: 0.135309| train set 1.747x speedup, test set 4.673x speedup, val set 0.512x speedup, step: 33, train time 16.67 s
JOB test speedup 0.9132852407430946
TPCH test speedup 2.117280680826855
TPCH skew test speedup 2.0871364246175985
Epoch 40/50 |loss: 0.136611| train set 1.783x speedup, test set 2.087x speedup, val set 0.513x speedup, step: 34, train time 16.70 s
JOB test speedup 1.4894795119496
TPCH test speedup 3.940617447560656
TPCH skew test speedup 3.8335547667949084
Epoch 41/50 |loss: 0.130613| train set 1.779x speedup, test set 3.834x speedup, val set 0.512x speedup, step: 35, train time 16.60 s
JOB test speedup 1.127269649803648
TPCH test speedup 3.8200600911982927
TPCH skew test speedup 3.646560037733149
Epoch 42/50 |loss: 0.131103| train set 1.798x speedup, test set 3.647x speedup, val set 0.513x speedup, step: 36, train time 16.51 s
JOB test speedup 0.9121933808122628
TPCH test speedup 3.8200600911982927
TPCH skew test speedup 3.646560037733149
Epoch 43/50 |loss: 0.130154| train set 1.798x speedup, test set 3.647x speedup, val set 0.513x speedup, step: 37, train time 16.50 s
JOB test speedup 0.9081609350190487
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 44/50 |loss: 0.131050| train set 1.801x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 38, train time 16.62 s
JOB test speedup 0.9084107215294287
TPCH test speedup 2.3735676492688755
TPCH skew test speedup 2.3006952136483325
Epoch 45/50 |loss: 0.129053| train set 1.779x speedup, test set 2.301x speedup, val set 0.512x speedup, step: 39, train time 16.59 s
JOB test speedup 1.4515414000317601
TPCH test speedup 5.4501519769880735
TPCH skew test speedup 5.406653340363816
Epoch 46/50 |loss: 0.128484| train set 1.768x speedup, test set 5.407x speedup, val set 0.513x speedup, step: 40, train time 16.58 s
JOB test speedup 0.9130051620782614
TPCH test speedup 5.628090902540633
TPCH skew test speedup 5.7239040155619865
Epoch 47/50 |loss: 0.129519| train set 1.801x speedup, test set 5.724x speedup, val set 0.513x speedup, step: 41, train time 16.71 s
JOB test speedup 2.086931432314584
TPCH test speedup 2.160937994699363
TPCH skew test speedup 2.1186194064273023
Epoch 48/50 |loss: 0.125567| train set 1.802x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 42, train time 16.58 s
JOB test speedup 2.0268488733584697
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 49/50 |loss: 0.127187| train set 1.797x speedup, test set 2.119x speedup, val set 0.513x speedup, step: 43, train time 16.50 s
Training per epoch cost 16.686 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
13, opt runtime 5.179s, model runtime 10.240s, pg runtime 10.685s, speedup 1.043x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
13, opt runtime 53.440s, model runtime 136.731s, pg runtime 140.742s, speedup 1.029x
14, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
15, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
16, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
17, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
18, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
19, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
20, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 341.320s, pg runtime 432.766s, speedup 1.268x
32, opt runtime 15.120s, model runtime 353.483s, pg runtime 566.078s, speedup 1.601x
33, opt runtime 16.639s, model runtime 353.418s, pg runtime 462.544s, speedup 1.309x
34, opt runtime 16.280s, model runtime 367.037s, pg runtime 634.990s, speedup 1.730x
35, opt runtime 16.528s, model runtime 354.584s, pg runtime 620.762s, speedup 1.751x
36, opt runtime 18.690s, model runtime 355.233s, pg runtime 651.942s, speedup 1.835x
37, opt runtime 16.438s, model runtime 352.471s, pg runtime 546.887s, speedup 1.552x
38, opt runtime 16.138s, model runtime 345.514s, pg runtime 501.793s, speedup 1.452x
39, opt runtime 16.770s, model runtime 344.251s, pg runtime 594.754s, speedup 1.728x
40, opt runtime 16.305s, model runtime 343.002s, pg runtime 436.168s, speedup 1.272x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 167.703s, pg runtime 80.711s, speedup 0.481x
12, opt runtime 53.203s, model runtime 163.373s, pg runtime 79.156s, speedup 0.485x
13, opt runtime 51.456s, model runtime 157.240s, pg runtime 93.781s, speedup 0.596x
14, opt runtime 54.696s, model runtime 141.455s, pg runtime 98.172s, speedup 0.694x
15, opt runtime 51.200s, model runtime 163.049s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 152.849s, pg runtime 80.007s, speedup 0.523x
17, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
18, opt runtime 48.088s, model runtime 162.057s, pg runtime 77.369s, speedup 0.477x
19, opt runtime 52.382s, model runtime 161.008s, pg runtime 82.710s, speedup 0.514x
20, opt runtime 52.135s, model runtime 137.176s, pg runtime 102.039s, speedup 0.744x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 359.909s, pg runtime 602.586s, speedup 1.674x
32, opt runtime 16.542s, model runtime 339.860s, pg runtime 461.957s, speedup 1.359x
33, opt runtime 16.136s, model runtime 338.732s, pg runtime 410.283s, speedup 1.211x
34, opt runtime 14.422s, model runtime 344.192s, pg runtime 497.542s, speedup 1.446x
35, opt runtime 15.980s, model runtime 338.670s, pg runtime 504.239s, speedup 1.489x
36, opt runtime 16.482s, model runtime 353.788s, pg runtime 622.915s, speedup 1.761x
37, opt runtime 16.301s, model runtime 349.420s, pg runtime 646.719s, speedup 1.851x
38, opt runtime 16.194s, model runtime 347.772s, pg runtime 439.255s, speedup 1.263x
39, opt runtime 16.149s, model runtime 348.583s, pg runtime 423.122s, speedup 1.214x
40, opt runtime 13.751s, model runtime 345.840s, pg runtime 434.625s, speedup 1.257x
====================
JOB best validation speedup epoch: 7, train speedup 1.748, test speedup 0.922, val speedup 1.492
TPCH best validation speedup epoch: 7, train speedup 1.748, test speedup 2.110, val speedup 1.492
TPCH Skew best validation speedup epoch: 7, train speedup 1.748, test speedup 2.071, val speedup 1.492
execution cost 0:14:53.113280
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.350575, and there are 26041 training samples
in channel 9
JOB test speedup 0.9072541800093104
TPCH test speedup 1.7611747120514003
TPCH skew test speedup 1.6864278944266236
Epoch 0/50 |loss: 0.374968| train set 1.475x speedup, test set 1.686x speedup, val set 0.809x speedup, step: 1, train time 17.88 s
JOB test speedup 1.0829892966904944
TPCH test speedup 2.3762675162412386
TPCH skew test speedup 2.031190829872859
Epoch 1/50 |loss: 0.296102| train set 1.768x speedup, test set 2.031x speedup, val set 0.515x speedup, step: 2, train time 16.30 s
JOB test speedup 0.9220385942602017
TPCH test speedup 1.5635002841815782
TPCH skew test speedup 1.5231249260813438
Epoch 2/50 |loss: 0.266715| train set 1.745x speedup, test set 1.523x speedup, val set 1.492x speedup, step: 1, train time 16.37 s
JOB test speedup 1.0366579343324476
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 3/50 |loss: 0.250329| train set 1.711x speedup, test set 2.300x speedup, val set 0.515x speedup, step: 2, train time 16.38 s
JOB test speedup 1.1064423824775786
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 4/50 |loss: 0.235393| train set 1.764x speedup, test set 2.300x speedup, val set 1.470x speedup, step: 3, train time 16.39 s
JOB test speedup 1.4521403784082536
TPCH test speedup 2.08401284688638
TPCH skew test speedup 2.0383732744050844
Epoch 5/50 |loss: 0.229053| train set 1.790x speedup, test set 2.038x speedup, val set 1.470x speedup, step: 4, train time 16.48 s
JOB test speedup 1.3881769067486653
TPCH test speedup 1.4364482177906754
TPCH skew test speedup 1.403749249952807
Epoch 6/50 |loss: 0.215083| train set 1.786x speedup, test set 1.404x speedup, val set 0.512x speedup, step: 5, train time 16.49 s
JOB test speedup 1.0389944520004224
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 7/50 |loss: 0.208715| train set 1.791x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 6, train time 16.31 s
JOB test speedup 1.9161756105052656
TPCH test speedup 2.08401284688638
TPCH skew test speedup 2.0383732744050844
Epoch 8/50 |loss: 0.199124| train set 1.699x speedup, test set 2.038x speedup, val set 1.483x speedup, step: 7, train time 16.48 s
JOB test speedup 1.4672159432545908
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.2524942355337605
Epoch 9/50 |loss: 0.194517| train set 1.791x speedup, test set 2.252x speedup, val set 0.512x speedup, step: 8, train time 16.41 s
JOB test speedup 2.061079036459885
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.045891742032457
Epoch 10/50 |loss: 0.185402| train set 1.792x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 9, train time 16.63 s
JOB test speedup 1.58815578083125
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 11/50 |loss: 0.183874| train set 1.796x speedup, test set 2.310x speedup, val set 0.511x speedup, step: 10, train time 16.40 s
JOB test speedup 1.0841215323261861
TPCH test speedup 2.3471925201569386
TPCH skew test speedup 2.3097278570640705
Epoch 12/50 |loss: 0.180308| train set 1.773x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 11, train time 16.28 s
JOB test speedup 1.0437734137208128
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 13/50 |loss: 0.176498| train set 1.759x speedup, test set 2.046x speedup, val set 1.470x speedup, step: 12, train time 16.38 s
JOB test speedup 0.9115017358246875
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 14/50 |loss: 0.175162| train set 1.799x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 13, train time 16.38 s
JOB test speedup 1.5789904859356236
TPCH test speedup 5.667702103543765
TPCH skew test speedup 5.364450798040867
Epoch 15/50 |loss: 0.170881| train set 1.798x speedup, test set 5.364x speedup, val set 0.512x speedup, step: 14, train time 16.40 s
JOB test speedup 1.4413393390133264
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 16/50 |loss: 0.170147| train set 1.762x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 15, train time 16.43 s
JOB test speedup 1.4581838297625362
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 17/50 |loss: 0.162182| train set 1.764x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 16, train time 16.58 s
JOB test speedup 1.4443659544433836
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 18/50 |loss: 0.162462| train set 1.765x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 17, train time 16.48 s
JOB test speedup 1.4335501108978925
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 19/50 |loss: 0.160906| train set 1.777x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 18, train time 16.80 s
JOB test speedup 0.970273030755898
TPCH test speedup 2.356393836875425
TPCH skew test speedup 2.3097278570640705
Epoch 20/50 |loss: 0.158985| train set 1.746x speedup, test set 2.310x speedup, val set 0.511x speedup, step: 19, train time 16.81 s
JOB test speedup 1.5392649050776588
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 21/50 |loss: 0.156908| train set 1.799x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 20, train time 16.90 s
JOB test speedup 1.4531527112968046
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 22/50 |loss: 0.156424| train set 1.781x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 21, train time 16.79 s
JOB test speedup 1.1985224085745914
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.144586749162988
Epoch 23/50 |loss: 0.152506| train set 1.675x speedup, test set 2.145x speedup, val set 0.511x speedup, step: 22, train time 17.01 s
JOB test speedup 1.4234946797500903
TPCH test speedup 2.2705220743043224
TPCH skew test speedup 2.233971416495877
Epoch 24/50 |loss: 0.148738| train set 1.773x speedup, test set 2.234x speedup, val set 0.512x speedup, step: 23, train time 16.79 s
JOB test speedup 0.9517868265138192
TPCH test speedup 4.6528178833697735
TPCH skew test speedup 4.578794901182424
Epoch 25/50 |loss: 0.148514| train set 1.799x speedup, test set 4.579x speedup, val set 0.511x speedup, step: 24, train time 16.70 s
JOB test speedup 1.4636658593735912
TPCH test speedup 4.817024142527814
TPCH skew test speedup 4.578794901182424
Epoch 26/50 |loss: 0.149126| train set 1.799x speedup, test set 4.579x speedup, val set 0.512x speedup, step: 25, train time 16.98 s
JOB test speedup 1.4514587746833507
TPCH test speedup 2.195906435861374
TPCH skew test speedup 2.1267426758963386
Epoch 27/50 |loss: 0.146831| train set 1.797x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 26, train time 16.89 s
JOB test speedup 1.0458749371594231
TPCH test speedup 4.817024142527814
TPCH skew test speedup 4.578794901182424
Epoch 28/50 |loss: 0.145039| train set 1.780x speedup, test set 4.579x speedup, val set 0.512x speedup, step: 27, train time 17.08 s
JOB test speedup 1.4558934282304907
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 29/50 |loss: 0.142557| train set 1.768x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 28, train time 16.70 s
JOB test speedup 1.4049767332003213
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 30/50 |loss: 0.142845| train set 1.801x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 29, train time 16.70 s
JOB test speedup 0.9118653952946956
TPCH test speedup 2.195906435861374
TPCH skew test speedup 2.144586749162988
Epoch 31/50 |loss: 0.139389| train set 1.801x speedup, test set 2.145x speedup, val set 0.512x speedup, step: 30, train time 16.69 s
JOB test speedup 2.007163811018214
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.233971416495877
Epoch 32/50 |loss: 0.140492| train set 1.778x speedup, test set 2.234x speedup, val set 0.512x speedup, step: 31, train time 17.01 s
JOB test speedup 1.461244849354108
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 33/50 |loss: 0.138226| train set 1.797x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 32, train time 16.89 s
JOB test speedup 0.909351783738518
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 34/50 |loss: 0.139596| train set 1.800x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 33, train time 16.90 s
JOB test speedup 0.9179648186629884
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 35/50 |loss: 0.137094| train set 1.795x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 34, train time 16.90 s
JOB test speedup 1.4650664698045293
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 36/50 |loss: 0.133112| train set 1.776x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 35, train time 17.01 s
JOB test speedup 2.01522302734564
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 37/50 |loss: 0.133494| train set 1.799x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 36, train time 17.00 s
JOB test speedup 1.4010980530875705
TPCH test speedup 2.21382881007082
TPCH skew test speedup 2.144586749162988
Epoch 38/50 |loss: 0.132382| train set 1.779x speedup, test set 2.145x speedup, val set 0.512x speedup, step: 37, train time 16.89 s
JOB test speedup 1.4654070678197413
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.233971416495877
Epoch 39/50 |loss: 0.134209| train set 1.745x speedup, test set 2.234x speedup, val set 0.512x speedup, step: 38, train time 16.90 s
JOB test speedup 0.9144656945020277
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 40/50 |loss: 0.134126| train set 1.801x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 39, train time 16.99 s
JOB test speedup 1.4636658593735912
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 41/50 |loss: 0.130762| train set 1.779x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 40, train time 16.78 s
JOB test speedup 1.4585896539276202
TPCH test speedup 2.3223464738692683
TPCH skew test speedup 2.2433839860174873
Epoch 42/50 |loss: 0.130292| train set 1.801x speedup, test set 2.243x speedup, val set 0.512x speedup, step: 41, train time 16.93 s
JOB test speedup 1.1057926251652257
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 43/50 |loss: 0.128670| train set 1.800x speedup, test set 2.119x speedup, val set 0.515x speedup, step: 42, train time 16.88 s
JOB test speedup 0.9066239789478342
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 44/50 |loss: 0.127344| train set 1.802x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 43, train time 17.00 s
JOB test speedup 0.8953230671509822
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 45/50 |loss: 0.129030| train set 1.779x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 44, train time 16.97 s
JOB test speedup 1.4637532783321487
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 46/50 |loss: 0.125881| train set 1.769x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 45, train time 16.89 s
JOB test speedup 0.9101991017575679
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 47/50 |loss: 0.125941| train set 1.803x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 46, train time 17.22 s
JOB test speedup 0.9154025435456891
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 48/50 |loss: 0.122845| train set 1.798x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 47, train time 17.10 s
JOB test speedup 1.4655116184160732
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 49/50 |loss: 0.125700| train set 1.800x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 48, train time 17.09 s
Training per epoch cost 16.753 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
13, opt runtime 5.179s, model runtime 10.685s, pg runtime 10.685s, speedup 1.000x
14, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.393s, speedup 2.504x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 6.021s, pg runtime 6.089s, speedup 1.011x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 91.571s, pg runtime 148.707s, speedup 1.624x
12, opt runtime 48.784s, model runtime 85.611s, pg runtime 78.349s, speedup 0.915x
13, opt runtime 53.440s, model runtime 86.638s, pg runtime 140.742s, speedup 1.624x
14, opt runtime 47.812s, model runtime 88.819s, pg runtime 83.069s, speedup 0.935x
15, opt runtime 47.518s, model runtime 83.137s, pg runtime 75.736s, speedup 0.911x
16, opt runtime 48.067s, model runtime 87.942s, pg runtime 81.014s, speedup 0.921x
17, opt runtime 47.738s, model runtime 83.106s, pg runtime 76.021s, speedup 0.915x
18, opt runtime 47.804s, model runtime 87.416s, pg runtime 81.177s, speedup 0.929x
19, opt runtime 49.511s, model runtime 92.597s, pg runtime 87.329s, speedup 0.943x
20, opt runtime 51.276s, model runtime 84.921s, pg runtime 79.222s, speedup 0.933x
21, opt runtime 24.391s, model runtime 318.834s, pg runtime 601.866s, speedup 1.888x
22, opt runtime 24.079s, model runtime 320.574s, pg runtime 608.707s, speedup 1.899x
23, opt runtime 24.662s, model runtime 317.659s, pg runtime 613.999s, speedup 1.933x
24, opt runtime 24.459s, model runtime 316.659s, pg runtime 608.717s, speedup 1.922x
25, opt runtime 25.236s, model runtime 324.062s, pg runtime 601.756s, speedup 1.857x
26, opt runtime 25.363s, model runtime 312.889s, pg runtime 611.327s, speedup 1.954x
27, opt runtime 24.706s, model runtime 329.304s, pg runtime 610.808s, speedup 1.855x
28, opt runtime 25.075s, model runtime 339.226s, pg runtime 612.430s, speedup 1.805x
29, opt runtime 24.840s, model runtime 330.901s, pg runtime 626.529s, speedup 1.893x
30, opt runtime 24.920s, model runtime 318.881s, pg runtime 610.993s, speedup 1.916x
31, opt runtime 16.268s, model runtime 349.951s, pg runtime 432.766s, speedup 1.237x
32, opt runtime 15.120s, model runtime 350.307s, pg runtime 566.078s, speedup 1.616x
33, opt runtime 16.639s, model runtime 343.997s, pg runtime 462.544s, speedup 1.345x
34, opt runtime 16.280s, model runtime 379.482s, pg runtime 634.990s, speedup 1.673x
35, opt runtime 16.528s, model runtime 362.680s, pg runtime 620.762s, speedup 1.712x
36, opt runtime 18.690s, model runtime 356.056s, pg runtime 651.942s, speedup 1.831x
37, opt runtime 16.438s, model runtime 349.045s, pg runtime 546.887s, speedup 1.567x
38, opt runtime 16.138s, model runtime 349.458s, pg runtime 501.793s, speedup 1.436x
39, opt runtime 16.770s, model runtime 354.159s, pg runtime 594.754s, speedup 1.679x
40, opt runtime 16.305s, model runtime 348.685s, pg runtime 436.168s, speedup 1.251x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 87.162s, pg runtime 80.711s, speedup 0.926x
12, opt runtime 53.203s, model runtime 88.372s, pg runtime 79.156s, speedup 0.896x
13, opt runtime 51.456s, model runtime 84.214s, pg runtime 93.781s, speedup 1.114x
14, opt runtime 54.696s, model runtime 91.625s, pg runtime 98.172s, speedup 1.071x
15, opt runtime 51.200s, model runtime 84.681s, pg runtime 77.674s, speedup 0.917x
16, opt runtime 47.844s, model runtime 86.036s, pg runtime 80.007s, speedup 0.930x
17, opt runtime 54.335s, model runtime 85.400s, pg runtime 95.799s, speedup 1.122x
18, opt runtime 48.088s, model runtime 83.930s, pg runtime 77.369s, speedup 0.922x
19, opt runtime 52.382s, model runtime 102.152s, pg runtime 82.710s, speedup 0.810x
20, opt runtime 52.135s, model runtime 91.553s, pg runtime 102.039s, speedup 1.115x
21, opt runtime 24.737s, model runtime 317.284s, pg runtime 616.762s, speedup 1.944x
22, opt runtime 25.478s, model runtime 358.349s, pg runtime 642.079s, speedup 1.792x
23, opt runtime 24.016s, model runtime 330.550s, pg runtime 601.228s, speedup 1.819x
24, opt runtime 24.103s, model runtime 320.618s, pg runtime 616.889s, speedup 1.924x
25, opt runtime 24.136s, model runtime 317.754s, pg runtime 609.432s, speedup 1.918x
26, opt runtime 25.431s, model runtime 323.350s, pg runtime 625.988s, speedup 1.936x
27, opt runtime 24.451s, model runtime 315.860s, pg runtime 628.615s, speedup 1.990x
28, opt runtime 24.465s, model runtime 328.857s, pg runtime 644.779s, speedup 1.961x
29, opt runtime 25.152s, model runtime 313.847s, pg runtime 613.332s, speedup 1.954x
30, opt runtime 24.505s, model runtime 311.638s, pg runtime 621.574s, speedup 1.995x
31, opt runtime 16.756s, model runtime 363.182s, pg runtime 602.586s, speedup 1.659x
32, opt runtime 16.542s, model runtime 343.670s, pg runtime 461.957s, speedup 1.344x
33, opt runtime 16.136s, model runtime 338.095s, pg runtime 410.283s, speedup 1.214x
34, opt runtime 14.422s, model runtime 349.086s, pg runtime 497.542s, speedup 1.425x
35, opt runtime 15.980s, model runtime 342.141s, pg runtime 504.239s, speedup 1.474x
36, opt runtime 16.482s, model runtime 349.021s, pg runtime 622.915s, speedup 1.785x
37, opt runtime 16.301s, model runtime 358.543s, pg runtime 646.719s, speedup 1.804x
38, opt runtime 16.194s, model runtime 351.176s, pg runtime 439.255s, speedup 1.251x
39, opt runtime 16.149s, model runtime 354.585s, pg runtime 423.122s, speedup 1.193x
40, opt runtime 13.751s, model runtime 340.982s, pg runtime 434.625s, speedup 1.275x
====================
JOB best validation speedup epoch: 2, train speedup 1.745, test speedup 0.922, val speedup 1.492
TPCH best validation speedup epoch: 2, train speedup 1.745, test speedup 1.564, val speedup 1.492
TPCH Skew best validation speedup epoch: 2, train speedup 1.745, test speedup 1.523, val speedup 1.492
execution cost 0:14:56.528591
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.297352, and there are 26041 training samples
in channel 9
JOB test speedup 0.9072541800093104
TPCH test speedup 1.2305682646072817
TPCH skew test speedup 1.1100570801270278
Epoch 0/50 |loss: 0.375634| train set 1.518x speedup, test set 1.110x speedup, val set 0.516x speedup, step: 1, train time 17.91 s
JOB test speedup 1.9699431021917106
TPCH test speedup 2.3709069878144224
TPCH skew test speedup 2.021062031109837
Epoch 1/50 |loss: 0.298328| train set 1.723x speedup, test set 2.021x speedup, val set 0.516x speedup, step: 2, train time 16.59 s
JOB test speedup 1.9470748583426418
TPCH test speedup 1.5696196395461064
TPCH skew test speedup 1.5273189241536667
Epoch 2/50 |loss: 0.267294| train set 1.694x speedup, test set 1.527x speedup, val set 0.515x speedup, step: 3, train time 16.60 s
JOB test speedup 0.9031919958774183
TPCH test speedup 2.5243074951882534
TPCH skew test speedup 2.485521522780896
Epoch 3/50 |loss: 0.252059| train set 1.705x speedup, test set 2.486x speedup, val set 0.515x speedup, step: 4, train time 16.48 s
JOB test speedup 1.0846927839728704
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 4/50 |loss: 0.235750| train set 1.784x speedup, test set 2.310x speedup, val set 0.515x speedup, step: 5, train time 16.58 s
JOB test speedup 1.4331622559881125
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 5/50 |loss: 0.227208| train set 1.759x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 6, train time 16.50 s
JOB test speedup 1.468426471033674
TPCH test speedup 1.641004648444058
TPCH skew test speedup 1.6095249815187038
Epoch 6/50 |loss: 0.213912| train set 1.791x speedup, test set 1.610x speedup, val set 0.512x speedup, step: 7, train time 16.52 s
JOB test speedup 0.9093351855685591
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 7/50 |loss: 0.206647| train set 1.794x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 8, train time 16.69 s
JOB test speedup 2.412427526109467
TPCH test speedup 4.871036560746036
TPCH skew test speedup 4.789167173667022
Epoch 8/50 |loss: 0.198281| train set 1.796x speedup, test set 4.789x speedup, val set 1.483x speedup, step: 1, train time 16.39 s
JOB test speedup 1.4840604099775572
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 9/50 |loss: 0.193790| train set 1.789x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 2, train time 16.38 s
JOB test speedup 2.1462568167476506
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 10/50 |loss: 0.185178| train set 1.796x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 3, train time 16.30 s
JOB test speedup 1.5282769169146053
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 11/50 |loss: 0.182866| train set 1.668x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 4, train time 16.43 s
JOB test speedup 2.1013167934209434
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 12/50 |loss: 0.180112| train set 1.774x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 5, train time 16.38 s
JOB test speedup 1.53362779653684
TPCH test speedup 1.4416118058856402
TPCH skew test speedup 1.4073108285657774
Epoch 13/50 |loss: 0.175203| train set 1.798x speedup, test set 1.407x speedup, val set 0.512x speedup, step: 6, train time 16.49 s
JOB test speedup 1.486581138233658
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 14/50 |loss: 0.172737| train set 1.799x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 7, train time 16.32 s
JOB test speedup 1.7813368051689265
TPCH test speedup 4.291673447618084
TPCH skew test speedup 4.128046231222904
Epoch 15/50 |loss: 0.170691| train set 1.796x speedup, test set 4.128x speedup, val set 0.515x speedup, step: 8, train time 16.53 s
JOB test speedup 2.091195320941696
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 16/50 |loss: 0.167785| train set 1.766x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 9, train time 16.50 s
JOB test speedup 1.8523142195588278
TPCH test speedup 2.1022255459575296
TPCH skew test speedup 2.045891742032457
Epoch 17/50 |loss: 0.162597| train set 1.794x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 10, train time 16.43 s
JOB test speedup 1.7581903882715137
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 18/50 |loss: 0.160269| train set 1.800x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 11, train time 16.68 s
JOB test speedup 1.4763304841893183
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 19/50 |loss: 0.161117| train set 1.778x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 12, train time 16.58 s
JOB test speedup 2.13695826143833
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 20/50 |loss: 0.156849| train set 1.764x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 13, train time 16.68 s
JOB test speedup 2.146190554793302
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 21/50 |loss: 0.155827| train set 1.797x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 14, train time 16.69 s
JOB test speedup 1.6527760743825946
TPCH test speedup 2.144836540049542
TPCH skew test speedup 2.045891742032457
Epoch 22/50 |loss: 0.155990| train set 1.780x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 15, train time 16.60 s
JOB test speedup 1.2647561048759413
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 23/50 |loss: 0.150014| train set 1.799x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 16, train time 16.79 s
JOB test speedup 1.999509703346292
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 24/50 |loss: 0.147339| train set 1.773x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 17, train time 16.70 s
JOB test speedup 1.257699771172653
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.1176124094757207
Epoch 25/50 |loss: 0.149939| train set 1.800x speedup, test set 2.118x speedup, val set 0.515x speedup, step: 18, train time 16.71 s
JOB test speedup 1.4239042560670445
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 26/50 |loss: 0.149125| train set 1.800x speedup, test set 4.471x speedup, val set 0.515x speedup, step: 19, train time 16.69 s
JOB test speedup 1.1984074815101902
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 27/50 |loss: 0.145954| train set 1.801x speedup, test set 4.471x speedup, val set 0.515x speedup, step: 20, train time 16.80 s
JOB test speedup 1.8639269818541182
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.1034570214219523
Epoch 28/50 |loss: 0.141626| train set 1.780x speedup, test set 2.103x speedup, val set 0.515x speedup, step: 21, train time 16.80 s
JOB test speedup 2.135698874669628
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 29/50 |loss: 0.140329| train set 1.794x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 22, train time 16.92 s
JOB test speedup 1.5072497959416502
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 30/50 |loss: 0.141977| train set 1.764x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 23, train time 16.87 s
JOB test speedup 1.440986980606264
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 31/50 |loss: 0.139618| train set 1.800x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 24, train time 16.90 s
JOB test speedup 2.128896010793827
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 32/50 |loss: 0.137981| train set 1.781x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 25, train time 17.00 s
JOB test speedup 1.6659240383091898
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 33/50 |loss: 0.135345| train set 1.798x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 26, train time 17.10 s
JOB test speedup 2.354481829866899
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 34/50 |loss: 0.137479| train set 1.782x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 27, train time 16.79 s
JOB test speedup 0.9261722969959519
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 35/50 |loss: 0.134728| train set 1.796x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 28, train time 16.59 s
JOB test speedup 1.6718456756815354
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 36/50 |loss: 0.130473| train set 1.782x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 29, train time 17.08 s
JOB test speedup 1.9939877189487254
TPCH test speedup 2.158598565512259
TPCH skew test speedup 2.1267426758963386
Epoch 37/50 |loss: 0.131512| train set 1.799x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 30, train time 16.89 s
JOB test speedup 1.4208037690826663
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 38/50 |loss: 0.129728| train set 1.776x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 31, train time 17.00 s
JOB test speedup 1.4437616194931855
TPCH test speedup 3.9418761131929765
TPCH skew test speedup 3.788170240341355
Epoch 39/50 |loss: 0.130652| train set 1.749x speedup, test set 3.788x speedup, val set 0.512x speedup, step: 32, train time 16.78 s
JOB test speedup 0.8978997188004041
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 40/50 |loss: 0.130016| train set 1.801x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 33, train time 17.01 s
JOB test speedup 1.5951831403267978
TPCH test speedup 2.1679443799180516
TPCH skew test speedup 2.1267426758963386
Epoch 41/50 |loss: 0.128554| train set 1.798x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 34, train time 16.88 s
JOB test speedup 2.071911029701935
TPCH test speedup 4.443881237447556
TPCH skew test speedup 4.42120622395679
Epoch 42/50 |loss: 0.128505| train set 1.795x speedup, test set 4.421x speedup, val set 0.515x speedup, step: 35, train time 16.90 s
JOB test speedup 1.1984074815101902
TPCH test speedup 4.344501297218488
TPCH skew test speedup 4.224160094823028
Epoch 43/50 |loss: 0.126309| train set 1.800x speedup, test set 4.224x speedup, val set 0.515x speedup, step: 36, train time 17.18 s
JOB test speedup 1.4470564368770327
TPCH test speedup 4.344501297218488
TPCH skew test speedup 4.257807398637919
Epoch 44/50 |loss: 0.128088| train set 1.801x speedup, test set 4.258x speedup, val set 0.515x speedup, step: 37, train time 16.90 s
JOB test speedup 0.9066088906553128
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 45/50 |loss: 0.126644| train set 1.779x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 38, train time 16.90 s
JOB test speedup 1.4495530575741737
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 46/50 |loss: 0.125354| train set 1.801x speedup, test set 2.046x speedup, val set 0.515x speedup, step: 39, train time 17.01 s
JOB test speedup 2.382622732354567
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 47/50 |loss: 0.123941| train set 1.769x speedup, test set 4.461x speedup, val set 0.515x speedup, step: 40, train time 16.99 s
JOB test speedup 2.363189484021295
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 48/50 |loss: 0.123184| train set 1.802x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 41, train time 16.90 s
JOB test speedup 1.1240955428523456
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.0950196128864844
Epoch 49/50 |loss: 0.122771| train set 1.800x speedup, test set 2.095x speedup, val set 0.515x speedup, step: 42, train time 16.88 s
Training per epoch cost 16.744 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
03, opt runtime 1.763s, model runtime 2.388s, pg runtime 1.763s, speedup 0.738x
04, opt runtime 1.386s, model runtime 2.323s, pg runtime 1.386s, speedup 0.597x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.393s, speedup 2.504x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 56.876s, pg runtime 91.784s, speedup 1.614x
02, opt runtime 29.763s, model runtime 55.506s, pg runtime 91.648s, speedup 1.651x
03, opt runtime 30.267s, model runtime 57.401s, pg runtime 100.885s, speedup 1.758x
04, opt runtime 29.286s, model runtime 58.701s, pg runtime 92.131s, speedup 1.569x
05, opt runtime 29.269s, model runtime 57.330s, pg runtime 91.296s, speedup 1.592x
06, opt runtime 29.502s, model runtime 60.311s, pg runtime 112.305s, speedup 1.862x
07, opt runtime 27.886s, model runtime 58.497s, pg runtime 97.629s, speedup 1.669x
08, opt runtime 30.705s, model runtime 56.560s, pg runtime 89.698s, speedup 1.586x
09, opt runtime 27.651s, model runtime 58.506s, pg runtime 91.255s, speedup 1.560x
10, opt runtime 33.637s, model runtime 57.182s, pg runtime 90.618s, speedup 1.585x
11, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
12, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
13, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
14, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
15, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
16, opt runtime 48.067s, model runtime 159.772s, pg runtime 81.014s, speedup 0.507x
17, opt runtime 47.738s, model runtime 162.027s, pg runtime 76.021s, speedup 0.469x
18, opt runtime 47.804s, model runtime 161.759s, pg runtime 81.177s, speedup 0.502x
19, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
20, opt runtime 51.276s, model runtime 161.291s, pg runtime 79.222s, speedup 0.491x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
02, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
03, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
04, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
05, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
06, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
07, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
08, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
09, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
10, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
11, opt runtime 53.915s, model runtime 167.703s, pg runtime 80.711s, speedup 0.481x
12, opt runtime 53.203s, model runtime 163.373s, pg runtime 79.156s, speedup 0.485x
13, opt runtime 51.456s, model runtime 157.240s, pg runtime 93.781s, speedup 0.596x
14, opt runtime 54.696s, model runtime 167.507s, pg runtime 98.172s, speedup 0.586x
15, opt runtime 51.200s, model runtime 163.049s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 152.849s, pg runtime 80.007s, speedup 0.523x
17, opt runtime 54.335s, model runtime 159.237s, pg runtime 95.799s, speedup 0.602x
18, opt runtime 48.088s, model runtime 162.057s, pg runtime 77.369s, speedup 0.477x
19, opt runtime 52.382s, model runtime 161.008s, pg runtime 82.710s, speedup 0.514x
20, opt runtime 52.135s, model runtime 165.502s, pg runtime 102.039s, speedup 0.617x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 23.924s, pg runtime 602.586s, speedup 25.187x
32, opt runtime 16.542s, model runtime 21.754s, pg runtime 461.957s, speedup 21.235x
33, opt runtime 16.136s, model runtime 21.514s, pg runtime 410.283s, speedup 19.070x
34, opt runtime 14.422s, model runtime 21.896s, pg runtime 497.542s, speedup 22.723x
35, opt runtime 15.980s, model runtime 21.470s, pg runtime 504.239s, speedup 23.486x
36, opt runtime 16.482s, model runtime 25.428s, pg runtime 622.915s, speedup 24.497x
37, opt runtime 16.301s, model runtime 22.800s, pg runtime 646.719s, speedup 28.365x
38, opt runtime 16.194s, model runtime 21.815s, pg runtime 439.255s, speedup 20.136x
39, opt runtime 16.149s, model runtime 21.405s, pg runtime 423.122s, speedup 19.768x
40, opt runtime 13.751s, model runtime 21.917s, pg runtime 434.625s, speedup 19.831x
====================
JOB best validation speedup epoch: 8, train speedup 1.796, test speedup 2.412, val speedup 1.483
TPCH best validation speedup epoch: 8, train speedup 1.796, test speedup 4.871, val speedup 1.483
TPCH Skew best validation speedup epoch: 8, train speedup 1.796, test speedup 4.789, val speedup 1.483
execution cost 0:14:55.574345
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.337952, and there are 26041 training samples
in channel 9
JOB test speedup 0.9015569278922231
TPCH test speedup 1.2283115875590607
TPCH skew test speedup 1.1893158804023198
Epoch 0/50 |loss: 0.374537| train set 1.660x speedup, test set 1.189x speedup, val set 0.515x speedup, step: 1, train time 18.21 s
JOB test speedup 1.0866120927221732
TPCH test speedup 2.39270565945717
TPCH skew test speedup 2.0265759313691056
Epoch 1/50 |loss: 0.294523| train set 1.769x speedup, test set 2.027x speedup, val set 0.515x speedup, step: 1, train time 16.91 s
JOB test speedup 1.1007765605021427
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 2/50 |loss: 0.266835| train set 1.728x speedup, test set 2.300x speedup, val set 0.515x speedup, step: 1, train time 16.86 s
JOB test speedup 1.0195819581919572
TPCH test speedup 2.3841886907290926
TPCH skew test speedup 2.307294305493192
Epoch 3/50 |loss: 0.250180| train set 1.782x speedup, test set 2.307x speedup, val set 0.515x speedup, step: 2, train time 16.67 s
JOB test speedup 2.008544616186408
TPCH test speedup 2.265510549900083
TPCH skew test speedup 2.2457926125577625
Epoch 4/50 |loss: 0.235188| train set 1.790x speedup, test set 2.246x speedup, val set 1.470x speedup, step: 1, train time 16.62 s
JOB test speedup 1.3967555024759173
TPCH test speedup 2.08401284688638
TPCH skew test speedup 2.0383732744050844
Epoch 5/50 |loss: 0.227478| train set 1.757x speedup, test set 2.038x speedup, val set 1.470x speedup, step: 2, train time 17.08 s
JOB test speedup 0.9022452355246687
TPCH test speedup 1.4960042255270463
TPCH skew test speedup 1.4728903557041486
Epoch 6/50 |loss: 0.213644| train set 1.789x speedup, test set 1.473x speedup, val set 0.512x speedup, step: 3, train time 16.88 s
JOB test speedup 0.9206729403003763
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 7/50 |loss: 0.206164| train set 1.791x speedup, test set 2.119x speedup, val set 1.492x speedup, step: 1, train time 16.80 s
JOB test speedup 2.490289063220914
TPCH test speedup 4.291673447618084
TPCH skew test speedup 4.128046231222904
Epoch 8/50 |loss: 0.198714| train set 1.777x speedup, test set 4.128x speedup, val set 1.483x speedup, step: 2, train time 16.90 s
JOB test speedup 0.9153918232133488
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 9/50 |loss: 0.193816| train set 1.789x speedup, test set 2.119x speedup, val set 0.515x speedup, step: 3, train time 16.88 s
JOB test speedup 2.0749129796206622
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 10/50 |loss: 0.186316| train set 1.798x speedup, test set 2.127x speedup, val set 0.514x speedup, step: 4, train time 16.90 s
JOB test speedup 2.0355376711362316
TPCH test speedup 2.3306870550762584
TPCH skew test speedup 2.3097278570640705
Epoch 11/50 |loss: 0.184237| train set 1.670x speedup, test set 2.310x speedup, val set 0.515x speedup, step: 5, train time 16.72 s
JOB test speedup 2.02592798762927
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 12/50 |loss: 0.180254| train set 1.773x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 6, train time 16.79 s
JOB test speedup 1.8324074008313889
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 13/50 |loss: 0.178416| train set 1.793x speedup, test set 4.471x speedup, val set 1.492x speedup, step: 7, train time 16.99 s
JOB test speedup 1.4808411719238903
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 14/50 |loss: 0.173767| train set 1.799x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 8, train time 17.17 s
JOB test speedup 2.0407930087557573
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 15/50 |loss: 0.171504| train set 1.797x speedup, test set 4.471x speedup, val set 0.514x speedup, step: 9, train time 16.89 s
JOB test speedup 1.6225072835975698
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 16/50 |loss: 0.170098| train set 1.765x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 10, train time 16.98 s
JOB test speedup 1.9096324925776236
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 17/50 |loss: 0.163649| train set 1.777x speedup, test set 2.127x speedup, val set 1.492x speedup, step: 11, train time 17.18 s
JOB test speedup 1.1022548029967547
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 18/50 |loss: 0.163033| train set 1.796x speedup, test set 2.127x speedup, val set 1.492x speedup, step: 12, train time 17.11 s
JOB test speedup 1.0086468923548422
TPCH test speedup 1.6894174499806132
TPCH skew test speedup 1.5261559784608352
Epoch 19/50 |loss: 0.162946| train set 1.778x speedup, test set 1.526x speedup, val set 0.512x speedup, step: 13, train time 17.08 s
JOB test speedup 1.1012170233280971
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 20/50 |loss: 0.157679| train set 1.762x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 14, train time 16.84 s
JOB test speedup 2.2114562072899173
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 21/50 |loss: 0.157570| train set 1.801x speedup, test set 4.471x speedup, val set 0.512x speedup, step: 15, train time 16.89 s
JOB test speedup 1.100304979400689
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 22/50 |loss: 0.156155| train set 1.778x speedup, test set 2.119x speedup, val set 1.469x speedup, step: 16, train time 16.99 s
JOB test speedup 1.1758566925677543
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 23/50 |loss: 0.152931| train set 1.798x speedup, test set 4.471x speedup, val set 0.515x speedup, step: 17, train time 16.80 s
JOB test speedup 1.937681752407224
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 24/50 |loss: 0.150948| train set 1.758x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 18, train time 16.90 s
JOB test speedup 1.106175499952925
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 25/50 |loss: 0.151929| train set 1.799x speedup, test set 1.522x speedup, val set 0.515x speedup, step: 19, train time 16.97 s
JOB test speedup 1.4444314434448702
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 26/50 |loss: 0.150463| train set 1.800x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 20, train time 17.22 s
JOB test speedup 0.9187485061652415
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 27/50 |loss: 0.148923| train set 1.799x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 21, train time 16.99 s
JOB test speedup 1.0477896412249292
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 28/50 |loss: 0.144702| train set 1.795x speedup, test set 1.522x speedup, val set 0.512x speedup, step: 22, train time 16.89 s
JOB test speedup 1.476292168812945
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 29/50 |loss: 0.141184| train set 1.797x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 23, train time 16.86 s
JOB test speedup 0.9091976216521925
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 30/50 |loss: 0.143211| train set 1.767x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 24, train time 16.89 s
JOB test speedup 1.4569138590986355
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 31/50 |loss: 0.141425| train set 1.797x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 25, train time 17.10 s
JOB test speedup 1.8311049258789556
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 32/50 |loss: 0.141917| train set 1.775x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 26, train time 17.08 s
JOB test speedup 0.9238413809444495
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 33/50 |loss: 0.139434| train set 1.799x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 27, train time 17.02 s
JOB test speedup 1.0425289909069113
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 34/50 |loss: 0.139368| train set 1.801x speedup, test set 1.522x speedup, val set 0.515x speedup, step: 28, train time 17.09 s
JOB test speedup 0.8969319356159762
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 35/50 |loss: 0.137429| train set 1.797x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 29, train time 17.10 s
JOB test speedup 1.4108819073418974
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 36/50 |loss: 0.133376| train set 1.777x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 30, train time 17.00 s
JOB test speedup 1.8327113261070884
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 37/50 |loss: 0.134599| train set 1.798x speedup, test set 4.471x speedup, val set 1.492x speedup, step: 1, train time 17.00 s
JOB test speedup 0.8962241260031062
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 38/50 |loss: 0.134996| train set 1.776x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 2, train time 16.78 s
JOB test speedup 1.6942333399017309
TPCH test speedup 1.152658817727467
TPCH skew test speedup 1.1354967265714007
Epoch 39/50 |loss: 0.134658| train set 1.777x speedup, test set 1.135x speedup, val set 1.492x speedup, step: 3, train time 17.29 s
JOB test speedup 1.113247619058947
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 40/50 |loss: 0.132700| train set 1.802x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 4, train time 17.13 s
JOB test speedup 0.9036919094073002
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 41/50 |loss: 0.130069| train set 1.798x speedup, test set 1.522x speedup, val set 0.515x speedup, step: 5, train time 17.17 s
JOB test speedup 1.078452428779018
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 42/50 |loss: 0.132007| train set 1.801x speedup, test set 1.522x speedup, val set 0.515x speedup, step: 6, train time 17.07 s
JOB test speedup 1.1380803127759542
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 43/50 |loss: 0.129073| train set 1.799x speedup, test set 1.522x speedup, val set 0.515x speedup, step: 7, train time 16.92 s
JOB test speedup 1.403565182202693
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 44/50 |loss: 0.129767| train set 1.801x speedup, test set 1.522x speedup, val set 0.512x speedup, step: 8, train time 16.81 s
JOB test speedup 0.9135428396504879
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 45/50 |loss: 0.127793| train set 1.782x speedup, test set 1.522x speedup, val set 0.515x speedup, step: 9, train time 17.07 s
JOB test speedup 1.6970788149268101
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 46/50 |loss: 0.128906| train set 1.802x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 10, train time 17.11 s
JOB test speedup 1.0565440616126096
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 47/50 |loss: 0.129097| train set 1.801x speedup, test set 4.471x speedup, val set 0.512x speedup, step: 11, train time 16.89 s
JOB test speedup 1.0499508543356773
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 48/50 |loss: 0.124802| train set 1.800x speedup, test set 1.522x speedup, val set 0.515x speedup, step: 12, train time 17.18 s
JOB test speedup 1.073272120786341
TPCH test speedup 2.3142780977811785
TPCH skew test speedup 2.2348336362379606
Epoch 49/50 |loss: 0.124628| train set 1.800x speedup, test set 2.235x speedup, val set 0.515x speedup, step: 13, train time 17.31 s
Training per epoch cost 16.999 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
10, opt runtime 3.248s, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 23.116s, pg runtime 13.945s, speedup 0.603x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 8.238s, pg runtime 8.605s, speedup 1.045x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
13, opt runtime 53.440s, model runtime 136.731s, pg runtime 140.742s, speedup 1.029x
14, opt runtime 47.812s, model runtime 139.115s, pg runtime 83.069s, speedup 0.597x
15, opt runtime 47.518s, model runtime 133.905s, pg runtime 75.736s, speedup 0.566x
16, opt runtime 48.067s, model runtime 135.202s, pg runtime 81.014s, speedup 0.599x
17, opt runtime 47.738s, model runtime 135.818s, pg runtime 76.021s, speedup 0.560x
18, opt runtime 47.804s, model runtime 136.805s, pg runtime 81.177s, speedup 0.593x
19, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
20, opt runtime 51.276s, model runtime 134.457s, pg runtime 79.222s, speedup 0.589x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 140.245s, pg runtime 80.711s, speedup 0.575x
12, opt runtime 53.203s, model runtime 135.711s, pg runtime 79.156s, speedup 0.583x
13, opt runtime 51.456s, model runtime 132.632s, pg runtime 93.781s, speedup 0.707x
14, opt runtime 54.696s, model runtime 141.455s, pg runtime 98.172s, speedup 0.694x
15, opt runtime 51.200s, model runtime 137.865s, pg runtime 77.674s, speedup 0.563x
16, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
17, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
18, opt runtime 48.088s, model runtime 135.391s, pg runtime 77.369s, speedup 0.571x
19, opt runtime 52.382s, model runtime 146.665s, pg runtime 82.710s, speedup 0.564x
20, opt runtime 52.135s, model runtime 137.176s, pg runtime 102.039s, speedup 0.744x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 23.924s, pg runtime 602.586s, speedup 25.187x
32, opt runtime 16.542s, model runtime 21.754s, pg runtime 461.957s, speedup 21.235x
33, opt runtime 16.136s, model runtime 21.514s, pg runtime 410.283s, speedup 19.070x
34, opt runtime 14.422s, model runtime 21.896s, pg runtime 497.542s, speedup 22.723x
35, opt runtime 15.980s, model runtime 21.470s, pg runtime 504.239s, speedup 23.486x
36, opt runtime 16.482s, model runtime 25.428s, pg runtime 622.915s, speedup 24.497x
37, opt runtime 16.301s, model runtime 22.800s, pg runtime 646.719s, speedup 28.365x
38, opt runtime 16.194s, model runtime 21.815s, pg runtime 439.255s, speedup 20.136x
39, opt runtime 16.149s, model runtime 21.405s, pg runtime 423.122s, speedup 19.768x
40, opt runtime 13.751s, model runtime 21.917s, pg runtime 434.625s, speedup 19.831x
====================
JOB best validation speedup epoch: 37, train speedup 1.798, test speedup 1.833, val speedup 1.492
TPCH best validation speedup epoch: 37, train speedup 1.798, test speedup 4.652, val speedup 1.492
TPCH Skew best validation speedup epoch: 37, train speedup 1.798, test speedup 4.471, val speedup 1.492
execution cost 0:15:08.081022
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.303381, and there are 26041 training samples
in channel 9
JOB test speedup 0.9072541800093104
TPCH test speedup 1.2305682646072817
TPCH skew test speedup 1.1100570801270278
Epoch 0/50 |loss: 0.373871| train set 1.638x speedup, test set 1.110x speedup, val set 0.516x speedup, step: 1, train time 17.69 s
JOB test speedup 1.092332420780839
TPCH test speedup 2.5280725300233615
TPCH skew test speedup 2.491817333804585
Epoch 1/50 |loss: 0.296292| train set 1.722x speedup, test set 2.492x speedup, val set 0.516x speedup, step: 1, train time 16.18 s
JOB test speedup 0.921593664083952
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 2/50 |loss: 0.265095| train set 1.745x speedup, test set 2.310x speedup, val set 0.515x speedup, step: 2, train time 16.49 s
JOB test speedup 1.4827698311530852
TPCH test speedup 2.5052825659278883
TPCH skew test speedup 2.491817333804585
Epoch 3/50 |loss: 0.250515| train set 1.713x speedup, test set 2.492x speedup, val set 0.512x speedup, step: 3, train time 16.32 s
JOB test speedup 1.8944216537850733
TPCH test speedup 2.195906435861374
TPCH skew test speedup 2.144586749162988
Epoch 4/50 |loss: 0.235585| train set 1.787x speedup, test set 2.145x speedup, val set 1.470x speedup, step: 1, train time 16.51 s
JOB test speedup 0.9092979109052872
TPCH test speedup 2.3044468909392064
TPCH skew test speedup 2.136332149056228
Epoch 5/50 |loss: 0.227873| train set 1.789x speedup, test set 2.136x speedup, val set 1.470x speedup, step: 2, train time 16.37 s
JOB test speedup 1.4152381095384032
TPCH test speedup 2.5280725300233615
TPCH skew test speedup 2.491817333804585
Epoch 6/50 |loss: 0.214594| train set 1.791x speedup, test set 2.492x speedup, val set 0.512x speedup, step: 3, train time 16.58 s
JOB test speedup 0.9194907391160018
TPCH test speedup 2.1096809182197283
TPCH skew test speedup 2.045891742032457
Epoch 7/50 |loss: 0.206936| train set 1.792x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 4, train time 16.50 s
JOB test speedup 2.550143877942797
TPCH test speedup 2.4768669392601703
TPCH skew test speedup 2.4008730096930266
Epoch 8/50 |loss: 0.200155| train set 1.796x speedup, test set 2.401x speedup, val set 1.478x speedup, step: 1, train time 16.40 s
JOB test speedup 0.9188498807355734
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 9/50 |loss: 0.194830| train set 1.789x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 2, train time 16.43 s
JOB test speedup 2.198251026351947
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 10/50 |loss: 0.186675| train set 1.792x speedup, test set 2.127x speedup, val set 0.716x speedup, step: 3, train time 16.39 s
JOB test speedup 1.531098182351697
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 11/50 |loss: 0.182667| train set 1.684x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 4, train time 16.40 s
JOB test speedup 1.1056603692968663
TPCH test speedup 2.195906435861374
TPCH skew test speedup 2.144586749162988
Epoch 12/50 |loss: 0.179687| train set 1.776x speedup, test set 2.145x speedup, val set 0.513x speedup, step: 5, train time 16.38 s
JOB test speedup 1.9931684220520247
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 13/50 |loss: 0.177846| train set 1.763x speedup, test set 2.127x speedup, val set 0.513x speedup, step: 6, train time 16.32 s
JOB test speedup 1.458064082179244
TPCH test speedup 2.3223464738692683
TPCH skew test speedup 2.2433839860174873
Epoch 14/50 |loss: 0.173751| train set 1.797x speedup, test set 2.243x speedup, val set 0.512x speedup, step: 7, train time 16.38 s
JOB test speedup 1.5513597104460104
TPCH test speedup 2.3223464738692683
TPCH skew test speedup 2.2250100845673804
Epoch 15/50 |loss: 0.170274| train set 1.799x speedup, test set 2.225x speedup, val set 0.512x speedup, step: 8, train time 16.50 s
JOB test speedup 1.4957203295480104
TPCH test speedup 2.21382881007082
TPCH skew test speedup 2.144586749162988
Epoch 16/50 |loss: 0.170622| train set 1.761x speedup, test set 2.145x speedup, val set 0.512x speedup, step: 9, train time 16.27 s
JOB test speedup 1.45074802312342
TPCH test speedup 2.195906435861374
TPCH skew test speedup 2.144586749162988
Epoch 17/50 |loss: 0.163313| train set 1.776x speedup, test set 2.145x speedup, val set 0.512x speedup, step: 10, train time 16.39 s
JOB test speedup 1.4610675780840137
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 18/50 |loss: 0.161689| train set 1.795x speedup, test set 2.046x speedup, val set 0.512x speedup, step: 11, train time 16.39 s
JOB test speedup 1.453741271561569
TPCH test speedup 2.0948990586765937
TPCH skew test speedup 2.045891742032457
Epoch 19/50 |loss: 0.162090| train set 1.775x speedup, test set 2.046x speedup, val set 0.438x speedup, step: 12, train time 16.39 s
JOB test speedup 0.9075190507761418
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 20/50 |loss: 0.158970| train set 1.763x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 13, train time 16.60 s
JOB test speedup 1.092106040234668
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 21/50 |loss: 0.155885| train set 1.799x speedup, test set 4.471x speedup, val set 0.515x speedup, step: 14, train time 16.58 s
JOB test speedup 1.5896106307812414
TPCH test speedup 2.482099456496856
TPCH skew test speedup 2.491817333804585
Epoch 22/50 |loss: 0.155429| train set 1.773x speedup, test set 2.492x speedup, val set 0.438x speedup, step: 15, train time 16.39 s
JOB test speedup 1.1072054507394364
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 23/50 |loss: 0.153068| train set 1.798x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 16, train time 16.47 s
JOB test speedup 0.9000338364095541
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 24/50 |loss: 0.148514| train set 1.770x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 17, train time 16.49 s
JOB test speedup 0.928058046047591
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 25/50 |loss: 0.149672| train set 1.780x speedup, test set 3.912x speedup, val set 1.492x speedup, step: 1, train time 16.50 s
JOB test speedup 1.469210594242949
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 26/50 |loss: 0.147703| train set 1.798x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 2, train time 16.49 s
JOB test speedup 0.918698525995846
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 27/50 |loss: 0.146230| train set 1.800x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 3, train time 16.60 s
JOB test speedup 1.0341848694743756
TPCH test speedup 4.6528178833697735
TPCH skew test speedup 4.578794901182424
Epoch 28/50 |loss: 0.144515| train set 1.775x speedup, test set 4.579x speedup, val set 0.512x speedup, step: 4, train time 16.40 s
JOB test speedup 1.418385362671202
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 29/50 |loss: 0.141710| train set 1.800x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 5, train time 16.68 s
JOB test speedup 1.0578445576804205
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 30/50 |loss: 0.143766| train set 1.796x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 6, train time 16.50 s
JOB test speedup 0.9106684668514329
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 31/50 |loss: 0.138558| train set 1.796x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 7, train time 16.79 s
JOB test speedup 1.039910586582457
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 32/50 |loss: 0.141188| train set 1.779x speedup, test set 3.912x speedup, val set 0.438x speedup, step: 8, train time 16.67 s
JOB test speedup 1.8380985896109607
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 33/50 |loss: 0.137717| train set 1.800x speedup, test set 2.127x speedup, val set 0.451x speedup, step: 9, train time 16.69 s
JOB test speedup 1.1000206431149493
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 34/50 |loss: 0.137403| train set 1.800x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 10, train time 16.58 s
JOB test speedup 0.9022512771413798
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 35/50 |loss: 0.136195| train set 1.800x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 11, train time 16.63 s
JOB test speedup 1.4698202875182353
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 36/50 |loss: 0.131599| train set 1.777x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 12, train time 16.49 s
JOB test speedup 2.0108212237456597
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 37/50 |loss: 0.133164| train set 1.798x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 13, train time 16.38 s
JOB test speedup 1.4817006443700822
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 38/50 |loss: 0.133079| train set 1.776x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 14, train time 16.49 s
JOB test speedup 1.4655801731348572
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 39/50 |loss: 0.132232| train set 1.766x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 15, train time 16.56 s
JOB test speedup 0.9060283781183546
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 40/50 |loss: 0.133663| train set 1.802x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 16, train time 16.42 s
JOB test speedup 0.9232138552798388
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 41/50 |loss: 0.128314| train set 1.799x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 17, train time 16.48 s
JOB test speedup 1.1017189511034593
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 42/50 |loss: 0.129280| train set 1.799x speedup, test set 3.912x speedup, val set 0.440x speedup, step: 18, train time 16.41 s
JOB test speedup 0.9188794996108585
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 43/50 |loss: 0.128578| train set 1.799x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 19, train time 16.38 s
JOB test speedup 1.0858886079150545
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 44/50 |loss: 0.128086| train set 1.799x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 20, train time 16.50 s
JOB test speedup 0.8930587914848928
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 45/50 |loss: 0.127828| train set 1.779x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 21, train time 16.37 s
JOB test speedup 0.9207822536745354
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 46/50 |loss: 0.126978| train set 1.801x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 22, train time 16.48 s
JOB test speedup 0.8943466494754203
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 47/50 |loss: 0.126422| train set 1.769x speedup, test set 4.471x speedup, val set 0.512x speedup, step: 23, train time 16.69 s
JOB test speedup 0.9245957546044616
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 48/50 |loss: 0.121864| train set 1.799x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 24, train time 16.40 s
JOB test speedup 1.4645883256061405
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 49/50 |loss: 0.123923| train set 1.800x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 25, train time 16.66 s
Training per epoch cost 16.501 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 3.504s, pg runtime 6.143s, speedup 1.753x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
13, opt runtime 5.179s, model runtime 11.487s, pg runtime 10.685s, speedup 0.930x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
13, opt runtime 53.440s, model runtime 136.731s, pg runtime 140.742s, speedup 1.029x
14, opt runtime 47.812s, model runtime 139.115s, pg runtime 83.069s, speedup 0.597x
15, opt runtime 47.518s, model runtime 133.905s, pg runtime 75.736s, speedup 0.566x
16, opt runtime 48.067s, model runtime 135.202s, pg runtime 81.014s, speedup 0.599x
17, opt runtime 47.738s, model runtime 135.818s, pg runtime 76.021s, speedup 0.560x
18, opt runtime 47.804s, model runtime 136.805s, pg runtime 81.177s, speedup 0.593x
19, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
20, opt runtime 51.276s, model runtime 134.457s, pg runtime 79.222s, speedup 0.589x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 140.245s, pg runtime 80.711s, speedup 0.575x
12, opt runtime 53.203s, model runtime 135.711s, pg runtime 79.156s, speedup 0.583x
13, opt runtime 51.456s, model runtime 132.632s, pg runtime 93.781s, speedup 0.707x
14, opt runtime 54.696s, model runtime 141.455s, pg runtime 98.172s, speedup 0.694x
15, opt runtime 51.200s, model runtime 137.865s, pg runtime 77.674s, speedup 0.563x
16, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
17, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
18, opt runtime 48.088s, model runtime 135.391s, pg runtime 77.369s, speedup 0.571x
19, opt runtime 52.382s, model runtime 146.665s, pg runtime 82.710s, speedup 0.564x
20, opt runtime 52.135s, model runtime 137.176s, pg runtime 102.039s, speedup 0.744x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 25, train speedup 1.780, test speedup 0.928, val speedup 1.492
TPCH best validation speedup epoch: 25, train speedup 1.780, test speedup 4.063, val speedup 1.492
TPCH Skew best validation speedup epoch: 25, train speedup 1.780, test speedup 3.912, val speedup 1.492
execution cost 0:14:42.958057
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.311054, and there are 26041 training samples
in channel 9
JOB test speedup 0.9113917187068374
TPCH test speedup 6.700821430239476
TPCH skew test speedup 6.516214602098856
Epoch 0/50 |loss: 0.374943| train set 1.577x speedup, test set 6.516x speedup, val set 0.515x speedup, step: 1, train time 17.95 s
JOB test speedup 1.1058092210725063
TPCH test speedup 2.3841886907290926
TPCH skew test speedup 2.307294305493192
Epoch 1/50 |loss: 0.296729| train set 1.763x speedup, test set 2.307x speedup, val set 0.515x speedup, step: 2, train time 16.27 s
JOB test speedup 0.9171954646729584
TPCH test speedup 1.1914032439230222
TPCH skew test speedup 1.1461877326287448
Epoch 2/50 |loss: 0.265992| train set 1.746x speedup, test set 1.146x speedup, val set 0.512x speedup, step: 3, train time 16.58 s
JOB test speedup 0.9181739026758777
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 3/50 |loss: 0.249544| train set 1.710x speedup, test set 2.300x speedup, val set 0.515x speedup, step: 4, train time 16.42 s
JOB test speedup 0.9116220617176
TPCH test speedup 2.398447528605715
TPCH skew test speedup 2.316932135805185
Epoch 4/50 |loss: 0.233970| train set 1.788x speedup, test set 2.317x speedup, val set 0.512x speedup, step: 5, train time 16.48 s
JOB test speedup 1.467245255530351
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 5/50 |loss: 0.226716| train set 1.755x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 6, train time 16.40 s
JOB test speedup 1.4474873277671543
TPCH test speedup 2.544110105691499
TPCH skew test speedup 2.5030621095008483
Epoch 6/50 |loss: 0.211359| train set 1.789x speedup, test set 2.503x speedup, val set 0.512x speedup, step: 7, train time 16.39 s
JOB test speedup 0.9126706687485995
TPCH test speedup 2.2185018725766086
TPCH skew test speedup 2.1468833494820685
Epoch 7/50 |loss: 0.204192| train set 1.792x speedup, test set 2.147x speedup, val set 0.512x speedup, step: 8, train time 16.51 s
JOB test speedup 2.57989260308253
TPCH test speedup 2.356393836875425
TPCH skew test speedup 2.3097278570640705
Epoch 8/50 |loss: 0.197262| train set 1.795x speedup, test set 2.310x speedup, val set 1.469x speedup, step: 1, train time 16.28 s
JOB test speedup 1.4699893814090035
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 9/50 |loss: 0.191389| train set 1.791x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 2, train time 16.36 s
JOB test speedup 2.21368360468696
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 10/50 |loss: 0.182956| train set 1.792x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 3, train time 16.38 s
JOB test speedup 1.4693931948771564
TPCH test speedup 5.667702103543765
TPCH skew test speedup 5.364450798040867
Epoch 11/50 |loss: 0.180152| train set 1.682x speedup, test set 5.364x speedup, val set 0.512x speedup, step: 4, train time 16.29 s
JOB test speedup 1.9947750363808419
TPCH test speedup 2.2016750532574147
TPCH skew test speedup 2.170735414173334
Epoch 12/50 |loss: 0.177476| train set 1.775x speedup, test set 2.171x speedup, val set 0.512x speedup, step: 5, train time 16.38 s
JOB test speedup 1.4696484310758222
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 13/50 |loss: 0.174519| train set 1.792x speedup, test set 4.471x speedup, val set 1.469x speedup, step: 6, train time 16.41 s
JOB test speedup 1.5077949695024315
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.3097278570640705
Epoch 14/50 |loss: 0.171022| train set 1.794x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 7, train time 16.49 s
JOB test speedup 1.6429105758058489
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 15/50 |loss: 0.168067| train set 1.798x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 8, train time 16.41 s
JOB test speedup 1.5204954990171466
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 16/50 |loss: 0.167621| train set 1.763x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 9, train time 16.31 s
JOB test speedup 1.5523796908072158
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 17/50 |loss: 0.160983| train set 1.762x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 10, train time 16.37 s
JOB test speedup 1.437478232766993
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 18/50 |loss: 0.160245| train set 1.799x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 11, train time 16.39 s
JOB test speedup 1.441799070632966
TPCH test speedup 5.073172480128221
TPCH skew test speedup 4.804303612783904
Epoch 19/50 |loss: 0.158468| train set 1.779x speedup, test set 4.804x speedup, val set 0.513x speedup, step: 12, train time 16.51 s
JOB test speedup 0.9140286653071515
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 20/50 |loss: 0.156866| train set 1.764x speedup, test set 4.471x speedup, val set 0.512x speedup, step: 13, train time 16.62 s
JOB test speedup 2.1073218494783044
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 21/50 |loss: 0.153346| train set 1.801x speedup, test set 4.471x speedup, val set 0.512x speedup, step: 14, train time 16.48 s
JOB test speedup 1.601736068782675
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 22/50 |loss: 0.153917| train set 1.780x speedup, test set 4.075x speedup, val set 0.438x speedup, step: 15, train time 16.49 s
JOB test speedup 2.355873636880743
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 23/50 |loss: 0.150256| train set 1.797x speedup, test set 4.471x speedup, val set 0.512x speedup, step: 16, train time 16.40 s
JOB test speedup 0.8954484095278357
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 24/50 |loss: 0.145043| train set 1.772x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 17, train time 16.49 s
JOB test speedup 1.7401334721041346
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 25/50 |loss: 0.145977| train set 1.799x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 18, train time 16.52 s
JOB test speedup 1.4654596699253406
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 26/50 |loss: 0.146573| train set 1.798x speedup, test set 4.075x speedup, val set 1.469x speedup, step: 19, train time 16.69 s
JOB test speedup 1.955269808323102
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 27/50 |loss: 0.145589| train set 1.800x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 20, train time 16.70 s
JOB test speedup 1.464323591853178
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 28/50 |loss: 0.142326| train set 1.782x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 21, train time 16.59 s
JOB test speedup 1.4471423216990793
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 29/50 |loss: 0.139067| train set 1.796x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 22, train time 16.70 s
JOB test speedup 1.4129014950323495
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 30/50 |loss: 0.139496| train set 1.766x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 23, train time 16.67 s
JOB test speedup 1.4403633285308566
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 31/50 |loss: 0.138441| train set 1.798x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 24, train time 16.81 s
JOB test speedup 1.5170084811750093
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 32/50 |loss: 0.136671| train set 1.780x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 25, train time 16.92 s
JOB test speedup 1.4811173301842615
TPCH test speedup 4.2329436485172405
TPCH skew test speedup 4.058203935956812
Epoch 33/50 |loss: 0.134622| train set 1.798x speedup, test set 4.058x speedup, val set 0.512x speedup, step: 26, train time 16.88 s
JOB test speedup 1.395336805363613
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 34/50 |loss: 0.136291| train set 1.801x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 27, train time 16.79 s
JOB test speedup 0.9135136683786155
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 35/50 |loss: 0.133495| train set 1.801x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 28, train time 16.69 s
JOB test speedup 1.4888159237050644
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 36/50 |loss: 0.129152| train set 1.778x speedup, test set 4.075x speedup, val set 1.240x speedup, step: 29, train time 16.82 s
JOB test speedup 2.0791215354882384
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 37/50 |loss: 0.131033| train set 1.798x speedup, test set 4.075x speedup, val set 1.240x speedup, step: 30, train time 16.58 s
JOB test speedup 1.4579032159276437
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 38/50 |loss: 0.129974| train set 1.773x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 31, train time 16.78 s
JOB test speedup 1.4522327582417784
TPCH test speedup 2.21253483270547
TPCH skew test speedup 2.140463353681208
Epoch 39/50 |loss: 0.132568| train set 1.780x speedup, test set 2.140x speedup, val set 1.240x speedup, step: 32, train time 16.89 s
JOB test speedup 0.919714855104542
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 40/50 |loss: 0.130432| train set 1.802x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 33, train time 16.72 s
JOB test speedup 0.913283334740723
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 41/50 |loss: 0.125513| train set 1.781x speedup, test set 4.075x speedup, val set 1.240x speedup, step: 34, train time 16.89 s
JOB test speedup 0.9227152700581206
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 42/50 |loss: 0.129006| train set 1.796x speedup, test set 3.912x speedup, val set 1.240x speedup, step: 35, train time 16.76 s
JOB test speedup 0.9402572123597207
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 43/50 |loss: 0.127427| train set 1.799x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 36, train time 16.78 s
JOB test speedup 0.9015676275116965
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 44/50 |loss: 0.126610| train set 1.802x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 37, train time 16.90 s
JOB test speedup 0.9044279295533528
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 45/50 |loss: 0.126425| train set 1.781x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 38, train time 16.79 s
JOB test speedup 1.5135672477701116
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 46/50 |loss: 0.124033| train set 1.801x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 39, train time 17.02 s
JOB test speedup 2.080380365478604
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 47/50 |loss: 0.125903| train set 1.802x speedup, test set 4.075x speedup, val set 0.515x speedup, step: 40, train time 16.99 s
JOB test speedup 2.1274219364101383
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 48/50 |loss: 0.122347| train set 1.800x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 41, train time 16.80 s
JOB test speedup 1.4833224828176284
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 49/50 |loss: 0.124616| train set 1.800x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 42, train time 16.81 s
Training per epoch cost 16.632 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
03, opt runtime 1.763s, model runtime 2.388s, pg runtime 1.763s, speedup 0.738x
04, opt runtime 1.386s, model runtime 2.323s, pg runtime 1.386s, speedup 0.597x
05, opt runtime 3.504s, model runtime 3.504s, pg runtime 6.143s, speedup 1.753x
06, opt runtime 2.593s, model runtime 2.593s, pg runtime 8.283s, speedup 3.195x
07, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
08, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 12.971s, pg runtime 13.945s, speedup 1.075x
13, opt runtime 5.179s, model runtime 11.835s, pg runtime 10.685s, speedup 0.903x
14, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.393s, speedup 2.504x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 2.971s, pg runtime 8.605s, speedup 2.897x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 85.611s, pg runtime 78.349s, speedup 0.915x
13, opt runtime 53.440s, model runtime 86.638s, pg runtime 140.742s, speedup 1.624x
14, opt runtime 47.812s, model runtime 88.819s, pg runtime 83.069s, speedup 0.935x
15, opt runtime 47.518s, model runtime 83.137s, pg runtime 75.736s, speedup 0.911x
16, opt runtime 48.067s, model runtime 87.942s, pg runtime 81.014s, speedup 0.921x
17, opt runtime 47.738s, model runtime 83.106s, pg runtime 76.021s, speedup 0.915x
18, opt runtime 47.804s, model runtime 87.416s, pg runtime 81.177s, speedup 0.929x
19, opt runtime 49.511s, model runtime 92.597s, pg runtime 87.329s, speedup 0.943x
20, opt runtime 51.276s, model runtime 84.921s, pg runtime 79.222s, speedup 0.933x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 341.320s, pg runtime 432.766s, speedup 1.268x
32, opt runtime 15.120s, model runtime 353.483s, pg runtime 566.078s, speedup 1.601x
33, opt runtime 16.639s, model runtime 353.418s, pg runtime 462.544s, speedup 1.309x
34, opt runtime 16.280s, model runtime 367.037s, pg runtime 634.990s, speedup 1.730x
35, opt runtime 16.528s, model runtime 354.584s, pg runtime 620.762s, speedup 1.751x
36, opt runtime 18.690s, model runtime 355.233s, pg runtime 651.942s, speedup 1.835x
37, opt runtime 16.438s, model runtime 352.471s, pg runtime 546.887s, speedup 1.552x
38, opt runtime 16.138s, model runtime 345.514s, pg runtime 501.793s, speedup 1.452x
39, opt runtime 16.770s, model runtime 344.251s, pg runtime 594.754s, speedup 1.728x
40, opt runtime 16.305s, model runtime 343.002s, pg runtime 436.168s, speedup 1.272x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 87.162s, pg runtime 80.711s, speedup 0.926x
12, opt runtime 53.203s, model runtime 88.372s, pg runtime 79.156s, speedup 0.896x
13, opt runtime 51.456s, model runtime 84.214s, pg runtime 93.781s, speedup 1.114x
14, opt runtime 54.696s, model runtime 91.625s, pg runtime 98.172s, speedup 1.071x
15, opt runtime 51.200s, model runtime 84.681s, pg runtime 77.674s, speedup 0.917x
16, opt runtime 47.844s, model runtime 86.036s, pg runtime 80.007s, speedup 0.930x
17, opt runtime 54.335s, model runtime 85.400s, pg runtime 95.799s, speedup 1.122x
18, opt runtime 48.088s, model runtime 83.930s, pg runtime 77.369s, speedup 0.922x
19, opt runtime 52.382s, model runtime 102.152s, pg runtime 82.710s, speedup 0.810x
20, opt runtime 52.135s, model runtime 91.553s, pg runtime 102.039s, speedup 1.115x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 359.909s, pg runtime 602.586s, speedup 1.674x
32, opt runtime 16.542s, model runtime 339.860s, pg runtime 461.957s, speedup 1.359x
33, opt runtime 16.136s, model runtime 338.732s, pg runtime 410.283s, speedup 1.211x
34, opt runtime 14.422s, model runtime 344.192s, pg runtime 497.542s, speedup 1.446x
35, opt runtime 15.980s, model runtime 338.670s, pg runtime 504.239s, speedup 1.489x
36, opt runtime 16.482s, model runtime 353.788s, pg runtime 622.915s, speedup 1.761x
37, opt runtime 16.301s, model runtime 349.420s, pg runtime 646.719s, speedup 1.851x
38, opt runtime 16.194s, model runtime 347.772s, pg runtime 439.255s, speedup 1.263x
39, opt runtime 16.149s, model runtime 348.583s, pg runtime 423.122s, speedup 1.214x
40, opt runtime 13.751s, model runtime 345.840s, pg runtime 434.625s, speedup 1.257x
====================
JOB best validation speedup epoch: 8, train speedup 1.795, test speedup 2.580, val speedup 1.469
TPCH best validation speedup epoch: 8, train speedup 1.795, test speedup 2.356, val speedup 1.469
TPCH Skew best validation speedup epoch: 8, train speedup 1.795, test speedup 2.310, val speedup 1.469
execution cost 0:14:49.797198
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.289665, and there are 26041 training samples
in channel 9
JOB test speedup 0.9011538091927265
TPCH test speedup 1.2305682646072817
TPCH skew test speedup 1.1100570801270278
Epoch 0/50 |loss: 0.374012| train set 1.659x speedup, test set 1.110x speedup, val set 0.515x speedup, step: 1, train time 17.62 s
JOB test speedup 0.9282698794403298
TPCH test speedup 1.2364147669795567
TPCH skew test speedup 1.1117184123624977
Epoch 1/50 |loss: 0.297775| train set 1.767x speedup, test set 1.112x speedup, val set 0.516x speedup, step: 1, train time 16.43 s
JOB test speedup 1.0266914087898364
TPCH test speedup 1.7611747120514003
TPCH skew test speedup 1.6764360678777777
Epoch 2/50 |loss: 0.268653| train set 1.739x speedup, test set 1.676x speedup, val set 0.515x speedup, step: 2, train time 16.47 s
JOB test speedup 1.4772709483154343
TPCH test speedup 1.2305682646072817
TPCH skew test speedup 1.1100570801270278
Epoch 3/50 |loss: 0.253103| train set 1.713x speedup, test set 1.110x speedup, val set 0.515x speedup, step: 3, train time 16.31 s
JOB test speedup 2.0160527762460227
TPCH test speedup 1.1878743178790956
TPCH skew test speedup 1.1438241109148295
Epoch 4/50 |loss: 0.238375| train set 1.790x speedup, test set 1.144x speedup, val set 0.512x speedup, step: 4, train time 16.41 s
JOB test speedup 1.4181344296517773
TPCH test speedup 1.1434311484835338
TPCH skew test speedup 1.0772490981284706
Epoch 5/50 |loss: 0.231486| train set 1.755x speedup, test set 1.077x speedup, val set 1.492x speedup, step: 1, train time 16.28 s
JOB test speedup 1.4157793263110863
TPCH test speedup 1.5016056955077237
TPCH skew test speedup 1.4768119130816948
Epoch 6/50 |loss: 0.216831| train set 1.738x speedup, test set 1.477x speedup, val set 0.512x speedup, step: 2, train time 16.28 s
JOB test speedup 0.9183178876625172
TPCH test speedup 1.116174360816181
TPCH skew test speedup 1.0772490981284706
Epoch 7/50 |loss: 0.210719| train set 1.756x speedup, test set 1.077x speedup, val set 0.515x speedup, step: 3, train time 16.49 s
JOB test speedup 2.2294891823520726
TPCH test speedup 2.108446279818575
TPCH skew test speedup 2.062121674686771
Epoch 8/50 |loss: 0.202422| train set 1.776x speedup, test set 2.062x speedup, val set 1.483x speedup, step: 4, train time 16.51 s
JOB test speedup 1.46782053406057
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 9/50 |loss: 0.196782| train set 1.792x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 5, train time 16.60 s
JOB test speedup 1.562589431497474
TPCH test speedup 1.5723158312511296
TPCH skew test speedup 1.4950666168207785
Epoch 10/50 |loss: 0.189874| train set 1.796x speedup, test set 1.495x speedup, val set 0.515x speedup, step: 6, train time 16.31 s
JOB test speedup 1.4821822539902714
TPCH test speedup 1.1130764399607056
TPCH skew test speedup 1.075160991814484
Epoch 11/50 |loss: 0.186895| train set 1.776x speedup, test set 1.075x speedup, val set 0.515x speedup, step: 7, train time 16.21 s
JOB test speedup 1.4749507635122698
TPCH test speedup 2.147042081403224
TPCH skew test speedup 2.071624935136317
Epoch 12/50 |loss: 0.184137| train set 1.773x speedup, test set 2.072x speedup, val set 0.515x speedup, step: 8, train time 16.22 s
JOB test speedup 1.4942650780973459
TPCH test speedup 1.1340042151643912
TPCH skew test speedup 1.0907165440418336
Epoch 13/50 |loss: 0.180732| train set 1.761x speedup, test set 1.091x speedup, val set 1.492x speedup, step: 1, train time 16.41 s
JOB test speedup 0.9160482331725155
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 14/50 |loss: 0.177489| train set 1.794x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 2, train time 16.50 s
JOB test speedup 1.5360393674033859
TPCH test speedup 1.13910356566258
TPCH skew test speedup 1.0968088015707864
Epoch 15/50 |loss: 0.175328| train set 1.793x speedup, test set 1.097x speedup, val set 0.512x speedup, step: 3, train time 16.42 s
JOB test speedup 1.347664868701074
TPCH test speedup 1.5335352149707258
TPCH skew test speedup 1.4657532478785045
Epoch 16/50 |loss: 0.172659| train set 1.764x speedup, test set 1.466x speedup, val set 0.515x speedup, step: 4, train time 16.31 s
JOB test speedup 1.5513520629753603
TPCH test speedup 1.13910356566258
TPCH skew test speedup 1.099253079854066
Epoch 17/50 |loss: 0.165748| train set 1.760x speedup, test set 1.099x speedup, val set 1.492x speedup, step: 5, train time 16.40 s
JOB test speedup 0.9422528816361748
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 18/50 |loss: 0.166694| train set 1.798x speedup, test set 2.127x speedup, val set 1.470x speedup, step: 6, train time 16.51 s
JOB test speedup 1.457336497990528
TPCH test speedup 1.4794402636823651
TPCH skew test speedup 1.205286117424849
Epoch 19/50 |loss: 0.164192| train set 1.775x speedup, test set 1.205x speedup, val set 0.512x speedup, step: 7, train time 16.58 s
JOB test speedup 0.9437799763812847
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 20/50 |loss: 0.161173| train set 1.797x speedup, test set 2.127x speedup, val set 0.514x speedup, step: 8, train time 16.39 s
JOB test speedup 1.5278449627992925
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 21/50 |loss: 0.159473| train set 1.799x speedup, test set 2.119x speedup, val set 0.515x speedup, step: 9, train time 16.48 s
JOB test speedup 0.9407941633124532
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 22/50 |loss: 0.157777| train set 1.781x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 10, train time 16.60 s
JOB test speedup 1.1490384046134425
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 23/50 |loss: 0.154682| train set 1.797x speedup, test set 2.127x speedup, val set 1.492x speedup, step: 11, train time 16.58 s
JOB test speedup 1.4359102246944182
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 24/50 |loss: 0.152181| train set 1.773x speedup, test set 2.127x speedup, val set 1.470x speedup, step: 12, train time 16.60 s
JOB test speedup 0.9338026785605362
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 25/50 |loss: 0.152225| train set 1.798x speedup, test set 2.127x speedup, val set 1.492x speedup, step: 13, train time 16.60 s
JOB test speedup 1.4780343757905645
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 26/50 |loss: 0.150380| train set 1.799x speedup, test set 2.127x speedup, val set 0.737x speedup, step: 14, train time 16.79 s
JOB test speedup 1.4779140242916844
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 27/50 |loss: 0.149251| train set 1.801x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 15, train time 16.70 s
JOB test speedup 0.922314691617655
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 28/50 |loss: 0.146637| train set 1.776x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 16, train time 16.58 s
JOB test speedup 1.507384235932539
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 29/50 |loss: 0.144362| train set 1.801x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 17, train time 16.51 s
JOB test speedup 0.9081686678647429
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 30/50 |loss: 0.145123| train set 1.791x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 18, train time 16.60 s
JOB test speedup 0.9146869647481224
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 31/50 |loss: 0.141588| train set 1.796x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 19, train time 16.58 s
JOB test speedup 0.9116134066800317
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 32/50 |loss: 0.142030| train set 1.782x speedup, test set 2.127x speedup, val set 0.513x speedup, step: 20, train time 16.58 s
JOB test speedup 0.9131239631688999
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 33/50 |loss: 0.139600| train set 1.798x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 21, train time 16.59 s
JOB test speedup 0.9103969853358361
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 34/50 |loss: 0.141543| train set 1.800x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 22, train time 16.70 s
JOB test speedup 0.8947696198492384
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 35/50 |loss: 0.137193| train set 1.801x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 23, train time 16.70 s
JOB test speedup 0.915044770825092
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 36/50 |loss: 0.132868| train set 1.781x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 24, train time 16.89 s
JOB test speedup 1.4367163937215623
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 37/50 |loss: 0.135853| train set 1.798x speedup, test set 2.127x speedup, val set 1.493x speedup, step: 1, train time 16.68 s
JOB test speedup 1.4395149001677336
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 38/50 |loss: 0.134143| train set 1.776x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 2, train time 16.59 s
JOB test speedup 0.9085682411345186
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 39/50 |loss: 0.135112| train set 1.767x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 3, train time 16.77 s
JOB test speedup 0.8989246484456647
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 40/50 |loss: 0.132841| train set 1.783x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 4, train time 16.60 s
JOB test speedup 0.9033210897298591
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 41/50 |loss: 0.131584| train set 1.779x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 5, train time 16.70 s
JOB test speedup 0.9129690927861034
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 42/50 |loss: 0.130078| train set 1.801x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 6, train time 16.60 s
JOB test speedup 0.915044770825092
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 43/50 |loss: 0.130415| train set 1.800x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 7, train time 16.68 s
JOB test speedup 0.9009357655605077
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 44/50 |loss: 0.130401| train set 1.801x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 8, train time 16.67 s
JOB test speedup 0.9111815011520353
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 45/50 |loss: 0.128095| train set 1.780x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 9, train time 16.70 s
JOB test speedup 0.9020697034529286
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 46/50 |loss: 0.129037| train set 1.800x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 10, train time 16.60 s
JOB test speedup 0.8984309212367317
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 47/50 |loss: 0.127406| train set 1.801x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 11, train time 16.52 s
JOB test speedup 0.934723456993584
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 48/50 |loss: 0.126786| train set 1.800x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 12, train time 16.70 s
JOB test speedup 0.9302049689300677
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 49/50 |loss: 0.126011| train set 1.801x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 13, train time 16.80 s
Training per epoch cost 16.567 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
10, opt runtime 3.248s, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 51.645s, pg runtime 13.945s, speedup 0.270x
13, opt runtime 5.179s, model runtime 11.835s, pg runtime 10.685s, speedup 0.903x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 5.957s, pg runtime 6.089s, speedup 1.022x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.238s, pg runtime 8.605s, speedup 1.045x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
13, opt runtime 53.440s, model runtime 136.731s, pg runtime 140.742s, speedup 1.029x
14, opt runtime 47.812s, model runtime 139.115s, pg runtime 83.069s, speedup 0.597x
15, opt runtime 47.518s, model runtime 133.905s, pg runtime 75.736s, speedup 0.566x
16, opt runtime 48.067s, model runtime 135.202s, pg runtime 81.014s, speedup 0.599x
17, opt runtime 47.738s, model runtime 135.818s, pg runtime 76.021s, speedup 0.560x
18, opt runtime 47.804s, model runtime 136.805s, pg runtime 81.177s, speedup 0.593x
19, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
20, opt runtime 51.276s, model runtime 134.457s, pg runtime 79.222s, speedup 0.589x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 341.320s, pg runtime 432.766s, speedup 1.268x
32, opt runtime 15.120s, model runtime 353.483s, pg runtime 566.078s, speedup 1.601x
33, opt runtime 16.639s, model runtime 353.418s, pg runtime 462.544s, speedup 1.309x
34, opt runtime 16.280s, model runtime 367.037s, pg runtime 634.990s, speedup 1.730x
35, opt runtime 16.528s, model runtime 354.584s, pg runtime 620.762s, speedup 1.751x
36, opt runtime 18.690s, model runtime 355.233s, pg runtime 651.942s, speedup 1.835x
37, opt runtime 16.438s, model runtime 352.471s, pg runtime 546.887s, speedup 1.552x
38, opt runtime 16.138s, model runtime 345.514s, pg runtime 501.793s, speedup 1.452x
39, opt runtime 16.770s, model runtime 344.251s, pg runtime 594.754s, speedup 1.728x
40, opt runtime 16.305s, model runtime 343.002s, pg runtime 436.168s, speedup 1.272x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 140.245s, pg runtime 80.711s, speedup 0.575x
12, opt runtime 53.203s, model runtime 135.711s, pg runtime 79.156s, speedup 0.583x
13, opt runtime 51.456s, model runtime 132.632s, pg runtime 93.781s, speedup 0.707x
14, opt runtime 54.696s, model runtime 141.455s, pg runtime 98.172s, speedup 0.694x
15, opt runtime 51.200s, model runtime 137.865s, pg runtime 77.674s, speedup 0.563x
16, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
17, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
18, opt runtime 48.088s, model runtime 135.391s, pg runtime 77.369s, speedup 0.571x
19, opt runtime 52.382s, model runtime 146.665s, pg runtime 82.710s, speedup 0.564x
20, opt runtime 52.135s, model runtime 137.176s, pg runtime 102.039s, speedup 0.744x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 359.909s, pg runtime 602.586s, speedup 1.674x
32, opt runtime 16.542s, model runtime 339.860s, pg runtime 461.957s, speedup 1.359x
33, opt runtime 16.136s, model runtime 338.732s, pg runtime 410.283s, speedup 1.211x
34, opt runtime 14.422s, model runtime 344.192s, pg runtime 497.542s, speedup 1.446x
35, opt runtime 15.980s, model runtime 338.670s, pg runtime 504.239s, speedup 1.489x
36, opt runtime 16.482s, model runtime 353.788s, pg runtime 622.915s, speedup 1.761x
37, opt runtime 16.301s, model runtime 349.420s, pg runtime 646.719s, speedup 1.851x
38, opt runtime 16.194s, model runtime 347.772s, pg runtime 439.255s, speedup 1.263x
39, opt runtime 16.149s, model runtime 348.583s, pg runtime 423.122s, speedup 1.214x
40, opt runtime 13.751s, model runtime 345.840s, pg runtime 434.625s, speedup 1.257x
====================
JOB best validation speedup epoch: 37, train speedup 1.798, test speedup 1.437, val speedup 1.493
TPCH best validation speedup epoch: 37, train speedup 1.798, test speedup 2.177, val speedup 1.493
TPCH Skew best validation speedup epoch: 37, train speedup 1.798, test speedup 2.127, val speedup 1.493
execution cost 0:14:45.727369
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.315203, and there are 26041 training samples
in channel 9
JOB test speedup 0.9077399107419643
TPCH test speedup 1.6709827451190444
TPCH skew test speedup 1.6013751662652977
Epoch 0/50 |loss: 0.373785| train set 1.588x speedup, test set 1.601x speedup, val set 0.278x speedup, step: 1, train time 17.81 s
JOB test speedup 1.0786955621958425
TPCH test speedup 6.934474890587212
TPCH skew test speedup 6.735523854276042
Epoch 1/50 |loss: 0.297045| train set 1.723x speedup, test set 6.736x speedup, val set 0.440x speedup, step: 1, train time 16.20 s
JOB test speedup 0.910189418205202
TPCH test speedup 1.2283115875590607
TPCH skew test speedup 1.1893158804023198
Epoch 2/50 |loss: 0.267463| train set 1.781x speedup, test set 1.189x speedup, val set 0.515x speedup, step: 1, train time 16.39 s
JOB test speedup 0.9018017438836723
TPCH test speedup 2.5280725300233615
TPCH skew test speedup 2.491817333804585
Epoch 3/50 |loss: 0.252727| train set 1.708x speedup, test set 2.492x speedup, val set 0.515x speedup, step: 1, train time 16.57 s
JOB test speedup 1.0858949602158603
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 4/50 |loss: 0.235912| train set 1.789x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 2, train time 16.47 s
JOB test speedup 1.4178932350210736
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 5/50 |loss: 0.227409| train set 1.791x speedup, test set 2.310x speedup, val set 0.515x speedup, step: 3, train time 16.50 s
JOB test speedup 1.4158301419126966
TPCH test speedup 2.544110105691499
TPCH skew test speedup 2.5030621095008483
Epoch 6/50 |loss: 0.214573| train set 1.791x speedup, test set 2.503x speedup, val set 0.512x speedup, step: 4, train time 16.40 s
JOB test speedup 1.4549029757048906
TPCH test speedup 2.224022490134563
TPCH skew test speedup 2.196143561928886
Epoch 7/50 |loss: 0.207259| train set 1.749x speedup, test set 2.196x speedup, val set 0.515x speedup, step: 5, train time 16.53 s
JOB test speedup 2.2342429268576094
TPCH test speedup 6.7238588746882915
TPCH skew test speedup 6.537161359481754
Epoch 8/50 |loss: 0.198635| train set 1.796x speedup, test set 6.537x speedup, val set 1.492x speedup, step: 1, train time 16.41 s
JOB test speedup 1.4157935066855605
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 9/50 |loss: 0.194477| train set 1.791x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 2, train time 16.40 s
JOB test speedup 1.160178528658904
TPCH test speedup 2.237103526644986
TPCH skew test speedup 2.170735414173334
Epoch 10/50 |loss: 0.184920| train set 1.792x speedup, test set 2.171x speedup, val set 0.515x speedup, step: 3, train time 16.31 s
JOB test speedup 0.9611741583901923
TPCH test speedup 2.544110105691499
TPCH skew test speedup 2.5030621095008483
Epoch 11/50 |loss: 0.181281| train set 1.683x speedup, test set 2.503x speedup, val set 0.515x speedup, step: 4, train time 16.39 s
JOB test speedup 1.0996823314280717
TPCH test speedup 2.3223464738692683
TPCH skew test speedup 2.300149745505483
Epoch 12/50 |loss: 0.179846| train set 1.780x speedup, test set 2.300x speedup, val set 0.438x speedup, step: 5, train time 16.48 s
JOB test speedup 1.5371794660818905
TPCH test speedup 5.340139000325813
TPCH skew test speedup 5.256993765935433
Epoch 13/50 |loss: 0.176888| train set 1.756x speedup, test set 5.257x speedup, val set 1.068x speedup, step: 6, train time 16.30 s
JOB test speedup 1.6036105556077282
TPCH test speedup 2.21382881007082
TPCH skew test speedup 2.144586749162988
Epoch 14/50 |loss: 0.174569| train set 1.800x speedup, test set 2.145x speedup, val set 0.515x speedup, step: 7, train time 16.49 s
JOB test speedup 1.7140620881348878
TPCH test speedup 6.7238588746882915
TPCH skew test speedup 6.537161359481754
Epoch 15/50 |loss: 0.171354| train set 1.795x speedup, test set 6.537x speedup, val set 0.515x speedup, step: 8, train time 16.40 s
JOB test speedup 1.4844517551354355
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 16/50 |loss: 0.170863| train set 1.795x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 9, train time 16.40 s
JOB test speedup 1.5627103651544216
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 17/50 |loss: 0.164480| train set 1.790x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 10, train time 16.51 s
JOB test speedup 1.6416046541784035
TPCH test speedup 2.306527235383851
TPCH skew test speedup 2.2626119469929225
Epoch 18/50 |loss: 0.162755| train set 1.798x speedup, test set 2.263x speedup, val set 0.512x speedup, step: 11, train time 16.39 s
JOB test speedup 1.4546086926516621
TPCH test speedup 2.2705729899300926
TPCH skew test speedup 2.196143561928886
Epoch 19/50 |loss: 0.161463| train set 1.782x speedup, test set 2.196x speedup, val set 0.512x speedup, step: 12, train time 16.36 s
JOB test speedup 1.5538545039096736
TPCH test speedup 2.3036421835937837
TPCH skew test speedup 2.280165188094074
Epoch 20/50 |loss: 0.158074| train set 1.764x speedup, test set 2.280x speedup, val set 0.515x speedup, step: 13, train time 16.52 s
JOB test speedup 2.203704839741393
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 21/50 |loss: 0.155872| train set 1.800x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 14, train time 16.48 s
JOB test speedup 2.2264692417648897
TPCH test speedup 2.5280725300233615
TPCH skew test speedup 2.491817333804585
Epoch 22/50 |loss: 0.155536| train set 1.780x speedup, test set 2.492x speedup, val set 1.470x speedup, step: 15, train time 16.49 s
JOB test speedup 1.2110829086186385
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 23/50 |loss: 0.153504| train set 1.673x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 16, train time 16.49 s
JOB test speedup 1.41348073786209
TPCH test speedup 2.3036421835937837
TPCH skew test speedup 2.280165188094074
Epoch 24/50 |loss: 0.149895| train set 1.772x speedup, test set 2.280x speedup, val set 0.512x speedup, step: 17, train time 16.50 s
JOB test speedup 2.5549483639400217
TPCH test speedup 4.982964614980263
TPCH skew test speedup 4.6987363811456095
Epoch 25/50 |loss: 0.148499| train set 1.801x speedup, test set 4.699x speedup, val set 0.512x speedup, step: 18, train time 16.62 s
JOB test speedup 1.3816912629816405
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 26/50 |loss: 0.147302| train set 1.800x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 19, train time 16.48 s
JOB test speedup 2.356342797796113
TPCH test speedup 2.497557264897291
TPCH skew test speedup 2.4143361903313343
Epoch 27/50 |loss: 0.147394| train set 1.801x speedup, test set 2.414x speedup, val set 0.990x speedup, step: 20, train time 16.62 s
JOB test speedup 1.8796668251314688
TPCH test speedup 4.6528178833697735
TPCH skew test speedup 4.578794901182424
Epoch 28/50 |loss: 0.144053| train set 1.777x speedup, test set 4.579x speedup, val set 0.512x speedup, step: 21, train time 16.59 s
JOB test speedup 2.0833590348859476
TPCH test speedup 4.578340680415665
TPCH skew test speedup 4.500278089680026
Epoch 29/50 |loss: 0.141774| train set 1.801x speedup, test set 4.500x speedup, val set 0.512x speedup, step: 22, train time 16.69 s
JOB test speedup 2.1027552566889494
TPCH test speedup 2.316951176410145
TPCH skew test speedup 2.2895772457611594
Epoch 30/50 |loss: 0.141951| train set 1.690x speedup, test set 2.290x speedup, val set 0.438x speedup, step: 23, train time 16.60 s
JOB test speedup 1.9176455786310316
TPCH test speedup 4.192447021489204
TPCH skew test speedup 3.972400743608988
Epoch 31/50 |loss: 0.139874| train set 1.781x speedup, test set 3.972x speedup, val set 0.512x speedup, step: 24, train time 17.00 s
JOB test speedup 2.4970594387774234
TPCH test speedup 4.128633662289353
TPCH skew test speedup 3.972400743608988
Epoch 32/50 |loss: 0.139164| train set 1.781x speedup, test set 3.972x speedup, val set 0.990x speedup, step: 25, train time 16.79 s
JOB test speedup 2.1044427087246524
TPCH test speedup 2.316951176410145
TPCH skew test speedup 2.2895772457611594
Epoch 33/50 |loss: 0.136666| train set 1.799x speedup, test set 2.290x speedup, val set 0.512x speedup, step: 26, train time 16.58 s
JOB test speedup 2.2071430503462244
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 34/50 |loss: 0.138834| train set 1.801x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 27, train time 16.70 s
JOB test speedup 1.1006750900633178
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 35/50 |loss: 0.134942| train set 1.767x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 28, train time 16.68 s
JOB test speedup 2.1013167934209434
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 36/50 |loss: 0.131833| train set 1.782x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 29, train time 16.71 s
JOB test speedup 2.12523460342335
TPCH test speedup 5.325597521667703
TPCH skew test speedup 5.2434391905732225
Epoch 37/50 |loss: 0.131880| train set 1.799x speedup, test set 5.243x speedup, val set 0.990x speedup, step: 30, train time 16.58 s
JOB test speedup 1.4599996863968063
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 38/50 |loss: 0.131055| train set 1.774x speedup, test set 2.119x speedup, val set 0.438x speedup, step: 31, train time 16.61 s
JOB test speedup 1.4379754758976642
TPCH test speedup 4.137642127451015
TPCH skew test speedup 3.911609093039202
Epoch 39/50 |loss: 0.133597| train set 1.775x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 32, train time 16.70 s
JOB test speedup 1.1139934198617771
TPCH test speedup 5.031386527165049
TPCH skew test speedup 4.753849383459155
Epoch 40/50 |loss: 0.131360| train set 1.802x speedup, test set 4.754x speedup, val set 0.512x speedup, step: 33, train time 16.80 s
JOB test speedup 1.1242180870712468
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 41/50 |loss: 0.127888| train set 1.780x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 34, train time 16.68 s
JOB test speedup 2.0339347218365367
TPCH test speedup 4.209237721116325
TPCH skew test speedup 3.9802875441369623
Epoch 42/50 |loss: 0.128862| train set 1.801x speedup, test set 3.980x speedup, val set 0.438x speedup, step: 35, train time 16.70 s
JOB test speedup 1.1657964219104335
TPCH test speedup 4.4488468740881215
TPCH skew test speedup 3.911609093039202
Epoch 43/50 |loss: 0.127376| train set 1.800x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 36, train time 16.81 s
JOB test speedup 2.1044427087246524
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 44/50 |loss: 0.126676| train set 1.801x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 37, train time 16.73 s
JOB test speedup 1.078491001404587
TPCH test speedup 4.578340680415665
TPCH skew test speedup 4.500278089680026
Epoch 45/50 |loss: 0.126250| train set 1.799x speedup, test set 4.500x speedup, val set 0.504x speedup, step: 38, train time 16.90 s
JOB test speedup 1.8255671683137853
TPCH test speedup 4.6528178833697735
TPCH skew test speedup 4.52057227737966
Epoch 46/50 |loss: 0.126242| train set 1.799x speedup, test set 4.521x speedup, val set 0.438x speedup, step: 39, train time 16.67 s
JOB test speedup 2.392418230440619
TPCH test speedup 4.737519817992848
TPCH skew test speedup 4.607193968009421
Epoch 47/50 |loss: 0.125019| train set 1.801x speedup, test set 4.607x speedup, val set 0.438x speedup, step: 40, train time 16.82 s
JOB test speedup 1.9830768986833265
TPCH test speedup 4.578340680415665
TPCH skew test speedup 4.500278089680026
Epoch 48/50 |loss: 0.121689| train set 1.799x speedup, test set 4.500x speedup, val set 0.515x speedup, step: 41, train time 16.90 s
JOB test speedup 2.2359719859643055
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 49/50 |loss: 0.122782| train set 1.799x speedup, test set 3.912x speedup, val set 0.440x speedup, step: 42, train time 16.89 s
Training per epoch cost 16.601 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 2.323s, pg runtime 1.386s, speedup 0.597x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.393s, speedup 2.504x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 2.971s, pg runtime 8.605s, speedup 2.897x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 56.876s, pg runtime 91.784s, speedup 1.614x
02, opt runtime 29.763s, model runtime 55.506s, pg runtime 91.648s, speedup 1.651x
03, opt runtime 30.267s, model runtime 57.401s, pg runtime 100.885s, speedup 1.758x
04, opt runtime 29.286s, model runtime 58.701s, pg runtime 92.131s, speedup 1.569x
05, opt runtime 29.269s, model runtime 57.330s, pg runtime 91.296s, speedup 1.592x
06, opt runtime 29.502s, model runtime 60.311s, pg runtime 112.305s, speedup 1.862x
07, opt runtime 27.886s, model runtime 58.497s, pg runtime 97.629s, speedup 1.669x
08, opt runtime 30.705s, model runtime 56.560s, pg runtime 89.698s, speedup 1.586x
09, opt runtime 27.651s, model runtime 58.506s, pg runtime 91.255s, speedup 1.560x
10, opt runtime 33.637s, model runtime 57.182s, pg runtime 90.618s, speedup 1.585x
11, opt runtime 53.298s, model runtime 91.571s, pg runtime 148.707s, speedup 1.624x
12, opt runtime 48.784s, model runtime 85.611s, pg runtime 78.349s, speedup 0.915x
13, opt runtime 53.440s, model runtime 86.638s, pg runtime 140.742s, speedup 1.624x
14, opt runtime 47.812s, model runtime 88.819s, pg runtime 83.069s, speedup 0.935x
15, opt runtime 47.518s, model runtime 83.137s, pg runtime 75.736s, speedup 0.911x
16, opt runtime 48.067s, model runtime 87.942s, pg runtime 81.014s, speedup 0.921x
17, opt runtime 47.738s, model runtime 83.106s, pg runtime 76.021s, speedup 0.915x
18, opt runtime 47.804s, model runtime 87.416s, pg runtime 81.177s, speedup 0.929x
19, opt runtime 49.511s, model runtime 92.597s, pg runtime 87.329s, speedup 0.943x
20, opt runtime 51.276s, model runtime 84.921s, pg runtime 79.222s, speedup 0.933x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 29.063s, model runtime 57.252s, pg runtime 91.786s, speedup 1.603x
02, opt runtime 33.249s, model runtime 57.064s, pg runtime 103.551s, speedup 1.815x
03, opt runtime 33.759s, model runtime 56.905s, pg runtime 98.290s, speedup 1.727x
04, opt runtime 36.646s, model runtime 56.207s, pg runtime 98.171s, speedup 1.747x
05, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
06, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
07, opt runtime 30.778s, model runtime 58.470s, pg runtime 100.158s, speedup 1.713x
08, opt runtime 30.030s, model runtime 57.504s, pg runtime 85.930s, speedup 1.494x
09, opt runtime 28.776s, model runtime 56.250s, pg runtime 86.923s, speedup 1.545x
10, opt runtime 29.576s, model runtime 62.561s, pg runtime 113.059s, speedup 1.807x
11, opt runtime 53.915s, model runtime 87.162s, pg runtime 80.711s, speedup 0.926x
12, opt runtime 53.203s, model runtime 88.372s, pg runtime 79.156s, speedup 0.896x
13, opt runtime 51.456s, model runtime 84.214s, pg runtime 93.781s, speedup 1.114x
14, opt runtime 54.696s, model runtime 91.625s, pg runtime 98.172s, speedup 1.071x
15, opt runtime 51.200s, model runtime 84.681s, pg runtime 77.674s, speedup 0.917x
16, opt runtime 47.844s, model runtime 86.036s, pg runtime 80.007s, speedup 0.930x
17, opt runtime 54.335s, model runtime 85.400s, pg runtime 95.799s, speedup 1.122x
18, opt runtime 48.088s, model runtime 83.930s, pg runtime 77.369s, speedup 0.922x
19, opt runtime 52.382s, model runtime 102.152s, pg runtime 82.710s, speedup 0.810x
20, opt runtime 52.135s, model runtime 91.553s, pg runtime 102.039s, speedup 1.115x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 23.924s, pg runtime 602.586s, speedup 25.187x
32, opt runtime 16.542s, model runtime 21.754s, pg runtime 461.957s, speedup 21.235x
33, opt runtime 16.136s, model runtime 21.514s, pg runtime 410.283s, speedup 19.070x
34, opt runtime 14.422s, model runtime 21.896s, pg runtime 497.542s, speedup 22.723x
35, opt runtime 15.980s, model runtime 21.470s, pg runtime 504.239s, speedup 23.486x
36, opt runtime 16.482s, model runtime 25.428s, pg runtime 622.915s, speedup 24.497x
37, opt runtime 16.301s, model runtime 22.800s, pg runtime 646.719s, speedup 28.365x
38, opt runtime 16.194s, model runtime 21.815s, pg runtime 439.255s, speedup 20.136x
39, opt runtime 16.149s, model runtime 21.405s, pg runtime 423.122s, speedup 19.768x
40, opt runtime 13.751s, model runtime 21.917s, pg runtime 434.625s, speedup 19.831x
====================
JOB best validation speedup epoch: 8, train speedup 1.796, test speedup 2.234, val speedup 1.492
TPCH best validation speedup epoch: 8, train speedup 1.796, test speedup 6.724, val speedup 1.492
TPCH Skew best validation speedup epoch: 8, train speedup 1.796, test speedup 6.537, val speedup 1.492
execution cost 0:14:49.290966
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.371742, and there are 26041 training samples
in channel 9
JOB test speedup 0.9008335553822562
TPCH test speedup 1.2305682646072817
TPCH skew test speedup 1.1100570801270278
Epoch 0/50 |loss: 0.375102| train set 1.511x speedup, test set 1.110x speedup, val set 1.492x speedup, step: 1, train time 17.78 s
JOB test speedup 1.076859266077974
TPCH test speedup 2.5528721387774587
TPCH skew test speedup 2.50020436181242
Epoch 1/50 |loss: 0.296411| train set 1.725x speedup, test set 2.500x speedup, val set 0.515x speedup, step: 2, train time 16.32 s
JOB test speedup 1.0868601523420842
TPCH test speedup 1.6343172153127723
TPCH skew test speedup 1.6048680481876645
Epoch 2/50 |loss: 0.266913| train set 1.739x speedup, test set 1.605x speedup, val set 0.515x speedup, step: 3, train time 16.50 s
JOB test speedup 1.1271334427927324
TPCH test speedup 2.544110105691499
TPCH skew test speedup 2.5030621095008483
Epoch 3/50 |loss: 0.250637| train set 1.789x speedup, test set 2.503x speedup, val set 0.515x speedup, step: 4, train time 16.30 s
JOB test speedup 2.1118673095629394
TPCH test speedup 2.0912632555800093
TPCH skew test speedup 2.0383732744050844
Epoch 4/50 |loss: 0.235906| train set 1.791x speedup, test set 2.038x speedup, val set 0.515x speedup, step: 5, train time 16.18 s
JOB test speedup 1.412781308120408
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 5/50 |loss: 0.226159| train set 1.754x speedup, test set 2.119x speedup, val set 1.492x speedup, step: 1, train time 16.28 s
JOB test speedup 0.8892847322223897
TPCH test speedup 1.4960042255270463
TPCH skew test speedup 1.4728903557041486
Epoch 6/50 |loss: 0.214351| train set 1.785x speedup, test set 1.473x speedup, val set 0.515x speedup, step: 2, train time 16.18 s
JOB test speedup 0.9171083365842274
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 7/50 |loss: 0.205910| train set 1.695x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 3, train time 16.31 s
JOB test speedup 2.7885881396747103
TPCH test speedup 2.2561953806552446
TPCH skew test speedup 2.2447040494741217
Epoch 8/50 |loss: 0.197870| train set 1.701x speedup, test set 2.245x speedup, val set 1.483x speedup, step: 4, train time 16.36 s
JOB test speedup 1.4737718032668508
TPCH test speedup 1.4746490108713428
TPCH skew test speedup 1.4413455488636018
Epoch 9/50 |loss: 0.192811| train set 1.790x speedup, test set 1.441x speedup, val set 0.515x speedup, step: 5, train time 16.28 s
JOB test speedup 2.086123621903294
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 10/50 |loss: 0.184279| train set 1.795x speedup, test set 2.119x speedup, val set 0.515x speedup, step: 6, train time 16.51 s
JOB test speedup 2.2404038269225475
TPCH test speedup 4.578340680415665
TPCH skew test speedup 4.500278089680026
Epoch 11/50 |loss: 0.184367| train set 1.775x speedup, test set 4.500x speedup, val set 0.515x speedup, step: 7, train time 16.40 s
JOB test speedup 2.1180054453419044
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 12/50 |loss: 0.179138| train set 1.778x speedup, test set 2.119x speedup, val set 0.515x speedup, step: 8, train time 16.70 s
JOB test speedup 1.999545192695165
TPCH test speedup 1.543401092117403
TPCH skew test speedup 1.5184817902795695
Epoch 13/50 |loss: 0.177378| train set 1.760x speedup, test set 1.518x speedup, val set 1.470x speedup, step: 9, train time 16.78 s
JOB test speedup 0.922800246930989
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 14/50 |loss: 0.173518| train set 1.796x speedup, test set 2.127x speedup, val set 0.515x speedup, step: 10, train time 16.76 s
JOB test speedup 1.5124274708440177
TPCH test speedup 5.340139000325813
TPCH skew test speedup 5.256993765935433
Epoch 15/50 |loss: 0.169046| train set 1.798x speedup, test set 5.257x speedup, val set 0.515x speedup, step: 11, train time 16.78 s
JOB test speedup 1.130950772654347
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 16/50 |loss: 0.169438| train set 1.765x speedup, test set 2.119x speedup, val set 0.515x speedup, step: 12, train time 16.80 s
JOB test speedup 2.116174189061249
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 17/50 |loss: 0.163075| train set 1.794x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 13, train time 16.79 s
JOB test speedup 1.5162932197832484
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 18/50 |loss: 0.162758| train set 1.797x speedup, test set 3.912x speedup, val set 1.470x speedup, step: 14, train time 16.81 s
JOB test speedup 2.0199019656065635
TPCH test speedup 4.578340680415665
TPCH skew test speedup 4.500278089680026
Epoch 19/50 |loss: 0.161921| train set 1.782x speedup, test set 4.500x speedup, val set 0.513x speedup, step: 15, train time 16.79 s
JOB test speedup 0.9531329810922602
TPCH test speedup 2.3036421835937837
TPCH skew test speedup 2.280165188094074
Epoch 20/50 |loss: 0.158191| train set 1.763x speedup, test set 2.280x speedup, val set 0.511x speedup, step: 16, train time 16.76 s
JOB test speedup 2.337919476497383
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 21/50 |loss: 0.157256| train set 1.801x speedup, test set 4.471x speedup, val set 0.512x speedup, step: 17, train time 16.71 s
JOB test speedup 1.5244403517339091
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 22/50 |loss: 0.155239| train set 1.781x speedup, test set 2.119x speedup, val set 1.470x speedup, step: 18, train time 16.88 s
JOB test speedup 1.1545647383174176
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 23/50 |loss: 0.152960| train set 1.799x speedup, test set 2.119x speedup, val set 1.483x speedup, step: 19, train time 16.58 s
JOB test speedup 2.0208513992628427
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 24/50 |loss: 0.150331| train set 1.773x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 20, train time 16.90 s
JOB test speedup 1.3105156914866425
TPCH test speedup 1.6058574940538417
TPCH skew test speedup 1.6040189442676764
Epoch 25/50 |loss: 0.150465| train set 1.797x speedup, test set 1.604x speedup, val set 0.515x speedup, step: 21, train time 16.72 s
JOB test speedup 1.4788793644562395
TPCH test speedup 4.243541263291758
TPCH skew test speedup 4.075014449221595
Epoch 26/50 |loss: 0.148944| train set 1.765x speedup, test set 4.075x speedup, val set 0.512x speedup, step: 22, train time 16.80 s
JOB test speedup 2.1045609627700146
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 27/50 |loss: 0.146579| train set 1.799x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 23, train time 16.80 s
JOB test speedup 1.0523707553692299
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 28/50 |loss: 0.144566| train set 1.780x speedup, test set 1.522x speedup, val set 0.512x speedup, step: 24, train time 16.70 s
JOB test speedup 1.1300604390063094
TPCH test speedup 4.578340680415665
TPCH skew test speedup 4.500278089680026
Epoch 29/50 |loss: 0.141895| train set 1.799x speedup, test set 4.500x speedup, val set 0.512x speedup, step: 25, train time 16.81 s
JOB test speedup 1.994833115748815
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 30/50 |loss: 0.141944| train set 1.798x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 26, train time 16.80 s
JOB test speedup 0.9139356501815331
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 31/50 |loss: 0.139661| train set 1.782x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 27, train time 16.87 s
JOB test speedup 2.101003688658705
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 32/50 |loss: 0.140632| train set 1.779x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 28, train time 16.79 s
JOB test speedup 2.13952894113717
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 33/50 |loss: 0.138921| train set 1.799x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 29, train time 16.98 s
JOB test speedup 1.1372447056871222
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 34/50 |loss: 0.138849| train set 1.799x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 30, train time 16.99 s
JOB test speedup 1.1068306172925855
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 35/50 |loss: 0.135515| train set 1.794x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 31, train time 16.60 s
JOB test speedup 1.4655441702706316
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 36/50 |loss: 0.132548| train set 1.777x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 32, train time 16.91 s
JOB test speedup 2.1253552057789857
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 37/50 |loss: 0.133633| train set 1.801x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 33, train time 16.80 s
JOB test speedup 1.4846398529177944
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 38/50 |loss: 0.132310| train set 1.799x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 34, train time 16.89 s
JOB test speedup 1.0996476250148062
TPCH test speedup 4.578340680415665
TPCH skew test speedup 4.500278089680026
Epoch 39/50 |loss: 0.132783| train set 1.780x speedup, test set 4.500x speedup, val set 0.512x speedup, step: 35, train time 16.69 s
JOB test speedup 0.9212781458862396
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 40/50 |loss: 0.133720| train set 1.800x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 36, train time 16.88 s
JOB test speedup 0.9192879315748612
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 41/50 |loss: 0.129253| train set 1.799x speedup, test set 1.522x speedup, val set 0.512x speedup, step: 37, train time 16.78 s
JOB test speedup 1.1063483904689924
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 42/50 |loss: 0.128575| train set 1.801x speedup, test set 1.522x speedup, val set 0.512x speedup, step: 38, train time 16.59 s
JOB test speedup 1.0889849117661932
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 43/50 |loss: 0.128056| train set 1.799x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 39, train time 16.82 s
JOB test speedup 1.0933738878532475
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 44/50 |loss: 0.129523| train set 1.801x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 40, train time 16.78 s
JOB test speedup 0.9075363461021427
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 45/50 |loss: 0.129545| train set 1.800x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 41, train time 16.68 s
JOB test speedup 1.1265757062135155
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 46/50 |loss: 0.124684| train set 1.767x speedup, test set 1.522x speedup, val set 0.512x speedup, step: 42, train time 16.72 s
JOB test speedup 1.1646236942301722
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 47/50 |loss: 0.127140| train set 1.801x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 43, train time 16.70 s
JOB test speedup 1.1203681921764987
TPCH test speedup 1.5374338463186696
TPCH skew test speedup 1.5223600960379198
Epoch 48/50 |loss: 0.123896| train set 1.801x speedup, test set 1.522x speedup, val set 0.515x speedup, step: 44, train time 16.79 s
JOB test speedup 1.1327885252144487
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 49/50 |loss: 0.125290| train set 1.800x speedup, test set 3.912x speedup, val set 0.515x speedup, step: 45, train time 16.71 s
Training per epoch cost 16.701 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.332s, pg runtime 2.352s, speedup 7.089x
12, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
13, opt runtime 5.179s, model runtime 11.487s, pg runtime 10.685s, speedup 0.930x
14, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.393s, speedup 2.504x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 2.971s, pg runtime 8.605s, speedup 2.897x
26, opt runtime 0.965s, model runtime 1.128s, pg runtime 0.965s, speedup 0.856x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
13, opt runtime 53.440s, model runtime 136.731s, pg runtime 140.742s, speedup 1.029x
14, opt runtime 47.812s, model runtime 139.115s, pg runtime 83.069s, speedup 0.597x
15, opt runtime 47.518s, model runtime 133.905s, pg runtime 75.736s, speedup 0.566x
16, opt runtime 48.067s, model runtime 135.202s, pg runtime 81.014s, speedup 0.599x
17, opt runtime 47.738s, model runtime 135.818s, pg runtime 76.021s, speedup 0.560x
18, opt runtime 47.804s, model runtime 136.805s, pg runtime 81.177s, speedup 0.593x
19, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
20, opt runtime 51.276s, model runtime 134.457s, pg runtime 79.222s, speedup 0.589x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 349.951s, pg runtime 432.766s, speedup 1.237x
32, opt runtime 15.120s, model runtime 350.307s, pg runtime 566.078s, speedup 1.616x
33, opt runtime 16.639s, model runtime 343.997s, pg runtime 462.544s, speedup 1.345x
34, opt runtime 16.280s, model runtime 379.482s, pg runtime 634.990s, speedup 1.673x
35, opt runtime 16.528s, model runtime 362.680s, pg runtime 620.762s, speedup 1.712x
36, opt runtime 18.690s, model runtime 356.056s, pg runtime 651.942s, speedup 1.831x
37, opt runtime 16.438s, model runtime 349.045s, pg runtime 546.887s, speedup 1.567x
38, opt runtime 16.138s, model runtime 349.458s, pg runtime 501.793s, speedup 1.436x
39, opt runtime 16.770s, model runtime 354.159s, pg runtime 594.754s, speedup 1.679x
40, opt runtime 16.305s, model runtime 348.685s, pg runtime 436.168s, speedup 1.251x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 140.245s, pg runtime 80.711s, speedup 0.575x
12, opt runtime 53.203s, model runtime 135.711s, pg runtime 79.156s, speedup 0.583x
13, opt runtime 51.456s, model runtime 132.632s, pg runtime 93.781s, speedup 0.707x
14, opt runtime 54.696s, model runtime 141.455s, pg runtime 98.172s, speedup 0.694x
15, opt runtime 51.200s, model runtime 137.865s, pg runtime 77.674s, speedup 0.563x
16, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
17, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
18, opt runtime 48.088s, model runtime 135.391s, pg runtime 77.369s, speedup 0.571x
19, opt runtime 52.382s, model runtime 146.665s, pg runtime 82.710s, speedup 0.564x
20, opt runtime 52.135s, model runtime 137.176s, pg runtime 102.039s, speedup 0.744x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 363.182s, pg runtime 602.586s, speedup 1.659x
32, opt runtime 16.542s, model runtime 343.670s, pg runtime 461.957s, speedup 1.344x
33, opt runtime 16.136s, model runtime 338.095s, pg runtime 410.283s, speedup 1.214x
34, opt runtime 14.422s, model runtime 349.086s, pg runtime 497.542s, speedup 1.425x
35, opt runtime 15.980s, model runtime 342.141s, pg runtime 504.239s, speedup 1.474x
36, opt runtime 16.482s, model runtime 349.021s, pg runtime 622.915s, speedup 1.785x
37, opt runtime 16.301s, model runtime 358.543s, pg runtime 646.719s, speedup 1.804x
38, opt runtime 16.194s, model runtime 351.176s, pg runtime 439.255s, speedup 1.251x
39, opt runtime 16.149s, model runtime 354.585s, pg runtime 423.122s, speedup 1.193x
40, opt runtime 13.751s, model runtime 340.982s, pg runtime 434.625s, speedup 1.275x
====================
JOB best validation speedup epoch: 5, train speedup 1.754, test speedup 1.413, val speedup 1.492
TPCH best validation speedup epoch: 5, train speedup 1.754, test speedup 2.165, val speedup 1.492
TPCH Skew best validation speedup epoch: 5, train speedup 1.754, test speedup 2.119, val speedup 1.492
execution cost 0:14:53.640865
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.311089, and there are 26041 training samples
in channel 9
JOB test speedup 0.9011538091927265
TPCH test speedup 1.6709827451190444
TPCH skew test speedup 1.6013751662652977
Epoch 0/50 |loss: 0.374213| train set 1.499x speedup, test set 1.601x speedup, val set 0.364x speedup, step: 1, train time 17.71 s
JOB test speedup 1.1344614388131304
TPCH test speedup 6.877918470949379
TPCH skew test speedup 6.57388244339047
Epoch 1/50 |loss: 0.297182| train set 1.726x speedup, test set 6.574x speedup, val set 0.515x speedup, step: 1, train time 17.18 s
JOB test speedup 1.0473190988167602
TPCH test speedup 1.6486939120767619
TPCH skew test speedup 1.4667207775023805
Epoch 2/50 |loss: 0.268260| train set 1.742x speedup, test set 1.467x speedup, val set 0.515x speedup, step: 1, train time 16.90 s
JOB test speedup 1.7735755812461684
TPCH test speedup 1.644645660162878
TPCH skew test speedup 1.6083428845289796
Epoch 3/50 |loss: 0.250312| train set 1.708x speedup, test set 1.608x speedup, val set 0.512x speedup, step: 2, train time 16.96 s
JOB test speedup 1.1260348214907228
TPCH test speedup 2.3841886907290926
TPCH skew test speedup 2.307294305493192
Epoch 4/50 |loss: 0.237505| train set 1.791x speedup, test set 2.307x speedup, val set 0.512x speedup, step: 3, train time 16.89 s
JOB test speedup 1.4958906517735042
TPCH test speedup 2.5280725300233615
TPCH skew test speedup 2.491817333804585
Epoch 5/50 |loss: 0.226579| train set 1.790x speedup, test set 2.492x speedup, val set 0.512x speedup, step: 4, train time 16.81 s
JOB test speedup 1.4173476110907384
TPCH test speedup 1.6420760728942347
TPCH skew test speedup 1.6083428845289796
Epoch 6/50 |loss: 0.213169| train set 1.792x speedup, test set 1.608x speedup, val set 0.512x speedup, step: 5, train time 16.82 s
JOB test speedup 0.9328499559097887
TPCH test speedup 1.637191480430006
TPCH skew test speedup 1.6130200353226802
Epoch 7/50 |loss: 0.205235| train set 1.793x speedup, test set 1.613x speedup, val set 0.512x speedup, step: 6, train time 16.90 s
JOB test speedup 2.0723230636940175
TPCH test speedup 2.4851711603556677
TPCH skew test speedup 2.50020436181242
Epoch 8/50 |loss: 0.198855| train set 1.776x speedup, test set 2.500x speedup, val set 1.470x speedup, step: 1, train time 16.77 s
JOB test speedup 0.9340404465326122
TPCH test speedup 2.3432573989616188
TPCH skew test speedup 2.293160123503267
Epoch 9/50 |loss: 0.194120| train set 1.791x speedup, test set 2.293x speedup, val set 0.512x speedup, step: 2, train time 16.88 s
JOB test speedup 2.1820439294966993
TPCH test speedup 2.3385933455155152
TPCH skew test speedup 2.316932135805185
Epoch 10/50 |loss: 0.185155| train set 1.796x speedup, test set 2.317x speedup, val set 0.512x speedup, step: 3, train time 16.90 s
JOB test speedup 2.1854488696742544
TPCH test speedup 2.5122705702115855
TPCH skew test speedup 2.4721640969058547
Epoch 11/50 |loss: 0.184072| train set 1.779x speedup, test set 2.472x speedup, val set 0.512x speedup, step: 4, train time 16.80 s
JOB test speedup 1.1605728969641596
TPCH test speedup 2.3841886907290926
TPCH skew test speedup 2.307294305493192
Epoch 12/50 |loss: 0.180498| train set 1.774x speedup, test set 2.307x speedup, val set 0.512x speedup, step: 5, train time 16.68 s
JOB test speedup 2.208806929525615
TPCH test speedup 2.2117568605944355
TPCH skew test speedup 2.1874825568489755
Epoch 13/50 |loss: 0.176986| train set 1.762x speedup, test set 2.187x speedup, val set 0.512x speedup, step: 6, train time 16.89 s
JOB test speedup 0.9226128730959108
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 14/50 |loss: 0.175185| train set 1.797x speedup, test set 2.300x speedup, val set 0.512x speedup, step: 7, train time 16.80 s
JOB test speedup 1.7404950166091995
TPCH test speedup 2.3841886907290926
TPCH skew test speedup 2.307294305493192
Epoch 15/50 |loss: 0.172155| train set 1.796x speedup, test set 2.307x speedup, val set 0.512x speedup, step: 8, train time 16.69 s
JOB test speedup 1.5104530144498325
TPCH test speedup 5.538694450057497
TPCH skew test speedup 5.350337171004237
Epoch 16/50 |loss: 0.170216| train set 1.761x speedup, test set 5.350x speedup, val set 0.512x speedup, step: 9, train time 16.97 s
JOB test speedup 2.2530384342188943
TPCH test speedup 2.357029439414343
TPCH skew test speedup 2.3026799917221195
Epoch 17/50 |loss: 0.163474| train set 1.799x speedup, test set 2.303x speedup, val set 0.512x speedup, step: 10, train time 16.78 s
JOB test speedup 1.8084530933351193
TPCH test speedup 2.3250352857610572
TPCH skew test speedup 2.307294305493192
Epoch 18/50 |loss: 0.162919| train set 1.797x speedup, test set 2.307x speedup, val set 0.512x speedup, step: 11, train time 16.78 s
JOB test speedup 2.1085736897800116
TPCH test speedup 5.6513247040356065
TPCH skew test speedup 5.318435488128447
Epoch 19/50 |loss: 0.161314| train set 1.781x speedup, test set 5.318x speedup, val set 0.512x speedup, step: 12, train time 16.88 s
JOB test speedup 0.9629407762500499
TPCH test speedup 2.08401284688638
TPCH skew test speedup 2.0383732744050844
Epoch 20/50 |loss: 0.158475| train set 1.746x speedup, test set 2.038x speedup, val set 0.512x speedup, step: 13, train time 16.97 s
JOB test speedup 2.203566951677468
TPCH test speedup 2.08401284688638
TPCH skew test speedup 2.0383732744050844
Epoch 21/50 |loss: 0.156429| train set 1.799x speedup, test set 2.038x speedup, val set 0.512x speedup, step: 14, train time 17.01 s
JOB test speedup 1.627045440550019
TPCH test speedup 2.3223464738692683
TPCH skew test speedup 2.271495902356518
Epoch 22/50 |loss: 0.156679| train set 1.781x speedup, test set 2.271x speedup, val set 1.470x speedup, step: 15, train time 17.03 s
JOB test speedup 1.12526630471108
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 23/50 |loss: 0.153139| train set 1.672x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 16, train time 16.79 s
JOB test speedup 1.4466698000352405
TPCH test speedup 4.344501297218488
TPCH skew test speedup 4.119683644423823
Epoch 24/50 |loss: 0.149693| train set 1.773x speedup, test set 4.120x speedup, val set 0.512x speedup, step: 17, train time 16.90 s
JOB test speedup 1.0164451410087878
TPCH test speedup 5.086521037253492
TPCH skew test speedup 4.960662673424111
Epoch 25/50 |loss: 0.151666| train set 1.799x speedup, test set 4.961x speedup, val set 0.512x speedup, step: 18, train time 16.99 s
JOB test speedup 1.4402985035455564
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 26/50 |loss: 0.149489| train set 1.793x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 19, train time 16.89 s
JOB test speedup 2.203566951677468
TPCH test speedup 2.3246509749153805
TPCH skew test speedup 2.280165188094074
Epoch 27/50 |loss: 0.149971| train set 1.781x speedup, test set 2.280x speedup, val set 0.512x speedup, step: 20, train time 17.03 s
JOB test speedup 1.1606384734822852
TPCH test speedup 3.785469257508429
TPCH skew test speedup 3.646560037733149
Epoch 28/50 |loss: 0.146507| train set 1.793x speedup, test set 3.647x speedup, val set 0.512x speedup, step: 21, train time 16.81 s
JOB test speedup 2.203566951677468
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 29/50 |loss: 0.143962| train set 1.800x speedup, test set 2.300x speedup, val set 0.512x speedup, step: 22, train time 16.88 s
JOB test speedup 1.4139044577871551
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 30/50 |loss: 0.144643| train set 1.765x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 23, train time 16.79 s
JOB test speedup 1.4465791634025746
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 31/50 |loss: 0.142652| train set 1.794x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 24, train time 16.72 s
JOB test speedup 2.1011914203833966
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 32/50 |loss: 0.141707| train set 1.780x speedup, test set 2.127x speedup, val set 1.470x speedup, step: 1, train time 16.90 s
JOB test speedup 1.4810236518726083
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 33/50 |loss: 0.139302| train set 1.781x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 2, train time 16.89 s
JOB test speedup 2.203566951677468
TPCH test speedup 4.344501297218488
TPCH skew test speedup 4.224160094823028
Epoch 34/50 |loss: 0.141129| train set 1.801x speedup, test set 4.224x speedup, val set 0.512x speedup, step: 3, train time 16.82 s
JOB test speedup 0.936112833580261
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 35/50 |loss: 0.138544| train set 1.798x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 4, train time 16.79 s
JOB test speedup 1.4801807195578065
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 36/50 |loss: 0.134430| train set 1.774x speedup, test set 2.119x speedup, val set 1.470x speedup, step: 1, train time 16.72 s
JOB test speedup 2.203566951677468
TPCH test speedup 5.151288508403619
TPCH skew test speedup 5.06516600126059
Epoch 37/50 |loss: 0.135047| train set 1.800x speedup, test set 5.065x speedup, val set 1.493x speedup, step: 1, train time 16.87 s
JOB test speedup 1.5286026732780653
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 38/50 |loss: 0.135353| train set 1.799x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 2, train time 16.79 s
JOB test speedup 1.4662857723699285
TPCH test speedup 4.128633662289353
TPCH skew test speedup 3.972400743608988
Epoch 39/50 |loss: 0.136670| train set 1.746x speedup, test set 3.972x speedup, val set 1.469x speedup, step: 3, train time 17.01 s
JOB test speedup 0.9259245417581903
TPCH test speedup 5.542207326815365
TPCH skew test speedup 5.389153826567194
Epoch 40/50 |loss: 0.134297| train set 1.801x speedup, test set 5.389x speedup, val set 1.470x speedup, step: 4, train time 17.09 s
JOB test speedup 1.4786271232502393
TPCH test speedup 2.3432573989616188
TPCH skew test speedup 2.2607893713583005
Epoch 41/50 |loss: 0.132577| train set 1.800x speedup, test set 2.261x speedup, val set 0.512x speedup, step: 5, train time 16.80 s
JOB test speedup 1.5922347089429205
TPCH test speedup 4.6528178833697735
TPCH skew test speedup 4.578794901182424
Epoch 42/50 |loss: 0.130952| train set 1.799x speedup, test set 4.579x speedup, val set 1.469x speedup, step: 6, train time 17.06 s
JOB test speedup 1.0159432504631452
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 43/50 |loss: 0.130017| train set 1.800x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 7, train time 17.19 s
JOB test speedup 1.394757787189663
TPCH test speedup 2.1771508497315955
TPCH skew test speedup 2.1267426758963386
Epoch 44/50 |loss: 0.131598| train set 1.802x speedup, test set 2.127x speedup, val set 0.512x speedup, step: 8, train time 17.02 s
JOB test speedup 0.905224359802456
TPCH test speedup 2.376544588042305
TPCH skew test speedup 2.3097278570640705
Epoch 45/50 |loss: 0.130581| train set 1.781x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 9, train time 16.79 s
JOB test speedup 1.4578171427853972
TPCH test speedup 2.3358731018105865
TPCH skew test speedup 2.3097278570640705
Epoch 46/50 |loss: 0.127221| train set 1.800x speedup, test set 2.310x speedup, val set 0.512x speedup, step: 10, train time 17.18 s
JOB test speedup 1.1610964980799816
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 47/50 |loss: 0.129992| train set 1.801x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 11, train time 17.20 s
JOB test speedup 1.5380855303817986
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 48/50 |loss: 0.127244| train set 1.801x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 12, train time 17.16 s
JOB test speedup 0.9596516931297678
TPCH test speedup 4.06282802839103
TPCH skew test speedup 3.911609093039202
Epoch 49/50 |loss: 0.127537| train set 1.799x speedup, test set 3.912x speedup, val set 0.512x speedup, step: 13, train time 16.99 s
Training per epoch cost 16.922 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 2.971s, pg runtime 8.605s, speedup 2.897x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 78.349s, pg runtime 78.349s, speedup 1.000x
13, opt runtime 53.440s, model runtime 136.731s, pg runtime 140.742s, speedup 1.029x
14, opt runtime 47.812s, model runtime 139.115s, pg runtime 83.069s, speedup 0.597x
15, opt runtime 47.518s, model runtime 133.905s, pg runtime 75.736s, speedup 0.566x
16, opt runtime 48.067s, model runtime 81.014s, pg runtime 81.014s, speedup 1.000x
17, opt runtime 47.738s, model runtime 76.021s, pg runtime 76.021s, speedup 1.000x
18, opt runtime 47.804s, model runtime 81.177s, pg runtime 81.177s, speedup 1.000x
19, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
20, opt runtime 51.276s, model runtime 79.222s, pg runtime 79.222s, speedup 1.000x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 23.436s, pg runtime 432.766s, speedup 18.466x
32, opt runtime 15.120s, model runtime 23.316s, pg runtime 566.078s, speedup 24.279x
33, opt runtime 16.639s, model runtime 23.017s, pg runtime 462.544s, speedup 20.095x
34, opt runtime 16.280s, model runtime 23.060s, pg runtime 634.990s, speedup 27.537x
35, opt runtime 16.528s, model runtime 23.747s, pg runtime 620.762s, speedup 26.141x
36, opt runtime 18.690s, model runtime 25.079s, pg runtime 651.942s, speedup 25.995x
37, opt runtime 16.438s, model runtime 23.248s, pg runtime 546.887s, speedup 23.524x
38, opt runtime 16.138s, model runtime 23.246s, pg runtime 501.793s, speedup 21.586x
39, opt runtime 16.770s, model runtime 23.336s, pg runtime 594.754s, speedup 25.486x
40, opt runtime 16.305s, model runtime 22.633s, pg runtime 436.168s, speedup 19.271x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 80.711s, pg runtime 80.711s, speedup 1.000x
12, opt runtime 53.203s, model runtime 79.156s, pg runtime 79.156s, speedup 1.000x
13, opt runtime 51.456s, model runtime 132.632s, pg runtime 93.781s, speedup 0.707x
14, opt runtime 54.696s, model runtime 141.455s, pg runtime 98.172s, speedup 0.694x
15, opt runtime 51.200s, model runtime 77.674s, pg runtime 77.674s, speedup 1.000x
16, opt runtime 47.844s, model runtime 80.007s, pg runtime 80.007s, speedup 1.000x
17, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
18, opt runtime 48.088s, model runtime 77.369s, pg runtime 77.369s, speedup 1.000x
19, opt runtime 52.382s, model runtime 82.710s, pg runtime 82.710s, speedup 1.000x
20, opt runtime 52.135s, model runtime 137.176s, pg runtime 102.039s, speedup 0.744x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 23.251s, pg runtime 602.586s, speedup 25.917x
32, opt runtime 16.542s, model runtime 23.084s, pg runtime 461.957s, speedup 20.012x
33, opt runtime 16.136s, model runtime 23.037s, pg runtime 410.283s, speedup 17.810x
34, opt runtime 14.422s, model runtime 23.164s, pg runtime 497.542s, speedup 21.479x
35, opt runtime 15.980s, model runtime 23.042s, pg runtime 504.239s, speedup 21.884x
36, opt runtime 16.482s, model runtime 22.575s, pg runtime 622.915s, speedup 27.593x
37, opt runtime 16.301s, model runtime 23.129s, pg runtime 646.719s, speedup 27.961x
38, opt runtime 16.194s, model runtime 22.825s, pg runtime 439.255s, speedup 19.245x
39, opt runtime 16.149s, model runtime 23.253s, pg runtime 423.122s, speedup 18.197x
40, opt runtime 13.751s, model runtime 23.032s, pg runtime 434.625s, speedup 18.870x
====================
JOB best validation speedup epoch: 37, train speedup 1.800, test speedup 2.204, val speedup 1.493
TPCH best validation speedup epoch: 37, train speedup 1.800, test speedup 5.151, val speedup 1.493
TPCH Skew best validation speedup epoch: 37, train speedup 1.800, test speedup 5.065, val speedup 1.493
execution cost 0:15:04.959124
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
(219, 49)
(219, 49)
construct training samples cost 0:00:01.315142, and there are 26041 training samples
in channel 9
JOB test speedup 0.9008335553822562
TPCH test speedup 1.700771407495005
TPCH skew test speedup 1.6281025552992214
Epoch 0/50 |loss: 0.374928| train set 1.637x speedup, test set 1.628x speedup, val set 0.515x speedup, step: 1, train time 18.01 s
JOB test speedup 2.017809877411227
TPCH test speedup 2.39270565945717
TPCH skew test speedup 2.0265759313691056
Epoch 1/50 |loss: 0.295810| train set 1.727x speedup, test set 2.027x speedup, val set 0.516x speedup, step: 1, train time 16.69 s
JOB test speedup 0.9098398302376095
TPCH test speedup 1.5791441449949424
TPCH skew test speedup 1.530465728374564
Epoch 2/50 |loss: 0.267537| train set 1.744x speedup, test set 1.530x speedup, val set 0.515x speedup, step: 2, train time 16.80 s
JOB test speedup 0.9058895882395676
TPCH test speedup 2.569226922814303
TPCH skew test speedup 2.5115251328054473
Epoch 3/50 |loss: 0.250867| train set 1.710x speedup, test set 2.512x speedup, val set 0.515x speedup, step: 3, train time 16.68 s
JOB test speedup 1.1698773713578587
TPCH test speedup 1.5729504459199322
TPCH skew test speedup 1.5262544541570422
Epoch 4/50 |loss: 0.235195| train set 1.787x speedup, test set 1.526x speedup, val set 1.478x speedup, step: 1, train time 16.77 s
JOB test speedup 1.4388376229432465
TPCH test speedup 2.3625442281401887
TPCH skew test speedup 2.300149745505483
Epoch 5/50 |loss: 0.226860| train set 1.758x speedup, test set 2.300x speedup, val set 1.492x speedup, step: 1, train time 16.76 s
JOB test speedup 1.467605701774334
TPCH test speedup 1.4497784580915067
TPCH skew test speedup 1.403749249952807
Epoch 6/50 |loss: 0.214170| train set 1.791x speedup, test set 1.404x speedup, val set 0.516x speedup, step: 2, train time 16.67 s
JOB test speedup 1.1744178664877667
TPCH test speedup 5.441342892447481
TPCH skew test speedup 5.389153826567194
Epoch 7/50 |loss: 0.206289| train set 1.699x speedup, test set 5.389x speedup, val set 1.501x speedup, step: 1, train time 16.68 s
JOB test speedup 2.288372695586452
TPCH test speedup 7.128986753154718
TPCH skew test speedup 6.850463166607931
Epoch 8/50 |loss: 0.198458| train set 1.685x speedup, test set 6.850x speedup, val set 1.456x speedup, step: 2, train time 16.70 s
JOB test speedup 1.4706383458868706
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 9/50 |loss: 0.193100| train set 1.791x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 3, train time 16.70 s
JOB test speedup 2.2209551782818386
TPCH test speedup 4.6528178833697735
TPCH skew test speedup 4.578794901182424
Epoch 10/50 |loss: 0.184229| train set 1.795x speedup, test set 4.579x speedup, val set 0.515x speedup, step: 4, train time 16.58 s
JOB test speedup 2.2364510836403877
TPCH test speedup 5.6513247040356065
TPCH skew test speedup 5.350337171004237
Epoch 11/50 |loss: 0.184548| train set 1.797x speedup, test set 5.350x speedup, val set 0.440x speedup, step: 5, train time 16.79 s
JOB test speedup 2.1013167934209434
TPCH test speedup 4.2822764517324226
TPCH skew test speedup 4.119683644423823
Epoch 12/50 |loss: 0.179190| train set 1.794x speedup, test set 4.120x speedup, val set 0.438x speedup, step: 6, train time 16.70 s
JOB test speedup 1.4941670514240855
TPCH test speedup 1.4960042255270463
TPCH skew test speedup 1.4728903557041486
Epoch 13/50 |loss: 0.176907| train set 1.797x speedup, test set 1.473x speedup, val set 0.512x speedup, step: 7, train time 16.62 s
JOB test speedup 0.9132643948229768
TPCH test speedup 2.3841886907290926
TPCH skew test speedup 2.307294305493192
Epoch 14/50 |loss: 0.172960| train set 1.799x speedup, test set 2.307x speedup, val set 0.512x speedup, step: 8, train time 16.60 s
JOB test speedup 1.6534786978635785
TPCH test speedup 5.6513247040356065
TPCH skew test speedup 5.350337171004237
Epoch 15/50 |loss: 0.170834| train set 1.796x speedup, test set 5.350x speedup, val set 0.512x speedup, step: 9, train time 16.87 s
JOB test speedup 0.915890809505659
TPCH test speedup 4.344501297218488
TPCH skew test speedup 4.257807398637919
Epoch 16/50 |loss: 0.169969| train set 1.794x speedup, test set 4.258x speedup, val set 0.512x speedup, step: 10, train time 16.78 s
JOB test speedup 0.9525557098763556
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 17/50 |loss: 0.162494| train set 1.762x speedup, test set 2.119x speedup, val set 0.515x speedup, step: 11, train time 16.88 s
JOB test speedup 1.4516319903910704
TPCH test speedup 4.2822764517324226
TPCH skew test speedup 4.119683644423823
Epoch 18/50 |loss: 0.161651| train set 1.797x speedup, test set 4.120x speedup, val set 0.512x speedup, step: 12, train time 16.90 s
JOB test speedup 0.9026620810966787
TPCH test speedup 5.6513247040356065
TPCH skew test speedup 5.350337171004237
Epoch 19/50 |loss: 0.160806| train set 1.781x speedup, test set 5.350x speedup, val set 0.512x speedup, step: 13, train time 16.89 s
JOB test speedup 0.9853203691212841
TPCH test speedup 4.344501297218488
TPCH skew test speedup 4.156559093951853
Epoch 20/50 |loss: 0.158112| train set 1.761x speedup, test set 4.157x speedup, val set 0.512x speedup, step: 14, train time 17.00 s
JOB test speedup 1.5228444353073916
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 21/50 |loss: 0.156354| train set 1.798x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 15, train time 16.78 s
JOB test speedup 1.6649582854818978
TPCH test speedup 2.342629201340014
TPCH skew test speedup 2.300149745505483
Epoch 22/50 |loss: 0.155610| train set 1.779x speedup, test set 2.300x speedup, val set 0.512x speedup, step: 16, train time 16.88 s
JOB test speedup 1.2185113092731248
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 23/50 |loss: 0.151430| train set 1.800x speedup, test set 4.461x speedup, val set 0.515x speedup, step: 17, train time 16.99 s
JOB test speedup 0.895491773618603
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 24/50 |loss: 0.148577| train set 1.773x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 18, train time 16.97 s
JOB test speedup 0.9848501498750605
TPCH test speedup 4.443881237447556
TPCH skew test speedup 4.257807398637919
Epoch 25/50 |loss: 0.151108| train set 1.779x speedup, test set 4.258x speedup, val set 0.515x speedup, step: 19, train time 16.79 s
JOB test speedup 1.484491538643824
TPCH test speedup 5.426638710717213
TPCH skew test speedup 4.960662673424111
Epoch 26/50 |loss: 0.148238| train set 1.796x speedup, test set 4.961x speedup, val set 0.512x speedup, step: 20, train time 16.90 s
JOB test speedup 1.4501207869896395
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 27/50 |loss: 0.147459| train set 1.800x speedup, test set 4.471x speedup, val set 0.512x speedup, step: 21, train time 17.10 s
JOB test speedup 0.933585583235317
TPCH test speedup 5.44173798946637
TPCH skew test speedup 5.364450798040867
Epoch 28/50 |loss: 0.145521| train set 1.780x speedup, test set 5.364x speedup, val set 0.512x speedup, step: 22, train time 16.99 s
JOB test speedup 1.510618538611114
TPCH test speedup 5.426638710717213
TPCH skew test speedup 5.350337171004237
Epoch 29/50 |loss: 0.140277| train set 1.676x speedup, test set 5.350x speedup, val set 0.512x speedup, step: 23, train time 17.10 s
JOB test speedup 1.4683777062555532
TPCH test speedup 2.1653954062388254
TPCH skew test speedup 2.1186194064273023
Epoch 30/50 |loss: 0.141633| train set 1.691x speedup, test set 2.119x speedup, val set 0.512x speedup, step: 24, train time 17.12 s
JOB test speedup 1.4654364660318213
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 31/50 |loss: 0.140052| train set 1.792x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 25, train time 17.31 s
JOB test speedup 1.4654938074422337
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 32/50 |loss: 0.139115| train set 1.780x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 26, train time 17.09 s
JOB test speedup 0.9340800694698485
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 33/50 |loss: 0.136095| train set 1.798x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 27, train time 17.29 s
JOB test speedup 0.9349765920393286
TPCH test speedup 4.5990304860862965
TPCH skew test speedup 4.42120622395679
Epoch 34/50 |loss: 0.139828| train set 1.802x speedup, test set 4.421x speedup, val set 0.512x speedup, step: 28, train time 17.09 s
JOB test speedup 0.899766356885209
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 35/50 |loss: 0.135321| train set 1.798x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 29, train time 17.20 s
JOB test speedup 1.5251756795832463
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 36/50 |loss: 0.132876| train set 1.782x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 30, train time 17.32 s
JOB test speedup 0.9340800694698485
TPCH test speedup 5.44173798946637
TPCH skew test speedup 4.97279299448149
Epoch 37/50 |loss: 0.133283| train set 1.800x speedup, test set 4.973x speedup, val set 0.515x speedup, step: 31, train time 16.97 s
JOB test speedup 0.9198132439881983
TPCH test speedup 4.52814743948193
TPCH skew test speedup 4.356578938338346
Epoch 38/50 |loss: 0.132078| train set 1.795x speedup, test set 4.357x speedup, val set 0.512x speedup, step: 32, train time 17.19 s
JOB test speedup 0.9133195724870443
TPCH test speedup 2.2280142553370843
TPCH skew test speedup 2.104959789266773
Epoch 39/50 |loss: 0.134549| train set 1.748x speedup, test set 2.105x speedup, val set 0.512x speedup, step: 33, train time 17.08 s
JOB test speedup 0.9196118335392732
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 40/50 |loss: 0.131979| train set 1.801x speedup, test set 4.461x speedup, val set 0.515x speedup, step: 34, train time 16.98 s
JOB test speedup 0.9197666322705832
TPCH test speedup 4.7635836703108225
TPCH skew test speedup 4.576544742055192
Epoch 41/50 |loss: 0.129384| train set 1.799x speedup, test set 4.577x speedup, val set 0.515x speedup, step: 35, train time 17.10 s
JOB test speedup 0.8959318946788839
TPCH test speedup 1.5467631351397115
TPCH skew test speedup 1.5223600960379198
Epoch 42/50 |loss: 0.129753| train set 1.801x speedup, test set 1.522x speedup, val set 0.515x speedup, step: 36, train time 16.98 s
JOB test speedup 0.9340320006278833
TPCH test speedup 4.454001702965219
TPCH skew test speedup 4.33306665284289
Epoch 43/50 |loss: 0.127945| train set 1.798x speedup, test set 4.333x speedup, val set 0.512x speedup, step: 37, train time 17.00 s
JOB test speedup 0.8984407059670582
TPCH test speedup 4.651697822282881
TPCH skew test speedup 4.471000930458193
Epoch 44/50 |loss: 0.129106| train set 1.802x speedup, test set 4.471x speedup, val set 0.512x speedup, step: 38, train time 17.21 s
JOB test speedup 0.9162488780720526
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 45/50 |loss: 0.128714| train set 1.780x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 39, train time 17.08 s
JOB test speedup 0.9117285031819325
TPCH test speedup 4.269979946722055
TPCH skew test speedup 3.9482339698215134
Epoch 46/50 |loss: 0.125955| train set 1.801x speedup, test set 3.948x speedup, val set 0.512x speedup, step: 40, train time 17.08 s
JOB test speedup 0.8902303852172043
TPCH test speedup 4.640660113712757
TPCH skew test speedup 4.461192760837642
Epoch 47/50 |loss: 0.126360| train set 1.801x speedup, test set 4.461x speedup, val set 0.512x speedup, step: 41, train time 16.89 s
JOB test speedup 0.9307297139904126
TPCH test speedup 4.6868634538816965
TPCH skew test speedup 4.586867270887041
Epoch 48/50 |loss: 0.123727| train set 1.706x speedup, test set 4.587x speedup, val set 0.515x speedup, step: 42, train time 17.09 s
JOB test speedup 0.9152555249603015
TPCH test speedup 4.775214598067158
TPCH skew test speedup 4.586867270887041
Epoch 49/50 |loss: 0.123964| train set 1.800x speedup, test set 4.587x speedup, val set 0.512x speedup, step: 43, train time 16.89 s
Training per epoch cost 16.951 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.614s, pg runtime 18.741s, speedup 1.007x
03, opt runtime 1.763s, model runtime 1.798s, pg runtime 1.763s, speedup 0.980x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.393s, speedup 2.504x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 2.971s, pg runtime 8.605s, speedup 2.897x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 162.273s, pg runtime 148.707s, speedup 0.916x
12, opt runtime 48.784s, model runtime 78.349s, pg runtime 78.349s, speedup 1.000x
13, opt runtime 53.440s, model runtime 159.318s, pg runtime 140.742s, speedup 0.883x
14, opt runtime 47.812s, model runtime 83.069s, pg runtime 83.069s, speedup 1.000x
15, opt runtime 47.518s, model runtime 75.736s, pg runtime 75.736s, speedup 1.000x
16, opt runtime 48.067s, model runtime 81.014s, pg runtime 81.014s, speedup 1.000x
17, opt runtime 47.738s, model runtime 76.021s, pg runtime 76.021s, speedup 1.000x
18, opt runtime 47.804s, model runtime 81.177s, pg runtime 81.177s, speedup 1.000x
19, opt runtime 49.511s, model runtime 87.329s, pg runtime 87.329s, speedup 1.000x
20, opt runtime 51.276s, model runtime 79.222s, pg runtime 79.222s, speedup 1.000x
21, opt runtime 24.391s, model runtime 31.563s, pg runtime 601.866s, speedup 19.069x
22, opt runtime 24.079s, model runtime 32.527s, pg runtime 608.707s, speedup 18.714x
23, opt runtime 24.662s, model runtime 31.674s, pg runtime 613.999s, speedup 19.385x
24, opt runtime 24.459s, model runtime 30.923s, pg runtime 608.717s, speedup 19.685x
25, opt runtime 25.236s, model runtime 32.391s, pg runtime 601.756s, speedup 18.578x
26, opt runtime 25.363s, model runtime 33.350s, pg runtime 611.327s, speedup 18.331x
27, opt runtime 24.706s, model runtime 31.441s, pg runtime 610.808s, speedup 19.427x
28, opt runtime 25.075s, model runtime 33.122s, pg runtime 612.430s, speedup 18.490x
29, opt runtime 24.840s, model runtime 33.037s, pg runtime 626.529s, speedup 18.965x
30, opt runtime 24.920s, model runtime 32.417s, pg runtime 610.993s, speedup 18.848x
31, opt runtime 16.268s, model runtime 23.436s, pg runtime 432.766s, speedup 18.466x
32, opt runtime 15.120s, model runtime 23.316s, pg runtime 566.078s, speedup 24.279x
33, opt runtime 16.639s, model runtime 23.017s, pg runtime 462.544s, speedup 20.095x
34, opt runtime 16.280s, model runtime 23.060s, pg runtime 634.990s, speedup 27.537x
35, opt runtime 16.528s, model runtime 23.747s, pg runtime 620.762s, speedup 26.141x
36, opt runtime 18.690s, model runtime 25.079s, pg runtime 651.942s, speedup 25.995x
37, opt runtime 16.438s, model runtime 23.248s, pg runtime 546.887s, speedup 23.524x
38, opt runtime 16.138s, model runtime 23.246s, pg runtime 501.793s, speedup 21.586x
39, opt runtime 16.770s, model runtime 23.336s, pg runtime 594.754s, speedup 25.486x
40, opt runtime 16.305s, model runtime 22.633s, pg runtime 436.168s, speedup 19.271x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 80.711s, pg runtime 80.711s, speedup 1.000x
12, opt runtime 53.203s, model runtime 79.156s, pg runtime 79.156s, speedup 1.000x
13, opt runtime 51.456s, model runtime 93.781s, pg runtime 93.781s, speedup 1.000x
14, opt runtime 54.696s, model runtime 98.172s, pg runtime 98.172s, speedup 1.000x
15, opt runtime 51.200s, model runtime 77.674s, pg runtime 77.674s, speedup 1.000x
16, opt runtime 47.844s, model runtime 80.007s, pg runtime 80.007s, speedup 1.000x
17, opt runtime 54.335s, model runtime 95.799s, pg runtime 95.799s, speedup 1.000x
18, opt runtime 48.088s, model runtime 77.369s, pg runtime 77.369s, speedup 1.000x
19, opt runtime 52.382s, model runtime 82.710s, pg runtime 82.710s, speedup 1.000x
20, opt runtime 52.135s, model runtime 102.039s, pg runtime 102.039s, speedup 1.000x
21, opt runtime 24.737s, model runtime 32.293s, pg runtime 616.762s, speedup 19.099x
22, opt runtime 25.478s, model runtime 32.776s, pg runtime 642.079s, speedup 19.590x
23, opt runtime 24.016s, model runtime 31.708s, pg runtime 601.228s, speedup 18.962x
24, opt runtime 24.103s, model runtime 31.223s, pg runtime 616.889s, speedup 19.757x
25, opt runtime 24.136s, model runtime 31.060s, pg runtime 609.432s, speedup 19.621x
26, opt runtime 25.431s, model runtime 31.840s, pg runtime 625.988s, speedup 19.660x
27, opt runtime 24.451s, model runtime 34.520s, pg runtime 628.615s, speedup 18.210x
28, opt runtime 24.465s, model runtime 32.728s, pg runtime 644.779s, speedup 19.701x
29, opt runtime 25.152s, model runtime 31.111s, pg runtime 613.332s, speedup 19.714x
30, opt runtime 24.505s, model runtime 31.528s, pg runtime 621.574s, speedup 19.715x
31, opt runtime 16.756s, model runtime 23.251s, pg runtime 602.586s, speedup 25.917x
32, opt runtime 16.542s, model runtime 23.084s, pg runtime 461.957s, speedup 20.012x
33, opt runtime 16.136s, model runtime 23.037s, pg runtime 410.283s, speedup 17.810x
34, opt runtime 14.422s, model runtime 23.164s, pg runtime 497.542s, speedup 21.479x
35, opt runtime 15.980s, model runtime 23.042s, pg runtime 504.239s, speedup 21.884x
36, opt runtime 16.482s, model runtime 22.575s, pg runtime 622.915s, speedup 27.593x
37, opt runtime 16.301s, model runtime 23.129s, pg runtime 646.719s, speedup 27.961x
38, opt runtime 16.194s, model runtime 22.825s, pg runtime 439.255s, speedup 19.245x
39, opt runtime 16.149s, model runtime 23.253s, pg runtime 423.122s, speedup 18.197x
40, opt runtime 13.751s, model runtime 23.032s, pg runtime 434.625s, speedup 18.870x
====================
JOB best validation speedup epoch: 7, train speedup 1.699, test speedup 1.174, val speedup 1.501
TPCH best validation speedup epoch: 7, train speedup 1.699, test speedup 5.441, val speedup 1.501
TPCH Skew best validation speedup epoch: 7, train speedup 1.699, test speedup 5.389, val speedup 1.501
execution cost 0:15:05.906830
==================================================
