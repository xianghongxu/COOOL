all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.693581, and there are 32798 training samples
in channel 9
JOB test speedup 0.3612902255335474
TPCH test speedup 0.5759319944173384
TPCH skew test speedup 0.5614805733174089
Epoch 0/50 |loss: 0.394264| train set 0.476x speedup, test set 0.561x speedup, val set 0.506x speedup, step: 1, train time 22.08 s
JOB test speedup 0.33745457383804306
TPCH test speedup 0.5676585976493461
TPCH skew test speedup 0.5475962771555271
Epoch 1/50 |loss: 0.285496| train set 0.463x speedup, test set 0.548x speedup, val set 0.491x speedup, step: 2, train time 20.79 s
JOB test speedup 0.3608510229647636
TPCH test speedup 0.5493112958635847
TPCH skew test speedup 0.5327714496085552
Epoch 2/50 |loss: 0.247433| train set 0.459x speedup, test set 0.533x speedup, val set 0.487x speedup, step: 3, train time 20.56 s
JOB test speedup 0.284905928970755
TPCH test speedup 0.5564774047158194
TPCH skew test speedup 0.5391551615921989
Epoch 3/50 |loss: 0.226139| train set 0.453x speedup, test set 0.539x speedup, val set 0.479x speedup, step: 4, train time 20.56 s
JOB test speedup 0.2819420035287823
TPCH test speedup 0.5554824128586564
TPCH skew test speedup 0.5413613663357746
Epoch 4/50 |loss: 0.208061| train set 0.448x speedup, test set 0.541x speedup, val set 0.478x speedup, step: 5, train time 20.96 s
JOB test speedup 0.2944745475080344
TPCH test speedup 0.5382451050251911
TPCH skew test speedup 0.5336010006542554
Epoch 5/50 |loss: 0.194125| train set 0.445x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 6, train time 21.11 s
JOB test speedup 0.28914616758792666
TPCH test speedup 0.5480477020284136
TPCH skew test speedup 0.5385645886823
Epoch 6/50 |loss: 0.183037| train set 0.449x speedup, test set 0.539x speedup, val set 0.472x speedup, step: 7, train time 21.16 s
JOB test speedup 0.2964623112060603
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 7/50 |loss: 0.175458| train set 0.444x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 8, train time 21.18 s
JOB test speedup 0.2861818744974168
TPCH test speedup 0.5407028528536114
TPCH skew test speedup 0.5339655727825499
Epoch 8/50 |loss: 0.165039| train set 0.443x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 9, train time 21.07 s
JOB test speedup 0.2998743254499961
TPCH test speedup 0.5448222720772588
TPCH skew test speedup 0.5341766590976645
Epoch 9/50 |loss: 0.157934| train set 0.447x speedup, test set 0.534x speedup, val set 0.470x speedup, step: 10, train time 21.11 s
JOB test speedup 0.2984882155193133
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 10/50 |loss: 0.154353| train set 0.443x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 11, train time 21.36 s
JOB test speedup 0.30626346909986435
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 11/50 |loss: 0.148909| train set 0.444x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 12, train time 21.42 s
JOB test speedup 0.30012458975431183
TPCH test speedup 0.5555282746515641
TPCH skew test speedup 0.5414053009920894
Epoch 12/50 |loss: 0.140448| train set 0.451x speedup, test set 0.541x speedup, val set 0.482x speedup, step: 13, train time 21.30 s
JOB test speedup 0.3125190257968763
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 13/50 |loss: 0.140974| train set 0.446x speedup, test set 0.531x speedup, val set 0.472x speedup, step: 14, train time 21.45 s
JOB test speedup 0.2942978114282623
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 14/50 |loss: 0.138428| train set 0.445x speedup, test set 0.538x speedup, val set 0.472x speedup, step: 15, train time 21.47 s
JOB test speedup 0.29958945526554764
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 15/50 |loss: 0.129674| train set 0.444x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 16, train time 21.20 s
JOB test speedup 0.28699151166030246
TPCH test speedup 0.5385430467522617
TPCH skew test speedup 0.5296565719886462
Epoch 16/50 |loss: 0.127140| train set 0.443x speedup, test set 0.530x speedup, val set 0.469x speedup, step: 17, train time 21.36 s
JOB test speedup 0.3049126591508011
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 17/50 |loss: 0.129556| train set 0.446x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 18, train time 21.39 s
JOB test speedup 0.28897442857534583
TPCH test speedup 0.5299268692872077
TPCH skew test speedup 0.529472668765604
Epoch 18/50 |loss: 0.122607| train set 0.444x speedup, test set 0.529x speedup, val set 0.467x speedup, step: 19, train time 21.33 s
JOB test speedup 0.30474984361232227
TPCH test speedup 0.5515014923753417
TPCH skew test speedup 0.5324619148557869
Epoch 19/50 |loss: 0.120589| train set 0.447x speedup, test set 0.532x speedup, val set 0.479x speedup, step: 20, train time 21.18 s
JOB test speedup 0.29278396145398705
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 20/50 |loss: 0.120573| train set 0.444x speedup, test set 0.535x speedup, val set 0.469x speedup, step: 21, train time 21.42 s
JOB test speedup 0.28750778760832274
TPCH test speedup 0.5419323772472743
TPCH skew test speedup 0.5316743305935534
Epoch 21/50 |loss: 0.117771| train set 0.442x speedup, test set 0.532x speedup, val set 0.471x speedup, step: 22, train time 21.61 s
JOB test speedup 0.2915367793334548
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 22/50 |loss: 0.114824| train set 0.444x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 23, train time 21.24 s
JOB test speedup 0.2972831168114933
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 23/50 |loss: 0.113219| train set 0.445x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 24, train time 21.35 s
JOB test speedup 0.2910896355969725
TPCH test speedup 0.5339789394517845
TPCH skew test speedup 0.5343437142625925
Epoch 24/50 |loss: 0.110754| train set 0.445x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 25, train time 21.30 s
JOB test speedup 0.2863136371764222
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 25/50 |loss: 0.109007| train set 0.379x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 26, train time 21.37 s
JOB test speedup 0.281604292862636
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 26/50 |loss: 0.109610| train set 0.443x speedup, test set 0.535x speedup, val set 0.469x speedup, step: 27, train time 21.31 s
JOB test speedup 0.2957014036994401
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 27/50 |loss: 0.107159| train set 0.445x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 28, train time 21.39 s
JOB test speedup 0.2892921600124366
TPCH test speedup 0.538586153986052
TPCH skew test speedup 0.5296986272835744
Epoch 28/50 |loss: 0.104338| train set 0.443x speedup, test set 0.530x speedup, val set 0.471x speedup, step: 29, train time 21.37 s
JOB test speedup 0.2838960688145979
TPCH test speedup 0.5482913547438737
TPCH skew test speedup 0.5362290704676196
Epoch 29/50 |loss: 0.103300| train set 0.443x speedup, test set 0.536x speedup, val set 0.471x speedup, step: 30, train time 21.40 s
JOB test speedup 0.2874001003770956
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 30/50 |loss: 0.102290| train set 0.379x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 31, train time 21.27 s
JOB test speedup 0.2900162552773678
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 31/50 |loss: 0.102264| train set 0.379x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 32, train time 21.44 s
JOB test speedup 0.29542498040769305
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 32/50 |loss: 0.101417| train set 0.443x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 33, train time 21.39 s
JOB test speedup 0.32159009327513793
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.5352501924149806
Epoch 33/50 |loss: 0.101953| train set 0.442x speedup, test set 0.535x speedup, val set 0.471x speedup, step: 34, train time 21.47 s
JOB test speedup 0.3006368146235148
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 34/50 |loss: 0.100097| train set 0.443x speedup, test set 0.529x speedup, val set 0.471x speedup, step: 35, train time 21.41 s
JOB test speedup 0.2871394001013424
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 35/50 |loss: 0.098233| train set 0.442x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 36, train time 21.30 s
JOB test speedup 0.30973509841525465
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 36/50 |loss: 0.095770| train set 0.382x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 37, train time 21.28 s
JOB test speedup 0.3104976451076373
TPCH test speedup 0.5515014923753417
TPCH skew test speedup 0.5324619148557869
Epoch 37/50 |loss: 0.095285| train set 0.447x speedup, test set 0.532x speedup, val set 0.480x speedup, step: 38, train time 21.21 s
JOB test speedup 0.2900061468928453
TPCH test speedup 0.5558915849639101
TPCH skew test speedup 0.5373883724539341
Epoch 38/50 |loss: 0.096117| train set 0.444x speedup, test set 0.537x speedup, val set 0.472x speedup, step: 39, train time 21.25 s
JOB test speedup 0.27516109518456966
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 39/50 |loss: 0.093500| train set 0.441x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 40, train time 21.30 s
JOB test speedup 0.28529592473777143
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 40/50 |loss: 0.095797| train set 0.381x speedup, test set 0.530x speedup, val set 0.470x speedup, step: 41, train time 21.59 s
JOB test speedup 0.30592073559718025
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 41/50 |loss: 0.093847| train set 0.445x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 42, train time 21.32 s
JOB test speedup 0.3129900284500789
TPCH test speedup 0.5282739056171344
TPCH skew test speedup 0.5259733341163345
Epoch 42/50 |loss: 0.092751| train set 0.442x speedup, test set 0.526x speedup, val set 0.470x speedup, step: 43, train time 21.27 s
JOB test speedup 0.31155025961555627
TPCH test speedup 0.5482913547438737
TPCH skew test speedup 0.5362290704676196
Epoch 43/50 |loss: 0.091328| train set 0.445x speedup, test set 0.536x speedup, val set 0.474x speedup, step: 44, train time 21.22 s
JOB test speedup 0.278186754671525
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 44/50 |loss: 0.090248| train set 0.441x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 45, train time 21.49 s
JOB test speedup 0.3124156927015034
TPCH test speedup 0.5453777367019575
TPCH skew test speedup 0.532856181391151
Epoch 45/50 |loss: 0.092853| train set 0.445x speedup, test set 0.533x speedup, val set 0.472x speedup, step: 46, train time 21.38 s
JOB test speedup 0.2812143495880106
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 46/50 |loss: 0.089978| train set 0.443x speedup, test set 0.535x speedup, val set 0.472x speedup, step: 47, train time 21.28 s
JOB test speedup 0.27730272727555744
TPCH test speedup 0.5482913547438737
TPCH skew test speedup 0.5362290704676196
Epoch 47/50 |loss: 0.089926| train set 0.443x speedup, test set 0.536x speedup, val set 0.476x speedup, step: 48, train time 21.46 s
JOB test speedup 0.31354673264709265
TPCH test speedup 0.548701693369425
TPCH skew test speedup 0.5369548219805568
Epoch 48/50 |loss: 0.090198| train set 0.444x speedup, test set 0.537x speedup, val set 0.478x speedup, step: 49, train time 21.46 s
JOB test speedup 0.2786941608390253
TPCH test speedup 0.548701693369425
TPCH skew test speedup 0.5369548219805568
Epoch 49/50 |loss: 0.087856| train set 0.380x speedup, test set 0.537x speedup, val set 0.474x speedup, step: 50, train time 21.27 s
Training per epoch cost 21.297 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 3.696s, pg runtime 0.081s, speedup 0.022x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.207s, model runtime 2.474s, pg runtime 0.207s, speedup 0.084x
04, opt runtime 0.920s, model runtime 7.166s, pg runtime 1.680s, speedup 0.234x
05, opt runtime 2.262s, model runtime 4.922s, pg runtime 3.549s, speedup 0.721x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 4.223s, model runtime 20.836s, pg runtime 18.741s, speedup 0.899x
09, opt runtime 2.324s, model runtime 19.354s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.846s, model runtime 28.458s, pg runtime 3.507s, speedup 0.123x
11, opt runtime 4.443s, model runtime 35.398s, pg runtime 13.945s, speedup 0.394x
12, opt runtime 0.517s, model runtime 13.147s, pg runtime 0.738s, speedup 0.056x
13, opt runtime 2.413s, model runtime 7.391s, pg runtime 57.198s, speedup 7.739x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 2.238s, model runtime 6.891s, pg runtime 2.718s, speedup 0.394x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.962s, model runtime 10.410s, pg runtime 6.876s, speedup 0.661x
19, opt runtime 1.923s, model runtime 7.809s, pg runtime 3.540s, speedup 0.453x
20, opt runtime 0.064s, model runtime 8.246s, pg runtime 0.089s, speedup 0.011x
21, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
22, opt runtime 0.093s, model runtime 19.608s, pg runtime 2.389s, speedup 0.122x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
25, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
26, opt runtime 0.161s, model runtime 5.658s, pg runtime 0.161s, speedup 0.028x
27, opt runtime 0.068s, model runtime 2.148s, pg runtime 0.239s, speedup 0.111x
28, opt runtime 0.157s, model runtime 9.917s, pg runtime 0.157s, speedup 0.016x
29, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
30, opt runtime 1.646s, model runtime 18.662s, pg runtime 4.855s, speedup 0.260x
31, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
32, opt runtime 4.513s, model runtime 139.474s, pg runtime 6.444s, speedup 0.046x
33, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 76.631s, pg runtime 112.305s, speedup 1.466x
04, opt runtime 30.267s, model runtime 83.433s, pg runtime 100.885s, speedup 1.209x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 25.597s, model runtime 68.287s, pg runtime 27.136s, speedup 0.397x
07, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
08, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
09, opt runtime 5.543s, model runtime 17.957s, pg runtime 5.543s, speedup 0.309x
10, opt runtime 5.237s, model runtime 8.695s, pg runtime 5.237s, speedup 0.602x
11, opt runtime 23.205s, model runtime 116.949s, pg runtime 87.340s, speedup 0.747x
12, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
13, opt runtime 3.332s, model runtime 132.485s, pg runtime 21.298s, speedup 0.161x
14, opt runtime 3.258s, model runtime 135.383s, pg runtime 18.141s, speedup 0.134x
15, opt runtime 53.298s, model runtime 641.154s, pg runtime 148.707s, speedup 0.232x
16, opt runtime 53.440s, model runtime 627.477s, pg runtime 140.742s, speedup 0.224x
17, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
18, opt runtime 6.149s, model runtime 191.745s, pg runtime 30.760s, speedup 0.160x
19, opt runtime 1.347s, model runtime 35.669s, pg runtime 1.438s, speedup 0.040x
20, opt runtime 1.428s, model runtime 31.736s, pg runtime 1.428s, speedup 0.045x
21, opt runtime 25.034s, model runtime 79.463s, pg runtime 25.034s, speedup 0.315x
22, opt runtime 20.897s, model runtime 80.735s, pg runtime 23.708s, speedup 0.294x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 6.234s, model runtime 94.759s, pg runtime 32.540s, speedup 0.343x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.423s, model runtime 29.238s, pg runtime 1.423s, speedup 0.049x
27, opt runtime 6.789s, model runtime 14.386s, pg runtime 7.799s, speedup 0.542x
28, opt runtime 7.199s, model runtime 11.999s, pg runtime 7.619s, speedup 0.635x
29, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
30, opt runtime 5.539s, model runtime 26.078s, pg runtime 5.539s, speedup 0.212x
31, opt runtime 24.840s, model runtime 626.529s, pg runtime 626.529s, speedup 1.000x
32, opt runtime 24.662s, model runtime 613.999s, pg runtime 613.999s, speedup 1.000x
33, opt runtime 39.191s, model runtime 128.541s, pg runtime 75.984s, speedup 0.591x
34, opt runtime 39.191s, model runtime 128.541s, pg runtime 75.984s, speedup 0.591x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
37, opt runtime 19.707s, model runtime 278.671s, pg runtime 19.707s, speedup 0.071x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 1.088s, model runtime 26.133s, pg runtime 1.206s, speedup 0.046x
40, opt runtime 1.086s, model runtime 24.895s, pg runtime 1.181s, speedup 0.047x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 77.086s, pg runtime 123.411s, speedup 1.601x
04, opt runtime 31.996s, model runtime 75.860s, pg runtime 120.854s, speedup 1.593x
05, opt runtime 14.023s, model runtime 69.969s, pg runtime 31.705s, speedup 0.453x
06, opt runtime 30.304s, model runtime 69.001s, pg runtime 30.711s, speedup 0.445x
07, opt runtime 6.123s, model runtime 188.404s, pg runtime 14.081s, speedup 0.075x
08, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
09, opt runtime 8.207s, model runtime 20.040s, pg runtime 8.207s, speedup 0.410x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
12, opt runtime 24.103s, model runtime 105.535s, pg runtime 75.612s, speedup 0.716x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
15, opt runtime 52.135s, model runtime 634.708s, pg runtime 102.039s, speedup 0.161x
16, opt runtime 54.696s, model runtime 674.445s, pg runtime 98.172s, speedup 0.146x
17, opt runtime 5.629s, model runtime 166.652s, pg runtime 42.976s, speedup 0.258x
18, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.308s, model runtime 42.586s, pg runtime 1.528s, speedup 0.036x
21, opt runtime 26.669s, model runtime 84.917s, pg runtime 30.614s, speedup 0.361x
22, opt runtime 28.744s, model runtime 82.073s, pg runtime 29.665s, speedup 0.361x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.420s, model runtime 32.667s, pg runtime 1.420s, speedup 0.043x
27, opt runtime 7.419s, model runtime 25.577s, pg runtime 7.675s, speedup 0.300x
28, opt runtime 7.312s, model runtime 11.686s, pg runtime 7.655s, speedup 0.655x
29, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
30, opt runtime 5.271s, model runtime 26.816s, pg runtime 5.271s, speedup 0.197x
31, opt runtime 24.465s, model runtime 644.779s, pg runtime 644.779s, speedup 1.000x
32, opt runtime 25.478s, model runtime 642.079s, pg runtime 642.079s, speedup 1.000x
33, opt runtime 41.237s, model runtime 120.117s, pg runtime 78.181s, speedup 0.651x
34, opt runtime 41.237s, model runtime 120.117s, pg runtime 78.181s, speedup 0.651x
35, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 32.492s, model runtime 298.993s, pg runtime 32.492s, speedup 0.109x
39, opt runtime 1.116s, model runtime 25.321s, pg runtime 1.161s, speedup 0.046x
40, opt runtime 1.020s, model runtime 24.659s, pg runtime 1.125s, speedup 0.046x
====================
JOB best validation speedup epoch: 0, train speedup 0.476, test speedup 0.361, val speedup 0.506
TPCH best validation speedup epoch: 0, train speedup 0.476, test speedup 0.576, val speedup 0.506
TPCH Skew best validation speedup epoch: 0, train speedup 0.476, test speedup 0.561, val speedup 0.506
execution cost 0:18:51.449816
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.748222, and there are 32798 training samples
in channel 9
JOB test speedup 0.35341432814246027
TPCH test speedup 0.5492235798820253
TPCH skew test speedup 0.5399991720788254
Epoch 0/50 |loss: 0.394166| train set 0.460x speedup, test set 0.540x speedup, val set 0.482x speedup, step: 1, train time 22.22 s
JOB test speedup 0.32690321125791666
TPCH test speedup 0.5650101420575128
TPCH skew test speedup 0.5521459436072942
Epoch 1/50 |loss: 0.284769| train set 0.465x speedup, test set 0.552x speedup, val set 0.492x speedup, step: 1, train time 20.71 s
JOB test speedup 0.34167299700493775
TPCH test speedup 0.5439760428792095
TPCH skew test speedup 0.5312814347831316
Epoch 2/50 |loss: 0.248806| train set 0.454x speedup, test set 0.531x speedup, val set 0.475x speedup, step: 2, train time 20.75 s
JOB test speedup 0.291872001524781
TPCH test speedup 0.5553090747767675
TPCH skew test speedup 0.5396634042334431
Epoch 3/50 |loss: 0.226765| train set 0.453x speedup, test set 0.540x speedup, val set 0.479x speedup, step: 3, train time 20.66 s
JOB test speedup 0.2813911669133324
TPCH test speedup 0.5515014923753417
TPCH skew test speedup 0.5324619148557869
Epoch 4/50 |loss: 0.208835| train set 0.449x speedup, test set 0.532x speedup, val set 0.476x speedup, step: 4, train time 20.68 s
JOB test speedup 0.27706871299837244
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 5/50 |loss: 0.193699| train set 0.445x speedup, test set 0.529x speedup, val set 0.465x speedup, step: 5, train time 20.70 s
JOB test speedup 0.2924000099868076
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 6/50 |loss: 0.183067| train set 0.447x speedup, test set 0.538x speedup, val set 0.474x speedup, step: 6, train time 20.71 s
JOB test speedup 0.29512142518095325
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 7/50 |loss: 0.172624| train set 0.444x speedup, test set 0.531x speedup, val set 0.468x speedup, step: 7, train time 20.70 s
JOB test speedup 0.28619238679089587
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 8/50 |loss: 0.163234| train set 0.444x speedup, test set 0.533x speedup, val set 0.469x speedup, step: 8, train time 20.86 s
JOB test speedup 0.30730753990612486
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 9/50 |loss: 0.158085| train set 0.447x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 9, train time 21.06 s
JOB test speedup 0.2877477803751407
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 10/50 |loss: 0.149789| train set 0.444x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 10, train time 20.89 s
JOB test speedup 0.2921185355143233
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 11/50 |loss: 0.145940| train set 0.445x speedup, test set 0.538x speedup, val set 0.469x speedup, step: 11, train time 21.13 s
JOB test speedup 0.29860921547533387
TPCH test speedup 0.5558915849639101
TPCH skew test speedup 0.5373883724539341
Epoch 12/50 |loss: 0.138913| train set 0.450x speedup, test set 0.537x speedup, val set 0.480x speedup, step: 12, train time 21.17 s
JOB test speedup 0.2906619607879738
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 13/50 |loss: 0.138777| train set 0.444x speedup, test set 0.535x speedup, val set 0.471x speedup, step: 13, train time 21.16 s
JOB test speedup 0.29768312413800935
TPCH test speedup 0.5525047470785863
TPCH skew test speedup 0.545407925443226
Epoch 14/50 |loss: 0.134415| train set 0.446x speedup, test set 0.545x speedup, val set 0.475x speedup, step: 14, train time 21.35 s
JOB test speedup 0.29035037802974284
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 15/50 |loss: 0.127211| train set 0.445x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 15, train time 21.40 s
JOB test speedup 0.29735011751440255
TPCH test speedup 0.5424258856881466
TPCH skew test speedup 0.5385486568848501
Epoch 16/50 |loss: 0.124476| train set 0.449x speedup, test set 0.539x speedup, val set 0.485x speedup, step: 16, train time 21.44 s
JOB test speedup 0.27692318872474125
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 17/50 |loss: 0.125479| train set 0.445x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 17, train time 21.21 s
JOB test speedup 0.2887439109771331
TPCH test speedup 0.5299268692872077
TPCH skew test speedup 0.529472668765604
Epoch 18/50 |loss: 0.120389| train set 0.444x speedup, test set 0.529x speedup, val set 0.468x speedup, step: 18, train time 21.56 s
JOB test speedup 0.2746101143273958
TPCH test speedup 0.5440315217659084
TPCH skew test speedup 0.5359302373559194
Epoch 19/50 |loss: 0.118539| train set 0.446x speedup, test set 0.536x speedup, val set 0.475x speedup, step: 19, train time 21.22 s
JOB test speedup 0.27903136184017396
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 20/50 |loss: 0.119010| train set 0.442x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 20, train time 21.38 s
JOB test speedup 0.275220341053297
TPCH test speedup 0.5382451050251911
TPCH skew test speedup 0.5336010006542554
Epoch 21/50 |loss: 0.115053| train set 0.443x speedup, test set 0.534x speedup, val set 0.470x speedup, step: 21, train time 21.80 s
JOB test speedup 0.2749398490955276
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 22/50 |loss: 0.112855| train set 0.446x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 22, train time 21.47 s
JOB test speedup 0.2864749520945429
TPCH test speedup 0.5423821616411976
TPCH skew test speedup 0.5385051846160743
Epoch 23/50 |loss: 0.111358| train set 0.443x speedup, test set 0.539x speedup, val set 0.475x speedup, step: 23, train time 21.37 s
JOB test speedup 0.2919038438391472
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 24/50 |loss: 0.107980| train set 0.444x speedup, test set 0.530x speedup, val set 0.470x speedup, step: 24, train time 21.51 s
JOB test speedup 0.27779904526522314
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 25/50 |loss: 0.105644| train set 0.443x speedup, test set 0.538x speedup, val set 0.470x speedup, step: 25, train time 21.32 s
JOB test speedup 0.2798669209313996
TPCH test speedup 0.5449220510970488
TPCH skew test speedup 0.5389200234821806
Epoch 26/50 |loss: 0.107490| train set 0.443x speedup, test set 0.539x speedup, val set 0.469x speedup, step: 26, train time 21.31 s
JOB test speedup 0.2866382051846341
TPCH test speedup 0.5448721155047648
TPCH skew test speedup 0.5387871337492237
Epoch 27/50 |loss: 0.104868| train set 0.444x speedup, test set 0.539x speedup, val set 0.470x speedup, step: 27, train time 21.32 s
JOB test speedup 0.29371101195874166
TPCH test speedup 0.538586153986052
TPCH skew test speedup 0.5296986272835744
Epoch 28/50 |loss: 0.101818| train set 0.442x speedup, test set 0.530x speedup, val set 0.471x speedup, step: 28, train time 21.39 s
JOB test speedup 0.2764868273146197
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 29/50 |loss: 0.101922| train set 0.442x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 29, train time 21.48 s
JOB test speedup 0.2888166983529458
TPCH test speedup 0.5568417065404815
TPCH skew test speedup 0.5419905568156282
Epoch 30/50 |loss: 0.100823| train set 0.441x speedup, test set 0.542x speedup, val set 0.467x speedup, step: 30, train time 21.41 s
JOB test speedup 0.266298321578299
TPCH test speedup 0.538586153986052
TPCH skew test speedup 0.5296986272835744
Epoch 31/50 |loss: 0.100488| train set 0.380x speedup, test set 0.530x speedup, val set 0.468x speedup, step: 31, train time 21.46 s
JOB test speedup 0.27276629731730173
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 32/50 |loss: 0.099117| train set 0.443x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 32, train time 21.37 s
JOB test speedup 0.28355193949246327
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 33/50 |loss: 0.099449| train set 0.442x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 33, train time 21.35 s
JOB test speedup 0.2873089897173804
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 34/50 |loss: 0.096412| train set 0.441x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 34, train time 21.52 s
JOB test speedup 0.2858243537879751
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 35/50 |loss: 0.096433| train set 0.441x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 35, train time 21.50 s
JOB test speedup 0.2858243537879751
TPCH test speedup 0.5479379078229253
TPCH skew test speedup 0.5402286218543056
Epoch 36/50 |loss: 0.095039| train set 0.381x speedup, test set 0.540x speedup, val set 0.478x speedup, step: 36, train time 21.32 s
JOB test speedup 0.2864954198847674
TPCH test speedup 0.5540062525921502
TPCH skew test speedup 0.5373127916361612
Epoch 37/50 |loss: 0.094084| train set 0.445x speedup, test set 0.537x speedup, val set 0.477x speedup, step: 37, train time 21.28 s
JOB test speedup 0.26351603769905313
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 38/50 |loss: 0.093697| train set 0.379x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 38, train time 21.41 s
JOB test speedup 0.27477207470019505
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 39/50 |loss: 0.093261| train set 0.443x speedup, test set 0.530x speedup, val set 0.467x speedup, step: 39, train time 21.51 s
JOB test speedup 0.2791274596720821
TPCH test speedup 0.5339789394517845
TPCH skew test speedup 0.5343437142625925
Epoch 40/50 |loss: 0.094897| train set 0.382x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 40, train time 21.26 s
JOB test speedup 0.2889778020623506
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 41/50 |loss: 0.094785| train set 0.440x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 41, train time 21.38 s
JOB test speedup 0.3054892575024641
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 42/50 |loss: 0.092414| train set 0.444x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 42, train time 21.40 s
JOB test speedup 0.2869533105163704
TPCH test speedup 0.562034724798307
TPCH skew test speedup 0.5444010802121393
Epoch 43/50 |loss: 0.089383| train set 0.451x speedup, test set 0.544x speedup, val set 0.481x speedup, step: 43, train time 21.38 s
JOB test speedup 0.28166682064679144
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 44/50 |loss: 0.089006| train set 0.444x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 44, train time 21.29 s
JOB test speedup 0.27350822499143623
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 45/50 |loss: 0.089214| train set 0.443x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 45, train time 21.18 s
JOB test speedup 0.2785410877823864
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 46/50 |loss: 0.090190| train set 0.442x speedup, test set 0.535x speedup, val set 0.469x speedup, step: 46, train time 21.41 s
JOB test speedup 0.2742789648725449
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 47/50 |loss: 0.088815| train set 0.444x speedup, test set 0.535x speedup, val set 0.471x speedup, step: 47, train time 21.42 s
JOB test speedup 0.2886881137451204
TPCH test speedup 0.548701693369425
TPCH skew test speedup 0.5369548219805568
Epoch 48/50 |loss: 0.087652| train set 0.443x speedup, test set 0.537x speedup, val set 0.474x speedup, step: 48, train time 21.31 s
JOB test speedup 0.29898586007371236
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 49/50 |loss: 0.088008| train set 0.445x speedup, test set 0.531x speedup, val set 0.469x speedup, step: 49, train time 21.32 s
Training per epoch cost 21.269 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 3.696s, pg runtime 0.081s, speedup 0.022x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.207s, model runtime 2.474s, pg runtime 0.207s, speedup 0.084x
04, opt runtime 0.920s, model runtime 2.724s, pg runtime 1.680s, speedup 0.617x
05, opt runtime 2.262s, model runtime 4.922s, pg runtime 3.549s, speedup 0.721x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 4.223s, model runtime 40.861s, pg runtime 18.741s, speedup 0.459x
09, opt runtime 2.324s, model runtime 22.017s, pg runtime 10.605s, speedup 0.482x
10, opt runtime 2.846s, model runtime 28.458s, pg runtime 3.507s, speedup 0.123x
11, opt runtime 4.443s, model runtime 35.398s, pg runtime 13.945s, speedup 0.394x
12, opt runtime 0.517s, model runtime 13.147s, pg runtime 0.738s, speedup 0.056x
13, opt runtime 2.413s, model runtime 7.391s, pg runtime 57.198s, speedup 7.739x
14, opt runtime 0.113s, model runtime 2.542s, pg runtime 0.153s, speedup 0.060x
15, opt runtime 2.238s, model runtime 6.907s, pg runtime 2.718s, speedup 0.394x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.962s, model runtime 17.974s, pg runtime 6.876s, speedup 0.383x
19, opt runtime 1.923s, model runtime 16.009s, pg runtime 3.540s, speedup 0.221x
20, opt runtime 0.064s, model runtime 8.246s, pg runtime 0.089s, speedup 0.011x
21, opt runtime 0.953s, model runtime 5.561s, pg runtime 4.730s, speedup 0.851x
22, opt runtime 0.093s, model runtime 19.608s, pg runtime 2.389s, speedup 0.122x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 2.719s, model runtime 19.650s, pg runtime 3.112s, speedup 0.158x
25, opt runtime 4.173s, model runtime 18.653s, pg runtime 8.279s, speedup 0.444x
26, opt runtime 0.161s, model runtime 5.658s, pg runtime 0.161s, speedup 0.028x
27, opt runtime 0.068s, model runtime 2.148s, pg runtime 0.239s, speedup 0.111x
28, opt runtime 0.157s, model runtime 9.917s, pg runtime 0.157s, speedup 0.016x
29, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
30, opt runtime 1.646s, model runtime 26.899s, pg runtime 4.855s, speedup 0.180x
31, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
32, opt runtime 4.513s, model runtime 139.474s, pg runtime 6.444s, speedup 0.046x
33, opt runtime 2.755s, model runtime 17.369s, pg runtime 5.521s, speedup 0.318x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
04, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
05, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
06, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
07, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
08, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
09, opt runtime 5.543s, model runtime 17.957s, pg runtime 5.543s, speedup 0.309x
10, opt runtime 5.237s, model runtime 8.695s, pg runtime 5.237s, speedup 0.602x
11, opt runtime 23.205s, model runtime 116.949s, pg runtime 87.340s, speedup 0.747x
12, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
13, opt runtime 3.332s, model runtime 74.565s, pg runtime 21.298s, speedup 0.286x
14, opt runtime 3.258s, model runtime 70.500s, pg runtime 18.141s, speedup 0.257x
15, opt runtime 53.298s, model runtime 730.999s, pg runtime 148.707s, speedup 0.203x
16, opt runtime 53.440s, model runtime 695.290s, pg runtime 140.742s, speedup 0.202x
17, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
18, opt runtime 6.149s, model runtime 191.745s, pg runtime 30.760s, speedup 0.160x
19, opt runtime 1.347s, model runtime 35.669s, pg runtime 1.438s, speedup 0.040x
20, opt runtime 1.428s, model runtime 31.736s, pg runtime 1.428s, speedup 0.045x
21, opt runtime 25.034s, model runtime 79.463s, pg runtime 25.034s, speedup 0.315x
22, opt runtime 20.897s, model runtime 80.735s, pg runtime 23.708s, speedup 0.294x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 6.234s, model runtime 94.759s, pg runtime 32.540s, speedup 0.343x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.423s, model runtime 29.238s, pg runtime 1.423s, speedup 0.049x
27, opt runtime 6.789s, model runtime 14.386s, pg runtime 7.799s, speedup 0.542x
28, opt runtime 7.199s, model runtime 11.999s, pg runtime 7.619s, speedup 0.635x
29, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
30, opt runtime 5.539s, model runtime 26.078s, pg runtime 5.539s, speedup 0.212x
31, opt runtime 24.840s, model runtime 626.529s, pg runtime 626.529s, speedup 1.000x
32, opt runtime 24.662s, model runtime 613.999s, pg runtime 613.999s, speedup 1.000x
33, opt runtime 39.191s, model runtime 128.541s, pg runtime 75.984s, speedup 0.591x
34, opt runtime 39.191s, model runtime 128.541s, pg runtime 75.984s, speedup 0.591x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
37, opt runtime 19.707s, model runtime 278.671s, pg runtime 19.707s, speedup 0.071x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 1.088s, model runtime 25.839s, pg runtime 1.206s, speedup 0.047x
40, opt runtime 1.086s, model runtime 28.576s, pg runtime 1.181s, speedup 0.041x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
04, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
05, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
06, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
07, opt runtime 6.123s, model runtime 188.404s, pg runtime 14.081s, speedup 0.075x
08, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
09, opt runtime 8.207s, model runtime 20.040s, pg runtime 8.207s, speedup 0.410x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
12, opt runtime 24.103s, model runtime 105.535s, pg runtime 75.612s, speedup 0.716x
13, opt runtime 3.004s, model runtime 81.358s, pg runtime 17.818s, speedup 0.219x
14, opt runtime 3.244s, model runtime 75.985s, pg runtime 17.707s, speedup 0.233x
15, opt runtime 52.135s, model runtime 689.404s, pg runtime 102.039s, speedup 0.148x
16, opt runtime 54.696s, model runtime 730.826s, pg runtime 98.172s, speedup 0.134x
17, opt runtime 5.629s, model runtime 166.652s, pg runtime 42.976s, speedup 0.258x
18, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.308s, model runtime 42.586s, pg runtime 1.528s, speedup 0.036x
21, opt runtime 26.669s, model runtime 84.917s, pg runtime 30.614s, speedup 0.361x
22, opt runtime 28.744s, model runtime 82.073s, pg runtime 29.665s, speedup 0.361x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.420s, model runtime 32.667s, pg runtime 1.420s, speedup 0.043x
27, opt runtime 7.419s, model runtime 25.577s, pg runtime 7.675s, speedup 0.300x
28, opt runtime 7.312s, model runtime 11.686s, pg runtime 7.655s, speedup 0.655x
29, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
30, opt runtime 5.271s, model runtime 26.816s, pg runtime 5.271s, speedup 0.197x
31, opt runtime 24.465s, model runtime 644.779s, pg runtime 644.779s, speedup 1.000x
32, opt runtime 25.478s, model runtime 642.079s, pg runtime 642.079s, speedup 1.000x
33, opt runtime 41.237s, model runtime 120.117s, pg runtime 78.181s, speedup 0.651x
34, opt runtime 41.237s, model runtime 120.117s, pg runtime 78.181s, speedup 0.651x
35, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 32.492s, model runtime 298.993s, pg runtime 32.492s, speedup 0.109x
39, opt runtime 1.116s, model runtime 29.261s, pg runtime 1.161s, speedup 0.040x
40, opt runtime 1.020s, model runtime 25.952s, pg runtime 1.125s, speedup 0.043x
====================
JOB best validation speedup epoch: 1, train speedup 0.465, test speedup 0.327, val speedup 0.492
TPCH best validation speedup epoch: 1, train speedup 0.465, test speedup 0.565, val speedup 0.492
TPCH Skew best validation speedup epoch: 1, train speedup 0.465, test speedup 0.552, val speedup 0.492
execution cost 0:18:50.936064
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.749067, and there are 32798 training samples
in channel 9
JOB test speedup 0.32807442753787724
TPCH test speedup 0.5489131280399807
TPCH skew test speedup 0.5395567586741533
Epoch 0/50 |loss: 0.392427| train set 0.454x speedup, test set 0.540x speedup, val set 0.477x speedup, step: 1, train time 22.07 s
JOB test speedup 0.3195561491194306
TPCH test speedup 0.5661720497265195
TPCH skew test speedup 0.5515683220488382
Epoch 1/50 |loss: 0.284748| train set 0.468x speedup, test set 0.552x speedup, val set 0.493x speedup, step: 1, train time 20.66 s
JOB test speedup 0.3544534869067452
TPCH test speedup 0.5514562930100169
TPCH skew test speedup 0.5324194196528587
Epoch 2/50 |loss: 0.251001| train set 0.456x speedup, test set 0.532x speedup, val set 0.484x speedup, step: 2, train time 20.66 s
JOB test speedup 0.30521740932941954
TPCH test speedup 0.5385430467522617
TPCH skew test speedup 0.5296565719886462
Epoch 3/50 |loss: 0.229718| train set 0.444x speedup, test set 0.530x speedup, val set 0.472x speedup, step: 3, train time 20.67 s
JOB test speedup 0.30038578158682383
TPCH test speedup 0.5558915849639101
TPCH skew test speedup 0.5373883724539341
Epoch 4/50 |loss: 0.211461| train set 0.452x speedup, test set 0.537x speedup, val set 0.478x speedup, step: 4, train time 20.49 s
JOB test speedup 0.2984774555273885
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 5/50 |loss: 0.198327| train set 0.447x speedup, test set 0.529x speedup, val set 0.465x speedup, step: 5, train time 20.70 s
JOB test speedup 0.3255609869723486
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 6/50 |loss: 0.189024| train set 0.448x speedup, test set 0.534x speedup, val set 0.475x speedup, step: 6, train time 20.61 s
JOB test speedup 0.29094523869892963
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 7/50 |loss: 0.178751| train set 0.444x speedup, test set 0.529x speedup, val set 0.465x speedup, step: 7, train time 20.57 s
JOB test speedup 0.2937892876177594
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 8/50 |loss: 0.171158| train set 0.444x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 8, train time 20.75 s
JOB test speedup 0.2966113251064067
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 9/50 |loss: 0.162338| train set 0.448x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 9, train time 20.66 s
JOB test speedup 0.27898519730813953
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 10/50 |loss: 0.155083| train set 0.448x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 10, train time 20.75 s
JOB test speedup 0.28986020069630775
TPCH test speedup 0.5402610036085624
TPCH skew test speedup 0.5332052532093267
Epoch 11/50 |loss: 0.151219| train set 0.446x speedup, test set 0.533x speedup, val set 0.470x speedup, step: 11, train time 20.76 s
JOB test speedup 0.2854758820892107
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 12/50 |loss: 0.143426| train set 0.450x speedup, test set 0.534x speedup, val set 0.480x speedup, step: 12, train time 20.71 s
JOB test speedup 0.29259160461196715
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 13/50 |loss: 0.145386| train set 0.447x speedup, test set 0.531x speedup, val set 0.471x speedup, step: 13, train time 20.60 s
JOB test speedup 0.2874485823827489
TPCH test speedup 0.5448222720772588
TPCH skew test speedup 0.5341766590976645
Epoch 14/50 |loss: 0.139041| train set 0.446x speedup, test set 0.534x speedup, val set 0.470x speedup, step: 14, train time 20.76 s
JOB test speedup 0.3168034028963776
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 15/50 |loss: 0.131937| train set 0.444x speedup, test set 0.534x speedup, val set 0.474x speedup, step: 15, train time 20.68 s
JOB test speedup 0.2935884936571176
TPCH test speedup 0.5424258856881466
TPCH skew test speedup 0.5385486568848501
Epoch 16/50 |loss: 0.128289| train set 0.446x speedup, test set 0.539x speedup, val set 0.475x speedup, step: 16, train time 20.61 s
JOB test speedup 0.2787361096671325
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 17/50 |loss: 0.129707| train set 0.446x speedup, test set 0.534x speedup, val set 0.475x speedup, step: 17, train time 20.98 s
JOB test speedup 0.28345424270603725
TPCH test speedup 0.5339789394517845
TPCH skew test speedup 0.5343437142625925
Epoch 18/50 |loss: 0.123312| train set 0.445x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 18, train time 20.76 s
JOB test speedup 0.2709419988390059
TPCH test speedup 0.5410470245333162
TPCH skew test speedup 0.5300578846796862
Epoch 19/50 |loss: 0.122061| train set 0.442x speedup, test set 0.530x speedup, val set 0.467x speedup, step: 19, train time 20.91 s
JOB test speedup 0.2759393754986863
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 20/50 |loss: 0.120762| train set 0.441x speedup, test set 0.529x speedup, val set 0.465x speedup, step: 20, train time 20.80 s
JOB test speedup 0.2847682005904082
TPCH test speedup 0.5553549079506489
TPCH skew test speedup 0.5397070637116423
Epoch 21/50 |loss: 0.118800| train set 0.443x speedup, test set 0.540x speedup, val set 0.481x speedup, step: 21, train time 21.53 s
JOB test speedup 0.2737661208223787
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 22/50 |loss: 0.115534| train set 0.442x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 22, train time 20.97 s
JOB test speedup 0.2749617002172491
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 23/50 |loss: 0.113422| train set 0.444x speedup, test set 0.538x speedup, val set 0.470x speedup, step: 23, train time 20.76 s
JOB test speedup 0.27345269948834416
TPCH test speedup 0.5302574550765656
TPCH skew test speedup 0.5256302276927668
Epoch 24/50 |loss: 0.112521| train set 0.445x speedup, test set 0.526x speedup, val set 0.471x speedup, step: 24, train time 20.97 s
JOB test speedup 0.26520803115367164
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 25/50 |loss: 0.109653| train set 0.442x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 25, train time 20.97 s
JOB test speedup 0.27765081736507646
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 26/50 |loss: 0.108567| train set 0.443x speedup, test set 0.535x speedup, val set 0.467x speedup, step: 26, train time 20.96 s
JOB test speedup 0.27205401584812083
TPCH test speedup 0.5536454016688499
TPCH skew test speedup 0.541328586112657
Epoch 27/50 |loss: 0.108072| train set 0.442x speedup, test set 0.541x speedup, val set 0.469x speedup, step: 27, train time 21.13 s
JOB test speedup 0.27573398741520183
TPCH test speedup 0.5382451050251911
TPCH skew test speedup 0.5336010006542554
Epoch 28/50 |loss: 0.104494| train set 0.442x speedup, test set 0.534x speedup, val set 0.470x speedup, step: 28, train time 20.88 s
JOB test speedup 0.2684933975637323
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 29/50 |loss: 0.106824| train set 0.442x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 29, train time 21.05 s
JOB test speedup 0.2743718830969418
TPCH test speedup 0.5302574550765656
TPCH skew test speedup 0.5256302276927668
Epoch 30/50 |loss: 0.102505| train set 0.442x speedup, test set 0.526x speedup, val set 0.466x speedup, step: 30, train time 21.16 s
JOB test speedup 0.2720055774101905
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 31/50 |loss: 0.101441| train set 0.379x speedup, test set 0.529x speedup, val set 0.465x speedup, step: 31, train time 21.05 s
JOB test speedup 0.27019495550679096
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 32/50 |loss: 0.101345| train set 0.443x speedup, test set 0.529x speedup, val set 0.468x speedup, step: 32, train time 21.11 s
JOB test speedup 0.2743718830969418
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 33/50 |loss: 0.102005| train set 0.441x speedup, test set 0.529x speedup, val set 0.468x speedup, step: 33, train time 21.15 s
JOB test speedup 0.2652027592363333
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 34/50 |loss: 0.101106| train set 0.442x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 34, train time 21.05 s
JOB test speedup 0.27990646927750135
TPCH test speedup 0.5299268692872077
TPCH skew test speedup 0.529472668765604
Epoch 35/50 |loss: 0.098604| train set 0.442x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 35, train time 21.22 s
JOB test speedup 0.2892732368070759
TPCH test speedup 0.5339789394517845
TPCH skew test speedup 0.5343437142625925
Epoch 36/50 |loss: 0.095350| train set 0.382x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 36, train time 21.28 s
JOB test speedup 0.27227017864031366
TPCH test speedup 0.5571819808941859
TPCH skew test speedup 0.5433921671220997
Epoch 37/50 |loss: 0.097394| train set 0.445x speedup, test set 0.543x speedup, val set 0.479x speedup, step: 37, train time 21.38 s
JOB test speedup 0.2643747270790187
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 38/50 |loss: 0.096334| train set 0.443x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 38, train time 21.16 s
JOB test speedup 0.27227017864031366
TPCH test speedup 0.5302574550765656
TPCH skew test speedup 0.5256302276927668
Epoch 39/50 |loss: 0.095243| train set 0.442x speedup, test set 0.526x speedup, val set 0.471x speedup, step: 39, train time 21.23 s
JOB test speedup 0.27471909254430066
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 40/50 |loss: 0.095704| train set 0.382x speedup, test set 0.530x speedup, val set 0.468x speedup, step: 40, train time 21.27 s
JOB test speedup 0.27456333758627877
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 41/50 |loss: 0.094773| train set 0.445x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 41, train time 21.12 s
JOB test speedup 0.2828278338758095
TPCH test speedup 0.5302574550765656
TPCH skew test speedup 0.5256302276927668
Epoch 42/50 |loss: 0.092659| train set 0.444x speedup, test set 0.526x speedup, val set 0.465x speedup, step: 42, train time 21.10 s
JOB test speedup 0.27875500576848056
TPCH test speedup 0.5479379078229253
TPCH skew test speedup 0.5402286218543056
Epoch 43/50 |loss: 0.090511| train set 0.445x speedup, test set 0.540x speedup, val set 0.476x speedup, step: 43, train time 21.11 s
JOB test speedup 0.2723719228224276
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 44/50 |loss: 0.092594| train set 0.441x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 44, train time 21.37 s
JOB test speedup 0.2737661208223787
TPCH test speedup 0.5339789394517845
TPCH skew test speedup 0.5343437142625925
Epoch 45/50 |loss: 0.092261| train set 0.443x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 45, train time 21.36 s
JOB test speedup 0.2696351058557743
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 46/50 |loss: 0.091179| train set 0.443x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 46, train time 21.37 s
JOB test speedup 0.26394769899945775
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 47/50 |loss: 0.090171| train set 0.381x speedup, test set 0.535x speedup, val set 0.471x speedup, step: 47, train time 21.30 s
JOB test speedup 0.28289027385491916
TPCH test speedup 0.5483477173853172
TPCH skew test speedup 0.5409652474485404
Epoch 48/50 |loss: 0.090636| train set 0.444x speedup, test set 0.541x speedup, val set 0.479x speedup, step: 48, train time 21.40 s
JOB test speedup 0.28656732361181986
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 49/50 |loss: 0.089937| train set 0.446x speedup, test set 0.531x speedup, val set 0.469x speedup, step: 49, train time 21.32 s
Training per epoch cost 20.998 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 3.696s, pg runtime 0.081s, speedup 0.022x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.207s, model runtime 2.474s, pg runtime 0.207s, speedup 0.084x
04, opt runtime 0.920s, model runtime 7.166s, pg runtime 1.680s, speedup 0.234x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 4.223s, model runtime 30.512s, pg runtime 18.741s, speedup 0.614x
09, opt runtime 2.324s, model runtime 22.017s, pg runtime 10.605s, speedup 0.482x
10, opt runtime 2.846s, model runtime 28.458s, pg runtime 3.507s, speedup 0.123x
11, opt runtime 4.443s, model runtime 35.398s, pg runtime 13.945s, speedup 0.394x
12, opt runtime 0.517s, model runtime 13.147s, pg runtime 0.738s, speedup 0.056x
13, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
14, opt runtime 0.113s, model runtime 2.542s, pg runtime 0.153s, speedup 0.060x
15, opt runtime 2.238s, model runtime 6.907s, pg runtime 2.718s, speedup 0.394x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.962s, model runtime 17.974s, pg runtime 6.876s, speedup 0.383x
19, opt runtime 1.923s, model runtime 15.249s, pg runtime 3.540s, speedup 0.232x
20, opt runtime 0.064s, model runtime 8.246s, pg runtime 0.089s, speedup 0.011x
21, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
22, opt runtime 0.093s, model runtime 12.776s, pg runtime 2.389s, speedup 0.187x
23, opt runtime 0.389s, model runtime 8.892s, pg runtime 0.389s, speedup 0.044x
24, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
25, opt runtime 4.173s, model runtime 10.443s, pg runtime 8.279s, speedup 0.793x
26, opt runtime 0.161s, model runtime 5.658s, pg runtime 0.161s, speedup 0.028x
27, opt runtime 0.068s, model runtime 2.148s, pg runtime 0.239s, speedup 0.111x
28, opt runtime 0.157s, model runtime 9.917s, pg runtime 0.157s, speedup 0.016x
29, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
30, opt runtime 1.646s, model runtime 26.899s, pg runtime 4.855s, speedup 0.180x
31, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
32, opt runtime 4.513s, model runtime 139.474s, pg runtime 6.444s, speedup 0.046x
33, opt runtime 2.755s, model runtime 17.369s, pg runtime 5.521s, speedup 0.318x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
04, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
05, opt runtime 23.961s, model runtime 98.468s, pg runtime 32.278s, speedup 0.328x
06, opt runtime 25.597s, model runtime 61.489s, pg runtime 27.136s, speedup 0.441x
07, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
08, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
09, opt runtime 5.543s, model runtime 17.957s, pg runtime 5.543s, speedup 0.309x
10, opt runtime 5.237s, model runtime 8.695s, pg runtime 5.237s, speedup 0.602x
11, opt runtime 23.205s, model runtime 116.949s, pg runtime 87.340s, speedup 0.747x
12, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
13, opt runtime 3.332s, model runtime 74.565s, pg runtime 21.298s, speedup 0.286x
14, opt runtime 3.258s, model runtime 70.500s, pg runtime 18.141s, speedup 0.257x
15, opt runtime 53.298s, model runtime 730.999s, pg runtime 148.707s, speedup 0.203x
16, opt runtime 53.440s, model runtime 695.290s, pg runtime 140.742s, speedup 0.202x
17, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
18, opt runtime 6.149s, model runtime 191.745s, pg runtime 30.760s, speedup 0.160x
19, opt runtime 1.347s, model runtime 35.669s, pg runtime 1.438s, speedup 0.040x
20, opt runtime 1.428s, model runtime 31.736s, pg runtime 1.428s, speedup 0.045x
21, opt runtime 25.034s, model runtime 79.463s, pg runtime 25.034s, speedup 0.315x
22, opt runtime 20.897s, model runtime 80.735s, pg runtime 23.708s, speedup 0.294x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 6.234s, model runtime 94.759s, pg runtime 32.540s, speedup 0.343x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.423s, model runtime 29.238s, pg runtime 1.423s, speedup 0.049x
27, opt runtime 6.789s, model runtime 14.386s, pg runtime 7.799s, speedup 0.542x
28, opt runtime 7.199s, model runtime 11.999s, pg runtime 7.619s, speedup 0.635x
29, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
30, opt runtime 5.539s, model runtime 26.078s, pg runtime 5.539s, speedup 0.212x
31, opt runtime 24.840s, model runtime 626.529s, pg runtime 626.529s, speedup 1.000x
32, opt runtime 24.662s, model runtime 613.999s, pg runtime 613.999s, speedup 1.000x
33, opt runtime 39.191s, model runtime 128.541s, pg runtime 75.984s, speedup 0.591x
34, opt runtime 39.191s, model runtime 128.541s, pg runtime 75.984s, speedup 0.591x
35, opt runtime 18.690s, model runtime 626.432s, pg runtime 651.942s, speedup 1.041x
36, opt runtime 16.280s, model runtime 612.284s, pg runtime 634.990s, speedup 1.037x
37, opt runtime 19.707s, model runtime 278.671s, pg runtime 19.707s, speedup 0.071x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 1.088s, model runtime 27.390s, pg runtime 1.206s, speedup 0.044x
40, opt runtime 1.086s, model runtime 27.596s, pg runtime 1.181s, speedup 0.043x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
04, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
05, opt runtime 14.023s, model runtime 86.663s, pg runtime 31.705s, speedup 0.366x
06, opt runtime 30.304s, model runtime 47.561s, pg runtime 30.711s, speedup 0.646x
07, opt runtime 6.123s, model runtime 188.404s, pg runtime 14.081s, speedup 0.075x
08, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
09, opt runtime 8.207s, model runtime 20.040s, pg runtime 8.207s, speedup 0.410x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
12, opt runtime 24.103s, model runtime 105.535s, pg runtime 75.612s, speedup 0.716x
13, opt runtime 3.004s, model runtime 81.358s, pg runtime 17.818s, speedup 0.219x
14, opt runtime 3.244s, model runtime 75.985s, pg runtime 17.707s, speedup 0.233x
15, opt runtime 52.135s, model runtime 689.404s, pg runtime 102.039s, speedup 0.148x
16, opt runtime 54.696s, model runtime 730.826s, pg runtime 98.172s, speedup 0.134x
17, opt runtime 5.629s, model runtime 166.652s, pg runtime 42.976s, speedup 0.258x
18, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.308s, model runtime 42.586s, pg runtime 1.528s, speedup 0.036x
21, opt runtime 26.669s, model runtime 84.917s, pg runtime 30.614s, speedup 0.361x
22, opt runtime 28.744s, model runtime 82.073s, pg runtime 29.665s, speedup 0.361x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.420s, model runtime 32.667s, pg runtime 1.420s, speedup 0.043x
27, opt runtime 7.419s, model runtime 25.577s, pg runtime 7.675s, speedup 0.300x
28, opt runtime 7.312s, model runtime 11.686s, pg runtime 7.655s, speedup 0.655x
29, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
30, opt runtime 5.271s, model runtime 26.816s, pg runtime 5.271s, speedup 0.197x
31, opt runtime 24.465s, model runtime 644.779s, pg runtime 644.779s, speedup 1.000x
32, opt runtime 25.478s, model runtime 642.079s, pg runtime 642.079s, speedup 1.000x
33, opt runtime 41.237s, model runtime 120.117s, pg runtime 78.181s, speedup 0.651x
34, opt runtime 41.237s, model runtime 120.117s, pg runtime 78.181s, speedup 0.651x
35, opt runtime 16.301s, model runtime 634.653s, pg runtime 646.719s, speedup 1.019x
36, opt runtime 16.482s, model runtime 607.850s, pg runtime 622.915s, speedup 1.025x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 32.492s, model runtime 298.993s, pg runtime 32.492s, speedup 0.109x
39, opt runtime 1.116s, model runtime 28.783s, pg runtime 1.161s, speedup 0.040x
40, opt runtime 1.020s, model runtime 27.004s, pg runtime 1.125s, speedup 0.042x
====================
JOB best validation speedup epoch: 1, train speedup 0.468, test speedup 0.320, val speedup 0.493
TPCH best validation speedup epoch: 1, train speedup 0.468, test speedup 0.566, val speedup 0.493
TPCH Skew best validation speedup epoch: 1, train speedup 0.468, test speedup 0.552, val speedup 0.493
execution cost 0:18:36.036852
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.699978, and there are 32798 training samples
in channel 9
JOB test speedup 0.32767306165701243
TPCH test speedup 0.5627351372230052
TPCH skew test speedup 0.5478762832361114
Epoch 0/50 |loss: 0.393890| train set 0.467x speedup, test set 0.548x speedup, val set 0.490x speedup, step: 1, train time 21.98 s
JOB test speedup 0.38436080861839433
TPCH test speedup 0.5672797488131783
TPCH skew test speedup 0.551767853712408
Epoch 1/50 |loss: 0.282942| train set 0.466x speedup, test set 0.552x speedup, val set 0.489x speedup, step: 2, train time 20.61 s
JOB test speedup 0.36541779843423267
TPCH test speedup 0.5418887327227174
TPCH skew test speedup 0.5316319610051273
Epoch 2/50 |loss: 0.245769| train set 0.452x speedup, test set 0.532x speedup, val set 0.477x speedup, step: 3, train time 20.74 s
JOB test speedup 0.28501823588664976
TPCH test speedup 0.5609473947845495
TPCH skew test speedup 0.5442068400251419
Epoch 3/50 |loss: 0.225416| train set 0.456x speedup, test set 0.544x speedup, val set 0.481x speedup, step: 4, train time 20.77 s
JOB test speedup 0.28400041101234597
TPCH test speedup 0.5515014923753417
TPCH skew test speedup 0.5324619148557869
Epoch 4/50 |loss: 0.206781| train set 0.448x speedup, test set 0.532x speedup, val set 0.476x speedup, step: 5, train time 20.66 s
JOB test speedup 0.2968027264207534
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 5/50 |loss: 0.190591| train set 0.446x speedup, test set 0.529x speedup, val set 0.465x speedup, step: 6, train time 20.58 s
JOB test speedup 0.30072518111071894
TPCH test speedup 0.5480477020284136
TPCH skew test speedup 0.5385645886823
Epoch 6/50 |loss: 0.182041| train set 0.450x speedup, test set 0.539x speedup, val set 0.473x speedup, step: 7, train time 20.80 s
JOB test speedup 0.2918374315677046
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 7/50 |loss: 0.171833| train set 0.442x speedup, test set 0.529x speedup, val set 0.465x speedup, step: 8, train time 20.50 s
JOB test speedup 0.28858817830057953
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 8/50 |loss: 0.165118| train set 0.444x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 9, train time 20.62 s
JOB test speedup 0.30392204709730963
TPCH test speedup 0.5482466800118503
TPCH skew test speedup 0.5361859718567805
Epoch 9/50 |loss: 0.158795| train set 0.445x speedup, test set 0.536x speedup, val set 0.471x speedup, step: 10, train time 20.58 s
JOB test speedup 0.29288104692818023
TPCH test speedup 0.5482466800118503
TPCH skew test speedup 0.5361859718567805
Epoch 10/50 |loss: 0.149952| train set 0.444x speedup, test set 0.536x speedup, val set 0.470x speedup, step: 11, train time 20.92 s
JOB test speedup 0.2837212592200039
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 11/50 |loss: 0.147298| train set 0.445x speedup, test set 0.538x speedup, val set 0.469x speedup, step: 12, train time 20.78 s
JOB test speedup 0.28945968818331413
TPCH test speedup 0.5558915849639101
TPCH skew test speedup 0.5373883724539341
Epoch 12/50 |loss: 0.138916| train set 0.451x speedup, test set 0.537x speedup, val set 0.484x speedup, step: 13, train time 20.67 s
JOB test speedup 0.28729385260210843
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 13/50 |loss: 0.138898| train set 0.445x speedup, test set 0.535x speedup, val set 0.471x speedup, step: 14, train time 20.89 s
JOB test speedup 0.2906405955944439
TPCH test speedup 0.5528641121561196
TPCH skew test speedup 0.541331606418527
Epoch 14/50 |loss: 0.134781| train set 0.446x speedup, test set 0.541x speedup, val set 0.474x speedup, step: 15, train time 20.90 s
JOB test speedup 0.2842467584380101
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 15/50 |loss: 0.128012| train set 0.445x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 16, train time 21.20 s
JOB test speedup 0.29015825943089285
TPCH test speedup 0.5385430467522617
TPCH skew test speedup 0.5296565719886462
Epoch 16/50 |loss: 0.124243| train set 0.442x speedup, test set 0.530x speedup, val set 0.474x speedup, step: 17, train time 21.21 s
JOB test speedup 0.31786421470525544
TPCH test speedup 0.5448222720772588
TPCH skew test speedup 0.5341766590976645
Epoch 17/50 |loss: 0.126917| train set 0.445x speedup, test set 0.534x speedup, val set 0.474x speedup, step: 18, train time 21.21 s
JOB test speedup 0.28904804724331046
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 18/50 |loss: 0.121625| train set 0.446x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 19, train time 21.12 s
JOB test speedup 0.2990025943081332
TPCH test speedup 0.5518713843506348
TPCH skew test speedup 0.5331348886838764
Epoch 19/50 |loss: 0.118739| train set 0.446x speedup, test set 0.533x speedup, val set 0.479x speedup, step: 20, train time 21.26 s
JOB test speedup 0.2895958873887234
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 20/50 |loss: 0.118413| train set 0.441x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 21, train time 21.48 s
JOB test speedup 0.28179199526497184
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 21/50 |loss: 0.117634| train set 0.442x speedup, test set 0.531x speedup, val set 0.467x speedup, step: 22, train time 21.81 s
JOB test speedup 0.2767568992323573
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 22/50 |loss: 0.112417| train set 0.445x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 23, train time 21.39 s
JOB test speedup 0.2906618038074723
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 23/50 |loss: 0.112426| train set 0.445x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 24, train time 21.34 s
JOB test speedup 0.31355834511645153
TPCH test speedup 0.5555282746515641
TPCH skew test speedup 0.5414053009920894
Epoch 24/50 |loss: 0.108827| train set 0.450x speedup, test set 0.541x speedup, val set 0.484x speedup, step: 25, train time 21.48 s
JOB test speedup 0.2774696768517795
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 25/50 |loss: 0.106892| train set 0.441x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 26, train time 21.40 s
JOB test speedup 0.28424907499128765
TPCH test speedup 0.5347042793657282
TPCH skew test speedup 0.531140639848336
Epoch 26/50 |loss: 0.106922| train set 0.443x speedup, test set 0.531x speedup, val set 0.466x speedup, step: 27, train time 21.10 s
JOB test speedup 0.28743818474190225
TPCH test speedup 0.5448222720772588
TPCH skew test speedup 0.5341766590976645
Epoch 27/50 |loss: 0.106904| train set 0.445x speedup, test set 0.534x speedup, val set 0.474x speedup, step: 28, train time 21.11 s
JOB test speedup 0.28792247497306955
TPCH test speedup 0.538586153986052
TPCH skew test speedup 0.5296986272835744
Epoch 28/50 |loss: 0.102125| train set 0.442x speedup, test set 0.530x speedup, val set 0.471x speedup, step: 29, train time 21.31 s
JOB test speedup 0.27419752480901466
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 29/50 |loss: 0.103599| train set 0.442x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 30, train time 21.48 s
JOB test speedup 0.28179199526497184
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 30/50 |loss: 0.104082| train set 0.440x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 31, train time 21.18 s
JOB test speedup 0.2811226738187943
TPCH test speedup 0.5430893506021732
TPCH skew test speedup 0.5292050108105508
Epoch 31/50 |loss: 0.099987| train set 0.443x speedup, test set 0.529x speedup, val set 0.467x speedup, step: 32, train time 21.29 s
JOB test speedup 0.2900915917890193
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 32/50 |loss: 0.098946| train set 0.443x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 33, train time 21.41 s
JOB test speedup 0.2912069721189351
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 33/50 |loss: 0.101350| train set 0.442x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 34, train time 21.31 s
JOB test speedup 0.28801365342279606
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 34/50 |loss: 0.097733| train set 0.441x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 35, train time 21.41 s
JOB test speedup 0.28217002620095427
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 35/50 |loss: 0.098616| train set 0.442x speedup, test set 0.531x speedup, val set 0.469x speedup, step: 36, train time 21.43 s
JOB test speedup 0.25978096584704
TPCH test speedup 0.5479379078229253
TPCH skew test speedup 0.5402286218543056
Epoch 36/50 |loss: 0.093459| train set 0.381x speedup, test set 0.540x speedup, val set 0.476x speedup, step: 37, train time 21.38 s
JOB test speedup 0.3046030664859917
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 37/50 |loss: 0.095054| train set 0.445x speedup, test set 0.531x speedup, val set 0.479x speedup, step: 38, train time 21.51 s
JOB test speedup 0.2839530771687285
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 38/50 |loss: 0.094453| train set 0.380x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 39, train time 21.40 s
JOB test speedup 0.2802617299528838
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 39/50 |loss: 0.092852| train set 0.442x speedup, test set 0.534x speedup, val set 0.470x speedup, step: 40, train time 21.41 s
JOB test speedup 0.26804260720992706
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 40/50 |loss: 0.094799| train set 0.381x speedup, test set 0.530x speedup, val set 0.473x speedup, step: 41, train time 21.36 s
JOB test speedup 0.28734622991921255
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 41/50 |loss: 0.092080| train set 0.440x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 42, train time 21.37 s
JOB test speedup 0.305934617593541
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 42/50 |loss: 0.092321| train set 0.445x speedup, test set 0.530x speedup, val set 0.470x speedup, step: 43, train time 21.35 s
JOB test speedup 0.2861368109026339
TPCH test speedup 0.5482913547438737
TPCH skew test speedup 0.5362290704676196
Epoch 43/50 |loss: 0.090293| train set 0.444x speedup, test set 0.536x speedup, val set 0.477x speedup, step: 44, train time 21.50 s
JOB test speedup 0.2790757766417224
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 44/50 |loss: 0.089702| train set 0.443x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 45, train time 21.28 s
JOB test speedup 0.28117344137944716
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 45/50 |loss: 0.089709| train set 0.443x speedup, test set 0.534x speedup, val set 0.474x speedup, step: 46, train time 21.70 s
JOB test speedup 0.28179199526497184
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 46/50 |loss: 0.089202| train set 0.442x speedup, test set 0.535x speedup, val set 0.469x speedup, step: 47, train time 21.38 s
JOB test speedup 0.27885463910937813
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 47/50 |loss: 0.090288| train set 0.441x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 48, train time 21.41 s
JOB test speedup 0.3203296665580942
TPCH test speedup 0.548701693369425
TPCH skew test speedup 0.5369548219805568
Epoch 48/50 |loss: 0.088290| train set 0.443x speedup, test set 0.537x speedup, val set 0.477x speedup, step: 49, train time 21.42 s
JOB test speedup 0.26915819976617766
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 49/50 |loss: 0.088872| train set 0.443x speedup, test set 0.534x speedup, val set 0.474x speedup, step: 50, train time 21.36 s
Training per epoch cost 21.196 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 3.696s, pg runtime 0.081s, speedup 0.022x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.207s, model runtime 2.474s, pg runtime 0.207s, speedup 0.084x
04, opt runtime 0.920s, model runtime 7.166s, pg runtime 1.680s, speedup 0.234x
05, opt runtime 2.262s, model runtime 4.922s, pg runtime 3.549s, speedup 0.721x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 4.223s, model runtime 40.861s, pg runtime 18.741s, speedup 0.459x
09, opt runtime 2.324s, model runtime 22.017s, pg runtime 10.605s, speedup 0.482x
10, opt runtime 2.846s, model runtime 28.458s, pg runtime 3.507s, speedup 0.123x
11, opt runtime 4.443s, model runtime 35.398s, pg runtime 13.945s, speedup 0.394x
12, opt runtime 0.517s, model runtime 13.147s, pg runtime 0.738s, speedup 0.056x
13, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 2.238s, model runtime 6.891s, pg runtime 2.718s, speedup 0.394x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.962s, model runtime 10.410s, pg runtime 6.876s, speedup 0.661x
19, opt runtime 1.923s, model runtime 29.556s, pg runtime 3.540s, speedup 0.120x
20, opt runtime 0.064s, model runtime 8.246s, pg runtime 0.089s, speedup 0.011x
21, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
22, opt runtime 0.093s, model runtime 10.579s, pg runtime 2.389s, speedup 0.226x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
25, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
26, opt runtime 0.161s, model runtime 5.658s, pg runtime 0.161s, speedup 0.028x
27, opt runtime 0.068s, model runtime 4.849s, pg runtime 0.239s, speedup 0.049x
28, opt runtime 0.157s, model runtime 9.917s, pg runtime 0.157s, speedup 0.016x
29, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
30, opt runtime 1.646s, model runtime 26.899s, pg runtime 4.855s, speedup 0.180x
31, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
32, opt runtime 4.513s, model runtime 139.474s, pg runtime 6.444s, speedup 0.046x
33, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 76.631s, pg runtime 112.305s, speedup 1.466x
04, opt runtime 30.267s, model runtime 83.433s, pg runtime 100.885s, speedup 1.209x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 25.597s, model runtime 68.287s, pg runtime 27.136s, speedup 0.397x
07, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
08, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
09, opt runtime 5.543s, model runtime 17.957s, pg runtime 5.543s, speedup 0.309x
10, opt runtime 5.237s, model runtime 8.695s, pg runtime 5.237s, speedup 0.602x
11, opt runtime 23.205s, model runtime 116.949s, pg runtime 87.340s, speedup 0.747x
12, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
13, opt runtime 3.332s, model runtime 132.485s, pg runtime 21.298s, speedup 0.161x
14, opt runtime 3.258s, model runtime 135.383s, pg runtime 18.141s, speedup 0.134x
15, opt runtime 53.298s, model runtime 730.999s, pg runtime 148.707s, speedup 0.203x
16, opt runtime 53.440s, model runtime 695.290s, pg runtime 140.742s, speedup 0.202x
17, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
18, opt runtime 6.149s, model runtime 191.745s, pg runtime 30.760s, speedup 0.160x
19, opt runtime 1.347s, model runtime 35.669s, pg runtime 1.438s, speedup 0.040x
20, opt runtime 1.428s, model runtime 31.736s, pg runtime 1.428s, speedup 0.045x
21, opt runtime 25.034s, model runtime 79.463s, pg runtime 25.034s, speedup 0.315x
22, opt runtime 20.897s, model runtime 80.735s, pg runtime 23.708s, speedup 0.294x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 6.234s, model runtime 94.759s, pg runtime 32.540s, speedup 0.343x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.423s, model runtime 29.238s, pg runtime 1.423s, speedup 0.049x
27, opt runtime 6.789s, model runtime 14.386s, pg runtime 7.799s, speedup 0.542x
28, opt runtime 7.199s, model runtime 11.999s, pg runtime 7.619s, speedup 0.635x
29, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
30, opt runtime 5.539s, model runtime 26.078s, pg runtime 5.539s, speedup 0.212x
31, opt runtime 24.840s, model runtime 626.529s, pg runtime 626.529s, speedup 1.000x
32, opt runtime 24.662s, model runtime 613.999s, pg runtime 613.999s, speedup 1.000x
33, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
34, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
37, opt runtime 19.707s, model runtime 278.671s, pg runtime 19.707s, speedup 0.071x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 1.088s, model runtime 25.839s, pg runtime 1.206s, speedup 0.047x
40, opt runtime 1.086s, model runtime 28.576s, pg runtime 1.181s, speedup 0.041x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 77.086s, pg runtime 123.411s, speedup 1.601x
04, opt runtime 31.996s, model runtime 75.860s, pg runtime 120.854s, speedup 1.593x
05, opt runtime 14.023s, model runtime 69.969s, pg runtime 31.705s, speedup 0.453x
06, opt runtime 30.304s, model runtime 69.001s, pg runtime 30.711s, speedup 0.445x
07, opt runtime 6.123s, model runtime 188.404s, pg runtime 14.081s, speedup 0.075x
08, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
09, opt runtime 8.207s, model runtime 20.040s, pg runtime 8.207s, speedup 0.410x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
12, opt runtime 24.103s, model runtime 105.535s, pg runtime 75.612s, speedup 0.716x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
15, opt runtime 52.135s, model runtime 689.404s, pg runtime 102.039s, speedup 0.148x
16, opt runtime 54.696s, model runtime 730.826s, pg runtime 98.172s, speedup 0.134x
17, opt runtime 5.629s, model runtime 166.652s, pg runtime 42.976s, speedup 0.258x
18, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.308s, model runtime 42.586s, pg runtime 1.528s, speedup 0.036x
21, opt runtime 26.669s, model runtime 84.917s, pg runtime 30.614s, speedup 0.361x
22, opt runtime 28.744s, model runtime 82.073s, pg runtime 29.665s, speedup 0.361x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.420s, model runtime 32.667s, pg runtime 1.420s, speedup 0.043x
27, opt runtime 7.419s, model runtime 25.577s, pg runtime 7.675s, speedup 0.300x
28, opt runtime 7.312s, model runtime 11.686s, pg runtime 7.655s, speedup 0.655x
29, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
30, opt runtime 5.271s, model runtime 26.816s, pg runtime 5.271s, speedup 0.197x
31, opt runtime 24.465s, model runtime 644.779s, pg runtime 644.779s, speedup 1.000x
32, opt runtime 25.478s, model runtime 642.079s, pg runtime 642.079s, speedup 1.000x
33, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 32.492s, model runtime 298.993s, pg runtime 32.492s, speedup 0.109x
39, opt runtime 1.116s, model runtime 29.261s, pg runtime 1.161s, speedup 0.040x
40, opt runtime 1.020s, model runtime 25.952s, pg runtime 1.125s, speedup 0.043x
====================
JOB best validation speedup epoch: 0, train speedup 0.467, test speedup 0.328, val speedup 0.490
TPCH best validation speedup epoch: 0, train speedup 0.467, test speedup 0.563, val speedup 0.490
TPCH Skew best validation speedup epoch: 0, train speedup 0.467, test speedup 0.548, val speedup 0.490
execution cost 0:18:46.476969
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.701507, and there are 32798 training samples
in channel 9
JOB test speedup 0.34417035044613586
TPCH test speedup 0.5616263116828486
TPCH skew test speedup 0.548119401140759
Epoch 0/50 |loss: 0.393792| train set 0.471x speedup, test set 0.548x speedup, val set 0.492x speedup, step: 1, train time 22.37 s
JOB test speedup 0.3450537475779404
TPCH test speedup 0.5649627014143781
TPCH skew test speedup 0.5521002485423714
Epoch 1/50 |loss: 0.287585| train set 0.465x speedup, test set 0.552x speedup, val set 0.491x speedup, step: 2, train time 21.28 s
JOB test speedup 0.353463202723569
TPCH test speedup 0.5439760428792095
TPCH skew test speedup 0.5312814347831316
Epoch 2/50 |loss: 0.248679| train set 0.459x speedup, test set 0.531x speedup, val set 0.476x speedup, step: 3, train time 21.19 s
JOB test speedup 0.28413627679282205
TPCH test speedup 0.5472565023219353
TPCH skew test speedup 0.5360406169856244
Epoch 3/50 |loss: 0.227369| train set 0.449x speedup, test set 0.536x speedup, val set 0.470x speedup, step: 4, train time 21.24 s
JOB test speedup 0.2793605769685362
TPCH test speedup 0.5514562930100169
TPCH skew test speedup 0.5324194196528587
Epoch 4/50 |loss: 0.209987| train set 0.448x speedup, test set 0.532x speedup, val set 0.478x speedup, step: 5, train time 21.20 s
JOB test speedup 0.27974874617821543
TPCH test speedup 0.538202052365529
TPCH skew test speedup 0.5335583234457504
Epoch 5/50 |loss: 0.194538| train set 0.446x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 6, train time 21.10 s
JOB test speedup 0.29444981058839964
TPCH test speedup 0.5447502949079367
TPCH skew test speedup 0.5342194352838711
Epoch 6/50 |loss: 0.184023| train set 0.449x speedup, test set 0.534x speedup, val set 0.474x speedup, step: 7, train time 21.51 s
JOB test speedup 0.2893734509495905
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 7/50 |loss: 0.174506| train set 0.444x speedup, test set 0.531x speedup, val set 0.465x speedup, step: 8, train time 21.30 s
JOB test speedup 0.3192281399055344
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 8/50 |loss: 0.166333| train set 0.447x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 9, train time 21.27 s
JOB test speedup 0.2982171988289043
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 9/50 |loss: 0.159145| train set 0.447x speedup, test set 0.529x speedup, val set 0.470x speedup, step: 10, train time 21.17 s
JOB test speedup 0.29000564161101905
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 10/50 |loss: 0.153303| train set 0.446x speedup, test set 0.530x speedup, val set 0.468x speedup, step: 11, train time 21.31 s
JOB test speedup 0.28452757417215613
TPCH test speedup 0.5402610036085624
TPCH skew test speedup 0.5332052532093267
Epoch 11/50 |loss: 0.149356| train set 0.444x speedup, test set 0.533x speedup, val set 0.467x speedup, step: 12, train time 21.29 s
JOB test speedup 0.2896264234673833
TPCH test speedup 0.5558915849639101
TPCH skew test speedup 0.5373883724539341
Epoch 12/50 |loss: 0.140835| train set 0.452x speedup, test set 0.537x speedup, val set 0.481x speedup, step: 13, train time 21.46 s
JOB test speedup 0.27978766265807764
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 13/50 |loss: 0.140902| train set 0.444x speedup, test set 0.531x speedup, val set 0.469x speedup, step: 14, train time 21.71 s
JOB test speedup 0.31285095777163846
TPCH test speedup 0.5528641121561196
TPCH skew test speedup 0.541331606418527
Epoch 14/50 |loss: 0.137610| train set 0.450x speedup, test set 0.541x speedup, val set 0.480x speedup, step: 15, train time 21.41 s
JOB test speedup 0.2890578431294945
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 15/50 |loss: 0.131973| train set 0.445x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 16, train time 21.67 s
JOB test speedup 0.2824660841255672
TPCH test speedup 0.5385430467522617
TPCH skew test speedup 0.5296565719886462
Epoch 16/50 |loss: 0.127775| train set 0.442x speedup, test set 0.530x speedup, val set 0.471x speedup, step: 17, train time 21.40 s
JOB test speedup 0.26937619001134155
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 17/50 |loss: 0.130812| train set 0.447x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 18, train time 21.57 s
JOB test speedup 0.2891691135675578
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 18/50 |loss: 0.122819| train set 0.442x speedup, test set 0.533x speedup, val set 0.472x speedup, step: 19, train time 21.38 s
JOB test speedup 0.283226865633641
TPCH test speedup 0.5302156707035378
TPCH skew test speedup 0.5255888159108917
Epoch 19/50 |loss: 0.122026| train set 0.445x speedup, test set 0.526x speedup, val set 0.478x speedup, step: 20, train time 21.44 s
JOB test speedup 0.2814518717593115
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 20/50 |loss: 0.122857| train set 0.441x speedup, test set 0.529x speedup, val set 0.467x speedup, step: 21, train time 21.39 s
JOB test speedup 0.27519227227514065
TPCH test speedup 0.5419323772472743
TPCH skew test speedup 0.5316743305935534
Epoch 21/50 |loss: 0.119814| train set 0.442x speedup, test set 0.532x speedup, val set 0.471x speedup, step: 22, train time 21.99 s
JOB test speedup 0.2912420942180959
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 22/50 |loss: 0.116002| train set 0.446x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 23, train time 21.32 s
JOB test speedup 0.3081613565757571
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 23/50 |loss: 0.115039| train set 0.444x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 24, train time 21.37 s
JOB test speedup 0.29007853498428726
TPCH test speedup 0.5299268692872077
TPCH skew test speedup 0.529472668765604
Epoch 24/50 |loss: 0.112147| train set 0.445x speedup, test set 0.529x speedup, val set 0.473x speedup, step: 25, train time 21.36 s
JOB test speedup 0.2828642679687019
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 25/50 |loss: 0.108799| train set 0.382x speedup, test set 0.534x speedup, val set 0.470x speedup, step: 26, train time 21.57 s
JOB test speedup 0.29477888881822917
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 26/50 |loss: 0.110572| train set 0.443x speedup, test set 0.535x speedup, val set 0.469x speedup, step: 27, train time 21.25 s
JOB test speedup 0.29347067133408095
TPCH test speedup 0.561987782476041
TPCH skew test speedup 0.5443566580198675
Epoch 27/50 |loss: 0.108883| train set 0.445x speedup, test set 0.544x speedup, val set 0.474x speedup, step: 28, train time 21.65 s
JOB test speedup 0.2955915923169881
TPCH test speedup 0.5382451050251911
TPCH skew test speedup 0.5336010006542554
Epoch 28/50 |loss: 0.106175| train set 0.442x speedup, test set 0.534x speedup, val set 0.470x speedup, step: 29, train time 21.42 s
JOB test speedup 0.29022734643088927
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 29/50 |loss: 0.106563| train set 0.442x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 30, train time 21.40 s
JOB test speedup 0.2949285006840427
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 30/50 |loss: 0.105402| train set 0.441x speedup, test set 0.529x speedup, val set 0.467x speedup, step: 31, train time 21.28 s
JOB test speedup 0.2775322193136201
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 31/50 |loss: 0.103306| train set 0.440x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 32, train time 21.25 s
JOB test speedup 0.2816789577831722
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 32/50 |loss: 0.102564| train set 0.443x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 33, train time 21.50 s
JOB test speedup 0.28346035903499667
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 33/50 |loss: 0.103798| train set 0.441x speedup, test set 0.531x speedup, val set 0.469x speedup, step: 34, train time 21.31 s
JOB test speedup 0.29086445462712035
TPCH test speedup 0.5448222720772588
TPCH skew test speedup 0.5341766590976645
Epoch 34/50 |loss: 0.100259| train set 0.445x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 35, train time 21.47 s
JOB test speedup 0.29366135153553274
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 35/50 |loss: 0.101606| train set 0.441x speedup, test set 0.531x speedup, val set 0.469x speedup, step: 36, train time 21.28 s
JOB test speedup 0.28843413268681006
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 36/50 |loss: 0.096016| train set 0.381x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 37, train time 21.39 s
JOB test speedup 0.29344814815540066
TPCH test speedup 0.5514562930100169
TPCH skew test speedup 0.5324194196528587
Epoch 37/50 |loss: 0.098633| train set 0.446x speedup, test set 0.532x speedup, val set 0.484x speedup, step: 38, train time 21.39 s
JOB test speedup 0.2816789577831722
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 38/50 |loss: 0.098207| train set 0.443x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 39, train time 21.60 s
JOB test speedup 0.2755477050399624
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 39/50 |loss: 0.096181| train set 0.442x speedup, test set 0.530x speedup, val set 0.467x speedup, step: 40, train time 21.21 s
JOB test speedup 0.2792749914530822
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 40/50 |loss: 0.098359| train set 0.382x speedup, test set 0.530x speedup, val set 0.467x speedup, step: 41, train time 21.40 s
JOB test speedup 0.2851534073251373
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 41/50 |loss: 0.095047| train set 0.440x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 42, train time 21.27 s
JOB test speedup 0.3080758365203456
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 42/50 |loss: 0.096838| train set 0.445x speedup, test set 0.530x speedup, val set 0.470x speedup, step: 43, train time 21.37 s
JOB test speedup 0.28874308094610124
TPCH test speedup 0.5482913547438737
TPCH skew test speedup 0.5362290704676196
Epoch 43/50 |loss: 0.090860| train set 0.444x speedup, test set 0.536x speedup, val set 0.474x speedup, step: 44, train time 21.27 s
JOB test speedup 0.28700767247469344
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 44/50 |loss: 0.093376| train set 0.441x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 45, train time 21.29 s
JOB test speedup 0.2895978906235511
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 45/50 |loss: 0.094257| train set 0.443x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 46, train time 21.42 s
JOB test speedup 0.27110215422915296
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 46/50 |loss: 0.093159| train set 0.443x speedup, test set 0.535x speedup, val set 0.469x speedup, step: 47, train time 21.31 s
JOB test speedup 0.2773469808856856
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 47/50 |loss: 0.092724| train set 0.380x speedup, test set 0.531x speedup, val set 0.471x speedup, step: 48, train time 21.26 s
JOB test speedup 0.30197775274248084
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 48/50 |loss: 0.092642| train set 0.444x speedup, test set 0.531x speedup, val set 0.475x speedup, step: 49, train time 21.31 s
JOB test speedup 0.29947388266370134
TPCH test speedup 0.5482913547438737
TPCH skew test speedup 0.5362290704676196
Epoch 49/50 |loss: 0.089875| train set 0.443x speedup, test set 0.536x speedup, val set 0.474x speedup, step: 50, train time 21.39 s
Training per epoch cost 21.399 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 3.696s, pg runtime 0.081s, speedup 0.022x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.207s, model runtime 2.474s, pg runtime 0.207s, speedup 0.084x
04, opt runtime 0.920s, model runtime 7.166s, pg runtime 1.680s, speedup 0.234x
05, opt runtime 2.262s, model runtime 4.922s, pg runtime 3.549s, speedup 0.721x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 4.223s, model runtime 20.980s, pg runtime 18.741s, speedup 0.893x
09, opt runtime 2.324s, model runtime 19.354s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.846s, model runtime 28.458s, pg runtime 3.507s, speedup 0.123x
11, opt runtime 4.443s, model runtime 35.398s, pg runtime 13.945s, speedup 0.394x
12, opt runtime 0.517s, model runtime 13.147s, pg runtime 0.738s, speedup 0.056x
13, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 2.238s, model runtime 6.891s, pg runtime 2.718s, speedup 0.394x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.962s, model runtime 10.410s, pg runtime 6.876s, speedup 0.661x
19, opt runtime 1.923s, model runtime 16.009s, pg runtime 3.540s, speedup 0.221x
20, opt runtime 0.064s, model runtime 8.246s, pg runtime 0.089s, speedup 0.011x
21, opt runtime 0.953s, model runtime 5.561s, pg runtime 4.730s, speedup 0.851x
22, opt runtime 0.093s, model runtime 19.608s, pg runtime 2.389s, speedup 0.122x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
25, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
26, opt runtime 0.161s, model runtime 5.658s, pg runtime 0.161s, speedup 0.028x
27, opt runtime 0.068s, model runtime 4.849s, pg runtime 0.239s, speedup 0.049x
28, opt runtime 0.157s, model runtime 9.917s, pg runtime 0.157s, speedup 0.016x
29, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
30, opt runtime 1.646s, model runtime 26.899s, pg runtime 4.855s, speedup 0.180x
31, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
32, opt runtime 4.513s, model runtime 139.474s, pg runtime 6.444s, speedup 0.046x
33, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 76.631s, pg runtime 112.305s, speedup 1.466x
04, opt runtime 30.267s, model runtime 83.433s, pg runtime 100.885s, speedup 1.209x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 25.597s, model runtime 68.287s, pg runtime 27.136s, speedup 0.397x
07, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
08, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
09, opt runtime 5.543s, model runtime 17.957s, pg runtime 5.543s, speedup 0.309x
10, opt runtime 5.237s, model runtime 8.695s, pg runtime 5.237s, speedup 0.602x
11, opt runtime 23.205s, model runtime 116.949s, pg runtime 87.340s, speedup 0.747x
12, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
13, opt runtime 3.332s, model runtime 132.485s, pg runtime 21.298s, speedup 0.161x
14, opt runtime 3.258s, model runtime 135.383s, pg runtime 18.141s, speedup 0.134x
15, opt runtime 53.298s, model runtime 641.154s, pg runtime 148.707s, speedup 0.232x
16, opt runtime 53.440s, model runtime 627.477s, pg runtime 140.742s, speedup 0.224x
17, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
18, opt runtime 6.149s, model runtime 191.745s, pg runtime 30.760s, speedup 0.160x
19, opt runtime 1.347s, model runtime 35.669s, pg runtime 1.438s, speedup 0.040x
20, opt runtime 1.428s, model runtime 31.736s, pg runtime 1.428s, speedup 0.045x
21, opt runtime 25.034s, model runtime 79.463s, pg runtime 25.034s, speedup 0.315x
22, opt runtime 20.897s, model runtime 80.735s, pg runtime 23.708s, speedup 0.294x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 6.234s, model runtime 94.759s, pg runtime 32.540s, speedup 0.343x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.423s, model runtime 29.238s, pg runtime 1.423s, speedup 0.049x
27, opt runtime 6.789s, model runtime 14.386s, pg runtime 7.799s, speedup 0.542x
28, opt runtime 7.199s, model runtime 11.999s, pg runtime 7.619s, speedup 0.635x
29, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
30, opt runtime 5.539s, model runtime 26.078s, pg runtime 5.539s, speedup 0.212x
31, opt runtime 24.840s, model runtime 725.331s, pg runtime 626.529s, speedup 0.864x
32, opt runtime 24.662s, model runtime 686.632s, pg runtime 613.999s, speedup 0.894x
33, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
34, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
37, opt runtime 19.707s, model runtime 278.671s, pg runtime 19.707s, speedup 0.071x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 1.088s, model runtime 25.685s, pg runtime 1.206s, speedup 0.047x
40, opt runtime 1.086s, model runtime 28.439s, pg runtime 1.181s, speedup 0.042x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 77.086s, pg runtime 123.411s, speedup 1.601x
04, opt runtime 31.996s, model runtime 75.860s, pg runtime 120.854s, speedup 1.593x
05, opt runtime 14.023s, model runtime 69.969s, pg runtime 31.705s, speedup 0.453x
06, opt runtime 30.304s, model runtime 69.001s, pg runtime 30.711s, speedup 0.445x
07, opt runtime 6.123s, model runtime 188.404s, pg runtime 14.081s, speedup 0.075x
08, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
09, opt runtime 8.207s, model runtime 20.040s, pg runtime 8.207s, speedup 0.410x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
12, opt runtime 24.103s, model runtime 105.535s, pg runtime 75.612s, speedup 0.716x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
15, opt runtime 52.135s, model runtime 634.708s, pg runtime 102.039s, speedup 0.161x
16, opt runtime 54.696s, model runtime 674.445s, pg runtime 98.172s, speedup 0.146x
17, opt runtime 5.629s, model runtime 166.652s, pg runtime 42.976s, speedup 0.258x
18, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.308s, model runtime 42.586s, pg runtime 1.528s, speedup 0.036x
21, opt runtime 26.669s, model runtime 84.917s, pg runtime 30.614s, speedup 0.361x
22, opt runtime 28.744s, model runtime 82.073s, pg runtime 29.665s, speedup 0.361x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.420s, model runtime 32.667s, pg runtime 1.420s, speedup 0.043x
27, opt runtime 7.419s, model runtime 25.577s, pg runtime 7.675s, speedup 0.300x
28, opt runtime 7.312s, model runtime 11.686s, pg runtime 7.655s, speedup 0.655x
29, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
30, opt runtime 5.271s, model runtime 26.816s, pg runtime 5.271s, speedup 0.197x
31, opt runtime 24.465s, model runtime 672.689s, pg runtime 644.779s, speedup 0.959x
32, opt runtime 25.478s, model runtime 721.211s, pg runtime 642.079s, speedup 0.890x
33, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 32.492s, model runtime 298.993s, pg runtime 32.492s, speedup 0.109x
39, opt runtime 1.116s, model runtime 25.416s, pg runtime 1.161s, speedup 0.046x
40, opt runtime 1.020s, model runtime 30.737s, pg runtime 1.125s, speedup 0.037x
====================
JOB best validation speedup epoch: 0, train speedup 0.471, test speedup 0.344, val speedup 0.492
TPCH best validation speedup epoch: 0, train speedup 0.471, test speedup 0.562, val speedup 0.492
TPCH Skew best validation speedup epoch: 0, train speedup 0.471, test speedup 0.548, val speedup 0.492
execution cost 0:18:57.469071
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.738526, and there are 32798 training samples
in channel 9
JOB test speedup 0.3534025479487742
TPCH test speedup 0.5630143113638371
TPCH skew test speedup 0.5482873848307374
Epoch 0/50 |loss: 0.393638| train set 0.466x speedup, test set 0.548x speedup, val set 0.493x speedup, step: 1, train time 22.60 s
JOB test speedup 0.3472921781689029
TPCH test speedup 0.5650101420575128
TPCH skew test speedup 0.5521459436072942
Epoch 1/50 |loss: 0.285047| train set 0.465x speedup, test set 0.552x speedup, val set 0.492x speedup, step: 2, train time 21.21 s
JOB test speedup 0.34827583984462107
TPCH test speedup 0.5507165485085685
TPCH skew test speedup 0.540450354404943
Epoch 2/50 |loss: 0.249292| train set 0.458x speedup, test set 0.540x speedup, val set 0.477x speedup, step: 3, train time 21.20 s
JOB test speedup 0.2870044353305691
TPCH test speedup 0.5561592945460425
TPCH skew test speedup 0.5432428794791764
Epoch 3/50 |loss: 0.225170| train set 0.456x speedup, test set 0.543x speedup, val set 0.480x speedup, step: 4, train time 21.15 s
JOB test speedup 0.291827628362365
TPCH test speedup 0.5555282746515641
TPCH skew test speedup 0.5414053009920894
Epoch 4/50 |loss: 0.205916| train set 0.449x speedup, test set 0.541x speedup, val set 0.481x speedup, step: 5, train time 21.46 s
JOB test speedup 0.28895227770875104
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 5/50 |loss: 0.192288| train set 0.448x speedup, test set 0.529x speedup, val set 0.465x speedup, step: 6, train time 20.95 s
JOB test speedup 0.2937996867923319
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 6/50 |loss: 0.182491| train set 0.447x speedup, test set 0.538x speedup, val set 0.474x speedup, step: 7, train time 21.05 s
JOB test speedup 0.28809608098889855
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 7/50 |loss: 0.171545| train set 0.444x speedup, test set 0.531x speedup, val set 0.467x speedup, step: 8, train time 21.20 s
JOB test speedup 0.29015118026346337
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 8/50 |loss: 0.162743| train set 0.445x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 9, train time 20.92 s
JOB test speedup 0.30190524839028215
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 9/50 |loss: 0.157504| train set 0.448x speedup, test set 0.533x speedup, val set 0.473x speedup, step: 10, train time 20.87 s
JOB test speedup 0.2829914031894979
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 10/50 |loss: 0.149683| train set 0.450x speedup, test set 0.530x speedup, val set 0.478x speedup, step: 11, train time 20.90 s
JOB test speedup 0.28032722234612817
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 11/50 |loss: 0.145664| train set 0.447x speedup, test set 0.538x speedup, val set 0.469x speedup, step: 12, train time 20.97 s
JOB test speedup 0.2895313332497746
TPCH test speedup 0.5479379078229253
TPCH skew test speedup 0.5402286218543056
Epoch 12/50 |loss: 0.137557| train set 0.450x speedup, test set 0.540x speedup, val set 0.478x speedup, step: 13, train time 21.16 s
JOB test speedup 0.31163488404384737
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 13/50 |loss: 0.138746| train set 0.446x speedup, test set 0.535x speedup, val set 0.471x speedup, step: 14, train time 21.17 s
JOB test speedup 0.30622198125745553
TPCH test speedup 0.5478932906676426
TPCH skew test speedup 0.5401848779561027
Epoch 14/50 |loss: 0.135477| train set 0.449x speedup, test set 0.540x speedup, val set 0.479x speedup, step: 15, train time 21.18 s
JOB test speedup 0.2906545958550022
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 15/50 |loss: 0.127759| train set 0.445x speedup, test set 0.538x speedup, val set 0.472x speedup, step: 16, train time 21.17 s
JOB test speedup 0.3022410325614935
TPCH test speedup 0.5382451050251911
TPCH skew test speedup 0.5336010006542554
Epoch 16/50 |loss: 0.125308| train set 0.445x speedup, test set 0.534x speedup, val set 0.474x speedup, step: 17, train time 21.04 s
JOB test speedup 0.2810968713503515
TPCH test speedup 0.5448222720772588
TPCH skew test speedup 0.5341766590976645
Epoch 17/50 |loss: 0.125849| train set 0.447x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 18, train time 21.05 s
JOB test speedup 0.27965790350112885
TPCH test speedup 0.5299268692872077
TPCH skew test speedup 0.529472668765604
Epoch 18/50 |loss: 0.119750| train set 0.442x speedup, test set 0.529x speedup, val set 0.471x speedup, step: 19, train time 21.25 s
JOB test speedup 0.2789549198558123
TPCH test speedup 0.5436281358874279
TPCH skew test speedup 0.5352072510059432
Epoch 19/50 |loss: 0.120857| train set 0.443x speedup, test set 0.535x speedup, val set 0.469x speedup, step: 20, train time 21.02 s
JOB test speedup 0.2765719921928364
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 20/50 |loss: 0.119257| train set 0.442x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 21, train time 21.17 s
JOB test speedup 0.28771072815039334
TPCH test speedup 0.5495877851867326
TPCH skew test speedup 0.5397070637116423
Epoch 21/50 |loss: 0.115698| train set 0.443x speedup, test set 0.540x speedup, val set 0.469x speedup, step: 22, train time 21.54 s
JOB test speedup 0.2837626582966598
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 22/50 |loss: 0.112228| train set 0.444x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 23, train time 21.08 s
JOB test speedup 0.2782525745895464
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 23/50 |loss: 0.112587| train set 0.444x speedup, test set 0.538x speedup, val set 0.468x speedup, step: 24, train time 21.14 s
JOB test speedup 0.2885875134439776
TPCH test speedup 0.5339789394517845
TPCH skew test speedup 0.5343437142625925
Epoch 24/50 |loss: 0.110491| train set 0.448x speedup, test set 0.534x speedup, val set 0.484x speedup, step: 25, train time 21.10 s
JOB test speedup 0.2686228508680267
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 25/50 |loss: 0.108186| train set 0.381x speedup, test set 0.538x speedup, val set 0.468x speedup, step: 26, train time 21.16 s
JOB test speedup 0.2810906402021174
TPCH test speedup 0.5449220510970488
TPCH skew test speedup 0.5389200234821806
Epoch 26/50 |loss: 0.110150| train set 0.443x speedup, test set 0.539x speedup, val set 0.469x speedup, step: 27, train time 21.14 s
JOB test speedup 0.282158785312724
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 27/50 |loss: 0.106842| train set 0.443x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 28, train time 21.15 s
JOB test speedup 0.2840758098198761
TPCH test speedup 0.5382451050251911
TPCH skew test speedup 0.5336010006542554
Epoch 28/50 |loss: 0.101365| train set 0.442x speedup, test set 0.534x speedup, val set 0.470x speedup, step: 29, train time 21.08 s
JOB test speedup 0.279399459094209
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 29/50 |loss: 0.102957| train set 0.443x speedup, test set 0.531x speedup, val set 0.467x speedup, step: 30, train time 21.24 s
JOB test speedup 0.267114520818939
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 30/50 |loss: 0.102043| train set 0.441x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 31, train time 21.38 s
JOB test speedup 0.27033011636633425
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 31/50 |loss: 0.101671| train set 0.440x speedup, test set 0.529x speedup, val set 0.465x speedup, step: 32, train time 21.36 s
JOB test speedup 0.2744218113199599
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 32/50 |loss: 0.099509| train set 0.443x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 33, train time 21.40 s
JOB test speedup 0.2859340619611598
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 33/50 |loss: 0.102732| train set 0.442x speedup, test set 0.535x speedup, val set 0.471x speedup, step: 34, train time 21.28 s
JOB test speedup 0.2815092731021018
TPCH test speedup 0.5439760428792095
TPCH skew test speedup 0.5312814347831316
Epoch 34/50 |loss: 0.099439| train set 0.441x speedup, test set 0.531x speedup, val set 0.465x speedup, step: 35, train time 21.32 s
JOB test speedup 0.27742966600926056
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 35/50 |loss: 0.097106| train set 0.441x speedup, test set 0.535x speedup, val set 0.471x speedup, step: 36, train time 21.42 s
JOB test speedup 0.267971508965147
TPCH test speedup 0.5478932906676426
TPCH skew test speedup 0.5401848779561027
Epoch 36/50 |loss: 0.094857| train set 0.380x speedup, test set 0.540x speedup, val set 0.473x speedup, step: 37, train time 21.37 s
JOB test speedup 0.2772844317048027
TPCH test speedup 0.5514562930100169
TPCH skew test speedup 0.5324194196528587
Epoch 37/50 |loss: 0.094983| train set 0.446x speedup, test set 0.532x speedup, val set 0.480x speedup, step: 38, train time 21.20 s
JOB test speedup 0.2730781979812105
TPCH test speedup 0.5339365665369223
TPCH skew test speedup 0.5343009181722574
Epoch 38/50 |loss: 0.096118| train set 0.381x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 39, train time 21.31 s
JOB test speedup 0.26721535593282486
TPCH test speedup 0.5339789394517845
TPCH skew test speedup 0.5343437142625925
Epoch 39/50 |loss: 0.094671| train set 0.442x speedup, test set 0.534x speedup, val set 0.466x speedup, step: 40, train time 21.22 s
JOB test speedup 0.27742966600926056
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 40/50 |loss: 0.094169| train set 0.382x speedup, test set 0.530x speedup, val set 0.470x speedup, step: 41, train time 21.33 s
JOB test speedup 0.2981448973466492
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 41/50 |loss: 0.092904| train set 0.380x speedup, test set 0.529x speedup, val set 0.465x speedup, step: 42, train time 21.26 s
JOB test speedup 0.2801555387073621
TPCH test speedup 0.5302156707035378
TPCH skew test speedup 0.5255888159108917
Epoch 42/50 |loss: 0.092560| train set 0.442x speedup, test set 0.526x speedup, val set 0.468x speedup, step: 43, train time 21.28 s
JOB test speedup 0.2737818070307423
TPCH test speedup 0.562034724798307
TPCH skew test speedup 0.5444010802121393
Epoch 43/50 |loss: 0.090340| train set 0.444x speedup, test set 0.544x speedup, val set 0.481x speedup, step: 44, train time 21.39 s
JOB test speedup 0.27656272799197285
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 44/50 |loss: 0.091638| train set 0.441x speedup, test set 0.535x speedup, val set 0.468x speedup, step: 45, train time 21.31 s
JOB test speedup 0.263209216936507
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 45/50 |loss: 0.091550| train set 0.443x speedup, test set 0.529x speedup, val set 0.471x speedup, step: 46, train time 21.50 s
JOB test speedup 0.2709906864622614
TPCH test speedup 0.5452274327212309
TPCH skew test speedup 0.5348968618985681
Epoch 46/50 |loss: 0.091263| train set 0.442x speedup, test set 0.535x speedup, val set 0.467x speedup, step: 47, train time 21.39 s
JOB test speedup 0.2696749303237458
TPCH test speedup 0.5478932906676426
TPCH skew test speedup 0.5401848779561027
Epoch 47/50 |loss: 0.090946| train set 0.381x speedup, test set 0.540x speedup, val set 0.473x speedup, step: 48, train time 21.12 s
JOB test speedup 0.2671441375207883
TPCH test speedup 0.548701693369425
TPCH skew test speedup 0.5369548219805568
Epoch 48/50 |loss: 0.090201| train set 0.445x speedup, test set 0.537x speedup, val set 0.477x speedup, step: 49, train time 21.45 s
JOB test speedup 0.2709906864622614
TPCH test speedup 0.562034724798307
TPCH skew test speedup 0.5444010802121393
Epoch 49/50 |loss: 0.088863| train set 0.443x speedup, test set 0.544x speedup, val set 0.476x speedup, step: 50, train time 21.46 s
Training per epoch cost 21.241 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 3.696s, pg runtime 0.081s, speedup 0.022x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.207s, model runtime 2.474s, pg runtime 0.207s, speedup 0.084x
04, opt runtime 0.920s, model runtime 7.166s, pg runtime 1.680s, speedup 0.234x
05, opt runtime 2.262s, model runtime 4.922s, pg runtime 3.549s, speedup 0.721x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 4.223s, model runtime 20.836s, pg runtime 18.741s, speedup 0.899x
09, opt runtime 2.324s, model runtime 19.354s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.846s, model runtime 28.458s, pg runtime 3.507s, speedup 0.123x
11, opt runtime 4.443s, model runtime 35.398s, pg runtime 13.945s, speedup 0.394x
12, opt runtime 0.517s, model runtime 13.147s, pg runtime 0.738s, speedup 0.056x
13, opt runtime 2.413s, model runtime 7.391s, pg runtime 57.198s, speedup 7.739x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 2.238s, model runtime 6.891s, pg runtime 2.718s, speedup 0.394x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.962s, model runtime 10.410s, pg runtime 6.876s, speedup 0.661x
19, opt runtime 1.923s, model runtime 7.809s, pg runtime 3.540s, speedup 0.453x
20, opt runtime 0.064s, model runtime 8.246s, pg runtime 0.089s, speedup 0.011x
21, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
22, opt runtime 0.093s, model runtime 19.608s, pg runtime 2.389s, speedup 0.122x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
25, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
26, opt runtime 0.161s, model runtime 5.658s, pg runtime 0.161s, speedup 0.028x
27, opt runtime 0.068s, model runtime 4.849s, pg runtime 0.239s, speedup 0.049x
28, opt runtime 0.157s, model runtime 9.917s, pg runtime 0.157s, speedup 0.016x
29, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
30, opt runtime 1.646s, model runtime 26.899s, pg runtime 4.855s, speedup 0.180x
31, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
32, opt runtime 4.513s, model runtime 139.474s, pg runtime 6.444s, speedup 0.046x
33, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 76.631s, pg runtime 112.305s, speedup 1.466x
04, opt runtime 30.267s, model runtime 83.433s, pg runtime 100.885s, speedup 1.209x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 25.597s, model runtime 68.287s, pg runtime 27.136s, speedup 0.397x
07, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
08, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
09, opt runtime 5.543s, model runtime 17.957s, pg runtime 5.543s, speedup 0.309x
10, opt runtime 5.237s, model runtime 8.695s, pg runtime 5.237s, speedup 0.602x
11, opt runtime 23.205s, model runtime 116.949s, pg runtime 87.340s, speedup 0.747x
12, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
13, opt runtime 3.332s, model runtime 132.485s, pg runtime 21.298s, speedup 0.161x
14, opt runtime 3.258s, model runtime 135.383s, pg runtime 18.141s, speedup 0.134x
15, opt runtime 53.298s, model runtime 730.999s, pg runtime 148.707s, speedup 0.203x
16, opt runtime 53.440s, model runtime 695.290s, pg runtime 140.742s, speedup 0.202x
17, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
18, opt runtime 6.149s, model runtime 191.745s, pg runtime 30.760s, speedup 0.160x
19, opt runtime 1.347s, model runtime 35.669s, pg runtime 1.438s, speedup 0.040x
20, opt runtime 1.428s, model runtime 31.736s, pg runtime 1.428s, speedup 0.045x
21, opt runtime 25.034s, model runtime 79.463s, pg runtime 25.034s, speedup 0.315x
22, opt runtime 20.897s, model runtime 80.735s, pg runtime 23.708s, speedup 0.294x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 6.234s, model runtime 94.759s, pg runtime 32.540s, speedup 0.343x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.423s, model runtime 29.238s, pg runtime 1.423s, speedup 0.049x
27, opt runtime 6.789s, model runtime 14.386s, pg runtime 7.799s, speedup 0.542x
28, opt runtime 7.199s, model runtime 11.999s, pg runtime 7.619s, speedup 0.635x
29, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
30, opt runtime 5.539s, model runtime 26.078s, pg runtime 5.539s, speedup 0.212x
31, opt runtime 24.840s, model runtime 626.529s, pg runtime 626.529s, speedup 1.000x
32, opt runtime 24.662s, model runtime 613.999s, pg runtime 613.999s, speedup 1.000x
33, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
34, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
37, opt runtime 19.707s, model runtime 278.671s, pg runtime 19.707s, speedup 0.071x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 1.088s, model runtime 26.133s, pg runtime 1.206s, speedup 0.046x
40, opt runtime 1.086s, model runtime 24.895s, pg runtime 1.181s, speedup 0.047x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 77.086s, pg runtime 123.411s, speedup 1.601x
04, opt runtime 31.996s, model runtime 75.860s, pg runtime 120.854s, speedup 1.593x
05, opt runtime 14.023s, model runtime 69.969s, pg runtime 31.705s, speedup 0.453x
06, opt runtime 30.304s, model runtime 69.001s, pg runtime 30.711s, speedup 0.445x
07, opt runtime 6.123s, model runtime 188.404s, pg runtime 14.081s, speedup 0.075x
08, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
09, opt runtime 8.207s, model runtime 20.040s, pg runtime 8.207s, speedup 0.410x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
12, opt runtime 24.103s, model runtime 105.535s, pg runtime 75.612s, speedup 0.716x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
15, opt runtime 52.135s, model runtime 689.404s, pg runtime 102.039s, speedup 0.148x
16, opt runtime 54.696s, model runtime 730.826s, pg runtime 98.172s, speedup 0.134x
17, opt runtime 5.629s, model runtime 166.652s, pg runtime 42.976s, speedup 0.258x
18, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.308s, model runtime 42.586s, pg runtime 1.528s, speedup 0.036x
21, opt runtime 26.669s, model runtime 84.917s, pg runtime 30.614s, speedup 0.361x
22, opt runtime 28.744s, model runtime 82.073s, pg runtime 29.665s, speedup 0.361x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.420s, model runtime 32.667s, pg runtime 1.420s, speedup 0.043x
27, opt runtime 7.419s, model runtime 25.577s, pg runtime 7.675s, speedup 0.300x
28, opt runtime 7.312s, model runtime 11.686s, pg runtime 7.655s, speedup 0.655x
29, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
30, opt runtime 5.271s, model runtime 26.816s, pg runtime 5.271s, speedup 0.197x
31, opt runtime 24.465s, model runtime 644.779s, pg runtime 644.779s, speedup 1.000x
32, opt runtime 25.478s, model runtime 642.079s, pg runtime 642.079s, speedup 1.000x
33, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 32.492s, model runtime 298.993s, pg runtime 32.492s, speedup 0.109x
39, opt runtime 1.116s, model runtime 25.321s, pg runtime 1.161s, speedup 0.046x
40, opt runtime 1.020s, model runtime 24.659s, pg runtime 1.125s, speedup 0.046x
====================
JOB best validation speedup epoch: 0, train speedup 0.466, test speedup 0.353, val speedup 0.493
TPCH best validation speedup epoch: 0, train speedup 0.466, test speedup 0.563, val speedup 0.493
TPCH Skew best validation speedup epoch: 0, train speedup 0.466, test speedup 0.548, val speedup 0.493
execution cost 0:18:49.118963
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.716055, and there are 32798 training samples
in channel 9
JOB test speedup 0.33084835632667053
TPCH test speedup 0.5759806581609983
TPCH skew test speedup 0.5566904456214934
Epoch 0/50 |loss: 0.394148| train set 0.476x speedup, test set 0.557x speedup, val set 0.501x speedup, step: 1, train time 22.31 s
JOB test speedup 0.31784328190574024
TPCH test speedup 0.5553549079506489
TPCH skew test speedup 0.5397070637116423
Epoch 1/50 |loss: 0.285247| train set 0.458x speedup, test set 0.540x speedup, val set 0.484x speedup, step: 2, train time 21.20 s
JOB test speedup 0.33067004390346394
TPCH test speedup 0.5514562930100169
TPCH skew test speedup 0.5324194196528587
Epoch 2/50 |loss: 0.246945| train set 0.460x speedup, test set 0.532x speedup, val set 0.485x speedup, step: 3, train time 21.21 s
JOB test speedup 0.28568333158320114
TPCH test speedup 0.5553090747767675
TPCH skew test speedup 0.5396634042334431
Epoch 3/50 |loss: 0.222769| train set 0.445x speedup, test set 0.540x speedup, val set 0.469x speedup, step: 4, train time 21.41 s
JOB test speedup 0.2968599578212945
TPCH test speedup 0.5515014923753417
TPCH skew test speedup 0.5324619148557869
Epoch 4/50 |loss: 0.204672| train set 0.447x speedup, test set 0.532x speedup, val set 0.476x speedup, step: 5, train time 21.20 s
JOB test speedup 0.2894219998123693
TPCH test speedup 0.5385430467522617
TPCH skew test speedup 0.5296565719886462
Epoch 5/50 |loss: 0.191782| train set 0.445x speedup, test set 0.530x speedup, val set 0.467x speedup, step: 6, train time 21.22 s
JOB test speedup 0.3045529157430027
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 6/50 |loss: 0.181983| train set 0.447x speedup, test set 0.534x speedup, val set 0.470x speedup, step: 7, train time 21.28 s
JOB test speedup 0.2945941254657692
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 7/50 |loss: 0.172715| train set 0.444x speedup, test set 0.531x speedup, val set 0.468x speedup, step: 8, train time 21.19 s
JOB test speedup 0.3138934415667441
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 8/50 |loss: 0.161968| train set 0.444x speedup, test set 0.538x speedup, val set 0.472x speedup, step: 9, train time 21.23 s
JOB test speedup 0.29918394747314453
TPCH test speedup 0.5482466800118503
TPCH skew test speedup 0.5361859718567805
Epoch 9/50 |loss: 0.157327| train set 0.449x speedup, test set 0.536x speedup, val set 0.473x speedup, step: 10, train time 21.27 s
JOB test speedup 0.2925718759638583
TPCH test speedup 0.5482913547438737
TPCH skew test speedup 0.5362290704676196
Epoch 10/50 |loss: 0.151033| train set 0.444x speedup, test set 0.536x speedup, val set 0.467x speedup, step: 11, train time 21.11 s
JOB test speedup 0.2847778457881144
TPCH test speedup 0.5448222720772588
TPCH skew test speedup 0.5341766590976645
Epoch 11/50 |loss: 0.145582| train set 0.445x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 12, train time 21.39 s
JOB test speedup 0.2820774382912956
TPCH test speedup 0.5558915849639101
TPCH skew test speedup 0.5373883724539341
Epoch 12/50 |loss: 0.137178| train set 0.451x speedup, test set 0.537x speedup, val set 0.483x speedup, step: 13, train time 21.22 s
JOB test speedup 0.30595397749571407
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 13/50 |loss: 0.137955| train set 0.446x speedup, test set 0.531x speedup, val set 0.472x speedup, step: 14, train time 21.12 s
JOB test speedup 0.30110464061796205
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 14/50 |loss: 0.134281| train set 0.447x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 15, train time 21.17 s
JOB test speedup 0.29072061954680256
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 15/50 |loss: 0.126654| train set 0.444x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 16, train time 21.12 s
JOB test speedup 0.2811595574706425
TPCH test speedup 0.538586153986052
TPCH skew test speedup 0.5296986272835744
Epoch 16/50 |loss: 0.122612| train set 0.442x speedup, test set 0.530x speedup, val set 0.471x speedup, step: 17, train time 21.18 s
JOB test speedup 0.2711859521968916
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 17/50 |loss: 0.126523| train set 0.444x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 18, train time 21.31 s
JOB test speedup 0.27605059586976105
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 18/50 |loss: 0.119082| train set 0.442x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 19, train time 21.21 s
JOB test speedup 0.2795670691851781
TPCH test speedup 0.5299268692872077
TPCH skew test speedup 0.529472668765604
Epoch 19/50 |loss: 0.120454| train set 0.446x speedup, test set 0.529x speedup, val set 0.478x speedup, step: 20, train time 21.31 s
JOB test speedup 0.2781753096167312
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 20/50 |loss: 0.119579| train set 0.441x speedup, test set 0.533x speedup, val set 0.467x speedup, step: 21, train time 21.20 s
JOB test speedup 0.27126806519307767
TPCH test speedup 0.5419323772472743
TPCH skew test speedup 0.5316743305935534
Epoch 21/50 |loss: 0.117298| train set 0.442x speedup, test set 0.532x speedup, val set 0.469x speedup, step: 22, train time 21.80 s
JOB test speedup 0.27021841381892525
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 22/50 |loss: 0.112173| train set 0.443x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 23, train time 21.32 s
JOB test speedup 0.28955785614096846
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 23/50 |loss: 0.112224| train set 0.443x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 24, train time 21.22 s
JOB test speedup 0.28671566522566877
TPCH test speedup 0.5347042793657282
TPCH skew test speedup 0.531140639848336
Epoch 24/50 |loss: 0.109701| train set 0.446x speedup, test set 0.531x speedup, val set 0.473x speedup, step: 25, train time 21.10 s
JOB test speedup 0.2761310011441589
TPCH test speedup 0.5584364729630636
TPCH skew test speedup 0.5423298438152796
Epoch 25/50 |loss: 0.106805| train set 0.443x speedup, test set 0.542x speedup, val set 0.477x speedup, step: 26, train time 21.27 s
JOB test speedup 0.28114275725719634
TPCH test speedup 0.5347042793657282
TPCH skew test speedup 0.531140639848336
Epoch 26/50 |loss: 0.108831| train set 0.443x speedup, test set 0.531x speedup, val set 0.467x speedup, step: 27, train time 21.37 s
JOB test speedup 0.2760970379117202
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 27/50 |loss: 0.105479| train set 0.445x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 28, train time 21.18 s
JOB test speedup 0.28013611920372816
TPCH test speedup 0.538586153986052
TPCH skew test speedup 0.5296986272835744
Epoch 28/50 |loss: 0.102171| train set 0.442x speedup, test set 0.530x speedup, val set 0.469x speedup, step: 29, train time 21.20 s
JOB test speedup 0.26468086868749063
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 29/50 |loss: 0.105102| train set 0.442x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 30, train time 21.21 s
JOB test speedup 0.2700411832160553
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 30/50 |loss: 0.100635| train set 0.441x speedup, test set 0.529x speedup, val set 0.467x speedup, step: 31, train time 21.32 s
JOB test speedup 0.2630590432086282
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 31/50 |loss: 0.100052| train set 0.441x speedup, test set 0.529x speedup, val set 0.467x speedup, step: 32, train time 21.31 s
JOB test speedup 0.2736623162280535
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 32/50 |loss: 0.101072| train set 0.441x speedup, test set 0.529x speedup, val set 0.470x speedup, step: 33, train time 21.35 s
JOB test speedup 0.2654995543094134
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 33/50 |loss: 0.102786| train set 0.442x speedup, test set 0.533x speedup, val set 0.469x speedup, step: 34, train time 21.08 s
JOB test speedup 0.26889133468389026
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 34/50 |loss: 0.100187| train set 0.441x speedup, test set 0.529x speedup, val set 0.470x speedup, step: 35, train time 21.21 s
JOB test speedup 0.28970603121240435
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 35/50 |loss: 0.099487| train set 0.441x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 36, train time 21.31 s
JOB test speedup 0.2750025711600468
TPCH test speedup 0.5487561110758417
TPCH skew test speedup 0.5477558923834194
Epoch 36/50 |loss: 0.094921| train set 0.384x speedup, test set 0.548x speedup, val set 0.471x speedup, step: 37, train time 21.17 s
JOB test speedup 0.2912278901038417
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 37/50 |loss: 0.095592| train set 0.444x speedup, test set 0.529x speedup, val set 0.471x speedup, step: 38, train time 21.22 s
JOB test speedup 0.26335235290713993
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 38/50 |loss: 0.096147| train set 0.380x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 39, train time 21.28 s
JOB test speedup 0.2630590432086282
TPCH test speedup 0.5302574550765656
TPCH skew test speedup 0.5256302276927668
Epoch 39/50 |loss: 0.094555| train set 0.442x speedup, test set 0.526x speedup, val set 0.465x speedup, step: 40, train time 21.32 s
JOB test speedup 0.2817511579403792
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 40/50 |loss: 0.094879| train set 0.382x speedup, test set 0.530x speedup, val set 0.467x speedup, step: 41, train time 21.31 s
JOB test speedup 0.2810649223243816
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 41/50 |loss: 0.093137| train set 0.442x speedup, test set 0.529x speedup, val set 0.467x speedup, step: 42, train time 21.15 s
JOB test speedup 0.2685855642721145
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 42/50 |loss: 0.092800| train set 0.445x speedup, test set 0.530x speedup, val set 0.470x speedup, step: 43, train time 21.21 s
JOB test speedup 0.2727631297292122
TPCH test speedup 0.562034724798307
TPCH skew test speedup 0.5444010802121393
Epoch 43/50 |loss: 0.090183| train set 0.444x speedup, test set 0.544x speedup, val set 0.473x speedup, step: 44, train time 21.27 s
JOB test speedup 0.2704649930285158
TPCH test speedup 0.562034724798307
TPCH skew test speedup 0.5444010802121393
Epoch 44/50 |loss: 0.091028| train set 0.443x speedup, test set 0.544x speedup, val set 0.471x speedup, step: 45, train time 21.26 s
JOB test speedup 0.28810302983009894
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 45/50 |loss: 0.091468| train set 0.448x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 46, train time 21.15 s
JOB test speedup 0.2666644103455338
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 46/50 |loss: 0.090152| train set 0.380x speedup, test set 0.535x speedup, val set 0.467x speedup, step: 47, train time 21.27 s
JOB test speedup 0.27317939192688584
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 47/50 |loss: 0.090826| train set 0.381x speedup, test set 0.538x speedup, val set 0.470x speedup, step: 48, train time 21.36 s
JOB test speedup 0.2989847086889811
TPCH test speedup 0.5482913547438737
TPCH skew test speedup 0.5362290704676196
Epoch 48/50 |loss: 0.088011| train set 0.443x speedup, test set 0.536x speedup, val set 0.477x speedup, step: 49, train time 21.27 s
JOB test speedup 0.2679123673220351
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 49/50 |loss: 0.088163| train set 0.441x speedup, test set 0.531x speedup, val set 0.472x speedup, step: 50, train time 21.13 s
Training per epoch cost 21.270 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 3.696s, pg runtime 0.081s, speedup 0.022x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.207s, model runtime 2.474s, pg runtime 0.207s, speedup 0.084x
04, opt runtime 0.920s, model runtime 7.166s, pg runtime 1.680s, speedup 0.234x
05, opt runtime 2.262s, model runtime 4.922s, pg runtime 3.549s, speedup 0.721x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 4.223s, model runtime 40.861s, pg runtime 18.741s, speedup 0.459x
09, opt runtime 2.324s, model runtime 22.017s, pg runtime 10.605s, speedup 0.482x
10, opt runtime 2.846s, model runtime 28.458s, pg runtime 3.507s, speedup 0.123x
11, opt runtime 4.443s, model runtime 35.398s, pg runtime 13.945s, speedup 0.394x
12, opt runtime 0.517s, model runtime 13.147s, pg runtime 0.738s, speedup 0.056x
13, opt runtime 2.413s, model runtime 11.329s, pg runtime 57.198s, speedup 5.049x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 2.238s, model runtime 6.891s, pg runtime 2.718s, speedup 0.394x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.962s, model runtime 10.410s, pg runtime 6.876s, speedup 0.661x
19, opt runtime 1.923s, model runtime 7.809s, pg runtime 3.540s, speedup 0.453x
20, opt runtime 0.064s, model runtime 8.246s, pg runtime 0.089s, speedup 0.011x
21, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
22, opt runtime 0.093s, model runtime 19.608s, pg runtime 2.389s, speedup 0.122x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
25, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
26, opt runtime 0.161s, model runtime 5.658s, pg runtime 0.161s, speedup 0.028x
27, opt runtime 0.068s, model runtime 4.849s, pg runtime 0.239s, speedup 0.049x
28, opt runtime 0.157s, model runtime 9.917s, pg runtime 0.157s, speedup 0.016x
29, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
30, opt runtime 1.646s, model runtime 26.899s, pg runtime 4.855s, speedup 0.180x
31, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
32, opt runtime 4.513s, model runtime 139.474s, pg runtime 6.444s, speedup 0.046x
33, opt runtime 2.755s, model runtime 17.369s, pg runtime 5.521s, speedup 0.318x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 76.631s, pg runtime 112.305s, speedup 1.466x
04, opt runtime 30.267s, model runtime 83.433s, pg runtime 100.885s, speedup 1.209x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 25.597s, model runtime 68.287s, pg runtime 27.136s, speedup 0.397x
07, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
08, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
09, opt runtime 5.543s, model runtime 17.957s, pg runtime 5.543s, speedup 0.309x
10, opt runtime 5.237s, model runtime 8.695s, pg runtime 5.237s, speedup 0.602x
11, opt runtime 23.205s, model runtime 116.949s, pg runtime 87.340s, speedup 0.747x
12, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
13, opt runtime 3.332s, model runtime 132.485s, pg runtime 21.298s, speedup 0.161x
14, opt runtime 3.258s, model runtime 135.383s, pg runtime 18.141s, speedup 0.134x
15, opt runtime 53.298s, model runtime 641.154s, pg runtime 148.707s, speedup 0.232x
16, opt runtime 53.440s, model runtime 627.477s, pg runtime 140.742s, speedup 0.224x
17, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
18, opt runtime 6.149s, model runtime 191.745s, pg runtime 30.760s, speedup 0.160x
19, opt runtime 1.347s, model runtime 35.669s, pg runtime 1.438s, speedup 0.040x
20, opt runtime 1.428s, model runtime 31.736s, pg runtime 1.428s, speedup 0.045x
21, opt runtime 25.034s, model runtime 79.463s, pg runtime 25.034s, speedup 0.315x
22, opt runtime 20.897s, model runtime 80.735s, pg runtime 23.708s, speedup 0.294x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 6.234s, model runtime 94.759s, pg runtime 32.540s, speedup 0.343x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.423s, model runtime 29.238s, pg runtime 1.423s, speedup 0.049x
27, opt runtime 6.789s, model runtime 14.386s, pg runtime 7.799s, speedup 0.542x
28, opt runtime 7.199s, model runtime 11.999s, pg runtime 7.619s, speedup 0.635x
29, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
30, opt runtime 5.539s, model runtime 26.078s, pg runtime 5.539s, speedup 0.212x
31, opt runtime 24.840s, model runtime 626.529s, pg runtime 626.529s, speedup 1.000x
32, opt runtime 24.662s, model runtime 613.999s, pg runtime 613.999s, speedup 1.000x
33, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
34, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
37, opt runtime 19.707s, model runtime 278.671s, pg runtime 19.707s, speedup 0.071x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 1.088s, model runtime 27.390s, pg runtime 1.206s, speedup 0.044x
40, opt runtime 1.086s, model runtime 27.596s, pg runtime 1.181s, speedup 0.043x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 77.086s, pg runtime 123.411s, speedup 1.601x
04, opt runtime 31.996s, model runtime 75.860s, pg runtime 120.854s, speedup 1.593x
05, opt runtime 14.023s, model runtime 69.969s, pg runtime 31.705s, speedup 0.453x
06, opt runtime 30.304s, model runtime 69.001s, pg runtime 30.711s, speedup 0.445x
07, opt runtime 6.123s, model runtime 188.404s, pg runtime 14.081s, speedup 0.075x
08, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
09, opt runtime 8.207s, model runtime 20.040s, pg runtime 8.207s, speedup 0.410x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
12, opt runtime 24.103s, model runtime 105.535s, pg runtime 75.612s, speedup 0.716x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
15, opt runtime 52.135s, model runtime 634.708s, pg runtime 102.039s, speedup 0.161x
16, opt runtime 54.696s, model runtime 674.445s, pg runtime 98.172s, speedup 0.146x
17, opt runtime 5.629s, model runtime 166.652s, pg runtime 42.976s, speedup 0.258x
18, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.308s, model runtime 42.586s, pg runtime 1.528s, speedup 0.036x
21, opt runtime 26.669s, model runtime 84.917s, pg runtime 30.614s, speedup 0.361x
22, opt runtime 28.744s, model runtime 82.073s, pg runtime 29.665s, speedup 0.361x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.420s, model runtime 32.667s, pg runtime 1.420s, speedup 0.043x
27, opt runtime 7.419s, model runtime 25.577s, pg runtime 7.675s, speedup 0.300x
28, opt runtime 7.312s, model runtime 11.686s, pg runtime 7.655s, speedup 0.655x
29, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
30, opt runtime 5.271s, model runtime 26.816s, pg runtime 5.271s, speedup 0.197x
31, opt runtime 24.465s, model runtime 644.779s, pg runtime 644.779s, speedup 1.000x
32, opt runtime 25.478s, model runtime 642.079s, pg runtime 642.079s, speedup 1.000x
33, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 32.492s, model runtime 298.993s, pg runtime 32.492s, speedup 0.109x
39, opt runtime 1.116s, model runtime 28.783s, pg runtime 1.161s, speedup 0.040x
40, opt runtime 1.020s, model runtime 27.004s, pg runtime 1.125s, speedup 0.042x
====================
JOB best validation speedup epoch: 0, train speedup 0.476, test speedup 0.331, val speedup 0.501
TPCH best validation speedup epoch: 0, train speedup 0.476, test speedup 0.576, val speedup 0.501
TPCH Skew best validation speedup epoch: 0, train speedup 0.476, test speedup 0.557, val speedup 0.501
execution cost 0:18:51.137426
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.787869, and there are 32798 training samples
in channel 9
JOB test speedup 0.3468471469823751
TPCH test speedup 0.561555542265961
TPCH skew test speedup 0.5481482145629164
Epoch 0/50 |loss: 0.394876| train set 0.470x speedup, test set 0.548x speedup, val set 0.492x speedup, step: 1, train time 21.69 s
JOB test speedup 0.37482488608283665
TPCH test speedup 0.5665494199963295
TPCH skew test speedup 0.5473997506213224
Epoch 1/50 |loss: 0.286007| train set 0.468x speedup, test set 0.547x speedup, val set 0.491x speedup, step: 2, train time 20.82 s
JOB test speedup 0.3513783619209795
TPCH test speedup 0.5439760428792095
TPCH skew test speedup 0.5312814347831316
Epoch 2/50 |loss: 0.246859| train set 0.454x speedup, test set 0.531x speedup, val set 0.475x speedup, step: 3, train time 20.51 s
JOB test speedup 0.2910097514976416
TPCH test speedup 0.5418887327227174
TPCH skew test speedup 0.5316319610051273
Epoch 3/50 |loss: 0.226936| train set 0.445x speedup, test set 0.532x speedup, val set 0.470x speedup, step: 4, train time 20.87 s
JOB test speedup 0.28573837657311635
TPCH test speedup 0.5510987551927243
TPCH skew test speedup 0.5363621341930017
Epoch 4/50 |loss: 0.208787| train set 0.449x speedup, test set 0.536x speedup, val set 0.478x speedup, step: 5, train time 20.79 s
JOB test speedup 0.3180507603346605
TPCH test speedup 0.5430455195325282
TPCH skew test speedup 0.5291630338571179
Epoch 5/50 |loss: 0.195915| train set 0.447x speedup, test set 0.529x speedup, val set 0.466x speedup, step: 6, train time 20.77 s
JOB test speedup 0.32539583187570403
TPCH test speedup 0.547694569069864
TPCH skew test speedup 0.5425991866893105
Epoch 6/50 |loss: 0.185497| train set 0.452x speedup, test set 0.543x speedup, val set 0.479x speedup, step: 7, train time 20.59 s
JOB test speedup 0.32363520300454685
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 7/50 |loss: 0.176687| train set 0.445x speedup, test set 0.531x speedup, val set 0.470x speedup, step: 8, train time 20.79 s
JOB test speedup 0.3103976276919938
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 8/50 |loss: 0.167102| train set 0.445x speedup, test set 0.533x speedup, val set 0.472x speedup, step: 9, train time 20.68 s
JOB test speedup 0.3002108572682829
TPCH test speedup 0.5439760428792095
TPCH skew test speedup 0.5312814347831316
Epoch 9/50 |loss: 0.160859| train set 0.449x speedup, test set 0.531x speedup, val set 0.470x speedup, step: 10, train time 20.82 s
JOB test speedup 0.3068880659765314
TPCH test speedup 0.5302574550765656
TPCH skew test speedup 0.5256302276927668
Epoch 10/50 |loss: 0.153934| train set 0.446x speedup, test set 0.526x speedup, val set 0.469x speedup, step: 11, train time 20.77 s
JOB test speedup 0.2995800451606418
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 11/50 |loss: 0.148814| train set 0.444x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 12, train time 20.75 s
JOB test speedup 0.30607361926929294
TPCH test speedup 0.5479379078229253
TPCH skew test speedup 0.5402286218543056
Epoch 12/50 |loss: 0.140363| train set 0.451x speedup, test set 0.540x speedup, val set 0.478x speedup, step: 13, train time 20.74 s
JOB test speedup 0.3064012606501124
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 13/50 |loss: 0.141135| train set 0.444x speedup, test set 0.535x speedup, val set 0.474x speedup, step: 14, train time 20.97 s
JOB test speedup 0.33632537043824556
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 14/50 |loss: 0.137248| train set 0.448x speedup, test set 0.529x speedup, val set 0.470x speedup, step: 15, train time 20.91 s
JOB test speedup 0.31474725594820246
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 15/50 |loss: 0.128988| train set 0.446x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 16, train time 20.88 s
JOB test speedup 0.30903520688115144
TPCH test speedup 0.5385430467522617
TPCH skew test speedup 0.5296565719886462
Epoch 16/50 |loss: 0.128773| train set 0.442x speedup, test set 0.530x speedup, val set 0.471x speedup, step: 17, train time 21.04 s
JOB test speedup 0.3036520316653674
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 17/50 |loss: 0.128721| train set 0.445x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 18, train time 21.02 s
JOB test speedup 0.28161996582828325
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 18/50 |loss: 0.122808| train set 0.445x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 19, train time 21.00 s
JOB test speedup 0.272036521375217
TPCH test speedup 0.5515585169674203
TPCH skew test speedup 0.5371314899691512
Epoch 19/50 |loss: 0.120677| train set 0.446x speedup, test set 0.537x speedup, val set 0.483x speedup, step: 20, train time 21.17 s
JOB test speedup 0.2859884076351432
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 20/50 |loss: 0.120929| train set 0.444x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 21, train time 21.23 s
JOB test speedup 0.28284271460501703
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 21/50 |loss: 0.117063| train set 0.442x speedup, test set 0.531x speedup, val set 0.472x speedup, step: 22, train time 21.59 s
JOB test speedup 0.31305976620868503
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 22/50 |loss: 0.113216| train set 0.445x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 23, train time 21.38 s
JOB test speedup 0.3114638891639437
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 23/50 |loss: 0.111769| train set 0.444x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 24, train time 21.17 s
JOB test speedup 0.30649888651655766
TPCH test speedup 0.5555282746515641
TPCH skew test speedup 0.5414053009920894
Epoch 24/50 |loss: 0.113237| train set 0.445x speedup, test set 0.541x speedup, val set 0.484x speedup, step: 25, train time 21.19 s
JOB test speedup 0.27529173698704634
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 25/50 |loss: 0.108438| train set 0.442x speedup, test set 0.534x speedup, val set 0.467x speedup, step: 26, train time 21.20 s
JOB test speedup 0.2865657623486019
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 26/50 |loss: 0.109184| train set 0.446x speedup, test set 0.535x speedup, val set 0.467x speedup, step: 27, train time 21.21 s
JOB test speedup 0.3129295518472738
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 27/50 |loss: 0.108156| train set 0.446x speedup, test set 0.538x speedup, val set 0.476x speedup, step: 28, train time 21.28 s
JOB test speedup 0.27562365707160175
TPCH test speedup 0.551483374171387
TPCH skew test speedup 0.5416924999537516
Epoch 28/50 |loss: 0.104360| train set 0.443x speedup, test set 0.542x speedup, val set 0.473x speedup, step: 29, train time 21.25 s
JOB test speedup 0.27549434979531334
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 29/50 |loss: 0.104246| train set 0.442x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 30, train time 21.24 s
JOB test speedup 0.27759513641792566
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 30/50 |loss: 0.103739| train set 0.442x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 31, train time 21.31 s
JOB test speedup 0.2866697690323268
TPCH test speedup 0.5385430467522617
TPCH skew test speedup 0.5296565719886462
Epoch 31/50 |loss: 0.101593| train set 0.443x speedup, test set 0.530x speedup, val set 0.471x speedup, step: 32, train time 21.23 s
JOB test speedup 0.2768211595379394
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 32/50 |loss: 0.100165| train set 0.443x speedup, test set 0.534x speedup, val set 0.468x speedup, step: 33, train time 21.30 s
JOB test speedup 0.31723500152520623
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 33/50 |loss: 0.102524| train set 0.442x speedup, test set 0.535x speedup, val set 0.474x speedup, step: 34, train time 21.22 s
JOB test speedup 0.27840976746166574
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 34/50 |loss: 0.101000| train set 0.443x speedup, test set 0.529x speedup, val set 0.471x speedup, step: 35, train time 21.39 s
JOB test speedup 0.3044362724761256
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 35/50 |loss: 0.099160| train set 0.442x speedup, test set 0.533x speedup, val set 0.469x speedup, step: 36, train time 21.28 s
JOB test speedup 0.38569387092394253
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 36/50 |loss: 0.096379| train set 0.448x speedup, test set 0.538x speedup, val set 0.476x speedup, step: 37, train time 21.18 s
JOB test speedup 0.31607348619318715
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 37/50 |loss: 0.096976| train set 0.445x speedup, test set 0.529x speedup, val set 0.472x speedup, step: 38, train time 21.28 s
JOB test speedup 0.2861814498313258
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 38/50 |loss: 0.096320| train set 0.380x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 39, train time 21.38 s
JOB test speedup 0.27861225614945573
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 39/50 |loss: 0.095155| train set 0.442x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 40, train time 21.31 s
JOB test speedup 0.29385177497890425
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 40/50 |loss: 0.097487| train set 0.382x speedup, test set 0.530x speedup, val set 0.470x speedup, step: 41, train time 21.24 s
JOB test speedup 0.2770102968561702
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 41/50 |loss: 0.094168| train set 0.441x speedup, test set 0.529x speedup, val set 0.471x speedup, step: 42, train time 21.37 s
JOB test speedup 0.3126807376461001
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 42/50 |loss: 0.093458| train set 0.443x speedup, test set 0.529x speedup, val set 0.472x speedup, step: 43, train time 21.27 s
JOB test speedup 0.2974532437344614
TPCH test speedup 0.562034724798307
TPCH skew test speedup 0.5444010802121393
Epoch 43/50 |loss: 0.091153| train set 0.452x speedup, test set 0.544x speedup, val set 0.484x speedup, step: 44, train time 21.35 s
JOB test speedup 0.3051840034904125
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 44/50 |loss: 0.090983| train set 0.380x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 45, train time 21.21 s
JOB test speedup 0.28915613617910896
TPCH test speedup 0.5453777367019575
TPCH skew test speedup 0.532856181391151
Epoch 45/50 |loss: 0.092145| train set 0.444x speedup, test set 0.533x speedup, val set 0.470x speedup, step: 46, train time 21.22 s
JOB test speedup 0.27352989003738165
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 46/50 |loss: 0.091755| train set 0.380x speedup, test set 0.535x speedup, val set 0.472x speedup, step: 47, train time 21.40 s
JOB test speedup 0.28879980401318534
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 47/50 |loss: 0.090957| train set 0.381x speedup, test set 0.535x speedup, val set 0.474x speedup, step: 48, train time 21.27 s
JOB test speedup 0.3290857031032201
TPCH test speedup 0.5479379078229253
TPCH skew test speedup 0.5402286218543056
Epoch 48/50 |loss: 0.092086| train set 0.446x speedup, test set 0.540x speedup, val set 0.476x speedup, step: 49, train time 21.31 s
JOB test speedup 0.3031314645368314
TPCH test speedup 0.5479379078229253
TPCH skew test speedup 0.5402286218543056
Epoch 49/50 |loss: 0.088168| train set 0.445x speedup, test set 0.540x speedup, val set 0.476x speedup, step: 50, train time 21.16 s
Training per epoch cost 21.120 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 3.696s, pg runtime 0.081s, speedup 0.022x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.207s, model runtime 2.474s, pg runtime 0.207s, speedup 0.084x
04, opt runtime 0.920s, model runtime 7.166s, pg runtime 1.680s, speedup 0.234x
05, opt runtime 2.262s, model runtime 4.922s, pg runtime 3.549s, speedup 0.721x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 4.223s, model runtime 20.836s, pg runtime 18.741s, speedup 0.899x
09, opt runtime 2.324s, model runtime 19.337s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.846s, model runtime 28.458s, pg runtime 3.507s, speedup 0.123x
11, opt runtime 4.443s, model runtime 35.398s, pg runtime 13.945s, speedup 0.394x
12, opt runtime 0.517s, model runtime 13.147s, pg runtime 0.738s, speedup 0.056x
13, opt runtime 2.413s, model runtime 7.391s, pg runtime 57.198s, speedup 7.739x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 2.238s, model runtime 6.891s, pg runtime 2.718s, speedup 0.394x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.962s, model runtime 10.410s, pg runtime 6.876s, speedup 0.661x
19, opt runtime 1.923s, model runtime 16.009s, pg runtime 3.540s, speedup 0.221x
20, opt runtime 0.064s, model runtime 8.246s, pg runtime 0.089s, speedup 0.011x
21, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
22, opt runtime 0.093s, model runtime 19.608s, pg runtime 2.389s, speedup 0.122x
23, opt runtime 0.389s, model runtime 8.892s, pg runtime 0.389s, speedup 0.044x
24, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
25, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
26, opt runtime 0.161s, model runtime 5.658s, pg runtime 0.161s, speedup 0.028x
27, opt runtime 0.068s, model runtime 4.849s, pg runtime 0.239s, speedup 0.049x
28, opt runtime 0.157s, model runtime 9.917s, pg runtime 0.157s, speedup 0.016x
29, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
30, opt runtime 1.646s, model runtime 26.899s, pg runtime 4.855s, speedup 0.180x
31, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
32, opt runtime 4.513s, model runtime 139.474s, pg runtime 6.444s, speedup 0.046x
33, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 76.631s, pg runtime 112.305s, speedup 1.466x
04, opt runtime 30.267s, model runtime 83.433s, pg runtime 100.885s, speedup 1.209x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 25.597s, model runtime 68.287s, pg runtime 27.136s, speedup 0.397x
07, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
08, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
09, opt runtime 5.543s, model runtime 17.957s, pg runtime 5.543s, speedup 0.309x
10, opt runtime 5.237s, model runtime 8.695s, pg runtime 5.237s, speedup 0.602x
11, opt runtime 23.205s, model runtime 116.949s, pg runtime 87.340s, speedup 0.747x
12, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
13, opt runtime 3.332s, model runtime 132.485s, pg runtime 21.298s, speedup 0.161x
14, opt runtime 3.258s, model runtime 135.383s, pg runtime 18.141s, speedup 0.134x
15, opt runtime 53.298s, model runtime 641.154s, pg runtime 148.707s, speedup 0.232x
16, opt runtime 53.440s, model runtime 627.477s, pg runtime 140.742s, speedup 0.224x
17, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
18, opt runtime 6.149s, model runtime 191.745s, pg runtime 30.760s, speedup 0.160x
19, opt runtime 1.347s, model runtime 35.669s, pg runtime 1.438s, speedup 0.040x
20, opt runtime 1.428s, model runtime 31.736s, pg runtime 1.428s, speedup 0.045x
21, opt runtime 25.034s, model runtime 79.463s, pg runtime 25.034s, speedup 0.315x
22, opt runtime 20.897s, model runtime 80.735s, pg runtime 23.708s, speedup 0.294x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 6.234s, model runtime 94.759s, pg runtime 32.540s, speedup 0.343x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.423s, model runtime 29.238s, pg runtime 1.423s, speedup 0.049x
27, opt runtime 6.789s, model runtime 14.386s, pg runtime 7.799s, speedup 0.542x
28, opt runtime 7.199s, model runtime 11.999s, pg runtime 7.619s, speedup 0.635x
29, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
30, opt runtime 5.539s, model runtime 26.078s, pg runtime 5.539s, speedup 0.212x
31, opt runtime 24.840s, model runtime 725.331s, pg runtime 626.529s, speedup 0.864x
32, opt runtime 24.662s, model runtime 686.632s, pg runtime 613.999s, speedup 0.894x
33, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
34, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
37, opt runtime 19.707s, model runtime 278.671s, pg runtime 19.707s, speedup 0.071x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 1.088s, model runtime 27.390s, pg runtime 1.206s, speedup 0.044x
40, opt runtime 1.086s, model runtime 27.596s, pg runtime 1.181s, speedup 0.043x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 77.086s, pg runtime 123.411s, speedup 1.601x
04, opt runtime 31.996s, model runtime 75.860s, pg runtime 120.854s, speedup 1.593x
05, opt runtime 14.023s, model runtime 69.969s, pg runtime 31.705s, speedup 0.453x
06, opt runtime 30.304s, model runtime 69.001s, pg runtime 30.711s, speedup 0.445x
07, opt runtime 6.123s, model runtime 188.404s, pg runtime 14.081s, speedup 0.075x
08, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
09, opt runtime 8.207s, model runtime 20.040s, pg runtime 8.207s, speedup 0.410x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
12, opt runtime 24.103s, model runtime 105.535s, pg runtime 75.612s, speedup 0.716x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
15, opt runtime 52.135s, model runtime 634.708s, pg runtime 102.039s, speedup 0.161x
16, opt runtime 54.696s, model runtime 674.445s, pg runtime 98.172s, speedup 0.146x
17, opt runtime 5.629s, model runtime 166.652s, pg runtime 42.976s, speedup 0.258x
18, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.308s, model runtime 42.586s, pg runtime 1.528s, speedup 0.036x
21, opt runtime 26.669s, model runtime 84.917s, pg runtime 30.614s, speedup 0.361x
22, opt runtime 28.744s, model runtime 82.073s, pg runtime 29.665s, speedup 0.361x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.420s, model runtime 32.667s, pg runtime 1.420s, speedup 0.043x
27, opt runtime 7.419s, model runtime 25.577s, pg runtime 7.675s, speedup 0.300x
28, opt runtime 7.312s, model runtime 11.686s, pg runtime 7.655s, speedup 0.655x
29, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
30, opt runtime 5.271s, model runtime 26.816s, pg runtime 5.271s, speedup 0.197x
31, opt runtime 24.465s, model runtime 672.689s, pg runtime 644.779s, speedup 0.959x
32, opt runtime 25.478s, model runtime 721.211s, pg runtime 642.079s, speedup 0.890x
33, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 32.492s, model runtime 298.993s, pg runtime 32.492s, speedup 0.109x
39, opt runtime 1.116s, model runtime 28.783s, pg runtime 1.161s, speedup 0.040x
40, opt runtime 1.020s, model runtime 27.004s, pg runtime 1.125s, speedup 0.042x
====================
JOB best validation speedup epoch: 0, train speedup 0.470, test speedup 0.347, val speedup 0.492
TPCH best validation speedup epoch: 0, train speedup 0.470, test speedup 0.562, val speedup 0.492
TPCH Skew best validation speedup epoch: 0, train speedup 0.470, test speedup 0.548, val speedup 0.492
execution cost 0:18:43.604466
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.816062, and there are 32798 training samples
in channel 9
JOB test speedup 0.3549156612584274
TPCH test speedup 0.5455471911643235
TPCH skew test speedup 0.5374944437850363
Epoch 0/50 |loss: 0.394545| train set 0.460x speedup, test set 0.537x speedup, val set 0.481x speedup, step: 1, train time 22.49 s
JOB test speedup 0.31801591552059705
TPCH test speedup 0.5676107112316007
TPCH skew test speedup 0.5475513320093927
Epoch 1/50 |loss: 0.283630| train set 0.465x speedup, test set 0.548x speedup, val set 0.487x speedup, step: 1, train time 21.26 s
JOB test speedup 0.34623950096997275
TPCH test speedup 0.5558042114981789
TPCH skew test speedup 0.5417805536535305
Epoch 2/50 |loss: 0.246118| train set 0.462x speedup, test set 0.542x speedup, val set 0.484x speedup, step: 2, train time 21.30 s
JOB test speedup 0.2973168112631966
TPCH test speedup 0.5451412864409357
TPCH skew test speedup 0.530831085525424
Epoch 3/50 |loss: 0.224152| train set 0.447x speedup, test set 0.531x speedup, val set 0.468x speedup, step: 3, train time 21.19 s
JOB test speedup 0.29026146540849745
TPCH test speedup 0.5511438959644481
TPCH skew test speedup 0.5364052611294775
Epoch 4/50 |loss: 0.205320| train set 0.449x speedup, test set 0.536x speedup, val set 0.479x speedup, step: 4, train time 21.35 s
JOB test speedup 0.299126362808816
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 5/50 |loss: 0.190871| train set 0.445x speedup, test set 0.529x speedup, val set 0.470x speedup, step: 5, train time 21.24 s
JOB test speedup 0.29199198925959957
TPCH test speedup 0.547694569069864
TPCH skew test speedup 0.5425991866893105
Epoch 6/50 |loss: 0.182090| train set 0.450x speedup, test set 0.543x speedup, val set 0.476x speedup, step: 6, train time 21.31 s
JOB test speedup 0.29812012980113267
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 7/50 |loss: 0.171182| train set 0.445x speedup, test set 0.531x speedup, val set 0.467x speedup, step: 7, train time 21.28 s
JOB test speedup 0.28635724066813695
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 8/50 |loss: 0.163048| train set 0.442x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 8, train time 21.24 s
JOB test speedup 0.30734452552101243
TPCH test speedup 0.5478932906676426
TPCH skew test speedup 0.5401848779561027
Epoch 9/50 |loss: 0.155484| train set 0.451x speedup, test set 0.540x speedup, val set 0.476x speedup, step: 9, train time 21.34 s
JOB test speedup 0.2879809141525606
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 10/50 |loss: 0.150608| train set 0.444x speedup, test set 0.529x speedup, val set 0.467x speedup, step: 10, train time 21.32 s
JOB test speedup 0.27971248676570915
TPCH test speedup 0.5402610036085624
TPCH skew test speedup 0.5332052532093267
Epoch 11/50 |loss: 0.147164| train set 0.442x speedup, test set 0.533x speedup, val set 0.468x speedup, step: 11, train time 21.24 s
JOB test speedup 0.2866670741593055
TPCH test speedup 0.5482913547438737
TPCH skew test speedup 0.5362290704676196
Epoch 12/50 |loss: 0.137866| train set 0.450x speedup, test set 0.536x speedup, val set 0.474x speedup, step: 12, train time 21.37 s
JOB test speedup 0.30202836894123375
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 13/50 |loss: 0.138021| train set 0.447x speedup, test set 0.531x speedup, val set 0.469x speedup, step: 13, train time 21.37 s
JOB test speedup 0.3059029834484102
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 14/50 |loss: 0.135133| train set 0.446x speedup, test set 0.538x speedup, val set 0.476x speedup, step: 14, train time 21.12 s
JOB test speedup 0.2839332301182905
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 15/50 |loss: 0.128259| train set 0.445x speedup, test set 0.538x speedup, val set 0.474x speedup, step: 15, train time 21.19 s
JOB test speedup 0.2752944522359777
TPCH test speedup 0.538586153986052
TPCH skew test speedup 0.5296986272835744
Epoch 16/50 |loss: 0.124673| train set 0.443x speedup, test set 0.530x speedup, val set 0.471x speedup, step: 16, train time 21.27 s
JOB test speedup 0.30444832439415265
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 17/50 |loss: 0.128336| train set 0.444x speedup, test set 0.534x speedup, val set 0.474x speedup, step: 17, train time 21.35 s
JOB test speedup 0.27887915621963966
TPCH test speedup 0.5339789394517845
TPCH skew test speedup 0.5343437142625925
Epoch 18/50 |loss: 0.120932| train set 0.444x speedup, test set 0.534x speedup, val set 0.469x speedup, step: 18, train time 21.27 s
JOB test speedup 0.27913466839537276
TPCH test speedup 0.5440755121537552
TPCH skew test speedup 0.5359732948630503
Epoch 19/50 |loss: 0.119550| train set 0.446x speedup, test set 0.536x speedup, val set 0.478x speedup, step: 19, train time 21.31 s
JOB test speedup 0.29083686795380687
TPCH test speedup 0.5540637963659032
TPCH skew test speedup 0.5420682165139327
Epoch 20/50 |loss: 0.117047| train set 0.441x speedup, test set 0.542x speedup, val set 0.469x speedup, step: 20, train time 21.30 s
JOB test speedup 0.2719218743472542
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 21/50 |loss: 0.116790| train set 0.442x speedup, test set 0.531x speedup, val set 0.469x speedup, step: 21, train time 21.74 s
JOB test speedup 0.2992059187161854
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 22/50 |loss: 0.112376| train set 0.444x speedup, test set 0.538x speedup, val set 0.477x speedup, step: 22, train time 21.35 s
JOB test speedup 0.3013825842207523
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 23/50 |loss: 0.111655| train set 0.445x speedup, test set 0.538x speedup, val set 0.476x speedup, step: 23, train time 21.25 s
JOB test speedup 0.2949767519739362
TPCH test speedup 0.5494869085029543
TPCH skew test speedup 0.5404545509176305
Epoch 24/50 |loss: 0.109772| train set 0.447x speedup, test set 0.540x speedup, val set 0.478x speedup, step: 24, train time 21.17 s
JOB test speedup 0.2633988036039817
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 25/50 |loss: 0.106577| train set 0.381x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 25, train time 21.22 s
JOB test speedup 0.2723494493832171
TPCH test speedup 0.5343681273933555
TPCH skew test speedup 0.5350643679014944
Epoch 26/50 |loss: 0.105971| train set 0.444x speedup, test set 0.535x speedup, val set 0.472x speedup, step: 26, train time 21.36 s
JOB test speedup 0.3133846870969279
TPCH test speedup 0.5444732821568604
TPCH skew test speedup 0.5381455392877351
Epoch 27/50 |loss: 0.106501| train set 0.446x speedup, test set 0.538x speedup, val set 0.476x speedup, step: 27, train time 21.22 s
JOB test speedup 0.29059695681381276
TPCH test speedup 0.5518414113855171
TPCH skew test speedup 0.5376713243961581
Epoch 28/50 |loss: 0.101469| train set 0.441x speedup, test set 0.538x speedup, val set 0.471x speedup, step: 28, train time 21.46 s
JOB test speedup 0.26947192931237623
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 29/50 |loss: 0.102997| train set 0.442x speedup, test set 0.538x speedup, val set 0.472x speedup, step: 29, train time 21.29 s
JOB test speedup 0.2750392158252269
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 30/50 |loss: 0.100282| train set 0.440x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 30, train time 21.32 s
JOB test speedup 0.26520626192374963
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 31/50 |loss: 0.099882| train set 0.441x speedup, test set 0.533x speedup, val set 0.466x speedup, step: 31, train time 21.21 s
JOB test speedup 0.2688938775374811
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 32/50 |loss: 0.100219| train set 0.443x speedup, test set 0.529x speedup, val set 0.472x speedup, step: 32, train time 21.33 s
JOB test speedup 0.29098225753286405
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 33/50 |loss: 0.100983| train set 0.441x speedup, test set 0.533x speedup, val set 0.474x speedup, step: 33, train time 21.32 s
JOB test speedup 0.3053093557484789
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 34/50 |loss: 0.098670| train set 0.440x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 34, train time 21.21 s
JOB test speedup 0.2938164477262362
TPCH test speedup 0.5299268692872077
TPCH skew test speedup 0.529472668765604
Epoch 35/50 |loss: 0.097769| train set 0.442x speedup, test set 0.529x speedup, val set 0.471x speedup, step: 35, train time 21.17 s
JOB test speedup 0.3140434450058786
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 36/50 |loss: 0.094970| train set 0.382x speedup, test set 0.538x speedup, val set 0.476x speedup, step: 36, train time 21.33 s
JOB test speedup 0.29098225753286405
TPCH test speedup 0.5299268692872077
TPCH skew test speedup 0.529472668765604
Epoch 37/50 |loss: 0.094347| train set 0.443x speedup, test set 0.529x speedup, val set 0.475x speedup, step: 37, train time 21.24 s
JOB test speedup 0.2650328952623562
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 38/50 |loss: 0.095471| train set 0.381x speedup, test set 0.538x speedup, val set 0.470x speedup, step: 38, train time 21.26 s
JOB test speedup 0.27654915995653645
TPCH test speedup 0.5302574550765656
TPCH skew test speedup 0.5256302276927668
Epoch 39/50 |loss: 0.093398| train set 0.444x speedup, test set 0.526x speedup, val set 0.470x speedup, step: 39, train time 21.14 s
JOB test speedup 0.28686512358129557
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 40/50 |loss: 0.094809| train set 0.382x speedup, test set 0.530x speedup, val set 0.473x speedup, step: 40, train time 21.36 s
JOB test speedup 0.27349285754859176
TPCH test speedup 0.5447918878379316
TPCH skew test speedup 0.5347502244582253
Epoch 41/50 |loss: 0.092351| train set 0.379x speedup, test set 0.535x speedup, val set 0.473x speedup, step: 41, train time 21.39 s
JOB test speedup 0.2899543987365446
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 42/50 |loss: 0.092297| train set 0.444x speedup, test set 0.530x speedup, val set 0.470x speedup, step: 42, train time 21.31 s
JOB test speedup 0.2993109993790432
TPCH test speedup 0.5616633429385005
TPCH skew test speedup 0.5485239336522417
Epoch 43/50 |loss: 0.089709| train set 0.444x speedup, test set 0.549x speedup, val set 0.486x speedup, step: 43, train time 21.21 s
JOB test speedup 0.30514138486924997
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 44/50 |loss: 0.088917| train set 0.441x speedup, test set 0.535x speedup, val set 0.474x speedup, step: 44, train time 21.31 s
JOB test speedup 0.2781457700925391
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 45/50 |loss: 0.091517| train set 0.443x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 45, train time 21.41 s
JOB test speedup 0.2699480149655241
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 46/50 |loss: 0.089759| train set 0.442x speedup, test set 0.535x speedup, val set 0.472x speedup, step: 46, train time 21.31 s
JOB test speedup 0.27391520670632685
TPCH test speedup 0.5479379078229253
TPCH skew test speedup 0.5402286218543056
Epoch 47/50 |loss: 0.090346| train set 0.443x speedup, test set 0.540x speedup, val set 0.476x speedup, step: 47, train time 21.27 s
JOB test speedup 0.3147525528456307
TPCH test speedup 0.5522303064523334
TPCH skew test speedup 0.549868862586584
Epoch 48/50 |loss: 0.089217| train set 0.446x speedup, test set 0.550x speedup, val set 0.479x speedup, step: 48, train time 21.20 s
JOB test speedup 0.29785236560768774
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 49/50 |loss: 0.088809| train set 0.444x speedup, test set 0.535x speedup, val set 0.476x speedup, step: 49, train time 21.26 s
Training per epoch cost 21.314 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 3.696s, pg runtime 0.081s, speedup 0.022x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.207s, model runtime 2.474s, pg runtime 0.207s, speedup 0.084x
04, opt runtime 0.920s, model runtime 7.166s, pg runtime 1.680s, speedup 0.234x
05, opt runtime 2.262s, model runtime 43.190s, pg runtime 3.549s, speedup 0.082x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 4.223s, model runtime 30.512s, pg runtime 18.741s, speedup 0.614x
09, opt runtime 2.324s, model runtime 22.017s, pg runtime 10.605s, speedup 0.482x
10, opt runtime 2.846s, model runtime 28.458s, pg runtime 3.507s, speedup 0.123x
11, opt runtime 4.443s, model runtime 35.398s, pg runtime 13.945s, speedup 0.394x
12, opt runtime 0.517s, model runtime 13.147s, pg runtime 0.738s, speedup 0.056x
13, opt runtime 2.413s, model runtime 7.391s, pg runtime 57.198s, speedup 7.739x
14, opt runtime 0.113s, model runtime 2.542s, pg runtime 0.153s, speedup 0.060x
15, opt runtime 2.238s, model runtime 6.907s, pg runtime 2.718s, speedup 0.394x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.962s, model runtime 17.974s, pg runtime 6.876s, speedup 0.383x
19, opt runtime 1.923s, model runtime 16.009s, pg runtime 3.540s, speedup 0.221x
20, opt runtime 0.064s, model runtime 8.246s, pg runtime 0.089s, speedup 0.011x
21, opt runtime 0.953s, model runtime 5.561s, pg runtime 4.730s, speedup 0.851x
22, opt runtime 0.093s, model runtime 12.776s, pg runtime 2.389s, speedup 0.187x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 2.719s, model runtime 19.650s, pg runtime 3.112s, speedup 0.158x
25, opt runtime 4.173s, model runtime 18.653s, pg runtime 8.279s, speedup 0.444x
26, opt runtime 0.161s, model runtime 5.658s, pg runtime 0.161s, speedup 0.028x
27, opt runtime 0.068s, model runtime 2.148s, pg runtime 0.239s, speedup 0.111x
28, opt runtime 0.157s, model runtime 9.917s, pg runtime 0.157s, speedup 0.016x
29, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
30, opt runtime 1.646s, model runtime 26.899s, pg runtime 4.855s, speedup 0.180x
31, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
32, opt runtime 4.513s, model runtime 139.474s, pg runtime 6.444s, speedup 0.046x
33, opt runtime 2.755s, model runtime 6.978s, pg runtime 5.521s, speedup 0.791x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
04, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 25.597s, model runtime 68.287s, pg runtime 27.136s, speedup 0.397x
07, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
08, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
09, opt runtime 5.543s, model runtime 17.957s, pg runtime 5.543s, speedup 0.309x
10, opt runtime 5.237s, model runtime 8.695s, pg runtime 5.237s, speedup 0.602x
11, opt runtime 23.205s, model runtime 116.949s, pg runtime 87.340s, speedup 0.747x
12, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
13, opt runtime 3.332s, model runtime 74.565s, pg runtime 21.298s, speedup 0.286x
14, opt runtime 3.258s, model runtime 70.500s, pg runtime 18.141s, speedup 0.257x
15, opt runtime 53.298s, model runtime 730.999s, pg runtime 148.707s, speedup 0.203x
16, opt runtime 53.440s, model runtime 695.290s, pg runtime 140.742s, speedup 0.202x
17, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
18, opt runtime 6.149s, model runtime 191.745s, pg runtime 30.760s, speedup 0.160x
19, opt runtime 1.347s, model runtime 35.669s, pg runtime 1.438s, speedup 0.040x
20, opt runtime 1.428s, model runtime 31.736s, pg runtime 1.428s, speedup 0.045x
21, opt runtime 25.034s, model runtime 79.463s, pg runtime 25.034s, speedup 0.315x
22, opt runtime 20.897s, model runtime 80.735s, pg runtime 23.708s, speedup 0.294x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 6.234s, model runtime 94.759s, pg runtime 32.540s, speedup 0.343x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.423s, model runtime 29.238s, pg runtime 1.423s, speedup 0.049x
27, opt runtime 6.789s, model runtime 14.386s, pg runtime 7.799s, speedup 0.542x
28, opt runtime 7.199s, model runtime 11.999s, pg runtime 7.619s, speedup 0.635x
29, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
30, opt runtime 5.539s, model runtime 26.078s, pg runtime 5.539s, speedup 0.212x
31, opt runtime 24.840s, model runtime 626.529s, pg runtime 626.529s, speedup 1.000x
32, opt runtime 24.662s, model runtime 613.999s, pg runtime 613.999s, speedup 1.000x
33, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
34, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
37, opt runtime 19.707s, model runtime 278.671s, pg runtime 19.707s, speedup 0.071x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 1.088s, model runtime 27.390s, pg runtime 1.206s, speedup 0.044x
40, opt runtime 1.086s, model runtime 27.596s, pg runtime 1.181s, speedup 0.043x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
04, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
05, opt runtime 14.023s, model runtime 69.969s, pg runtime 31.705s, speedup 0.453x
06, opt runtime 30.304s, model runtime 69.001s, pg runtime 30.711s, speedup 0.445x
07, opt runtime 6.123s, model runtime 188.404s, pg runtime 14.081s, speedup 0.075x
08, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
09, opt runtime 8.207s, model runtime 20.040s, pg runtime 8.207s, speedup 0.410x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
12, opt runtime 24.103s, model runtime 105.535s, pg runtime 75.612s, speedup 0.716x
13, opt runtime 3.004s, model runtime 81.358s, pg runtime 17.818s, speedup 0.219x
14, opt runtime 3.244s, model runtime 75.985s, pg runtime 17.707s, speedup 0.233x
15, opt runtime 52.135s, model runtime 689.404s, pg runtime 102.039s, speedup 0.148x
16, opt runtime 54.696s, model runtime 730.826s, pg runtime 98.172s, speedup 0.134x
17, opt runtime 5.629s, model runtime 166.652s, pg runtime 42.976s, speedup 0.258x
18, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.308s, model runtime 42.586s, pg runtime 1.528s, speedup 0.036x
21, opt runtime 26.669s, model runtime 84.917s, pg runtime 30.614s, speedup 0.361x
22, opt runtime 28.744s, model runtime 82.073s, pg runtime 29.665s, speedup 0.361x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.420s, model runtime 32.667s, pg runtime 1.420s, speedup 0.043x
27, opt runtime 7.419s, model runtime 25.577s, pg runtime 7.675s, speedup 0.300x
28, opt runtime 7.312s, model runtime 11.686s, pg runtime 7.655s, speedup 0.655x
29, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
30, opt runtime 5.271s, model runtime 26.816s, pg runtime 5.271s, speedup 0.197x
31, opt runtime 24.465s, model runtime 644.779s, pg runtime 644.779s, speedup 1.000x
32, opt runtime 25.478s, model runtime 642.079s, pg runtime 642.079s, speedup 1.000x
33, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 32.492s, model runtime 298.993s, pg runtime 32.492s, speedup 0.109x
39, opt runtime 1.116s, model runtime 28.783s, pg runtime 1.161s, speedup 0.040x
40, opt runtime 1.020s, model runtime 27.004s, pg runtime 1.125s, speedup 0.042x
====================
JOB best validation speedup epoch: 1, train speedup 0.465, test speedup 0.318, val speedup 0.487
TPCH best validation speedup epoch: 1, train speedup 0.465, test speedup 0.568, val speedup 0.487
TPCH Skew best validation speedup epoch: 1, train speedup 0.465, test speedup 0.548, val speedup 0.487
execution cost 0:18:53.454780
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(248, 49)
(248, 49)
construct training samples cost 0:00:01.692275, and there are 32798 training samples
in channel 9
JOB test speedup 0.3660158793529269
TPCH test speedup 0.5626880778328968
TPCH skew test speedup 0.5478312921159071
Epoch 0/50 |loss: 0.394898| train set 0.465x speedup, test set 0.548x speedup, val set 0.492x speedup, step: 1, train time 22.06 s
JOB test speedup 0.32499025986461155
TPCH test speedup 0.5637130721733863
TPCH skew test speedup 0.5470119432590509
Epoch 1/50 |loss: 0.285585| train set 0.463x speedup, test set 0.547x speedup, val set 0.489x speedup, step: 2, train time 20.82 s
JOB test speedup 0.3528472708984107
TPCH test speedup 0.5439760428792095
TPCH skew test speedup 0.5312814347831316
Epoch 2/50 |loss: 0.246961| train set 0.453x speedup, test set 0.531x speedup, val set 0.475x speedup, step: 3, train time 21.02 s
JOB test speedup 0.3049513178290825
TPCH test speedup 0.5565234309599086
TPCH skew test speedup 0.5391987388708072
Epoch 3/50 |loss: 0.226237| train set 0.447x speedup, test set 0.539x speedup, val set 0.479x speedup, step: 4, train time 21.03 s
JOB test speedup 0.2850701159100589
TPCH test speedup 0.5515014923753417
TPCH skew test speedup 0.5324619148557869
Epoch 4/50 |loss: 0.207614| train set 0.448x speedup, test set 0.532x speedup, val set 0.476x speedup, step: 5, train time 21.15 s
JOB test speedup 0.2884882850153685
TPCH test speedup 0.5402610036085624
TPCH skew test speedup 0.5332052532093267
Epoch 5/50 |loss: 0.194197| train set 0.445x speedup, test set 0.533x speedup, val set 0.467x speedup, step: 6, train time 21.02 s
JOB test speedup 0.29670710003648454
TPCH test speedup 0.5480477020284136
TPCH skew test speedup 0.5385645886823
Epoch 6/50 |loss: 0.183263| train set 0.448x speedup, test set 0.539x speedup, val set 0.473x speedup, step: 7, train time 21.16 s
JOB test speedup 0.2936367826219941
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 7/50 |loss: 0.174693| train set 0.444x speedup, test set 0.531x speedup, val set 0.468x speedup, step: 8, train time 21.26 s
JOB test speedup 0.32373272583309937
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 8/50 |loss: 0.165149| train set 0.443x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 9, train time 21.25 s
JOB test speedup 0.2970281678739409
TPCH test speedup 0.5568132410209553
TPCH skew test speedup 0.5441405029261794
Epoch 9/50 |loss: 0.158994| train set 0.448x speedup, test set 0.544x speedup, val set 0.478x speedup, step: 10, train time 21.11 s
JOB test speedup 0.29025813403115175
TPCH test speedup 0.5515014923753417
TPCH skew test speedup 0.5324619148557869
Epoch 10/50 |loss: 0.150824| train set 0.443x speedup, test set 0.532x speedup, val set 0.467x speedup, step: 11, train time 21.14 s
JOB test speedup 0.3011060811053
TPCH test speedup 0.5406046128418842
TPCH skew test speedup 0.5293086449807485
Epoch 11/50 |loss: 0.148377| train set 0.443x speedup, test set 0.529x speedup, val set 0.470x speedup, step: 12, train time 21.16 s
JOB test speedup 0.2940279744194054
TPCH test speedup 0.5558915849639101
TPCH skew test speedup 0.5373883724539341
Epoch 12/50 |loss: 0.139231| train set 0.452x speedup, test set 0.537x speedup, val set 0.484x speedup, step: 13, train time 21.20 s
JOB test speedup 0.31014570037915035
TPCH test speedup 0.5415870786215041
TPCH skew test speedup 0.5356059769253572
Epoch 13/50 |loss: 0.139697| train set 0.446x speedup, test set 0.536x speedup, val set 0.476x speedup, step: 14, train time 21.27 s
JOB test speedup 0.31581579558055234
TPCH test speedup 0.5494303114438205
TPCH skew test speedup 0.5357272729897287
Epoch 14/50 |loss: 0.138695| train set 0.445x speedup, test set 0.536x speedup, val set 0.474x speedup, step: 15, train time 21.30 s
JOB test speedup 0.3082269664696305
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 15/50 |loss: 0.128426| train set 0.446x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 16, train time 21.45 s
JOB test speedup 0.3173649215002892
TPCH test speedup 0.549356144274916
TPCH skew test speedup 0.5328140010270428
Epoch 16/50 |loss: 0.127674| train set 0.444x speedup, test set 0.533x speedup, val set 0.474x speedup, step: 17, train time 21.15 s
JOB test speedup 0.3188752046766066
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 17/50 |loss: 0.130515| train set 0.444x speedup, test set 0.534x speedup, val set 0.474x speedup, step: 18, train time 21.47 s
JOB test speedup 0.2875545722394357
TPCH test speedup 0.5299268692872077
TPCH skew test speedup 0.529472668765604
Epoch 18/50 |loss: 0.120608| train set 0.442x speedup, test set 0.529x speedup, val set 0.467x speedup, step: 19, train time 21.30 s
JOB test speedup 0.27934559250173063
TPCH test speedup 0.5511438959644481
TPCH skew test speedup 0.5364052611294775
Epoch 19/50 |loss: 0.120941| train set 0.446x speedup, test set 0.536x speedup, val set 0.479x speedup, step: 20, train time 21.27 s
JOB test speedup 0.3187964891222123
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 20/50 |loss: 0.121532| train set 0.444x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 21, train time 21.30 s
JOB test speedup 0.2808792992477184
TPCH test speedup 0.5415870786215041
TPCH skew test speedup 0.5356059769253572
Epoch 21/50 |loss: 0.116347| train set 0.445x speedup, test set 0.536x speedup, val set 0.472x speedup, step: 22, train time 21.78 s
JOB test speedup 0.2959810010968623
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 22/50 |loss: 0.114120| train set 0.446x speedup, test set 0.538x speedup, val set 0.473x speedup, step: 23, train time 21.27 s
JOB test speedup 0.302126676092786
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 23/50 |loss: 0.112270| train set 0.445x speedup, test set 0.538x speedup, val set 0.477x speedup, step: 24, train time 21.18 s
JOB test speedup 0.32182238655074924
TPCH test speedup 0.5494869085029543
TPCH skew test speedup 0.5404545509176305
Epoch 24/50 |loss: 0.111803| train set 0.444x speedup, test set 0.540x speedup, val set 0.478x speedup, step: 25, train time 21.36 s
JOB test speedup 0.2884741047552914
TPCH test speedup 0.5445173440180948
TPCH skew test speedup 0.5381889535069017
Epoch 25/50 |loss: 0.108773| train set 0.441x speedup, test set 0.538x speedup, val set 0.471x speedup, step: 26, train time 21.34 s
JOB test speedup 0.28976842058131963
TPCH test speedup 0.5449220510970488
TPCH skew test speedup 0.5389200234821806
Epoch 26/50 |loss: 0.109650| train set 0.444x speedup, test set 0.539x speedup, val set 0.469x speedup, step: 27, train time 21.34 s
JOB test speedup 0.2878162411088555
TPCH test speedup 0.5448222720772588
TPCH skew test speedup 0.5341766590976645
Epoch 27/50 |loss: 0.108260| train set 0.444x speedup, test set 0.534x speedup, val set 0.474x speedup, step: 28, train time 21.27 s
JOB test speedup 0.29868834947121475
TPCH test speedup 0.538586153986052
TPCH skew test speedup 0.5296986272835744
Epoch 28/50 |loss: 0.103518| train set 0.442x speedup, test set 0.530x speedup, val set 0.471x speedup, step: 29, train time 21.27 s
JOB test speedup 0.2845052009569483
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 29/50 |loss: 0.105200| train set 0.443x speedup, test set 0.535x speedup, val set 0.469x speedup, step: 30, train time 21.18 s
JOB test speedup 0.28686957045014894
TPCH test speedup 0.5306412352008381
TPCH skew test speedup 0.5263275543823889
Epoch 30/50 |loss: 0.103382| train set 0.440x speedup, test set 0.526x speedup, val set 0.469x speedup, step: 31, train time 21.27 s
JOB test speedup 0.28686957045014894
TPCH test speedup 0.5406480507533873
TPCH skew test speedup 0.5293506450400843
Epoch 31/50 |loss: 0.101886| train set 0.441x speedup, test set 0.529x speedup, val set 0.469x speedup, step: 32, train time 21.20 s
JOB test speedup 0.29836226267252514
TPCH test speedup 0.5448663904433653
TPCH skew test speedup 0.5342194352838711
Epoch 32/50 |loss: 0.101059| train set 0.443x speedup, test set 0.534x speedup, val set 0.472x speedup, step: 33, train time 21.27 s
JOB test speedup 0.32314009267572846
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 33/50 |loss: 0.103057| train set 0.441x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 34, train time 21.20 s
JOB test speedup 0.3246575743259056
TPCH test speedup 0.5448222720772588
TPCH skew test speedup 0.5341766590976645
Epoch 34/50 |loss: 0.098876| train set 0.443x speedup, test set 0.534x speedup, val set 0.471x speedup, step: 35, train time 21.19 s
JOB test speedup 0.32309979804189504
TPCH test speedup 0.5440200242951059
TPCH skew test speedup 0.531323748515824
Epoch 35/50 |loss: 0.100115| train set 0.443x speedup, test set 0.531x speedup, val set 0.475x speedup, step: 36, train time 21.22 s
JOB test speedup 0.32656696689481973
TPCH test speedup 0.5560726741240849
TPCH skew test speedup 0.5475477224271422
Epoch 36/50 |loss: 0.095948| train set 0.381x speedup, test set 0.548x speedup, val set 0.476x speedup, step: 37, train time 21.29 s
JOB test speedup 0.3261922740537219
TPCH test speedup 0.5515014923753417
TPCH skew test speedup 0.5324619148557869
Epoch 37/50 |loss: 0.095199| train set 0.445x speedup, test set 0.532x speedup, val set 0.480x speedup, step: 38, train time 21.26 s
JOB test speedup 0.2882670049569044
TPCH test speedup 0.5558915849639101
TPCH skew test speedup 0.5373883724539341
Epoch 38/50 |loss: 0.096709| train set 0.380x speedup, test set 0.537x speedup, val set 0.480x speedup, step: 39, train time 21.24 s
JOB test speedup 0.28689896936913767
TPCH test speedup 0.5302574550765656
TPCH skew test speedup 0.5256302276927668
Epoch 39/50 |loss: 0.095287| train set 0.441x speedup, test set 0.526x speedup, val set 0.468x speedup, step: 40, train time 21.32 s
JOB test speedup 0.29836226267252514
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 40/50 |loss: 0.097043| train set 0.382x speedup, test set 0.530x speedup, val set 0.473x speedup, step: 41, train time 21.26 s
JOB test speedup 0.2865732643075379
TPCH test speedup 0.540304386316974
TPCH skew test speedup 0.5332478739528951
Epoch 41/50 |loss: 0.093627| train set 0.379x speedup, test set 0.533x speedup, val set 0.471x speedup, step: 42, train time 21.41 s
JOB test speedup 0.2903486521159602
TPCH test speedup 0.5343146018001123
TPCH skew test speedup 0.5304305098204932
Epoch 42/50 |loss: 0.092666| train set 0.444x speedup, test set 0.530x speedup, val set 0.470x speedup, step: 43, train time 21.21 s
JOB test speedup 0.32461820230682514
TPCH test speedup 0.562034724798307
TPCH skew test speedup 0.5444010802121393
Epoch 43/50 |loss: 0.090349| train set 0.381x speedup, test set 0.544x speedup, val set 0.484x speedup, step: 44, train time 21.26 s
JOB test speedup 0.2879898878481921
TPCH test speedup 0.5515014923753417
TPCH skew test speedup 0.5324619148557869
Epoch 44/50 |loss: 0.091039| train set 0.441x speedup, test set 0.532x speedup, val set 0.469x speedup, step: 45, train time 21.35 s
JOB test speedup 0.3050107218388336
TPCH test speedup 0.5417015906339985
TPCH skew test speedup 0.5415031674627842
Epoch 45/50 |loss: 0.092247| train set 0.445x speedup, test set 0.542x speedup, val set 0.478x speedup, step: 46, train time 21.24 s
JOB test speedup 0.28680700020755096
TPCH test speedup 0.5452716167322194
TPCH skew test speedup 0.5349397535130082
Epoch 46/50 |loss: 0.091210| train set 0.442x speedup, test set 0.535x speedup, val set 0.472x speedup, step: 47, train time 21.27 s
JOB test speedup 0.2857402801835596
TPCH test speedup 0.5436720610612636
TPCH skew test speedup 0.5352501924149806
Epoch 47/50 |loss: 0.091140| train set 0.380x speedup, test set 0.535x speedup, val set 0.474x speedup, step: 48, train time 21.28 s
JOB test speedup 0.3249703361386107
TPCH test speedup 0.5347042793657282
TPCH skew test speedup 0.531140639848336
Epoch 48/50 |loss: 0.090560| train set 0.381x speedup, test set 0.531x speedup, val set 0.477x speedup, step: 49, train time 21.19 s
JOB test speedup 0.3012263913817254
TPCH test speedup 0.544423992181592
TPCH skew test speedup 0.5320362738649567
Epoch 49/50 |loss: 0.088586| train set 0.441x speedup, test set 0.532x speedup, val set 0.475x speedup, step: 50, train time 21.29 s
Training per epoch cost 21.262 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 3.696s, pg runtime 0.081s, speedup 0.022x
02, opt runtime 1.299s, model runtime 8.819s, pg runtime 5.855s, speedup 0.664x
03, opt runtime 0.207s, model runtime 2.474s, pg runtime 0.207s, speedup 0.084x
04, opt runtime 0.920s, model runtime 7.166s, pg runtime 1.680s, speedup 0.234x
05, opt runtime 2.262s, model runtime 4.922s, pg runtime 3.549s, speedup 0.721x
06, opt runtime 0.756s, model runtime 9.070s, pg runtime 0.802s, speedup 0.088x
07, opt runtime 0.919s, model runtime 4.986s, pg runtime 0.942s, speedup 0.189x
08, opt runtime 4.223s, model runtime 20.836s, pg runtime 18.741s, speedup 0.899x
09, opt runtime 2.324s, model runtime 19.354s, pg runtime 10.605s, speedup 0.548x
10, opt runtime 2.846s, model runtime 28.458s, pg runtime 3.507s, speedup 0.123x
11, opt runtime 4.443s, model runtime 35.398s, pg runtime 13.945s, speedup 0.394x
12, opt runtime 0.517s, model runtime 13.147s, pg runtime 0.738s, speedup 0.056x
13, opt runtime 2.413s, model runtime 7.391s, pg runtime 57.198s, speedup 7.739x
14, opt runtime 0.113s, model runtime 7.974s, pg runtime 0.153s, speedup 0.019x
15, opt runtime 2.238s, model runtime 6.891s, pg runtime 2.718s, speedup 0.394x
16, opt runtime 0.441s, model runtime 4.736s, pg runtime 0.453s, speedup 0.096x
17, opt runtime 0.327s, model runtime 15.014s, pg runtime 0.354s, speedup 0.024x
18, opt runtime 2.962s, model runtime 10.410s, pg runtime 6.876s, speedup 0.661x
19, opt runtime 1.923s, model runtime 7.809s, pg runtime 3.540s, speedup 0.453x
20, opt runtime 0.064s, model runtime 8.246s, pg runtime 0.089s, speedup 0.011x
21, opt runtime 0.953s, model runtime 4.402s, pg runtime 4.730s, speedup 1.075x
22, opt runtime 0.093s, model runtime 10.579s, pg runtime 2.389s, speedup 0.226x
23, opt runtime 0.389s, model runtime 7.605s, pg runtime 0.389s, speedup 0.051x
24, opt runtime 2.719s, model runtime 11.480s, pg runtime 3.112s, speedup 0.271x
25, opt runtime 4.173s, model runtime 20.789s, pg runtime 8.279s, speedup 0.398x
26, opt runtime 0.161s, model runtime 5.658s, pg runtime 0.161s, speedup 0.028x
27, opt runtime 0.068s, model runtime 4.849s, pg runtime 0.239s, speedup 0.049x
28, opt runtime 0.157s, model runtime 9.917s, pg runtime 0.157s, speedup 0.016x
29, opt runtime 0.158s, model runtime 2.597s, pg runtime 0.158s, speedup 0.061x
30, opt runtime 1.646s, model runtime 18.662s, pg runtime 4.855s, speedup 0.260x
31, opt runtime 2.971s, model runtime 11.136s, pg runtime 8.605s, speedup 0.773x
32, opt runtime 4.513s, model runtime 139.474s, pg runtime 6.444s, speedup 0.046x
33, opt runtime 2.755s, model runtime 9.838s, pg runtime 5.521s, speedup 0.561x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 76.631s, pg runtime 112.305s, speedup 1.466x
04, opt runtime 30.267s, model runtime 83.433s, pg runtime 100.885s, speedup 1.209x
05, opt runtime 23.961s, model runtime 64.450s, pg runtime 32.278s, speedup 0.501x
06, opt runtime 25.597s, model runtime 68.287s, pg runtime 27.136s, speedup 0.397x
07, opt runtime 6.284s, model runtime 191.498s, pg runtime 31.019s, speedup 0.162x
08, opt runtime 7.377s, model runtime 159.343s, pg runtime 28.655s, speedup 0.180x
09, opt runtime 5.543s, model runtime 17.957s, pg runtime 5.543s, speedup 0.309x
10, opt runtime 5.237s, model runtime 8.695s, pg runtime 5.237s, speedup 0.602x
11, opt runtime 23.205s, model runtime 116.949s, pg runtime 87.340s, speedup 0.747x
12, opt runtime 26.602s, model runtime 99.326s, pg runtime 85.447s, speedup 0.860x
13, opt runtime 3.332s, model runtime 132.485s, pg runtime 21.298s, speedup 0.161x
14, opt runtime 3.258s, model runtime 135.383s, pg runtime 18.141s, speedup 0.134x
15, opt runtime 53.298s, model runtime 730.999s, pg runtime 148.707s, speedup 0.203x
16, opt runtime 53.440s, model runtime 695.290s, pg runtime 140.742s, speedup 0.202x
17, opt runtime 10.788s, model runtime 149.188s, pg runtime 32.939s, speedup 0.221x
18, opt runtime 6.149s, model runtime 191.745s, pg runtime 30.760s, speedup 0.160x
19, opt runtime 1.347s, model runtime 35.669s, pg runtime 1.438s, speedup 0.040x
20, opt runtime 1.428s, model runtime 31.736s, pg runtime 1.428s, speedup 0.045x
21, opt runtime 25.034s, model runtime 79.463s, pg runtime 25.034s, speedup 0.315x
22, opt runtime 20.897s, model runtime 80.735s, pg runtime 23.708s, speedup 0.294x
23, opt runtime 6.250s, model runtime 45.062s, pg runtime 32.969s, speedup 0.732x
24, opt runtime 6.234s, model runtime 94.759s, pg runtime 32.540s, speedup 0.343x
25, opt runtime 1.642s, model runtime 17.366s, pg runtime 1.752s, speedup 0.101x
26, opt runtime 1.423s, model runtime 29.238s, pg runtime 1.423s, speedup 0.049x
27, opt runtime 6.789s, model runtime 14.386s, pg runtime 7.799s, speedup 0.542x
28, opt runtime 7.199s, model runtime 11.999s, pg runtime 7.619s, speedup 0.635x
29, opt runtime 5.572s, model runtime 26.448s, pg runtime 5.572s, speedup 0.211x
30, opt runtime 5.539s, model runtime 26.078s, pg runtime 5.539s, speedup 0.212x
31, opt runtime 24.840s, model runtime 626.529s, pg runtime 626.529s, speedup 1.000x
32, opt runtime 24.662s, model runtime 613.999s, pg runtime 613.999s, speedup 1.000x
33, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
34, opt runtime 39.191s, model runtime 126.280s, pg runtime 75.984s, speedup 0.602x
35, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
36, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
37, opt runtime 19.707s, model runtime 278.671s, pg runtime 19.707s, speedup 0.071x
38, opt runtime 18.262s, model runtime 265.207s, pg runtime 18.262s, speedup 0.069x
39, opt runtime 1.088s, model runtime 27.390s, pg runtime 1.206s, speedup 0.044x
40, opt runtime 1.086s, model runtime 27.596s, pg runtime 1.181s, speedup 0.043x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 77.086s, pg runtime 123.411s, speedup 1.601x
04, opt runtime 31.996s, model runtime 75.860s, pg runtime 120.854s, speedup 1.593x
05, opt runtime 14.023s, model runtime 69.969s, pg runtime 31.705s, speedup 0.453x
06, opt runtime 30.304s, model runtime 69.001s, pg runtime 30.711s, speedup 0.445x
07, opt runtime 6.123s, model runtime 188.404s, pg runtime 14.081s, speedup 0.075x
08, opt runtime 5.471s, model runtime 123.994s, pg runtime 13.410s, speedup 0.108x
09, opt runtime 8.207s, model runtime 20.040s, pg runtime 8.207s, speedup 0.410x
10, opt runtime 5.531s, model runtime 9.930s, pg runtime 5.531s, speedup 0.557x
11, opt runtime 23.224s, model runtime 84.002s, pg runtime 83.100s, speedup 0.989x
12, opt runtime 24.103s, model runtime 105.535s, pg runtime 75.612s, speedup 0.716x
13, opt runtime 3.004s, model runtime 132.069s, pg runtime 17.818s, speedup 0.135x
14, opt runtime 3.244s, model runtime 132.092s, pg runtime 17.707s, speedup 0.134x
15, opt runtime 52.135s, model runtime 689.404s, pg runtime 102.039s, speedup 0.148x
16, opt runtime 54.696s, model runtime 730.826s, pg runtime 98.172s, speedup 0.134x
17, opt runtime 5.629s, model runtime 166.652s, pg runtime 42.976s, speedup 0.258x
18, opt runtime 6.531s, model runtime 164.879s, pg runtime 29.727s, speedup 0.180x
19, opt runtime 1.359s, model runtime 36.157s, pg runtime 1.587s, speedup 0.044x
20, opt runtime 1.308s, model runtime 42.586s, pg runtime 1.528s, speedup 0.036x
21, opt runtime 26.669s, model runtime 84.917s, pg runtime 30.614s, speedup 0.361x
22, opt runtime 28.744s, model runtime 82.073s, pg runtime 29.665s, speedup 0.361x
23, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
24, opt runtime 5.806s, model runtime 97.682s, pg runtime 31.870s, speedup 0.326x
25, opt runtime 1.433s, model runtime 31.041s, pg runtime 1.433s, speedup 0.046x
26, opt runtime 1.420s, model runtime 32.667s, pg runtime 1.420s, speedup 0.043x
27, opt runtime 7.419s, model runtime 25.577s, pg runtime 7.675s, speedup 0.300x
28, opt runtime 7.312s, model runtime 11.686s, pg runtime 7.655s, speedup 0.655x
29, opt runtime 5.291s, model runtime 28.643s, pg runtime 5.291s, speedup 0.185x
30, opt runtime 5.271s, model runtime 26.816s, pg runtime 5.271s, speedup 0.197x
31, opt runtime 24.465s, model runtime 644.779s, pg runtime 644.779s, speedup 1.000x
32, opt runtime 25.478s, model runtime 642.079s, pg runtime 642.079s, speedup 1.000x
33, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
34, opt runtime 41.237s, model runtime 146.513s, pg runtime 78.181s, speedup 0.534x
35, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 32.901s, model runtime 298.179s, pg runtime 32.901s, speedup 0.110x
38, opt runtime 32.492s, model runtime 298.993s, pg runtime 32.492s, speedup 0.109x
39, opt runtime 1.116s, model runtime 28.783s, pg runtime 1.161s, speedup 0.040x
40, opt runtime 1.020s, model runtime 27.004s, pg runtime 1.125s, speedup 0.042x
====================
JOB best validation speedup epoch: 0, train speedup 0.465, test speedup 0.366, val speedup 0.492
TPCH best validation speedup epoch: 0, train speedup 0.465, test speedup 0.563, val speedup 0.492
TPCH Skew best validation speedup epoch: 0, train speedup 0.465, test speedup 0.548, val speedup 0.492
execution cost 0:18:49.547106
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.229401, and there are 23754 training samples
in channel 9
JOB test speedup 0.8981486300369314
TPCH test speedup 5.313185410249522
TPCH skew test speedup 4.851629121539318
Epoch 0/50 |loss: 0.406293| train set 4.763x speedup, test set 4.852x speedup, val set 4.997x speedup, step: 1, train time 16.32 s
JOB test speedup 1.2228092124843593
TPCH test speedup 5.1909224385711665
TPCH skew test speedup 4.9477246955274845
Epoch 1/50 |loss: 0.300187| train set 4.814x speedup, test set 4.948x speedup, val set 4.993x speedup, step: 2, train time 17.07 s
JOB test speedup 1.4689401427464999
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 2/50 |loss: 0.264992| train set 5.036x speedup, test set 5.199x speedup, val set 5.287x speedup, step: 1, train time 16.15 s
JOB test speedup 0.779587959125889
TPCH test speedup 5.24561846240799
TPCH skew test speedup 4.932565540237097
Epoch 3/50 |loss: 0.237506| train set 4.686x speedup, test set 4.933x speedup, val set 4.928x speedup, step: 2, train time 15.60 s
JOB test speedup 1.251805286830438
TPCH test speedup 5.409741420236241
TPCH skew test speedup 5.053415205179654
Epoch 4/50 |loss: 0.227018| train set 4.968x speedup, test set 5.053x speedup, val set 5.038x speedup, step: 3, train time 15.40 s
JOB test speedup 0.7769730287504991
TPCH test speedup 5.184156130282506
TPCH skew test speedup 4.876008057242192
Epoch 5/50 |loss: 0.214315| train set 5.004x speedup, test set 4.876x speedup, val set 5.157x speedup, step: 4, train time 15.30 s
JOB test speedup 1.2123130167136678
TPCH test speedup 5.422160415032833
TPCH skew test speedup 5.108708231841961
Epoch 6/50 |loss: 0.205679| train set 4.958x speedup, test set 5.109x speedup, val set 5.168x speedup, step: 5, train time 15.67 s
JOB test speedup 1.2089071480553808
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 7/50 |loss: 0.195741| train set 5.157x speedup, test set 5.200x speedup, val set 5.293x speedup, step: 1, train time 15.40 s
JOB test speedup 1.4844722374743822
TPCH test speedup 5.506849237511757
TPCH skew test speedup 5.150254268421178
Epoch 8/50 |loss: 0.190037| train set 5.149x speedup, test set 5.150x speedup, val set 5.210x speedup, step: 2, train time 15.29 s
JOB test speedup 1.3338876179585812
TPCH test speedup 5.5612709891985785
TPCH skew test speedup 5.193914109528619
Epoch 9/50 |loss: 0.184722| train set 5.176x speedup, test set 5.194x speedup, val set 5.298x speedup, step: 1, train time 15.27 s
JOB test speedup 1.2677431047305776
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 10/50 |loss: 0.177108| train set 5.146x speedup, test set 5.200x speedup, val set 5.290x speedup, step: 2, train time 15.31 s
JOB test speedup 0.7958702722505178
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 11/50 |loss: 0.174594| train set 5.145x speedup, test set 5.195x speedup, val set 5.300x speedup, step: 1, train time 15.24 s
JOB test speedup 0.7457032816435982
TPCH test speedup 5.48644385906703
TPCH skew test speedup 5.14432302726409
Epoch 12/50 |loss: 0.168339| train set 5.080x speedup, test set 5.144x speedup, val set 5.194x speedup, step: 2, train time 15.21 s
JOB test speedup 0.7915564047433212
TPCH test speedup 5.565703906046872
TPCH skew test speedup 5.199708190540614
Epoch 13/50 |loss: 0.166215| train set 5.159x speedup, test set 5.200x speedup, val set 5.304x speedup, step: 1, train time 15.26 s
JOB test speedup 0.7603987157011844
TPCH test speedup 5.487702909901482
TPCH skew test speedup 5.131300966452527
Epoch 14/50 |loss: 0.160040| train set 5.069x speedup, test set 5.131x speedup, val set 5.180x speedup, step: 2, train time 15.42 s
JOB test speedup 1.22644342494989
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 15/50 |loss: 0.158661| train set 5.190x speedup, test set 5.199x speedup, val set 5.342x speedup, step: 1, train time 15.46 s
JOB test speedup 1.2219552974709054
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 16/50 |loss: 0.155149| train set 5.146x speedup, test set 5.150x speedup, val set 5.224x speedup, step: 2, train time 15.29 s
JOB test speedup 1.2881028088051978
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 17/50 |loss: 0.152742| train set 5.190x speedup, test set 5.200x speedup, val set 5.322x speedup, step: 3, train time 15.23 s
JOB test speedup 0.8413486669523886
TPCH test speedup 5.4396403123451265
TPCH skew test speedup 5.145291922773854
Epoch 18/50 |loss: 0.148619| train set 5.127x speedup, test set 5.145x speedup, val set 5.202x speedup, step: 4, train time 15.35 s
JOB test speedup 1.2418387481481898
TPCH test speedup 5.421763868879961
TPCH skew test speedup 4.935969254598978
Epoch 19/50 |loss: 0.145325| train set 5.114x speedup, test set 4.936x speedup, val set 5.199x speedup, step: 5, train time 16.71 s
JOB test speedup 1.249125619378939
TPCH test speedup 5.496819307383908
TPCH skew test speedup 5.146053438323601
Epoch 20/50 |loss: 0.143552| train set 5.135x speedup, test set 5.146x speedup, val set 5.221x speedup, step: 6, train time 16.42 s
JOB test speedup 1.2345264291135978
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 21/50 |loss: 0.141821| train set 5.146x speedup, test set 5.180x speedup, val set 5.302x speedup, step: 7, train time 15.94 s
JOB test speedup 1.2207550953453765
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 22/50 |loss: 0.138853| train set 5.166x speedup, test set 5.199x speedup, val set 5.327x speedup, step: 8, train time 15.44 s
JOB test speedup 0.8219551636079983
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 23/50 |loss: 0.139009| train set 5.192x speedup, test set 5.179x speedup, val set 5.324x speedup, step: 9, train time 15.45 s
JOB test speedup 1.3306727916934902
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 24/50 |loss: 0.137095| train set 5.157x speedup, test set 5.129x speedup, val set 5.233x speedup, step: 10, train time 15.50 s
JOB test speedup 0.8056674389622807
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 25/50 |loss: 0.134571| train set 5.131x speedup, test set 5.146x speedup, val set 5.235x speedup, step: 11, train time 15.50 s
JOB test speedup 1.225863273945891
TPCH test speedup 5.565703906046872
TPCH skew test speedup 5.199708190540614
Epoch 26/50 |loss: 0.133341| train set 5.193x speedup, test set 5.200x speedup, val set 5.314x speedup, step: 12, train time 15.49 s
JOB test speedup 1.2244717271416137
TPCH test speedup 5.544864377834827
TPCH skew test speedup 5.181801166838486
Epoch 27/50 |loss: 0.131802| train set 5.166x speedup, test set 5.182x speedup, val set 5.283x speedup, step: 13, train time 15.30 s
JOB test speedup 0.773823014196663
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 28/50 |loss: 0.131270| train set 5.187x speedup, test set 5.199x speedup, val set 5.310x speedup, step: 14, train time 15.26 s
JOB test speedup 0.7684326161503173
TPCH test speedup 5.4783125017066
TPCH skew test speedup 5.150651289024296
Epoch 29/50 |loss: 0.126682| train set 5.137x speedup, test set 5.151x speedup, val set 5.219x speedup, step: 15, train time 15.17 s
JOB test speedup 0.7797113478770954
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 30/50 |loss: 0.126448| train set 5.149x speedup, test set 5.150x speedup, val set 5.225x speedup, step: 16, train time 15.46 s
JOB test speedup 1.2640884557343988
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 31/50 |loss: 0.125658| train set 5.196x speedup, test set 5.199x speedup, val set 5.354x speedup, step: 1, train time 15.24 s
JOB test speedup 1.2182378627546269
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 32/50 |loss: 0.125191| train set 5.150x speedup, test set 5.151x speedup, val set 5.168x speedup, step: 2, train time 15.29 s
JOB test speedup 1.2129724954972014
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 33/50 |loss: 0.120616| train set 5.131x speedup, test set 5.150x speedup, val set 5.213x speedup, step: 3, train time 15.26 s
JOB test speedup 1.1986416555530406
TPCH test speedup 5.300554563110671
TPCH skew test speedup 4.978886802936329
Epoch 34/50 |loss: 0.122077| train set 5.186x speedup, test set 4.979x speedup, val set 5.021x speedup, step: 4, train time 15.27 s
JOB test speedup 0.8313842930487251
TPCH test speedup 5.298873726535708
TPCH skew test speedup 5.033841717924928
Epoch 35/50 |loss: 0.125218| train set 5.172x speedup, test set 5.034x speedup, val set 5.290x speedup, step: 5, train time 15.56 s
JOB test speedup 1.135804836084943
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 36/50 |loss: 0.119838| train set 5.186x speedup, test set 5.199x speedup, val set 5.305x speedup, step: 6, train time 16.43 s
JOB test speedup 1.288149564552987
TPCH test speedup 5.503243528635766
TPCH skew test speedup 5.197223823934284
Epoch 37/50 |loss: 0.119058| train set 5.132x speedup, test set 5.197x speedup, val set 5.289x speedup, step: 7, train time 15.85 s
JOB test speedup 0.7779472886586487
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 38/50 |loss: 0.115532| train set 5.186x speedup, test set 5.199x speedup, val set 5.339x speedup, step: 8, train time 16.21 s
JOB test speedup 0.8020438506404831
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 39/50 |loss: 0.115521| train set 5.132x speedup, test set 5.146x speedup, val set 5.210x speedup, step: 9, train time 15.28 s
JOB test speedup 0.8197246228198256
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 40/50 |loss: 0.116456| train set 5.154x speedup, test set 5.179x speedup, val set 5.233x speedup, step: 10, train time 15.90 s
JOB test speedup 0.7832386256798982
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 41/50 |loss: 0.116443| train set 5.137x speedup, test set 5.131x speedup, val set 5.165x speedup, step: 11, train time 15.30 s
JOB test speedup 1.1952824433671534
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 42/50 |loss: 0.113784| train set 5.194x speedup, test set 5.199x speedup, val set 5.290x speedup, step: 12, train time 15.30 s
JOB test speedup 0.8072892833206071
TPCH test speedup 5.377954730978787
TPCH skew test speedup 4.974330556765073
Epoch 43/50 |loss: 0.115869| train set 5.196x speedup, test set 4.974x speedup, val set 5.336x speedup, step: 13, train time 15.35 s
JOB test speedup 0.7938682317551385
TPCH test speedup 5.4783125017066
TPCH skew test speedup 5.130589036945182
Epoch 44/50 |loss: 0.110803| train set 5.133x speedup, test set 5.131x speedup, val set 5.219x speedup, step: 14, train time 15.28 s
JOB test speedup 1.2465081226289312
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 45/50 |loss: 0.112006| train set 5.189x speedup, test set 5.199x speedup, val set 5.319x speedup, step: 15, train time 15.40 s
JOB test speedup 1.233514697934153
TPCH test speedup 5.564412360355972
TPCH skew test speedup 5.201130068754202
Epoch 46/50 |loss: 0.110749| train set 5.190x speedup, test set 5.201x speedup, val set 5.322x speedup, step: 16, train time 15.76 s
JOB test speedup 1.1865120986224262
TPCH test speedup 5.279966614535951
TPCH skew test speedup 4.978949994429684
Epoch 47/50 |loss: 0.111848| train set 5.159x speedup, test set 4.979x speedup, val set 4.976x speedup, step: 17, train time 15.67 s
JOB test speedup 0.7880248290203186
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 48/50 |loss: 0.111733| train set 5.171x speedup, test set 5.195x speedup, val set 5.323x speedup, step: 18, train time 15.60 s
JOB test speedup 1.192674708495456
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 49/50 |loss: 0.109044| train set 5.195x speedup, test set 5.179x speedup, val set 5.324x speedup, step: 19, train time 16.31 s
Training per epoch cost 15.583 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.084s, pg runtime 0.081s, speedup 0.961x
02, opt runtime 1.299s, model runtime 3.393s, pg runtime 5.855s, speedup 1.726x
03, opt runtime 0.207s, model runtime 0.275s, pg runtime 0.207s, speedup 0.751x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 50.837s, pg runtime 13.945s, speedup 0.274x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 2.962s, pg runtime 6.876s, speedup 2.321x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.064s, model runtime 0.072s, pg runtime 0.089s, speedup 1.239x
21, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
22, opt runtime 0.093s, model runtime 0.096s, pg runtime 2.389s, speedup 24.808x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.089s, pg runtime 0.239s, speedup 2.681x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 31, train speedup 5.196, test speedup 1.264, val speedup 5.354
TPCH best validation speedup epoch: 31, train speedup 5.196, test speedup 5.557, val speedup 5.354
TPCH Skew best validation speedup epoch: 31, train speedup 5.196, test speedup 5.199, val speedup 5.354
execution cost 0:13:56.351592
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.293278, and there are 23754 training samples
in channel 9
JOB test speedup 0.8331577938923951
TPCH test speedup 4.901261754850602
TPCH skew test speedup 4.677215427801604
Epoch 0/50 |loss: 0.404732| train set 4.261x speedup, test set 4.677x speedup, val set 4.627x speedup, step: 1, train time 16.68 s
JOB test speedup 1.1821812960528857
TPCH test speedup 5.138501594988351
TPCH skew test speedup 4.906174935725616
Epoch 1/50 |loss: 0.296631| train set 4.614x speedup, test set 4.906x speedup, val set 4.912x speedup, step: 1, train time 15.78 s
JOB test speedup 1.4884343965015887
TPCH test speedup 5.140800338693065
TPCH skew test speedup 4.9013825112474665
Epoch 2/50 |loss: 0.265597| train set 4.587x speedup, test set 4.901x speedup, val set 4.882x speedup, step: 2, train time 15.74 s
JOB test speedup 1.2277517254512962
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 3/50 |loss: 0.241005| train set 5.104x speedup, test set 5.150x speedup, val set 5.238x speedup, step: 1, train time 15.80 s
JOB test speedup 1.3632191442951522
TPCH test speedup 5.346688381294142
TPCH skew test speedup 5.011243750239366
Epoch 4/50 |loss: 0.225775| train set 4.926x speedup, test set 5.011x speedup, val set 4.997x speedup, step: 2, train time 15.73 s
JOB test speedup 0.780803682945262
TPCH test speedup 5.429661698117445
TPCH skew test speedup 5.086904290228408
Epoch 5/50 |loss: 0.213963| train set 5.009x speedup, test set 5.087x speedup, val set 5.151x speedup, step: 3, train time 15.60 s
JOB test speedup 1.2354841749355114
TPCH test speedup 5.422160415032833
TPCH skew test speedup 5.108708231841961
Epoch 6/50 |loss: 0.205293| train set 4.941x speedup, test set 5.109x speedup, val set 5.191x speedup, step: 4, train time 15.42 s
JOB test speedup 1.2136864846927164
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 7/50 |loss: 0.197164| train set 5.151x speedup, test set 5.199x speedup, val set 5.319x speedup, step: 1, train time 15.48 s
JOB test speedup 1.4452238954783865
TPCH test speedup 5.506849237511757
TPCH skew test speedup 5.150254268421178
Epoch 8/50 |loss: 0.191549| train set 5.149x speedup, test set 5.150x speedup, val set 5.236x speedup, step: 2, train time 15.35 s
JOB test speedup 1.2418171472445332
TPCH test speedup 5.565703906046872
TPCH skew test speedup 5.199708190540614
Epoch 9/50 |loss: 0.186319| train set 5.139x speedup, test set 5.200x speedup, val set 5.297x speedup, step: 3, train time 15.45 s
JOB test speedup 1.2446701121584336
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 10/50 |loss: 0.177678| train set 5.157x speedup, test set 5.200x speedup, val set 5.304x speedup, step: 4, train time 15.22 s
JOB test speedup 0.7872703405493572
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 11/50 |loss: 0.174170| train set 5.159x speedup, test set 5.195x speedup, val set 5.300x speedup, step: 5, train time 15.29 s
JOB test speedup 0.8226463630765166
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 12/50 |loss: 0.169527| train set 5.106x speedup, test set 5.150x speedup, val set 5.203x speedup, step: 6, train time 15.32 s
JOB test speedup 1.1818229961224116
TPCH test speedup 5.565703906046872
TPCH skew test speedup 5.199708190540614
Epoch 13/50 |loss: 0.168219| train set 5.157x speedup, test set 5.200x speedup, val set 5.341x speedup, step: 1, train time 15.56 s
JOB test speedup 1.134722482081564
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 14/50 |loss: 0.163175| train set 5.101x speedup, test set 5.131x speedup, val set 5.182x speedup, step: 2, train time 15.39 s
JOB test speedup 1.2294133195417096
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 15/50 |loss: 0.162642| train set 5.167x speedup, test set 5.199x speedup, val set 5.302x speedup, step: 3, train time 15.58 s
JOB test speedup 1.2324138679737342
TPCH test speedup 5.506849237511757
TPCH skew test speedup 5.150254268421178
Epoch 16/50 |loss: 0.156290| train set 5.150x speedup, test set 5.150x speedup, val set 5.185x speedup, step: 4, train time 15.50 s
JOB test speedup 1.2226877723989626
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 17/50 |loss: 0.154563| train set 5.146x speedup, test set 5.150x speedup, val set 5.222x speedup, step: 5, train time 17.06 s
JOB test speedup 1.1577175272650764
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 18/50 |loss: 0.150941| train set 5.133x speedup, test set 5.150x speedup, val set 5.210x speedup, step: 6, train time 16.40 s
JOB test speedup 1.1963091411355173
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 19/50 |loss: 0.146796| train set 5.152x speedup, test set 5.150x speedup, val set 5.217x speedup, step: 7, train time 15.97 s
JOB test speedup 1.1935579505967304
TPCH test speedup 5.4964280980930065
TPCH skew test speedup 5.144379806791539
Epoch 20/50 |loss: 0.146955| train set 5.118x speedup, test set 5.144x speedup, val set 5.223x speedup, step: 8, train time 15.70 s
JOB test speedup 1.1798838366881654
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 21/50 |loss: 0.144920| train set 5.144x speedup, test set 5.129x speedup, val set 5.207x speedup, step: 9, train time 15.95 s
JOB test speedup 1.1885180701731224
TPCH test speedup 5.565703906046872
TPCH skew test speedup 5.199708190540614
Epoch 22/50 |loss: 0.141763| train set 5.188x speedup, test set 5.200x speedup, val set 5.327x speedup, step: 10, train time 15.87 s
JOB test speedup 1.2418382331895175
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 23/50 |loss: 0.142682| train set 5.152x speedup, test set 5.129x speedup, val set 5.208x speedup, step: 11, train time 15.60 s
JOB test speedup 1.2528680640946182
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 24/50 |loss: 0.137546| train set 5.157x speedup, test set 5.129x speedup, val set 5.211x speedup, step: 12, train time 15.58 s
JOB test speedup 1.1963142939033902
TPCH test speedup 5.44043412162474
TPCH skew test speedup 5.125684073579842
Epoch 25/50 |loss: 0.138376| train set 5.132x speedup, test set 5.126x speedup, val set 5.195x speedup, step: 13, train time 15.76 s
JOB test speedup 1.1798838366881654
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 26/50 |loss: 0.136157| train set 5.184x speedup, test set 5.179x speedup, val set 5.286x speedup, step: 14, train time 15.47 s
JOB test speedup 1.134960341277728
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 27/50 |loss: 0.132841| train set 5.131x speedup, test set 5.131x speedup, val set 5.195x speedup, step: 15, train time 15.74 s
JOB test speedup 1.166768462771528
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 28/50 |loss: 0.133644| train set 5.113x speedup, test set 5.131x speedup, val set 5.183x speedup, step: 16, train time 15.60 s
JOB test speedup 1.1794520626087153
TPCH test speedup 5.4783125017066
TPCH skew test speedup 5.150651289024296
Epoch 29/50 |loss: 0.128468| train set 5.107x speedup, test set 5.151x speedup, val set 5.185x speedup, step: 17, train time 15.36 s
JOB test speedup 1.1347266602738526
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.129483480361338
Epoch 30/50 |loss: 0.129525| train set 5.148x speedup, test set 5.129x speedup, val set 5.222x speedup, step: 18, train time 15.61 s
JOB test speedup 1.1771001691934577
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 31/50 |loss: 0.126333| train set 5.193x speedup, test set 5.199x speedup, val set 5.336x speedup, step: 19, train time 15.51 s
JOB test speedup 1.1548260659801588
TPCH test speedup 5.5018876904549385
TPCH skew test speedup 5.130521937739417
Epoch 32/50 |loss: 0.126478| train set 5.150x speedup, test set 5.131x speedup, val set 5.208x speedup, step: 20, train time 15.54 s
JOB test speedup 1.211818889401435
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 33/50 |loss: 0.123564| train set 5.131x speedup, test set 5.146x speedup, val set 5.208x speedup, step: 21, train time 15.50 s
JOB test speedup 1.153182363305571
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 34/50 |loss: 0.121960| train set 5.190x speedup, test set 5.151x speedup, val set 5.223x speedup, step: 22, train time 15.77 s
JOB test speedup 1.2304028026755813
TPCH test speedup 5.245499930833579
TPCH skew test speedup 4.987478487399089
Epoch 35/50 |loss: 0.123961| train set 5.152x speedup, test set 4.987x speedup, val set 4.974x speedup, step: 23, train time 15.51 s
JOB test speedup 1.2070006364332246
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 36/50 |loss: 0.121453| train set 5.185x speedup, test set 5.199x speedup, val set 5.301x speedup, step: 24, train time 15.57 s
JOB test speedup 1.1715069889850527
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 37/50 |loss: 0.120474| train set 5.155x speedup, test set 5.129x speedup, val set 5.194x speedup, step: 25, train time 15.52 s
JOB test speedup 0.7865923585163432
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 38/50 |loss: 0.118361| train set 5.185x speedup, test set 5.199x speedup, val set 5.319x speedup, step: 26, train time 15.48 s
JOB test speedup 1.2538578573428023
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 39/50 |loss: 0.116105| train set 5.132x speedup, test set 5.150x speedup, val set 5.244x speedup, step: 27, train time 15.57 s
JOB test speedup 0.7975921436717829
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 40/50 |loss: 0.116551| train set 5.158x speedup, test set 5.129x speedup, val set 5.233x speedup, step: 28, train time 15.47 s
JOB test speedup 1.1832643362065698
TPCH test speedup 5.537982220539701
TPCH skew test speedup 5.179664220650327
Epoch 41/50 |loss: 0.116709| train set 5.138x speedup, test set 5.180x speedup, val set 5.205x speedup, step: 29, train time 15.45 s
JOB test speedup 1.1975590635142992
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 42/50 |loss: 0.115585| train set 5.194x speedup, test set 5.199x speedup, val set 5.313x speedup, step: 30, train time 15.50 s
JOB test speedup 0.7943693233731299
TPCH test speedup 5.532450795100798
TPCH skew test speedup 5.19378919946867
Epoch 43/50 |loss: 0.116117| train set 5.146x speedup, test set 5.194x speedup, val set 5.295x speedup, step: 31, train time 15.46 s
JOB test speedup 0.8051654600718285
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 44/50 |loss: 0.111740| train set 5.159x speedup, test set 5.129x speedup, val set 5.208x speedup, step: 32, train time 15.48 s
JOB test speedup 1.22665855572798
TPCH test speedup 5.500803313904868
TPCH skew test speedup 5.1781161043839585
Epoch 45/50 |loss: 0.114352| train set 5.194x speedup, test set 5.178x speedup, val set 5.303x speedup, step: 33, train time 15.46 s
JOB test speedup 1.260231470025772
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 46/50 |loss: 0.111675| train set 5.191x speedup, test set 5.179x speedup, val set 5.307x speedup, step: 34, train time 15.96 s
JOB test speedup 1.1580988929406426
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 47/50 |loss: 0.112350| train set 5.179x speedup, test set 5.150x speedup, val set 5.199x speedup, step: 35, train time 15.60 s
JOB test speedup 0.7982856462954725
TPCH test speedup 5.498000150190029
TPCH skew test speedup 5.132151140760722
Epoch 48/50 |loss: 0.112039| train set 5.149x speedup, test set 5.132x speedup, val set 5.244x speedup, step: 36, train time 15.45 s
JOB test speedup 1.2214570790408725
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 49/50 |loss: 0.110167| train set 5.159x speedup, test set 5.129x speedup, val set 5.229x speedup, step: 37, train time 15.56 s
Training per epoch cost 15.639 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 3.108s, pg runtime 57.198s, speedup 18.401x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.064s, model runtime 0.072s, pg runtime 0.089s, speedup 1.239x
21, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.631s, pg runtime 7.675s, speedup 1.006x
28, opt runtime 7.312s, model runtime 7.596s, pg runtime 7.655s, speedup 1.008x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 13, train speedup 5.157, test speedup 1.182, val speedup 5.341
TPCH best validation speedup epoch: 13, train speedup 5.157, test speedup 5.566, val speedup 5.341
TPCH Skew best validation speedup epoch: 13, train speedup 5.157, test speedup 5.200, val speedup 5.341
execution cost 0:13:59.188709
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.209264, and there are 23754 training samples
in channel 9
JOB test speedup 1.1736147019616878
TPCH test speedup 5.219126756881995
TPCH skew test speedup 5.08858108653135
Epoch 0/50 |loss: 0.407640| train set 4.817x speedup, test set 5.089x speedup, val set 5.247x speedup, step: 1, train time 16.14 s
JOB test speedup 1.1526850806923639
TPCH test speedup 5.1190550227580225
TPCH skew test speedup 4.648556140741823
Epoch 1/50 |loss: 0.300597| train set 4.679x speedup, test set 4.649x speedup, val set 4.614x speedup, step: 2, train time 15.27 s
JOB test speedup 1.5229508855427574
TPCH test speedup 5.5371596918822625
TPCH skew test speedup 5.199688043727785
Epoch 2/50 |loss: 0.263563| train set 5.146x speedup, test set 5.200x speedup, val set 5.324x speedup, step: 1, train time 14.96 s
JOB test speedup 0.8118727705430702
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 3/50 |loss: 0.238837| train set 5.081x speedup, test set 5.146x speedup, val set 5.226x speedup, step: 2, train time 14.94 s
JOB test speedup 1.191547315203849
TPCH test speedup 5.53315864312414
TPCH skew test speedup 5.158291595997125
Epoch 4/50 |loss: 0.225040| train set 5.121x speedup, test set 5.158x speedup, val set 5.258x speedup, step: 3, train time 14.97 s
JOB test speedup 0.612722237001965
TPCH test speedup 5.4850470623747345
TPCH skew test speedup 5.1527643579573885
Epoch 5/50 |loss: 0.214084| train set 4.915x speedup, test set 5.153x speedup, val set 5.174x speedup, step: 4, train time 15.06 s
JOB test speedup 1.2146709701087177
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 6/50 |loss: 0.202161| train set 5.169x speedup, test set 5.199x speedup, val set 5.352x speedup, step: 1, train time 15.01 s
JOB test speedup 1.2081431548873116
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 7/50 |loss: 0.191892| train set 5.152x speedup, test set 5.199x speedup, val set 5.316x speedup, step: 2, train time 14.76 s
JOB test speedup 1.3480247419259588
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 8/50 |loss: 0.187909| train set 5.146x speedup, test set 5.150x speedup, val set 5.238x speedup, step: 3, train time 14.86 s
JOB test speedup 1.2217433445540287
TPCH test speedup 5.398154084406458
TPCH skew test speedup 5.090696128160483
Epoch 9/50 |loss: 0.182153| train set 5.068x speedup, test set 5.091x speedup, val set 5.181x speedup, step: 4, train time 14.95 s
JOB test speedup 1.3023338547052428
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 10/50 |loss: 0.174851| train set 5.164x speedup, test set 5.199x speedup, val set 5.293x speedup, step: 5, train time 14.84 s
JOB test speedup 0.8130295724183825
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 11/50 |loss: 0.172691| train set 5.158x speedup, test set 5.195x speedup, val set 5.300x speedup, step: 6, train time 14.92 s
JOB test speedup 0.843648462954618
TPCH test speedup 5.42682927422822
TPCH skew test speedup 5.147536912823368
Epoch 12/50 |loss: 0.166387| train set 5.085x speedup, test set 5.148x speedup, val set 5.203x speedup, step: 7, train time 14.90 s
JOB test speedup 1.2547893000856123
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 13/50 |loss: 0.166553| train set 5.160x speedup, test set 5.196x speedup, val set 5.320x speedup, step: 8, train time 14.92 s
JOB test speedup 1.1705305856161445
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 14/50 |loss: 0.156987| train set 5.125x speedup, test set 5.131x speedup, val set 5.183x speedup, step: 9, train time 14.68 s
JOB test speedup 1.206734458085013
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 15/50 |loss: 0.157027| train set 5.167x speedup, test set 5.195x speedup, val set 5.287x speedup, step: 10, train time 14.94 s
JOB test speedup 1.233669437483894
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 16/50 |loss: 0.154246| train set 5.153x speedup, test set 5.150x speedup, val set 5.244x speedup, step: 11, train time 15.00 s
JOB test speedup 1.1939145161549163
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 17/50 |loss: 0.147834| train set 5.152x speedup, test set 5.150x speedup, val set 5.244x speedup, step: 12, train time 14.90 s
JOB test speedup 1.197547807767377
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 18/50 |loss: 0.146966| train set 5.127x speedup, test set 5.146x speedup, val set 5.213x speedup, step: 13, train time 14.97 s
JOB test speedup 1.1437549627871058
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 19/50 |loss: 0.141886| train set 5.157x speedup, test set 5.150x speedup, val set 5.225x speedup, step: 14, train time 14.98 s
JOB test speedup 1.2285587354225744
TPCH test speedup 5.4947508198940405
TPCH skew test speedup 5.143335732527889
Epoch 20/50 |loss: 0.142149| train set 5.134x speedup, test set 5.143x speedup, val set 5.258x speedup, step: 15, train time 14.83 s
JOB test speedup 1.179467084719152
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 21/50 |loss: 0.140557| train set 5.140x speedup, test set 5.129x speedup, val set 5.219x speedup, step: 16, train time 14.98 s
JOB test speedup 1.1688428534604824
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 22/50 |loss: 0.136281| train set 5.156x speedup, test set 5.196x speedup, val set 5.320x speedup, step: 17, train time 14.97 s
JOB test speedup 1.2508190230617875
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 23/50 |loss: 0.137441| train set 5.156x speedup, test set 5.129x speedup, val set 5.195x speedup, step: 18, train time 14.97 s
JOB test speedup 1.2162810456529354
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 24/50 |loss: 0.134432| train set 5.160x speedup, test set 5.129x speedup, val set 5.238x speedup, step: 19, train time 15.00 s
JOB test speedup 1.2298216437643468
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 25/50 |loss: 0.132732| train set 5.132x speedup, test set 5.146x speedup, val set 5.232x speedup, step: 20, train time 15.06 s
JOB test speedup 1.1652648610482097
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 26/50 |loss: 0.130950| train set 5.144x speedup, test set 5.179x speedup, val set 5.227x speedup, step: 21, train time 15.16 s
JOB test speedup 1.146323316110182
TPCH test speedup 5.488119519341393
TPCH skew test speedup 5.13351303636653
Epoch 27/50 |loss: 0.127965| train set 5.124x speedup, test set 5.134x speedup, val set 5.194x speedup, step: 22, train time 15.06 s
JOB test speedup 1.1794681692479203
TPCH test speedup 5.5018876904549385
TPCH skew test speedup 5.130521937739417
Epoch 28/50 |loss: 0.127471| train set 5.143x speedup, test set 5.131x speedup, val set 5.230x speedup, step: 23, train time 15.06 s
JOB test speedup 1.1706290376335227
TPCH test speedup 5.419011906134256
TPCH skew test speedup 5.146820471271565
Epoch 29/50 |loss: 0.125279| train set 5.165x speedup, test set 5.147x speedup, val set 5.297x speedup, step: 24, train time 15.06 s
JOB test speedup 1.1592546879351562
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 30/50 |loss: 0.124015| train set 5.148x speedup, test set 5.150x speedup, val set 5.243x speedup, step: 25, train time 15.10 s
JOB test speedup 1.1780865028644787
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 31/50 |loss: 0.122559| train set 5.192x speedup, test set 5.199x speedup, val set 5.336x speedup, step: 26, train time 15.20 s
JOB test speedup 1.1886748924878991
TPCH test speedup 5.5018876904549385
TPCH skew test speedup 5.130521937739417
Epoch 32/50 |loss: 0.123793| train set 5.152x speedup, test set 5.131x speedup, val set 5.174x speedup, step: 27, train time 15.06 s
JOB test speedup 1.1955640124825984
TPCH test speedup 5.44043412162474
TPCH skew test speedup 5.125684073579842
Epoch 33/50 |loss: 0.117577| train set 5.134x speedup, test set 5.126x speedup, val set 5.233x speedup, step: 28, train time 15.00 s
JOB test speedup 1.1997200884381407
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.129483480361338
Epoch 34/50 |loss: 0.117926| train set 5.194x speedup, test set 5.129x speedup, val set 5.244x speedup, step: 29, train time 15.10 s
JOB test speedup 1.336353521717454
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 35/50 |loss: 0.119108| train set 5.172x speedup, test set 5.150x speedup, val set 5.244x speedup, step: 30, train time 14.96 s
JOB test speedup 1.2015457248329344
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 36/50 |loss: 0.118127| train set 5.185x speedup, test set 5.199x speedup, val set 5.335x speedup, step: 31, train time 14.97 s
JOB test speedup 1.1654609080803742
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 37/50 |loss: 0.115373| train set 5.193x speedup, test set 5.179x speedup, val set 5.321x speedup, step: 32, train time 14.99 s
JOB test speedup 0.7959278048676373
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 38/50 |loss: 0.114428| train set 5.185x speedup, test set 5.199x speedup, val set 5.338x speedup, step: 33, train time 15.07 s
JOB test speedup 1.2001902804224356
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 39/50 |loss: 0.112926| train set 5.154x speedup, test set 5.150x speedup, val set 5.244x speedup, step: 34, train time 15.08 s
JOB test speedup 1.345850058672031
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 40/50 |loss: 0.113833| train set 5.155x speedup, test set 5.129x speedup, val set 5.230x speedup, step: 35, train time 15.06 s
JOB test speedup 1.2048409231633785
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 41/50 |loss: 0.113150| train set 5.177x speedup, test set 5.131x speedup, val set 5.183x speedup, step: 36, train time 15.10 s
JOB test speedup 1.1543679635381712
TPCH test speedup 5.309986319588072
TPCH skew test speedup 5.031868894269031
Epoch 42/50 |loss: 0.111598| train set 5.175x speedup, test set 5.032x speedup, val set 5.086x speedup, step: 37, train time 14.93 s
JOB test speedup 0.7888837050800399
TPCH test speedup 5.419011906134256
TPCH skew test speedup 5.146820471271565
Epoch 43/50 |loss: 0.112971| train set 5.163x speedup, test set 5.147x speedup, val set 5.221x speedup, step: 38, train time 15.07 s
JOB test speedup 0.7842231379702258
TPCH test speedup 5.419011906134256
TPCH skew test speedup 5.146820471271565
Epoch 44/50 |loss: 0.108193| train set 5.125x speedup, test set 5.147x speedup, val set 5.232x speedup, step: 39, train time 15.02 s
JOB test speedup 1.219212387757851
TPCH test speedup 5.507446913378796
TPCH skew test speedup 5.149837546658873
Epoch 45/50 |loss: 0.109173| train set 5.191x speedup, test set 5.150x speedup, val set 5.222x speedup, step: 40, train time 15.15 s
JOB test speedup 1.2136201426469886
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.181732721424572
Epoch 46/50 |loss: 0.108055| train set 5.192x speedup, test set 5.182x speedup, val set 5.285x speedup, step: 41, train time 15.46 s
JOB test speedup 1.2185855114290824
TPCH test speedup 5.24561846240799
TPCH skew test speedup 4.932565540237097
Epoch 47/50 |loss: 0.109473| train set 5.178x speedup, test set 4.933x speedup, val set 4.937x speedup, step: 42, train time 15.14 s
JOB test speedup 0.7986750968138484
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 48/50 |loss: 0.108253| train set 5.192x speedup, test set 5.150x speedup, val set 5.243x speedup, step: 43, train time 15.06 s
JOB test speedup 1.2109927308789348
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 49/50 |loss: 0.102870| train set 5.159x speedup, test set 5.129x speedup, val set 5.230x speedup, step: 44, train time 14.95 s
Training per epoch cost 15.032 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.064s, model runtime 0.072s, pg runtime 0.089s, speedup 1.239x
21, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
22, opt runtime 0.093s, model runtime 0.093s, pg runtime 2.389s, speedup 25.590x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 6, train speedup 5.169, test speedup 1.215, val speedup 5.352
TPCH best validation speedup epoch: 6, train speedup 5.169, test speedup 5.557, val speedup 5.352
TPCH Skew best validation speedup epoch: 6, train speedup 5.169, test speedup 5.199, val speedup 5.352
execution cost 0:13:26.941394
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.268919, and there are 23754 training samples
in channel 9
JOB test speedup 0.8608132005043834
TPCH test speedup 5.280516053883203
TPCH skew test speedup 4.9785605320282205
Epoch 0/50 |loss: 0.405304| train set 4.660x speedup, test set 4.979x speedup, val set 4.988x speedup, step: 1, train time 16.41 s
JOB test speedup 1.3055771132108724
TPCH test speedup 5.394880458019985
TPCH skew test speedup 5.107859549568419
Epoch 1/50 |loss: 0.303049| train set 4.858x speedup, test set 5.108x speedup, val set 5.151x speedup, step: 1, train time 15.37 s
JOB test speedup 2.2841511204705727
TPCH test speedup 5.2922888059590685
TPCH skew test speedup 4.941243875729237
Epoch 2/50 |loss: 0.265876| train set 4.921x speedup, test set 4.941x speedup, val set 4.925x speedup, step: 2, train time 15.15 s
JOB test speedup 1.1454375327291038
TPCH test speedup 5.153017090890981
TPCH skew test speedup 4.853875467263665
Epoch 3/50 |loss: 0.239722| train set 4.690x speedup, test set 4.854x speedup, val set 4.843x speedup, step: 3, train time 15.08 s
JOB test speedup 1.206423918043334
TPCH test speedup 5.441284109160502
TPCH skew test speedup 5.146336791465035
Epoch 4/50 |loss: 0.227348| train set 5.113x speedup, test set 5.146x speedup, val set 5.178x speedup, step: 1, train time 14.96 s
JOB test speedup 0.8066446132451045
TPCH test speedup 5.184156130282506
TPCH skew test speedup 4.876008057242192
Epoch 5/50 |loss: 0.214618| train set 4.720x speedup, test set 4.876x speedup, val set 4.857x speedup, step: 2, train time 15.19 s
JOB test speedup 1.2461067669771624
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 6/50 |loss: 0.205445| train set 5.146x speedup, test set 5.199x speedup, val set 5.329x speedup, step: 1, train time 15.10 s
JOB test speedup 1.1893503619552064
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 7/50 |loss: 0.193183| train set 5.157x speedup, test set 5.199x speedup, val set 5.319x speedup, step: 2, train time 15.05 s
JOB test speedup 1.3435903811831318
TPCH test speedup 5.501075847949165
TPCH skew test speedup 5.15016688897055
Epoch 8/50 |loss: 0.189378| train set 5.146x speedup, test set 5.150x speedup, val set 5.239x speedup, step: 3, train time 15.06 s
JOB test speedup 1.349338160515252
TPCH test speedup 5.479673324763843
TPCH skew test speedup 5.1911504997683915
Epoch 9/50 |loss: 0.182163| train set 5.147x speedup, test set 5.191x speedup, val set 5.282x speedup, step: 4, train time 14.95 s
JOB test speedup 1.3036103294225574
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 10/50 |loss: 0.175424| train set 5.157x speedup, test set 5.200x speedup, val set 5.298x speedup, step: 5, train time 15.06 s
JOB test speedup 1.2810355174492691
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 11/50 |loss: 0.173664| train set 5.159x speedup, test set 5.195x speedup, val set 5.300x speedup, step: 6, train time 15.01 s
JOB test speedup 1.288194122847131
TPCH test speedup 5.111727498007384
TPCH skew test speedup 4.872635267112842
Epoch 12/50 |loss: 0.167505| train set 5.092x speedup, test set 4.873x speedup, val set 4.836x speedup, step: 7, train time 15.18 s
JOB test speedup 1.2197765089287782
TPCH test speedup 5.5343945797082235
TPCH skew test speedup 5.164791807650883
Epoch 13/50 |loss: 0.164193| train set 5.056x speedup, test set 5.165x speedup, val set 5.284x speedup, step: 8, train time 15.26 s
JOB test speedup 1.1981022941633208
TPCH test speedup 5.4783125017066
TPCH skew test speedup 5.150651289024296
Epoch 14/50 |loss: 0.160362| train set 5.122x speedup, test set 5.151x speedup, val set 5.196x speedup, step: 9, train time 15.06 s
JOB test speedup 1.2993791688529261
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 15/50 |loss: 0.155945| train set 5.191x speedup, test set 5.199x speedup, val set 5.316x speedup, step: 10, train time 15.00 s
JOB test speedup 1.3187811383602246
TPCH test speedup 5.506849237511757
TPCH skew test speedup 5.150254268421178
Epoch 16/50 |loss: 0.154895| train set 5.150x speedup, test set 5.150x speedup, val set 5.255x speedup, step: 11, train time 15.26 s
JOB test speedup 1.3102568497946037
TPCH test speedup 5.5566648132494585
TPCH skew test speedup 5.201717605558688
Epoch 17/50 |loss: 0.150748| train set 5.189x speedup, test set 5.202x speedup, val set 5.336x speedup, step: 1, train time 15.06 s
JOB test speedup 1.2575240558148657
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 18/50 |loss: 0.147212| train set 5.164x speedup, test set 5.195x speedup, val set 5.354x speedup, step: 1, train time 15.25 s
JOB test speedup 1.1749007467729327
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 19/50 |loss: 0.144053| train set 5.151x speedup, test set 5.150x speedup, val set 5.244x speedup, step: 2, train time 15.10 s
JOB test speedup 1.140943815911967
TPCH test speedup 5.496223935812079
TPCH skew test speedup 5.146469547870617
Epoch 20/50 |loss: 0.142780| train set 5.135x speedup, test set 5.146x speedup, val set 5.229x speedup, step: 3, train time 15.05 s
JOB test speedup 1.2722563366718254
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 21/50 |loss: 0.141863| train set 5.190x speedup, test set 5.150x speedup, val set 5.335x speedup, step: 4, train time 14.96 s
JOB test speedup 1.2816233251527231
TPCH test speedup 5.5343945797082235
TPCH skew test speedup 5.164791807650883
Epoch 22/50 |loss: 0.137936| train set 5.085x speedup, test set 5.165x speedup, val set 5.337x speedup, step: 5, train time 15.02 s
JOB test speedup 1.3223788568206862
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 23/50 |loss: 0.138534| train set 5.154x speedup, test set 5.150x speedup, val set 5.244x speedup, step: 6, train time 15.07 s
JOB test speedup 1.3202704132124814
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.129483480361338
Epoch 24/50 |loss: 0.133568| train set 5.157x speedup, test set 5.129x speedup, val set 5.229x speedup, step: 7, train time 15.37 s
JOB test speedup 0.8182238748066212
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 25/50 |loss: 0.134411| train set 5.134x speedup, test set 5.146x speedup, val set 5.232x speedup, step: 8, train time 15.07 s
JOB test speedup 1.269468836837052
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 26/50 |loss: 0.132910| train set 5.185x speedup, test set 5.150x speedup, val set 5.339x speedup, step: 9, train time 15.09 s
JOB test speedup 1.278059356794654
TPCH test speedup 5.449357379602294
TPCH skew test speedup 5.09659172894361
Epoch 27/50 |loss: 0.129985| train set 5.066x speedup, test set 5.097x speedup, val set 5.159x speedup, step: 10, train time 15.17 s
JOB test speedup 1.2580057789613455
TPCH test speedup 5.498000150190029
TPCH skew test speedup 5.1522256352556735
Epoch 28/50 |loss: 0.130077| train set 5.192x speedup, test set 5.152x speedup, val set 5.326x speedup, step: 11, train time 15.35 s
JOB test speedup 1.2343874275802458
TPCH test speedup 5.419011906134256
TPCH skew test speedup 5.146820471271565
Epoch 29/50 |loss: 0.126139| train set 5.114x speedup, test set 5.147x speedup, val set 5.207x speedup, step: 12, train time 15.16 s
JOB test speedup 1.2706386471075324
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 30/50 |loss: 0.126134| train set 5.148x speedup, test set 5.150x speedup, val set 5.244x speedup, step: 13, train time 15.25 s
JOB test speedup 1.2966398455295132
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 31/50 |loss: 0.124679| train set 5.196x speedup, test set 5.199x speedup, val set 5.350x speedup, step: 14, train time 15.26 s
JOB test speedup 1.279793310789803
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 32/50 |loss: 0.123440| train set 5.150x speedup, test set 5.151x speedup, val set 5.191x speedup, step: 15, train time 15.34 s
JOB test speedup 1.23185472124779
TPCH test speedup 5.440700706436875
TPCH skew test speedup 5.1467529468389985
Epoch 33/50 |loss: 0.118372| train set 5.132x speedup, test set 5.147x speedup, val set 5.223x speedup, step: 16, train time 15.19 s
JOB test speedup 1.232441529920839
TPCH test speedup 5.246899116610936
TPCH skew test speedup 4.914163213091722
Epoch 34/50 |loss: 0.119746| train set 5.150x speedup, test set 4.914x speedup, val set 5.084x speedup, step: 17, train time 15.20 s
JOB test speedup 1.3288050489232486
TPCH test speedup 5.4850470623747345
TPCH skew test speedup 5.1527643579573885
Epoch 35/50 |loss: 0.122447| train set 5.186x speedup, test set 5.153x speedup, val set 5.205x speedup, step: 18, train time 15.41 s
JOB test speedup 1.2840878254497157
TPCH test speedup 5.248858128329533
TPCH skew test speedup 4.9862702517723525
Epoch 36/50 |loss: 0.119369| train set 5.179x speedup, test set 4.986x speedup, val set 5.319x speedup, step: 19, train time 15.32 s
JOB test speedup 1.2304190406225728
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.129483480361338
Epoch 37/50 |loss: 0.118360| train set 5.196x speedup, test set 5.129x speedup, val set 5.242x speedup, step: 20, train time 15.38 s
JOB test speedup 0.8034675642288518
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 38/50 |loss: 0.115204| train set 5.188x speedup, test set 5.199x speedup, val set 5.353x speedup, step: 21, train time 15.35 s
JOB test speedup 0.8338473199836585
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 39/50 |loss: 0.113102| train set 5.133x speedup, test set 5.146x speedup, val set 5.232x speedup, step: 22, train time 15.43 s
JOB test speedup 0.8270687601899386
TPCH test speedup 5.5018876904549385
TPCH skew test speedup 5.130521937739417
Epoch 40/50 |loss: 0.116142| train set 5.160x speedup, test set 5.131x speedup, val set 5.230x speedup, step: 23, train time 15.30 s
JOB test speedup 0.8061181889790978
TPCH test speedup 5.420378634461702
TPCH skew test speedup 5.126787992823182
Epoch 41/50 |loss: 0.113761| train set 5.174x speedup, test set 5.127x speedup, val set 5.205x speedup, step: 24, train time 15.47 s
JOB test speedup 0.7884038938061597
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 42/50 |loss: 0.113290| train set 5.158x speedup, test set 5.150x speedup, val set 5.247x speedup, step: 25, train time 15.31 s
JOB test speedup 0.8308112460265414
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 43/50 |loss: 0.115035| train set 5.170x speedup, test set 5.196x speedup, val set 5.309x speedup, step: 26, train time 15.54 s
JOB test speedup 0.7483288230525862
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 44/50 |loss: 0.108894| train set 5.127x speedup, test set 5.131x speedup, val set 5.183x speedup, step: 27, train time 15.38 s
JOB test speedup 1.3394913272327635
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 45/50 |loss: 0.111231| train set 5.189x speedup, test set 5.199x speedup, val set 5.315x speedup, step: 28, train time 15.60 s
JOB test speedup 1.354994910878549
TPCH test speedup 5.506995611201786
TPCH skew test speedup 5.131579213146452
Epoch 46/50 |loss: 0.108882| train set 5.195x speedup, test set 5.132x speedup, val set 5.216x speedup, step: 29, train time 15.90 s
JOB test speedup 1.223274041976546
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 47/50 |loss: 0.109971| train set 5.131x speedup, test set 5.150x speedup, val set 5.221x speedup, step: 30, train time 15.61 s
JOB test speedup 0.820016033615451
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 48/50 |loss: 0.109939| train set 5.167x speedup, test set 5.199x speedup, val set 5.326x speedup, step: 31, train time 15.38 s
JOB test speedup 1.3292092899327637
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 49/50 |loss: 0.106185| train set 5.196x speedup, test set 5.150x speedup, val set 5.209x speedup, step: 32, train time 15.48 s
Training per epoch cost 15.259 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.418s, pg runtime 0.354s, speedup 0.847x
18, opt runtime 2.962s, model runtime 2.962s, pg runtime 6.876s, speedup 2.321x
19, opt runtime 1.923s, model runtime 2.365s, pg runtime 3.540s, speedup 1.497x
20, opt runtime 0.064s, model runtime 0.077s, pg runtime 0.089s, speedup 1.158x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.077s, pg runtime 0.239s, speedup 3.099x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 2.971s, pg runtime 8.605s, speedup 2.897x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 6.149s, model runtime 8.538s, pg runtime 30.760s, speedup 3.603x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 5.629s, pg runtime 42.976s, speedup 7.634x
18, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 18, train speedup 5.164, test speedup 1.258, val speedup 5.354
TPCH best validation speedup epoch: 18, train speedup 5.164, test speedup 5.496, val speedup 5.354
TPCH Skew best validation speedup epoch: 18, train speedup 5.164, test speedup 5.195, val speedup 5.354
execution cost 0:13:37.952895
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.458716, and there are 23754 training samples
in channel 9
JOB test speedup 0.9095929141904007
TPCH test speedup 5.358732104924987
TPCH skew test speedup 5.041939211543598
Epoch 0/50 |loss: 0.407082| train set 4.830x speedup, test set 5.042x speedup, val set 5.116x speedup, step: 1, train time 16.54 s
JOB test speedup 1.3291630646478665
TPCH test speedup 4.912142052879166
TPCH skew test speedup 4.416943047132702
Epoch 1/50 |loss: 0.300175| train set 4.303x speedup, test set 4.417x speedup, val set 4.612x speedup, step: 2, train time 15.61 s
JOB test speedup 1.4817343602311852
TPCH test speedup 5.2922888059590685
TPCH skew test speedup 4.941243875729237
Epoch 2/50 |loss: 0.262393| train set 4.903x speedup, test set 4.941x speedup, val set 4.948x speedup, step: 3, train time 15.12 s
JOB test speedup 1.2713662159932386
TPCH test speedup 5.4536512216205555
TPCH skew test speedup 5.111632567758913
Epoch 3/50 |loss: 0.239919| train set 5.004x speedup, test set 5.112x speedup, val set 5.215x speedup, step: 1, train time 15.26 s
JOB test speedup 1.3026597967489106
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 4/50 |loss: 0.226910| train set 5.142x speedup, test set 5.195x speedup, val set 5.318x speedup, step: 1, train time 15.20 s
JOB test speedup 1.1742294720100368
TPCH test speedup 5.429661698117445
TPCH skew test speedup 5.086904290228408
Epoch 5/50 |loss: 0.213313| train set 4.877x speedup, test set 5.087x speedup, val set 5.157x speedup, step: 2, train time 15.14 s
JOB test speedup 1.2279675571011306
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 6/50 |loss: 0.205023| train set 5.126x speedup, test set 5.195x speedup, val set 5.317x speedup, step: 3, train time 15.11 s
JOB test speedup 1.2436364123489496
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 7/50 |loss: 0.196074| train set 5.167x speedup, test set 5.200x speedup, val set 5.307x speedup, step: 4, train time 15.26 s
JOB test speedup 1.2848462259112208
TPCH test speedup 5.4993957323896945
TPCH skew test speedup 5.149120464597547
Epoch 8/50 |loss: 0.189523| train set 5.149x speedup, test set 5.149x speedup, val set 5.241x speedup, step: 5, train time 15.17 s
JOB test speedup 1.3209112978694793
TPCH test speedup 5.483977061793352
TPCH skew test speedup 5.196938413084738
Epoch 9/50 |loss: 0.183901| train set 5.066x speedup, test set 5.197x speedup, val set 5.259x speedup, step: 6, train time 15.25 s
JOB test speedup 1.2590482211765306
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 10/50 |loss: 0.176911| train set 5.132x speedup, test set 5.200x speedup, val set 5.282x speedup, step: 7, train time 15.30 s
JOB test speedup 0.8214628182211268
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 11/50 |loss: 0.173733| train set 5.156x speedup, test set 5.195x speedup, val set 5.314x speedup, step: 8, train time 15.35 s
JOB test speedup 0.78875993797562
TPCH test speedup 5.506992136995988
TPCH skew test speedup 5.143211544506418
Epoch 12/50 |loss: 0.167434| train set 5.140x speedup, test set 5.143x speedup, val set 5.257x speedup, step: 9, train time 15.17 s
JOB test speedup 1.2548692454420434
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 13/50 |loss: 0.163999| train set 5.158x speedup, test set 5.196x speedup, val set 5.329x speedup, step: 1, train time 15.20 s
JOB test speedup 1.1923261567890304
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 14/50 |loss: 0.159793| train set 5.125x speedup, test set 5.131x speedup, val set 5.196x speedup, step: 2, train time 15.10 s
JOB test speedup 1.3027820507990577
TPCH test speedup 5.497343101374444
TPCH skew test speedup 5.198876788434279
Epoch 15/50 |loss: 0.158220| train set 5.167x speedup, test set 5.199x speedup, val set 5.301x speedup, step: 3, train time 15.37 s
JOB test speedup 1.2396755592309614
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 16/50 |loss: 0.153619| train set 5.149x speedup, test set 5.150x speedup, val set 5.258x speedup, step: 4, train time 15.07 s
JOB test speedup 0.8170123496982492
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 17/50 |loss: 0.150091| train set 5.143x speedup, test set 5.199x speedup, val set 5.222x speedup, step: 5, train time 15.46 s
JOB test speedup 0.7998751261731644
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 18/50 |loss: 0.148538| train set 5.130x speedup, test set 5.146x speedup, val set 5.262x speedup, step: 6, train time 15.22 s
JOB test speedup 1.2184700922584526
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 19/50 |loss: 0.143796| train set 5.193x speedup, test set 5.199x speedup, val set 5.350x speedup, step: 1, train time 15.22 s
JOB test speedup 1.1417259396883648
TPCH test speedup 5.501075847949165
TPCH skew test speedup 5.15016688897055
Epoch 20/50 |loss: 0.142517| train set 5.141x speedup, test set 5.150x speedup, val set 5.238x speedup, step: 2, train time 15.39 s
JOB test speedup 1.2621664155190206
TPCH test speedup 5.508260637581736
TPCH skew test speedup 5.130195103062532
Epoch 21/50 |loss: 0.141302| train set 5.154x speedup, test set 5.130x speedup, val set 5.208x speedup, step: 3, train time 15.37 s
JOB test speedup 1.2574892310542005
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 22/50 |loss: 0.138668| train set 5.164x speedup, test set 5.196x speedup, val set 5.324x speedup, step: 4, train time 15.26 s
JOB test speedup 0.8198237324788278
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 23/50 |loss: 0.138790| train set 5.154x speedup, test set 5.150x speedup, val set 5.209x speedup, step: 5, train time 15.50 s
JOB test speedup 1.3334972482507481
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 24/50 |loss: 0.135606| train set 5.160x speedup, test set 5.129x speedup, val set 5.260x speedup, step: 6, train time 15.53 s
JOB test speedup 0.7971567500921407
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 25/50 |loss: 0.134631| train set 5.129x speedup, test set 5.146x speedup, val set 5.245x speedup, step: 7, train time 15.41 s
JOB test speedup 0.7976799478931506
TPCH test speedup 5.508260637581736
TPCH skew test speedup 5.130195103062532
Epoch 26/50 |loss: 0.133579| train set 5.149x speedup, test set 5.130x speedup, val set 5.227x speedup, step: 8, train time 15.46 s
JOB test speedup 1.1301740470368038
TPCH test speedup 5.53968599951373
TPCH skew test speedup 5.180723097562853
Epoch 27/50 |loss: 0.130078| train set 5.174x speedup, test set 5.181x speedup, val set 5.265x speedup, step: 9, train time 15.28 s
JOB test speedup 0.7850637360706981
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 28/50 |loss: 0.130218| train set 5.165x speedup, test set 5.200x speedup, val set 5.313x speedup, step: 10, train time 15.44 s
JOB test speedup 0.7831287949991789
TPCH test speedup 5.419011906134256
TPCH skew test speedup 5.146820471271565
Epoch 29/50 |loss: 0.126677| train set 5.107x speedup, test set 5.147x speedup, val set 5.209x speedup, step: 11, train time 15.53 s
JOB test speedup 0.7693602328925542
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 30/50 |loss: 0.126016| train set 5.148x speedup, test set 5.150x speedup, val set 5.247x speedup, step: 12, train time 15.47 s
JOB test speedup 1.2571144057552894
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 31/50 |loss: 0.124295| train set 5.196x speedup, test set 5.199x speedup, val set 5.336x speedup, step: 13, train time 15.50 s
JOB test speedup 1.1980218657610084
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 32/50 |loss: 0.124857| train set 5.150x speedup, test set 5.151x speedup, val set 5.226x speedup, step: 14, train time 15.58 s
JOB test speedup 1.2124006558795268
TPCH test speedup 5.44043412162474
TPCH skew test speedup 5.125684073579842
Epoch 33/50 |loss: 0.119976| train set 5.132x speedup, test set 5.126x speedup, val set 5.198x speedup, step: 15, train time 15.35 s
JOB test speedup 0.7974386547995079
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 34/50 |loss: 0.121911| train set 5.197x speedup, test set 5.179x speedup, val set 5.302x speedup, step: 16, train time 15.34 s
JOB test speedup 1.2534787451899496
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.150651289024296
Epoch 35/50 |loss: 0.121272| train set 5.137x speedup, test set 5.151x speedup, val set 5.222x speedup, step: 17, train time 15.40 s
JOB test speedup 1.1663780256999337
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 36/50 |loss: 0.119285| train set 5.190x speedup, test set 5.199x speedup, val set 5.325x speedup, step: 18, train time 15.60 s
JOB test speedup 1.2513043793937475
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 37/50 |loss: 0.118474| train set 5.157x speedup, test set 5.150x speedup, val set 5.247x speedup, step: 19, train time 15.58 s
JOB test speedup 0.7664617703827791
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 38/50 |loss: 0.115241| train set 5.196x speedup, test set 5.199x speedup, val set 5.339x speedup, step: 20, train time 15.60 s
JOB test speedup 0.7968063975584165
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 39/50 |loss: 0.115129| train set 5.132x speedup, test set 5.146x speedup, val set 5.232x speedup, step: 21, train time 15.39 s
JOB test speedup 0.7981299622927879
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 40/50 |loss: 0.115174| train set 5.155x speedup, test set 5.129x speedup, val set 5.233x speedup, step: 22, train time 15.66 s
JOB test speedup 0.7608872961244204
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 41/50 |loss: 0.113321| train set 5.118x speedup, test set 5.131x speedup, val set 5.195x speedup, step: 23, train time 15.48 s
JOB test speedup 1.213299343548865
TPCH test speedup 5.329231768492955
TPCH skew test speedup 5.030805469057443
Epoch 42/50 |loss: 0.113880| train set 5.175x speedup, test set 5.031x speedup, val set 5.339x speedup, step: 24, train time 15.60 s
JOB test speedup 0.7976799478931506
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 43/50 |loss: 0.114552| train set 5.173x speedup, test set 5.200x speedup, val set 5.313x speedup, step: 25, train time 15.61 s
JOB test speedup 0.7957794936686319
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 44/50 |loss: 0.109786| train set 5.140x speedup, test set 5.131x speedup, val set 5.222x speedup, step: 26, train time 15.30 s
JOB test speedup 1.2606478919758723
TPCH test speedup 5.568867413530359
TPCH skew test speedup 5.180321427638962
Epoch 45/50 |loss: 0.111598| train set 5.184x speedup, test set 5.180x speedup, val set 5.300x speedup, step: 27, train time 15.66 s
JOB test speedup 0.7968063975584165
TPCH test speedup 5.565853425247867
TPCH skew test speedup 5.1806734318043
Epoch 46/50 |loss: 0.110275| train set 5.193x speedup, test set 5.181x speedup, val set 5.310x speedup, step: 28, train time 16.10 s
JOB test speedup 1.1853956695341843
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 47/50 |loss: 0.110739| train set 5.150x speedup, test set 5.131x speedup, val set 5.213x speedup, step: 29, train time 15.60 s
JOB test speedup 0.8122759586530667
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 48/50 |loss: 0.110257| train set 5.195x speedup, test set 5.151x speedup, val set 5.337x speedup, step: 30, train time 15.40 s
JOB test speedup 1.2431582253506621
TPCH test speedup 5.264279944200771
TPCH skew test speedup 4.986433740239958
Epoch 49/50 |loss: 0.107188| train set 5.159x speedup, test set 4.986x speedup, val set 5.258x speedup, step: 31, train time 15.47 s
Training per epoch cost 15.420 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.207s, model runtime 0.275s, pg runtime 0.207s, speedup 0.751x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 2.962s, pg runtime 6.876s, speedup 2.321x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.064s, model runtime 0.087s, pg runtime 0.089s, speedup 1.024x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 19, train speedup 5.193, test speedup 1.218, val speedup 5.350
TPCH best validation speedup epoch: 19, train speedup 5.193, test speedup 5.557, val speedup 5.350
TPCH Skew best validation speedup epoch: 19, train speedup 5.193, test speedup 5.199, val speedup 5.350
execution cost 0:13:47.351303
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.260165, and there are 23754 training samples
in channel 9
JOB test speedup 0.8688888493691259
TPCH test speedup 5.451102750207989
TPCH skew test speedup 5.143284823175161
Epoch 0/50 |loss: 0.407837| train set 4.555x speedup, test set 5.143x speedup, val set 4.973x speedup, step: 1, train time 16.64 s
JOB test speedup 1.1887784850188265
TPCH test speedup 5.40099375313314
TPCH skew test speedup 5.038666821789675
Epoch 1/50 |loss: 0.301186| train set 4.818x speedup, test set 5.039x speedup, val set 5.120x speedup, step: 1, train time 15.58 s
JOB test speedup 1.415418123114837
TPCH test speedup 5.4670597499627425
TPCH skew test speedup 5.13583693412578
Epoch 2/50 |loss: 0.263945| train set 4.953x speedup, test set 5.136x speedup, val set 5.225x speedup, step: 1, train time 15.19 s
JOB test speedup 0.7757505478519615
TPCH test speedup 5.298994682565188
TPCH skew test speedup 4.97790881683811
Epoch 3/50 |loss: 0.239243| train set 4.809x speedup, test set 4.978x speedup, val set 5.024x speedup, step: 2, train time 15.13 s
JOB test speedup 1.2862077902640205
TPCH test speedup 5.53315864312414
TPCH skew test speedup 5.158291595997125
Epoch 4/50 |loss: 0.227133| train set 5.125x speedup, test set 5.158x speedup, val set 5.294x speedup, step: 1, train time 15.12 s
JOB test speedup 0.7715263835780385
TPCH test speedup 5.429661698117445
TPCH skew test speedup 5.086904290228408
Epoch 5/50 |loss: 0.213709| train set 4.867x speedup, test set 5.087x speedup, val set 5.144x speedup, step: 2, train time 15.07 s
JOB test speedup 0.8897609129694277
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 6/50 |loss: 0.203479| train set 4.989x speedup, test set 5.195x speedup, val set 5.307x speedup, step: 1, train time 15.18 s
JOB test speedup 1.2520183523089086
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 7/50 |loss: 0.195473| train set 5.021x speedup, test set 5.199x speedup, val set 5.319x speedup, step: 1, train time 15.22 s
JOB test speedup 1.2866996665552164
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 8/50 |loss: 0.189214| train set 5.153x speedup, test set 5.151x speedup, val set 5.239x speedup, step: 2, train time 15.24 s
JOB test speedup 1.274550367058517
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 9/50 |loss: 0.181577| train set 5.151x speedup, test set 5.196x speedup, val set 5.301x speedup, step: 3, train time 15.25 s
JOB test speedup 1.293413027886687
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 10/50 |loss: 0.174325| train set 5.124x speedup, test set 5.150x speedup, val set 5.252x speedup, step: 4, train time 15.47 s
JOB test speedup 0.8005937830961702
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 11/50 |loss: 0.173431| train set 5.161x speedup, test set 5.195x speedup, val set 5.340x speedup, step: 1, train time 15.40 s
JOB test speedup 0.8315883210113355
TPCH test speedup 5.423611153162674
TPCH skew test speedup 5.147231273306116
Epoch 12/50 |loss: 0.165106| train set 5.112x speedup, test set 5.147x speedup, val set 5.226x speedup, step: 2, train time 15.39 s
JOB test speedup 0.8297319417993795
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 13/50 |loss: 0.161948| train set 5.158x speedup, test set 5.195x speedup, val set 5.354x speedup, step: 1, train time 15.32 s
JOB test speedup 1.1807438812794218
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 14/50 |loss: 0.156576| train set 5.126x speedup, test set 5.131x speedup, val set 5.185x speedup, step: 2, train time 15.57 s
JOB test speedup 1.1693045896810816
TPCH test speedup 5.497059661725392
TPCH skew test speedup 5.194650134986736
Epoch 15/50 |loss: 0.155079| train set 5.167x speedup, test set 5.195x speedup, val set 5.306x speedup, step: 3, train time 15.35 s
JOB test speedup 1.2588087276412099
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 16/50 |loss: 0.152864| train set 5.155x speedup, test set 5.150x speedup, val set 5.225x speedup, step: 4, train time 15.46 s
JOB test speedup 0.8257546124653284
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 17/50 |loss: 0.146714| train set 5.154x speedup, test set 5.150x speedup, val set 5.263x speedup, step: 5, train time 15.65 s
JOB test speedup 1.2014120352578554
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 18/50 |loss: 0.146115| train set 5.121x speedup, test set 5.146x speedup, val set 5.248x speedup, step: 6, train time 15.46 s
JOB test speedup 1.1725729181540552
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 19/50 |loss: 0.142093| train set 5.151x speedup, test set 5.200x speedup, val set 5.331x speedup, step: 7, train time 15.50 s
JOB test speedup 1.2271256113241082
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 20/50 |loss: 0.141079| train set 5.134x speedup, test set 5.151x speedup, val set 5.228x speedup, step: 8, train time 15.46 s
JOB test speedup 1.24100342416077
TPCH test speedup 5.508260637581736
TPCH skew test speedup 5.130195103062532
Epoch 21/50 |loss: 0.139526| train set 5.149x speedup, test set 5.130x speedup, val set 5.233x speedup, step: 9, train time 15.56 s
JOB test speedup 1.2183218819073887
TPCH test speedup 5.565703906046872
TPCH skew test speedup 5.199708190540614
Epoch 22/50 |loss: 0.136169| train set 5.188x speedup, test set 5.200x speedup, val set 5.365x speedup, step: 1, train time 15.34 s
JOB test speedup 0.8269633856997691
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 23/50 |loss: 0.136362| train set 5.157x speedup, test set 5.129x speedup, val set 5.233x speedup, step: 2, train time 15.59 s
JOB test speedup 1.2566119096045774
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 24/50 |loss: 0.134167| train set 5.159x speedup, test set 5.129x speedup, val set 5.236x speedup, step: 3, train time 15.45 s
JOB test speedup 1.2151462643841977
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 25/50 |loss: 0.133497| train set 5.131x speedup, test set 5.146x speedup, val set 5.210x speedup, step: 4, train time 15.56 s
JOB test speedup 1.2200984858445583
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 26/50 |loss: 0.130151| train set 5.185x speedup, test set 5.199x speedup, val set 5.320x speedup, step: 5, train time 15.64 s
JOB test speedup 1.1903987771893794
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 5.174665020177513
Epoch 27/50 |loss: 0.129197| train set 5.166x speedup, test set 5.175x speedup, val set 5.338x speedup, step: 6, train time 15.64 s
JOB test speedup 1.1953857786177682
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 28/50 |loss: 0.127086| train set 5.108x speedup, test set 5.146x speedup, val set 5.226x speedup, step: 7, train time 15.57 s
JOB test speedup 0.8129671302549496
TPCH test speedup 5.4783125017066
TPCH skew test speedup 5.150651289024296
Epoch 29/50 |loss: 0.125731| train set 5.135x speedup, test set 5.151x speedup, val set 5.187x speedup, step: 8, train time 15.50 s
JOB test speedup 1.1534737611910981
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 30/50 |loss: 0.125417| train set 5.145x speedup, test set 5.150x speedup, val set 5.239x speedup, step: 9, train time 15.40 s
JOB test speedup 1.20530738054873
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 31/50 |loss: 0.122214| train set 5.192x speedup, test set 5.199x speedup, val set 5.368x speedup, step: 1, train time 15.47 s
JOB test speedup 1.1243978155796464
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 32/50 |loss: 0.122539| train set 5.150x speedup, test set 5.151x speedup, val set 5.226x speedup, step: 2, train time 15.59 s
JOB test speedup 1.2104724191627567
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 33/50 |loss: 0.118059| train set 5.138x speedup, test set 5.146x speedup, val set 5.234x speedup, step: 3, train time 15.56 s
JOB test speedup 0.7990548225467066
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 34/50 |loss: 0.119603| train set 5.185x speedup, test set 5.200x speedup, val set 5.340x speedup, step: 4, train time 15.28 s
JOB test speedup 1.2212947014119782
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 35/50 |loss: 0.120259| train set 5.174x speedup, test set 5.200x speedup, val set 5.341x speedup, step: 5, train time 15.42 s
JOB test speedup 1.1298768470072846
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 36/50 |loss: 0.117653| train set 5.185x speedup, test set 5.199x speedup, val set 5.319x speedup, step: 6, train time 15.39 s
JOB test speedup 1.212370816689265
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 37/50 |loss: 0.117736| train set 5.159x speedup, test set 5.179x speedup, val set 5.341x speedup, step: 7, train time 15.56 s
JOB test speedup 1.1909321152293046
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 38/50 |loss: 0.114863| train set 5.186x speedup, test set 5.199x speedup, val set 5.370x speedup, step: 1, train time 15.40 s
JOB test speedup 0.8225777330813665
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 39/50 |loss: 0.113535| train set 5.190x speedup, test set 5.199x speedup, val set 5.342x speedup, step: 2, train time 15.48 s
JOB test speedup 1.2789437910659878
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.1989771538794916
Epoch 40/50 |loss: 0.114762| train set 5.156x speedup, test set 5.199x speedup, val set 5.211x speedup, step: 3, train time 15.50 s
JOB test speedup 1.1867228546538007
TPCH test speedup 5.477389930885127
TPCH skew test speedup 5.17579014060844
Epoch 41/50 |loss: 0.112088| train set 5.174x speedup, test set 5.176x speedup, val set 5.289x speedup, step: 4, train time 15.38 s
JOB test speedup 1.1543438316002845
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 42/50 |loss: 0.112754| train set 5.149x speedup, test set 5.150x speedup, val set 5.244x speedup, step: 5, train time 15.50 s
JOB test speedup 1.2613877142784147
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 43/50 |loss: 0.113291| train set 5.150x speedup, test set 5.196x speedup, val set 5.317x speedup, step: 6, train time 15.53 s
JOB test speedup 0.7830052625962587
TPCH test speedup 5.487702909901482
TPCH skew test speedup 5.131300966452527
Epoch 44/50 |loss: 0.108074| train set 5.132x speedup, test set 5.131x speedup, val set 5.234x speedup, step: 7, train time 15.50 s
JOB test speedup 1.2165879010274363
TPCH test speedup 5.562928800812224
TPCH skew test speedup 5.198971612562319
Epoch 45/50 |loss: 0.111741| train set 5.186x speedup, test set 5.199x speedup, val set 5.370x speedup, step: 1, train time 15.60 s
JOB test speedup 1.2308054552795422
TPCH test speedup 5.564412360355972
TPCH skew test speedup 5.201130068754202
Epoch 46/50 |loss: 0.108109| train set 5.191x speedup, test set 5.201x speedup, val set 5.335x speedup, step: 2, train time 15.89 s
JOB test speedup 1.240658998653909
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 47/50 |loss: 0.109150| train set 5.141x speedup, test set 5.200x speedup, val set 5.341x speedup, step: 3, train time 15.42 s
JOB test speedup 0.8189848699213613
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 48/50 |loss: 0.108365| train set 5.193x speedup, test set 5.195x speedup, val set 5.368x speedup, step: 4, train time 15.57 s
JOB test speedup 1.1795325683577162
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.1989771538794916
Epoch 49/50 |loss: 0.104896| train set 5.159x speedup, test set 5.199x speedup, val set 5.302x speedup, step: 5, train time 15.47 s
Training per epoch cost 15.469 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 4.298s, pg runtime 3.507s, speedup 0.816x
11, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.064s, model runtime 0.077s, pg runtime 0.089s, speedup 1.158x
21, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.438s, pg runtime 1.438s, speedup 1.000x
20, opt runtime 1.428s, model runtime 1.428s, pg runtime 1.428s, speedup 1.000x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.308s, model runtime 1.528s, pg runtime 1.528s, speedup 1.000x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.596s, pg runtime 7.655s, speedup 1.008x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 45, train speedup 5.186, test speedup 1.217, val speedup 5.370
TPCH best validation speedup epoch: 45, train speedup 5.186, test speedup 5.563, val speedup 5.370
TPCH Skew best validation speedup epoch: 45, train speedup 5.186, test speedup 5.199, val speedup 5.370
execution cost 0:13:50.253989
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.263998, and there are 23754 training samples
in channel 9
JOB test speedup 0.8691285739243397
TPCH test speedup 5.4061145793624865
TPCH skew test speedup 5.104557287032518
Epoch 0/50 |loss: 0.407550| train set 4.799x speedup, test set 5.105x speedup, val set 5.077x speedup, step: 1, train time 16.29 s
JOB test speedup 1.1239417221059627
TPCH test speedup 4.829804842288982
TPCH skew test speedup 4.593137860200555
Epoch 1/50 |loss: 0.300125| train set 4.312x speedup, test set 4.593x speedup, val set 4.531x speedup, step: 2, train time 15.27 s
JOB test speedup 1.3719245752750338
TPCH test speedup 5.46647080722987
TPCH skew test speedup 5.136251393034605
Epoch 2/50 |loss: 0.263841| train set 5.047x speedup, test set 5.136x speedup, val set 5.208x speedup, step: 1, train time 14.88 s
JOB test speedup 0.8074017782653323
TPCH test speedup 5.298994682565188
TPCH skew test speedup 4.97790881683811
Epoch 3/50 |loss: 0.238654| train set 4.827x speedup, test set 4.978x speedup, val set 5.033x speedup, step: 2, train time 15.05 s
JOB test speedup 1.4951044593861345
TPCH test speedup 5.472671282726807
TPCH skew test speedup 5.15444940903558
Epoch 4/50 |loss: 0.228315| train set 5.006x speedup, test set 5.154x speedup, val set 5.136x speedup, step: 3, train time 14.97 s
JOB test speedup 0.8066547446220964
TPCH test speedup 5.18266399680376
TPCH skew test speedup 4.875070066032817
Epoch 5/50 |loss: 0.213225| train set 4.714x speedup, test set 4.875x speedup, val set 4.875x speedup, step: 4, train time 14.97 s
JOB test speedup 1.2239392302521435
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 6/50 |loss: 0.204728| train set 5.124x speedup, test set 5.199x speedup, val set 5.330x speedup, step: 1, train time 15.06 s
JOB test speedup 1.2158197390894938
TPCH test speedup 5.525634814064566
TPCH skew test speedup 5.1989771538794916
Epoch 7/50 |loss: 0.194650| train set 5.157x speedup, test set 5.199x speedup, val set 5.344x speedup, step: 1, train time 15.01 s
JOB test speedup 1.2627827165968586
TPCH test speedup 5.507446913378796
TPCH skew test speedup 5.149837546658873
Epoch 8/50 |loss: 0.190909| train set 5.138x speedup, test set 5.150x speedup, val set 5.238x speedup, step: 2, train time 14.82 s
JOB test speedup 1.4724810477284727
TPCH test speedup 5.483977061793352
TPCH skew test speedup 5.196938413084738
Epoch 9/50 |loss: 0.184254| train set 5.143x speedup, test set 5.197x speedup, val set 5.276x speedup, step: 3, train time 14.83 s
JOB test speedup 1.2729501825605491
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 10/50 |loss: 0.176264| train set 5.138x speedup, test set 5.200x speedup, val set 5.268x speedup, step: 4, train time 14.97 s
JOB test speedup 0.8380351006091975
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 11/50 |loss: 0.175926| train set 5.160x speedup, test set 5.195x speedup, val set 5.331x speedup, step: 5, train time 15.02 s
JOB test speedup 0.8037403573439529
TPCH test speedup 5.506992136995988
TPCH skew test speedup 5.143211544506418
Epoch 12/50 |loss: 0.168268| train set 5.114x speedup, test set 5.143x speedup, val set 5.226x speedup, step: 6, train time 14.77 s
JOB test speedup 0.8147050181225607
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 13/50 |loss: 0.165061| train set 5.157x speedup, test set 5.196x speedup, val set 5.328x speedup, step: 7, train time 14.95 s
JOB test speedup 1.1834581253847578
TPCH test speedup 5.486302023983199
TPCH skew test speedup 5.151368797553172
Epoch 14/50 |loss: 0.161448| train set 5.104x speedup, test set 5.151x speedup, val set 5.210x speedup, step: 8, train time 14.77 s
JOB test speedup 1.170029311426374
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 15/50 |loss: 0.157991| train set 5.191x speedup, test set 5.199x speedup, val set 5.302x speedup, step: 9, train time 14.97 s
JOB test speedup 1.2689121784907924
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 16/50 |loss: 0.155044| train set 5.148x speedup, test set 5.151x speedup, val set 5.275x speedup, step: 10, train time 14.97 s
JOB test speedup 1.307521887926534
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 17/50 |loss: 0.150877| train set 5.146x speedup, test set 5.150x speedup, val set 5.241x speedup, step: 11, train time 14.89 s
JOB test speedup 1.231898984533777
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 18/50 |loss: 0.148484| train set 5.164x speedup, test set 5.199x speedup, val set 5.354x speedup, step: 1, train time 14.95 s
JOB test speedup 1.222994111443906
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 19/50 |loss: 0.144540| train set 5.155x speedup, test set 5.199x speedup, val set 5.359x speedup, step: 1, train time 14.80 s
JOB test speedup 1.1714424950200157
TPCH test speedup 5.4947508198940405
TPCH skew test speedup 5.143335732527889
Epoch 20/50 |loss: 0.144669| train set 5.134x speedup, test set 5.143x speedup, val set 5.239x speedup, step: 2, train time 15.07 s
JOB test speedup 0.7841370491333555
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 21/50 |loss: 0.142443| train set 5.183x speedup, test set 5.129x speedup, val set 5.224x speedup, step: 3, train time 14.92 s
JOB test speedup 1.200696795789627
TPCH test speedup 5.565703906046872
TPCH skew test speedup 5.199708190540614
Epoch 22/50 |loss: 0.140010| train set 5.182x speedup, test set 5.200x speedup, val set 5.342x speedup, step: 4, train time 14.97 s
JOB test speedup 1.3083825790135206
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 23/50 |loss: 0.140831| train set 5.156x speedup, test set 5.129x speedup, val set 5.246x speedup, step: 5, train time 15.17 s
JOB test speedup 1.2713630189206306
TPCH test speedup 5.5084036103263
TPCH skew test speedup 5.123207094975406
Epoch 24/50 |loss: 0.136224| train set 5.157x speedup, test set 5.123x speedup, val set 5.239x speedup, step: 6, train time 14.96 s
JOB test speedup 1.2607819362470156
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 25/50 |loss: 0.135324| train set 5.132x speedup, test set 5.146x speedup, val set 5.241x speedup, step: 7, train time 14.90 s
JOB test speedup 1.3256353491791435
TPCH test speedup 5.567145640069
TPCH skew test speedup 5.179262714896207
Epoch 26/50 |loss: 0.132056| train set 5.155x speedup, test set 5.179x speedup, val set 5.244x speedup, step: 8, train time 15.04 s
JOB test speedup 1.1977136762089773
TPCH test speedup 5.477389930885127
TPCH skew test speedup 5.17579014060844
Epoch 27/50 |loss: 0.131155| train set 5.150x speedup, test set 5.176x speedup, val set 5.262x speedup, step: 9, train time 15.00 s
JOB test speedup 0.8008118564587011
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 28/50 |loss: 0.128663| train set 5.186x speedup, test set 5.199x speedup, val set 5.336x speedup, step: 10, train time 15.09 s
JOB test speedup 0.7847604289460487
TPCH test speedup 5.4783125017066
TPCH skew test speedup 5.150651289024296
Epoch 29/50 |loss: 0.128099| train set 5.130x speedup, test set 5.151x speedup, val set 5.200x speedup, step: 11, train time 15.06 s
JOB test speedup 1.224513561632957
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 30/50 |loss: 0.126814| train set 5.185x speedup, test set 5.179x speedup, val set 5.316x speedup, step: 12, train time 14.99 s
JOB test speedup 1.2630479621356772
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 31/50 |loss: 0.124735| train set 5.196x speedup, test set 5.199x speedup, val set 5.354x speedup, step: 13, train time 15.17 s
JOB test speedup 0.7869471457430149
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 32/50 |loss: 0.122448| train set 5.187x speedup, test set 5.200x speedup, val set 5.298x speedup, step: 14, train time 15.25 s
JOB test speedup 0.7839096017460507
TPCH test speedup 5.442078398307722
TPCH skew test speedup 5.126720993002068
Epoch 33/50 |loss: 0.120549| train set 5.127x speedup, test set 5.127x speedup, val set 5.215x speedup, step: 15, train time 15.15 s
JOB test speedup 0.7728826970282239
TPCH test speedup 5.246899116610936
TPCH skew test speedup 4.914163213091722
Epoch 34/50 |loss: 0.122001| train set 5.187x speedup, test set 4.914x speedup, val set 5.081x speedup, step: 16, train time 15.11 s
JOB test speedup 1.1931255503595877
TPCH test speedup 5.298873726535708
TPCH skew test speedup 5.033841717924928
Epoch 35/50 |loss: 0.124674| train set 5.009x speedup, test set 5.034x speedup, val set 5.093x speedup, step: 17, train time 15.12 s
JOB test speedup 1.1302010951766397
TPCH test speedup 5.559528132224215
TPCH skew test speedup 5.198552510531612
Epoch 36/50 |loss: 0.119076| train set 5.185x speedup, test set 5.199x speedup, val set 5.323x speedup, step: 18, train time 15.33 s
JOB test speedup 1.257330148844945
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 37/50 |loss: 0.119181| train set 5.194x speedup, test set 5.199x speedup, val set 5.368x speedup, step: 1, train time 15.30 s
JOB test speedup 0.7869940252303111
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 38/50 |loss: 0.117224| train set 5.190x speedup, test set 5.199x speedup, val set 5.344x speedup, step: 2, train time 15.09 s
JOB test speedup 0.8004633615296551
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 39/50 |loss: 0.113981| train set 5.154x speedup, test set 5.196x speedup, val set 5.298x speedup, step: 3, train time 15.01 s
JOB test speedup 1.296893378923225
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 40/50 |loss: 0.115693| train set 5.156x speedup, test set 5.129x speedup, val set 5.227x speedup, step: 4, train time 15.30 s
JOB test speedup 1.2245990281962105
TPCH test speedup 5.477389930885127
TPCH skew test speedup 5.17579014060844
Epoch 41/50 |loss: 0.113808| train set 5.129x speedup, test set 5.176x speedup, val set 5.300x speedup, step: 5, train time 15.16 s
JOB test speedup 0.7709829240360098
TPCH test speedup 5.537982220539701
TPCH skew test speedup 5.179664220650327
Epoch 42/50 |loss: 0.113153| train set 5.160x speedup, test set 5.180x speedup, val set 5.290x speedup, step: 6, train time 15.26 s
JOB test speedup 0.8177525873716396
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 43/50 |loss: 0.116917| train set 5.147x speedup, test set 5.196x speedup, val set 5.290x speedup, step: 7, train time 15.24 s
JOB test speedup 1.1360110996818462
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 44/50 |loss: 0.111330| train set 5.134x speedup, test set 5.131x speedup, val set 5.202x speedup, step: 8, train time 15.36 s
JOB test speedup 1.1883597471491523
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 45/50 |loss: 0.112440| train set 5.184x speedup, test set 5.199x speedup, val set 5.302x speedup, step: 9, train time 15.36 s
JOB test speedup 1.2288422522838631
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 5.174665020177513
Epoch 46/50 |loss: 0.108986| train set 5.193x speedup, test set 5.175x speedup, val set 5.304x speedup, step: 10, train time 15.65 s
JOB test speedup 1.1965693844151908
TPCH test speedup 5.2812640970927855
TPCH skew test speedup 5.179664220650327
Epoch 47/50 |loss: 0.111095| train set 5.178x speedup, test set 5.180x speedup, val set 5.292x speedup, step: 11, train time 15.26 s
JOB test speedup 0.7987145598470243
TPCH test speedup 5.495665264773356
TPCH skew test speedup 5.197810478495808
Epoch 48/50 |loss: 0.109524| train set 5.171x speedup, test set 5.198x speedup, val set 5.326x speedup, step: 12, train time 15.30 s
JOB test speedup 1.1812972370330126
TPCH test speedup 5.44043412162474
TPCH skew test speedup 5.125684073579842
Epoch 49/50 |loss: 0.109579| train set 5.196x speedup, test set 5.126x speedup, val set 5.311x speedup, step: 13, train time 15.22 s
Training per epoch cost 15.101 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 2.962s, pg runtime 6.876s, speedup 2.321x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.064s, model runtime 0.072s, pg runtime 0.089s, speedup 1.239x
21, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 37, train speedup 5.194, test speedup 1.257, val speedup 5.368
TPCH best validation speedup epoch: 37, train speedup 5.194, test speedup 5.557, val speedup 5.368
TPCH Skew best validation speedup epoch: 37, train speedup 5.194, test speedup 5.199, val speedup 5.368
execution cost 0:13:31.605809
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.227541, and there are 23754 training samples
in channel 9
JOB test speedup 0.8746175065694408
TPCH test speedup 5.33759654654345
TPCH skew test speedup 4.82174715754462
Epoch 0/50 |loss: 0.407771| train set 4.770x speedup, test set 4.822x speedup, val set 5.067x speedup, step: 1, train time 16.18 s
JOB test speedup 1.3572588155817995
TPCH test speedup 4.8164433518576475
TPCH skew test speedup 4.33237150976488
Epoch 1/50 |loss: 0.300370| train set 4.123x speedup, test set 4.332x speedup, val set 4.514x speedup, step: 2, train time 15.32 s
JOB test speedup 1.381591733225185
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 2/50 |loss: 0.263799| train set 4.528x speedup, test set 5.200x speedup, val set 5.283x speedup, step: 1, train time 14.67 s
JOB test speedup 1.1949940253142965
TPCH test speedup 5.400406830823457
TPCH skew test speedup 5.046962809983615
Epoch 3/50 |loss: 0.240153| train set 4.865x speedup, test set 5.047x speedup, val set 5.109x speedup, step: 2, train time 14.76 s
JOB test speedup 1.349971040071947
TPCH test speedup 5.472671282726807
TPCH skew test speedup 5.15444940903558
Epoch 4/50 |loss: 0.227092| train set 5.100x speedup, test set 5.154x speedup, val set 5.197x speedup, step: 3, train time 14.77 s
JOB test speedup 1.1893476726270722
TPCH test speedup 5.4096854089236555
TPCH skew test speedup 5.087991566875582
Epoch 5/50 |loss: 0.214925| train set 4.987x speedup, test set 5.088x speedup, val set 5.132x speedup, step: 4, train time 14.95 s
JOB test speedup 1.2497732782111806
TPCH test speedup 5.422160415032833
TPCH skew test speedup 5.108708231841961
Epoch 6/50 |loss: 0.206832| train set 4.952x speedup, test set 5.109x speedup, val set 5.168x speedup, step: 5, train time 14.95 s
JOB test speedup 1.2087809085293582
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 7/50 |loss: 0.196492| train set 5.145x speedup, test set 5.200x speedup, val set 5.293x speedup, step: 1, train time 14.95 s
JOB test speedup 1.3214871992375112
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 8/50 |loss: 0.191302| train set 5.151x speedup, test set 5.150x speedup, val set 5.193x speedup, step: 2, train time 14.86 s
JOB test speedup 1.2463641029507437
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 9/50 |loss: 0.184332| train set 5.157x speedup, test set 5.196x speedup, val set 5.327x speedup, step: 1, train time 14.85 s
JOB test speedup 1.2928880637596196
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 10/50 |loss: 0.178030| train set 5.168x speedup, test set 5.199x speedup, val set 5.330x speedup, step: 1, train time 14.86 s
JOB test speedup 0.8010259492386425
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 11/50 |loss: 0.174348| train set 5.154x speedup, test set 5.195x speedup, val set 5.264x speedup, step: 2, train time 15.00 s
JOB test speedup 0.816556896795763
TPCH test speedup 5.253073253239604
TPCH skew test speedup 4.92676152610578
Epoch 12/50 |loss: 0.168721| train set 5.140x speedup, test set 4.927x speedup, val set 5.174x speedup, step: 3, train time 14.97 s
JOB test speedup 1.2798424933533155
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 13/50 |loss: 0.167385| train set 5.157x speedup, test set 5.196x speedup, val set 5.300x speedup, step: 4, train time 14.98 s
JOB test speedup 1.186632720816918
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 14/50 |loss: 0.159456| train set 5.129x speedup, test set 5.131x speedup, val set 5.183x speedup, step: 5, train time 15.16 s
JOB test speedup 1.165236125046723
TPCH test speedup 5.495665264773356
TPCH skew test speedup 5.197810478495808
Epoch 15/50 |loss: 0.157529| train set 5.167x speedup, test set 5.198x speedup, val set 5.300x speedup, step: 6, train time 15.10 s
JOB test speedup 1.2906551185406259
TPCH test speedup 5.506849237511757
TPCH skew test speedup 5.150254268421178
Epoch 16/50 |loss: 0.155484| train set 5.152x speedup, test set 5.150x speedup, val set 5.245x speedup, step: 7, train time 15.16 s
JOB test speedup 1.2799440241536197
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 17/50 |loss: 0.151141| train set 5.153x speedup, test set 5.150x speedup, val set 5.228x speedup, step: 8, train time 15.15 s
JOB test speedup 1.1947294006269829
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 18/50 |loss: 0.149480| train set 5.127x speedup, test set 5.146x speedup, val set 5.235x speedup, step: 9, train time 15.17 s
JOB test speedup 1.178570457793282
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 19/50 |loss: 0.145467| train set 5.151x speedup, test set 5.150x speedup, val set 5.212x speedup, step: 10, train time 15.18 s
JOB test speedup 1.1578005981706305
TPCH test speedup 5.502484289763835
TPCH skew test speedup 5.130108402930124
Epoch 20/50 |loss: 0.143402| train set 5.134x speedup, test set 5.130x speedup, val set 5.211x speedup, step: 11, train time 15.04 s
JOB test speedup 1.21745123959652
TPCH test speedup 5.508260637581736
TPCH skew test speedup 5.130195103062532
Epoch 21/50 |loss: 0.143854| train set 5.141x speedup, test set 5.130x speedup, val set 5.210x speedup, step: 12, train time 15.26 s
JOB test speedup 1.194708127554532
TPCH test speedup 5.565703906046872
TPCH skew test speedup 5.199708190540614
Epoch 22/50 |loss: 0.138365| train set 5.175x speedup, test set 5.200x speedup, val set 5.337x speedup, step: 1, train time 15.16 s
JOB test speedup 0.8302901941621424
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 23/50 |loss: 0.140218| train set 5.155x speedup, test set 5.129x speedup, val set 5.233x speedup, step: 2, train time 15.23 s
JOB test speedup 1.2336216638752218
TPCH test speedup 5.5084036103263
TPCH skew test speedup 5.123207094975406
Epoch 24/50 |loss: 0.137150| train set 5.150x speedup, test set 5.123x speedup, val set 5.220x speedup, step: 3, train time 15.31 s
JOB test speedup 1.2170181667911792
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 25/50 |loss: 0.136076| train set 5.168x speedup, test set 5.195x speedup, val set 5.290x speedup, step: 4, train time 15.16 s
JOB test speedup 1.2698007146974941
TPCH test speedup 5.565703906046872
TPCH skew test speedup 5.199708190540614
Epoch 26/50 |loss: 0.133338| train set 5.182x speedup, test set 5.200x speedup, val set 5.334x speedup, step: 5, train time 15.12 s
JOB test speedup 1.1945121814754787
TPCH test speedup 5.504653080794983
TPCH skew test speedup 5.176797842520575
Epoch 27/50 |loss: 0.133643| train set 5.165x speedup, test set 5.177x speedup, val set 5.296x speedup, step: 6, train time 15.12 s
JOB test speedup 1.2225879227354919
TPCH test speedup 5.420957686848286
TPCH skew test speedup 5.126375059704003
Epoch 28/50 |loss: 0.131641| train set 5.127x speedup, test set 5.126x speedup, val set 5.160x speedup, step: 7, train time 15.40 s
JOB test speedup 1.209586019315843
TPCH test speedup 5.420378634461702
TPCH skew test speedup 5.126787992823182
Epoch 29/50 |loss: 0.128222| train set 5.110x speedup, test set 5.127x speedup, val set 5.173x speedup, step: 8, train time 15.25 s
JOB test speedup 0.797625735510917
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 30/50 |loss: 0.128733| train set 5.146x speedup, test set 5.150x speedup, val set 5.247x speedup, step: 9, train time 15.45 s
JOB test speedup 1.224095159698512
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 31/50 |loss: 0.126397| train set 5.191x speedup, test set 5.199x speedup, val set 5.336x speedup, step: 10, train time 15.16 s
JOB test speedup 1.2089200548565853
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 32/50 |loss: 0.128479| train set 5.150x speedup, test set 5.151x speedup, val set 5.191x speedup, step: 11, train time 15.14 s
JOB test speedup 1.2151304707830766
TPCH test speedup 5.448313463415819
TPCH skew test speedup 5.126394642401025
Epoch 33/50 |loss: 0.121942| train set 5.133x speedup, test set 5.126x speedup, val set 5.218x speedup, step: 12, train time 15.30 s
JOB test speedup 1.208821168125614
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 34/50 |loss: 0.120248| train set 5.186x speedup, test set 5.150x speedup, val set 5.225x speedup, step: 13, train time 15.46 s
JOB test speedup 1.155499210363171
TPCH test speedup 5.2522174990687605
TPCH skew test speedup 4.989068658864706
Epoch 35/50 |loss: 0.123936| train set 5.156x speedup, test set 4.989x speedup, val set 5.173x speedup, step: 14, train time 15.35 s
JOB test speedup 1.1264717450162052
TPCH test speedup 5.565022597238268
TPCH skew test speedup 5.200705073655247
Epoch 36/50 |loss: 0.122631| train set 5.191x speedup, test set 5.201x speedup, val set 5.304x speedup, step: 15, train time 15.31 s
JOB test speedup 1.2027469775448596
TPCH test speedup 5.506995611201786
TPCH skew test speedup 5.131579213146452
Epoch 37/50 |loss: 0.119116| train set 5.150x speedup, test set 5.132x speedup, val set 5.219x speedup, step: 16, train time 15.27 s
JOB test speedup 1.2205835162565102
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 38/50 |loss: 0.117873| train set 5.183x speedup, test set 5.199x speedup, val set 5.342x speedup, step: 1, train time 15.35 s
JOB test speedup 1.2939806277153234
TPCH test speedup 5.446932613255462
TPCH skew test speedup 5.146424040997462
Epoch 39/50 |loss: 0.115839| train set 5.154x speedup, test set 5.146x speedup, val set 5.210x speedup, step: 2, train time 15.21 s
JOB test speedup 0.8257294066546457
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 40/50 |loss: 0.116310| train set 5.155x speedup, test set 5.129x speedup, val set 5.233x speedup, step: 3, train time 15.26 s
JOB test speedup 0.7892774700433628
TPCH test speedup 5.420378634461702
TPCH skew test speedup 5.126787992823182
Epoch 41/50 |loss: 0.116493| train set 5.152x speedup, test set 5.127x speedup, val set 5.170x speedup, step: 4, train time 15.24 s
JOB test speedup 1.2167800473509105
TPCH test speedup 5.487702909901482
TPCH skew test speedup 5.131300966452527
Epoch 42/50 |loss: 0.115065| train set 5.157x speedup, test set 5.131x speedup, val set 5.207x speedup, step: 5, train time 15.30 s
JOB test speedup 0.8163441806803671
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 43/50 |loss: 0.117111| train set 5.130x speedup, test set 5.146x speedup, val set 5.197x speedup, step: 6, train time 15.40 s
JOB test speedup 0.7962031065769012
TPCH test speedup 5.44043412162474
TPCH skew test speedup 5.125684073579842
Epoch 44/50 |loss: 0.111035| train set 5.154x speedup, test set 5.126x speedup, val set 5.198x speedup, step: 7, train time 15.28 s
JOB test speedup 1.208864454659087
TPCH test speedup 5.500803313904868
TPCH skew test speedup 5.129070112933656
Epoch 45/50 |loss: 0.114194| train set 5.193x speedup, test set 5.129x speedup, val set 5.211x speedup, step: 8, train time 15.30 s
JOB test speedup 1.2145572823700908
TPCH test speedup 5.511305988264208
TPCH skew test speedup 5.197954367566738
Epoch 46/50 |loss: 0.110042| train set 5.184x speedup, test set 5.198x speedup, val set 5.289x speedup, step: 9, train time 15.82 s
JOB test speedup 1.14713973808593
TPCH test speedup 5.487702909901482
TPCH skew test speedup 5.131300966452527
Epoch 47/50 |loss: 0.111907| train set 5.157x speedup, test set 5.131x speedup, val set 5.275x speedup, step: 10, train time 15.29 s
JOB test speedup 0.7983753497806476
TPCH test speedup 5.448313463415819
TPCH skew test speedup 5.126394642401025
Epoch 48/50 |loss: 0.112464| train set 5.169x speedup, test set 5.126x speedup, val set 5.197x speedup, step: 11, train time 15.30 s
JOB test speedup 1.2086567351038253
TPCH test speedup 5.44043412162474
TPCH skew test speedup 5.125684073579842
Epoch 49/50 |loss: 0.109069| train set 5.161x speedup, test set 5.126x speedup, val set 5.288x speedup, step: 12, train time 15.30 s
Training per epoch cost 15.190 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 3.393s, pg runtime 5.855s, speedup 1.726x
03, opt runtime 0.207s, model runtime 0.275s, pg runtime 0.207s, speedup 0.751x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.072s, pg runtime 0.089s, speedup 1.239x
21, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
22, opt runtime 0.093s, model runtime 0.163s, pg runtime 2.389s, speedup 14.664x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.438s, pg runtime 1.438s, speedup 1.000x
20, opt runtime 1.428s, model runtime 1.428s, pg runtime 1.428s, speedup 1.000x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.308s, model runtime 1.528s, pg runtime 1.528s, speedup 1.000x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 38, train speedup 5.183, test speedup 1.221, val speedup 5.342
TPCH best validation speedup epoch: 38, train speedup 5.183, test speedup 5.558, val speedup 5.342
TPCH Skew best validation speedup epoch: 38, train speedup 5.183, test speedup 5.199, val speedup 5.342
execution cost 0:13:34.770292
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.222920, and there are 23754 training samples
in channel 9
JOB test speedup 0.8713337366399861
TPCH test speedup 5.449453016571156
TPCH skew test speedup 5.143284823175161
Epoch 0/50 |loss: 0.406738| train set 4.733x speedup, test set 5.143x speedup, val set 5.146x speedup, step: 1, train time 16.40 s
JOB test speedup 1.226114111408538
TPCH test speedup 4.782974870444875
TPCH skew test speedup 4.465833531548028
Epoch 1/50 |loss: 0.296774| train set 4.231x speedup, test set 4.466x speedup, val set 4.461x speedup, step: 2, train time 15.50 s
JOB test speedup 1.4258721778378285
TPCH test speedup 5.5371596918822625
TPCH skew test speedup 5.199688043727785
Epoch 2/50 |loss: 0.261288| train set 5.137x speedup, test set 5.200x speedup, val set 5.285x speedup, step: 1, train time 14.98 s
JOB test speedup 1.2018491041952024
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 3/50 |loss: 0.238199| train set 5.131x speedup, test set 5.199x speedup, val set 5.330x speedup, step: 1, train time 14.84 s
JOB test speedup 1.1822626490862738
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 4/50 |loss: 0.223102| train set 4.998x speedup, test set 5.150x speedup, val set 5.194x speedup, step: 2, train time 14.96 s
JOB test speedup 0.7682847364889649
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.149537070311538
Epoch 5/50 |loss: 0.209743| train set 4.965x speedup, test set 5.150x speedup, val set 5.210x speedup, step: 3, train time 14.94 s
JOB test speedup 1.2350709570246057
TPCH test speedup 5.3114059524152095
TPCH skew test speedup 4.940218406697744
Epoch 6/50 |loss: 0.201984| train set 5.172x speedup, test set 4.940x speedup, val set 4.944x speedup, step: 4, train time 15.08 s
JOB test speedup 1.2213344492289324
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 7/50 |loss: 0.192069| train set 5.166x speedup, test set 5.199x speedup, val set 5.333x speedup, step: 1, train time 14.96 s
JOB test speedup 1.3520723031894692
TPCH test speedup 5.506849237511757
TPCH skew test speedup 5.150254268421178
Epoch 8/50 |loss: 0.186658| train set 5.145x speedup, test set 5.150x speedup, val set 5.236x speedup, step: 2, train time 14.85 s
JOB test speedup 1.1785658476248906
TPCH test speedup 5.540316423585022
TPCH skew test speedup 5.195047617052159
Epoch 9/50 |loss: 0.180462| train set 5.162x speedup, test set 5.195x speedup, val set 5.302x speedup, step: 3, train time 15.06 s
JOB test speedup 1.2426653668184724
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 10/50 |loss: 0.173199| train set 5.149x speedup, test set 5.200x speedup, val set 5.300x speedup, step: 4, train time 15.15 s
JOB test speedup 0.799761870629668
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 11/50 |loss: 0.168558| train set 5.157x speedup, test set 5.195x speedup, val set 5.314x speedup, step: 5, train time 15.06 s
JOB test speedup 0.8139755725070935
TPCH test speedup 5.4783125017066
TPCH skew test speedup 5.150651289024296
Epoch 12/50 |loss: 0.164330| train set 5.123x speedup, test set 5.151x speedup, val set 5.213x speedup, step: 6, train time 15.00 s
JOB test speedup 1.2548253174855153
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 13/50 |loss: 0.160649| train set 5.159x speedup, test set 5.196x speedup, val set 5.311x speedup, step: 7, train time 15.16 s
JOB test speedup 1.208539183065504
TPCH test speedup 5.486302023983199
TPCH skew test speedup 5.151368797553172
Epoch 14/50 |loss: 0.156301| train set 5.122x speedup, test set 5.151x speedup, val set 5.197x speedup, step: 8, train time 14.96 s
JOB test speedup 1.2459560467095874
TPCH test speedup 5.254914819590158
TPCH skew test speedup 4.939164962910705
Epoch 15/50 |loss: 0.153974| train set 5.167x speedup, test set 4.939x speedup, val set 5.287x speedup, step: 9, train time 15.06 s
JOB test speedup 1.2625307429284398
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 16/50 |loss: 0.149041| train set 5.149x speedup, test set 5.150x speedup, val set 5.235x speedup, step: 10, train time 15.08 s
JOB test speedup 1.242942918400894
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 17/50 |loss: 0.147919| train set 5.147x speedup, test set 5.150x speedup, val set 5.187x speedup, step: 11, train time 15.05 s
JOB test speedup 1.1437006985823954
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 18/50 |loss: 0.143883| train set 5.129x speedup, test set 5.146x speedup, val set 5.210x speedup, step: 12, train time 15.14 s
JOB test speedup 1.2126787750370465
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 19/50 |loss: 0.140698| train set 5.153x speedup, test set 5.150x speedup, val set 5.267x speedup, step: 13, train time 15.06 s
JOB test speedup 1.2345934532156524
TPCH test speedup 5.498429881172822
TPCH skew test speedup 5.123953742912221
Epoch 20/50 |loss: 0.139346| train set 5.134x speedup, test set 5.124x speedup, val set 5.238x speedup, step: 14, train time 15.25 s
JOB test speedup 1.1916489903416891
TPCH test speedup 5.506995611201786
TPCH skew test speedup 5.131579213146452
Epoch 21/50 |loss: 0.138092| train set 5.144x speedup, test set 5.132x speedup, val set 5.196x speedup, step: 15, train time 15.25 s
JOB test speedup 1.1481687831810143
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 22/50 |loss: 0.137179| train set 5.164x speedup, test set 5.196x speedup, val set 5.352x speedup, step: 1, train time 15.24 s
JOB test speedup 1.2457913388556965
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 23/50 |loss: 0.134674| train set 5.155x speedup, test set 5.129x speedup, val set 5.222x speedup, step: 2, train time 15.15 s
JOB test speedup 1.2888070623760626
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 24/50 |loss: 0.132211| train set 5.157x speedup, test set 5.129x speedup, val set 5.252x speedup, step: 3, train time 15.18 s
JOB test speedup 1.246077338352035
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 25/50 |loss: 0.133175| train set 5.131x speedup, test set 5.146x speedup, val set 5.188x speedup, step: 4, train time 15.36 s
JOB test speedup 1.252025311090615
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 26/50 |loss: 0.130060| train set 5.151x speedup, test set 5.129x speedup, val set 5.211x speedup, step: 5, train time 15.20 s
JOB test speedup 1.182123666942292
TPCH test speedup 5.488119519341393
TPCH skew test speedup 5.133725427872009
Epoch 27/50 |loss: 0.127933| train set 5.137x speedup, test set 5.134x speedup, val set 5.182x speedup, step: 6, train time 15.21 s
JOB test speedup 1.2097634212427428
TPCH test speedup 5.499407017300268
TPCH skew test speedup 5.132151140760722
Epoch 28/50 |loss: 0.129249| train set 5.130x speedup, test set 5.132x speedup, val set 5.244x speedup, step: 7, train time 15.26 s
JOB test speedup 1.230790014837889
TPCH test speedup 5.419011906134256
TPCH skew test speedup 5.146820471271565
Epoch 29/50 |loss: 0.123494| train set 5.113x speedup, test set 5.147x speedup, val set 5.207x speedup, step: 8, train time 15.26 s
JOB test speedup 1.133330670508886
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 30/50 |loss: 0.123783| train set 5.148x speedup, test set 5.129x speedup, val set 5.220x speedup, step: 9, train time 15.26 s
JOB test speedup 1.208920163086759
TPCH test speedup 5.5566648132494585
TPCH skew test speedup 5.201717605558688
Epoch 31/50 |loss: 0.122963| train set 5.192x speedup, test set 5.202x speedup, val set 5.350x speedup, step: 10, train time 15.35 s
JOB test speedup 1.1994840127942143
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 32/50 |loss: 0.123631| train set 5.186x speedup, test set 5.151x speedup, val set 5.201x speedup, step: 11, train time 15.28 s
JOB test speedup 1.1805846761939214
TPCH test speedup 5.448313463415819
TPCH skew test speedup 5.126394642401025
Epoch 33/50 |loss: 0.120180| train set 5.131x speedup, test set 5.126x speedup, val set 5.220x speedup, step: 12, train time 15.46 s
JOB test speedup 1.1879299472769036
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 34/50 |loss: 0.118231| train set 5.148x speedup, test set 5.129x speedup, val set 5.221x speedup, step: 13, train time 15.36 s
JOB test speedup 1.2628732138101588
TPCH test speedup 5.486447307394534
TPCH skew test speedup 5.13268567339804
Epoch 35/50 |loss: 0.119314| train set 5.174x speedup, test set 5.133x speedup, val set 5.218x speedup, step: 14, train time 15.46 s
JOB test speedup 1.1832111424431653
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 36/50 |loss: 0.118664| train set 5.168x speedup, test set 5.179x speedup, val set 5.334x speedup, step: 15, train time 15.27 s
JOB test speedup 1.2636659373528782
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 37/50 |loss: 0.117035| train set 5.193x speedup, test set 5.129x speedup, val set 5.349x speedup, step: 16, train time 15.34 s
JOB test speedup 1.1904854824326017
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 38/50 |loss: 0.115046| train set 5.188x speedup, test set 5.199x speedup, val set 5.350x speedup, step: 17, train time 15.36 s
JOB test speedup 1.20857963503286
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 39/50 |loss: 0.112492| train set 5.191x speedup, test set 5.199x speedup, val set 5.350x speedup, step: 18, train time 15.32 s
JOB test speedup 1.2750958084609236
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 40/50 |loss: 0.113521| train set 5.155x speedup, test set 5.129x speedup, val set 5.195x speedup, step: 19, train time 15.32 s
JOB test speedup 1.1934303953212095
TPCH test speedup 5.420378634461702
TPCH skew test speedup 5.126787992823182
Epoch 41/50 |loss: 0.112230| train set 5.153x speedup, test set 5.127x speedup, val set 5.296x speedup, step: 20, train time 15.36 s
JOB test speedup 1.1910767197678769
TPCH test speedup 5.4783125017066
TPCH skew test speedup 5.150651289024296
Epoch 42/50 |loss: 0.110602| train set 5.138x speedup, test set 5.151x speedup, val set 5.235x speedup, step: 21, train time 15.24 s
JOB test speedup 1.2803869429822388
TPCH test speedup 5.53574487961232
TPCH skew test speedup 5.202854522046684
Epoch 43/50 |loss: 0.114689| train set 5.168x speedup, test set 5.203x speedup, val set 5.301x speedup, step: 22, train time 15.57 s
JOB test speedup 0.8069214436018777
TPCH test speedup 5.479709309947634
TPCH skew test speedup 5.130589036945182
Epoch 44/50 |loss: 0.108053| train set 5.132x speedup, test set 5.131x speedup, val set 5.218x speedup, step: 23, train time 15.34 s
JOB test speedup 1.2623853403438414
TPCH test speedup 5.567145640069
TPCH skew test speedup 5.179262714896207
Epoch 45/50 |loss: 0.109801| train set 5.184x speedup, test set 5.179x speedup, val set 5.310x speedup, step: 24, train time 15.26 s
JOB test speedup 1.2454799886627606
TPCH test speedup 5.565853425247867
TPCH skew test speedup 5.1806734318043
Epoch 46/50 |loss: 0.107813| train set 5.193x speedup, test set 5.181x speedup, val set 5.310x speedup, step: 25, train time 15.83 s
JOB test speedup 1.187479358227905
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 47/50 |loss: 0.110272| train set 5.141x speedup, test set 5.129x speedup, val set 5.220x speedup, step: 26, train time 15.40 s
JOB test speedup 1.2453180731369626
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 48/50 |loss: 0.109751| train set 5.169x speedup, test set 5.150x speedup, val set 5.313x speedup, step: 27, train time 15.44 s
JOB test speedup 1.1984803107852013
TPCH test speedup 5.500207079035546
TPCH skew test speedup 5.129483480361338
Epoch 49/50 |loss: 0.104129| train set 5.159x speedup, test set 5.129x speedup, val set 5.233x speedup, step: 28, train time 15.60 s
Training per epoch cost 15.250 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 50.837s, pg runtime 13.945s, speedup 0.274x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 2.365s, pg runtime 3.540s, speedup 1.497x
20, opt runtime 0.064s, model runtime 0.072s, pg runtime 0.089s, speedup 1.239x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 6.149s, model runtime 8.538s, pg runtime 30.760s, speedup 3.603x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 5.629s, pg runtime 42.976s, speedup 7.634x
18, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.631s, pg runtime 7.675s, speedup 1.006x
28, opt runtime 7.312s, model runtime 7.596s, pg runtime 7.655s, speedup 1.008x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 22, train speedup 5.164, test speedup 1.148, val speedup 5.352
TPCH best validation speedup epoch: 22, train speedup 5.164, test speedup 5.505, val speedup 5.352
TPCH Skew best validation speedup epoch: 22, train speedup 5.164, test speedup 5.196, val speedup 5.352
execution cost 0:13:37.005796
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
(196, 49)
(196, 49)
construct training samples cost 0:00:01.275541, and there are 23754 training samples
in channel 9
JOB test speedup 0.862486216514859
TPCH test speedup 5.236718176061209
TPCH skew test speedup 4.848689521432564
Epoch 0/50 |loss: 0.406642| train set 4.497x speedup, test set 4.849x speedup, val set 4.792x speedup, step: 1, train time 16.51 s
JOB test speedup 1.2987387083084225
TPCH test speedup 4.852368014608279
TPCH skew test speedup 4.369663097984777
Epoch 1/50 |loss: 0.298802| train set 4.188x speedup, test set 4.370x speedup, val set 4.496x speedup, step: 2, train time 15.69 s
JOB test speedup 1.4458101337083042
TPCH test speedup 5.5371596918822625
TPCH skew test speedup 5.199688043727785
Epoch 2/50 |loss: 0.261688| train set 5.129x speedup, test set 5.200x speedup, val set 5.299x speedup, step: 1, train time 15.32 s
JOB test speedup 1.2225439899444914
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 3/50 |loss: 0.236457| train set 5.147x speedup, test set 5.199x speedup, val set 5.330x speedup, step: 1, train time 15.21 s
JOB test speedup 1.300469776366313
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 4/50 |loss: 0.223801| train set 5.152x speedup, test set 5.195x speedup, val set 5.280x speedup, step: 2, train time 15.23 s
JOB test speedup 0.7695464718984416
TPCH test speedup 5.43129946871132
TPCH skew test speedup 5.087925577239288
Epoch 5/50 |loss: 0.211022| train set 4.863x speedup, test set 5.088x speedup, val set 5.154x speedup, step: 3, train time 15.18 s
JOB test speedup 1.2265860294825695
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 6/50 |loss: 0.201503| train set 5.155x speedup, test set 5.199x speedup, val set 5.293x speedup, step: 4, train time 15.10 s
JOB test speedup 1.1911551637780995
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 7/50 |loss: 0.194363| train set 5.161x speedup, test set 5.199x speedup, val set 5.316x speedup, step: 5, train time 15.17 s
JOB test speedup 1.272119750035396
TPCH test speedup 5.273200779677407
TPCH skew test speedup 4.988087826413207
Epoch 8/50 |loss: 0.187521| train set 5.141x speedup, test set 4.988x speedup, val set 4.998x speedup, step: 6, train time 15.24 s
JOB test speedup 1.2726452934918007
TPCH test speedup 5.479673324763843
TPCH skew test speedup 5.1911504997683915
Epoch 9/50 |loss: 0.180645| train set 5.127x speedup, test set 5.191x speedup, val set 5.257x speedup, step: 7, train time 15.16 s
JOB test speedup 1.2643467726715927
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 10/50 |loss: 0.175888| train set 5.136x speedup, test set 5.200x speedup, val set 5.254x speedup, step: 8, train time 15.10 s
JOB test speedup 1.283029273491276
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 11/50 |loss: 0.172377| train set 5.161x speedup, test set 5.195x speedup, val set 5.303x speedup, step: 9, train time 15.24 s
JOB test speedup 0.7896353515946392
TPCH test speedup 5.506849237511757
TPCH skew test speedup 5.150254268421178
Epoch 12/50 |loss: 0.166203| train set 5.134x speedup, test set 5.150x speedup, val set 5.201x speedup, step: 10, train time 15.16 s
JOB test speedup 0.8122042249336825
TPCH test speedup 5.504506831603815
TPCH skew test speedup 5.195804080395491
Epoch 13/50 |loss: 0.163419| train set 5.160x speedup, test set 5.196x speedup, val set 5.314x speedup, step: 11, train time 15.14 s
JOB test speedup 1.2257813937777737
TPCH test speedup 5.486302023983199
TPCH skew test speedup 5.151368797553172
Epoch 14/50 |loss: 0.158241| train set 5.099x speedup, test set 5.151x speedup, val set 5.197x speedup, step: 12, train time 14.77 s
JOB test speedup 1.138516728910839
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 15/50 |loss: 0.155989| train set 5.185x speedup, test set 5.200x speedup, val set 5.306x speedup, step: 13, train time 15.14 s
JOB test speedup 1.324153477126301
TPCH test speedup 5.4783125017066
TPCH skew test speedup 5.150651289024296
Epoch 16/50 |loss: 0.152836| train set 5.136x speedup, test set 5.151x speedup, val set 5.187x speedup, step: 14, train time 15.08 s
JOB test speedup 1.2090470477593078
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 17/50 |loss: 0.149174| train set 5.185x speedup, test set 5.199x speedup, val set 5.316x speedup, step: 15, train time 15.06 s
JOB test speedup 1.2230418892022028
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 18/50 |loss: 0.146214| train set 5.127x speedup, test set 5.146x speedup, val set 5.200x speedup, step: 16, train time 15.25 s
JOB test speedup 1.2308009760837901
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 19/50 |loss: 0.142008| train set 5.150x speedup, test set 5.146x speedup, val set 5.213x speedup, step: 17, train time 15.26 s
JOB test speedup 1.226660551333902
TPCH test speedup 5.501075847949165
TPCH skew test speedup 5.15016688897055
Epoch 20/50 |loss: 0.142303| train set 5.140x speedup, test set 5.150x speedup, val set 5.228x speedup, step: 18, train time 15.21 s
JOB test speedup 1.2175843029627094
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 21/50 |loss: 0.139948| train set 5.185x speedup, test set 5.179x speedup, val set 5.302x speedup, step: 19, train time 15.27 s
JOB test speedup 1.178909870843371
TPCH test speedup 5.565703906046872
TPCH skew test speedup 5.199708190540614
Epoch 22/50 |loss: 0.137031| train set 5.190x speedup, test set 5.200x speedup, val set 5.330x speedup, step: 1, train time 15.25 s
JOB test speedup 0.8189628119740602
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 23/50 |loss: 0.137682| train set 5.152x speedup, test set 5.150x speedup, val set 5.247x speedup, step: 2, train time 15.19 s
JOB test speedup 1.2209470911003217
TPCH test speedup 5.5084036103263
TPCH skew test speedup 5.123207094975406
Epoch 24/50 |loss: 0.134364| train set 5.159x speedup, test set 5.123x speedup, val set 5.220x speedup, step: 3, train time 15.35 s
JOB test speedup 0.8210056222287164
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 25/50 |loss: 0.133397| train set 5.132x speedup, test set 5.146x speedup, val set 5.175x speedup, step: 4, train time 15.25 s
JOB test speedup 1.1786244583617111
TPCH test speedup 5.508260637581736
TPCH skew test speedup 5.130195103062532
Epoch 26/50 |loss: 0.131342| train set 5.138x speedup, test set 5.130x speedup, val set 5.205x speedup, step: 5, train time 15.46 s
JOB test speedup 1.1971326921244991
TPCH test speedup 5.484393105694122
TPCH skew test speedup 5.1994253116201685
Epoch 27/50 |loss: 0.129516| train set 5.145x speedup, test set 5.199x speedup, val set 5.260x speedup, step: 6, train time 15.50 s
JOB test speedup 1.2218720167453012
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 28/50 |loss: 0.129101| train set 5.148x speedup, test set 5.199x speedup, val set 5.276x speedup, step: 7, train time 15.40 s
JOB test speedup 1.196285719146927
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 29/50 |loss: 0.126116| train set 5.137x speedup, test set 5.196x speedup, val set 5.297x speedup, step: 8, train time 15.44 s
JOB test speedup 1.2000675126827847
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 30/50 |loss: 0.124800| train set 5.148x speedup, test set 5.150x speedup, val set 5.222x speedup, step: 9, train time 15.47 s
JOB test speedup 1.2601366985176377
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 31/50 |loss: 0.122585| train set 5.156x speedup, test set 5.199x speedup, val set 5.336x speedup, step: 1, train time 15.53 s
JOB test speedup 1.2323515993927232
TPCH test speedup 5.42476581908283
TPCH skew test speedup 4.918495976617451
Epoch 32/50 |loss: 0.123141| train set 5.149x speedup, test set 4.918x speedup, val set 5.211x speedup, step: 2, train time 15.59 s
JOB test speedup 1.2076850027656267
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 33/50 |loss: 0.118910| train set 5.133x speedup, test set 5.146x speedup, val set 5.212x speedup, step: 3, train time 15.41 s
JOB test speedup 1.2063563453769706
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 34/50 |loss: 0.120437| train set 5.186x speedup, test set 5.180x speedup, val set 5.304x speedup, step: 4, train time 15.60 s
JOB test speedup 1.227006109872701
TPCH test speedup 5.243374542366636
TPCH skew test speedup 5.030182623373819
Epoch 35/50 |loss: 0.120909| train set 5.170x speedup, test set 5.030x speedup, val set 5.327x speedup, step: 5, train time 15.50 s
JOB test speedup 1.112044055929312
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 36/50 |loss: 0.117864| train set 5.185x speedup, test set 5.195x speedup, val set 5.307x speedup, step: 6, train time 15.44 s
JOB test speedup 1.1824882548426472
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.206260036668735
Epoch 37/50 |loss: 0.116026| train set 5.155x speedup, test set 5.206x speedup, val set 5.353x speedup, step: 1, train time 15.43 s
JOB test speedup 0.7695798951346151
TPCH test speedup 5.318595953627028
TPCH skew test speedup 5.032379530226606
Epoch 38/50 |loss: 0.116507| train set 5.193x speedup, test set 5.032x speedup, val set 5.317x speedup, step: 2, train time 15.37 s
JOB test speedup 0.7723711195426648
TPCH test speedup 5.439057262038055
TPCH skew test speedup 5.14570790917281
Epoch 39/50 |loss: 0.113846| train set 5.155x speedup, test set 5.146x speedup, val set 5.222x speedup, step: 3, train time 15.55 s
JOB test speedup 1.2726825199259877
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 40/50 |loss: 0.113496| train set 5.157x speedup, test set 5.150x speedup, val set 5.225x speedup, step: 4, train time 15.70 s
JOB test speedup 0.7719957905552375
TPCH test speedup 5.44043412162474
TPCH skew test speedup 5.125684073579842
Epoch 41/50 |loss: 0.111803| train set 5.128x speedup, test set 5.126x speedup, val set 5.196x speedup, step: 5, train time 15.48 s
JOB test speedup 1.1980399213992963
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 42/50 |loss: 0.111632| train set 5.188x speedup, test set 5.199x speedup, val set 5.313x speedup, step: 6, train time 15.44 s
JOB test speedup 1.319927837635786
TPCH test speedup 5.495665264773356
TPCH skew test speedup 5.197810478495808
Epoch 43/50 |loss: 0.114058| train set 5.170x speedup, test set 5.198x speedup, val set 5.295x speedup, step: 7, train time 15.28 s
JOB test speedup 0.7901558971747004
TPCH test speedup 5.265569727681416
TPCH skew test speedup 4.967628043490775
Epoch 44/50 |loss: 0.108312| train set 5.152x speedup, test set 4.968x speedup, val set 5.208x speedup, step: 8, train time 15.65 s
JOB test speedup 1.2326453720888784
TPCH test speedup 5.325567116927828
TPCH skew test speedup 5.033462500208223
Epoch 45/50 |loss: 0.108842| train set 5.182x speedup, test set 5.033x speedup, val set 5.327x speedup, step: 9, train time 15.46 s
JOB test speedup 1.2428341531719431
TPCH test speedup 5.504653080794983
TPCH skew test speedup 5.176797842520575
Epoch 46/50 |loss: 0.108397| train set 5.190x speedup, test set 5.177x speedup, val set 5.276x speedup, step: 10, train time 16.05 s
JOB test speedup 1.2044245046050814
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 47/50 |loss: 0.111402| train set 5.179x speedup, test set 5.199x speedup, val set 5.326x speedup, step: 11, train time 15.28 s
JOB test speedup 0.8262389058189467
TPCH test speedup 5.495665264773356
TPCH skew test speedup 5.197810478495808
Epoch 48/50 |loss: 0.110208| train set 5.167x speedup, test set 5.198x speedup, val set 5.315x speedup, step: 12, train time 15.66 s
JOB test speedup 1.1919442757999301
TPCH test speedup 5.319354825386995
TPCH skew test speedup 5.013621250266732
Epoch 49/50 |loss: 0.106248| train set 5.161x speedup, test set 5.014x speedup, val set 5.321x speedup, step: 13, train time 15.57 s
Training per epoch cost 15.376 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.084s, pg runtime 0.081s, speedup 0.961x
02, opt runtime 1.299s, model runtime 3.393s, pg runtime 5.855s, speedup 1.726x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 4.298s, pg runtime 3.507s, speedup 0.816x
11, opt runtime 4.443s, model runtime 51.645s, pg runtime 13.945s, speedup 0.270x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 3.088s, pg runtime 3.540s, speedup 1.146x
20, opt runtime 0.064s, model runtime 0.064s, pg runtime 0.089s, speedup 1.393x
21, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.089s, pg runtime 0.239s, speedup 2.681x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 5.629s, pg runtime 42.976s, speedup 7.634x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 37, train speedup 5.155, test speedup 1.182, val speedup 5.353
TPCH best validation speedup epoch: 37, train speedup 5.155, test speedup 5.557, val speedup 5.353
TPCH Skew best validation speedup epoch: 37, train speedup 5.155, test speedup 5.206, val speedup 5.353
execution cost 0:13:44.659576
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.205394, and there are 23566 training samples
in channel 9
JOB test speedup 0.9989537765424995
TPCH test speedup 4.989175994632669
TPCH skew test speedup 4.667275135138141
Epoch 0/50 |loss: 0.405015| train set 4.657x speedup, test set 4.667x speedup, val set 5.094x speedup, step: 1, train time 16.16 s
JOB test speedup 1.227335935255918
TPCH test speedup 5.403717621343129
TPCH skew test speedup 5.1481080901950484
Epoch 1/50 |loss: 0.303291| train set 5.028x speedup, test set 5.148x speedup, val set 5.293x speedup, step: 1, train time 15.60 s
JOB test speedup 0.8794282953043245
TPCH test speedup 4.97403669109065
TPCH skew test speedup 4.588874399254295
Epoch 2/50 |loss: 0.264819| train set 4.739x speedup, test set 4.589x speedup, val set 4.834x speedup, step: 2, train time 15.18 s
JOB test speedup 1.3209249286265523
TPCH test speedup 5.53744728200182
TPCH skew test speedup 5.2039229027325415
Epoch 3/50 |loss: 0.241601| train set 5.167x speedup, test set 5.204x speedup, val set 5.445x speedup, step: 1, train time 15.22 s
JOB test speedup 0.8775077775361082
TPCH test speedup 5.188801428396316
TPCH skew test speedup 4.703012549513398
Epoch 4/50 |loss: 0.232622| train set 4.962x speedup, test set 4.703x speedup, val set 4.941x speedup, step: 2, train time 15.18 s
JOB test speedup 1.3023735873705744
TPCH test speedup 5.558380108919816
TPCH skew test speedup 4.616266751072525
Epoch 5/50 |loss: 0.216179| train set 5.191x speedup, test set 4.616x speedup, val set 5.503x speedup, step: 1, train time 15.25 s
JOB test speedup 1.2962925406608694
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 6/50 |loss: 0.205609| train set 5.194x speedup, test set 5.200x speedup, val set 5.467x speedup, step: 2, train time 15.10 s
JOB test speedup 0.8337977245762968
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.202197741268691
Epoch 7/50 |loss: 0.195670| train set 5.175x speedup, test set 5.202x speedup, val set 5.507x speedup, step: 1, train time 15.15 s
JOB test speedup 1.232919275759771
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 8/50 |loss: 0.193487| train set 5.156x speedup, test set 5.200x speedup, val set 5.459x speedup, step: 2, train time 15.10 s
JOB test speedup 1.2114078951631604
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 9/50 |loss: 0.186036| train set 5.192x speedup, test set 5.203x speedup, val set 5.466x speedup, step: 3, train time 15.17 s
JOB test speedup 1.2002238444772644
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 10/50 |loss: 0.178215| train set 5.188x speedup, test set 5.196x speedup, val set 5.375x speedup, step: 4, train time 15.12 s
JOB test speedup 1.2188040104488624
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 11/50 |loss: 0.173810| train set 5.195x speedup, test set 5.196x speedup, val set 5.401x speedup, step: 5, train time 15.12 s
JOB test speedup 1.27572917339274
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 12/50 |loss: 0.167524| train set 5.179x speedup, test set 5.196x speedup, val set 5.367x speedup, step: 6, train time 15.06 s
JOB test speedup 1.2377306790366092
TPCH test speedup 5.477660149805418
TPCH skew test speedup 5.197273807529786
Epoch 13/50 |loss: 0.164557| train set 5.171x speedup, test set 5.197x speedup, val set 5.431x speedup, step: 7, train time 15.28 s
JOB test speedup 1.2056094296246949
TPCH test speedup 5.474925744965582
TPCH skew test speedup 5.155080429957161
Epoch 14/50 |loss: 0.165957| train set 5.196x speedup, test set 5.155x speedup, val set 5.376x speedup, step: 8, train time 15.21 s
JOB test speedup 1.2431417576269903
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 15/50 |loss: 0.162681| train set 5.106x speedup, test set 5.200x speedup, val set 5.441x speedup, step: 9, train time 15.17 s
JOB test speedup 1.3391061072837982
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 16/50 |loss: 0.155153| train set 5.186x speedup, test set 5.196x speedup, val set 5.366x speedup, step: 10, train time 15.28 s
JOB test speedup 1.206168058573838
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 17/50 |loss: 0.150351| train set 5.167x speedup, test set 5.196x speedup, val set 5.364x speedup, step: 11, train time 15.27 s
JOB test speedup 1.2187462654331425
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 18/50 |loss: 0.150196| train set 5.187x speedup, test set 5.196x speedup, val set 5.517x speedup, step: 1, train time 15.30 s
JOB test speedup 1.2067261604072854
TPCH test speedup 5.300554563110671
TPCH skew test speedup 5.200043942598341
Epoch 19/50 |loss: 0.148448| train set 5.192x speedup, test set 5.200x speedup, val set 5.463x speedup, step: 2, train time 15.26 s
JOB test speedup 1.25934076127659
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 20/50 |loss: 0.143331| train set 5.199x speedup, test set 5.200x speedup, val set 5.518x speedup, step: 1, train time 15.26 s
JOB test speedup 1.2580906910997258
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 21/50 |loss: 0.144306| train set 5.195x speedup, test set 5.199x speedup, val set 5.519x speedup, step: 1, train time 15.12 s
JOB test speedup 1.2022684455741073
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.195074141017431
Epoch 22/50 |loss: 0.144612| train set 5.201x speedup, test set 5.195x speedup, val set 5.389x speedup, step: 2, train time 15.11 s
JOB test speedup 1.1685270338387155
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 23/50 |loss: 0.136519| train set 5.192x speedup, test set 5.195x speedup, val set 5.407x speedup, step: 3, train time 15.15 s
JOB test speedup 1.300828926891357
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 24/50 |loss: 0.137036| train set 5.202x speedup, test set 5.195x speedup, val set 5.373x speedup, step: 4, train time 15.15 s
JOB test speedup 1.377417197090938
TPCH test speedup 5.493890558473602
TPCH skew test speedup 5.191952143287358
Epoch 25/50 |loss: 0.133621| train set 5.195x speedup, test set 5.192x speedup, val set 5.385x speedup, step: 5, train time 15.07 s
JOB test speedup 1.2732817223132904
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 26/50 |loss: 0.135231| train set 5.204x speedup, test set 5.199x speedup, val set 5.482x speedup, step: 6, train time 15.24 s
JOB test speedup 1.2856077993231458
TPCH test speedup 5.5525301976342245
TPCH skew test speedup 5.1953900312664985
Epoch 27/50 |loss: 0.138157| train set 5.192x speedup, test set 5.195x speedup, val set 5.469x speedup, step: 7, train time 15.17 s
JOB test speedup 1.2130430641050127
TPCH test speedup 5.506336410717353
TPCH skew test speedup 5.177855547692395
Epoch 28/50 |loss: 0.135686| train set 5.185x speedup, test set 5.178x speedup, val set 5.392x speedup, step: 8, train time 15.32 s
JOB test speedup 1.2167751533463333
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 29/50 |loss: 0.128497| train set 5.203x speedup, test set 5.200x speedup, val set 5.452x speedup, step: 9, train time 15.10 s
JOB test speedup 1.3026101563004109
TPCH test speedup 5.263677567312544
TPCH skew test speedup 5.030118124736637
Epoch 30/50 |loss: 0.125585| train set 5.206x speedup, test set 5.030x speedup, val set 5.282x speedup, step: 10, train time 15.19 s
JOB test speedup 1.2785613598690286
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 31/50 |loss: 0.126228| train set 5.201x speedup, test set 5.200x speedup, val set 5.500x speedup, step: 11, train time 15.08 s
JOB test speedup 1.2467927371576417
TPCH test speedup 5.504925996451075
TPCH skew test speedup 5.198289893162001
Epoch 32/50 |loss: 0.127627| train set 5.205x speedup, test set 5.198x speedup, val set 5.393x speedup, step: 12, train time 15.32 s
JOB test speedup 1.1302207539173426
TPCH test speedup 5.477660149805418
TPCH skew test speedup 5.197273807529786
Epoch 33/50 |loss: 0.122291| train set 5.204x speedup, test set 5.197x speedup, val set 5.372x speedup, step: 13, train time 15.21 s
JOB test speedup 1.2149916443261017
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 34/50 |loss: 0.119582| train set 5.203x speedup, test set 5.176x speedup, val set 5.518x speedup, step: 14, train time 15.07 s
JOB test speedup 1.0970100778167597
TPCH test speedup 5.4250188483352195
TPCH skew test speedup 5.12696113720256
Epoch 35/50 |loss: 0.123754| train set 5.189x speedup, test set 5.127x speedup, val set 5.320x speedup, step: 15, train time 15.18 s
JOB test speedup 1.2303285184124841
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.1989771538794916
Epoch 36/50 |loss: 0.124149| train set 5.202x speedup, test set 5.199x speedup, val set 5.500x speedup, step: 16, train time 15.19 s
JOB test speedup 1.2545262930768797
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 37/50 |loss: 0.124413| train set 5.205x speedup, test set 5.196x speedup, val set 5.407x speedup, step: 17, train time 15.26 s
JOB test speedup 1.2431446832483275
TPCH test speedup 5.477389930885127
TPCH skew test speedup 5.17579014060844
Epoch 38/50 |loss: 0.117446| train set 5.171x speedup, test set 5.176x speedup, val set 5.497x speedup, step: 18, train time 15.25 s
JOB test speedup 1.220883585538517
TPCH test speedup 5.47905662536284
TPCH skew test speedup 5.176847433998049
Epoch 39/50 |loss: 0.117202| train set 5.197x speedup, test set 5.177x speedup, val set 5.367x speedup, step: 19, train time 15.04 s
JOB test speedup 1.2408405599674355
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 40/50 |loss: 0.116513| train set 5.209x speedup, test set 5.196x speedup, val set 5.407x speedup, step: 20, train time 15.11 s
JOB test speedup 1.2253081720524137
TPCH test speedup 5.476866633518497
TPCH skew test speedup 5.200012463316058
Epoch 41/50 |loss: 0.117460| train set 5.188x speedup, test set 5.200x speedup, val set 5.384x speedup, step: 21, train time 15.22 s
JOB test speedup 1.2506195884539342
TPCH test speedup 5.555678742916194
TPCH skew test speedup 5.176035395000167
Epoch 42/50 |loss: 0.117561| train set 5.123x speedup, test set 5.176x speedup, val set 5.508x speedup, step: 22, train time 14.99 s
JOB test speedup 1.247675465898653
TPCH test speedup 5.506336410717353
TPCH skew test speedup 5.177855547692395
Epoch 43/50 |loss: 0.119361| train set 5.205x speedup, test set 5.178x speedup, val set 5.375x speedup, step: 23, train time 15.08 s
JOB test speedup 1.2936177810687595
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 5.174665020177513
Epoch 44/50 |loss: 0.114026| train set 5.198x speedup, test set 5.175x speedup, val set 5.407x speedup, step: 24, train time 15.28 s
JOB test speedup 1.2973060232536229
TPCH test speedup 5.477660149805418
TPCH skew test speedup 5.197273807529786
Epoch 45/50 |loss: 0.111906| train set 5.200x speedup, test set 5.197x speedup, val set 5.407x speedup, step: 25, train time 15.07 s
JOB test speedup 1.2265488479134306
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 5.174665020177513
Epoch 46/50 |loss: 0.108378| train set 5.207x speedup, test set 5.175x speedup, val set 5.373x speedup, step: 26, train time 15.30 s
JOB test speedup 1.2823414722636346
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 47/50 |loss: 0.108048| train set 5.206x speedup, test set 5.199x speedup, val set 5.465x speedup, step: 27, train time 15.65 s
JOB test speedup 1.191371908935304
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 48/50 |loss: 0.106847| train set 5.198x speedup, test set 5.196x speedup, val set 5.407x speedup, step: 28, train time 15.16 s
JOB test speedup 0.8175634611933156
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.181732721424572
Epoch 49/50 |loss: 0.111109| train set 5.194x speedup, test set 5.182x speedup, val set 5.504x speedup, step: 29, train time 15.16 s
Training per epoch cost 15.213 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 3.393s, pg runtime 5.855s, speedup 1.726x
03, opt runtime 0.207s, model runtime 0.275s, pg runtime 0.207s, speedup 0.751x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 3.108s, pg runtime 57.198s, speedup 18.401x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.418s, pg runtime 0.354s, speedup 0.847x
18, opt runtime 2.962s, model runtime 2.962s, pg runtime 6.876s, speedup 2.321x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.064s, model runtime 0.066s, pg runtime 0.089s, speedup 1.351x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 21, train speedup 5.195, test speedup 1.258, val speedup 5.519
TPCH best validation speedup epoch: 21, train speedup 5.195, test speedup 5.557, val speedup 5.519
TPCH Skew best validation speedup epoch: 21, train speedup 5.195, test speedup 5.199, val speedup 5.519
execution cost 0:13:34.890639
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.236555, and there are 23566 training samples
in channel 9
JOB test speedup 0.9975538409722561
TPCH test speedup 5.300433535859164
TPCH skew test speedup 5.034841807447045
Epoch 0/50 |loss: 0.403454| train set 4.178x speedup, test set 5.035x speedup, val set 4.690x speedup, step: 1, train time 16.16 s
JOB test speedup 0.8543518124167224
TPCH test speedup 4.993466314268434
TPCH skew test speedup 4.675216017780962
Epoch 1/50 |loss: 0.303250| train set 4.320x speedup, test set 4.675x speedup, val set 4.668x speedup, step: 2, train time 15.49 s
JOB test speedup 1.281291026382384
TPCH test speedup 5.132607963173667
TPCH skew test speedup 4.841013580143088
Epoch 2/50 |loss: 0.267493| train set 4.798x speedup, test set 4.841x speedup, val set 4.916x speedup, step: 1, train time 14.89 s
JOB test speedup 1.3045256445865203
TPCH test speedup 5.300433535859164
TPCH skew test speedup 5.034841807447045
Epoch 3/50 |loss: 0.240799| train set 4.988x speedup, test set 5.035x speedup, val set 5.195x speedup, step: 1, train time 14.86 s
JOB test speedup 0.8153790247890671
TPCH test speedup 5.127195330316103
TPCH skew test speedup 4.650715659936785
Epoch 4/50 |loss: 0.233993| train set 4.906x speedup, test set 4.651x speedup, val set 5.195x speedup, step: 2, train time 14.66 s
JOB test speedup 1.2848505380820383
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 5/50 |loss: 0.214855| train set 5.193x speedup, test set 5.203x speedup, val set 5.492x speedup, step: 1, train time 14.91 s
JOB test speedup 1.2362303895789977
TPCH test speedup 5.538258451140126
TPCH skew test speedup 5.201180127513863
Epoch 6/50 |loss: 0.204114| train set 5.157x speedup, test set 5.201x speedup, val set 5.495x speedup, step: 1, train time 14.85 s
JOB test speedup 0.839852523833867
TPCH test speedup 5.566132443306419
TPCH skew test speedup 5.202197741268691
Epoch 7/50 |loss: 0.195667| train set 5.190x speedup, test set 5.202x speedup, val set 5.477x speedup, step: 2, train time 14.96 s
JOB test speedup 1.2495837302722244
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 8/50 |loss: 0.193818| train set 5.170x speedup, test set 5.200x speedup, val set 5.469x speedup, step: 3, train time 14.79 s
JOB test speedup 1.2395915566853126
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 9/50 |loss: 0.186781| train set 5.194x speedup, test set 5.200x speedup, val set 5.453x speedup, step: 4, train time 14.73 s
JOB test speedup 1.2098546437292028
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 10/50 |loss: 0.178193| train set 5.193x speedup, test set 5.196x speedup, val set 5.365x speedup, step: 5, train time 14.88 s
JOB test speedup 1.2145069418269845
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 11/50 |loss: 0.173644| train set 5.194x speedup, test set 5.196x speedup, val set 5.364x speedup, step: 6, train time 15.08 s
JOB test speedup 1.2231854785638416
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 12/50 |loss: 0.170534| train set 5.196x speedup, test set 5.196x speedup, val set 5.385x speedup, step: 7, train time 15.17 s
JOB test speedup 1.242434851964152
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 13/50 |loss: 0.166009| train set 5.166x speedup, test set 5.196x speedup, val set 5.343x speedup, step: 8, train time 15.07 s
JOB test speedup 1.1936476796760074
TPCH test speedup 5.497059661725392
TPCH skew test speedup 5.194650134986736
Epoch 14/50 |loss: 0.165525| train set 5.191x speedup, test set 5.195x speedup, val set 5.393x speedup, step: 9, train time 15.09 s
JOB test speedup 1.2377004504396707
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 15/50 |loss: 0.161197| train set 5.188x speedup, test set 5.200x speedup, val set 5.466x speedup, step: 10, train time 14.89 s
JOB test speedup 1.2576411255220354
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 16/50 |loss: 0.154557| train set 5.195x speedup, test set 5.196x speedup, val set 5.378x speedup, step: 11, train time 15.09 s
JOB test speedup 1.2721030682441392
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 17/50 |loss: 0.152509| train set 5.174x speedup, test set 5.200x speedup, val set 5.356x speedup, step: 12, train time 15.31 s
JOB test speedup 1.2113050034659176
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 18/50 |loss: 0.150642| train set 5.188x speedup, test set 5.199x speedup, val set 5.480x speedup, step: 13, train time 15.26 s
JOB test speedup 1.1597973192089004
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 19/50 |loss: 0.147333| train set 5.186x speedup, test set 5.200x speedup, val set 5.453x speedup, step: 14, train time 14.91 s
JOB test speedup 1.2146315237155827
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 20/50 |loss: 0.144065| train set 5.199x speedup, test set 5.196x speedup, val set 5.374x speedup, step: 15, train time 15.01 s
JOB test speedup 1.2262552565205473
TPCH test speedup 5.538258451140126
TPCH skew test speedup 5.201180127513863
Epoch 21/50 |loss: 0.144251| train set 5.195x speedup, test set 5.201x speedup, val set 5.477x speedup, step: 16, train time 14.97 s
JOB test speedup 1.1670047278790494
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 22/50 |loss: 0.143076| train set 5.197x speedup, test set 5.195x speedup, val set 5.375x speedup, step: 17, train time 15.11 s
JOB test speedup 1.19748349823709
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 23/50 |loss: 0.137259| train set 5.190x speedup, test set 5.199x speedup, val set 5.467x speedup, step: 18, train time 15.06 s
JOB test speedup 1.2206331260285184
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 24/50 |loss: 0.136144| train set 5.189x speedup, test set 5.195x speedup, val set 5.365x speedup, step: 19, train time 15.18 s
JOB test speedup 1.2495095315751596
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 25/50 |loss: 0.134859| train set 5.203x speedup, test set 5.195x speedup, val set 5.407x speedup, step: 20, train time 15.15 s
JOB test speedup 1.2049916467145094
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 26/50 |loss: 0.134037| train set 5.198x speedup, test set 5.199x speedup, val set 5.443x speedup, step: 21, train time 15.18 s
JOB test speedup 1.1862234389825081
TPCH test speedup 5.561983731557094
TPCH skew test speedup 5.195868999521192
Epoch 27/50 |loss: 0.136173| train set 5.201x speedup, test set 5.196x speedup, val set 5.441x speedup, step: 22, train time 15.09 s
JOB test speedup 1.1467239224081205
TPCH test speedup 5.506336410717353
TPCH skew test speedup 5.177855547692395
Epoch 28/50 |loss: 0.134446| train set 5.187x speedup, test set 5.178x speedup, val set 5.381x speedup, step: 23, train time 15.19 s
JOB test speedup 1.2070093929784933
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 29/50 |loss: 0.128177| train set 5.189x speedup, test set 5.200x speedup, val set 5.420x speedup, step: 24, train time 15.20 s
JOB test speedup 1.3245722153023638
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 30/50 |loss: 0.125059| train set 5.202x speedup, test set 5.200x speedup, val set 5.362x speedup, step: 25, train time 15.40 s
JOB test speedup 1.2116349995975482
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 31/50 |loss: 0.126116| train set 5.204x speedup, test set 5.200x speedup, val set 5.485x speedup, step: 26, train time 15.16 s
JOB test speedup 1.1799949857946683
TPCH test speedup 5.498738349988382
TPCH skew test speedup 5.194650134986736
Epoch 32/50 |loss: 0.127404| train set 5.197x speedup, test set 5.195x speedup, val set 5.364x speedup, step: 27, train time 15.36 s
JOB test speedup 1.103432852367802
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 33/50 |loss: 0.123308| train set 5.204x speedup, test set 5.200x speedup, val set 5.452x speedup, step: 28, train time 14.97 s
JOB test speedup 1.2123806191079725
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 34/50 |loss: 0.120430| train set 5.198x speedup, test set 5.196x speedup, val set 5.375x speedup, step: 29, train time 15.06 s
JOB test speedup 1.1388784046920848
TPCH test speedup 5.503840422038513
TPCH skew test speedup 5.196799466944256
Epoch 35/50 |loss: 0.122075| train set 5.191x speedup, test set 5.197x speedup, val set 5.374x speedup, step: 30, train time 15.17 s
JOB test speedup 1.1481915197933965
TPCH test speedup 5.558090340433582
TPCH skew test speedup 5.198552510531612
Epoch 36/50 |loss: 0.123086| train set 5.206x speedup, test set 5.199x speedup, val set 5.478x speedup, step: 31, train time 15.16 s
JOB test speedup 1.2726559029126934
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 37/50 |loss: 0.122945| train set 5.205x speedup, test set 5.196x speedup, val set 5.396x speedup, step: 32, train time 15.25 s
JOB test speedup 1.2098273774278945
TPCH test speedup 5.537982220539701
TPCH skew test speedup 5.179664220650327
Epoch 38/50 |loss: 0.117205| train set 5.175x speedup, test set 5.180x speedup, val set 5.471x speedup, step: 33, train time 15.22 s
JOB test speedup 1.1191738268362956
TPCH test speedup 5.47905662536284
TPCH skew test speedup 5.176847433998049
Epoch 39/50 |loss: 0.117206| train set 5.197x speedup, test set 5.177x speedup, val set 5.379x speedup, step: 34, train time 15.25 s
JOB test speedup 1.1626062679891038
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 40/50 |loss: 0.116829| train set 5.200x speedup, test set 5.196x speedup, val set 5.375x speedup, step: 35, train time 15.32 s
JOB test speedup 1.216501891154859
TPCH test speedup 5.47905662536284
TPCH skew test speedup 5.176847433998049
Epoch 41/50 |loss: 0.118145| train set 5.186x speedup, test set 5.177x speedup, val set 5.355x speedup, step: 36, train time 15.26 s
JOB test speedup 1.203718521569342
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 42/50 |loss: 0.118822| train set 5.120x speedup, test set 5.151x speedup, val set 5.521x speedup, step: 1, train time 15.18 s
JOB test speedup 1.1800896623846555
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.181732721424572
Epoch 43/50 |loss: 0.115887| train set 5.173x speedup, test set 5.182x speedup, val set 5.400x speedup, step: 2, train time 15.38 s
JOB test speedup 1.2116074652158038
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 5.174665020177513
Epoch 44/50 |loss: 0.112131| train set 5.199x speedup, test set 5.175x speedup, val set 5.396x speedup, step: 3, train time 15.13 s
JOB test speedup 1.2563953183182233
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 45/50 |loss: 0.112906| train set 5.204x speedup, test set 5.200x speedup, val set 5.507x speedup, step: 4, train time 15.25 s
JOB test speedup 1.2154148005305796
TPCH test speedup 5.440700706436875
TPCH skew test speedup 5.14570790917281
Epoch 46/50 |loss: 0.109328| train set 5.207x speedup, test set 5.146x speedup, val set 5.379x speedup, step: 5, train time 15.59 s
JOB test speedup 1.2143553912622271
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 47/50 |loss: 0.110469| train set 5.207x speedup, test set 5.195x speedup, val set 5.362x speedup, step: 6, train time 15.68 s
JOB test speedup 1.1863440290203655
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 48/50 |loss: 0.107966| train set 5.205x speedup, test set 5.196x speedup, val set 5.374x speedup, step: 7, train time 15.35 s
JOB test speedup 1.1524576606084729
TPCH test speedup 5.566132443306419
TPCH skew test speedup 5.202197741268691
Epoch 49/50 |loss: 0.109650| train set 5.204x speedup, test set 5.202x speedup, val set 5.492x speedup, step: 8, train time 15.39 s
Training per epoch cost 15.154 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 3.393s, pg runtime 5.855s, speedup 1.726x
03, opt runtime 0.207s, model runtime 0.275s, pg runtime 0.207s, speedup 0.751x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.064s, model runtime 0.064s, pg runtime 0.089s, speedup 1.393x
21, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 42, train speedup 5.120, test speedup 1.204, val speedup 5.521
TPCH best validation speedup epoch: 42, train speedup 5.120, test speedup 5.500, val speedup 5.521
TPCH Skew best validation speedup epoch: 42, train speedup 5.120, test speedup 5.151, val speedup 5.521
execution cost 0:13:32.669576
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.192801, and there are 23566 training samples
in channel 9
JOB test speedup 0.9007092234792355
TPCH test speedup 5.538258451140126
TPCH skew test speedup 5.201180127513863
Epoch 0/50 |loss: 0.403247| train set 4.804x speedup, test set 5.201x speedup, val set 5.447x speedup, step: 1, train time 16.14 s
JOB test speedup 1.2639853224309303
TPCH test speedup 5.108875788391239
TPCH skew test speedup 4.9101288376281325
Epoch 1/50 |loss: 0.303627| train set 4.457x speedup, test set 4.910x speedup, val set 4.834x speedup, step: 2, train time 15.32 s
JOB test speedup 0.8819057606141419
TPCH test speedup 4.972894985902635
TPCH skew test speedup 4.5913404568521345
Epoch 2/50 |loss: 0.265419| train set 4.752x speedup, test set 4.591x speedup, val set 4.825x speedup, step: 3, train time 14.76 s
JOB test speedup 1.294774259840779
TPCH test speedup 5.300433535859164
TPCH skew test speedup 5.034841807447045
Epoch 3/50 |loss: 0.242608| train set 4.968x speedup, test set 5.035x speedup, val set 5.208x speedup, step: 4, train time 14.59 s
JOB test speedup 1.2595709042948484
TPCH test speedup 5.135448209291483
TPCH skew test speedup 4.663864120598574
Epoch 4/50 |loss: 0.234617| train set 5.048x speedup, test set 4.664x speedup, val set 4.976x speedup, step: 5, train time 14.76 s
JOB test speedup 1.306107181454464
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 5/50 |loss: 0.214910| train set 5.193x speedup, test set 5.203x speedup, val set 5.466x speedup, step: 1, train time 14.77 s
JOB test speedup 1.2731748420182794
TPCH test speedup 5.4993957323896945
TPCH skew test speedup 5.149120464597547
Epoch 6/50 |loss: 0.205848| train set 5.192x speedup, test set 5.149x speedup, val set 5.549x speedup, step: 1, train time 14.61 s
JOB test speedup 1.2996673157886651
TPCH test speedup 5.566132443306419
TPCH skew test speedup 5.202197741268691
Epoch 7/50 |loss: 0.196028| train set 5.161x speedup, test set 5.202x speedup, val set 5.449x speedup, step: 2, train time 14.70 s
JOB test speedup 1.1945163331940303
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.198552510531612
Epoch 8/50 |loss: 0.193668| train set 5.158x speedup, test set 5.199x speedup, val set 5.457x speedup, step: 3, train time 15.06 s
JOB test speedup 1.2114835107691082
TPCH test speedup 5.480571615090779
TPCH skew test speedup 5.151281380280468
Epoch 9/50 |loss: 0.185417| train set 5.178x speedup, test set 5.151x speedup, val set 5.467x speedup, step: 4, train time 14.58 s
JOB test speedup 1.2127314533059317
TPCH test speedup 5.477660149805418
TPCH skew test speedup 5.197273807529786
Epoch 10/50 |loss: 0.179875| train set 5.183x speedup, test set 5.197x speedup, val set 5.389x speedup, step: 5, train time 14.78 s
JOB test speedup 1.1982723278563865
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 11/50 |loss: 0.173880| train set 5.195x speedup, test set 5.196x speedup, val set 5.353x speedup, step: 6, train time 14.77 s
JOB test speedup 1.1623269805953542
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 12/50 |loss: 0.168218| train set 5.195x speedup, test set 5.196x speedup, val set 5.353x speedup, step: 7, train time 14.96 s
JOB test speedup 1.2416123549462352
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 13/50 |loss: 0.164516| train set 5.196x speedup, test set 5.200x speedup, val set 5.389x speedup, step: 8, train time 14.68 s
JOB test speedup 1.18721206712645
TPCH test speedup 5.2577244861404155
TPCH skew test speedup 4.937272935955677
Epoch 14/50 |loss: 0.164384| train set 5.195x speedup, test set 4.937x speedup, val set 5.040x speedup, step: 9, train time 14.76 s
JOB test speedup 1.234753224022386
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 15/50 |loss: 0.160788| train set 5.187x speedup, test set 5.151x speedup, val set 5.483x speedup, step: 10, train time 14.78 s
JOB test speedup 1.229354371553826
TPCH test speedup 5.4206432573849135
TPCH skew test speedup 5.147865960931192
Epoch 16/50 |loss: 0.152786| train set 5.184x speedup, test set 5.148x speedup, val set 5.366x speedup, step: 11, train time 14.76 s
JOB test speedup 1.1692570891647116
TPCH test speedup 5.419011906134256
TPCH skew test speedup 5.146820471271565
Epoch 17/50 |loss: 0.147637| train set 5.090x speedup, test set 5.147x speedup, val set 5.418x speedup, step: 12, train time 14.62 s
JOB test speedup 1.2813015682346824
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 18/50 |loss: 0.148882| train set 5.200x speedup, test set 5.199x speedup, val set 5.495x speedup, step: 13, train time 14.66 s
JOB test speedup 1.200456028021529
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 19/50 |loss: 0.146762| train set 5.203x speedup, test set 5.200x speedup, val set 5.457x speedup, step: 14, train time 14.97 s
JOB test speedup 1.2372288054358034
TPCH test speedup 5.498738349988382
TPCH skew test speedup 5.1957151485230115
Epoch 20/50 |loss: 0.141742| train set 5.176x speedup, test set 5.196x speedup, val set 5.388x speedup, step: 15, train time 14.88 s
JOB test speedup 1.286424165660421
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 21/50 |loss: 0.140623| train set 5.200x speedup, test set 5.203x speedup, val set 5.479x speedup, step: 16, train time 15.08 s
JOB test speedup 1.195903395054395
TPCH test speedup 5.262944832726143
TPCH skew test speedup 5.032683407620752
Epoch 22/50 |loss: 0.143177| train set 5.204x speedup, test set 5.033x speedup, val set 5.374x speedup, step: 17, train time 15.02 s
JOB test speedup 1.2043317380348928
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 23/50 |loss: 0.135880| train set 5.199x speedup, test set 5.199x speedup, val set 5.495x speedup, step: 18, train time 14.78 s
JOB test speedup 1.2409084414605553
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 24/50 |loss: 0.134266| train set 5.197x speedup, test set 5.196x speedup, val set 5.389x speedup, step: 19, train time 14.92 s
JOB test speedup 1.3189350990005237
TPCH test speedup 5.435095751261202
TPCH skew test speedup 5.139515784961519
Epoch 25/50 |loss: 0.134523| train set 5.200x speedup, test set 5.140x speedup, val set 5.346x speedup, step: 20, train time 14.98 s
JOB test speedup 1.2707339351974576
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.206260036668735
Epoch 26/50 |loss: 0.135247| train set 5.205x speedup, test set 5.206x speedup, val set 5.471x speedup, step: 21, train time 14.82 s
JOB test speedup 1.3065323923319143
TPCH test speedup 5.5525301976342245
TPCH skew test speedup 5.1953900312664985
Epoch 27/50 |loss: 0.133249| train set 5.198x speedup, test set 5.195x speedup, val set 5.459x speedup, step: 22, train time 14.67 s
JOB test speedup 1.2048232561189638
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 28/50 |loss: 0.132717| train set 5.188x speedup, test set 5.176x speedup, val set 5.370x speedup, step: 23, train time 14.89 s
JOB test speedup 1.2335445871944548
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 29/50 |loss: 0.126452| train set 5.173x speedup, test set 5.200x speedup, val set 5.444x speedup, step: 24, train time 14.85 s
JOB test speedup 1.2687667156001243
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 30/50 |loss: 0.126015| train set 5.204x speedup, test set 5.196x speedup, val set 5.458x speedup, step: 25, train time 14.97 s
JOB test speedup 1.2694411151299898
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.207329816567594
Epoch 31/50 |loss: 0.122319| train set 5.201x speedup, test set 5.207x speedup, val set 5.495x speedup, step: 26, train time 14.98 s
JOB test speedup 1.1430638592167852
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 32/50 |loss: 0.125594| train set 5.203x speedup, test set 5.195x speedup, val set 5.353x speedup, step: 27, train time 15.12 s
JOB test speedup 1.1077323911876906
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 33/50 |loss: 0.123345| train set 5.201x speedup, test set 5.200x speedup, val set 5.445x speedup, step: 28, train time 14.96 s
JOB test speedup 1.2005283574682293
TPCH test speedup 5.49874963220118
TPCH skew test speedup 5.178437837634478
Epoch 34/50 |loss: 0.118387| train set 5.187x speedup, test set 5.178x speedup, val set 5.395x speedup, step: 29, train time 15.06 s
JOB test speedup 1.1846451074480893
TPCH test speedup 5.4236497792763165
TPCH skew test speedup 5.145949835467032
Epoch 35/50 |loss: 0.122471| train set 5.192x speedup, test set 5.146x speedup, val set 5.374x speedup, step: 30, train time 15.15 s
JOB test speedup 1.1599630432810963
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.195074141017431
Epoch 36/50 |loss: 0.126350| train set 5.199x speedup, test set 5.195x speedup, val set 5.472x speedup, step: 31, train time 14.93 s
JOB test speedup 1.4462010714200668
TPCH test speedup 5.263677567312544
TPCH skew test speedup 5.030118124736637
Epoch 37/50 |loss: 0.120422| train set 5.207x speedup, test set 5.030x speedup, val set 5.416x speedup, step: 32, train time 15.01 s
JOB test speedup 1.1861614671132097
TPCH test speedup 5.53717113231049
TPCH skew test speedup 5.182384344599503
Epoch 38/50 |loss: 0.118920| train set 5.173x speedup, test set 5.182x speedup, val set 5.487x speedup, step: 33, train time 14.90 s
JOB test speedup 1.085145067565715
TPCH test speedup 5.264967055601264
TPCH skew test speedup 5.010982116785603
Epoch 39/50 |loss: 0.118105| train set 5.194x speedup, test set 5.011x speedup, val set 5.389x speedup, step: 34, train time 14.92 s
JOB test speedup 1.1716509013713934
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 40/50 |loss: 0.117874| train set 5.200x speedup, test set 5.196x speedup, val set 5.389x speedup, step: 35, train time 14.97 s
JOB test speedup 1.2203443987634683
TPCH test speedup 5.497343101374444
TPCH skew test speedup 5.198876788434279
Epoch 41/50 |loss: 0.118276| train set 5.196x speedup, test set 5.199x speedup, val set 5.390x speedup, step: 36, train time 14.96 s
JOB test speedup 1.205120072191411
TPCH test speedup 5.432208544828809
TPCH skew test speedup 5.095086191636447
Epoch 42/50 |loss: 0.116641| train set 5.130x speedup, test set 5.095x speedup, val set 5.426x speedup, step: 37, train time 14.97 s
JOB test speedup 1.1978110630271404
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 43/50 |loss: 0.119393| train set 5.196x speedup, test set 5.176x speedup, val set 5.398x speedup, step: 38, train time 14.86 s
JOB test speedup 1.2316153708950428
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 44/50 |loss: 0.110049| train set 5.204x speedup, test set 5.196x speedup, val set 5.402x speedup, step: 39, train time 15.02 s
JOB test speedup 1.2178708388027393
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 45/50 |loss: 0.112299| train set 5.200x speedup, test set 5.196x speedup, val set 5.374x speedup, step: 40, train time 14.97 s
JOB test speedup 1.2085296294884467
TPCH test speedup 5.4198661733522995
TPCH skew test speedup 5.150552780736247
Epoch 46/50 |loss: 0.110304| train set 5.206x speedup, test set 5.151x speedup, val set 5.453x speedup, step: 41, train time 14.93 s
JOB test speedup 1.2342627252512237
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 47/50 |loss: 0.108330| train set 5.204x speedup, test set 5.199x speedup, val set 5.488x speedup, step: 42, train time 15.41 s
JOB test speedup 1.1996941548886793
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 48/50 |loss: 0.107902| train set 5.199x speedup, test set 5.196x speedup, val set 5.353x speedup, step: 43, train time 14.77 s
JOB test speedup 1.1832579266117462
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 49/50 |loss: 0.110042| train set 5.205x speedup, test set 5.196x speedup, val set 5.388x speedup, step: 44, train time 15.00 s
Training per epoch cost 14.915 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 3.393s, pg runtime 5.855s, speedup 1.726x
03, opt runtime 0.207s, model runtime 0.275s, pg runtime 0.207s, speedup 0.751x
04, opt runtime 0.920s, model runtime 0.920s, pg runtime 1.680s, speedup 1.825x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 2.962s, pg runtime 6.876s, speedup 2.321x
19, opt runtime 1.923s, model runtime 2.365s, pg runtime 3.540s, speedup 1.497x
20, opt runtime 0.064s, model runtime 0.064s, pg runtime 0.089s, speedup 1.393x
21, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 1.594s, pg runtime 0.389s, speedup 0.244x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.179s, pg runtime 0.157s, speedup 0.875x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 6.208s, pg runtime 5.521s, speedup 0.889x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.438s, pg runtime 1.438s, speedup 1.000x
20, opt runtime 1.428s, model runtime 1.428s, pg runtime 1.428s, speedup 1.000x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.308s, model runtime 1.528s, pg runtime 1.528s, speedup 1.000x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 6, train speedup 5.192, test speedup 1.273, val speedup 5.549
TPCH best validation speedup epoch: 6, train speedup 5.192, test speedup 5.499, val speedup 5.549
TPCH Skew best validation speedup epoch: 6, train speedup 5.192, test speedup 5.149, val speedup 5.549
execution cost 0:13:19.581990
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.209252, and there are 23566 training samples
in channel 9
JOB test speedup 0.9664121851293704
TPCH test speedup 4.739551735944437
TPCH skew test speedup 4.3119759734171375
Epoch 0/50 |loss: 0.402785| train set 3.991x speedup, test set 4.312x speedup, val set 4.624x speedup, step: 1, train time 16.40 s
JOB test speedup 1.364038911906249
TPCH test speedup 5.033410047336955
TPCH skew test speedup 4.717619117755452
Epoch 1/50 |loss: 0.300861| train set 4.526x speedup, test set 4.718x speedup, val set 4.733x speedup, step: 1, train time 15.31 s
JOB test speedup 1.2501438852404843
TPCH test speedup 5.189211539404018
TPCH skew test speedup 4.811307956766776
Epoch 2/50 |loss: 0.264775| train set 4.949x speedup, test set 4.811x speedup, val set 5.135x speedup, step: 1, train time 14.92 s
JOB test speedup 1.313848658943098
TPCH test speedup 5.468130862245533
TPCH skew test speedup 5.137292592809155
Epoch 3/50 |loss: 0.242598| train set 5.101x speedup, test set 5.137x speedup, val set 5.367x speedup, step: 1, train time 14.96 s
JOB test speedup 0.8241258177768697
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 4/50 |loss: 0.235298| train set 5.073x speedup, test set 5.151x speedup, val set 5.520x speedup, step: 1, train time 15.07 s
JOB test speedup 1.3210306622978456
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 5/50 |loss: 0.215016| train set 5.192x speedup, test set 5.200x speedup, val set 5.480x speedup, step: 2, train time 15.09 s
JOB test speedup 1.3414957126834888
TPCH test speedup 5.439561081248254
TPCH skew test speedup 5.092286818703361
Epoch 6/50 |loss: 0.205116| train set 5.073x speedup, test set 5.092x speedup, val set 5.358x speedup, step: 3, train time 15.08 s
JOB test speedup 0.824044425505714
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 7/50 |loss: 0.196397| train set 5.168x speedup, test set 5.200x speedup, val set 5.466x speedup, step: 4, train time 14.97 s
JOB test speedup 1.2463761402719402
TPCH test speedup 5.489135647640902
TPCH skew test speedup 5.1357696975839255
Epoch 8/50 |loss: 0.192680| train set 5.124x speedup, test set 5.136x speedup, val set 5.396x speedup, step: 5, train time 14.96 s
JOB test speedup 1.3040945324619655
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 9/50 |loss: 0.186464| train set 5.199x speedup, test set 5.200x speedup, val set 5.467x speedup, step: 6, train time 14.98 s
JOB test speedup 1.2040647013580412
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 10/50 |loss: 0.177820| train set 5.180x speedup, test set 5.196x speedup, val set 5.367x speedup, step: 7, train time 15.07 s
JOB test speedup 1.2199769382707761
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 11/50 |loss: 0.173258| train set 5.201x speedup, test set 5.200x speedup, val set 5.374x speedup, step: 8, train time 15.11 s
JOB test speedup 1.2718616147654347
TPCH test speedup 5.477660149805418
TPCH skew test speedup 5.197273807529786
Epoch 12/50 |loss: 0.167283| train set 5.173x speedup, test set 5.197x speedup, val set 5.402x speedup, step: 9, train time 14.97 s
JOB test speedup 1.1905369047605652
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 13/50 |loss: 0.166151| train set 5.202x speedup, test set 5.199x speedup, val set 5.501x speedup, step: 10, train time 15.07 s
JOB test speedup 1.2151732957750072
TPCH test speedup 5.475642822536687
TPCH skew test speedup 5.194650134986736
Epoch 14/50 |loss: 0.164257| train set 5.194x speedup, test set 5.195x speedup, val set 5.401x speedup, step: 11, train time 14.99 s
JOB test speedup 1.2282920857682411
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 15/50 |loss: 0.160321| train set 5.188x speedup, test set 5.151x speedup, val set 5.493x speedup, step: 12, train time 15.17 s
JOB test speedup 1.3928307272212648
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 16/50 |loss: 0.154545| train set 5.199x speedup, test set 5.200x speedup, val set 5.481x speedup, step: 13, train time 15.13 s
JOB test speedup 1.258814541687236
TPCH test speedup 5.4782515061550825
TPCH skew test speedup 5.195783963825011
Epoch 17/50 |loss: 0.148882| train set 5.175x speedup, test set 5.196x speedup, val set 5.363x speedup, step: 14, train time 15.05 s
JOB test speedup 1.2185304840736961
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 18/50 |loss: 0.151475| train set 5.188x speedup, test set 5.199x speedup, val set 5.491x speedup, step: 15, train time 15.07 s
JOB test speedup 1.2775617760100613
TPCH test speedup 5.440700706436875
TPCH skew test speedup 5.1467529468389985
Epoch 19/50 |loss: 0.144631| train set 4.908x speedup, test set 5.147x speedup, val set 5.442x speedup, step: 16, train time 14.87 s
JOB test speedup 1.2394999777298563
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 20/50 |loss: 0.141043| train set 5.204x speedup, test set 5.200x speedup, val set 5.342x speedup, step: 17, train time 15.13 s
JOB test speedup 1.3981286094765177
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 21/50 |loss: 0.141866| train set 5.201x speedup, test set 5.200x speedup, val set 5.518x speedup, step: 18, train time 15.21 s
JOB test speedup 1.2232799978371782
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 22/50 |loss: 0.144230| train set 5.193x speedup, test set 5.196x speedup, val set 5.420x speedup, step: 19, train time 15.07 s
JOB test speedup 1.1949479292556886
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 23/50 |loss: 0.133522| train set 5.188x speedup, test set 5.199x speedup, val set 5.484x speedup, step: 20, train time 15.12 s
JOB test speedup 1.2108002977066181
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 5.195074141017431
Epoch 24/50 |loss: 0.134474| train set 5.181x speedup, test set 5.195x speedup, val set 5.373x speedup, step: 21, train time 15.09 s
JOB test speedup 1.3361516280234857
TPCH test speedup 5.4947508198940405
TPCH skew test speedup 5.192656240967044
Epoch 25/50 |loss: 0.134526| train set 5.119x speedup, test set 5.193x speedup, val set 5.475x speedup, step: 22, train time 15.15 s
JOB test speedup 1.2397085186337469
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 26/50 |loss: 0.134162| train set 5.204x speedup, test set 5.200x speedup, val set 5.484x speedup, step: 23, train time 14.97 s
JOB test speedup 1.2526747049589446
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 27/50 |loss: 0.133753| train set 5.203x speedup, test set 5.199x speedup, val set 5.454x speedup, step: 24, train time 15.22 s
JOB test speedup 1.21245162359214
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 28/50 |loss: 0.131194| train set 5.189x speedup, test set 5.176x speedup, val set 5.406x speedup, step: 25, train time 15.12 s
JOB test speedup 1.2175332780625874
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 29/50 |loss: 0.129329| train set 5.195x speedup, test set 5.200x speedup, val set 5.430x speedup, step: 26, train time 15.22 s
JOB test speedup 1.3114624143886997
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 30/50 |loss: 0.124030| train set 5.202x speedup, test set 5.200x speedup, val set 5.481x speedup, step: 27, train time 15.05 s
JOB test speedup 1.2055563232765203
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 31/50 |loss: 0.122883| train set 5.204x speedup, test set 5.200x speedup, val set 5.464x speedup, step: 28, train time 15.27 s
JOB test speedup 1.1830369002928678
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 32/50 |loss: 0.126140| train set 5.205x speedup, test set 5.176x speedup, val set 5.382x speedup, step: 29, train time 15.17 s
JOB test speedup 1.200951176072646
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 33/50 |loss: 0.123003| train set 5.201x speedup, test set 5.200x speedup, val set 5.481x speedup, step: 30, train time 15.12 s
JOB test speedup 1.3527406624446148
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 34/50 |loss: 0.120440| train set 5.196x speedup, test set 5.176x speedup, val set 5.380x speedup, step: 31, train time 15.12 s
JOB test speedup 1.1809283769847903
TPCH test speedup 5.506933975266088
TPCH skew test speedup 5.177434347547566
Epoch 35/50 |loss: 0.122071| train set 5.191x speedup, test set 5.177x speedup, val set 5.377x speedup, step: 32, train time 15.08 s
JOB test speedup 1.2358752361619045
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 36/50 |loss: 0.126126| train set 5.202x speedup, test set 5.203x speedup, val set 5.472x speedup, step: 33, train time 15.16 s
JOB test speedup 1.2383586909483428
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 37/50 |loss: 0.123256| train set 5.206x speedup, test set 5.196x speedup, val set 5.397x speedup, step: 34, train time 15.16 s
JOB test speedup 1.2814331913090522
TPCH test speedup 5.53968599951373
TPCH skew test speedup 5.180723097562853
Epoch 38/50 |loss: 0.117575| train set 5.169x speedup, test set 5.181x speedup, val set 5.459x speedup, step: 35, train time 15.15 s
JOB test speedup 1.2392357827006322
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 39/50 |loss: 0.116382| train set 5.194x speedup, test set 5.176x speedup, val set 5.414x speedup, step: 36, train time 15.16 s
JOB test speedup 1.209583271186304
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 40/50 |loss: 0.115941| train set 5.200x speedup, test set 5.200x speedup, val set 5.467x speedup, step: 37, train time 15.00 s
JOB test speedup 1.2113913371072624
TPCH test speedup 5.360528379745101
TPCH skew test speedup 4.960109239033165
Epoch 41/50 |loss: 0.119358| train set 5.180x speedup, test set 4.960x speedup, val set 5.396x speedup, step: 38, train time 15.27 s
JOB test speedup 1.308055142575077
TPCH test speedup 5.433581938750326
TPCH skew test speedup 5.070952500237731
Epoch 42/50 |loss: 0.115749| train set 5.057x speedup, test set 5.071x speedup, val set 5.451x speedup, step: 39, train time 15.06 s
JOB test speedup 1.1771033164601847
TPCH test speedup 5.49874963220118
TPCH skew test speedup 5.178437837634478
Epoch 43/50 |loss: 0.119849| train set 5.194x speedup, test set 5.178x speedup, val set 5.377x speedup, step: 40, train time 15.22 s
JOB test speedup 1.3513477835122498
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 44/50 |loss: 0.114606| train set 5.120x speedup, test set 5.180x speedup, val set 5.433x speedup, step: 41, train time 15.15 s
JOB test speedup 1.192069041532988
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 45/50 |loss: 0.112695| train set 5.200x speedup, test set 5.200x speedup, val set 5.466x speedup, step: 42, train time 14.96 s
JOB test speedup 1.342724831739272
TPCH test speedup 5.442078398307722
TPCH skew test speedup 5.126720993002068
Epoch 46/50 |loss: 0.111284| train set 5.207x speedup, test set 5.127x speedup, val set 5.408x speedup, step: 43, train time 15.16 s
JOB test speedup 1.3543953808660727
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 47/50 |loss: 0.108651| train set 5.206x speedup, test set 5.179x speedup, val set 5.431x speedup, step: 44, train time 15.75 s
JOB test speedup 1.2170765260027048
TPCH test speedup 5.301862185084418
TPCH skew test speedup 4.960137880708282
Epoch 48/50 |loss: 0.109102| train set 5.199x speedup, test set 4.960x speedup, val set 5.466x speedup, step: 45, train time 15.41 s
JOB test speedup 1.2243789169440857
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 49/50 |loss: 0.108670| train set 5.205x speedup, test set 5.180x speedup, val set 5.470x speedup, step: 46, train time 15.26 s
Training per epoch cost 15.144 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.457s, pg runtime 0.354s, speedup 0.774x
18, opt runtime 2.962s, model runtime 2.962s, pg runtime 6.876s, speedup 2.321x
19, opt runtime 1.923s, model runtime 78.426s, pg runtime 3.540s, speedup 0.045x
20, opt runtime 0.064s, model runtime 0.066s, pg runtime 0.089s, speedup 1.351x
21, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
22, opt runtime 0.093s, model runtime 0.135s, pg runtime 2.389s, speedup 17.672x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.473s, pg runtime 0.157s, speedup 0.331x
29, opt runtime 0.158s, model runtime 0.158s, pg runtime 0.158s, speedup 1.000x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 4, train speedup 5.073, test speedup 0.824, val speedup 5.520
TPCH best validation speedup epoch: 4, train speedup 5.073, test speedup 5.500, val speedup 5.520
TPCH Skew best validation speedup epoch: 4, train speedup 5.073, test speedup 5.151, val speedup 5.520
execution cost 0:13:31.599722
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.205130, and there are 23566 training samples
in channel 9
JOB test speedup 0.9622570327674307
TPCH test speedup 5.407738173411424
TPCH skew test speedup 5.10558567536875
Epoch 0/50 |loss: 0.403743| train set 4.105x speedup, test set 5.106x speedup, val set 4.666x speedup, step: 1, train time 16.07 s
JOB test speedup 1.2203418982980636
TPCH test speedup 4.993466314268434
TPCH skew test speedup 4.675216017780962
Epoch 1/50 |loss: 0.303884| train set 4.342x speedup, test set 4.675x speedup, val set 4.678x speedup, step: 1, train time 15.20 s
JOB test speedup 1.1842620060406863
TPCH test speedup 5.2384503004574565
TPCH skew test speedup 4.938680370605209
Epoch 2/50 |loss: 0.268317| train set 4.911x speedup, test set 4.939x speedup, val set 5.040x speedup, step: 1, train time 14.97 s
JOB test speedup 1.5660147006090575
TPCH test speedup 5.300433535859164
TPCH skew test speedup 5.034841807447045
Epoch 3/50 |loss: 0.243432| train set 4.982x speedup, test set 5.035x speedup, val set 5.240x speedup, step: 1, train time 14.98 s
JOB test speedup 1.2313642212966436
TPCH test speedup 5.488541939281187
TPCH skew test speedup 5.136184145640488
Epoch 4/50 |loss: 0.237378| train set 5.067x speedup, test set 5.136x speedup, val set 5.410x speedup, step: 1, train time 14.96 s
JOB test speedup 1.3118817046374944
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 5/50 |loss: 0.216367| train set 5.187x speedup, test set 5.200x speedup, val set 5.475x speedup, step: 1, train time 14.98 s
JOB test speedup 1.3627818302127788
TPCH test speedup 5.439561081248254
TPCH skew test speedup 5.092286818703361
Epoch 6/50 |loss: 0.207146| train set 5.076x speedup, test set 5.092x speedup, val set 5.371x speedup, step: 2, train time 14.95 s
JOB test speedup 1.2369667333648695
TPCH test speedup 5.5018876904549385
TPCH skew test speedup 5.130521937739417
Epoch 7/50 |loss: 0.197091| train set 5.192x speedup, test set 5.131x speedup, val set 5.535x speedup, step: 1, train time 15.16 s
JOB test speedup 1.170484280408319
TPCH test speedup 5.498799802601757
TPCH skew test speedup 5.149537070311538
Epoch 8/50 |loss: 0.193544| train set 5.080x speedup, test set 5.150x speedup, val set 5.520x speedup, step: 2, train time 14.87 s
JOB test speedup 1.2516205028341638
TPCH test speedup 5.561245196388108
TPCH skew test speedup 5.179174348364702
Epoch 9/50 |loss: 0.186258| train set 5.199x speedup, test set 5.179x speedup, val set 5.484x speedup, step: 3, train time 14.88 s
JOB test speedup 1.1999399795217673
TPCH test speedup 5.498738349988382
TPCH skew test speedup 5.1957151485230115
Epoch 10/50 |loss: 0.179411| train set 5.192x speedup, test set 5.196x speedup, val set 5.388x speedup, step: 4, train time 14.96 s
JOB test speedup 1.1988338636726197
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 11/50 |loss: 0.172363| train set 5.188x speedup, test set 5.196x speedup, val set 5.401x speedup, step: 5, train time 14.94 s
JOB test speedup 1.2398495222219565
TPCH test speedup 5.3997728997806576
TPCH skew test speedup 5.0917189384504535
Epoch 12/50 |loss: 0.168752| train set 5.104x speedup, test set 5.092x speedup, val set 5.260x speedup, step: 6, train time 14.95 s
JOB test speedup 1.2624626405795412
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 13/50 |loss: 0.167648| train set 5.170x speedup, test set 5.179x speedup, val set 5.484x speedup, step: 7, train time 14.91 s
JOB test speedup 1.2458975792031997
TPCH test speedup 5.474925744965582
TPCH skew test speedup 5.155080429957161
Epoch 14/50 |loss: 0.164058| train set 5.148x speedup, test set 5.155x speedup, val set 5.362x speedup, step: 8, train time 14.90 s
JOB test speedup 1.3080587341908914
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 15/50 |loss: 0.162632| train set 5.107x speedup, test set 5.151x speedup, val set 5.546x speedup, step: 1, train time 14.96 s
JOB test speedup 1.2924418059469927
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 16/50 |loss: 0.154113| train set 5.203x speedup, test set 5.196x speedup, val set 5.366x speedup, step: 2, train time 14.99 s
JOB test speedup 1.2818027262270502
TPCH test speedup 5.408001204360467
TPCH skew test speedup 5.132028113007371
Epoch 17/50 |loss: 0.149729| train set 5.106x speedup, test set 5.132x speedup, val set 5.312x speedup, step: 3, train time 15.01 s
JOB test speedup 1.3005704112610477
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 18/50 |loss: 0.150085| train set 5.194x speedup, test set 5.199x speedup, val set 5.495x speedup, step: 4, train time 14.96 s
JOB test speedup 1.292359048161161
TPCH test speedup 5.300554563110671
TPCH skew test speedup 4.978886802936329
Epoch 19/50 |loss: 0.148045| train set 5.189x speedup, test set 4.979x speedup, val set 5.311x speedup, step: 5, train time 14.95 s
JOB test speedup 1.2460828346840582
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 20/50 |loss: 0.142821| train set 5.197x speedup, test set 5.200x speedup, val set 5.495x speedup, step: 6, train time 14.98 s
JOB test speedup 1.2665269371578363
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 21/50 |loss: 0.142670| train set 5.195x speedup, test set 5.200x speedup, val set 5.518x speedup, step: 7, train time 14.99 s
JOB test speedup 1.2519478844915541
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 22/50 |loss: 0.145287| train set 5.207x speedup, test set 5.195x speedup, val set 5.425x speedup, step: 8, train time 14.97 s
JOB test speedup 0.7802015005693956
TPCH test speedup 5.3114059524152095
TPCH skew test speedup 4.940218406697744
Epoch 23/50 |loss: 0.137325| train set 5.191x speedup, test set 4.940x speedup, val set 5.495x speedup, step: 9, train time 14.88 s
JOB test speedup 1.258441214003737
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 4.955615869125697
Epoch 24/50 |loss: 0.135426| train set 5.188x speedup, test set 4.956x speedup, val set 5.407x speedup, step: 10, train time 15.02 s
JOB test speedup 1.3444081272799762
TPCH test speedup 5.49529532291848
TPCH skew test speedup 5.171567496814318
Epoch 25/50 |loss: 0.133913| train set 5.200x speedup, test set 5.172x speedup, val set 5.420x speedup, step: 11, train time 15.05 s
JOB test speedup 1.2106682964936595
TPCH test speedup 5.561245196388108
TPCH skew test speedup 5.179174348364702
Epoch 26/50 |loss: 0.135013| train set 5.198x speedup, test set 5.179x speedup, val set 5.486x speedup, step: 12, train time 15.16 s
JOB test speedup 1.2289541664152104
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 27/50 |loss: 0.136005| train set 5.198x speedup, test set 5.179x speedup, val set 5.482x speedup, step: 13, train time 14.94 s
JOB test speedup 1.1912174808711808
TPCH test speedup 5.506336410717353
TPCH skew test speedup 5.177855547692395
Epoch 28/50 |loss: 0.135460| train set 5.179x speedup, test set 5.178x speedup, val set 5.405x speedup, step: 14, train time 14.88 s
JOB test speedup 1.2185416179000919
TPCH test speedup 5.561245196388108
TPCH skew test speedup 5.179174348364702
Epoch 29/50 |loss: 0.128773| train set 5.194x speedup, test set 5.179x speedup, val set 5.513x speedup, step: 15, train time 15.18 s
JOB test speedup 1.327127776987903
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 30/50 |loss: 0.126248| train set 5.204x speedup, test set 5.200x speedup, val set 5.470x speedup, step: 16, train time 14.88 s
JOB test speedup 1.1841854566521313
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 31/50 |loss: 0.125794| train set 5.201x speedup, test set 5.200x speedup, val set 5.507x speedup, step: 17, train time 14.82 s
JOB test speedup 1.2260024143863273
TPCH test speedup 5.506933975266088
TPCH skew test speedup 5.177434347547566
Epoch 32/50 |loss: 0.128650| train set 5.198x speedup, test set 5.177x speedup, val set 5.388x speedup, step: 18, train time 15.07 s
JOB test speedup 1.2166956407570817
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 33/50 |loss: 0.123886| train set 5.204x speedup, test set 5.176x speedup, val set 5.378x speedup, step: 19, train time 15.17 s
JOB test speedup 1.289545378020779
TPCH test speedup 5.49874963220118
TPCH skew test speedup 5.178437837634478
Epoch 34/50 |loss: 0.121543| train set 5.204x speedup, test set 5.178x speedup, val set 5.408x speedup, step: 20, train time 15.02 s
JOB test speedup 1.1785472109425916
TPCH test speedup 5.506933975266088
TPCH skew test speedup 5.177434347547566
Epoch 35/50 |loss: 0.123955| train set 5.104x speedup, test set 5.177x speedup, val set 5.404x speedup, step: 21, train time 15.16 s
JOB test speedup 1.2172207967110338
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 36/50 |loss: 0.125766| train set 5.203x speedup, test set 5.200x speedup, val set 5.507x speedup, step: 22, train time 15.14 s
JOB test speedup 1.2335225895907111
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 37/50 |loss: 0.123186| train set 5.207x speedup, test set 5.196x speedup, val set 5.414x speedup, step: 23, train time 15.06 s
JOB test speedup 1.3644575781382537
TPCH test speedup 5.477389930885127
TPCH skew test speedup 5.17579014060844
Epoch 38/50 |loss: 0.119453| train set 5.176x speedup, test set 5.176x speedup, val set 5.410x speedup, step: 24, train time 15.04 s
JOB test speedup 1.210051446888423
TPCH test speedup 5.441295156837621
TPCH skew test speedup 5.129385780087607
Epoch 39/50 |loss: 0.117797| train set 5.199x speedup, test set 5.129x speedup, val set 5.469x speedup, step: 25, train time 15.02 s
JOB test speedup 1.211936065820463
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 40/50 |loss: 0.116860| train set 5.193x speedup, test set 5.176x speedup, val set 5.408x speedup, step: 26, train time 15.05 s
JOB test speedup 1.2479104437280926
TPCH test speedup 5.5001455949638896
TPCH skew test speedup 5.175301000804703
Epoch 41/50 |loss: 0.118239| train set 5.185x speedup, test set 5.175x speedup, val set 5.407x speedup, step: 27, train time 15.14 s
JOB test speedup 1.3309437503192985
TPCH test speedup 5.555678742916194
TPCH skew test speedup 5.176035395000167
Epoch 42/50 |loss: 0.116581| train set 5.203x speedup, test set 5.176x speedup, val set 5.490x speedup, step: 28, train time 15.11 s
JOB test speedup 1.2603894093032475
TPCH test speedup 5.486386130563623
TPCH skew test speedup 5.179402892605128
Epoch 43/50 |loss: 0.121699| train set 5.175x speedup, test set 5.179x speedup, val set 5.395x speedup, step: 29, train time 14.85 s
JOB test speedup 1.3756346190182875
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 5.174665020177513
Epoch 44/50 |loss: 0.112788| train set 5.208x speedup, test set 5.175x speedup, val set 5.432x speedup, step: 30, train time 15.06 s
JOB test speedup 1.2987535727518746
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 45/50 |loss: 0.114312| train set 5.186x speedup, test set 5.196x speedup, val set 5.391x speedup, step: 31, train time 15.12 s
JOB test speedup 1.3038845404770605
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 46/50 |loss: 0.110648| train set 5.195x speedup, test set 5.180x speedup, val set 5.536x speedup, step: 32, train time 15.09 s
JOB test speedup 1.3022914002066273
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 47/50 |loss: 0.110174| train set 5.206x speedup, test set 5.179x speedup, val set 5.490x speedup, step: 33, train time 15.61 s
JOB test speedup 0.7674636238904865
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 48/50 |loss: 0.108592| train set 5.200x speedup, test set 5.196x speedup, val set 5.391x speedup, step: 34, train time 15.09 s
JOB test speedup 0.8155439365462267
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.181732721424572
Epoch 49/50 |loss: 0.109586| train set 5.206x speedup, test set 5.182x speedup, val set 5.488x speedup, step: 35, train time 15.18 s
Training per epoch cost 15.046 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 3.393s, pg runtime 5.855s, speedup 1.726x
03, opt runtime 0.207s, model runtime 0.275s, pg runtime 0.207s, speedup 0.751x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.072s, pg runtime 0.089s, speedup 1.239x
21, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
22, opt runtime 0.093s, model runtime 0.096s, pg runtime 2.389s, speedup 24.808x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 2.971s, pg runtime 8.605s, speedup 2.897x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 15, train speedup 5.107, test speedup 1.308, val speedup 5.546
TPCH best validation speedup epoch: 15, train speedup 5.107, test speedup 5.500, val speedup 5.546
TPCH Skew best validation speedup epoch: 15, train speedup 5.107, test speedup 5.151, val speedup 5.546
execution cost 0:13:26.502611
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.283028, and there are 23566 training samples
in channel 9
JOB test speedup 0.9658632195029783
TPCH test speedup 5.407738173411424
TPCH skew test speedup 5.10558567536875
Epoch 0/50 |loss: 0.402129| train set 4.696x speedup, test set 5.106x speedup, val set 5.230x speedup, step: 1, train time 16.19 s
JOB test speedup 1.2531019659307598
TPCH test speedup 5.0339093684358005
TPCH skew test speedup 4.717269464528337
Epoch 1/50 |loss: 0.305866| train set 4.332x speedup, test set 4.717x speedup, val set 4.603x speedup, step: 2, train time 15.37 s
JOB test speedup 1.254490254699069
TPCH test speedup 4.97403669109065
TPCH skew test speedup 4.588874399254295
Epoch 2/50 |loss: 0.266632| train set 4.756x speedup, test set 4.589x speedup, val set 4.825x speedup, step: 3, train time 14.87 s
JOB test speedup 1.340405751797342
TPCH test speedup 5.236164546893962
TPCH skew test speedup 4.974951762677219
Epoch 3/50 |loss: 0.244094| train set 4.911x speedup, test set 4.975x speedup, val set 5.198x speedup, step: 4, train time 14.87 s
JOB test speedup 0.8354850009475758
TPCH test speedup 5.43129946871132
TPCH skew test speedup 5.087925577239288
Epoch 4/50 |loss: 0.235731| train set 4.866x speedup, test set 5.088x speedup, val set 5.428x speedup, step: 1, train time 14.91 s
JOB test speedup 1.2649319708661573
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 5/50 |loss: 0.217458| train set 5.193x speedup, test set 5.203x speedup, val set 5.466x speedup, step: 1, train time 14.79 s
JOB test speedup 1.2492188069715713
TPCH test speedup 5.538258451140126
TPCH skew test speedup 5.201180127513863
Epoch 6/50 |loss: 0.206309| train set 5.153x speedup, test set 5.201x speedup, val set 5.425x speedup, step: 2, train time 14.86 s
JOB test speedup 0.7890040869598219
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 7/50 |loss: 0.197594| train set 5.190x speedup, test set 5.200x speedup, val set 5.467x speedup, step: 1, train time 14.91 s
JOB test speedup 1.211126525059536
TPCH test speedup 5.43129946871132
TPCH skew test speedup 5.1505836640370815
Epoch 8/50 |loss: 0.194042| train set 5.169x speedup, test set 5.151x speedup, val set 5.483x speedup, step: 1, train time 15.01 s
JOB test speedup 1.2594368055818224
TPCH test speedup 5.561245196388108
TPCH skew test speedup 5.179174348364702
Epoch 9/50 |loss: 0.187584| train set 5.051x speedup, test set 5.179x speedup, val set 5.362x speedup, step: 2, train time 14.94 s
JOB test speedup 1.2222101817634685
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 10/50 |loss: 0.179913| train set 5.185x speedup, test set 5.196x speedup, val set 5.375x speedup, step: 3, train time 15.03 s
JOB test speedup 1.2320901236983268
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 11/50 |loss: 0.172907| train set 5.195x speedup, test set 5.196x speedup, val set 5.401x speedup, step: 4, train time 15.17 s
JOB test speedup 1.1689170806588207
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 12/50 |loss: 0.169064| train set 5.193x speedup, test set 5.196x speedup, val set 5.387x speedup, step: 5, train time 14.86 s
JOB test speedup 1.2462270298456761
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 13/50 |loss: 0.166296| train set 5.186x speedup, test set 5.179x speedup, val set 5.470x speedup, step: 6, train time 15.08 s
JOB test speedup 1.2020023619080331
TPCH test speedup 5.498738349988382
TPCH skew test speedup 5.155080429957161
Epoch 14/50 |loss: 0.165875| train set 5.191x speedup, test set 5.155x speedup, val set 5.396x speedup, step: 7, train time 14.99 s
JOB test speedup 1.2460889206373629
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 15/50 |loss: 0.159290| train set 5.186x speedup, test set 5.200x speedup, val set 5.504x speedup, step: 1, train time 15.01 s
JOB test speedup 1.1957318614072452
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 16/50 |loss: 0.154967| train set 5.195x speedup, test set 5.196x speedup, val set 5.423x speedup, step: 2, train time 14.85 s
JOB test speedup 1.233225021931535
TPCH test speedup 5.536555550028013
TPCH skew test speedup 5.2001128726153825
Epoch 17/50 |loss: 0.151326| train set 5.167x speedup, test set 5.200x speedup, val set 5.366x speedup, step: 3, train time 15.16 s
JOB test speedup 1.32458264509975
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 18/50 |loss: 0.152137| train set 5.192x speedup, test set 5.199x speedup, val set 5.484x speedup, step: 4, train time 14.91 s
JOB test speedup 1.1985328071388874
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 19/50 |loss: 0.148466| train set 5.192x speedup, test set 5.200x speedup, val set 5.481x speedup, step: 5, train time 15.05 s
JOB test speedup 1.207177476968629
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 20/50 |loss: 0.143556| train set 5.197x speedup, test set 5.200x speedup, val set 5.483x speedup, step: 6, train time 15.06 s
JOB test speedup 1.3152034134521444
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 21/50 |loss: 0.143995| train set 5.195x speedup, test set 5.203x speedup, val set 5.469x speedup, step: 7, train time 15.16 s
JOB test speedup 1.200966552740163
TPCH test speedup 5.365272896862779
TPCH skew test speedup 4.932451013883804
Epoch 22/50 |loss: 0.147274| train set 5.204x speedup, test set 4.932x speedup, val set 5.361x speedup, step: 8, train time 15.21 s
JOB test speedup 1.170579811399732
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 23/50 |loss: 0.136504| train set 5.196x speedup, test set 5.199x speedup, val set 5.464x speedup, step: 9, train time 14.98 s
JOB test speedup 1.1918324230425137
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 5.174665020177513
Epoch 24/50 |loss: 0.137664| train set 5.202x speedup, test set 5.175x speedup, val set 5.407x speedup, step: 10, train time 15.17 s
JOB test speedup 1.2605890046288097
TPCH test speedup 5.5566648132494585
TPCH skew test speedup 5.209008173568256
Epoch 25/50 |loss: 0.134982| train set 5.203x speedup, test set 5.209x speedup, val set 5.346x speedup, step: 11, train time 15.13 s
JOB test speedup 1.261734748245522
TPCH test speedup 5.566743057543166
TPCH skew test speedup 5.159992572856924
Epoch 26/50 |loss: 0.135195| train set 5.202x speedup, test set 5.160x speedup, val set 5.467x speedup, step: 12, train time 15.00 s
JOB test speedup 1.1570433918273881
TPCH test speedup 5.554242941218768
TPCH skew test speedup 5.176035395000167
Epoch 27/50 |loss: 0.135331| train set 5.194x speedup, test set 5.176x speedup, val set 5.455x speedup, step: 13, train time 15.01 s
JOB test speedup 1.1587863817244692
TPCH test speedup 5.407675960590424
TPCH skew test speedup 5.074161385554763
Epoch 28/50 |loss: 0.130363| train set 5.093x speedup, test set 5.074x speedup, val set 5.273x speedup, step: 14, train time 14.98 s
JOB test speedup 1.1038112040830066
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 29/50 |loss: 0.127806| train set 5.190x speedup, test set 5.203x speedup, val set 5.432x speedup, step: 15, train time 15.08 s
JOB test speedup 1.180025646776939
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 30/50 |loss: 0.126572| train set 5.202x speedup, test set 5.180x speedup, val set 5.498x speedup, step: 16, train time 14.95 s
JOB test speedup 1.19834030882976
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 31/50 |loss: 0.125377| train set 5.201x speedup, test set 5.200x speedup, val set 5.504x speedup, step: 17, train time 15.06 s
JOB test speedup 1.1614328604223207
TPCH test speedup 5.504925996451075
TPCH skew test speedup 5.177855547692395
Epoch 32/50 |loss: 0.126592| train set 5.206x speedup, test set 5.178x speedup, val set 5.345x speedup, step: 18, train time 15.01 s
JOB test speedup 1.1009416590807692
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 33/50 |loss: 0.125568| train set 5.203x speedup, test set 5.151x speedup, val set 5.543x speedup, step: 1, train time 15.07 s
JOB test speedup 1.1454177827065095
TPCH test speedup 5.506336410717353
TPCH skew test speedup 5.177855547692395
Epoch 34/50 |loss: 0.120200| train set 5.200x speedup, test set 5.178x speedup, val set 5.374x speedup, step: 2, train time 15.22 s
JOB test speedup 1.154148642211459
TPCH test speedup 5.442078398307722
TPCH skew test speedup 5.126720993002068
Epoch 35/50 |loss: 0.123152| train set 5.188x speedup, test set 5.127x speedup, val set 5.391x speedup, step: 3, train time 15.03 s
JOB test speedup 1.1473770251441715
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 36/50 |loss: 0.124632| train set 5.202x speedup, test set 5.203x speedup, val set 5.426x speedup, step: 4, train time 14.98 s
JOB test speedup 1.128323358485274
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 37/50 |loss: 0.122463| train set 5.207x speedup, test set 5.176x speedup, val set 5.371x speedup, step: 5, train time 15.07 s
JOB test speedup 1.2507332908439472
TPCH test speedup 5.53968599951373
TPCH skew test speedup 5.180723097562853
Epoch 38/50 |loss: 0.119611| train set 5.179x speedup, test set 5.181x speedup, val set 5.481x speedup, step: 6, train time 15.23 s
JOB test speedup 1.1767267433955668
TPCH test speedup 5.478262704455326
TPCH skew test speedup 5.17956459947933
Epoch 39/50 |loss: 0.117169| train set 5.196x speedup, test set 5.180x speedup, val set 5.391x speedup, step: 7, train time 15.18 s
JOB test speedup 1.1454971066677389
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1757218538983505
Epoch 40/50 |loss: 0.119437| train set 5.192x speedup, test set 5.176x speedup, val set 5.397x speedup, step: 8, train time 15.04 s
JOB test speedup 1.1399800192730642
TPCH test speedup 5.427828203639423
TPCH skew test speedup 5.132587851104302
Epoch 41/50 |loss: 0.120357| train set 5.156x speedup, test set 5.133x speedup, val set 5.381x speedup, step: 9, train time 15.08 s
JOB test speedup 1.1788666221225592
TPCH test speedup 5.440206906175195
TPCH skew test speedup 5.077505448847858
Epoch 42/50 |loss: 0.116131| train set 5.120x speedup, test set 5.078x speedup, val set 5.430x speedup, step: 10, train time 15.08 s
JOB test speedup 1.1909900544368628
TPCH test speedup 5.447938958000176
TPCH skew test speedup 5.131481433023144
Epoch 43/50 |loss: 0.117927| train set 5.190x speedup, test set 5.131x speedup, val set 5.386x speedup, step: 11, train time 15.25 s
JOB test speedup 1.2156000205882946
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 44/50 |loss: 0.112610| train set 5.208x speedup, test set 5.176x speedup, val set 5.395x speedup, step: 12, train time 15.22 s
JOB test speedup 1.218442913996598
TPCH test speedup 5.47905662536284
TPCH skew test speedup 5.176847433998049
Epoch 45/50 |loss: 0.115653| train set 5.177x speedup, test set 5.177x speedup, val set 5.348x speedup, step: 13, train time 15.22 s
JOB test speedup 1.1797576017873652
TPCH test speedup 5.442078398307722
TPCH skew test speedup 5.126720993002068
Epoch 46/50 |loss: 0.111984| train set 5.127x speedup, test set 5.127x speedup, val set 5.462x speedup, step: 14, train time 15.17 s
JOB test speedup 1.2124037552654454
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 47/50 |loss: 0.109568| train set 5.203x speedup, test set 5.196x speedup, val set 5.501x speedup, step: 15, train time 15.20 s
JOB test speedup 1.113656857869055
TPCH test speedup 5.440700706436875
TPCH skew test speedup 5.1467529468389985
Epoch 48/50 |loss: 0.107754| train set 5.198x speedup, test set 5.147x speedup, val set 5.479x speedup, step: 16, train time 15.27 s
JOB test speedup 1.2208662215573578
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.181732721424572
Epoch 49/50 |loss: 0.109785| train set 5.204x speedup, test set 5.182x speedup, val set 5.502x speedup, step: 17, train time 15.37 s
Training per epoch cost 15.086 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 0.920s, pg runtime 1.680s, speedup 1.825x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 50.837s, pg runtime 13.945s, speedup 0.274x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 14.265s, pg runtime 3.540s, speedup 0.248x
20, opt runtime 0.064s, model runtime 0.087s, pg runtime 0.089s, speedup 1.024x
21, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.238s, pg runtime 8.605s, speedup 1.045x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 33, train speedup 5.203, test speedup 1.101, val speedup 5.543
TPCH best validation speedup epoch: 33, train speedup 5.203, test speedup 5.500, val speedup 5.543
TPCH Skew best validation speedup epoch: 33, train speedup 5.203, test speedup 5.151, val speedup 5.543
execution cost 0:13:29.966483
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.206174, and there are 23566 training samples
in channel 9
JOB test speedup 0.9309810665487241
TPCH test speedup 4.455592036307065
TPCH skew test speedup 4.3387938356656734
Epoch 0/50 |loss: 0.402247| train set 4.209x speedup, test set 4.339x speedup, val set 4.478x speedup, step: 1, train time 16.32 s
JOB test speedup 1.394647832281467
TPCH test speedup 4.90261147793121
TPCH skew test speedup 4.738323787272351
Epoch 1/50 |loss: 0.302786| train set 4.241x speedup, test set 4.738x speedup, val set 4.665x speedup, step: 1, train time 15.41 s
JOB test speedup 1.259025415558305
TPCH test speedup 5.23746727123174
TPCH skew test speedup 4.937335075539418
Epoch 2/50 |loss: 0.263183| train set 4.923x speedup, test set 4.937x speedup, val set 5.013x speedup, step: 1, train time 14.85 s
JOB test speedup 1.3204371217576951
TPCH test speedup 5.232240841051981
TPCH skew test speedup 4.9696474967757736
Epoch 3/50 |loss: 0.241975| train set 4.912x speedup, test set 4.970x speedup, val set 5.170x speedup, step: 1, train time 14.96 s
JOB test speedup 1.197522402495683
TPCH test speedup 5.0772077140483605
TPCH skew test speedup 4.61111351580563
Epoch 4/50 |loss: 0.232573| train set 4.824x speedup, test set 4.611x speedup, val set 4.920x speedup, step: 2, train time 14.91 s
JOB test speedup 1.4179438994477822
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 5/50 |loss: 0.213880| train set 5.188x speedup, test set 5.200x speedup, val set 5.431x speedup, step: 1, train time 14.98 s
JOB test speedup 1.319748218431469
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 6/50 |loss: 0.205601| train set 5.194x speedup, test set 5.200x speedup, val set 5.457x speedup, step: 1, train time 14.96 s
JOB test speedup 0.8630232917441008
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 7/50 |loss: 0.196364| train set 5.171x speedup, test set 5.200x speedup, val set 5.444x speedup, step: 2, train time 14.91 s
JOB test speedup 1.2501449710672508
TPCH test speedup 5.480571615090779
TPCH skew test speedup 5.151281380280468
Epoch 8/50 |loss: 0.196752| train set 5.069x speedup, test set 5.151x speedup, val set 5.463x speedup, step: 1, train time 15.00 s
JOB test speedup 1.4051001721846763
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 9/50 |loss: 0.188412| train set 5.195x speedup, test set 5.203x speedup, val set 5.412x speedup, step: 2, train time 15.12 s
JOB test speedup 1.2352286162603894
TPCH test speedup 5.497059661725392
TPCH skew test speedup 5.194650134986736
Epoch 10/50 |loss: 0.180503| train set 5.194x speedup, test set 5.195x speedup, val set 5.367x speedup, step: 3, train time 15.00 s
JOB test speedup 1.1881668186998935
TPCH test speedup 5.504925996451075
TPCH skew test speedup 5.198289893162001
Epoch 11/50 |loss: 0.175047| train set 5.186x speedup, test set 5.198x speedup, val set 5.348x speedup, step: 4, train time 15.04 s
JOB test speedup 1.298072524375139
TPCH test speedup 5.477660149805418
TPCH skew test speedup 5.197273807529786
Epoch 12/50 |loss: 0.172372| train set 5.181x speedup, test set 5.197x speedup, val set 5.344x speedup, step: 5, train time 15.15 s
JOB test speedup 1.3311563984754744
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 13/50 |loss: 0.166995| train set 5.180x speedup, test set 5.196x speedup, val set 5.335x speedup, step: 6, train time 15.09 s
JOB test speedup 1.230882355263865
TPCH test speedup 5.498738349988382
TPCH skew test speedup 5.1957151485230115
Epoch 14/50 |loss: 0.165929| train set 5.196x speedup, test set 5.196x speedup, val set 5.330x speedup, step: 7, train time 15.02 s
JOB test speedup 1.2437579588577998
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 15/50 |loss: 0.161858| train set 5.188x speedup, test set 5.196x speedup, val set 5.447x speedup, step: 8, train time 15.01 s
JOB test speedup 1.3024429894672034
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 16/50 |loss: 0.156767| train set 5.199x speedup, test set 5.196x speedup, val set 5.331x speedup, step: 9, train time 15.07 s
JOB test speedup 1.2595269648218603
TPCH test speedup 5.402671592896489
TPCH skew test speedup 5.146646296760727
Epoch 17/50 |loss: 0.152068| train set 5.182x speedup, test set 5.147x speedup, val set 5.331x speedup, step: 10, train time 15.15 s
JOB test speedup 1.2978670731207271
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 18/50 |loss: 0.150642| train set 5.194x speedup, test set 5.199x speedup, val set 5.457x speedup, step: 11, train time 15.05 s
JOB test speedup 1.2333833183265648
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 19/50 |loss: 0.149092| train set 5.194x speedup, test set 5.200x speedup, val set 5.447x speedup, step: 12, train time 15.10 s
JOB test speedup 1.2053314838197147
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 20/50 |loss: 0.145527| train set 5.191x speedup, test set 5.200x speedup, val set 5.457x speedup, step: 13, train time 15.12 s
JOB test speedup 1.3019324277209934
TPCH test speedup 5.566132443306419
TPCH skew test speedup 5.1989771538794916
Epoch 21/50 |loss: 0.144811| train set 5.202x speedup, test set 5.199x speedup, val set 5.449x speedup, step: 14, train time 15.22 s
JOB test speedup 1.2253520429397424
TPCH test speedup 5.495665264773356
TPCH skew test speedup 5.197810478495808
Epoch 22/50 |loss: 0.145678| train set 5.195x speedup, test set 5.198x speedup, val set 5.366x speedup, step: 15, train time 15.08 s
JOB test speedup 1.2452537630150826
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 23/50 |loss: 0.138936| train set 5.174x speedup, test set 5.199x speedup, val set 5.495x speedup, step: 1, train time 15.21 s
JOB test speedup 1.3491432453188388
TPCH test speedup 5.445695596068372
TPCH skew test speedup 5.14570790917281
Epoch 24/50 |loss: 0.135602| train set 5.196x speedup, test set 5.146x speedup, val set 5.332x speedup, step: 2, train time 15.05 s
JOB test speedup 1.367404149041051
TPCH test speedup 5.445695596068372
TPCH skew test speedup 5.147816923151409
Epoch 25/50 |loss: 0.135816| train set 5.200x speedup, test set 5.148x speedup, val set 5.306x speedup, step: 3, train time 15.17 s
JOB test speedup 1.2820757309111046
TPCH test speedup 5.503840422038513
TPCH skew test speedup 5.196799466944256
Epoch 26/50 |loss: 0.135649| train set 5.197x speedup, test set 5.197x speedup, val set 5.353x speedup, step: 4, train time 15.26 s
JOB test speedup 1.3901511478804607
TPCH test speedup 5.561165598129876
TPCH skew test speedup 5.19860617461629
Epoch 27/50 |loss: 0.138064| train set 5.198x speedup, test set 5.199x speedup, val set 5.454x speedup, step: 5, train time 15.38 s
JOB test speedup 1.1022317440673526
TPCH test speedup 5.506336410717353
TPCH skew test speedup 5.177855547692395
Epoch 28/50 |loss: 0.133830| train set 5.171x speedup, test set 5.178x speedup, val set 5.370x speedup, step: 6, train time 15.05 s
JOB test speedup 1.261228173248804
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 29/50 |loss: 0.127018| train set 5.192x speedup, test set 5.200x speedup, val set 5.457x speedup, step: 7, train time 15.21 s
JOB test speedup 1.3977796653816903
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.200043942598341
Epoch 30/50 |loss: 0.128444| train set 5.204x speedup, test set 5.200x speedup, val set 5.458x speedup, step: 8, train time 15.15 s
JOB test speedup 1.276265566450718
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 31/50 |loss: 0.125886| train set 5.203x speedup, test set 5.200x speedup, val set 5.495x speedup, step: 9, train time 15.17 s
JOB test speedup 1.2575759856789548
TPCH test speedup 5.503243528635766
TPCH skew test speedup 5.197223823934284
Epoch 32/50 |loss: 0.128233| train set 5.205x speedup, test set 5.197x speedup, val set 5.353x speedup, step: 10, train time 15.19 s
JOB test speedup 1.2141359039319994
TPCH test speedup 5.447343055149232
TPCH skew test speedup 5.1488628177160995
Epoch 33/50 |loss: 0.125092| train set 5.205x speedup, test set 5.149x speedup, val set 5.404x speedup, step: 11, train time 15.27 s
JOB test speedup 1.2588287217839798
TPCH test speedup 5.50553456496973
TPCH skew test speedup 5.180573771809311
Epoch 34/50 |loss: 0.121282| train set 5.201x speedup, test set 5.181x speedup, val set 5.386x speedup, step: 12, train time 15.15 s
JOB test speedup 1.227461471239461
TPCH test speedup 5.449309238219917
TPCH skew test speedup 5.148446321086762
Epoch 35/50 |loss: 0.124690| train set 5.113x speedup, test set 5.148x speedup, val set 5.389x speedup, step: 13, train time 15.12 s
JOB test speedup 1.282430046933181
TPCH test speedup 5.319609676033375
TPCH skew test speedup 5.032777458772766
Epoch 36/50 |loss: 0.124931| train set 5.206x speedup, test set 5.033x speedup, val set 5.457x speedup, step: 14, train time 15.17 s
JOB test speedup 1.3378638319878309
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 37/50 |loss: 0.122799| train set 5.207x speedup, test set 5.196x speedup, val set 5.366x speedup, step: 15, train time 15.15 s
JOB test speedup 1.3385041989632729
TPCH test speedup 5.544864377834827
TPCH skew test speedup 5.181801166838486
Epoch 38/50 |loss: 0.118073| train set 5.173x speedup, test set 5.182x speedup, val set 5.451x speedup, step: 16, train time 15.22 s
JOB test speedup 1.2700961187656354
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 39/50 |loss: 0.116405| train set 5.205x speedup, test set 5.196x speedup, val set 5.363x speedup, step: 17, train time 15.35 s
JOB test speedup 1.2490106358134185
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.202197741268691
Epoch 40/50 |loss: 0.116975| train set 5.204x speedup, test set 5.202x speedup, val set 5.490x speedup, step: 18, train time 15.12 s
JOB test speedup 1.2297871227554917
TPCH test speedup 5.50553456496973
TPCH skew test speedup 5.180573771809311
Epoch 41/50 |loss: 0.117153| train set 5.189x speedup, test set 5.181x speedup, val set 5.382x speedup, step: 19, train time 15.25 s
JOB test speedup 1.3120155833302807
TPCH test speedup 5.472672020204265
TPCH skew test speedup 5.1553885435426405
Epoch 42/50 |loss: 0.115117| train set 5.126x speedup, test set 5.155x speedup, val set 5.495x speedup, step: 1, train time 15.21 s
JOB test speedup 1.211988691448683
TPCH test speedup 5.506336410717353
TPCH skew test speedup 5.177855547692395
Epoch 43/50 |loss: 0.119047| train set 5.187x speedup, test set 5.178x speedup, val set 5.366x speedup, step: 2, train time 15.36 s
JOB test speedup 1.3194006070888855
TPCH test speedup 5.44043412162474
TPCH skew test speedup 5.125684073579842
Epoch 44/50 |loss: 0.113688| train set 5.119x speedup, test set 5.126x speedup, val set 5.511x speedup, step: 1, train time 15.28 s
JOB test speedup 1.3008433470734353
TPCH test speedup 5.504925996451075
TPCH skew test speedup 5.198289893162001
Epoch 45/50 |loss: 0.115055| train set 5.199x speedup, test set 5.198x speedup, val set 5.383x speedup, step: 2, train time 15.12 s
JOB test speedup 1.3338117534596714
TPCH test speedup 5.44043412162474
TPCH skew test speedup 5.14570790917281
Epoch 46/50 |loss: 0.110439| train set 5.208x speedup, test set 5.146x speedup, val set 5.404x speedup, step: 3, train time 15.29 s
JOB test speedup 1.373974943452942
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 47/50 |loss: 0.109883| train set 5.203x speedup, test set 5.199x speedup, val set 5.455x speedup, step: 4, train time 15.85 s
JOB test speedup 1.2115026760208103
TPCH test speedup 5.440700706436875
TPCH skew test speedup 5.1467529468389985
Epoch 48/50 |loss: 0.108166| train set 5.198x speedup, test set 5.147x speedup, val set 5.367x speedup, step: 5, train time 15.30 s
JOB test speedup 1.3030480443797678
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.181732721424572
Epoch 49/50 |loss: 0.109897| train set 5.198x speedup, test set 5.182x speedup, val set 5.461x speedup, step: 6, train time 15.35 s
Training per epoch cost 15.178 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 3.393s, pg runtime 5.855s, speedup 1.726x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 2.962s, pg runtime 6.876s, speedup 2.321x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.064s, model runtime 0.064s, pg runtime 0.089s, speedup 1.393x
21, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
22, opt runtime 0.093s, model runtime 0.096s, pg runtime 2.389s, speedup 24.808x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
08, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 6.149s, model runtime 8.538s, pg runtime 30.760s, speedup 3.603x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 7.281s, pg runtime 14.081s, speedup 1.934x
08, opt runtime 5.471s, model runtime 7.216s, pg runtime 13.410s, speedup 1.858x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 5.629s, pg runtime 42.976s, speedup 7.634x
18, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 44, train speedup 5.119, test speedup 1.319, val speedup 5.511
TPCH best validation speedup epoch: 44, train speedup 5.119, test speedup 5.440, val speedup 5.511
TPCH Skew best validation speedup epoch: 44, train speedup 5.119, test speedup 5.126, val speedup 5.511
execution cost 0:13:33.600464
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.229826, and there are 23566 training samples
in channel 9
JOB test speedup 0.9563207858511157
TPCH test speedup 5.18868093536128
TPCH skew test speedup 4.811671690117675
Epoch 0/50 |loss: 0.402100| train set 4.662x speedup, test set 4.812x speedup, val set 5.084x speedup, step: 1, train time 16.13 s
JOB test speedup 1.2329841849578624
TPCH test speedup 5.033410047336955
TPCH skew test speedup 4.717619117755452
Epoch 1/50 |loss: 0.303882| train set 4.525x speedup, test set 4.718x speedup, val set 4.733x speedup, step: 2, train time 15.41 s
JOB test speedup 1.2648802783339206
TPCH test speedup 5.2384503004574565
TPCH skew test speedup 4.938680370605209
Epoch 2/50 |loss: 0.265916| train set 4.922x speedup, test set 4.939x speedup, val set 5.018x speedup, step: 3, train time 15.17 s
JOB test speedup 1.3680703824372835
TPCH test speedup 5.300433535859164
TPCH skew test speedup 5.034841807447045
Epoch 3/50 |loss: 0.244389| train set 4.985x speedup, test set 5.035x speedup, val set 5.248x speedup, step: 1, train time 14.92 s
JOB test speedup 1.1768962539776442
TPCH test speedup 5.33150039004025
TPCH skew test speedup 4.893552122538855
Epoch 4/50 |loss: 0.236176| train set 4.942x speedup, test set 4.894x speedup, val set 5.234x speedup, step: 2, train time 14.86 s
JOB test speedup 1.3201013017868803
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 5/50 |loss: 0.216134| train set 5.193x speedup, test set 5.200x speedup, val set 5.467x speedup, step: 1, train time 14.96 s
JOB test speedup 1.25868087914428
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 6/50 |loss: 0.205858| train set 5.193x speedup, test set 5.200x speedup, val set 5.510x speedup, step: 1, train time 15.01 s
JOB test speedup 0.825078488057103
TPCH test speedup 5.566132443306419
TPCH skew test speedup 5.202197741268691
Epoch 7/50 |loss: 0.199367| train set 5.189x speedup, test set 5.202x speedup, val set 5.465x speedup, step: 2, train time 14.92 s
JOB test speedup 1.2465686999918197
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 8/50 |loss: 0.195499| train set 5.169x speedup, test set 5.200x speedup, val set 5.469x speedup, step: 3, train time 15.01 s
JOB test speedup 1.2925654968438156
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 9/50 |loss: 0.187408| train set 5.192x speedup, test set 5.200x speedup, val set 5.453x speedup, step: 4, train time 14.95 s
JOB test speedup 1.2036591130133774
TPCH test speedup 5.497059661725392
TPCH skew test speedup 5.194650134986736
Epoch 10/50 |loss: 0.177199| train set 5.186x speedup, test set 5.195x speedup, val set 5.365x speedup, step: 5, train time 15.11 s
JOB test speedup 1.2460106649535418
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 11/50 |loss: 0.174791| train set 5.195x speedup, test set 5.196x speedup, val set 5.364x speedup, step: 6, train time 14.87 s
JOB test speedup 1.3347535739258813
TPCH test speedup 5.3997728997806576
TPCH skew test speedup 5.0917189384504535
Epoch 12/50 |loss: 0.170347| train set 5.180x speedup, test set 5.092x speedup, val set 5.334x speedup, step: 7, train time 14.97 s
JOB test speedup 1.246516635407637
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 13/50 |loss: 0.166572| train set 5.194x speedup, test set 5.195x speedup, val set 5.378x speedup, step: 8, train time 15.05 s
JOB test speedup 1.3032497399500416
TPCH test speedup 5.497059661725392
TPCH skew test speedup 5.194650134986736
Epoch 14/50 |loss: 0.164094| train set 5.197x speedup, test set 5.195x speedup, val set 5.379x speedup, step: 9, train time 15.02 s
JOB test speedup 1.2461509815207192
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 15/50 |loss: 0.162834| train set 5.189x speedup, test set 5.200x speedup, val set 5.470x speedup, step: 10, train time 15.02 s
JOB test speedup 1.2821269460699418
TPCH test speedup 5.4782515061550825
TPCH skew test speedup 5.196849442377661
Epoch 16/50 |loss: 0.153679| train set 5.181x speedup, test set 5.197x speedup, val set 5.340x speedup, step: 11, train time 15.03 s
JOB test speedup 1.305037171743116
TPCH test speedup 5.476585301391275
TPCH skew test speedup 5.195783963825011
Epoch 17/50 |loss: 0.149869| train set 5.174x speedup, test set 5.196x speedup, val set 5.354x speedup, step: 12, train time 15.05 s
JOB test speedup 1.2175636353967543
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 18/50 |loss: 0.150025| train set 5.183x speedup, test set 5.199x speedup, val set 5.464x speedup, step: 13, train time 15.01 s
JOB test speedup 1.2355858545072476
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 19/50 |loss: 0.144292| train set 5.195x speedup, test set 5.200x speedup, val set 5.495x speedup, step: 14, train time 15.11 s
JOB test speedup 1.2454996180279934
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 20/50 |loss: 0.141589| train set 5.206x speedup, test set 5.196x speedup, val set 5.387x speedup, step: 15, train time 15.25 s
JOB test speedup 1.362410535723731
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 21/50 |loss: 0.139363| train set 5.202x speedup, test set 5.203x speedup, val set 5.517x speedup, step: 1, train time 15.27 s
JOB test speedup 1.2605148731512352
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.195074141017431
Epoch 22/50 |loss: 0.145761| train set 5.186x speedup, test set 5.195x speedup, val set 5.354x speedup, step: 2, train time 15.26 s
JOB test speedup 1.2295887683777547
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 23/50 |loss: 0.133975| train set 5.199x speedup, test set 5.199x speedup, val set 5.467x speedup, step: 3, train time 15.16 s
JOB test speedup 1.2387444502955596
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 24/50 |loss: 0.134278| train set 5.204x speedup, test set 5.195x speedup, val set 5.373x speedup, step: 4, train time 15.18 s
JOB test speedup 1.2672424756096596
TPCH test speedup 5.49241869292143
TPCH skew test speedup 5.188762709342722
Epoch 25/50 |loss: 0.135022| train set 5.200x speedup, test set 5.189x speedup, val set 5.413x speedup, step: 5, train time 15.11 s
JOB test speedup 1.3244295786172517
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 26/50 |loss: 0.134033| train set 5.207x speedup, test set 5.200x speedup, val set 5.517x speedup, step: 1, train time 14.98 s
JOB test speedup 1.3461596092564851
TPCH test speedup 5.555667225882558
TPCH skew test speedup 5.193296651897142
Epoch 27/50 |loss: 0.132600| train set 5.200x speedup, test set 5.193x speedup, val set 5.442x speedup, step: 2, train time 15.06 s
JOB test speedup 1.1819187036035665
TPCH test speedup 5.506336410717353
TPCH skew test speedup 5.177855547692395
Epoch 28/50 |loss: 0.130644| train set 5.188x speedup, test set 5.178x speedup, val set 5.388x speedup, step: 3, train time 15.26 s
JOB test speedup 0.7898049012259738
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 29/50 |loss: 0.125613| train set 5.196x speedup, test set 5.200x speedup, val set 5.476x speedup, step: 4, train time 15.16 s
JOB test speedup 1.2607189145976359
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 30/50 |loss: 0.126091| train set 5.203x speedup, test set 5.200x speedup, val set 5.481x speedup, step: 5, train time 15.19 s
JOB test speedup 1.2344075192608273
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 31/50 |loss: 0.122606| train set 5.204x speedup, test set 5.200x speedup, val set 5.481x speedup, step: 6, train time 14.92 s
JOB test speedup 1.2271903052876272
TPCH test speedup 5.504925996451075
TPCH skew test speedup 5.177855547692395
Epoch 32/50 |loss: 0.125513| train set 5.205x speedup, test set 5.178x speedup, val set 5.371x speedup, step: 7, train time 14.99 s
JOB test speedup 1.1632487540130934
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 33/50 |loss: 0.123090| train set 5.205x speedup, test set 5.200x speedup, val set 5.464x speedup, step: 8, train time 14.98 s
JOB test speedup 1.301699955958962
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 34/50 |loss: 0.119452| train set 5.203x speedup, test set 5.176x speedup, val set 5.405x speedup, step: 9, train time 15.07 s
JOB test speedup 1.1202403456670003
TPCH test speedup 5.561245196388108
TPCH skew test speedup 5.179174348364702
Epoch 35/50 |loss: 0.122825| train set 5.190x speedup, test set 5.179x speedup, val set 5.470x speedup, step: 10, train time 15.24 s
JOB test speedup 1.3054051526628654
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 36/50 |loss: 0.121715| train set 5.203x speedup, test set 5.200x speedup, val set 5.463x speedup, step: 11, train time 15.17 s
JOB test speedup 0.8511066140350401
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 37/50 |loss: 0.120263| train set 5.207x speedup, test set 5.196x speedup, val set 5.399x speedup, step: 12, train time 15.11 s
JOB test speedup 1.3186294752420262
TPCH test speedup 5.53717113231049
TPCH skew test speedup 5.182384344599503
Epoch 38/50 |loss: 0.118676| train set 5.175x speedup, test set 5.182x speedup, val set 5.460x speedup, step: 13, train time 15.15 s
JOB test speedup 0.8090842905880938
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 39/50 |loss: 0.114973| train set 5.197x speedup, test set 5.176x speedup, val set 5.376x speedup, step: 14, train time 15.16 s
JOB test speedup 1.2900637807890667
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 40/50 |loss: 0.117599| train set 5.208x speedup, test set 5.200x speedup, val set 5.478x speedup, step: 15, train time 15.18 s
JOB test speedup 1.2155099886364102
TPCH test speedup 5.49874963220118
TPCH skew test speedup 5.178437837634478
Epoch 41/50 |loss: 0.116951| train set 5.163x speedup, test set 5.178x speedup, val set 5.404x speedup, step: 16, train time 15.22 s
JOB test speedup 1.2478988946527836
TPCH test speedup 5.499679413001322
TPCH skew test speedup 5.153273322227446
Epoch 42/50 |loss: 0.115762| train set 5.126x speedup, test set 5.153x speedup, val set 5.532x speedup, step: 1, train time 15.21 s
JOB test speedup 1.2495133680628703
TPCH test speedup 5.486386130563623
TPCH skew test speedup 5.178560672694021
Epoch 43/50 |loss: 0.117221| train set 5.175x speedup, test set 5.179x speedup, val set 5.389x speedup, step: 2, train time 15.24 s
JOB test speedup 1.2702014052586057
TPCH test speedup 5.5001455949638896
TPCH skew test speedup 5.175301000804703
Epoch 44/50 |loss: 0.113045| train set 5.200x speedup, test set 5.175x speedup, val set 5.405x speedup, step: 3, train time 15.16 s
JOB test speedup 0.8123704335087953
TPCH test speedup 5.498738349988382
TPCH skew test speedup 5.1957151485230115
Epoch 45/50 |loss: 0.111858| train set 5.177x speedup, test set 5.196x speedup, val set 5.348x speedup, step: 4, train time 15.22 s
JOB test speedup 1.3692436597588544
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 46/50 |loss: 0.110791| train set 5.207x speedup, test set 5.196x speedup, val set 5.424x speedup, step: 5, train time 15.08 s
JOB test speedup 1.2845035764595558
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 47/50 |loss: 0.108835| train set 5.204x speedup, test set 5.199x speedup, val set 5.478x speedup, step: 6, train time 15.68 s
JOB test speedup 1.2204648222376668
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 48/50 |loss: 0.106560| train set 5.197x speedup, test set 5.196x speedup, val set 5.390x speedup, step: 7, train time 15.27 s
JOB test speedup 0.8290254810355403
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.181732721424572
Epoch 49/50 |loss: 0.108376| train set 5.201x speedup, test set 5.182x speedup, val set 5.487x speedup, step: 8, train time 15.25 s
Training per epoch cost 15.134 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 5.855s, pg runtime 5.855s, speedup 1.000x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 4.298s, pg runtime 3.507s, speedup 0.816x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 2.962s, pg runtime 6.876s, speedup 2.321x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.064s, model runtime 0.064s, pg runtime 0.089s, speedup 1.393x
21, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.398s, pg runtime 1.438s, speedup 1.028x
20, opt runtime 1.428s, model runtime 1.645s, pg runtime 1.428s, speedup 0.868x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.308s, model runtime 1.308s, pg runtime 1.528s, speedup 1.168x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 42, train speedup 5.126, test speedup 1.248, val speedup 5.532
TPCH best validation speedup epoch: 42, train speedup 5.126, test speedup 5.500, val speedup 5.532
TPCH Skew best validation speedup epoch: 42, train speedup 5.126, test speedup 5.153, val speedup 5.532
execution cost 0:13:30.996920
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.223304, and there are 23566 training samples
in channel 9
JOB test speedup 0.9907886632938684
TPCH test speedup 5.127595760349177
TPCH skew test speedup 4.756588886923847
Epoch 0/50 |loss: 0.402092| train set 4.749x speedup, test set 4.757x speedup, val set 5.082x speedup, step: 1, train time 16.24 s
JOB test speedup 0.8991878816390252
TPCH test speedup 5.025362636612588
TPCH skew test speedup 4.6681456186671975
Epoch 1/50 |loss: 0.302105| train set 4.358x speedup, test set 4.668x speedup, val set 4.749x speedup, step: 2, train time 15.37 s
JOB test speedup 1.2413458624131413
TPCH test speedup 5.075453909891354
TPCH skew test speedup 4.7941095099422055
Epoch 2/50 |loss: 0.262460| train set 4.614x speedup, test set 4.794x speedup, val set 4.670x speedup, step: 3, train time 15.10 s
JOB test speedup 1.3211183150483758
TPCH test speedup 5.236164546893962
TPCH skew test speedup 4.974951762677219
Epoch 3/50 |loss: 0.242678| train set 4.930x speedup, test set 4.975x speedup, val set 5.198x speedup, step: 1, train time 15.10 s
JOB test speedup 1.2550214576877694
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 4/50 |loss: 0.233956| train set 5.157x speedup, test set 5.200x speedup, val set 5.467x speedup, step: 1, train time 14.81 s
JOB test speedup 1.3287843225606273
TPCH test speedup 5.53744728200182
TPCH skew test speedup 5.2039229027325415
Epoch 5/50 |loss: 0.214604| train set 5.186x speedup, test set 5.204x speedup, val set 5.469x speedup, step: 1, train time 15.12 s
JOB test speedup 1.341770607666301
TPCH test speedup 5.5388629647085965
TPCH skew test speedup 5.2007551242343935
Epoch 6/50 |loss: 0.205316| train set 5.174x speedup, test set 5.201x speedup, val set 5.444x speedup, step: 2, train time 14.95 s
JOB test speedup 1.288684214938619
TPCH test speedup 5.538258451140126
TPCH skew test speedup 5.201180127513863
Epoch 7/50 |loss: 0.195601| train set 5.164x speedup, test set 5.201x speedup, val set 5.452x speedup, step: 3, train time 15.00 s
JOB test speedup 1.1521405016749142
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 8/50 |loss: 0.194895| train set 5.196x speedup, test set 5.200x speedup, val set 5.453x speedup, step: 4, train time 14.87 s
JOB test speedup 1.436143307152634
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 9/50 |loss: 0.188466| train set 5.192x speedup, test set 5.200x speedup, val set 5.439x speedup, step: 5, train time 15.08 s
JOB test speedup 1.226494555325284
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 10/50 |loss: 0.181622| train set 5.177x speedup, test set 5.196x speedup, val set 5.392x speedup, step: 6, train time 15.05 s
JOB test speedup 1.2207116753909955
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 11/50 |loss: 0.176719| train set 5.183x speedup, test set 5.200x speedup, val set 5.483x speedup, step: 1, train time 15.04 s
JOB test speedup 1.3146083856760695
TPCH test speedup 5.477660149805418
TPCH skew test speedup 5.197273807529786
Epoch 12/50 |loss: 0.169958| train set 5.194x speedup, test set 5.197x speedup, val set 5.391x speedup, step: 2, train time 15.02 s
JOB test speedup 1.2645195650816041
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 13/50 |loss: 0.168511| train set 5.186x speedup, test set 5.196x speedup, val set 5.370x speedup, step: 3, train time 15.16 s
JOB test speedup 1.2501900429594022
TPCH test speedup 5.476585301391275
TPCH skew test speedup 5.195783963825011
Epoch 14/50 |loss: 0.169440| train set 5.190x speedup, test set 5.196x speedup, val set 5.375x speedup, step: 4, train time 15.17 s
JOB test speedup 1.213545437941553
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 15/50 |loss: 0.161696| train set 5.188x speedup, test set 5.200x speedup, val set 5.466x speedup, step: 5, train time 14.98 s
JOB test speedup 1.2609614113560237
TPCH test speedup 5.477660149805418
TPCH skew test speedup 5.197273807529786
Epoch 16/50 |loss: 0.156269| train set 5.182x speedup, test set 5.197x speedup, val set 5.356x speedup, step: 6, train time 14.87 s
JOB test speedup 1.2850873184590283
TPCH test speedup 5.402096440258392
TPCH skew test speedup 5.196208154977842
Epoch 17/50 |loss: 0.153044| train set 5.175x speedup, test set 5.196x speedup, val set 5.370x speedup, step: 7, train time 15.11 s
JOB test speedup 1.310656927901483
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 18/50 |loss: 0.152013| train set 5.193x speedup, test set 5.199x speedup, val set 5.484x speedup, step: 1, train time 15.19 s
JOB test speedup 1.1235416995636227
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 19/50 |loss: 0.152289| train set 5.195x speedup, test set 5.200x speedup, val set 5.484x speedup, step: 2, train time 15.27 s
JOB test speedup 1.2000935632144785
TPCH test speedup 5.319609676033375
TPCH skew test speedup 5.033777125418019
Epoch 20/50 |loss: 0.145064| train set 5.198x speedup, test set 5.034x speedup, val set 5.466x speedup, step: 3, train time 15.26 s
JOB test speedup 1.3231181604527347
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 21/50 |loss: 0.144631| train set 5.200x speedup, test set 5.199x speedup, val set 5.506x speedup, step: 1, train time 15.07 s
JOB test speedup 1.2219442519594925
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 22/50 |loss: 0.150182| train set 5.186x speedup, test set 5.195x speedup, val set 5.388x speedup, step: 2, train time 15.25 s
JOB test speedup 1.2008249267331383
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 23/50 |loss: 0.138850| train set 5.199x speedup, test set 5.199x speedup, val set 5.467x speedup, step: 3, train time 15.14 s
JOB test speedup 1.3192303663024474
TPCH test speedup 5.475994304688397
TPCH skew test speedup 5.196208154977842
Epoch 24/50 |loss: 0.137629| train set 5.183x speedup, test set 5.196x speedup, val set 5.376x speedup, step: 4, train time 15.16 s
JOB test speedup 1.3176605034453794
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 25/50 |loss: 0.137093| train set 5.202x speedup, test set 5.199x speedup, val set 5.484x speedup, step: 5, train time 15.31 s
JOB test speedup 1.225551154072675
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 26/50 |loss: 0.135851| train set 5.205x speedup, test set 5.200x speedup, val set 5.479x speedup, step: 6, train time 15.25 s
JOB test speedup 1.2869981068395158
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.1989771538794916
Epoch 27/50 |loss: 0.139450| train set 5.203x speedup, test set 5.199x speedup, val set 5.470x speedup, step: 7, train time 15.08 s
JOB test speedup 1.1544424451874349
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 28/50 |loss: 0.137393| train set 5.190x speedup, test set 5.176x speedup, val set 5.417x speedup, step: 8, train time 15.16 s
JOB test speedup 1.1754385233274462
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 29/50 |loss: 0.131298| train set 5.191x speedup, test set 5.200x speedup, val set 5.494x speedup, step: 9, train time 15.06 s
JOB test speedup 1.2866480698303677
TPCH test speedup 5.538258451140126
TPCH skew test speedup 5.201180127513863
Epoch 30/50 |loss: 0.127592| train set 5.207x speedup, test set 5.201x speedup, val set 5.484x speedup, step: 10, train time 15.06 s
JOB test speedup 1.1806179296038997
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 31/50 |loss: 0.126601| train set 5.203x speedup, test set 5.200x speedup, val set 5.466x speedup, step: 11, train time 15.18 s
JOB test speedup 1.256360188369374
TPCH test speedup 5.48105988565435
TPCH skew test speedup 5.155498000687721
Epoch 32/50 |loss: 0.127517| train set 5.206x speedup, test set 5.155x speedup, val set 5.360x speedup, step: 12, train time 15.17 s
JOB test speedup 1.1026404112258719
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 33/50 |loss: 0.124506| train set 5.203x speedup, test set 5.200x speedup, val set 5.483x speedup, step: 13, train time 15.06 s
JOB test speedup 1.2027529825682561
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 34/50 |loss: 0.122823| train set 5.204x speedup, test set 5.196x speedup, val set 5.388x speedup, step: 14, train time 15.18 s
JOB test speedup 1.0782274643060943
TPCH test speedup 5.442078398307722
TPCH skew test speedup 5.126720993002068
Epoch 35/50 |loss: 0.125627| train set 5.200x speedup, test set 5.127x speedup, val set 5.391x speedup, step: 15, train time 15.16 s
JOB test speedup 1.220455628706935
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 36/50 |loss: 0.124375| train set 5.201x speedup, test set 5.199x speedup, val set 5.467x speedup, step: 16, train time 15.07 s
JOB test speedup 1.24568999940838
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 37/50 |loss: 0.122136| train set 5.205x speedup, test set 5.196x speedup, val set 5.396x speedup, step: 17, train time 14.88 s
JOB test speedup 1.2736193296309921
TPCH test speedup 5.537982220539701
TPCH skew test speedup 5.179664220650327
Epoch 38/50 |loss: 0.119380| train set 5.176x speedup, test set 5.180x speedup, val set 5.485x speedup, step: 18, train time 14.98 s
JOB test speedup 1.0973038825052337
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 39/50 |loss: 0.116536| train set 5.197x speedup, test set 5.176x speedup, val set 5.414x speedup, step: 19, train time 15.11 s
JOB test speedup 1.1712697269166898
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 40/50 |loss: 0.118378| train set 5.201x speedup, test set 5.180x speedup, val set 5.506x speedup, step: 20, train time 15.16 s
JOB test speedup 1.2304934764863409
TPCH test speedup 5.409636851477601
TPCH skew test speedup 5.1162037459297
Epoch 41/50 |loss: 0.116585| train set 5.168x speedup, test set 5.116x speedup, val set 5.300x speedup, step: 21, train time 15.11 s
JOB test speedup 1.2607630335850857
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 42/50 |loss: 0.118140| train set 5.205x speedup, test set 5.180x speedup, val set 5.502x speedup, step: 22, train time 15.15 s
JOB test speedup 1.1946269589765324
TPCH test speedup 5.506336410717353
TPCH skew test speedup 5.177855547692395
Epoch 43/50 |loss: 0.118761| train set 5.197x speedup, test set 5.178x speedup, val set 5.492x speedup, step: 23, train time 15.18 s
JOB test speedup 1.214076006461015
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.174665020177513
Epoch 44/50 |loss: 0.116341| train set 5.128x speedup, test set 5.175x speedup, val set 5.375x speedup, step: 24, train time 15.25 s
JOB test speedup 1.2558352733980644
TPCH test speedup 5.477660149805418
TPCH skew test speedup 5.197273807529786
Epoch 45/50 |loss: 0.114691| train set 5.199x speedup, test set 5.197x speedup, val set 5.355x speedup, step: 25, train time 15.24 s
JOB test speedup 1.2191702622620886
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 46/50 |loss: 0.110825| train set 5.127x speedup, test set 5.196x speedup, val set 5.391x speedup, step: 26, train time 15.12 s
JOB test speedup 1.256196689612513
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 47/50 |loss: 0.110611| train set 5.203x speedup, test set 5.199x speedup, val set 5.490x speedup, step: 27, train time 15.86 s
JOB test speedup 1.1879670019130375
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 48/50 |loss: 0.108694| train set 5.197x speedup, test set 5.196x speedup, val set 5.374x speedup, step: 28, train time 15.08 s
JOB test speedup 1.2649412434388654
TPCH test speedup 5.566132443306419
TPCH skew test speedup 5.181732721424572
Epoch 49/50 |loss: 0.109831| train set 5.206x speedup, test set 5.182x speedup, val set 5.470x speedup, step: 29, train time 15.16 s
Training per epoch cost 15.148 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.084s, pg runtime 0.081s, speedup 0.961x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.207s, model runtime 0.275s, pg runtime 0.207s, speedup 0.751x
04, opt runtime 0.920s, model runtime 0.920s, pg runtime 1.680s, speedup 1.825x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 4.298s, pg runtime 3.507s, speedup 0.816x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.445s, pg runtime 0.453s, speedup 1.020x
17, opt runtime 0.327s, model runtime 0.418s, pg runtime 0.354s, speedup 0.847x
18, opt runtime 2.962s, model runtime 2.962s, pg runtime 6.876s, speedup 2.321x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.078s, pg runtime 0.089s, speedup 1.151x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.096s, pg runtime 2.389s, speedup 24.808x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 3.377s, pg runtime 5.521s, speedup 1.635x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 21, train speedup 5.200, test speedup 1.323, val speedup 5.506
TPCH best validation speedup epoch: 21, train speedup 5.200, test speedup 5.557, val speedup 5.506
TPCH Skew best validation speedup epoch: 21, train speedup 5.200, test speedup 5.199, val speedup 5.506
execution cost 0:13:32.001735
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: pair
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 50
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/pair_wo_weighted
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
(192, 49)
(192, 49)
construct training samples cost 0:00:01.208069, and there are 23566 training samples
in channel 9
JOB test speedup 0.9177131384822798
TPCH test speedup 5.534859454955129
TPCH skew test speedup 5.159341751656149
Epoch 0/50 |loss: 0.403745| train set 4.631x speedup, test set 5.159x speedup, val set 5.061x speedup, step: 1, train time 16.40 s
JOB test speedup 1.1786405536279903
TPCH test speedup 5.462682135476274
TPCH skew test speedup 5.151940825670418
Epoch 1/50 |loss: 0.306094| train set 4.908x speedup, test set 5.152x speedup, val set 5.382x speedup, step: 1, train time 15.48 s
JOB test speedup 1.2536936632299533
TPCH test speedup 5.2931035834106135
TPCH skew test speedup 4.944683884942833
Epoch 2/50 |loss: 0.267299| train set 4.930x speedup, test set 4.945x speedup, val set 5.110x speedup, step: 2, train time 14.81 s
JOB test speedup 1.4886982607104164
TPCH test speedup 5.538258451140126
TPCH skew test speedup 5.201180127513863
Epoch 3/50 |loss: 0.244098| train set 5.161x speedup, test set 5.201x speedup, val set 5.448x speedup, step: 1, train time 14.88 s
JOB test speedup 1.2176497156226354
TPCH test speedup 5.178990604812263
TPCH skew test speedup 4.8391291466569495
Epoch 4/50 |loss: 0.235479| train set 4.770x speedup, test set 4.839x speedup, val set 5.001x speedup, step: 2, train time 15.15 s
JOB test speedup 1.3499840846049267
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 5/50 |loss: 0.217188| train set 5.189x speedup, test set 5.203x speedup, val set 5.476x speedup, step: 1, train time 14.97 s
JOB test speedup 1.2744123252447963
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 6/50 |loss: 0.207401| train set 5.185x speedup, test set 5.200x speedup, val set 5.493x speedup, step: 1, train time 15.15 s
JOB test speedup 0.8419057674180759
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 7/50 |loss: 0.199456| train set 5.182x speedup, test set 5.180x speedup, val set 5.487x speedup, step: 2, train time 15.21 s
JOB test speedup 1.2499641458873456
TPCH test speedup 5.430242735705298
TPCH skew test speedup 5.0864977566668195
Epoch 8/50 |loss: 0.195399| train set 5.107x speedup, test set 5.086x speedup, val set 5.437x speedup, step: 3, train time 15.05 s
JOB test speedup 1.4276908236057209
TPCH test speedup 5.558380108919816
TPCH skew test speedup 5.20278551932718
Epoch 9/50 |loss: 0.189445| train set 5.178x speedup, test set 5.203x speedup, val set 5.442x speedup, step: 4, train time 15.15 s
JOB test speedup 1.2248886068301221
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 10/50 |loss: 0.180995| train set 5.189x speedup, test set 5.195x speedup, val set 5.401x speedup, step: 5, train time 15.16 s
JOB test speedup 1.214645117205185
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 11/50 |loss: 0.175672| train set 5.194x speedup, test set 5.196x speedup, val set 5.377x speedup, step: 6, train time 15.35 s
JOB test speedup 1.1659968598184882
TPCH test speedup 5.498142562655775
TPCH skew test speedup 5.1961393284390995
Epoch 12/50 |loss: 0.170562| train set 5.172x speedup, test set 5.196x speedup, val set 5.387x speedup, step: 7, train time 15.16 s
JOB test speedup 1.2058573067688272
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 13/50 |loss: 0.168218| train set 5.202x speedup, test set 5.200x speedup, val set 5.378x speedup, step: 8, train time 15.20 s
JOB test speedup 1.2084353859803276
TPCH test speedup 5.498738349988382
TPCH skew test speedup 5.1957151485230115
Epoch 14/50 |loss: 0.167136| train set 5.192x speedup, test set 5.196x speedup, val set 5.360x speedup, step: 9, train time 15.30 s
JOB test speedup 1.2439683164146127
TPCH test speedup 5.500479554001375
TPCH skew test speedup 5.1505836640370815
Epoch 15/50 |loss: 0.163135| train set 5.187x speedup, test set 5.151x speedup, val set 5.469x speedup, step: 10, train time 15.27 s
JOB test speedup 1.2474545706933684
TPCH test speedup 5.498738349988382
TPCH skew test speedup 5.1957151485230115
Epoch 16/50 |loss: 0.157009| train set 5.202x speedup, test set 5.196x speedup, val set 5.374x speedup, step: 11, train time 15.37 s
JOB test speedup 1.176461012952071
TPCH test speedup 5.402096440258392
TPCH skew test speedup 5.1470625021941325
Epoch 17/50 |loss: 0.152526| train set 5.064x speedup, test set 5.147x speedup, val set 5.290x speedup, step: 12, train time 15.19 s
JOB test speedup 1.1649114014525441
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 18/50 |loss: 0.150298| train set 5.188x speedup, test set 5.199x speedup, val set 5.467x speedup, step: 13, train time 15.29 s
JOB test speedup 1.1811020924555018
TPCH test speedup 5.247147071663643
TPCH skew test speedup 4.933525789006092
Epoch 19/50 |loss: 0.148319| train set 4.811x speedup, test set 4.934x speedup, val set 5.144x speedup, step: 14, train time 15.29 s
JOB test speedup 1.1903319975755924
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 20/50 |loss: 0.142507| train set 5.103x speedup, test set 5.200x speedup, val set 5.469x speedup, step: 15, train time 15.28 s
JOB test speedup 1.202881597566998
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 21/50 |loss: 0.145939| train set 5.193x speedup, test set 5.199x speedup, val set 5.492x speedup, step: 16, train time 15.45 s
JOB test speedup 1.2107926704232344
TPCH test speedup 5.496464238088719
TPCH skew test speedup 5.195074141017431
Epoch 22/50 |loss: 0.146339| train set 5.203x speedup, test set 5.195x speedup, val set 5.410x speedup, step: 17, train time 15.41 s
JOB test speedup 1.1930174714610946
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.1989771538794916
Epoch 23/50 |loss: 0.136385| train set 5.196x speedup, test set 5.199x speedup, val set 5.467x speedup, step: 18, train time 15.31 s
JOB test speedup 1.185264826894385
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 5.174665020177513
Epoch 24/50 |loss: 0.135317| train set 5.194x speedup, test set 5.175x speedup, val set 5.031x speedup, step: 19, train time 15.37 s
JOB test speedup 1.2328977568561734
TPCH test speedup 5.553345792046001
TPCH skew test speedup 5.192656240967044
Epoch 25/50 |loss: 0.134197| train set 5.200x speedup, test set 5.193x speedup, val set 5.458x speedup, step: 20, train time 15.47 s
JOB test speedup 1.2358925957622733
TPCH test speedup 5.557481622845241
TPCH skew test speedup 5.178537415466618
Epoch 26/50 |loss: 0.135120| train set 5.196x speedup, test set 5.179x speedup, val set 5.452x speedup, step: 21, train time 15.61 s
JOB test speedup 1.0909533397005506
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 27/50 |loss: 0.136549| train set 5.201x speedup, test set 5.179x speedup, val set 5.497x speedup, step: 1, train time 15.27 s
JOB test speedup 1.1857241065189161
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 28/50 |loss: 0.132920| train set 5.195x speedup, test set 5.176x speedup, val set 5.400x speedup, step: 2, train time 15.48 s
JOB test speedup 1.1543243778662426
TPCH test speedup 5.559806516449232
TPCH skew test speedup 5.199619124972834
Epoch 29/50 |loss: 0.127722| train set 5.196x speedup, test set 5.200x speedup, val set 5.465x speedup, step: 3, train time 15.32 s
JOB test speedup 1.2154716732978248
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 30/50 |loss: 0.127170| train set 5.202x speedup, test set 5.180x speedup, val set 5.507x speedup, step: 1, train time 15.44 s
JOB test speedup 1.1679539014047016
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 31/50 |loss: 0.124453| train set 5.202x speedup, test set 5.200x speedup, val set 5.490x speedup, step: 2, train time 15.35 s
JOB test speedup 1.0730198212878814
TPCH test speedup 5.4978703191681655
TPCH skew test speedup 5.174665020177513
Epoch 32/50 |loss: 0.125545| train set 5.205x speedup, test set 5.175x speedup, val set 5.383x speedup, step: 3, train time 15.45 s
JOB test speedup 1.0862223872726908
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 33/50 |loss: 0.124693| train set 5.200x speedup, test set 5.200x speedup, val set 5.506x speedup, step: 4, train time 15.17 s
JOB test speedup 1.12203722509266
TPCH test speedup 5.499549502659299
TPCH skew test speedup 5.1757218538983505
Epoch 34/50 |loss: 0.121189| train set 5.204x speedup, test set 5.176x speedup, val set 5.408x speedup, step: 5, train time 15.46 s
JOB test speedup 1.0962302393284646
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 35/50 |loss: 0.122326| train set 5.191x speedup, test set 5.180x speedup, val set 5.469x speedup, step: 6, train time 15.36 s
JOB test speedup 1.2271959607069256
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 36/50 |loss: 0.124031| train set 5.202x speedup, test set 5.179x speedup, val set 5.478x speedup, step: 7, train time 15.42 s
JOB test speedup 1.179861044073353
TPCH test speedup 5.365661222304604
TPCH skew test speedup 5.105968070243265
Epoch 37/50 |loss: 0.124587| train set 5.004x speedup, test set 5.106x speedup, val set 5.229x speedup, step: 8, train time 15.31 s
JOB test speedup 1.2697133115551589
TPCH test speedup 5.537982220539701
TPCH skew test speedup 5.179664220650327
Epoch 38/50 |loss: 0.118828| train set 5.173x speedup, test set 5.180x speedup, val set 5.486x speedup, step: 9, train time 15.16 s
JOB test speedup 1.0887232705160919
TPCH test speedup 5.5001455949638896
TPCH skew test speedup 5.175301000804703
Epoch 39/50 |loss: 0.117485| train set 5.193x speedup, test set 5.175x speedup, val set 5.414x speedup, step: 10, train time 15.37 s
JOB test speedup 1.2011042417586915
TPCH test speedup 5.559197422915018
TPCH skew test speedup 5.200043942598341
Epoch 40/50 |loss: 0.118843| train set 5.206x speedup, test set 5.200x speedup, val set 5.396x speedup, step: 11, train time 15.34 s
JOB test speedup 1.1946533830016115
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 41/50 |loss: 0.117125| train set 5.187x speedup, test set 5.180x speedup, val set 5.469x speedup, step: 12, train time 15.30 s
JOB test speedup 1.1310819804239984
TPCH test speedup 5.559818050650979
TPCH skew test speedup 5.1823158837786565
Epoch 42/50 |loss: 0.116693| train set 5.203x speedup, test set 5.182x speedup, val set 5.495x speedup, step: 13, train time 15.28 s
JOB test speedup 1.1893988671805664
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.181732721424572
Epoch 43/50 |loss: 0.119913| train set 5.095x speedup, test set 5.182x speedup, val set 5.492x speedup, step: 14, train time 15.51 s
JOB test speedup 1.200903219245779
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 44/50 |loss: 0.115261| train set 5.125x speedup, test set 5.179x speedup, val set 5.525x speedup, step: 1, train time 15.40 s
JOB test speedup 1.1998670192300742
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 45/50 |loss: 0.115364| train set 5.181x speedup, test set 5.180x speedup, val set 5.465x speedup, step: 2, train time 15.44 s
JOB test speedup 1.2110826320333832
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 46/50 |loss: 0.110481| train set 5.209x speedup, test set 5.180x speedup, val set 5.430x speedup, step: 3, train time 15.35 s
JOB test speedup 1.2840641547774956
TPCH test speedup 5.558919099680793
TPCH skew test speedup 5.178537415466618
Epoch 47/50 |loss: 0.109152| train set 5.204x speedup, test set 5.179x speedup, val set 5.490x speedup, step: 4, train time 15.87 s
JOB test speedup 1.1731420901169252
TPCH test speedup 5.5606357876069525
TPCH skew test speedup 5.17959583167742
Epoch 48/50 |loss: 0.106946| train set 5.197x speedup, test set 5.180x speedup, val set 5.374x speedup, step: 5, train time 15.31 s
JOB test speedup 1.2136579486522725
TPCH test speedup 5.567574399381526
TPCH skew test speedup 5.181732721424572
Epoch 49/50 |loss: 0.109563| train set 5.198x speedup, test set 5.182x speedup, val set 5.510x speedup, step: 6, train time 15.40 s
Training per epoch cost 15.329 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.007s, pg runtime 0.081s, speedup 11.534x
02, opt runtime 1.299s, model runtime 3.393s, pg runtime 5.855s, speedup 1.726x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 4.298s, pg runtime 3.507s, speedup 0.816x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.468s, pg runtime 0.453s, speedup 0.969x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 3.540s, pg runtime 3.540s, speedup 1.000x
20, opt runtime 0.064s, model runtime 0.064s, pg runtime 0.089s, speedup 1.393x
21, opt runtime 0.953s, model runtime 1.481s, pg runtime 4.730s, speedup 3.195x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 1.434s, pg runtime 0.158s, speedup 0.110x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.482s, pg runtime 8.605s, speedup 1.015x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 7.202s, pg runtime 31.019s, speedup 4.307x
08, opt runtime 7.377s, model runtime 7.377s, pg runtime 28.655s, speedup 3.885x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 53.298s, pg runtime 148.707s, speedup 2.790x
16, opt runtime 53.440s, model runtime 53.440s, pg runtime 140.742s, speedup 2.634x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 7.281s, pg runtime 14.081s, speedup 1.934x
08, opt runtime 5.471s, model runtime 7.216s, pg runtime 13.410s, speedup 1.858x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 52.135s, pg runtime 102.039s, speedup 1.957x
16, opt runtime 54.696s, model runtime 54.696s, pg runtime 98.172s, speedup 1.795x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 44, train speedup 5.125, test speedup 1.201, val speedup 5.525
TPCH best validation speedup epoch: 44, train speedup 5.125, test speedup 5.559, val speedup 5.525
TPCH Skew best validation speedup epoch: 44, train speedup 5.125, test speedup 5.179, val speedup 5.525
execution cost 0:13:41.582007
==================================================
