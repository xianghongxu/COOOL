all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.841273, and there are 13720 training samples
in channel 9
JOB test speedup 0.9637818046530559
TPCH test speedup 2.546534276510287
TPCH skew test speedup 2.418676799347655
Epoch 0/300 |loss: 0.021988| train set 0.993x speedup, test set 2.419x speedup, val set 0.822x speedup, step: 1
JOB test speedup 1.6331000278428236
TPCH test speedup 2.3296988513666186
TPCH skew test speedup 2.130525005682472
Epoch 1/300 |loss: 0.008024| train set 1.002x speedup, test set 2.131x speedup, val set 0.503x speedup, step: 2
JOB test speedup 1.7289346264375942
TPCH test speedup 5.551184357930597
TPCH skew test speedup 5.001761763075479
Epoch 2/300 |loss: 0.006322| train set 1.152x speedup, test set 5.002x speedup, val set 0.350x speedup, step: 3
JOB test speedup 1.6130569352495694
TPCH test speedup 4.744311014252866
TPCH skew test speedup 4.3738160760558324
Epoch 3/300 |loss: 0.006164| train set 1.335x speedup, test set 4.374x speedup, val set 0.816x speedup, step: 4
JOB test speedup 1.7084617979269983
TPCH test speedup 4.650355128212111
TPCH skew test speedup 4.3738160760558324
Epoch 4/300 |loss: 0.004257| train set 1.330x speedup, test set 4.374x speedup, val set 0.988x speedup, step: 1
JOB test speedup 1.0142368459316766
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 5/300 |loss: 0.003410| train set 1.520x speedup, test set 1.655x speedup, val set 0.740x speedup, step: 2
JOB test speedup 1.0143400061196293
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 6/300 |loss: 0.003540| train set 1.394x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 3
JOB test speedup 1.8936259079201982
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 7/300 |loss: 0.003087| train set 1.474x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.7594506721619847
TPCH test speedup 1.812283406744417
TPCH skew test speedup 1.7230259585614784
Epoch 8/300 |loss: 0.002771| train set 1.541x speedup, test set 1.723x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.7820963721978613
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 9/300 |loss: 0.002775| train set 1.559x speedup, test set 3.772x speedup, val set 0.878x speedup, step: 6
JOB test speedup 1.0755653989486968
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 10/300 |loss: 0.002487| train set 1.557x speedup, test set 3.772x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.9997496144375808
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 11/300 |loss: 0.002718| train set 1.575x speedup, test set 3.882x speedup, val set 0.879x speedup, step: 8
JOB test speedup 1.0050993079866994
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 12/300 |loss: 0.002485| train set 1.513x speedup, test set 3.461x speedup, val set 0.879x speedup, step: 9
JOB test speedup 1.0612954594101383
TPCH test speedup 4.479833056097433
TPCH skew test speedup 3.8509766374846373
Epoch 13/300 |loss: 0.002196| train set 1.775x speedup, test set 3.851x speedup, val set 0.879x speedup, step: 10
JOB test speedup 1.30368251104306
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 14/300 |loss: 0.002285| train set 1.710x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 11
JOB test speedup 1.0526199474410036
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 15/300 |loss: 0.002494| train set 1.729x speedup, test set 3.461x speedup, val set 0.879x speedup, step: 12
JOB test speedup 1.3538822061835105
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 16/300 |loss: 0.002396| train set 1.772x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 13
JOB test speedup 1.2809060821053424
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 17/300 |loss: 0.001788| train set 1.586x speedup, test set 3.772x speedup, val set 0.876x speedup, step: 14
JOB test speedup 0.8766586026609291
TPCH test speedup 2.129719327942846
TPCH skew test speedup 2.0469991853728824
Epoch 18/300 |loss: 0.001817| train set 1.507x speedup, test set 2.047x speedup, val set 0.879x speedup, step: 15
JOB test speedup 1.294926161438297
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 19/300 |loss: 0.001910| train set 1.744x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 16
JOB test speedup 0.8439332996788466
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 20/300 |loss: 0.001529| train set 1.621x speedup, test set 3.882x speedup, val set 0.879x speedup, step: 17
JOB test speedup 1.337603804039908
TPCH test speedup 3.7212820344094926
TPCH skew test speedup 3.5100747696058967
Epoch 21/300 |loss: 0.001536| train set 1.744x speedup, test set 3.510x speedup, val set 0.877x speedup, step: 18
JOB test speedup 1.255035949906898
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 22/300 |loss: 0.001659| train set 1.699x speedup, test set 3.882x speedup, val set 0.879x speedup, step: 19
JOB test speedup 0.8596659852214357
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 23/300 |loss: 0.001464| train set 1.783x speedup, test set 3.882x speedup, val set 0.887x speedup, step: 20
JOB test speedup 1.2719791583710838
TPCH test speedup 2.169806489671569
TPCH skew test speedup 2.0983722137816154
Epoch 24/300 |loss: 0.001492| train set 1.745x speedup, test set 2.098x speedup, val set 0.877x speedup, step: 21
JOB test speedup 1.2523792000500793
TPCH test speedup 2.129719327942846
TPCH skew test speedup 2.0469991853728824
Epoch 25/300 |loss: 0.001432| train set 1.776x speedup, test set 2.047x speedup, val set 0.887x speedup, step: 22
JOB test speedup 1.208464735117902
TPCH test speedup 2.1857688609720425
TPCH skew test speedup 2.110019589753068
Epoch 26/300 |loss: 0.001258| train set 1.776x speedup, test set 2.110x speedup, val set 0.623x speedup, step: 23
JOB test speedup 1.259929429286697
TPCH test speedup 2.163893243570758
TPCH skew test speedup 2.0769282875736588
Epoch 27/300 |loss: 0.001273| train set 1.697x speedup, test set 2.077x speedup, val set 0.886x speedup, step: 24
JOB test speedup 0.8525315610646486
TPCH test speedup 2.1857688609720425
TPCH skew test speedup 2.110019589753068
Epoch 28/300 |loss: 0.001234| train set 1.777x speedup, test set 2.110x speedup, val set 0.887x speedup, step: 25
JOB test speedup 1.23791806834079
TPCH test speedup 2.1857688609720425
TPCH skew test speedup 2.1517034114149443
Epoch 29/300 |loss: 0.001361| train set 1.778x speedup, test set 2.152x speedup, val set 0.886x speedup, step: 26
JOB test speedup 1.240250657439844
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 30/300 |loss: 0.001155| train set 1.739x speedup, test set 3.882x speedup, val set 0.879x speedup, step: 27
JOB test speedup 0.8530828360753289
TPCH test speedup 2.1857688609720425
TPCH skew test speedup 2.110019589753068
Epoch 31/300 |loss: 0.001122| train set 1.782x speedup, test set 2.110x speedup, val set 0.886x speedup, step: 28
JOB test speedup 1.3427299739012521
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 32/300 |loss: 0.001280| train set 1.728x speedup, test set 3.882x speedup, val set 0.885x speedup, step: 29
JOB test speedup 0.8060972949387666
TPCH test speedup 4.165392040621194
TPCH skew test speedup 3.882394164227722
Epoch 33/300 |loss: 0.001025| train set 1.786x speedup, test set 3.882x speedup, val set 0.879x speedup, step: 30
JOB test speedup 1.6486756893537704
TPCH test speedup 2.1857688609720425
TPCH skew test speedup 2.110019589753068
Epoch 34/300 |loss: 0.001109| train set 1.728x speedup, test set 2.110x speedup, val set 0.887x speedup, step: 31
JOB test speedup 1.0376124115066492
TPCH test speedup 2.1857688609720425
TPCH skew test speedup 2.110019589753068
Epoch 35/300 |loss: 0.001047| train set 1.732x speedup, test set 2.110x speedup, val set 0.887x speedup, step: 32
JOB test speedup 1.3190487068193808
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 36/300 |loss: 0.001049| train set 1.782x speedup, test set 3.882x speedup, val set 0.886x speedup, step: 33
JOB test speedup 1.2444340152007978
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 37/300 |loss: 0.001024| train set 1.779x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 34
JOB test speedup 1.292883323519823
TPCH test speedup 1.3182492983079153
TPCH skew test speedup 1.2671388268568258
Epoch 38/300 |loss: 0.001140| train set 1.777x speedup, test set 1.267x speedup, val set 0.886x speedup, step: 35
JOB test speedup 0.8473595382284352
TPCH test speedup 2.1857688609720425
TPCH skew test speedup 2.110019589753068
Epoch 39/300 |loss: 0.001237| train set 1.781x speedup, test set 2.110x speedup, val set 0.887x speedup, step: 36
JOB test speedup 1.2374808661604368
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 40/300 |loss: 0.000997| train set 1.774x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 37
JOB test speedup 0.828877563634335
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 41/300 |loss: 0.000937| train set 1.776x speedup, test set 3.882x speedup, val set 0.887x speedup, step: 38
JOB test speedup 0.8434758500905211
TPCH test speedup 4.120352745345836
TPCH skew test speedup 3.882394164227722
Epoch 42/300 |loss: 0.000995| train set 1.643x speedup, test set 3.882x speedup, val set 0.886x speedup, step: 39
JOB test speedup 0.8259089531466103
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.9768374609104815
Epoch 43/300 |loss: 0.001037| train set 1.780x speedup, test set 3.977x speedup, val set 0.887x speedup, step: 40
JOB test speedup 1.3015846218435363
TPCH test speedup 1.3182492983079153
TPCH skew test speedup 1.2820540295576366
Epoch 44/300 |loss: 0.001020| train set 1.772x speedup, test set 1.282x speedup, val set 0.887x speedup, step: 41
JOB test speedup 1.3424502621619148
TPCH test speedup 1.321307967519518
TPCH skew test speedup 1.2820540295576366
Epoch 45/300 |loss: 0.000878| train set 1.750x speedup, test set 1.282x speedup, val set 0.884x speedup, step: 42
JOB test speedup 0.8275953594262259
TPCH test speedup 3.9226755452072193
TPCH skew test speedup 3.8296230852931625
Epoch 46/300 |loss: 0.000927| train set 1.778x speedup, test set 3.830x speedup, val set 0.887x speedup, step: 43
JOB test speedup 1.3716387643951522
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 47/300 |loss: 0.000796| train set 1.749x speedup, test set 2.152x speedup, val set 0.886x speedup, step: 44
JOB test speedup 1.3227311845997158
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 48/300 |loss: 0.000860| train set 1.784x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 45
JOB test speedup 1.2522012343011883
TPCH test speedup 4.165392040621194
TPCH skew test speedup 4.025897149096412
Epoch 49/300 |loss: 0.000869| train set 1.773x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 46
JOB test speedup 1.2980876634246306
TPCH test speedup 3.895839755378227
TPCH skew test speedup 3.8296230852931625
Epoch 50/300 |loss: 0.000846| train set 1.753x speedup, test set 3.830x speedup, val set 0.887x speedup, step: 47
JOB test speedup 1.2835485323198086
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 51/300 |loss: 0.000807| train set 1.727x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 48
JOB test speedup 0.8529488483371241
TPCH test speedup 1.8533498519727742
TPCH skew test speedup 1.7741754860160275
Epoch 52/300 |loss: 0.000898| train set 1.727x speedup, test set 1.774x speedup, val set 0.887x speedup, step: 49
JOB test speedup 0.882480797877334
TPCH test speedup 1.8533498519727742
TPCH skew test speedup 1.7741754860160275
Epoch 53/300 |loss: 0.000824| train set 1.781x speedup, test set 1.774x speedup, val set 0.887x speedup, step: 50
JOB test speedup 1.7351507994810036
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 54/300 |loss: 0.000834| train set 1.740x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 51
JOB test speedup 1.303675390539101
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 55/300 |loss: 0.000857| train set 1.782x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 52
JOB test speedup 1.2558478451937052
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 56/300 |loss: 0.000874| train set 1.769x speedup, test set 1.774x speedup, val set 0.887x speedup, step: 53
early stopping at epoch 56
Training per epoch cost 3.748 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.369s, pg runtime 0.206s, speedup 0.560x
02, opt runtime 4.223s, model runtime 25.073s, pg runtime 18.741s, speedup 0.747x
03, opt runtime 1.763s, model runtime 2.010s, pg runtime 1.763s, speedup 0.877x
04, opt runtime 1.386s, model runtime 1.551s, pg runtime 1.386s, speedup 0.894x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
19, opt runtime 0.379s, model runtime 0.826s, pg runtime 3.645s, speedup 4.416x
20, opt runtime 0.626s, model runtime 1.091s, pg runtime 2.558s, speedup 2.346x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 115.088s, pg runtime 78.349s, speedup 0.681x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 111.214s, pg runtime 83.069s, speedup 0.747x
15, opt runtime 47.518s, model runtime 110.442s, pg runtime 75.736s, speedup 0.686x
16, opt runtime 48.067s, model runtime 105.466s, pg runtime 81.014s, speedup 0.768x
17, opt runtime 47.738s, model runtime 112.310s, pg runtime 76.021s, speedup 0.677x
18, opt runtime 47.804s, model runtime 107.236s, pg runtime 81.177s, speedup 0.757x
19, opt runtime 49.511s, model runtime 123.034s, pg runtime 87.329s, speedup 0.710x
20, opt runtime 51.276s, model runtime 106.998s, pg runtime 79.222s, speedup 0.740x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 16.268s, pg runtime 432.766s, speedup 26.603x
32, opt runtime 15.120s, model runtime 16.499s, pg runtime 566.078s, speedup 34.310x
33, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
34, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
35, opt runtime 16.528s, model runtime 16.528s, pg runtime 620.762s, speedup 37.558x
36, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
37, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
38, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
39, opt runtime 16.770s, model runtime 16.770s, pg runtime 594.754s, speedup 35.464x
40, opt runtime 16.305s, model runtime 16.305s, pg runtime 436.168s, speedup 26.751x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 108.405s, pg runtime 80.711s, speedup 0.745x
12, opt runtime 53.203s, model runtime 110.198s, pg runtime 79.156s, speedup 0.718x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 108.531s, pg runtime 77.674s, speedup 0.716x
16, opt runtime 47.844s, model runtime 105.990s, pg runtime 80.007s, speedup 0.755x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 112.519s, pg runtime 77.369s, speedup 0.688x
19, opt runtime 52.382s, model runtime 117.620s, pg runtime 82.710s, speedup 0.703x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 16.761s, pg runtime 602.586s, speedup 35.953x
32, opt runtime 16.542s, model runtime 16.542s, pg runtime 461.957s, speedup 27.927x
33, opt runtime 16.136s, model runtime 16.358s, pg runtime 410.283s, speedup 25.082x
34, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
35, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
38, opt runtime 16.194s, model runtime 16.194s, pg runtime 439.255s, speedup 27.124x
39, opt runtime 16.149s, model runtime 16.149s, pg runtime 423.122s, speedup 26.201x
40, opt runtime 13.751s, model runtime 16.582s, pg runtime 434.625s, speedup 26.210x
====================
JOB best validation speedup epoch: 4, train speedup 1.330, test speedup 1.708, val speedup 0.988
TPCH best validation speedup epoch: 4, train speedup 1.330, test speedup 4.650, val speedup 0.988
TPCH Skew best validation speedup epoch: 4, train speedup 1.330, test speedup 4.374, val speedup 0.988
execution cost 0:04:49.134753
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.870737, and there are 13720 training samples
in channel 9
JOB test speedup 0.9637818046530559
TPCH test speedup 2.546534276510287
TPCH skew test speedup 2.418676799347655
Epoch 0/300 |loss: 0.021988| train set 0.993x speedup, test set 2.419x speedup, val set 0.822x speedup, step: 1
JOB test speedup 1.6251200005628403
TPCH test speedup 2.348482875591847
TPCH skew test speedup 2.235587637408806
Epoch 1/300 |loss: 0.008010| train set 1.002x speedup, test set 2.236x speedup, val set 0.503x speedup, step: 2
JOB test speedup 1.7181798442002105
TPCH test speedup 5.551184357930597
TPCH skew test speedup 5.001761763075479
Epoch 2/300 |loss: 0.006322| train set 1.168x speedup, test set 5.002x speedup, val set 0.350x speedup, step: 3
JOB test speedup 1.6802032378256828
TPCH test speedup 4.744311014252866
TPCH skew test speedup 4.3738160760558324
Epoch 3/300 |loss: 0.006336| train set 1.505x speedup, test set 4.374x speedup, val set 0.558x speedup, step: 4
JOB test speedup 1.7179343478279445
TPCH test speedup 5.090591101180219
TPCH skew test speedup 4.604208338341918
Epoch 4/300 |loss: 0.004257| train set 1.344x speedup, test set 4.604x speedup, val set 0.816x speedup, step: 5
JOB test speedup 1.0289477665399756
TPCH test speedup 3.5162946243398383
TPCH skew test speedup 3.605280680394733
Epoch 5/300 |loss: 0.003383| train set 1.494x speedup, test set 3.605x speedup, val set 0.740x speedup, step: 6
JOB test speedup 0.9964936092732065
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 6/300 |loss: 0.003485| train set 1.493x speedup, test set 3.772x speedup, val set 0.798x speedup, step: 7
JOB test speedup 1.8982350067182447
TPCH test speedup 3.942183610715573
TPCH skew test speedup 3.735211346312093
Epoch 7/300 |loss: 0.003096| train set 1.316x speedup, test set 3.735x speedup, val set 0.450x speedup, step: 8
JOB test speedup 1.794623956579007
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 8/300 |loss: 0.002776| train set 1.531x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 9
JOB test speedup 1.8479377741099483
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 9/300 |loss: 0.002770| train set 1.496x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 1
JOB test speedup 1.0537897221422359
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 10/300 |loss: 0.002422| train set 1.509x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 2
JOB test speedup 1.0035228331079593
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 11/300 |loss: 0.002588| train set 1.704x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 3
JOB test speedup 1.7794606194268145
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 12/300 |loss: 0.002471| train set 1.511x speedup, test set 3.461x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.0387498243498114
TPCH test speedup 3.707631197285311
TPCH skew test speedup 3.6601936117041
Epoch 13/300 |loss: 0.002165| train set 1.737x speedup, test set 3.660x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.0028409818133097
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 14/300 |loss: 0.002259| train set 1.538x speedup, test set 2.047x speedup, val set 0.879x speedup, step: 1
JOB test speedup 1.9308086859885383
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 15/300 |loss: 0.002153| train set 1.765x speedup, test set 3.674x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.0212872434116862
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.8025333752746966
Epoch 16/300 |loss: 0.002134| train set 1.733x speedup, test set 3.803x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.8071865554706656
TPCH test speedup 2.1441348041905868
TPCH skew test speedup 2.0769282875736588
Epoch 17/300 |loss: 0.001645| train set 1.704x speedup, test set 2.077x speedup, val set 0.876x speedup, step: 4
JOB test speedup 1.0460557663840684
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 18/300 |loss: 0.001701| train set 1.533x speedup, test set 2.047x speedup, val set 0.880x speedup, step: 5
JOB test speedup 1.7783438260549622
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 19/300 |loss: 0.001739| train set 1.742x speedup, test set 2.047x speedup, val set 0.876x speedup, step: 6
JOB test speedup 1.0779360621825191
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.110019589753068
Epoch 20/300 |loss: 0.001450| train set 1.776x speedup, test set 2.110x speedup, val set 0.880x speedup, step: 7
JOB test speedup 1.7746768902705168
TPCH test speedup 2.12326235707239
TPCH skew test speedup 2.0597841649140514
Epoch 21/300 |loss: 0.001352| train set 1.783x speedup, test set 2.060x speedup, val set 0.880x speedup, step: 8
JOB test speedup 1.8429932090615653
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 22/300 |loss: 0.001580| train set 1.721x speedup, test set 2.047x speedup, val set 0.880x speedup, step: 9
JOB test speedup 1.0438955022646292
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.072955396565392
Epoch 23/300 |loss: 0.001380| train set 1.714x speedup, test set 2.073x speedup, val set 0.877x speedup, step: 10
JOB test speedup 1.850577780464741
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 24/300 |loss: 0.001336| train set 1.745x speedup, test set 2.047x speedup, val set 0.877x speedup, step: 11
JOB test speedup 1.777673839257208
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 25/300 |loss: 0.001314| train set 1.729x speedup, test set 2.047x speedup, val set 0.880x speedup, step: 12
JOB test speedup 1.046656603331643
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 26/300 |loss: 0.001270| train set 1.770x speedup, test set 2.047x speedup, val set 0.880x speedup, step: 13
JOB test speedup 1.040129553525591
TPCH test speedup 2.1045036654434632
TPCH skew test speedup 2.0469991853728824
Epoch 27/300 |loss: 0.001232| train set 1.697x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 14
JOB test speedup 1.0303413845487273
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 28/300 |loss: 0.001196| train set 1.773x speedup, test set 2.086x speedup, val set 0.876x speedup, step: 15
JOB test speedup 1.0467913745825883
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 29/300 |loss: 0.001238| train set 1.744x speedup, test set 2.047x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8704156401985829
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 30/300 |loss: 0.001064| train set 1.745x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 2
JOB test speedup 1.0464079190507443
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 31/300 |loss: 0.001000| train set 1.786x speedup, test set 2.047x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.7968306183846154
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 32/300 |loss: 0.001088| train set 1.622x speedup, test set 2.086x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.856164787810051
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0646204485083084
Epoch 33/300 |loss: 0.000997| train set 1.748x speedup, test set 2.065x speedup, val set 0.876x speedup, step: 5
JOB test speedup 1.038605991673315
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 34/300 |loss: 0.001058| train set 1.767x speedup, test set 2.047x speedup, val set 0.885x speedup, step: 1
JOB test speedup 1.8527872482178547
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 35/300 |loss: 0.001013| train set 1.782x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 2
JOB test speedup 1.8462428868027583
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 36/300 |loss: 0.000976| train set 1.782x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.6934064199617815
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 37/300 |loss: 0.000988| train set 1.750x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 4
JOB test speedup 1.7628466985156692
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 38/300 |loss: 0.001039| train set 1.774x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 5
JOB test speedup 1.7769487552938266
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 39/300 |loss: 0.001009| train set 1.731x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.9882956260386718
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 40/300 |loss: 0.000948| train set 1.728x speedup, test set 2.086x speedup, val set 0.888x speedup, step: 2
JOB test speedup 1.6402074727263272
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 41/300 |loss: 0.000861| train set 1.749x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.0143623006174536
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 42/300 |loss: 0.000966| train set 1.545x speedup, test set 2.047x speedup, val set 0.882x speedup, step: 4
JOB test speedup 1.0217216222752346
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 43/300 |loss: 0.001050| train set 1.756x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 5
JOB test speedup 1.7544388710787182
TPCH test speedup 1.1254544219888156
TPCH skew test speedup 1.0971348098542106
Epoch 44/300 |loss: 0.000968| train set 1.750x speedup, test set 1.097x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.0494285949473736
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 45/300 |loss: 0.000832| train set 1.777x speedup, test set 2.047x speedup, val set 0.885x speedup, step: 2
JOB test speedup 0.831252038720566
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 46/300 |loss: 0.000853| train set 1.780x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.6966884558491304
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 47/300 |loss: 0.000783| train set 1.783x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 4
JOB test speedup 1.7717288603746064
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 48/300 |loss: 0.000869| train set 1.753x speedup, test set 2.086x speedup, val set 0.888x speedup, step: 5
JOB test speedup 1.7817841057025632
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 49/300 |loss: 0.000844| train set 1.779x speedup, test set 2.086x speedup, val set 0.888x speedup, step: 6
JOB test speedup 1.6906027506541679
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 50/300 |loss: 0.000798| train set 1.750x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 7
JOB test speedup 1.6749443133902107
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 51/300 |loss: 0.000775| train set 1.748x speedup, test set 2.047x speedup, val set 0.885x speedup, step: 8
JOB test speedup 0.9975036118849042
TPCH test speedup 2.185266886144457
TPCH skew test speedup 2.1517034114149443
Epoch 52/300 |loss: 0.000763| train set 1.739x speedup, test set 2.152x speedup, val set 0.888x speedup, step: 9
JOB test speedup 0.9964727429684898
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 53/300 |loss: 0.000739| train set 1.776x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 10
JOB test speedup 1.8773837375666989
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 54/300 |loss: 0.000883| train set 1.747x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 11
JOB test speedup 1.7683961137389084
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 55/300 |loss: 0.000911| train set 1.783x speedup, test set 2.086x speedup, val set 0.888x speedup, step: 12
early stopping at epoch 55
Training per epoch cost 3.840 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.080s, pg runtime 6.143s, speedup 1.010x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 0.331s, pg runtime 2.352s, speedup 7.109x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 10.685s, pg runtime 10.685s, speedup 1.000x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.474s, pg runtime 4.730s, speedup 0.558x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.396s, pg runtime 8.605s, speedup 1.025x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 593.206s, pg runtime 601.866s, speedup 1.015x
22, opt runtime 24.079s, model runtime 599.939s, pg runtime 608.707s, speedup 1.015x
23, opt runtime 24.662s, model runtime 611.020s, pg runtime 613.999s, speedup 1.005x
24, opt runtime 24.459s, model runtime 583.212s, pg runtime 608.717s, speedup 1.044x
25, opt runtime 25.236s, model runtime 601.102s, pg runtime 601.756s, speedup 1.001x
26, opt runtime 25.363s, model runtime 588.629s, pg runtime 611.327s, speedup 1.039x
27, opt runtime 24.706s, model runtime 600.840s, pg runtime 610.808s, speedup 1.017x
28, opt runtime 25.075s, model runtime 584.856s, pg runtime 612.430s, speedup 1.047x
29, opt runtime 24.840s, model runtime 623.270s, pg runtime 626.529s, speedup 1.005x
30, opt runtime 24.920s, model runtime 574.780s, pg runtime 610.993s, speedup 1.063x
31, opt runtime 16.268s, model runtime 349.951s, pg runtime 432.766s, speedup 1.237x
32, opt runtime 15.120s, model runtime 350.307s, pg runtime 566.078s, speedup 1.616x
33, opt runtime 16.639s, model runtime 343.997s, pg runtime 462.544s, speedup 1.345x
34, opt runtime 16.280s, model runtime 379.482s, pg runtime 634.990s, speedup 1.673x
35, opt runtime 16.528s, model runtime 362.680s, pg runtime 620.762s, speedup 1.712x
36, opt runtime 18.690s, model runtime 356.056s, pg runtime 651.942s, speedup 1.831x
37, opt runtime 16.438s, model runtime 349.045s, pg runtime 546.887s, speedup 1.567x
38, opt runtime 16.138s, model runtime 349.458s, pg runtime 501.793s, speedup 1.436x
39, opt runtime 16.770s, model runtime 354.159s, pg runtime 594.754s, speedup 1.679x
40, opt runtime 16.305s, model runtime 348.685s, pg runtime 436.168s, speedup 1.251x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 599.120s, pg runtime 616.762s, speedup 1.029x
22, opt runtime 25.478s, model runtime 615.822s, pg runtime 642.079s, speedup 1.043x
23, opt runtime 24.016s, model runtime 611.633s, pg runtime 601.228s, speedup 0.983x
24, opt runtime 24.103s, model runtime 618.857s, pg runtime 616.889s, speedup 0.997x
25, opt runtime 24.136s, model runtime 614.909s, pg runtime 609.432s, speedup 0.991x
26, opt runtime 25.431s, model runtime 586.590s, pg runtime 625.988s, speedup 1.067x
27, opt runtime 24.451s, model runtime 615.228s, pg runtime 628.615s, speedup 1.022x
28, opt runtime 24.465s, model runtime 614.812s, pg runtime 644.779s, speedup 1.049x
29, opt runtime 25.152s, model runtime 624.805s, pg runtime 613.332s, speedup 0.982x
30, opt runtime 24.505s, model runtime 572.919s, pg runtime 621.574s, speedup 1.085x
31, opt runtime 16.756s, model runtime 363.182s, pg runtime 602.586s, speedup 1.659x
32, opt runtime 16.542s, model runtime 343.670s, pg runtime 461.957s, speedup 1.344x
33, opt runtime 16.136s, model runtime 338.095s, pg runtime 410.283s, speedup 1.214x
34, opt runtime 14.422s, model runtime 349.086s, pg runtime 497.542s, speedup 1.425x
35, opt runtime 15.980s, model runtime 342.141s, pg runtime 504.239s, speedup 1.474x
36, opt runtime 16.482s, model runtime 349.021s, pg runtime 622.915s, speedup 1.785x
37, opt runtime 16.301s, model runtime 358.543s, pg runtime 646.719s, speedup 1.804x
38, opt runtime 16.194s, model runtime 351.176s, pg runtime 439.255s, speedup 1.251x
39, opt runtime 16.149s, model runtime 354.585s, pg runtime 423.122s, speedup 1.193x
40, opt runtime 13.751s, model runtime 340.982s, pg runtime 434.625s, speedup 1.275x
====================
JOB best validation speedup epoch: 44, train speedup 1.750, test speedup 1.754, val speedup 0.888
TPCH best validation speedup epoch: 44, train speedup 1.750, test speedup 1.125, val speedup 0.888
TPCH Skew best validation speedup epoch: 44, train speedup 1.750, test speedup 1.097, val speedup 0.888
execution cost 0:04:49.889745
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.797038, and there are 13720 training samples
in channel 9
JOB test speedup 0.9637818046530559
TPCH test speedup 2.546534276510287
TPCH skew test speedup 2.418676799347655
Epoch 0/300 |loss: 0.021988| train set 0.993x speedup, test set 2.419x speedup, val set 0.822x speedup, step: 1
JOB test speedup 1.6331000278428236
TPCH test speedup 2.3296988513666186
TPCH skew test speedup 2.130525005682472
Epoch 1/300 |loss: 0.008024| train set 1.002x speedup, test set 2.131x speedup, val set 0.503x speedup, step: 2
JOB test speedup 1.7326135577352881
TPCH test speedup 5.551184357930597
TPCH skew test speedup 5.001761763075479
Epoch 2/300 |loss: 0.006321| train set 1.152x speedup, test set 5.002x speedup, val set 0.350x speedup, step: 3
JOB test speedup 1.62465794764206
TPCH test speedup 4.744311014252866
TPCH skew test speedup 4.3738160760558324
Epoch 3/300 |loss: 0.006240| train set 1.326x speedup, test set 4.374x speedup, val set 0.816x speedup, step: 4
JOB test speedup 1.0362155667296233
TPCH test speedup 4.969959427213186
TPCH skew test speedup 4.604208338341918
Epoch 4/300 |loss: 0.004250| train set 1.340x speedup, test set 4.604x speedup, val set 0.819x speedup, step: 5
JOB test speedup 1.0182722363561558
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 5/300 |loss: 0.003409| train set 1.529x speedup, test set 1.655x speedup, val set 0.746x speedup, step: 6
JOB test speedup 1.0159962486833491
TPCH test speedup 4.018452446033345
TPCH skew test speedup 3.771819310436001
Epoch 6/300 |loss: 0.003530| train set 1.496x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 7
JOB test speedup 1.8526765393839892
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 7/300 |loss: 0.003109| train set 1.500x speedup, test set 3.772x speedup, val set 0.622x speedup, step: 8
JOB test speedup 1.7629778468227353
TPCH test speedup 1.812283406744417
TPCH skew test speedup 1.7230259585614784
Epoch 8/300 |loss: 0.002833| train set 1.476x speedup, test set 1.723x speedup, val set 0.740x speedup, step: 9
JOB test speedup 1.8703282817853704
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 9/300 |loss: 0.002782| train set 1.581x speedup, test set 3.772x speedup, val set 0.878x speedup, step: 1
JOB test speedup 1.0784100210996945
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 10/300 |loss: 0.002442| train set 1.565x speedup, test set 3.772x speedup, val set 0.882x speedup, step: 2
JOB test speedup 1.0243259797847104
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 11/300 |loss: 0.002567| train set 1.773x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 3
JOB test speedup 1.000679639635711
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 12/300 |loss: 0.002438| train set 1.703x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.0615301361126162
TPCH test speedup 4.39596799391985
TPCH skew test speedup 4.155070818499354
Epoch 13/300 |loss: 0.002136| train set 1.766x speedup, test set 4.155x speedup, val set 0.877x speedup, step: 5
JOB test speedup 1.0232779173225857
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 14/300 |loss: 0.002174| train set 1.682x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 1
JOB test speedup 1.080819317936829
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 15/300 |loss: 0.002230| train set 1.776x speedup, test set 3.674x speedup, val set 0.887x speedup, step: 2
JOB test speedup 1.074539365765265
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.8025333752746966
Epoch 16/300 |loss: 0.002109| train set 1.740x speedup, test set 3.803x speedup, val set 0.879x speedup, step: 3
JOB test speedup 1.0701037109869733
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 17/300 |loss: 0.001624| train set 1.777x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.0780482947477552
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 18/300 |loss: 0.001663| train set 1.538x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.0486885405446282
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 19/300 |loss: 0.001641| train set 1.771x speedup, test set 3.882x speedup, val set 0.884x speedup, step: 1
JOB test speedup 1.0407332049745004
TPCH test speedup 4.165392040621194
TPCH skew test speedup 4.025897149096412
Epoch 20/300 |loss: 0.001373| train set 1.721x speedup, test set 4.026x speedup, val set 0.877x speedup, step: 2
JOB test speedup 1.0455566292593272
TPCH test speedup 1.8260209056446879
TPCH skew test speedup 1.7294071600181777
Epoch 21/300 |loss: 0.001400| train set 1.778x speedup, test set 1.729x speedup, val set 0.876x speedup, step: 3
JOB test speedup 1.7141215668031589
TPCH test speedup 2.414044674225864
TPCH skew test speedup 1.7741754860160275
Epoch 22/300 |loss: 0.001564| train set 1.701x speedup, test set 1.774x speedup, val set 0.620x speedup, step: 4
JOB test speedup 1.0112957071507531
TPCH test speedup 4.165392040621194
TPCH skew test speedup 3.4360816041105844
Epoch 23/300 |loss: 0.001416| train set 1.724x speedup, test set 3.436x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.7711814880432426
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 24/300 |loss: 0.001377| train set 1.721x speedup, test set 2.152x speedup, val set 0.877x speedup, step: 6
JOB test speedup 1.7265220582401641
TPCH test speedup 1.31806669520416
TPCH skew test speedup 1.2820540295576366
Epoch 25/300 |loss: 0.001293| train set 1.699x speedup, test set 1.282x speedup, val set 0.879x speedup, step: 7
JOB test speedup 1.658365366247665
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2820540295576366
Epoch 26/300 |loss: 0.001210| train set 1.772x speedup, test set 1.282x speedup, val set 0.875x speedup, step: 8
JOB test speedup 1.6578605120919903
TPCH test speedup 1.2976524238029814
TPCH skew test speedup 1.2441366306358768
Epoch 27/300 |loss: 0.001193| train set 1.743x speedup, test set 1.244x speedup, val set 0.887x speedup, step: 9
JOB test speedup 1.0441592715131347
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2820540295576366
Epoch 28/300 |loss: 0.001143| train set 1.782x speedup, test set 1.282x speedup, val set 0.885x speedup, step: 10
JOB test speedup 1.7056087225705197
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 29/300 |loss: 0.001352| train set 1.779x speedup, test set 1.282x speedup, val set 0.624x speedup, step: 11
JOB test speedup 1.7067700718619114
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 30/300 |loss: 0.001159| train set 1.772x speedup, test set 1.774x speedup, val set 0.877x speedup, step: 12
JOB test speedup 1.046866361152717
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 31/300 |loss: 0.001061| train set 1.768x speedup, test set 1.746x speedup, val set 0.887x speedup, step: 13
JOB test speedup 1.799040828110941
TPCH test speedup 1.788251335008736
TPCH skew test speedup 1.7023768154371746
Epoch 32/300 |loss: 0.001195| train set 1.744x speedup, test set 1.702x speedup, val set 0.878x speedup, step: 14
JOB test speedup 1.0394177045636213
TPCH test speedup 1.8415816248815253
TPCH skew test speedup 1.7741754860160275
Epoch 33/300 |loss: 0.000988| train set 1.773x speedup, test set 1.774x speedup, val set 0.887x speedup, step: 15
JOB test speedup 1.0692045659865494
TPCH test speedup 1.788251335008736
TPCH skew test speedup 1.7294071600181777
Epoch 34/300 |loss: 0.001137| train set 1.737x speedup, test set 1.729x speedup, val set 0.879x speedup, step: 16
JOB test speedup 1.0371572779803322
TPCH test speedup 1.8180617715235727
TPCH skew test speedup 1.7023768154371746
Epoch 35/300 |loss: 0.001068| train set 1.777x speedup, test set 1.702x speedup, val set 0.887x speedup, step: 17
JOB test speedup 1.063204031653268
TPCH test speedup 1.2905208051177346
TPCH skew test speedup 1.2441366306358768
Epoch 36/300 |loss: 0.000981| train set 1.783x speedup, test set 1.244x speedup, val set 0.888x speedup, step: 18
JOB test speedup 1.605321641136859
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 37/300 |loss: 0.001014| train set 1.749x speedup, test set 1.282x speedup, val set 0.887x speedup, step: 19
JOB test speedup 1.0373663147210639
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 38/300 |loss: 0.001008| train set 1.785x speedup, test set 1.774x speedup, val set 0.887x speedup, step: 20
JOB test speedup 1.691541684939259
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 39/300 |loss: 0.001050| train set 1.679x speedup, test set 1.746x speedup, val set 0.625x speedup, step: 21
JOB test speedup 1.7801724352025692
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 40/300 |loss: 0.000957| train set 1.727x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 22
JOB test speedup 0.9736506899760603
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 41/300 |loss: 0.000927| train set 1.782x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 23
JOB test speedup 0.9941982235083767
TPCH test speedup 1.2905208051177346
TPCH skew test speedup 1.2441366306358768
Epoch 42/300 |loss: 0.001016| train set 1.704x speedup, test set 1.244x speedup, val set 0.874x speedup, step: 24
JOB test speedup 1.0373422430929413
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 43/300 |loss: 0.001058| train set 1.723x speedup, test set 1.774x speedup, val set 0.885x speedup, step: 25
JOB test speedup 1.7929165554733044
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 44/300 |loss: 0.001019| train set 1.781x speedup, test set 1.774x speedup, val set 0.885x speedup, step: 1
JOB test speedup 0.990304712189002
TPCH test speedup 1.8415816248815253
TPCH skew test speedup 1.7741754860160275
Epoch 45/300 |loss: 0.000868| train set 1.743x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 2
JOB test speedup 1.0502176655270388
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7349617971873912
Epoch 46/300 |loss: 0.000992| train set 1.784x speedup, test set 1.735x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.8198511574283454
TPCH test speedup 2.549185989245852
TPCH skew test speedup 1.7741754860160275
Epoch 47/300 |loss: 0.000792| train set 1.728x speedup, test set 1.774x speedup, val set 0.885x speedup, step: 4
JOB test speedup 1.0271450637301076
TPCH test speedup 1.8415816248815253
TPCH skew test speedup 1.7741754860160275
Epoch 48/300 |loss: 0.000880| train set 1.751x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 5
JOB test speedup 1.5196862577737416
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 49/300 |loss: 0.000858| train set 1.745x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.0154035856707495
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 50/300 |loss: 0.000917| train set 1.753x speedup, test set 3.969x speedup, val set 0.887x speedup, step: 2
JOB test speedup 1.009777134573828
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 51/300 |loss: 0.000830| train set 1.781x speedup, test set 1.774x speedup, val set 0.885x speedup, step: 3
JOB test speedup 0.9280714312529814
TPCH test speedup 4.133349123103631
TPCH skew test speedup 3.514140200092274
Epoch 52/300 |loss: 0.000837| train set 1.740x speedup, test set 3.514x speedup, val set 0.888x speedup, step: 4
JOB test speedup 0.9658706951137264
TPCH test speedup 4.1734094891761115
TPCH skew test speedup 3.9690395449190925
Epoch 53/300 |loss: 0.000814| train set 1.779x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.9550640798583452
TPCH test speedup 1.8494914178844073
TPCH skew test speedup 1.7630453489720395
Epoch 54/300 |loss: 0.000789| train set 1.746x speedup, test set 1.763x speedup, val set 0.886x speedup, step: 6
JOB test speedup 1.5392778028371656
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 55/300 |loss: 0.000782| train set 1.729x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 7
JOB test speedup 1.290660117970752
TPCH test speedup 4.1734094891761115
TPCH skew test speedup 3.9690395449190925
Epoch 56/300 |loss: 0.000853| train set 1.769x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 8
JOB test speedup 0.9813468357806397
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 57/300 |loss: 0.000746| train set 1.786x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 9
JOB test speedup 0.9526630116043371
TPCH test speedup 1.8533498519727742
TPCH skew test speedup 1.7741754860160275
Epoch 58/300 |loss: 0.000717| train set 1.732x speedup, test set 1.774x speedup, val set 0.884x speedup, step: 10
JOB test speedup 0.8663986486316932
TPCH test speedup 1.8533498519727742
TPCH skew test speedup 1.7741754860160275
Epoch 59/300 |loss: 0.000817| train set 1.783x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.397431493879905
TPCH test speedup 4.1734094891761115
TPCH skew test speedup 3.9690395449190925
Epoch 60/300 |loss: 0.000893| train set 1.778x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 2
JOB test speedup 0.9661976247911367
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 61/300 |loss: 0.000744| train set 1.785x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.3292154332574777
TPCH test speedup 1.8494914178844073
TPCH skew test speedup 1.7630453489720395
Epoch 62/300 |loss: 0.000692| train set 1.754x speedup, test set 1.763x speedup, val set 0.888x speedup, step: 4
JOB test speedup 1.3331823482209149
TPCH test speedup 1.8494914178844073
TPCH skew test speedup 1.7630453489720395
Epoch 63/300 |loss: 0.000666| train set 1.782x speedup, test set 1.763x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.8643877932944317
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 64/300 |loss: 0.000728| train set 1.785x speedup, test set 1.763x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.289465347834587
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 65/300 |loss: 0.000704| train set 1.777x speedup, test set 1.763x speedup, val set 0.888x speedup, step: 2
JOB test speedup 1.2819349469891987
TPCH test speedup 3.9297850685758853
TPCH skew test speedup 3.7781388342387836
Epoch 66/300 |loss: 0.000768| train set 1.752x speedup, test set 3.778x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.0500930137101503
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 67/300 |loss: 0.000776| train set 1.772x speedup, test set 3.969x speedup, val set 0.887x speedup, step: 4
early stopping at epoch 67
Training per epoch cost 3.778 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
13, opt runtime 5.179s, model runtime 11.835s, pg runtime 10.685s, speedup 0.903x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.290s, pg runtime 4.730s, speedup 0.571x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 8.238s, pg runtime 8.605s, speedup 1.045x
26, opt runtime 0.965s, model runtime 1.128s, pg runtime 0.965s, speedup 0.856x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 64, train speedup 1.785, test speedup 0.864, val speedup 0.888
TPCH best validation speedup epoch: 64, train speedup 1.785, test speedup 1.824, val speedup 0.888
TPCH Skew best validation speedup epoch: 64, train speedup 1.785, test speedup 1.763, val speedup 0.888
execution cost 0:05:43.654700
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.801386, and there are 13720 training samples
in channel 9
JOB test speedup 0.9637818046530559
TPCH test speedup 2.546534276510287
TPCH skew test speedup 2.418676799347655
Epoch 0/300 |loss: 0.021988| train set 0.993x speedup, test set 2.419x speedup, val set 0.822x speedup, step: 1
JOB test speedup 1.6251200005628403
TPCH test speedup 2.348482875591847
TPCH skew test speedup 2.235587637408806
Epoch 1/300 |loss: 0.008010| train set 1.002x speedup, test set 2.236x speedup, val set 0.503x speedup, step: 2
JOB test speedup 1.7326135577352881
TPCH test speedup 5.551184357930597
TPCH skew test speedup 5.001761763075479
Epoch 2/300 |loss: 0.006319| train set 1.153x speedup, test set 5.002x speedup, val set 0.350x speedup, step: 3
JOB test speedup 1.7118690659397595
TPCH test speedup 4.090717363324118
TPCH skew test speedup 4.016321099727791
Epoch 3/300 |loss: 0.006260| train set 1.336x speedup, test set 4.016x speedup, val set 0.817x speedup, step: 4
JOB test speedup 1.6976521100619872
TPCH test speedup 3.9566773143798035
TPCH skew test speedup 3.960813139320862
Epoch 4/300 |loss: 0.004236| train set 1.256x speedup, test set 3.961x speedup, val set 0.988x speedup, step: 1
JOB test speedup 1.7227401651294074
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 5/300 |loss: 0.003381| train set 1.479x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.7129219944129974
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 6/300 |loss: 0.003530| train set 1.409x speedup, test set 3.772x speedup, val set 0.878x speedup, step: 3
JOB test speedup 1.7475727594138923
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 7/300 |loss: 0.003125| train set 1.498x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.7874053587596872
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 8/300 |loss: 0.002765| train set 1.515x speedup, test set 3.772x speedup, val set 0.878x speedup, step: 5
JOB test speedup 1.8593245094426307
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 9/300 |loss: 0.002716| train set 1.390x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 6
JOB test speedup 1.7350631125009406
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 10/300 |loss: 0.002442| train set 1.543x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 7
JOB test speedup 1.0199176580808869
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 11/300 |loss: 0.002575| train set 1.772x speedup, test set 3.461x speedup, val set 0.844x speedup, step: 8
JOB test speedup 1.0057736442560923
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 12/300 |loss: 0.002368| train set 1.514x speedup, test set 3.461x speedup, val set 0.879x speedup, step: 9
JOB test speedup 1.0168408911754132
TPCH test speedup 3.489768097427546
TPCH skew test speedup 3.4606368062539103
Epoch 13/300 |loss: 0.002091| train set 1.735x speedup, test set 3.461x speedup, val set 0.879x speedup, step: 10
JOB test speedup 1.0534554128571136
TPCH test speedup 3.9039761810928413
TPCH skew test speedup 3.720567723553482
Epoch 14/300 |loss: 0.002204| train set 1.498x speedup, test set 3.721x speedup, val set 0.879x speedup, step: 11
JOB test speedup 1.9181788858669218
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 15/300 |loss: 0.002091| train set 1.775x speedup, test set 3.461x speedup, val set 0.878x speedup, step: 12
JOB test speedup 1.0588270958702433
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 16/300 |loss: 0.002080| train set 1.739x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 13
JOB test speedup 1.697874736149796
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 17/300 |loss: 0.001655| train set 1.511x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 14
JOB test speedup 1.0820301636401723
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 18/300 |loss: 0.001817| train set 1.532x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 15
JOB test speedup 1.017422427026594
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 19/300 |loss: 0.001766| train set 1.744x speedup, test set 2.047x speedup, val set 0.879x speedup, step: 16
JOB test speedup 1.0293839543176007
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.110019589753068
Epoch 20/300 |loss: 0.001433| train set 1.726x speedup, test set 2.110x speedup, val set 0.877x speedup, step: 17
JOB test speedup 1.0200303131198034
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.110019589753068
Epoch 21/300 |loss: 0.001432| train set 1.777x speedup, test set 2.110x speedup, val set 0.880x speedup, step: 18
JOB test speedup 1.0160434964910146
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.110019589753068
Epoch 22/300 |loss: 0.001703| train set 1.700x speedup, test set 2.110x speedup, val set 0.879x speedup, step: 19
JOB test speedup 1.024606070879099
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 23/300 |loss: 0.001486| train set 1.771x speedup, test set 2.047x speedup, val set 0.877x speedup, step: 20
JOB test speedup 1.026802171712551
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 24/300 |loss: 0.001424| train set 1.731x speedup, test set 2.047x speedup, val set 0.876x speedup, step: 21
JOB test speedup 0.9797539321055562
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.110019589753068
Epoch 25/300 |loss: 0.001348| train set 1.752x speedup, test set 2.110x speedup, val set 0.880x speedup, step: 22
JOB test speedup 1.4902230334674036
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 26/300 |loss: 0.001208| train set 1.710x speedup, test set 2.047x speedup, val set 0.877x speedup, step: 23
JOB test speedup 1.0164686725781629
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 27/300 |loss: 0.001252| train set 1.701x speedup, test set 2.047x speedup, val set 0.880x speedup, step: 24
JOB test speedup 0.8693148043091831
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 28/300 |loss: 0.001225| train set 1.769x speedup, test set 2.152x speedup, val set 0.877x speedup, step: 25
JOB test speedup 1.5753595037155639
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 29/300 |loss: 0.001369| train set 1.734x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 26
JOB test speedup 1.0208696687706629
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 30/300 |loss: 0.001204| train set 1.775x speedup, test set 2.152x speedup, val set 0.877x speedup, step: 27
JOB test speedup 1.0683369183654743
TPCH test speedup 2.1603444819626434
TPCH skew test speedup 2.094295522028575
Epoch 31/300 |loss: 0.001099| train set 1.780x speedup, test set 2.094x speedup, val set 0.879x speedup, step: 28
JOB test speedup 1.6382737502321931
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 32/300 |loss: 0.001227| train set 1.620x speedup, test set 3.674x speedup, val set 0.877x speedup, step: 29
JOB test speedup 1.8439594001909714
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 33/300 |loss: 0.001020| train set 1.777x speedup, test set 4.026x speedup, val set 0.877x speedup, step: 30
JOB test speedup 0.9698033382357693
TPCH test speedup 2.1603444819626434
TPCH skew test speedup 2.094295522028575
Epoch 34/300 |loss: 0.001115| train set 1.740x speedup, test set 2.094x speedup, val set 0.876x speedup, step: 31
JOB test speedup 1.008711352149653
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 35/300 |loss: 0.001096| train set 1.730x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 32
JOB test speedup 1.0173364888822893
TPCH test speedup 4.651787788636341
TPCH skew test speedup 4.210214877822273
Epoch 36/300 |loss: 0.000984| train set 1.784x speedup, test set 4.210x speedup, val set 0.880x speedup, step: 33
JOB test speedup 1.662532565681578
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 37/300 |loss: 0.001129| train set 1.781x speedup, test set 4.026x speedup, val set 0.877x speedup, step: 34
JOB test speedup 0.9486205960548334
TPCH test speedup 4.727285393275864
TPCH skew test speedup 4.641246175688283
Epoch 38/300 |loss: 0.001058| train set 1.782x speedup, test set 4.641x speedup, val set 0.880x speedup, step: 35
JOB test speedup 1.8299562618513874
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 39/300 |loss: 0.001082| train set 1.784x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 36
JOB test speedup 0.9999103655902051
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 40/300 |loss: 0.001011| train set 1.726x speedup, test set 4.026x speedup, val set 0.877x speedup, step: 37
JOB test speedup 0.9075613929573285
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 41/300 |loss: 0.000966| train set 1.726x speedup, test set 3.969x speedup, val set 0.875x speedup, step: 38
JOB test speedup 0.9978541000273687
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 42/300 |loss: 0.000962| train set 1.772x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 39
JOB test speedup 1.0195723717466674
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.8294910619785383
Epoch 43/300 |loss: 0.001065| train set 1.749x speedup, test set 3.829x speedup, val set 0.880x speedup, step: 40
JOB test speedup 1.5475060147674384
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.8294910619785383
Epoch 44/300 |loss: 0.001093| train set 1.743x speedup, test set 3.829x speedup, val set 0.880x speedup, step: 41
JOB test speedup 1.0164754364629618
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 45/300 |loss: 0.000942| train set 1.781x speedup, test set 3.969x speedup, val set 0.876x speedup, step: 42
JOB test speedup 0.85539567712951
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.8916282433401594
Epoch 46/300 |loss: 0.000909| train set 1.747x speedup, test set 3.892x speedup, val set 0.877x speedup, step: 43
JOB test speedup 1.0146385057212615
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.8294910619785383
Epoch 47/300 |loss: 0.000817| train set 1.777x speedup, test set 3.829x speedup, val set 0.885x speedup, step: 44
JOB test speedup 1.0301137481003075
TPCH test speedup 4.0631913607441605
TPCH skew test speedup 3.9690395449190925
Epoch 48/300 |loss: 0.000884| train set 1.782x speedup, test set 3.969x speedup, val set 0.887x speedup, step: 45
JOB test speedup 1.5394099861674573
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 49/300 |loss: 0.000850| train set 1.776x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 46
JOB test speedup 1.0254750868235272
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 50/300 |loss: 0.000886| train set 1.785x speedup, test set 3.969x speedup, val set 0.887x speedup, step: 47
JOB test speedup 1.0126798788737112
TPCH test speedup 4.1734094891761115
TPCH skew test speedup 3.9690395449190925
Epoch 51/300 |loss: 0.000846| train set 1.743x speedup, test set 3.969x speedup, val set 0.885x speedup, step: 48
JOB test speedup 1.0111634019101123
TPCH test speedup 4.1734094891761115
TPCH skew test speedup 3.9916873883541197
Epoch 52/300 |loss: 0.000818| train set 1.785x speedup, test set 3.992x speedup, val set 0.877x speedup, step: 49
JOB test speedup 1.0222978693990492
TPCH test speedup 4.1734094891761115
TPCH skew test speedup 3.9690395449190925
Epoch 53/300 |loss: 0.000805| train set 1.782x speedup, test set 3.969x speedup, val set 0.883x speedup, step: 50
JOB test speedup 0.9548492278675682
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 54/300 |loss: 0.000805| train set 1.745x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 51
JOB test speedup 0.9454724285833749
TPCH test speedup 4.1734094891761115
TPCH skew test speedup 3.9690395449190925
Epoch 55/300 |loss: 0.000798| train set 1.781x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 52
JOB test speedup 1.7216543189512723
TPCH test speedup 1.8494914178844073
TPCH skew test speedup 1.7630453489720395
Epoch 56/300 |loss: 0.000876| train set 1.776x speedup, test set 1.763x speedup, val set 0.883x speedup, step: 53
JOB test speedup 1.0228579680119168
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 57/300 |loss: 0.000781| train set 1.782x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 54
JOB test speedup 0.9384797976045054
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 58/300 |loss: 0.000736| train set 1.771x speedup, test set 3.969x speedup, val set 0.885x speedup, step: 55
JOB test speedup 1.6527565954175207
TPCH test speedup 1.8377719847110976
TPCH skew test speedup 1.7630453489720395
Epoch 59/300 |loss: 0.000777| train set 1.781x speedup, test set 1.763x speedup, val set 0.877x speedup, step: 56
JOB test speedup 1.0441881221755183
TPCH test speedup 4.1734094891761115
TPCH skew test speedup 3.9690395449190925
Epoch 60/300 |loss: 0.000725| train set 1.787x speedup, test set 3.969x speedup, val set 0.883x speedup, step: 57
JOB test speedup 0.9747248149749778
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 61/300 |loss: 0.000705| train set 1.780x speedup, test set 1.763x speedup, val set 0.888x speedup, step: 58
JOB test speedup 0.9935552285231479
TPCH test speedup 4.1734094891761115
TPCH skew test speedup 3.9690395449190925
Epoch 62/300 |loss: 0.000737| train set 1.784x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 59
JOB test speedup 1.7053115848064293
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 63/300 |loss: 0.000747| train set 1.778x speedup, test set 1.763x speedup, val set 0.883x speedup, step: 60
JOB test speedup 1.0296326045117015
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 64/300 |loss: 0.000742| train set 1.787x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 61
JOB test speedup 1.0311449761509457
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 65/300 |loss: 0.000673| train set 1.781x speedup, test set 1.763x speedup, val set 0.880x speedup, step: 62
JOB test speedup 1.3067342864318405
TPCH test speedup 4.1734094891761115
TPCH skew test speedup 3.9690395449190925
Epoch 66/300 |loss: 0.000697| train set 1.730x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 63
JOB test speedup 0.842375758294742
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 67/300 |loss: 0.000704| train set 1.781x speedup, test set 1.763x speedup, val set 0.885x speedup, step: 64
JOB test speedup 1.2301846462116475
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 68/300 |loss: 0.000719| train set 1.729x speedup, test set 1.763x speedup, val set 1.256x speedup, step: 65
JOB test speedup 1.0006005133972635
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 69/300 |loss: 0.001171| train set 1.783x speedup, test set 1.763x speedup, val set 0.888x speedup, step: 66
JOB test speedup 0.9891249695480454
TPCH test speedup 1.8494914178844073
TPCH skew test speedup 1.7630453489720395
Epoch 70/300 |loss: 0.000841| train set 1.784x speedup, test set 1.763x speedup, val set 0.883x speedup, step: 67
early stopping at epoch 70
Training per epoch cost 3.778 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.369s, pg runtime 0.206s, speedup 0.560x
02, opt runtime 4.223s, model runtime 25.073s, pg runtime 18.741s, speedup 0.747x
03, opt runtime 1.763s, model runtime 2.010s, pg runtime 1.763s, speedup 0.877x
04, opt runtime 1.386s, model runtime 1.551s, pg runtime 1.386s, speedup 0.894x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 6.220s, pg runtime 5.879s, speedup 0.945x
08, opt runtime 1.737s, model runtime 6.267s, pg runtime 5.994s, speedup 0.957x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.393s, pg runtime 0.393s, speedup 1.000x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.312s, pg runtime 6.089s, speedup 0.833x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
19, opt runtime 0.379s, model runtime 0.826s, pg runtime 3.645s, speedup 4.416x
20, opt runtime 0.626s, model runtime 1.091s, pg runtime 2.558s, speedup 2.346x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 16.268s, pg runtime 432.766s, speedup 26.603x
32, opt runtime 15.120s, model runtime 16.499s, pg runtime 566.078s, speedup 34.310x
33, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
34, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
35, opt runtime 16.528s, model runtime 16.528s, pg runtime 620.762s, speedup 37.558x
36, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
37, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
38, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
39, opt runtime 16.770s, model runtime 16.770s, pg runtime 594.754s, speedup 35.464x
40, opt runtime 16.305s, model runtime 16.305s, pg runtime 436.168s, speedup 26.751x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 16.761s, pg runtime 602.586s, speedup 35.953x
32, opt runtime 16.542s, model runtime 16.542s, pg runtime 461.957s, speedup 27.927x
33, opt runtime 16.136s, model runtime 16.358s, pg runtime 410.283s, speedup 25.082x
34, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
35, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
38, opt runtime 16.194s, model runtime 16.194s, pg runtime 439.255s, speedup 27.124x
39, opt runtime 16.149s, model runtime 16.149s, pg runtime 423.122s, speedup 26.201x
40, opt runtime 13.751s, model runtime 16.582s, pg runtime 434.625s, speedup 26.210x
====================
JOB best validation speedup epoch: 4, train speedup 1.256, test speedup 1.698, val speedup 0.988
TPCH best validation speedup epoch: 4, train speedup 1.256, test speedup 3.957, val speedup 0.988
TPCH Skew best validation speedup epoch: 4, train speedup 1.256, test speedup 3.961, val speedup 0.988
execution cost 0:05:56.183416
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.747835, and there are 13720 training samples
in channel 9
JOB test speedup 0.9637818046530559
TPCH test speedup 2.546534276510287
TPCH skew test speedup 2.418676799347655
Epoch 0/300 |loss: 0.021988| train set 0.993x speedup, test set 2.419x speedup, val set 0.822x speedup, step: 1
JOB test speedup 1.6251200005628403
TPCH test speedup 2.348482875591847
TPCH skew test speedup 2.235587637408806
Epoch 1/300 |loss: 0.008010| train set 1.002x speedup, test set 2.236x speedup, val set 0.503x speedup, step: 2
JOB test speedup 1.74214968120573
TPCH test speedup 5.551184357930597
TPCH skew test speedup 5.001761763075479
Epoch 2/300 |loss: 0.006313| train set 1.168x speedup, test set 5.002x speedup, val set 0.350x speedup, step: 3
JOB test speedup 1.6830208781080638
TPCH test speedup 4.744311014252866
TPCH skew test speedup 4.3738160760558324
Epoch 3/300 |loss: 0.006325| train set 1.504x speedup, test set 4.374x speedup, val set 0.816x speedup, step: 4
JOB test speedup 1.0047427788799501
TPCH test speedup 4.969959427213186
TPCH skew test speedup 4.505476110849727
Epoch 4/300 |loss: 0.004254| train set 1.258x speedup, test set 4.505x speedup, val set 0.816x speedup, step: 5
JOB test speedup 1.7008833743928282
TPCH test speedup 3.568115912848524
TPCH skew test speedup 3.5029358644099657
Epoch 5/300 |loss: 0.003393| train set 1.530x speedup, test set 3.503x speedup, val set 0.740x speedup, step: 6
JOB test speedup 1.7168256846255034
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 6/300 |loss: 0.003564| train set 1.489x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 7
JOB test speedup 1.7310359627362797
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 7/300 |loss: 0.003175| train set 1.513x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 8
JOB test speedup 1.0212621025025113
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 8/300 |loss: 0.002784| train set 1.757x speedup, test set 3.772x speedup, val set 0.878x speedup, step: 9
JOB test speedup 1.782800238609498
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 9/300 |loss: 0.002787| train set 1.490x speedup, test set 3.772x speedup, val set 0.839x speedup, step: 1
JOB test speedup 1.7783499698709766
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 10/300 |loss: 0.002464| train set 1.561x speedup, test set 3.772x speedup, val set 0.854x speedup, step: 2
JOB test speedup 1.0130845893982683
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 11/300 |loss: 0.002666| train set 1.715x speedup, test set 3.461x speedup, val set 0.879x speedup, step: 3
JOB test speedup 1.027182340327392
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 12/300 |loss: 0.002445| train set 1.511x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.0131505376493097
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 13/300 |loss: 0.002182| train set 1.769x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.0396475862659522
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 14/300 |loss: 0.002300| train set 1.726x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 1
JOB test speedup 1.866618213252456
TPCH test speedup 4.465906145348936
TPCH skew test speedup 4.156632264342648
Epoch 15/300 |loss: 0.002375| train set 1.759x speedup, test set 4.157x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.990121020578506
TPCH test speedup 4.101327992648793
TPCH skew test speedup 3.735211346312093
Epoch 16/300 |loss: 0.002214| train set 1.734x speedup, test set 3.735x speedup, val set 0.879x speedup, step: 3
JOB test speedup 1.7907677310083772
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 17/300 |loss: 0.001729| train set 1.536x speedup, test set 3.772x speedup, val set 0.880x speedup, step: 4
JOB test speedup 1.043702205899064
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.110019589753068
Epoch 18/300 |loss: 0.001836| train set 1.516x speedup, test set 2.110x speedup, val set 0.880x speedup, step: 5
JOB test speedup 1.0283932947933438
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 19/300 |loss: 0.001890| train set 1.778x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.0217776198291886
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.110019589753068
Epoch 20/300 |loss: 0.001482| train set 1.771x speedup, test set 2.110x speedup, val set 0.879x speedup, step: 2
JOB test speedup 1.881532587326201
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 21/300 |loss: 0.001454| train set 1.758x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.0510340379305319
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 22/300 |loss: 0.001556| train set 1.777x speedup, test set 3.882x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.069243243221185
TPCH test speedup 3.739826979020623
TPCH skew test speedup 2.642887051826786
Epoch 23/300 |loss: 0.001365| train set 1.774x speedup, test set 2.643x speedup, val set 0.880x speedup, step: 5
JOB test speedup 1.0144690646211132
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 24/300 |loss: 0.001487| train set 1.730x speedup, test set 2.152x speedup, val set 0.879x speedup, step: 6
JOB test speedup 1.0351016194094873
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 25/300 |loss: 0.001382| train set 1.752x speedup, test set 2.047x speedup, val set 0.877x speedup, step: 7
JOB test speedup 1.0449960975827954
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 26/300 |loss: 0.001189| train set 1.752x speedup, test set 4.026x speedup, val set 0.879x speedup, step: 8
JOB test speedup 1.0527544005201706
TPCH test speedup 2.174934178487136
TPCH skew test speedup 2.125210239615229
Epoch 27/300 |loss: 0.001250| train set 1.774x speedup, test set 2.125x speedup, val set 0.887x speedup, step: 9
JOB test speedup 0.8732256013701821
TPCH test speedup 3.739826979020623
TPCH skew test speedup 2.642887051826786
Epoch 28/300 |loss: 0.001245| train set 1.778x speedup, test set 2.643x speedup, val set 0.879x speedup, step: 10
JOB test speedup 1.8853120722113155
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 29/300 |loss: 0.001328| train set 1.774x speedup, test set 2.152x speedup, val set 0.879x speedup, step: 11
JOB test speedup 1.0195391213734653
TPCH test speedup 2.144990321000395
TPCH skew test speedup 2.08620709801763
Epoch 30/300 |loss: 0.001117| train set 1.338x speedup, test set 2.086x speedup, val set 0.879x speedup, step: 12
JOB test speedup 1.833392030213262
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 31/300 |loss: 0.001065| train set 1.784x speedup, test set 2.152x speedup, val set 0.888x speedup, step: 13
JOB test speedup 1.0539241693143906
TPCH test speedup 4.173822227201868
TPCH skew test speedup 2.641782677677499
Epoch 32/300 |loss: 0.001161| train set 1.743x speedup, test set 2.642x speedup, val set 0.888x speedup, step: 14
JOB test speedup 1.742589529088824
TPCH test speedup 4.930703882291694
TPCH skew test speedup 4.719182848846065
Epoch 33/300 |loss: 0.001028| train set 1.781x speedup, test set 4.719x speedup, val set 0.881x speedup, step: 15
JOB test speedup 1.0434687781227616
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 34/300 |loss: 0.001048| train set 1.777x speedup, test set 2.152x speedup, val set 0.882x speedup, step: 1
JOB test speedup 1.8062607722426618
TPCH test speedup 4.752575004873476
TPCH skew test speedup 4.719182848846065
Epoch 35/300 |loss: 0.001013| train set 1.779x speedup, test set 4.719x speedup, val set 0.887x speedup, step: 2
JOB test speedup 1.8472928745067325
TPCH test speedup 4.930703882291694
TPCH skew test speedup 4.719182848846065
Epoch 36/300 |loss: 0.001034| train set 1.786x speedup, test set 4.719x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.7465933584230606
TPCH test speedup 4.394676738194301
TPCH skew test speedup 2.7476940232320914
Epoch 37/300 |loss: 0.001060| train set 1.778x speedup, test set 2.748x speedup, val set 0.882x speedup, step: 4
JOB test speedup 1.0329253322387875
TPCH test speedup 1.9710814605187794
TPCH skew test speedup 1.8969883925126718
Epoch 38/300 |loss: 0.000985| train set 1.783x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 5
JOB test speedup 1.8191395873526965
TPCH test speedup 4.495336163154936
TPCH skew test speedup 4.415170442592395
Epoch 39/300 |loss: 0.000997| train set 1.776x speedup, test set 4.415x speedup, val set 0.880x speedup, step: 6
JOB test speedup 1.8243170083142883
TPCH test speedup 4.930703882291694
TPCH skew test speedup 4.719182848846065
Epoch 40/300 |loss: 0.000945| train set 1.779x speedup, test set 4.719x speedup, val set 0.888x speedup, step: 7
JOB test speedup 1.339673001426037
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 41/300 |loss: 0.000879| train set 1.747x speedup, test set 1.282x speedup, val set 0.880x speedup, step: 8
JOB test speedup 1.798958563239183
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 42/300 |loss: 0.000951| train set 1.780x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 9
JOB test speedup 1.040297019536333
TPCH test speedup 4.848278841492772
TPCH skew test speedup 4.719182848846065
Epoch 43/300 |loss: 0.000956| train set 1.786x speedup, test set 4.719x speedup, val set 0.880x speedup, step: 10
JOB test speedup 1.047388753801945
TPCH test speedup 4.930703882291694
TPCH skew test speedup 4.719182848846065
Epoch 44/300 |loss: 0.001003| train set 1.779x speedup, test set 4.719x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.9875625179608243
TPCH test speedup 2.185266886144457
TPCH skew test speedup 2.1517034114149443
Epoch 45/300 |loss: 0.001068| train set 1.779x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.9699733697276507
TPCH test speedup 1.9710814605187794
TPCH skew test speedup 1.8969883925126718
Epoch 46/300 |loss: 0.000969| train set 1.780x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 13
JOB test speedup 1.3531666406688754
TPCH test speedup 4.930703882291694
TPCH skew test speedup 4.719182848846065
Epoch 47/300 |loss: 0.000798| train set 1.780x speedup, test set 4.719x speedup, val set 0.888x speedup, step: 14
JOB test speedup 1.7719148907032753
TPCH test speedup 4.930703882291694
TPCH skew test speedup 4.719182848846065
Epoch 48/300 |loss: 0.000879| train set 1.761x speedup, test set 4.719x speedup, val set 0.888x speedup, step: 15
JOB test speedup 1.0140421463463833
TPCH test speedup 4.930703882291694
TPCH skew test speedup 4.719182848846065
Epoch 49/300 |loss: 0.000845| train set 1.771x speedup, test set 4.719x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.0583486139750549
TPCH test speedup 4.752575004873476
TPCH skew test speedup 4.719182848846065
Epoch 50/300 |loss: 0.000800| train set 1.783x speedup, test set 4.719x speedup, val set 0.883x speedup, step: 2
JOB test speedup 1.8248439775276448
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 51/300 |loss: 0.000773| train set 1.726x speedup, test set 1.897x speedup, val set 0.882x speedup, step: 3
JOB test speedup 1.0487425632776137
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 52/300 |loss: 0.000784| train set 1.786x speedup, test set 1.897x speedup, val set 0.882x speedup, step: 4
JOB test speedup 1.342704885796159
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 53/300 |loss: 0.000902| train set 1.780x speedup, test set 1.897x speedup, val set 0.882x speedup, step: 5
JOB test speedup 1.0465698381886084
TPCH test speedup 1.9550755312831145
TPCH skew test speedup 1.8969883925126718
Epoch 54/300 |loss: 0.000750| train set 1.782x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 6
JOB test speedup 1.7461207189247816
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 55/300 |loss: 0.000796| train set 1.787x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 7
JOB test speedup 1.8212518684037258
TPCH test speedup 1.9550755312831145
TPCH skew test speedup 1.8969883925126718
Epoch 56/300 |loss: 0.000814| train set 1.788x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 8
JOB test speedup 1.0175695370095335
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 57/300 |loss: 0.000707| train set 1.782x speedup, test set 1.897x speedup, val set 0.882x speedup, step: 9
JOB test speedup 1.6666867708922821
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 58/300 |loss: 0.000722| train set 1.713x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 10
JOB test speedup 1.0074376631130397
TPCH test speedup 1.9683441967354822
TPCH skew test speedup 1.8969883925126718
Epoch 59/300 |loss: 0.000820| train set 1.780x speedup, test set 1.897x speedup, val set 0.882x speedup, step: 11
JOB test speedup 1.8169291775050467
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 60/300 |loss: 0.000676| train set 1.785x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 12
JOB test speedup 1.019484716982259
TPCH test speedup 1.9550755312831145
TPCH skew test speedup 1.8969883925126718
Epoch 61/300 |loss: 0.000640| train set 1.781x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 13
JOB test speedup 1.6528050154071214
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 62/300 |loss: 0.000649| train set 1.756x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 14
JOB test speedup 1.7189127808334976
TPCH test speedup 1.9550755312831145
TPCH skew test speedup 1.8969883925126718
Epoch 63/300 |loss: 0.000648| train set 1.781x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 15
JOB test speedup 1.72662798401717
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 64/300 |loss: 0.000710| train set 1.787x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 16
JOB test speedup 0.8384594351834885
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 65/300 |loss: 0.000647| train set 1.779x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 17
JOB test speedup 1.6847905602994322
TPCH test speedup 1.9845690221075818
TPCH skew test speedup 1.8969883925126718
Epoch 66/300 |loss: 0.000637| train set 1.723x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 18
JOB test speedup 1.730573113902908
TPCH test speedup 1.921117684923769
TPCH skew test speedup 1.8650866818969778
Epoch 67/300 |loss: 0.000719| train set 1.779x speedup, test set 1.865x speedup, val set 0.888x speedup, step: 19
JOB test speedup 0.8184487187968718
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 68/300 |loss: 0.000818| train set 1.673x speedup, test set 1.282x speedup, val set 1.256x speedup, step: 20
JOB test speedup 0.8329539564259908
TPCH test speedup 1.9683441967354822
TPCH skew test speedup 1.8969883925126718
Epoch 69/300 |loss: 0.001021| train set 1.777x speedup, test set 1.897x speedup, val set 0.888x speedup, step: 21
early stopping at epoch 69
Training per epoch cost 3.818 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
10, opt runtime 3.248s, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.290s, pg runtime 4.730s, speedup 0.571x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 1.102s, pg runtime 0.434s, speedup 0.393x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.818s, pg runtime 8.279s, speedup 0.765x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 8.238s, pg runtime 8.605s, speedup 1.045x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 125.113s, pg runtime 148.707s, speedup 1.189x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 119.421s, pg runtime 140.742s, speedup 1.179x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 16.268s, pg runtime 432.766s, speedup 26.603x
32, opt runtime 15.120s, model runtime 16.499s, pg runtime 566.078s, speedup 34.310x
33, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
34, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
35, opt runtime 16.528s, model runtime 16.528s, pg runtime 620.762s, speedup 37.558x
36, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
37, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
38, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
39, opt runtime 16.770s, model runtime 16.770s, pg runtime 594.754s, speedup 35.464x
40, opt runtime 16.305s, model runtime 16.305s, pg runtime 436.168s, speedup 26.751x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 16.761s, pg runtime 602.586s, speedup 35.953x
32, opt runtime 16.542s, model runtime 16.542s, pg runtime 461.957s, speedup 27.927x
33, opt runtime 16.136s, model runtime 16.358s, pg runtime 410.283s, speedup 25.082x
34, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
35, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
38, opt runtime 16.194s, model runtime 16.194s, pg runtime 439.255s, speedup 27.124x
39, opt runtime 16.149s, model runtime 16.149s, pg runtime 423.122s, speedup 26.201x
40, opt runtime 13.751s, model runtime 16.582s, pg runtime 434.625s, speedup 26.210x
====================
JOB best validation speedup epoch: 49, train speedup 1.771, test speedup 1.014, val speedup 0.888
TPCH best validation speedup epoch: 49, train speedup 1.771, test speedup 4.931, val speedup 0.888
TPCH Skew best validation speedup epoch: 49, train speedup 1.771, test speedup 4.719, val speedup 0.888
execution cost 0:05:56.231216
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.783575, and there are 13720 training samples
in channel 9
JOB test speedup 0.9637818046530559
TPCH test speedup 2.546534276510287
TPCH skew test speedup 2.418676799347655
Epoch 0/300 |loss: 0.021988| train set 0.993x speedup, test set 2.419x speedup, val set 0.822x speedup, step: 1
JOB test speedup 1.6251200005628403
TPCH test speedup 2.348482875591847
TPCH skew test speedup 2.235587637408806
Epoch 1/300 |loss: 0.008010| train set 1.002x speedup, test set 2.236x speedup, val set 0.503x speedup, step: 2
JOB test speedup 1.7181798442002105
TPCH test speedup 5.551184357930597
TPCH skew test speedup 5.001761763075479
Epoch 2/300 |loss: 0.006322| train set 1.168x speedup, test set 5.002x speedup, val set 0.350x speedup, step: 3
JOB test speedup 1.7102254891367565
TPCH test speedup 4.744311014252866
TPCH skew test speedup 4.3738160760558324
Epoch 3/300 |loss: 0.006335| train set 1.490x speedup, test set 4.374x speedup, val set 0.816x speedup, step: 4
JOB test speedup 1.0052021437602903
TPCH test speedup 4.650355128212111
TPCH skew test speedup 4.3738160760558324
Epoch 4/300 |loss: 0.004219| train set 1.259x speedup, test set 4.374x speedup, val set 0.816x speedup, step: 5
JOB test speedup 1.7772095089103634
TPCH test speedup 3.9566773143798035
TPCH skew test speedup 3.960813139320862
Epoch 5/300 |loss: 0.003384| train set 1.534x speedup, test set 3.961x speedup, val set 0.879x speedup, step: 6
JOB test speedup 1.6872532909506115
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 6/300 |loss: 0.003467| train set 1.465x speedup, test set 3.772x speedup, val set 0.988x speedup, step: 7
JOB test speedup 1.7758645318393542
TPCH test speedup 3.8839263654485845
TPCH skew test speedup 3.674258564369058
Epoch 7/300 |loss: 0.003083| train set 1.302x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 8
JOB test speedup 1.0510921153752475
TPCH test speedup 4.088572251619758
TPCH skew test speedup 4.151441824319933
Epoch 8/300 |loss: 0.002786| train set 1.531x speedup, test set 4.151x speedup, val set 0.879x speedup, step: 9
JOB test speedup 1.8500885365653688
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 9/300 |loss: 0.002763| train set 1.494x speedup, test set 3.674x speedup, val set 0.878x speedup, step: 1
JOB test speedup 1.0269707381810322
TPCH test speedup 3.770166209212841
TPCH skew test speedup 3.771819310436001
Epoch 10/300 |loss: 0.002399| train set 1.530x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 2
JOB test speedup 1.0167039236292434
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 11/300 |loss: 0.002641| train set 1.771x speedup, test set 3.461x speedup, val set 0.879x speedup, step: 3
JOB test speedup 1.0077925908639755
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 12/300 |loss: 0.002388| train set 1.500x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.010427966259148
TPCH test speedup 3.8794917544958873
TPCH skew test speedup 3.8839447824563007
Epoch 13/300 |loss: 0.002148| train set 1.687x speedup, test set 3.884x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.0343727937127674
TPCH test speedup 2.1441348041905868
TPCH skew test speedup 2.0769282875736588
Epoch 14/300 |loss: 0.002151| train set 1.513x speedup, test set 2.077x speedup, val set 0.879x speedup, step: 1
JOB test speedup 1.025843566872447
TPCH test speedup 4.544096487380107
TPCH skew test speedup 4.280270779200744
Epoch 15/300 |loss: 0.002359| train set 1.734x speedup, test set 4.280x speedup, val set 0.879x speedup, step: 2
JOB test speedup 1.0351540863090232
TPCH test speedup 4.535696451198608
TPCH skew test speedup 4.305048177133685
Epoch 16/300 |loss: 0.002145| train set 1.732x speedup, test set 4.305x speedup, val set 0.879x speedup, step: 3
JOB test speedup 1.8303209165791436
TPCH test speedup 2.113508688528257
TPCH skew test speedup 2.0506036833067065
Epoch 17/300 |loss: 0.001646| train set 1.538x speedup, test set 2.051x speedup, val set 0.879x speedup, step: 4
JOB test speedup 0.9966762583163983
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 18/300 |loss: 0.001656| train set 1.535x speedup, test set 2.047x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.0468148427628663
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 19/300 |loss: 0.001719| train set 1.750x speedup, test set 2.047x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8925237179816069
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.072955396565392
Epoch 20/300 |loss: 0.001441| train set 1.722x speedup, test set 2.073x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.0730460098938799
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 21/300 |loss: 0.001421| train set 1.774x speedup, test set 2.047x speedup, val set 0.887x speedup, step: 3
JOB test speedup 1.8336829895526154
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 22/300 |loss: 0.001535| train set 1.704x speedup, test set 2.086x speedup, val set 0.887x speedup, step: 4
JOB test speedup 1.047392283752145
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 23/300 |loss: 0.001499| train set 1.778x speedup, test set 2.047x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.9321437971660345
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 24/300 |loss: 0.001362| train set 1.726x speedup, test set 2.047x speedup, val set 0.887x speedup, step: 6
JOB test speedup 1.9209800769576888
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 25/300 |loss: 0.001311| train set 1.781x speedup, test set 2.086x speedup, val set 0.879x speedup, step: 7
JOB test speedup 1.8011257797889118
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 26/300 |loss: 0.001120| train set 1.778x speedup, test set 2.086x speedup, val set 0.887x speedup, step: 8
JOB test speedup 1.9478944183447982
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 27/300 |loss: 0.001160| train set 1.708x speedup, test set 2.047x speedup, val set 0.887x speedup, step: 9
JOB test speedup 0.8886144668096229
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 28/300 |loss: 0.001129| train set 1.780x speedup, test set 2.086x speedup, val set 0.876x speedup, step: 10
JOB test speedup 1.7107687131365177
TPCH test speedup 2.1683184869782197
TPCH skew test speedup 2.1302400479117
Epoch 29/300 |loss: 0.001237| train set 1.751x speedup, test set 2.130x speedup, val set 0.887x speedup, step: 11
JOB test speedup 1.0763805571067704
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.08620709801763
Epoch 30/300 |loss: 0.001076| train set 1.684x speedup, test set 2.086x speedup, val set 0.887x speedup, step: 12
JOB test speedup 1.8015479348353678
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 31/300 |loss: 0.001092| train set 1.773x speedup, test set 2.047x speedup, val set 0.887x speedup, step: 13
JOB test speedup 1.8817064601540963
TPCH test speedup 3.0850331090697614
TPCH skew test speedup 2.3340393490014577
Epoch 32/300 |loss: 0.001110| train set 1.776x speedup, test set 2.334x speedup, val set 0.887x speedup, step: 14
JOB test speedup 1.0672535174923108
TPCH test speedup 4.405871158153109
TPCH skew test speedup 4.329063064702793
Epoch 33/300 |loss: 0.000924| train set 1.751x speedup, test set 4.329x speedup, val set 0.879x speedup, step: 15
JOB test speedup 1.7691489697646041
TPCH test speedup 4.405871158153109
TPCH skew test speedup 4.329063064702793
Epoch 34/300 |loss: 0.000999| train set 1.740x speedup, test set 4.329x speedup, val set 0.887x speedup, step: 16
JOB test speedup 1.8461783132666116
TPCH test speedup 2.1603444819626434
TPCH skew test speedup 2.1353543503212156
Epoch 35/300 |loss: 0.000941| train set 1.787x speedup, test set 2.135x speedup, val set 0.887x speedup, step: 17
JOB test speedup 1.8479789186604831
TPCH test speedup 4.628451308469881
TPCH skew test speedup 4.546189822648597
Epoch 36/300 |loss: 0.000958| train set 1.737x speedup, test set 4.546x speedup, val set 0.888x speedup, step: 18
JOB test speedup 1.7706023578357744
TPCH test speedup 4.628451308469881
TPCH skew test speedup 4.364037516418841
Epoch 37/300 |loss: 0.000935| train set 1.780x speedup, test set 4.364x speedup, val set 0.887x speedup, step: 19
JOB test speedup 1.9515113845850125
TPCH test speedup 4.628451308469881
TPCH skew test speedup 4.546189822648597
Epoch 38/300 |loss: 0.000990| train set 1.779x speedup, test set 4.546x speedup, val set 0.888x speedup, step: 20
JOB test speedup 1.8544003068320514
TPCH test speedup 4.405871158153109
TPCH skew test speedup 4.163577836211726
Epoch 39/300 |loss: 0.000992| train set 1.786x speedup, test set 4.164x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.7595135054704316
TPCH test speedup 4.192687309031296
TPCH skew test speedup 3.9690395449190925
Epoch 40/300 |loss: 0.000882| train set 1.726x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 2
JOB test speedup 1.6748420339713792
TPCH test speedup 2.1603444819626434
TPCH skew test speedup 2.1353543503212156
Epoch 41/300 |loss: 0.000872| train set 1.746x speedup, test set 2.135x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.8426032358735498
TPCH test speedup 4.628451308469881
TPCH skew test speedup 4.546189822648597
Epoch 42/300 |loss: 0.000959| train set 1.776x speedup, test set 4.546x speedup, val set 0.888x speedup, step: 4
JOB test speedup 1.7533089382379796
TPCH test speedup 4.628451308469881
TPCH skew test speedup 4.546189822648597
Epoch 43/300 |loss: 0.000971| train set 1.780x speedup, test set 4.546x speedup, val set 0.887x speedup, step: 5
JOB test speedup 1.8906423689880398
TPCH test speedup 4.628451308469881
TPCH skew test speedup 4.546189822648597
Epoch 44/300 |loss: 0.001018| train set 1.738x speedup, test set 4.546x speedup, val set 0.888x speedup, step: 1
early stopping at epoch 44
Training per epoch cost 3.800 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.080s, pg runtime 6.143s, speedup 1.010x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.396s, pg runtime 8.605s, speedup 1.025x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 22.360s, pg runtime 432.766s, speedup 19.354x
32, opt runtime 15.120s, model runtime 21.640s, pg runtime 566.078s, speedup 26.159x
33, opt runtime 16.639s, model runtime 21.855s, pg runtime 462.544s, speedup 21.165x
34, opt runtime 16.280s, model runtime 23.740s, pg runtime 634.990s, speedup 26.748x
35, opt runtime 16.528s, model runtime 24.098s, pg runtime 620.762s, speedup 25.760x
36, opt runtime 18.690s, model runtime 23.967s, pg runtime 651.942s, speedup 27.202x
37, opt runtime 16.438s, model runtime 21.989s, pg runtime 546.887s, speedup 24.871x
38, opt runtime 16.138s, model runtime 22.393s, pg runtime 501.793s, speedup 22.409x
39, opt runtime 16.770s, model runtime 23.717s, pg runtime 594.754s, speedup 25.077x
40, opt runtime 16.305s, model runtime 21.490s, pg runtime 436.168s, speedup 20.296x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 23.924s, pg runtime 602.586s, speedup 25.187x
32, opt runtime 16.542s, model runtime 21.754s, pg runtime 461.957s, speedup 21.235x
33, opt runtime 16.136s, model runtime 21.514s, pg runtime 410.283s, speedup 19.070x
34, opt runtime 14.422s, model runtime 21.896s, pg runtime 497.542s, speedup 22.723x
35, opt runtime 15.980s, model runtime 21.470s, pg runtime 504.239s, speedup 23.486x
36, opt runtime 16.482s, model runtime 25.428s, pg runtime 622.915s, speedup 24.497x
37, opt runtime 16.301s, model runtime 22.800s, pg runtime 646.719s, speedup 28.365x
38, opt runtime 16.194s, model runtime 21.815s, pg runtime 439.255s, speedup 20.136x
39, opt runtime 16.149s, model runtime 21.405s, pg runtime 423.122s, speedup 19.768x
40, opt runtime 13.751s, model runtime 21.917s, pg runtime 434.625s, speedup 19.831x
====================
JOB best validation speedup epoch: 44, train speedup 1.738, test speedup 1.891, val speedup 0.888
TPCH best validation speedup epoch: 44, train speedup 1.738, test speedup 4.628, val speedup 0.888
TPCH Skew best validation speedup epoch: 44, train speedup 1.738, test speedup 4.546, val speedup 0.888
execution cost 0:03:51.539521
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.820221, and there are 13720 training samples
in channel 9
JOB test speedup 0.9637818046530559
TPCH test speedup 2.546534276510287
TPCH skew test speedup 2.418676799347655
Epoch 0/300 |loss: 0.021988| train set 0.993x speedup, test set 2.419x speedup, val set 0.822x speedup, step: 1
JOB test speedup 0.985628684132843
TPCH test speedup 2.348482875591847
TPCH skew test speedup 2.235587637408806
Epoch 1/300 |loss: 0.008024| train set 1.002x speedup, test set 2.236x speedup, val set 0.503x speedup, step: 2
JOB test speedup 1.82334146375226
TPCH test speedup 7.058001467050093
TPCH skew test speedup 6.303900972763916
Epoch 2/300 |loss: 0.006332| train set 1.178x speedup, test set 6.304x speedup, val set 0.350x speedup, step: 3
JOB test speedup 1.7124870806912416
TPCH test speedup 4.744311014252866
TPCH skew test speedup 4.3738160760558324
Epoch 3/300 |loss: 0.006298| train set 1.503x speedup, test set 4.374x speedup, val set 0.817x speedup, step: 4
JOB test speedup 1.704543077112897
TPCH test speedup 4.814582384560144
TPCH skew test speedup 4.3738160760558324
Epoch 4/300 |loss: 0.004278| train set 1.335x speedup, test set 4.374x speedup, val set 0.816x speedup, step: 5
JOB test speedup 1.080516012743877
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 5/300 |loss: 0.003426| train set 1.533x speedup, test set 1.655x speedup, val set 0.744x speedup, step: 6
JOB test speedup 0.9825460237194322
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 6/300 |loss: 0.003496| train set 1.401x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 7
JOB test speedup 1.7716689946101496
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 7/300 |loss: 0.003155| train set 1.330x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 8
JOB test speedup 1.771535178226473
TPCH test speedup 1.812283406744417
TPCH skew test speedup 1.7230259585614784
Epoch 8/300 |loss: 0.002747| train set 1.558x speedup, test set 1.723x speedup, val set 0.878x speedup, step: 9
JOB test speedup 1.2988132868280888
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 9/300 |loss: 0.002746| train set 1.386x speedup, test set 3.772x speedup, val set 0.878x speedup, step: 1
JOB test speedup 0.9824111318532981
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 10/300 |loss: 0.002488| train set 1.560x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 2
JOB test speedup 1.0292987472020483
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 11/300 |loss: 0.002662| train set 1.730x speedup, test set 3.882x speedup, val set 0.879x speedup, step: 3
JOB test speedup 0.8302772849119733
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 12/300 |loss: 0.002458| train set 1.512x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 4
JOB test speedup 0.8760973712246428
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 13/300 |loss: 0.002201| train set 1.778x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.0374826269117232
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 14/300 |loss: 0.002236| train set 1.766x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 1
JOB test speedup 1.0415756559554208
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 15/300 |loss: 0.002320| train set 1.734x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 2
JOB test speedup 0.8191336256315689
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 16/300 |loss: 0.002274| train set 1.773x speedup, test set 3.674x speedup, val set 0.879x speedup, step: 3
JOB test speedup 0.8675059584528312
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 17/300 |loss: 0.001708| train set 1.761x speedup, test set 3.674x speedup, val set 0.884x speedup, step: 4
JOB test speedup 0.8826193936638415
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 18/300 |loss: 0.001777| train set 1.536x speedup, test set 3.674x speedup, val set 0.878x speedup, step: 5
JOB test speedup 1.304558358467967
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 19/300 |loss: 0.001893| train set 1.776x speedup, test set 3.882x speedup, val set 0.885x speedup, step: 1
JOB test speedup 0.8278911233402929
TPCH test speedup 4.086623382526104
TPCH skew test speedup 3.674258564369058
Epoch 20/300 |loss: 0.001470| train set 1.774x speedup, test set 3.674x speedup, val set 0.877x speedup, step: 2
JOB test speedup 0.8745131234454654
TPCH test speedup 3.7212820344094926
TPCH skew test speedup 3.5100747696058967
Epoch 21/300 |loss: 0.001474| train set 1.784x speedup, test set 3.510x speedup, val set 0.884x speedup, step: 3
JOB test speedup 0.8429853651759756
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 22/300 |loss: 0.001601| train set 1.707x speedup, test set 3.674x speedup, val set 0.887x speedup, step: 4
JOB test speedup 0.848437810795787
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 23/300 |loss: 0.001571| train set 1.777x speedup, test set 3.674x speedup, val set 0.887x speedup, step: 5
JOB test speedup 0.8485538321491215
TPCH test speedup 3.9255990403818237
TPCH skew test speedup 3.674258564369058
Epoch 24/300 |loss: 0.001411| train set 1.704x speedup, test set 3.674x speedup, val set 0.885x speedup, step: 6
JOB test speedup 1.2755917499853606
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 25/300 |loss: 0.001420| train set 1.757x speedup, test set 3.674x speedup, val set 0.887x speedup, step: 7
JOB test speedup 0.8509910079249637
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 26/300 |loss: 0.001268| train set 1.752x speedup, test set 3.882x speedup, val set 0.884x speedup, step: 8
JOB test speedup 1.311217048010994
TPCH test speedup 3.7212820344094926
TPCH skew test speedup 3.5100747696058967
Epoch 27/300 |loss: 0.001272| train set 1.775x speedup, test set 3.510x speedup, val set 0.885x speedup, step: 9
JOB test speedup 0.8645051377762454
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 28/300 |loss: 0.001241| train set 1.779x speedup, test set 3.674x speedup, val set 0.885x speedup, step: 10
JOB test speedup 1.3037665518715262
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 29/300 |loss: 0.001351| train set 1.773x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 1
JOB test speedup 0.8598594259733584
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 30/300 |loss: 0.001140| train set 1.730x speedup, test set 4.026x speedup, val set 0.885x speedup, step: 2
JOB test speedup 0.8762684249963704
TPCH test speedup 2.0464184107230095
TPCH skew test speedup 1.9950107069231555
Epoch 31/300 |loss: 0.001119| train set 1.783x speedup, test set 1.995x speedup, val set 0.887x speedup, step: 3
JOB test speedup 1.3531517797741637
TPCH test speedup 3.7212820344094926
TPCH skew test speedup 3.5100747696058967
Epoch 32/300 |loss: 0.001285| train set 1.618x speedup, test set 3.510x speedup, val set 0.885x speedup, step: 4
JOB test speedup 0.8562345661909743
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 33/300 |loss: 0.001063| train set 1.789x speedup, test set 3.882x speedup, val set 0.887x speedup, step: 5
JOB test speedup 0.8587016830574414
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 34/300 |loss: 0.001109| train set 1.774x speedup, test set 4.026x speedup, val set 0.885x speedup, step: 6
JOB test speedup 0.8561477193900643
TPCH test speedup 4.165392040621194
TPCH skew test speedup 4.025897149096412
Epoch 35/300 |loss: 0.001055| train set 1.785x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 7
JOB test speedup 0.8902882110577982
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.9768374609104815
Epoch 36/300 |loss: 0.001059| train set 1.782x speedup, test set 3.977x speedup, val set 0.887x speedup, step: 8
JOB test speedup 0.8583881878774879
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 37/300 |loss: 0.001190| train set 1.777x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 9
JOB test speedup 1.3141487945842518
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 38/300 |loss: 0.001039| train set 1.779x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 10
JOB test speedup 0.8560127875651838
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 39/300 |loss: 0.001148| train set 1.779x speedup, test set 2.152x speedup, val set 0.885x speedup, step: 11
JOB test speedup 0.838356778895052
TPCH test speedup 3.947245876527522
TPCH skew test speedup 3.8296230852931625
Epoch 40/300 |loss: 0.000995| train set 1.729x speedup, test set 3.830x speedup, val set 0.885x speedup, step: 12
JOB test speedup 0.8488821373195655
TPCH test speedup 4.193107772596495
TPCH skew test speedup 4.025897149096412
Epoch 41/300 |loss: 0.000952| train set 1.782x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 13
JOB test speedup 0.8493145849771766
TPCH test speedup 3.947245876527522
TPCH skew test speedup 3.8296230852931625
Epoch 42/300 |loss: 0.001029| train set 1.743x speedup, test set 3.830x speedup, val set 0.887x speedup, step: 14
JOB test speedup 0.8537074306247143
TPCH test speedup 3.947245876527522
TPCH skew test speedup 3.8296230852931625
Epoch 43/300 |loss: 0.001085| train set 1.780x speedup, test set 3.830x speedup, val set 0.885x speedup, step: 15
JOB test speedup 1.315275872202761
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 44/300 |loss: 0.001089| train set 1.775x speedup, test set 2.094x speedup, val set 1.249x speedup, step: 1
early stopping at epoch 44
Training per epoch cost 3.775 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.369s, pg runtime 0.206s, speedup 0.560x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 11.835s, pg runtime 10.685s, speedup 0.903x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 10.818s, pg runtime 8.279s, speedup 0.765x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.396s, pg runtime 8.605s, speedup 1.025x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 125.113s, pg runtime 148.707s, speedup 1.189x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 119.421s, pg runtime 140.742s, speedup 1.179x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 68.525s, pg runtime 601.866s, speedup 8.783x
22, opt runtime 24.079s, model runtime 48.310s, pg runtime 608.707s, speedup 12.600x
23, opt runtime 24.662s, model runtime 53.254s, pg runtime 613.999s, speedup 11.530x
24, opt runtime 24.459s, model runtime 61.334s, pg runtime 608.717s, speedup 9.925x
25, opt runtime 25.236s, model runtime 73.109s, pg runtime 601.756s, speedup 8.231x
26, opt runtime 25.363s, model runtime 66.430s, pg runtime 611.327s, speedup 9.203x
27, opt runtime 24.706s, model runtime 55.387s, pg runtime 610.808s, speedup 11.028x
28, opt runtime 25.075s, model runtime 55.796s, pg runtime 612.430s, speedup 10.976x
29, opt runtime 24.840s, model runtime 55.171s, pg runtime 626.529s, speedup 11.356x
30, opt runtime 24.920s, model runtime 50.692s, pg runtime 610.993s, speedup 12.053x
31, opt runtime 16.268s, model runtime 349.951s, pg runtime 432.766s, speedup 1.237x
32, opt runtime 15.120s, model runtime 350.307s, pg runtime 566.078s, speedup 1.616x
33, opt runtime 16.639s, model runtime 343.997s, pg runtime 462.544s, speedup 1.345x
34, opt runtime 16.280s, model runtime 379.482s, pg runtime 634.990s, speedup 1.673x
35, opt runtime 16.528s, model runtime 362.680s, pg runtime 620.762s, speedup 1.712x
36, opt runtime 18.690s, model runtime 356.056s, pg runtime 651.942s, speedup 1.831x
37, opt runtime 16.438s, model runtime 349.045s, pg runtime 546.887s, speedup 1.567x
38, opt runtime 16.138s, model runtime 349.458s, pg runtime 501.793s, speedup 1.436x
39, opt runtime 16.770s, model runtime 354.159s, pg runtime 594.754s, speedup 1.679x
40, opt runtime 16.305s, model runtime 348.685s, pg runtime 436.168s, speedup 1.251x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 65.855s, pg runtime 616.762s, speedup 9.365x
22, opt runtime 25.478s, model runtime 56.775s, pg runtime 642.079s, speedup 11.309x
23, opt runtime 24.016s, model runtime 52.161s, pg runtime 601.228s, speedup 11.526x
24, opt runtime 24.103s, model runtime 62.689s, pg runtime 616.889s, speedup 9.840x
25, opt runtime 24.136s, model runtime 51.883s, pg runtime 609.432s, speedup 11.746x
26, opt runtime 25.431s, model runtime 68.652s, pg runtime 625.988s, speedup 9.118x
27, opt runtime 24.451s, model runtime 48.035s, pg runtime 628.615s, speedup 13.087x
28, opt runtime 24.465s, model runtime 49.500s, pg runtime 644.779s, speedup 13.026x
29, opt runtime 25.152s, model runtime 51.169s, pg runtime 613.332s, speedup 11.986x
30, opt runtime 24.505s, model runtime 51.462s, pg runtime 621.574s, speedup 12.078x
31, opt runtime 16.756s, model runtime 363.182s, pg runtime 602.586s, speedup 1.659x
32, opt runtime 16.542s, model runtime 343.670s, pg runtime 461.957s, speedup 1.344x
33, opt runtime 16.136s, model runtime 338.095s, pg runtime 410.283s, speedup 1.214x
34, opt runtime 14.422s, model runtime 349.086s, pg runtime 497.542s, speedup 1.425x
35, opt runtime 15.980s, model runtime 342.141s, pg runtime 504.239s, speedup 1.474x
36, opt runtime 16.482s, model runtime 349.021s, pg runtime 622.915s, speedup 1.785x
37, opt runtime 16.301s, model runtime 358.543s, pg runtime 646.719s, speedup 1.804x
38, opt runtime 16.194s, model runtime 351.176s, pg runtime 439.255s, speedup 1.251x
39, opt runtime 16.149s, model runtime 354.585s, pg runtime 423.122s, speedup 1.193x
40, opt runtime 13.751s, model runtime 340.982s, pg runtime 434.625s, speedup 1.275x
====================
JOB best validation speedup epoch: 44, train speedup 1.775, test speedup 1.315, val speedup 1.249
TPCH best validation speedup epoch: 44, train speedup 1.775, test speedup 2.132, val speedup 1.249
TPCH Skew best validation speedup epoch: 44, train speedup 1.775, test speedup 2.094, val speedup 1.249
execution cost 0:03:50.935417
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.901863, and there are 13720 training samples
in channel 9
JOB test speedup 0.9637818046530559
TPCH test speedup 2.546534276510287
TPCH skew test speedup 2.418676799347655
Epoch 0/300 |loss: 0.021988| train set 0.993x speedup, test set 2.419x speedup, val set 0.822x speedup, step: 1
JOB test speedup 0.985628684132843
TPCH test speedup 2.348482875591847
TPCH skew test speedup 2.235587637408806
Epoch 1/300 |loss: 0.008024| train set 1.002x speedup, test set 2.236x speedup, val set 0.503x speedup, step: 2
JOB test speedup 1.7326135577352881
TPCH test speedup 5.551184357930597
TPCH skew test speedup 5.001761763075479
Epoch 2/300 |loss: 0.006327| train set 1.153x speedup, test set 5.002x speedup, val set 0.350x speedup, step: 3
JOB test speedup 1.6130569352495694
TPCH test speedup 4.744311014252866
TPCH skew test speedup 4.3738160760558324
Epoch 3/300 |loss: 0.006293| train set 1.503x speedup, test set 4.374x speedup, val set 0.816x speedup, step: 4
JOB test speedup 1.6969578274008752
TPCH test speedup 4.650355128212111
TPCH skew test speedup 4.3738160760558324
Epoch 4/300 |loss: 0.004225| train set 1.340x speedup, test set 4.374x speedup, val set 0.816x speedup, step: 5
JOB test speedup 1.0294083269943701
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 5/300 |loss: 0.003378| train set 1.491x speedup, test set 1.655x speedup, val set 0.745x speedup, step: 6
JOB test speedup 0.9741190400439812
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 6/300 |loss: 0.003470| train set 1.473x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 7
JOB test speedup 1.8958844003091502
TPCH test speedup 4.189839753677916
TPCH skew test speedup 3.9914850971145106
Epoch 7/300 |loss: 0.003111| train set 1.509x speedup, test set 3.991x speedup, val set 0.879x speedup, step: 8
JOB test speedup 1.8125882238179092
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 8/300 |loss: 0.002738| train set 1.539x speedup, test set 3.772x speedup, val set 0.739x speedup, step: 9
JOB test speedup 1.756049959947847
TPCH test speedup 3.9526838751957625
TPCH skew test speedup 3.735211346312093
Epoch 9/300 |loss: 0.002767| train set 1.480x speedup, test set 3.735x speedup, val set 0.878x speedup, step: 1
JOB test speedup 1.7680297152356326
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 10/300 |loss: 0.002438| train set 1.530x speedup, test set 3.772x speedup, val set 0.798x speedup, step: 2
JOB test speedup 1.0283552808473955
TPCH test speedup 4.26595620404425
TPCH skew test speedup 3.9914850971145106
Epoch 11/300 |loss: 0.002666| train set 1.713x speedup, test set 3.991x speedup, val set 0.879x speedup, step: 3
JOB test speedup 0.9949096356301461
TPCH test speedup 3.8268846056962875
TPCH skew test speedup 3.5990058226648087
Epoch 12/300 |loss: 0.002386| train set 1.506x speedup, test set 3.599x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.0504703004836242
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 13/300 |loss: 0.002240| train set 1.772x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.043978487456792
TPCH test speedup 3.8268846056962875
TPCH skew test speedup 3.5990058226648087
Epoch 14/300 |loss: 0.002152| train set 1.508x speedup, test set 3.599x speedup, val set 0.806x speedup, step: 6
JOB test speedup 1.0216242380797584
TPCH test speedup 3.4337453329623076
TPCH skew test speedup 3.385093867888981
Epoch 15/300 |loss: 0.002296| train set 1.773x speedup, test set 3.385x speedup, val set 0.879x speedup, step: 7
JOB test speedup 0.9986898496737342
TPCH test speedup 3.8322597234906555
TPCH skew test speedup 3.6995453343363383
Epoch 16/300 |loss: 0.002176| train set 1.718x speedup, test set 3.700x speedup, val set 0.879x speedup, step: 8
JOB test speedup 0.85343355639418
TPCH test speedup 3.895839755378227
TPCH skew test speedup 3.6995453343363383
Epoch 17/300 |loss: 0.001730| train set 1.558x speedup, test set 3.700x speedup, val set 0.876x speedup, step: 9
JOB test speedup 0.9864678891436549
TPCH test speedup 3.895839755378227
TPCH skew test speedup 3.6995453343363383
Epoch 18/300 |loss: 0.001781| train set 1.501x speedup, test set 3.700x speedup, val set 0.879x speedup, step: 10
JOB test speedup 0.9978203254300979
TPCH test speedup 3.895839755378227
TPCH skew test speedup 3.8296230852931625
Epoch 19/300 |loss: 0.001795| train set 1.785x speedup, test set 3.830x speedup, val set 1.233x speedup, step: 1
JOB test speedup 0.9975310431133503
TPCH test speedup 2.1170315425728337
TPCH skew test speedup 2.054823882997423
Epoch 20/300 |loss: 0.001449| train set 1.723x speedup, test set 2.055x speedup, val set 0.885x speedup, step: 2
JOB test speedup 1.053283570406882
TPCH test speedup 2.1170315425728337
TPCH skew test speedup 2.0943350075298417
Epoch 21/300 |loss: 0.001418| train set 1.777x speedup, test set 2.094x speedup, val set 0.847x speedup, step: 3
JOB test speedup 0.9492326245839441
TPCH test speedup 2.1170315425728337
TPCH skew test speedup 2.0943350075298417
Epoch 22/300 |loss: 0.001600| train set 1.703x speedup, test set 2.094x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.006573746112931
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 23/300 |loss: 0.001504| train set 1.779x speedup, test set 2.094x speedup, val set 0.887x speedup, step: 5
JOB test speedup 1.0078315704307628
TPCH test speedup 2.0855517168873217
TPCH skew test speedup 2.051759059294745
Epoch 24/300 |loss: 0.001438| train set 1.741x speedup, test set 2.052x speedup, val set 0.887x speedup, step: 6
JOB test speedup 1.0117319598166907
TPCH test speedup 2.1170315425728337
TPCH skew test speedup 2.080980177581639
Epoch 25/300 |loss: 0.001394| train set 1.778x speedup, test set 2.081x speedup, val set 0.747x speedup, step: 7
JOB test speedup 1.036685521797138
TPCH test speedup 2.1063408112739452
TPCH skew test speedup 2.063079762382721
Epoch 26/300 |loss: 0.001247| train set 1.786x speedup, test set 2.063x speedup, val set 0.884x speedup, step: 8
JOB test speedup 1.045005967524849
TPCH test speedup 2.1170315425728337
TPCH skew test speedup 2.0943350075298417
Epoch 27/300 |loss: 0.001217| train set 1.774x speedup, test set 2.094x speedup, val set 0.887x speedup, step: 9
JOB test speedup 0.8600907609858122
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 28/300 |loss: 0.001183| train set 1.743x speedup, test set 2.094x speedup, val set 0.744x speedup, step: 10
JOB test speedup 1.0139716102629257
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 29/300 |loss: 0.001256| train set 1.772x speedup, test set 2.094x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8661032291634491
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 30/300 |loss: 0.001111| train set 1.723x speedup, test set 2.094x speedup, val set 0.885x speedup, step: 12
JOB test speedup 1.0402369699143168
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 31/300 |loss: 0.001091| train set 1.724x speedup, test set 2.094x speedup, val set 0.746x speedup, step: 13
JOB test speedup 0.8458825478348032
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 32/300 |loss: 0.001189| train set 1.724x speedup, test set 2.094x speedup, val set 0.744x speedup, step: 14
JOB test speedup 1.0513185202740902
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 33/300 |loss: 0.001028| train set 1.761x speedup, test set 2.094x speedup, val set 0.883x speedup, step: 15
JOB test speedup 0.8743838144251891
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 34/300 |loss: 0.001053| train set 1.740x speedup, test set 2.094x speedup, val set 0.885x speedup, step: 16
JOB test speedup 1.0021356053974355
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 35/300 |loss: 0.001071| train set 1.783x speedup, test set 1.282x speedup, val set 1.254x speedup, step: 17
JOB test speedup 1.0521214599586015
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 36/300 |loss: 0.001049| train set 1.787x speedup, test set 2.094x speedup, val set 1.254x speedup, step: 18
JOB test speedup 0.8532438111984921
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 37/300 |loss: 0.001083| train set 1.777x speedup, test set 1.282x speedup, val set 1.250x speedup, step: 19
JOB test speedup 1.041165649182738
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 38/300 |loss: 0.001020| train set 1.774x speedup, test set 1.282x speedup, val set 1.256x speedup, step: 20
JOB test speedup 1.042056858846183
TPCH test speedup 2.0639616112952304
TPCH skew test speedup 2.032234243195789
Epoch 39/300 |loss: 0.001007| train set 1.781x speedup, test set 2.032x speedup, val set 1.249x speedup, step: 1
JOB test speedup 1.009095123357497
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 40/300 |loss: 0.000922| train set 1.725x speedup, test set 2.094x speedup, val set 1.256x speedup, step: 2
JOB test speedup 0.8658618269637808
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 41/300 |loss: 0.000875| train set 1.750x speedup, test set 1.282x speedup, val set 1.249x speedup, step: 3
JOB test speedup 0.8696437331933288
TPCH test speedup 1.3033060143514645
TPCH skew test speedup 1.2585121693904784
Epoch 42/300 |loss: 0.001002| train set 1.742x speedup, test set 1.259x speedup, val set 1.249x speedup, step: 4
JOB test speedup 0.8771995712664912
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 43/300 |loss: 0.001009| train set 1.779x speedup, test set 2.094x speedup, val set 0.885x speedup, step: 5
JOB test speedup 0.8525051849037832
TPCH test speedup 1.3033060143514645
TPCH skew test speedup 1.2585121693904784
Epoch 44/300 |loss: 0.000957| train set 1.740x speedup, test set 1.259x speedup, val set 1.242x speedup, step: 6
JOB test speedup 0.8686523796083203
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 45/300 |loss: 0.000841| train set 1.782x speedup, test set 2.094x speedup, val set 0.885x speedup, step: 7
JOB test speedup 1.0177538229247658
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 46/300 |loss: 0.000974| train set 1.781x speedup, test set 1.282x speedup, val set 1.250x speedup, step: 8
JOB test speedup 0.8799816303834803
TPCH test speedup 2.0787549970215227
TPCH skew test speedup 2.032234243195789
Epoch 47/300 |loss: 0.000774| train set 1.779x speedup, test set 2.032x speedup, val set 1.249x speedup, step: 9
JOB test speedup 1.3908257994864839
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 48/300 |loss: 0.000889| train set 1.785x speedup, test set 1.282x speedup, val set 1.256x speedup, step: 10
JOB test speedup 1.4469021113859626
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 49/300 |loss: 0.000837| train set 1.773x speedup, test set 1.282x speedup, val set 0.883x speedup, step: 11
JOB test speedup 0.8715137199636501
TPCH test speedup 1.29747548187223
TPCH skew test speedup 1.2585121693904784
Epoch 50/300 |loss: 0.000859| train set 1.782x speedup, test set 1.259x speedup, val set 1.250x speedup, step: 12
JOB test speedup 0.8352813872758595
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 51/300 |loss: 0.000762| train set 1.729x speedup, test set 1.282x speedup, val set 1.204x speedup, step: 13
JOB test speedup 1.0193350620394817
TPCH test speedup 2.2230010547288277
TPCH skew test speedup 2.1718027071926866
Epoch 52/300 |loss: 0.000787| train set 1.783x speedup, test set 2.172x speedup, val set 0.980x speedup, step: 14
JOB test speedup 0.9057542292939949
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 53/300 |loss: 0.000803| train set 1.777x speedup, test set 2.094x speedup, val set 1.243x speedup, step: 15
JOB test speedup 0.8945775851124622
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 54/300 |loss: 0.000730| train set 1.774x speedup, test set 1.282x speedup, val set 1.249x speedup, step: 16
JOB test speedup 1.423575152170761
TPCH test speedup 2.1321204794276567
TPCH skew test speedup 2.0943350075298417
Epoch 55/300 |loss: 0.000806| train set 1.771x speedup, test set 2.094x speedup, val set 1.242x speedup, step: 17
JOB test speedup 1.8686922663426155
TPCH test speedup 2.127015620103681
TPCH skew test speedup 2.078842978812275
Epoch 56/300 |loss: 0.000792| train set 1.765x speedup, test set 2.079x speedup, val set 1.248x speedup, step: 18
early stopping at epoch 56
Training per epoch cost 3.798 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
10, opt runtime 3.248s, model runtime 9.856s, pg runtime 10.538s, speedup 1.069x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 6.021s, pg runtime 6.089s, speedup 1.011x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 10.818s, pg runtime 8.279s, speedup 0.765x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 125.113s, pg runtime 148.707s, speedup 1.189x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 68.525s, pg runtime 601.866s, speedup 8.783x
22, opt runtime 24.079s, model runtime 48.310s, pg runtime 608.707s, speedup 12.600x
23, opt runtime 24.662s, model runtime 53.254s, pg runtime 613.999s, speedup 11.530x
24, opt runtime 24.459s, model runtime 61.334s, pg runtime 608.717s, speedup 9.925x
25, opt runtime 25.236s, model runtime 73.109s, pg runtime 601.756s, speedup 8.231x
26, opt runtime 25.363s, model runtime 66.430s, pg runtime 611.327s, speedup 9.203x
27, opt runtime 24.706s, model runtime 55.387s, pg runtime 610.808s, speedup 11.028x
28, opt runtime 25.075s, model runtime 55.796s, pg runtime 612.430s, speedup 10.976x
29, opt runtime 24.840s, model runtime 55.171s, pg runtime 626.529s, speedup 11.356x
30, opt runtime 24.920s, model runtime 50.692s, pg runtime 610.993s, speedup 12.053x
31, opt runtime 16.268s, model runtime 349.951s, pg runtime 432.766s, speedup 1.237x
32, opt runtime 15.120s, model runtime 350.307s, pg runtime 566.078s, speedup 1.616x
33, opt runtime 16.639s, model runtime 343.997s, pg runtime 462.544s, speedup 1.345x
34, opt runtime 16.280s, model runtime 379.482s, pg runtime 634.990s, speedup 1.673x
35, opt runtime 16.528s, model runtime 362.680s, pg runtime 620.762s, speedup 1.712x
36, opt runtime 18.690s, model runtime 356.056s, pg runtime 651.942s, speedup 1.831x
37, opt runtime 16.438s, model runtime 349.045s, pg runtime 546.887s, speedup 1.567x
38, opt runtime 16.138s, model runtime 349.458s, pg runtime 501.793s, speedup 1.436x
39, opt runtime 16.770s, model runtime 354.159s, pg runtime 594.754s, speedup 1.679x
40, opt runtime 16.305s, model runtime 348.685s, pg runtime 436.168s, speedup 1.251x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 65.855s, pg runtime 616.762s, speedup 9.365x
22, opt runtime 25.478s, model runtime 56.775s, pg runtime 642.079s, speedup 11.309x
23, opt runtime 24.016s, model runtime 52.161s, pg runtime 601.228s, speedup 11.526x
24, opt runtime 24.103s, model runtime 62.689s, pg runtime 616.889s, speedup 9.840x
25, opt runtime 24.136s, model runtime 51.883s, pg runtime 609.432s, speedup 11.746x
26, opt runtime 25.431s, model runtime 68.652s, pg runtime 625.988s, speedup 9.118x
27, opt runtime 24.451s, model runtime 48.035s, pg runtime 628.615s, speedup 13.087x
28, opt runtime 24.465s, model runtime 49.500s, pg runtime 644.779s, speedup 13.026x
29, opt runtime 25.152s, model runtime 51.169s, pg runtime 613.332s, speedup 11.986x
30, opt runtime 24.505s, model runtime 51.462s, pg runtime 621.574s, speedup 12.078x
31, opt runtime 16.756s, model runtime 363.182s, pg runtime 602.586s, speedup 1.659x
32, opt runtime 16.542s, model runtime 343.670s, pg runtime 461.957s, speedup 1.344x
33, opt runtime 16.136s, model runtime 338.095s, pg runtime 410.283s, speedup 1.214x
34, opt runtime 14.422s, model runtime 349.086s, pg runtime 497.542s, speedup 1.425x
35, opt runtime 15.980s, model runtime 342.141s, pg runtime 504.239s, speedup 1.474x
36, opt runtime 16.482s, model runtime 349.021s, pg runtime 622.915s, speedup 1.785x
37, opt runtime 16.301s, model runtime 358.543s, pg runtime 646.719s, speedup 1.804x
38, opt runtime 16.194s, model runtime 351.176s, pg runtime 439.255s, speedup 1.251x
39, opt runtime 16.149s, model runtime 354.585s, pg runtime 423.122s, speedup 1.193x
40, opt runtime 13.751s, model runtime 340.982s, pg runtime 434.625s, speedup 1.275x
====================
JOB best validation speedup epoch: 39, train speedup 1.781, test speedup 1.042, val speedup 1.249
TPCH best validation speedup epoch: 39, train speedup 1.781, test speedup 2.064, val speedup 1.249
TPCH Skew best validation speedup epoch: 39, train speedup 1.781, test speedup 2.032, val speedup 1.249
execution cost 0:04:51.611806
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.798391, and there are 13720 training samples
in channel 9
JOB test speedup 0.9637818046530559
TPCH test speedup 2.546534276510287
TPCH skew test speedup 2.418676799347655
Epoch 0/300 |loss: 0.021988| train set 0.993x speedup, test set 2.419x speedup, val set 0.822x speedup, step: 1
JOB test speedup 0.9917269167140855
TPCH test speedup 2.3296988513666186
TPCH skew test speedup 2.130525005682472
Epoch 1/300 |loss: 0.008027| train set 1.002x speedup, test set 2.131x speedup, val set 0.503x speedup, step: 2
JOB test speedup 1.827433608742734
TPCH test speedup 7.058001467050093
TPCH skew test speedup 6.303900972763916
Epoch 2/300 |loss: 0.006348| train set 1.168x speedup, test set 6.304x speedup, val set 0.350x speedup, step: 3
JOB test speedup 1.6114217328916398
TPCH test speedup 4.744311014252866
TPCH skew test speedup 4.3738160760558324
Epoch 3/300 |loss: 0.006197| train set 1.335x speedup, test set 4.374x speedup, val set 0.817x speedup, step: 4
JOB test speedup 1.0011082642619724
TPCH test speedup 4.744311014252866
TPCH skew test speedup 4.3738160760558324
Epoch 4/300 |loss: 0.004242| train set 1.343x speedup, test set 4.374x speedup, val set 0.745x speedup, step: 5
JOB test speedup 1.013709145559215
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 5/300 |loss: 0.003355| train set 1.416x speedup, test set 3.461x speedup, val set 0.745x speedup, step: 6
JOB test speedup 1.012061253481819
TPCH test speedup 4.05754314378712
TPCH skew test speedup 3.771819310436001
Epoch 6/300 |loss: 0.003527| train set 1.459x speedup, test set 3.772x speedup, val set 0.879x speedup, step: 7
JOB test speedup 1.7266348707261818
TPCH test speedup 4.222768008602926
TPCH skew test speedup 3.9914850971145106
Epoch 7/300 |loss: 0.003095| train set 1.481x speedup, test set 3.991x speedup, val set 0.451x speedup, step: 8
JOB test speedup 1.0417649067927677
TPCH test speedup 3.568115912848524
TPCH skew test speedup 3.5029358644099657
Epoch 8/300 |loss: 0.002786| train set 1.543x speedup, test set 3.503x speedup, val set 0.882x speedup, step: 9
JOB test speedup 1.8356532324305435
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 9/300 |loss: 0.002785| train set 1.497x speedup, test set 3.772x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.9969384425082545
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 10/300 |loss: 0.002466| train set 1.556x speedup, test set 3.772x speedup, val set 0.798x speedup, step: 2
JOB test speedup 1.0457525536094652
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 11/300 |loss: 0.002622| train set 1.723x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.0237046881272873
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 12/300 |loss: 0.002414| train set 1.696x speedup, test set 3.461x speedup, val set 0.878x speedup, step: 4
JOB test speedup 1.0428294122196025
TPCH test speedup 4.15020188316955
TPCH skew test speedup 3.9914850971145106
Epoch 13/300 |loss: 0.002167| train set 1.779x speedup, test set 3.991x speedup, val set 0.879x speedup, step: 5
JOB test speedup 0.9829324715825908
TPCH test speedup 4.752575004873476
TPCH skew test speedup 4.523202957190071
Epoch 14/300 |loss: 0.002175| train set 1.708x speedup, test set 4.523x speedup, val set 0.879x speedup, step: 6
JOB test speedup 1.0340421539168674
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.4874720664569665
Epoch 15/300 |loss: 0.002447| train set 1.774x speedup, test set 3.487x speedup, val set 0.880x speedup, step: 7
JOB test speedup 1.0383351726390886
TPCH test speedup 4.312531361237363
TPCH skew test speedup 3.8470287013807174
Epoch 16/300 |loss: 0.002186| train set 1.727x speedup, test set 3.847x speedup, val set 0.879x speedup, step: 8
JOB test speedup 1.045315531654797
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 17/300 |loss: 0.001767| train set 1.730x speedup, test set 3.882x speedup, val set 0.879x speedup, step: 9
JOB test speedup 1.00638127101971
TPCH test speedup 1.9837784045443057
TPCH skew test speedup 1.9789425304017438
Epoch 18/300 |loss: 0.001814| train set 1.538x speedup, test set 1.979x speedup, val set 0.879x speedup, step: 10
JOB test speedup 1.0128437487888082
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 19/300 |loss: 0.001820| train set 1.770x speedup, test set 2.047x speedup, val set 0.878x speedup, step: 11
JOB test speedup 1.7346458065264965
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 20/300 |loss: 0.001542| train set 1.777x speedup, test set 2.152x speedup, val set 0.877x speedup, step: 12
JOB test speedup 0.8822431674348485
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 21/300 |loss: 0.001464| train set 1.741x speedup, test set 2.152x speedup, val set 0.877x speedup, step: 13
JOB test speedup 1.7170875201668638
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.0469991853728824
Epoch 22/300 |loss: 0.001632| train set 1.693x speedup, test set 2.047x speedup, val set 0.879x speedup, step: 14
JOB test speedup 1.0150122220344417
TPCH test speedup 2.0981158816017103
TPCH skew test speedup 2.0943350075298417
Epoch 23/300 |loss: 0.001438| train set 1.782x speedup, test set 2.094x speedup, val set 0.877x speedup, step: 15
JOB test speedup 1.7298808502434653
TPCH test speedup 2.1105772820575344
TPCH skew test speedup 2.072955396565392
Epoch 24/300 |loss: 0.001462| train set 1.776x speedup, test set 2.073x speedup, val set 0.876x speedup, step: 16
JOB test speedup 1.011219653620488
TPCH test speedup 4.652691795535132
TPCH skew test speedup 4.620941070990079
Epoch 25/300 |loss: 0.001398| train set 1.752x speedup, test set 4.621x speedup, val set 0.879x speedup, step: 17
JOB test speedup 0.99030651515352
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 26/300 |loss: 0.001248| train set 1.772x speedup, test set 2.152x speedup, val set 0.876x speedup, step: 18
JOB test speedup 1.73853988416814
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 27/300 |loss: 0.001216| train set 1.776x speedup, test set 2.152x speedup, val set 0.878x speedup, step: 19
JOB test speedup 1.3510493392587135
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 28/300 |loss: 0.001175| train set 1.737x speedup, test set 2.152x speedup, val set 0.738x speedup, step: 20
JOB test speedup 1.0357073806199741
TPCH test speedup 4.316314019436493
TPCH skew test speedup 2.7330564139534936
Epoch 29/300 |loss: 0.001303| train set 1.732x speedup, test set 2.733x speedup, val set 0.879x speedup, step: 21
JOB test speedup 0.8557698399220313
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 30/300 |loss: 0.001114| train set 1.773x speedup, test set 2.152x speedup, val set 0.877x speedup, step: 22
JOB test speedup 1.6423458559137085
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 31/300 |loss: 0.001088| train set 1.727x speedup, test set 2.152x speedup, val set 0.879x speedup, step: 23
JOB test speedup 1.3148279038010227
TPCH test speedup 2.2230010547288277
TPCH skew test speedup 2.1718027071926866
Epoch 32/300 |loss: 0.001226| train set 1.741x speedup, test set 2.172x speedup, val set 0.740x speedup, step: 24
JOB test speedup 0.9907596763396537
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 33/300 |loss: 0.000998| train set 1.784x speedup, test set 2.152x speedup, val set 0.985x speedup, step: 25
JOB test speedup 1.0101995850537466
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 34/300 |loss: 0.001185| train set 1.739x speedup, test set 2.152x speedup, val set 0.877x speedup, step: 26
JOB test speedup 1.0385238170968496
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 35/300 |loss: 0.001074| train set 1.757x speedup, test set 2.152x speedup, val set 0.879x speedup, step: 27
JOB test speedup 1.7584425626422282
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 36/300 |loss: 0.001089| train set 1.781x speedup, test set 2.152x speedup, val set 0.879x speedup, step: 28
JOB test speedup 1.6829179079591128
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 37/300 |loss: 0.001027| train set 1.781x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 29
JOB test speedup 1.0395295932804454
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 38/300 |loss: 0.001046| train set 1.728x speedup, test set 1.282x speedup, val set 1.241x speedup, step: 30
JOB test speedup 0.9784361188982218
TPCH test speedup 2.185266886144457
TPCH skew test speedup 2.1517034114149443
Epoch 39/300 |loss: 0.001088| train set 1.779x speedup, test set 2.152x speedup, val set 1.234x speedup, step: 1
JOB test speedup 0.8393077364868952
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 40/300 |loss: 0.001006| train set 1.727x speedup, test set 2.152x speedup, val set 0.879x speedup, step: 2
JOB test speedup 0.8288135847729294
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 41/300 |loss: 0.000918| train set 1.776x speedup, test set 2.152x speedup, val set 0.877x speedup, step: 3
JOB test speedup 1.0362579100084832
TPCH test speedup 2.185266886144457
TPCH skew test speedup 2.1517034114149443
Epoch 42/300 |loss: 0.000945| train set 1.735x speedup, test set 2.152x speedup, val set 0.879x speedup, step: 4
JOB test speedup 0.8233394624283192
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 43/300 |loss: 0.001034| train set 1.776x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.9990847918166862
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 44/300 |loss: 0.001071| train set 1.748x speedup, test set 1.282x speedup, val set 1.240x speedup, step: 1
JOB test speedup 1.3267278210157893
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 45/300 |loss: 0.000955| train set 1.752x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8511558498307442
TPCH test speedup 2.214013039285409
TPCH skew test speedup 2.160082866719154
Epoch 46/300 |loss: 0.000946| train set 1.774x speedup, test set 2.160x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.851895600617777
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 47/300 |loss: 0.000884| train set 1.731x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.9779517130788153
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 48/300 |loss: 0.000937| train set 1.778x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 5
JOB test speedup 1.6199120579274509
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 49/300 |loss: 0.000904| train set 1.776x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 6
JOB test speedup 1.347888795825623
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 50/300 |loss: 0.000853| train set 1.783x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.823881644035861
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 51/300 |loss: 0.000854| train set 1.727x speedup, test set 1.282x speedup, val set 0.880x speedup, step: 8
JOB test speedup 1.5612015236488637
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 52/300 |loss: 0.000820| train set 1.776x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 9
JOB test speedup 1.4178625847684643
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 53/300 |loss: 0.000923| train set 1.779x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8294747707132577
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 54/300 |loss: 0.000857| train set 1.743x speedup, test set 1.282x speedup, val set 1.240x speedup, step: 1
JOB test speedup 1.2538185080171913
TPCH test speedup 2.225920407058744
TPCH skew test speedup 2.1766079854499427
Epoch 55/300 |loss: 0.000909| train set 1.783x speedup, test set 2.177x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.9963084246475049
TPCH test speedup 2.225920407058744
TPCH skew test speedup 2.1766079854499427
Epoch 56/300 |loss: 0.000817| train set 1.784x speedup, test set 2.177x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.0015707235222207
TPCH test speedup 2.225920407058744
TPCH skew test speedup 2.1766079854499427
Epoch 57/300 |loss: 0.000724| train set 1.787x speedup, test set 2.177x speedup, val set 0.880x speedup, step: 4
JOB test speedup 1.6826600461556112
TPCH test speedup 2.199771725938198
TPCH skew test speedup 2.1517034114149443
Epoch 58/300 |loss: 0.000786| train set 1.734x speedup, test set 2.152x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.9802728260315707
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.2820540295576366
Epoch 59/300 |loss: 0.000785| train set 1.778x speedup, test set 1.282x speedup, val set 0.880x speedup, step: 6
JOB test speedup 1.772079624307532
TPCH test speedup 2.214013039285409
TPCH skew test speedup 2.160082866719154
Epoch 60/300 |loss: 0.000745| train set 1.784x speedup, test set 2.160x speedup, val set 0.888x speedup, step: 7
JOB test speedup 1.7340452188950888
TPCH test speedup 2.213895809701852
TPCH skew test speedup 2.160082866719154
Epoch 61/300 |loss: 0.000704| train set 1.782x speedup, test set 2.160x speedup, val set 0.880x speedup, step: 8
JOB test speedup 1.247148122317598
TPCH test speedup 2.214013039285409
TPCH skew test speedup 2.160082866719154
Epoch 62/300 |loss: 0.000704| train set 1.757x speedup, test set 2.160x speedup, val set 0.880x speedup, step: 9
JOB test speedup 1.707462056824338
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 63/300 |loss: 0.000686| train set 1.780x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 10
JOB test speedup 1.094676639388015
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 64/300 |loss: 0.000748| train set 1.785x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 11
JOB test speedup 1.2494940924956013
TPCH test speedup 2.214013039285409
TPCH skew test speedup 2.160082866719154
Epoch 65/300 |loss: 0.000825| train set 1.780x speedup, test set 2.160x speedup, val set 0.888x speedup, step: 12
JOB test speedup 1.6669146672137432
TPCH test speedup 2.214013039285409
TPCH skew test speedup 2.160082866719154
Epoch 66/300 |loss: 0.000716| train set 1.729x speedup, test set 2.160x speedup, val set 0.888x speedup, step: 13
JOB test speedup 0.8408131450871887
TPCH test speedup 1.1433958589313973
TPCH skew test speedup 1.1099712547260168
Epoch 67/300 |loss: 0.000745| train set 1.741x speedup, test set 1.110x speedup, val set 0.888x speedup, step: 14
JOB test speedup 1.2556839740638719
TPCH test speedup 1.3284703112404492
TPCH skew test speedup 1.2850241947273828
Epoch 68/300 |loss: 0.000671| train set 1.725x speedup, test set 1.285x speedup, val set 1.240x speedup, step: 15
JOB test speedup 1.307107904545234
TPCH test speedup 4.378389786631947
TPCH skew test speedup 2.7493150008124863
Epoch 69/300 |loss: 0.000949| train set 1.751x speedup, test set 2.749x speedup, val set 0.888x speedup, step: 16
JOB test speedup 1.2713689278704094
TPCH test speedup 1.3284703112404492
TPCH skew test speedup 1.2850241947273828
Epoch 70/300 |loss: 0.000733| train set 1.789x speedup, test set 1.285x speedup, val set 0.888x speedup, step: 17
early stopping at epoch 70
Training per epoch cost 3.830 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 6.220s, pg runtime 5.879s, speedup 0.945x
08, opt runtime 1.737s, model runtime 6.267s, pg runtime 5.994s, speedup 0.957x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 50.837s, pg runtime 13.945s, speedup 0.274x
13, opt runtime 5.179s, model runtime 14.577s, pg runtime 10.685s, speedup 0.733x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 6.089s, pg runtime 6.089s, speedup 1.000x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.290s, pg runtime 4.730s, speedup 0.571x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.818s, pg runtime 8.279s, speedup 0.765x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 125.113s, pg runtime 148.707s, speedup 1.189x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 119.421s, pg runtime 140.742s, speedup 1.179x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 349.951s, pg runtime 432.766s, speedup 1.237x
32, opt runtime 15.120s, model runtime 350.307s, pg runtime 566.078s, speedup 1.616x
33, opt runtime 16.639s, model runtime 343.997s, pg runtime 462.544s, speedup 1.345x
34, opt runtime 16.280s, model runtime 379.482s, pg runtime 634.990s, speedup 1.673x
35, opt runtime 16.528s, model runtime 362.680s, pg runtime 620.762s, speedup 1.712x
36, opt runtime 18.690s, model runtime 356.056s, pg runtime 651.942s, speedup 1.831x
37, opt runtime 16.438s, model runtime 349.045s, pg runtime 546.887s, speedup 1.567x
38, opt runtime 16.138s, model runtime 349.458s, pg runtime 501.793s, speedup 1.436x
39, opt runtime 16.770s, model runtime 354.159s, pg runtime 594.754s, speedup 1.679x
40, opt runtime 16.305s, model runtime 348.685s, pg runtime 436.168s, speedup 1.251x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 363.182s, pg runtime 602.586s, speedup 1.659x
32, opt runtime 16.542s, model runtime 343.670s, pg runtime 461.957s, speedup 1.344x
33, opt runtime 16.136s, model runtime 338.095s, pg runtime 410.283s, speedup 1.214x
34, opt runtime 14.422s, model runtime 349.086s, pg runtime 497.542s, speedup 1.425x
35, opt runtime 15.980s, model runtime 342.141s, pg runtime 504.239s, speedup 1.474x
36, opt runtime 16.482s, model runtime 349.021s, pg runtime 622.915s, speedup 1.785x
37, opt runtime 16.301s, model runtime 358.543s, pg runtime 646.719s, speedup 1.804x
38, opt runtime 16.194s, model runtime 351.176s, pg runtime 439.255s, speedup 1.251x
39, opt runtime 16.149s, model runtime 354.585s, pg runtime 423.122s, speedup 1.193x
40, opt runtime 13.751s, model runtime 340.982s, pg runtime 434.625s, speedup 1.275x
====================
JOB best validation speedup epoch: 54, train speedup 1.743, test speedup 0.829, val speedup 1.240
TPCH best validation speedup epoch: 54, train speedup 1.743, test speedup 1.324, val speedup 1.240
TPCH Skew best validation speedup epoch: 54, train speedup 1.743, test speedup 1.282, val speedup 1.240
execution cost 0:06:02.698058
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.796878, and there are 13720 training samples
in channel 9
JOB test speedup 0.9637818046530559
TPCH test speedup 2.546534276510287
TPCH skew test speedup 2.418676799347655
Epoch 0/300 |loss: 0.021988| train set 0.993x speedup, test set 2.419x speedup, val set 0.822x speedup, step: 1
JOB test speedup 0.985628684132843
TPCH test speedup 2.348482875591847
TPCH skew test speedup 2.235587637408806
Epoch 1/300 |loss: 0.008024| train set 1.002x speedup, test set 2.236x speedup, val set 0.503x speedup, step: 2
JOB test speedup 1.82334146375226
TPCH test speedup 5.551184357930597
TPCH skew test speedup 5.001761763075479
Epoch 2/300 |loss: 0.006327| train set 1.167x speedup, test set 5.002x speedup, val set 0.350x speedup, step: 3
JOB test speedup 1.7298439406062103
TPCH test speedup 4.650355128212111
TPCH skew test speedup 4.3738160760558324
Epoch 3/300 |loss: 0.006261| train set 1.329x speedup, test set 4.374x speedup, val set 0.769x speedup, step: 4
JOB test speedup 1.7109535998083516
TPCH test speedup 4.814582384560144
TPCH skew test speedup 4.3738160760558324
Epoch 4/300 |loss: 0.004222| train set 1.340x speedup, test set 4.374x speedup, val set 0.950x speedup, step: 1
JOB test speedup 1.798558499939155
TPCH test speedup 3.568115912848524
TPCH skew test speedup 3.605280680394733
Epoch 5/300 |loss: 0.003329| train set 1.535x speedup, test set 3.605x speedup, val set 0.886x speedup, step: 2
JOB test speedup 0.970027822927371
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 6/300 |loss: 0.003515| train set 1.490x speedup, test set 3.772x speedup, val set 0.878x speedup, step: 3
JOB test speedup 1.8171881745041922
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 7/300 |loss: 0.003019| train set 1.527x speedup, test set 3.772x speedup, val set 0.878x speedup, step: 4
JOB test speedup 1.7339487600401164
TPCH test speedup 3.988622269565602
TPCH skew test speedup 3.771819310436001
Epoch 8/300 |loss: 0.002744| train set 1.755x speedup, test set 3.772x speedup, val set 0.740x speedup, step: 5
JOB test speedup 1.7131924888813113
TPCH test speedup 3.568115912848524
TPCH skew test speedup 3.605280680394733
Epoch 9/300 |loss: 0.002671| train set 1.729x speedup, test set 3.605x speedup, val set 0.879x speedup, step: 6
JOB test speedup 1.6460726465310875
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 10/300 |loss: 0.002364| train set 1.560x speedup, test set 3.461x speedup, val set 0.888x speedup, step: 7
JOB test speedup 0.9903637368904871
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 11/300 |loss: 0.002601| train set 1.726x speedup, test set 3.645x speedup, val set 0.877x speedup, step: 8
JOB test speedup 1.0215472909686165
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 12/300 |loss: 0.002326| train set 1.705x speedup, test set 3.461x speedup, val set 0.884x speedup, step: 9
JOB test speedup 1.0203625011266089
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 13/300 |loss: 0.002182| train set 1.775x speedup, test set 3.461x speedup, val set 0.887x speedup, step: 10
JOB test speedup 1.0405296101955512
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 14/300 |loss: 0.002174| train set 1.680x speedup, test set 3.461x speedup, val set 0.881x speedup, step: 11
JOB test speedup 1.8430219204639273
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 15/300 |loss: 0.002035| train set 1.754x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 12
JOB test speedup 1.3482736839181413
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 16/300 |loss: 0.002099| train set 1.758x speedup, test set 3.461x speedup, val set 0.887x speedup, step: 13
JOB test speedup 1.3464861115463111
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 17/300 |loss: 0.001692| train set 1.728x speedup, test set 3.461x speedup, val set 0.884x speedup, step: 14
JOB test speedup 1.0450074152852304
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 18/300 |loss: 0.001707| train set 1.537x speedup, test set 3.882x speedup, val set 0.884x speedup, step: 15
JOB test speedup 0.8516873085548905
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.674258564369058
Epoch 19/300 |loss: 0.001729| train set 1.749x speedup, test set 3.674x speedup, val set 0.884x speedup, step: 16
JOB test speedup 0.8257726514504158
TPCH test speedup 3.6632294669554835
TPCH skew test speedup 3.5100747696058967
Epoch 20/300 |loss: 0.001359| train set 1.782x speedup, test set 3.510x speedup, val set 0.888x speedup, step: 17
JOB test speedup 1.3025713763954112
TPCH test speedup 3.6632294669554835
TPCH skew test speedup 3.5100747696058967
Epoch 21/300 |loss: 0.001417| train set 1.727x speedup, test set 3.510x speedup, val set 0.888x speedup, step: 18
JOB test speedup 1.6398210416415104
TPCH test speedup 2.0981158816017103
TPCH skew test speedup 2.054823882997423
Epoch 22/300 |loss: 0.001663| train set 1.748x speedup, test set 2.055x speedup, val set 0.887x speedup, step: 19
JOB test speedup 1.0037794686743255
TPCH test speedup 3.6632294669554835
TPCH skew test speedup 3.5100747696058967
Epoch 23/300 |loss: 0.001407| train set 1.779x speedup, test set 3.510x speedup, val set 0.885x speedup, step: 20
JOB test speedup 1.7993721864731784
TPCH test speedup 2.0464184107230095
TPCH skew test speedup 1.9950107069231555
Epoch 24/300 |loss: 0.001450| train set 1.762x speedup, test set 1.995x speedup, val set 0.877x speedup, step: 21
JOB test speedup 1.729123025934938
TPCH test speedup 3.6632294669554835
TPCH skew test speedup 3.5100747696058967
Epoch 25/300 |loss: 0.001392| train set 1.750x speedup, test set 3.510x speedup, val set 0.887x speedup, step: 22
JOB test speedup 1.8138445852234086
TPCH test speedup 3.895839755378227
TPCH skew test speedup 3.6995453343363383
Epoch 26/300 |loss: 0.001234| train set 1.751x speedup, test set 3.700x speedup, val set 0.884x speedup, step: 23
JOB test speedup 0.9980125834479872
TPCH test speedup 2.064409397451185
TPCH skew test speedup 1.9950107069231555
Epoch 27/300 |loss: 0.001158| train set 1.743x speedup, test set 1.995x speedup, val set 0.885x speedup, step: 24
JOB test speedup 1.3444626787541978
TPCH test speedup 2.0464184107230095
TPCH skew test speedup 2.019657282270557
Epoch 28/300 |loss: 0.001155| train set 1.769x speedup, test set 2.020x speedup, val set 0.885x speedup, step: 25
JOB test speedup 1.6897830463040646
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 29/300 |loss: 0.001324| train set 1.771x speedup, test set 4.026x speedup, val set 0.884x speedup, step: 26
JOB test speedup 1.3475790442242186
TPCH test speedup 3.7681570201409547
TPCH skew test speedup 3.626959479895074
Epoch 30/300 |loss: 0.001202| train set 1.718x speedup, test set 3.627x speedup, val set 0.887x speedup, step: 27
JOB test speedup 1.3288826833975507
TPCH test speedup 2.0570895611732127
TPCH skew test speedup 1.9950107069231555
Epoch 31/300 |loss: 0.001136| train set 1.725x speedup, test set 1.995x speedup, val set 0.887x speedup, step: 28
JOB test speedup 1.80535393475739
TPCH test speedup 2.0464184107230095
TPCH skew test speedup 1.9950107069231555
Epoch 32/300 |loss: 0.001251| train set 1.746x speedup, test set 1.995x speedup, val set 0.887x speedup, step: 29
JOB test speedup 1.8335011247228625
TPCH test speedup 3.9915838210528696
TPCH skew test speedup 3.8025333752746966
Epoch 33/300 |loss: 0.001044| train set 1.760x speedup, test set 3.803x speedup, val set 0.887x speedup, step: 30
JOB test speedup 1.8545263051053875
TPCH test speedup 2.064409397451185
TPCH skew test speedup 1.9950107069231555
Epoch 34/300 |loss: 0.001074| train set 1.775x speedup, test set 1.995x speedup, val set 0.884x speedup, step: 31
JOB test speedup 1.8210456156684989
TPCH test speedup 2.064409397451185
TPCH skew test speedup 2.410356012081481
Epoch 35/300 |loss: 0.001083| train set 1.778x speedup, test set 2.410x speedup, val set 0.884x speedup, step: 32
JOB test speedup 1.049780183806456
TPCH test speedup 3.7212820344094926
TPCH skew test speedup 3.5100747696058967
Epoch 36/300 |loss: 0.001030| train set 1.786x speedup, test set 3.510x speedup, val set 0.888x speedup, step: 33
JOB test speedup 1.3062275609029657
TPCH test speedup 3.947245876527522
TPCH skew test speedup 3.8296230852931625
Epoch 37/300 |loss: 0.001078| train set 1.777x speedup, test set 3.830x speedup, val set 0.888x speedup, step: 34
JOB test speedup 1.7995855498040116
TPCH test speedup 4.468887430659456
TPCH skew test speedup 4.196077998496894
Epoch 38/300 |loss: 0.001051| train set 1.774x speedup, test set 4.196x speedup, val set 0.888x speedup, step: 35
JOB test speedup 1.0240654827872948
TPCH test speedup 2.0607159321641144
TPCH skew test speedup 1.9950107069231555
Epoch 39/300 |loss: 0.001060| train set 1.754x speedup, test set 1.995x speedup, val set 0.884x speedup, step: 36
JOB test speedup 1.2553718277210542
TPCH test speedup 3.947245876527522
TPCH skew test speedup 3.8296230852931625
Epoch 40/300 |loss: 0.001042| train set 1.726x speedup, test set 3.830x speedup, val set 0.884x speedup, step: 37
JOB test speedup 0.8297047909914783
TPCH test speedup 3.7681570201409547
TPCH skew test speedup 3.626959479895074
Epoch 41/300 |loss: 0.000942| train set 1.724x speedup, test set 3.627x speedup, val set 0.884x speedup, step: 38
JOB test speedup 1.7268337420853581
TPCH test speedup 2.0570895611732127
TPCH skew test speedup 1.9950107069231555
Epoch 42/300 |loss: 0.000968| train set 1.674x speedup, test set 1.995x speedup, val set 0.887x speedup, step: 39
JOB test speedup 1.064136598599367
TPCH test speedup 2.0570895611732127
TPCH skew test speedup 1.9950107069231555
Epoch 43/300 |loss: 0.001020| train set 1.752x speedup, test set 1.995x speedup, val set 0.885x speedup, step: 40
JOB test speedup 1.8673744534245689
TPCH test speedup 2.0787549970215227
TPCH skew test speedup 2.032234243195789
Epoch 44/300 |loss: 0.001033| train set 1.746x speedup, test set 2.032x speedup, val set 0.888x speedup, step: 41
JOB test speedup 1.909707822105546
TPCH test speedup 2.0787549970215227
TPCH skew test speedup 2.032234243195789
Epoch 45/300 |loss: 0.000883| train set 1.775x speedup, test set 2.032x speedup, val set 0.884x speedup, step: 42
JOB test speedup 1.0422958173861738
TPCH test speedup 2.0787549970215227
TPCH skew test speedup 1.9950107069231555
Epoch 46/300 |loss: 0.000975| train set 1.782x speedup, test set 1.995x speedup, val set 0.887x speedup, step: 43
JOB test speedup 1.8298676254855828
TPCH test speedup 3.7681570201409547
TPCH skew test speedup 3.626959479895074
Epoch 47/300 |loss: 0.000810| train set 1.781x speedup, test set 3.627x speedup, val set 0.884x speedup, step: 44
JOB test speedup 1.0240063234791865
TPCH test speedup 4.259443378596823
TPCH skew test speedup 4.02570868364612
Epoch 48/300 |loss: 0.000940| train set 1.784x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 45
JOB test speedup 1.0100046085796075
TPCH test speedup 4.353392251246143
TPCH skew test speedup 4.180212546578127
Epoch 49/300 |loss: 0.000807| train set 1.782x speedup, test set 4.180x speedup, val set 0.887x speedup, step: 46
JOB test speedup 1.03126631221827
TPCH test speedup 3.6632294669554835
TPCH skew test speedup 3.5100747696058967
Epoch 50/300 |loss: 0.001033| train set 1.744x speedup, test set 3.510x speedup, val set 0.887x speedup, step: 47
JOB test speedup 0.9755697117915012
TPCH test speedup 2.1142109147592754
TPCH skew test speedup 2.0122963586731024
Epoch 51/300 |loss: 0.000817| train set 1.726x speedup, test set 2.012x speedup, val set 0.884x speedup, step: 48
JOB test speedup 1.0098242231871755
TPCH test speedup 3.9297850685758853
TPCH skew test speedup 3.7781388342387836
Epoch 52/300 |loss: 0.000790| train set 1.739x speedup, test set 3.778x speedup, val set 0.888x speedup, step: 49
JOB test speedup 1.0097353049041755
TPCH test speedup 2.0807707070902475
TPCH skew test speedup 1.9950107069231555
Epoch 53/300 |loss: 0.000822| train set 1.777x speedup, test set 1.995x speedup, val set 0.887x speedup, step: 50
JOB test speedup 1.7411378960255965
TPCH test speedup 3.6632294669554835
TPCH skew test speedup 3.626959479895074
Epoch 54/300 |loss: 0.000775| train set 1.782x speedup, test set 3.627x speedup, val set 0.888x speedup, step: 51
JOB test speedup 1.7193110876096513
TPCH test speedup 4.570570932914498
TPCH skew test speedup 4.382316092731446
Epoch 55/300 |loss: 0.000822| train set 1.779x speedup, test set 4.382x speedup, val set 0.888x speedup, step: 52
JOB test speedup 1.7447544099506267
TPCH test speedup 3.9297850685758853
TPCH skew test speedup 3.7781388342387836
Epoch 56/300 |loss: 0.000854| train set 1.763x speedup, test set 3.778x speedup, val set 0.884x speedup, step: 53
early stopping at epoch 56
Training per epoch cost 3.787 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 25.073s, pg runtime 18.741s, speedup 0.747x
03, opt runtime 1.763s, model runtime 2.010s, pg runtime 1.763s, speedup 0.877x
04, opt runtime 1.386s, model runtime 1.551s, pg runtime 1.386s, speedup 0.894x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.393s, speedup 2.504x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.091s, pg runtime 2.558s, speedup 2.346x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.396s, pg runtime 8.605s, speedup 1.025x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 115.088s, pg runtime 78.349s, speedup 0.681x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 83.069s, pg runtime 83.069s, speedup 1.000x
15, opt runtime 47.518s, model runtime 75.736s, pg runtime 75.736s, speedup 1.000x
16, opt runtime 48.067s, model runtime 105.466s, pg runtime 81.014s, speedup 0.768x
17, opt runtime 47.738s, model runtime 112.310s, pg runtime 76.021s, speedup 0.677x
18, opt runtime 47.804s, model runtime 107.236s, pg runtime 81.177s, speedup 0.757x
19, opt runtime 49.511s, model runtime 87.329s, pg runtime 87.329s, speedup 1.000x
20, opt runtime 51.276s, model runtime 106.998s, pg runtime 79.222s, speedup 0.740x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 16.268s, pg runtime 432.766s, speedup 26.603x
32, opt runtime 15.120s, model runtime 16.499s, pg runtime 566.078s, speedup 34.310x
33, opt runtime 16.639s, model runtime 16.639s, pg runtime 462.544s, speedup 27.800x
34, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
35, opt runtime 16.528s, model runtime 16.528s, pg runtime 620.762s, speedup 37.558x
36, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
37, opt runtime 16.438s, model runtime 16.438s, pg runtime 546.887s, speedup 33.269x
38, opt runtime 16.138s, model runtime 16.138s, pg runtime 501.793s, speedup 31.094x
39, opt runtime 16.770s, model runtime 16.770s, pg runtime 594.754s, speedup 35.464x
40, opt runtime 16.305s, model runtime 16.305s, pg runtime 436.168s, speedup 26.751x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 108.405s, pg runtime 80.711s, speedup 0.745x
12, opt runtime 53.203s, model runtime 110.198s, pg runtime 79.156s, speedup 0.718x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 108.531s, pg runtime 77.674s, speedup 0.716x
16, opt runtime 47.844s, model runtime 105.990s, pg runtime 80.007s, speedup 0.755x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 112.519s, pg runtime 77.369s, speedup 0.688x
19, opt runtime 52.382s, model runtime 117.620s, pg runtime 82.710s, speedup 0.703x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 16.761s, pg runtime 602.586s, speedup 35.953x
32, opt runtime 16.542s, model runtime 16.542s, pg runtime 461.957s, speedup 27.927x
33, opt runtime 16.136s, model runtime 16.358s, pg runtime 410.283s, speedup 25.082x
34, opt runtime 14.422s, model runtime 16.624s, pg runtime 497.542s, speedup 29.930x
35, opt runtime 15.980s, model runtime 16.320s, pg runtime 504.239s, speedup 30.897x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
38, opt runtime 16.194s, model runtime 16.194s, pg runtime 439.255s, speedup 27.124x
39, opt runtime 16.149s, model runtime 16.149s, pg runtime 423.122s, speedup 26.201x
40, opt runtime 13.751s, model runtime 16.582s, pg runtime 434.625s, speedup 26.210x
====================
JOB best validation speedup epoch: 4, train speedup 1.340, test speedup 1.711, val speedup 0.950
TPCH best validation speedup epoch: 4, train speedup 1.340, test speedup 4.815, val speedup 0.950
TPCH Skew best validation speedup epoch: 4, train speedup 1.340, test speedup 4.374, val speedup 0.950
execution cost 0:04:49.837512
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.241778, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.9975725197571982
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010600| train set 0.960x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007437| train set 1.011x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 0.9865236720411131
TPCH test speedup 1.76351519454564
TPCH skew test speedup 1.6974276358244909
Epoch 3/300 |loss: 0.005912| train set 1.054x speedup, test set 1.697x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0210930390968456
TPCH test speedup 1.8918229295790756
TPCH skew test speedup 1.8253867403459019
Epoch 4/300 |loss: 0.005102| train set 1.523x speedup, test set 1.825x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.7624658705317924
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.6974864140976704
Epoch 5/300 |loss: 0.004480| train set 1.499x speedup, test set 1.697x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.0378675394807837
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.004031| train set 1.582x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 7
JOB test speedup 1.0228886679672702
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003596| train set 1.519x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 8
JOB test speedup 1.0494881238652343
TPCH test speedup 1.735923420144999
TPCH skew test speedup 1.6550416000314938
Epoch 8/300 |loss: 0.003414| train set 1.583x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 9
JOB test speedup 1.0187750850071458
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003440| train set 1.523x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8744035243155345
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003075| train set 1.586x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 2
JOB test speedup 1.0643162331266267
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002769| train set 1.714x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 3
JOB test speedup 1.018279133364448
TPCH test speedup 1.0612831777620786
TPCH skew test speedup 1.3062150060474722
Epoch 12/300 |loss: 0.002649| train set 1.674x speedup, test set 1.306x speedup, val set 0.879x speedup, step: 4
JOB test speedup 0.8249315361139281
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002417| train set 1.450x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8513963036611535
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 14/300 |loss: 0.002734| train set 1.744x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 6
JOB test speedup 1.0358999787235192
TPCH test speedup 1.7444038560896133
TPCH skew test speedup 1.670699807589857
Epoch 15/300 |loss: 0.002348| train set 1.746x speedup, test set 1.671x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8369458058998179
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002389| train set 1.526x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.8636797591226208
TPCH test speedup 1.8769557604217624
TPCH skew test speedup 1.7530930769298436
Epoch 17/300 |loss: 0.002299| train set 1.724x speedup, test set 1.753x speedup, val set 0.880x speedup, step: 9
JOB test speedup 0.8636963057644893
TPCH test speedup 4.3159133280675
TPCH skew test speedup 3.918954345095609
Epoch 18/300 |loss: 0.001885| train set 1.744x speedup, test set 3.919x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8395690871865923
TPCH test speedup 4.552487235561491
TPCH skew test speedup 4.156632264342648
Epoch 19/300 |loss: 0.001712| train set 1.538x speedup, test set 4.157x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8703562397290941
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 20/300 |loss: 0.001626| train set 1.717x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.8640017704404156
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 21/300 |loss: 0.001903| train set 1.774x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.8554503090859644
TPCH test speedup 3.6749302587400248
TPCH skew test speedup 3.6446678131503827
Epoch 22/300 |loss: 0.001616| train set 1.787x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 14
JOB test speedup 1.326469484030013
TPCH test speedup 4.552487235561491
TPCH skew test speedup 4.156632264342648
Epoch 23/300 |loss: 0.001457| train set 1.731x speedup, test set 4.157x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8684636733651678
TPCH test speedup 3.6749302587400248
TPCH skew test speedup 3.6446678131503827
Epoch 24/300 |loss: 0.001557| train set 1.756x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 16
JOB test speedup 0.8454459543101763
TPCH test speedup 3.6749302587400248
TPCH skew test speedup 3.6446678131503827
Epoch 25/300 |loss: 0.001295| train set 1.761x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.8504118312763318
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 26/300 |loss: 0.001398| train set 1.733x speedup, test set 3.882x speedup, val set 0.886x speedup, step: 18
JOB test speedup 0.8480892338982557
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 27/300 |loss: 0.001359| train set 1.792x speedup, test set 3.461x speedup, val set 0.887x speedup, step: 19
JOB test speedup 0.825325245351808
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 28/300 |loss: 0.001430| train set 1.789x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 20
JOB test speedup 0.873025624592513
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 29/300 |loss: 0.001314| train set 1.792x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 21
JOB test speedup 1.0993743080540774
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 30/300 |loss: 0.001253| train set 1.795x speedup, test set 3.882x speedup, val set 0.887x speedup, step: 22
JOB test speedup 0.8658803190434178
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 31/300 |loss: 0.001322| train set 1.785x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 23
JOB test speedup 0.8538050489732467
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 32/300 |loss: 0.001224| train set 1.737x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 24
JOB test speedup 0.8847509609782009
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 33/300 |loss: 0.001229| train set 1.787x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 25
JOB test speedup 1.0827838287647238
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 34/300 |loss: 0.001174| train set 1.782x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 26
JOB test speedup 0.8319933159604592
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 35/300 |loss: 0.001126| train set 1.745x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 27
JOB test speedup 0.8837472725851491
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 36/300 |loss: 0.001035| train set 1.740x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 28
JOB test speedup 0.8570162194345675
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 37/300 |loss: 0.001100| train set 1.794x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 29
JOB test speedup 0.8719300425100975
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 38/300 |loss: 0.001073| train set 1.794x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 30
JOB test speedup 0.8538813712761599
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 39/300 |loss: 0.001072| train set 1.757x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 31
JOB test speedup 0.8645863631385569
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 40/300 |loss: 0.001048| train set 1.759x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 32
JOB test speedup 0.8857931441956121
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 41/300 |loss: 0.001057| train set 1.738x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 33
JOB test speedup 0.8498382139551798
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 42/300 |loss: 0.001067| train set 1.775x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 34
JOB test speedup 0.868908525124057
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 43/300 |loss: 0.001067| train set 1.741x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 35
JOB test speedup 0.8740174334495207
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 44/300 |loss: 0.000988| train set 1.772x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 36
JOB test speedup 0.874975122984719
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 45/300 |loss: 0.000989| train set 1.758x speedup, test set 4.026x speedup, val set 0.879x speedup, step: 37
JOB test speedup 0.865352939406979
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 46/300 |loss: 0.000958| train set 1.792x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 38
JOB test speedup 0.8688505497638576
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 47/300 |loss: 0.000981| train set 1.770x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 39
JOB test speedup 1.324844507995827
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 48/300 |loss: 0.000928| train set 1.794x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 40
JOB test speedup 1.3611759093422855
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 49/300 |loss: 0.000875| train set 1.791x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 41
JOB test speedup 0.8914732973572
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 50/300 |loss: 0.001017| train set 1.789x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 42
JOB test speedup 1.4200347693247064
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 51/300 |loss: 0.000890| train set 1.759x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 43
JOB test speedup 1.2969942828500063
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 52/300 |loss: 0.001023| train set 1.759x speedup, test set 4.026x speedup, val set 0.878x speedup, step: 44
JOB test speedup 0.8704432341422276
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 53/300 |loss: 0.000846| train set 1.792x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 45
JOB test speedup 0.8712535757104614
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 54/300 |loss: 0.000878| train set 1.746x speedup, test set 4.026x speedup, val set 0.879x speedup, step: 46
JOB test speedup 0.9936281249097361
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 55/300 |loss: 0.000914| train set 1.796x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 47
JOB test speedup 1.350097234513092
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 56/300 |loss: 0.000874| train set 1.794x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 48
JOB test speedup 0.8786721505110311
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 57/300 |loss: 0.000807| train set 1.740x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 49
JOB test speedup 0.877303761987925
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 58/300 |loss: 0.000836| train set 1.796x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 50
JOB test speedup 0.9056512383424584
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 59/300 |loss: 0.000796| train set 1.760x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 51
JOB test speedup 0.8700707085001633
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 60/300 |loss: 0.000818| train set 1.791x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 52
JOB test speedup 0.8835286440639832
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 61/300 |loss: 0.000830| train set 1.739x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 53
JOB test speedup 0.8836773980137759
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 62/300 |loss: 0.000763| train set 1.768x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 54
JOB test speedup 0.8601307489577141
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 63/300 |loss: 0.000778| train set 1.744x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 55
JOB test speedup 0.8922393580455692
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 64/300 |loss: 0.000808| train set 1.794x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 56
JOB test speedup 0.8432072848767795
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 65/300 |loss: 0.000799| train set 1.788x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 57
JOB test speedup 1.39732935458849
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 66/300 |loss: 0.000825| train set 1.760x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 58
JOB test speedup 0.9312505844180713
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 67/300 |loss: 0.001103| train set 1.737x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 59
JOB test speedup 0.8840803267628693
TPCH test speedup 4.652691795535132
TPCH skew test speedup 4.620941070990079
Epoch 68/300 |loss: 0.000971| train set 1.794x speedup, test set 4.621x speedup, val set 0.880x speedup, step: 60
early stopping at epoch 68
Training per epoch cost 2.896 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 2.010s, pg runtime 1.763s, speedup 0.877x
04, opt runtime 1.386s, model runtime 1.551s, pg runtime 1.386s, speedup 0.894x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.875s, pg runtime 2.352s, speedup 2.688x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 6.021s, pg runtime 6.089s, speedup 1.011x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.332s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.379s, pg runtime 3.645s, speedup 9.614x
20, opt runtime 0.626s, model runtime 1.404s, pg runtime 2.558s, speedup 1.822x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.818s, pg runtime 8.279s, speedup 0.765x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 9, train speedup 1.523, test speedup 1.019, val speedup 0.888
TPCH best validation speedup epoch: 9, train speedup 1.523, test speedup 1.709, val speedup 0.888
TPCH Skew best validation speedup epoch: 9, train speedup 1.523, test speedup 1.655, val speedup 0.888
execution cost 0:04:31.834157
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.265463, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.9975725197571982
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010600| train set 0.960x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007437| train set 1.011x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.6451523613673051
TPCH test speedup 1.8700943585156096
TPCH skew test speedup 1.8237323685257538
Epoch 3/300 |loss: 0.005898| train set 1.059x speedup, test set 1.824x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0297387683658128
TPCH test speedup 1.9988084369672123
TPCH skew test speedup 1.9593515161698005
Epoch 4/300 |loss: 0.005060| train set 1.519x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.0331596244660002
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 5/300 |loss: 0.004483| train set 1.531x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.0224586182338375
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.004028| train set 1.581x speedup, test set 1.656x speedup, val set 0.887x speedup, step: 7
JOB test speedup 1.0336260057883777
TPCH test speedup 1.7051227289365205
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003636| train set 1.519x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 8
JOB test speedup 1.810999778040005
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 8/300 |loss: 0.003446| train set 1.577x speedup, test set 1.656x speedup, val set 0.888x speedup, step: 9
JOB test speedup 1.7565961406274746
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003477| train set 1.569x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.0508007403663846
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003109| train set 1.528x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.0677951176184968
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002849| train set 1.692x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.0528509511415067
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002857| train set 1.502x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 4
JOB test speedup 1.0331191491153922
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 13/300 |loss: 0.002408| train set 1.510x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 5
JOB test speedup 1.0657417434740344
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002572| train set 1.792x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.8755155476502791
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002331| train set 1.499x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8494463275810095
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002336| train set 1.779x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 8
JOB test speedup 1.8254070528322917
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002331| train set 1.750x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 9
JOB test speedup 0.8662986283809216
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 18/300 |loss: 0.001921| train set 1.708x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8685326958769733
TPCH test speedup 1.0198010640062136
TPCH skew test speedup 0.9960837448892246
Epoch 19/300 |loss: 0.001715| train set 1.748x speedup, test set 0.996x speedup, val set 0.621x speedup, step: 11
JOB test speedup 0.862470647085652
TPCH test speedup 1.0173138002614055
TPCH skew test speedup 0.9960837448892246
Epoch 20/300 |loss: 0.001713| train set 1.713x speedup, test set 0.996x speedup, val set 0.880x speedup, step: 12
JOB test speedup 1.0135166548778425
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.002010| train set 1.789x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.8440301638707892
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 22/300 |loss: 0.001619| train set 1.736x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 14
JOB test speedup 0.8382209557431396
TPCH test speedup 2.4689135851566104
TPCH skew test speedup 1.919939125625158
Epoch 23/300 |loss: 0.001506| train set 1.691x speedup, test set 1.920x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8745010995674666
TPCH test speedup 1.4928416716645907
TPCH skew test speedup 1.483479981247498
Epoch 24/300 |loss: 0.001559| train set 1.753x speedup, test set 1.483x speedup, val set 0.886x speedup, step: 16
JOB test speedup 0.8778267351793985
TPCH test speedup 3.6749302587400248
TPCH skew test speedup 3.6446678131503827
Epoch 25/300 |loss: 0.001357| train set 1.707x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 17
JOB test speedup 1.3860850353504623
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 26/300 |loss: 0.001385| train set 1.783x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 18
JOB test speedup 0.8661209623410957
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 27/300 |loss: 0.001325| train set 1.787x speedup, test set 1.696x speedup, val set 0.621x speedup, step: 19
JOB test speedup 0.8757948543257508
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7457390906134624
Epoch 28/300 |loss: 0.001400| train set 1.755x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 20
JOB test speedup 0.8883188793148705
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 29/300 |loss: 0.001291| train set 1.793x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 21
JOB test speedup 0.8841473190079389
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 30/300 |loss: 0.001208| train set 1.692x speedup, test set 4.026x speedup, val set 0.845x speedup, step: 22
JOB test speedup 0.8829056178758555
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 31/300 |loss: 0.001265| train set 1.789x speedup, test set 3.882x speedup, val set 0.886x speedup, step: 23
JOB test speedup 0.8597534165022906
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 32/300 |loss: 0.001187| train set 1.739x speedup, test set 3.882x speedup, val set 0.624x speedup, step: 24
JOB test speedup 0.8816347347822294
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 33/300 |loss: 0.001178| train set 1.755x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 25
JOB test speedup 0.8819049810172312
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.6974864140976704
Epoch 34/300 |loss: 0.001142| train set 1.692x speedup, test set 1.697x speedup, val set 0.886x speedup, step: 26
JOB test speedup 0.8620235801618419
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 35/300 |loss: 0.001074| train set 1.744x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 27
JOB test speedup 0.8610530832521806
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 36/300 |loss: 0.001011| train set 1.743x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 28
JOB test speedup 0.8780384010421728
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 37/300 |loss: 0.001106| train set 1.795x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 29
JOB test speedup 0.880129718329852
TPCH test speedup 4.103564353368715
TPCH skew test speedup 4.025897149096412
Epoch 38/300 |loss: 0.001064| train set 1.756x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 30
JOB test speedup 0.8695862716001869
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6872971295676944
Epoch 39/300 |loss: 0.001045| train set 1.740x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 31
JOB test speedup 0.9776178534204666
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 40/300 |loss: 0.001073| train set 1.743x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 32
JOB test speedup 0.8839812712253478
TPCH test speedup 1.7831192294143967
TPCH skew test speedup 1.7201325116188597
Epoch 41/300 |loss: 0.001035| train set 1.740x speedup, test set 1.720x speedup, val set 0.880x speedup, step: 33
JOB test speedup 0.8766154644578655
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 42/300 |loss: 0.001111| train set 1.726x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 34
JOB test speedup 0.8713581176311047
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 43/300 |loss: 0.001086| train set 1.743x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 35
JOB test speedup 0.8647588579430882
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 44/300 |loss: 0.000951| train set 1.761x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 36
JOB test speedup 0.8395535795044794
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 45/300 |loss: 0.000952| train set 1.760x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 37
JOB test speedup 0.8748346223201942
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 46/300 |loss: 0.000981| train set 1.791x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 38
JOB test speedup 0.8478330640452011
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 47/300 |loss: 0.000954| train set 1.773x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 39
JOB test speedup 0.8788816627212173
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 48/300 |loss: 0.000915| train set 1.793x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 40
JOB test speedup 1.24478796407976
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 49/300 |loss: 0.000940| train set 1.787x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 41
JOB test speedup 0.8771525212305791
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 50/300 |loss: 0.001145| train set 1.712x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 42
JOB test speedup 0.8531625097972596
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 51/300 |loss: 0.000855| train set 1.795x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 43
JOB test speedup 0.8761491564392737
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 52/300 |loss: 0.000974| train set 1.792x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 44
JOB test speedup 0.8833502764734118
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 53/300 |loss: 0.000860| train set 1.794x speedup, test set 4.026x speedup, val set 0.879x speedup, step: 45
JOB test speedup 0.8815053396574178
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 54/300 |loss: 0.000851| train set 1.798x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 46
JOB test speedup 0.8424214763291104
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 55/300 |loss: 0.000921| train set 1.796x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 47
JOB test speedup 0.8441938706529737
TPCH test speedup 1.9360424540716965
TPCH skew test speedup 1.8473043475166477
Epoch 56/300 |loss: 0.000820| train set 1.775x speedup, test set 1.847x speedup, val set 0.886x speedup, step: 48
JOB test speedup 0.876407959837283
TPCH test speedup 3.603626570670623
TPCH skew test speedup 3.598006140158666
Epoch 57/300 |loss: 0.000807| train set 1.789x speedup, test set 3.598x speedup, val set 0.880x speedup, step: 49
JOB test speedup 0.8737464840907733
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 58/300 |loss: 0.000887| train set 1.792x speedup, test set 3.645x speedup, val set 0.886x speedup, step: 50
JOB test speedup 1.3601155403742926
TPCH test speedup 1.788251335008736
TPCH skew test speedup 1.7023768154371746
Epoch 59/300 |loss: 0.000821| train set 1.765x speedup, test set 1.702x speedup, val set 0.885x speedup, step: 51
JOB test speedup 0.8396317231240692
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 60/300 |loss: 0.000830| train set 1.792x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 52
JOB test speedup 0.8490551382735765
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7496104470731135
Epoch 61/300 |loss: 0.000796| train set 1.794x speedup, test set 1.750x speedup, val set 0.880x speedup, step: 53
JOB test speedup 0.8353790690047307
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 62/300 |loss: 0.000797| train set 1.758x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 54
JOB test speedup 1.2842123443416147
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 63/300 |loss: 0.000752| train set 1.761x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 55
JOB test speedup 0.8896425328498443
TPCH test speedup 3.635031615358479
TPCH skew test speedup 3.598006140158666
Epoch 64/300 |loss: 0.000893| train set 1.798x speedup, test set 3.598x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8351443184422455
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 65/300 |loss: 0.000749| train set 1.793x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.879899581772373
TPCH test speedup 1.7803360946385502
TPCH skew test speedup 1.7030469300909477
Epoch 66/300 |loss: 0.000785| train set 1.758x speedup, test set 1.703x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.0498112097262877
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 67/300 |loss: 0.001097| train set 1.792x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8779805311457414
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 68/300 |loss: 0.000820| train set 1.798x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8782180542524574
TPCH test speedup 3.603626570670623
TPCH skew test speedup 3.598006140158666
Epoch 69/300 |loss: 0.000797| train set 1.797x speedup, test set 3.598x speedup, val set 0.879x speedup, step: 6
JOB test speedup 1.2958231866197432
TPCH test speedup 4.0631913607441605
TPCH skew test speedup 3.9690395449190925
Epoch 70/300 |loss: 0.000760| train set 1.794x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 7
JOB test speedup 1.059582761519126
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 71/300 |loss: 0.000784| train set 1.743x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 8
JOB test speedup 0.8551852343778342
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 72/300 |loss: 0.000699| train set 1.797x speedup, test set 1.763x speedup, val set 0.880x speedup, step: 9
JOB test speedup 0.8730645765656644
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 73/300 |loss: 0.000839| train set 1.789x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8340471154832193
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 74/300 |loss: 0.000859| train set 1.796x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 11
early stopping at epoch 74
Training per epoch cost 2.936 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 2.298s, pg runtime 4.730s, speedup 2.058x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 64, train speedup 1.798, test speedup 0.890, val speedup 0.888
TPCH best validation speedup epoch: 64, train speedup 1.798, test speedup 3.635, val speedup 0.888
TPCH Skew best validation speedup epoch: 64, train speedup 1.798, test speedup 3.598, val speedup 0.888
execution cost 0:04:59.370173
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.308031, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.9975725197571982
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010600| train set 0.960x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007438| train set 1.010x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 0.9865236720411131
TPCH test speedup 1.8272208077959071
TPCH skew test speedup 1.7667928222922054
Epoch 3/300 |loss: 0.005909| train set 1.057x speedup, test set 1.767x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0210930390968456
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005061| train set 1.518x speedup, test set 1.825x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.7855873079273388
TPCH test speedup 1.0266630305325042
TPCH skew test speedup 0.9965973198564567
Epoch 5/300 |loss: 0.004478| train set 1.501x speedup, test set 0.997x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.0311235192485362
TPCH test speedup 1.0687167765629444
TPCH skew test speedup 1.3070983120910145
Epoch 6/300 |loss: 0.004045| train set 1.584x speedup, test set 1.307x speedup, val set 0.564x speedup, step: 7
JOB test speedup 1.0136791887416539
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003640| train set 1.519x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 8
JOB test speedup 1.8185441032373184
TPCH test speedup 1.7637938982469183
TPCH skew test speedup 1.698284385450882
Epoch 8/300 |loss: 0.003512| train set 1.567x speedup, test set 1.698x speedup, val set 0.886x speedup, step: 9
JOB test speedup 1.689797538299283
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003458| train set 1.526x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.0332723512073672
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003025| train set 1.540x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 2
JOB test speedup 1.032340336952396
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002941| train set 1.716x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 3
JOB test speedup 0.9793046489835558
TPCH test speedup 1.0198010640062136
TPCH skew test speedup 0.9960837448892246
Epoch 12/300 |loss: 0.002813| train set 1.500x speedup, test set 0.996x speedup, val set 0.878x speedup, step: 4
JOB test speedup 0.8208991795037222
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002388| train set 1.454x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 5
JOB test speedup 0.987322007091545
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002577| train set 1.758x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 6
JOB test speedup 0.9819491436462586
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002330| train set 1.727x speedup, test set 1.655x speedup, val set 0.878x speedup, step: 7
JOB test speedup 1.3836626441878441
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002310| train set 1.779x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 8
JOB test speedup 1.791491527571657
TPCH test speedup 1.0198010640062136
TPCH skew test speedup 0.9960837448892246
Epoch 17/300 |loss: 0.002316| train set 1.777x speedup, test set 0.996x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.3336752720390477
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 18/300 |loss: 0.001837| train set 1.739x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8356163212662338
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 19/300 |loss: 0.001727| train set 1.756x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8649648047222633
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.646755817278369
Epoch 20/300 |loss: 0.001659| train set 1.747x speedup, test set 1.647x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.8633801355962298
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.646755817278369
Epoch 21/300 |loss: 0.001930| train set 1.788x speedup, test set 1.647x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.8583984025921736
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 22/300 |loss: 0.001583| train set 1.785x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 14
JOB test speedup 1.3595699545439164
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 23/300 |loss: 0.001463| train set 1.733x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8830063186060233
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 24/300 |loss: 0.001510| train set 1.736x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.865331522496291
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 25/300 |loss: 0.001329| train set 1.758x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8697297010542505
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 26/300 |loss: 0.001474| train set 1.741x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.8697104436791732
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 27/300 |loss: 0.001327| train set 1.747x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8578723766802577
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 28/300 |loss: 0.001364| train set 1.789x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8669156352010919
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 29/300 |loss: 0.001292| train set 1.793x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.8600683902892627
TPCH test speedup 1.7504678780432583
TPCH skew test speedup 1.6872971295676944
Epoch 30/300 |loss: 0.001241| train set 1.741x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8567668777145656
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6550416000314938
Epoch 31/300 |loss: 0.001246| train set 1.792x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.860134447909153
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 32/300 |loss: 0.001250| train set 1.739x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 9
JOB test speedup 0.8746168196133317
TPCH test speedup 3.6749302587400248
TPCH skew test speedup 3.6047261949907274
Epoch 33/300 |loss: 0.001240| train set 1.788x speedup, test set 3.605x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8561518574238036
TPCH test speedup 1.7875892638108504
TPCH skew test speedup 1.7457390906134624
Epoch 34/300 |loss: 0.001248| train set 1.690x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8379148625704732
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7365228192637485
Epoch 35/300 |loss: 0.001120| train set 1.740x speedup, test set 1.737x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.881680585707714
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 36/300 |loss: 0.001035| train set 1.738x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.874789409644632
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 37/300 |loss: 0.001038| train set 1.790x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 14
JOB test speedup 1.0350607611849703
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 38/300 |loss: 0.001110| train set 1.786x speedup, test set 4.026x speedup, val set 0.876x speedup, step: 15
JOB test speedup 0.8616169295024875
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 39/300 |loss: 0.001047| train set 1.775x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 16
JOB test speedup 1.6889905795022377
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 40/300 |loss: 0.001020| train set 1.715x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 17
JOB test speedup 1.0712987831810172
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 41/300 |loss: 0.001073| train set 1.740x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 18
JOB test speedup 1.0269256854789077
TPCH test speedup 4.465906145348936
TPCH skew test speedup 4.2165288807887125
Epoch 42/300 |loss: 0.001083| train set 1.769x speedup, test set 4.217x speedup, val set 0.876x speedup, step: 19
JOB test speedup 0.8985778590005736
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 43/300 |loss: 0.001036| train set 1.743x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 20
JOB test speedup 0.8727433600306279
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 44/300 |loss: 0.000940| train set 1.740x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 21
JOB test speedup 0.8658096079204118
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 45/300 |loss: 0.000997| train set 1.729x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 22
JOB test speedup 0.8563391379517571
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 46/300 |loss: 0.000975| train set 1.790x speedup, test set 4.026x speedup, val set 0.882x speedup, step: 23
JOB test speedup 1.0297907041570986
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 47/300 |loss: 0.000925| train set 1.766x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 24
JOB test speedup 0.9686243191871626
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 48/300 |loss: 0.000914| train set 1.779x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 25
JOB test speedup 1.0723276081117277
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 49/300 |loss: 0.000925| train set 1.792x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 1
JOB test speedup 0.8610617658042399
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 50/300 |loss: 0.000991| train set 1.728x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 2
JOB test speedup 0.8594187308232931
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 51/300 |loss: 0.000838| train set 1.763x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 3
JOB test speedup 0.8847230791193372
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 52/300 |loss: 0.000965| train set 1.788x speedup, test set 4.026x speedup, val set 0.877x speedup, step: 4
JOB test speedup 0.922177777760881
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2820540295576366
Epoch 53/300 |loss: 0.000798| train set 1.792x speedup, test set 1.282x speedup, val set 0.887x speedup, step: 5
JOB test speedup 0.9102605931610439
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 54/300 |loss: 0.000857| train set 1.763x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.1249901404290008
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 55/300 |loss: 0.000907| train set 1.798x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 2
JOB test speedup 1.6760036638896334
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 56/300 |loss: 0.000904| train set 1.775x speedup, test set 2.152x speedup, val set 0.879x speedup, step: 3
JOB test speedup 1.0665309973345105
TPCH test speedup 1.7591109078395941
TPCH skew test speedup 1.4417025411221245
Epoch 57/300 |loss: 0.000808| train set 1.788x speedup, test set 1.442x speedup, val set 0.888x speedup, step: 4
JOB test speedup 2.0100660441000993
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.9768374609104815
Epoch 58/300 |loss: 0.000825| train set 1.748x speedup, test set 3.977x speedup, val set 0.888x speedup, step: 5
JOB test speedup 2.1107290475307576
TPCH test speedup 1.8632964496738567
TPCH skew test speedup 1.8070414501325278
Epoch 59/300 |loss: 0.000836| train set 1.790x speedup, test set 1.807x speedup, val set 0.888x speedup, step: 6
JOB test speedup 0.8997219312790872
TPCH test speedup 1.31806669520416
TPCH skew test speedup 1.2820540295576366
Epoch 60/300 |loss: 0.000841| train set 1.793x speedup, test set 1.282x speedup, val set 0.884x speedup, step: 7
JOB test speedup 0.9317213210585757
TPCH test speedup 1.3182492983079153
TPCH skew test speedup 1.2820540295576366
Epoch 61/300 |loss: 0.000844| train set 1.792x speedup, test set 1.282x speedup, val set 0.888x speedup, step: 8
JOB test speedup 0.8652744388336178
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 62/300 |loss: 0.000778| train set 1.742x speedup, test set 2.152x speedup, val set 0.888x speedup, step: 9
JOB test speedup 1.4050105392245387
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 63/300 |loss: 0.000784| train set 1.762x speedup, test set 2.152x speedup, val set 0.876x speedup, step: 10
JOB test speedup 0.9063440581656452
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 64/300 |loss: 0.000878| train set 1.796x speedup, test set 1.774x speedup, val set 0.877x speedup, step: 11
JOB test speedup 0.9186379170172182
TPCH test speedup 1.3182492983079153
TPCH skew test speedup 1.2820540295576366
Epoch 65/300 |loss: 0.000850| train set 1.792x speedup, test set 1.282x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.8865782216565572
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2820540295576366
Epoch 66/300 |loss: 0.000751| train set 1.764x speedup, test set 1.282x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.8969829408721536
TPCH test speedup 1.3089586379485694
TPCH skew test speedup 1.2762319732290495
Epoch 67/300 |loss: 0.000956| train set 1.790x speedup, test set 1.276x speedup, val set 0.888x speedup, step: 14
JOB test speedup 0.9024692421345816
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 68/300 |loss: 0.000824| train set 1.795x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 15
JOB test speedup 1.0426337933667535
TPCH test speedup 1.3182492983079153
TPCH skew test speedup 1.2820540295576366
Epoch 69/300 |loss: 0.000843| train set 1.794x speedup, test set 1.282x speedup, val set 0.880x speedup, step: 16
JOB test speedup 1.5136488008150202
TPCH test speedup 1.3240841889255222
TPCH skew test speedup 1.450042533828909
Epoch 70/300 |loss: 0.000695| train set 1.792x speedup, test set 1.450x speedup, val set 0.880x speedup, step: 17
JOB test speedup 1.9274730568373213
TPCH test speedup 4.385871362338195
TPCH skew test speedup 4.199202171117513
Epoch 71/300 |loss: 0.000804| train set 1.740x speedup, test set 4.199x speedup, val set 0.884x speedup, step: 18
JOB test speedup 2.0667210415450867
TPCH test speedup 1.3089586379485694
TPCH skew test speedup 1.2762319732290495
Epoch 72/300 |loss: 0.000764| train set 1.796x speedup, test set 1.276x speedup, val set 0.877x speedup, step: 19
JOB test speedup 0.8586675629337882
TPCH test speedup 2.2018572651317085
TPCH skew test speedup 2.1517034114149443
Epoch 73/300 |loss: 0.000929| train set 1.767x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 20
JOB test speedup 0.9279926101689709
TPCH test speedup 2.1656107719363797
TPCH skew test speedup 2.1517034114149443
Epoch 74/300 |loss: 0.000857| train set 1.793x speedup, test set 2.152x speedup, val set 0.880x speedup, step: 21
early stopping at epoch 74
Training per epoch cost 2.955 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 54, train speedup 1.763, test speedup 0.910, val speedup 0.888
TPCH best validation speedup epoch: 54, train speedup 1.763, test speedup 4.064, val speedup 0.888
TPCH Skew best validation speedup epoch: 54, train speedup 1.763, test speedup 4.026, val speedup 0.888
execution cost 0:05:02.135016
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.250039, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.9975725197571982
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010600| train set 0.960x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007439| train set 1.010x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 0.9784717341773644
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 3/300 |loss: 0.005922| train set 1.057x speedup, test set 1.656x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0318317969387159
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005059| train set 1.518x speedup, test set 1.825x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.8065482247440605
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 5/300 |loss: 0.004460| train set 1.532x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.0378675394807837
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.004040| train set 1.540x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 7
JOB test speedup 1.0165016498377053
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003678| train set 1.493x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 8
JOB test speedup 1.0521309492968907
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 8/300 |loss: 0.003491| train set 1.520x speedup, test set 1.656x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.769199641437059
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003471| train set 1.524x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 1
JOB test speedup 1.053188404578295
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003096| train set 1.725x speedup, test set 1.655x speedup, val set 0.878x speedup, step: 2
JOB test speedup 1.0838203464596947
TPCH test speedup 1.7017541945053822
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002873| train set 1.697x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 3
JOB test speedup 1.0464601211941102
TPCH test speedup 1.7033088414333177
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002803| train set 1.674x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 4
JOB test speedup 0.8568942344510722
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002400| train set 1.511x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.880454840381971
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002583| train set 1.760x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 6
JOB test speedup 1.0108325038481174
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002335| train set 1.524x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8819611789787726
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002380| train set 1.740x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 8
JOB test speedup 1.046383746464295
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002270| train set 1.699x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 9
JOB test speedup 1.0193124937569202
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 18/300 |loss: 0.001918| train set 1.714x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 10
JOB test speedup 0.9076234913594448
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 19/300 |loss: 0.001780| train set 1.691x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8725203121723183
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 20/300 |loss: 0.001705| train set 1.718x speedup, test set 1.655x speedup, val set 0.989x speedup, step: 12
JOB test speedup 0.8698686737645843
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.002009| train set 1.757x speedup, test set 1.655x speedup, val set 0.989x speedup, step: 13
JOB test speedup 0.8982606479406767
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 22/300 |loss: 0.001676| train set 1.789x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 14
JOB test speedup 0.8739628357556628
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.6974864140976704
Epoch 23/300 |loss: 0.001523| train set 1.765x speedup, test set 1.697x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8712999746920042
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7457390906134624
Epoch 24/300 |loss: 0.001532| train set 1.731x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 16
JOB test speedup 0.8759028358162574
TPCH test speedup 1.7373525702366297
TPCH skew test speedup 1.6959969855885142
Epoch 25/300 |loss: 0.001387| train set 1.755x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.8680565638473292
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.6974864140976704
Epoch 26/300 |loss: 0.001431| train set 1.734x speedup, test set 1.697x speedup, val set 0.886x speedup, step: 18
JOB test speedup 0.8688400984998256
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 27/300 |loss: 0.001415| train set 1.789x speedup, test set 1.696x speedup, val set 0.968x speedup, step: 19
JOB test speedup 0.8686563261602458
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 28/300 |loss: 0.001507| train set 1.788x speedup, test set 1.696x speedup, val set 0.904x speedup, step: 20
JOB test speedup 1.3763291467458172
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7457390906134624
Epoch 29/300 |loss: 0.001339| train set 1.795x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 21
JOB test speedup 0.9002959432619875
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.6974864140976704
Epoch 30/300 |loss: 0.001271| train set 1.793x speedup, test set 1.697x speedup, val set 0.999x speedup, step: 22
JOB test speedup 0.8593850602059311
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 31/300 |loss: 0.001327| train set 1.794x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 23
JOB test speedup 0.8548332933423055
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 32/300 |loss: 0.001241| train set 1.791x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 24
JOB test speedup 0.8783633396628723
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 33/300 |loss: 0.001232| train set 1.786x speedup, test set 1.774x speedup, val set 0.989x speedup, step: 25
JOB test speedup 0.8829223210687835
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7457390906134624
Epoch 34/300 |loss: 0.001250| train set 1.671x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 26
JOB test speedup 0.8610898989579846
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 35/300 |loss: 0.001092| train set 1.791x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 27
JOB test speedup 0.8823438086960432
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 36/300 |loss: 0.001037| train set 1.794x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 28
JOB test speedup 0.8935694979589356
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7457390906134624
Epoch 37/300 |loss: 0.001133| train set 1.795x speedup, test set 1.746x speedup, val set 0.885x speedup, step: 29
JOB test speedup 0.8904702586996701
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 38/300 |loss: 0.001045| train set 1.725x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 30
JOB test speedup 1.3691943759810565
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 39/300 |loss: 0.001044| train set 1.790x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 31
JOB test speedup 0.8630932212613108
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 40/300 |loss: 0.001125| train set 1.778x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 32
JOB test speedup 1.3870177652030402
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 41/300 |loss: 0.001215| train set 1.789x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 33
JOB test speedup 1.8835504777952636
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 42/300 |loss: 0.001127| train set 1.767x speedup, test set 1.774x speedup, val set 0.877x speedup, step: 34
JOB test speedup 0.8940867025281509
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7551279402425557
Epoch 43/300 |loss: 0.001098| train set 1.795x speedup, test set 1.755x speedup, val set 0.888x speedup, step: 35
JOB test speedup 0.8918435652513689
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 44/300 |loss: 0.001038| train set 1.787x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 36
JOB test speedup 0.8875604463344507
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 45/300 |loss: 0.000998| train set 1.758x speedup, test set 1.746x speedup, val set 0.908x speedup, step: 37
JOB test speedup 0.8708901689428028
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 46/300 |loss: 0.001073| train set 1.794x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 38
JOB test speedup 0.872214509215492
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 47/300 |loss: 0.000983| train set 1.768x speedup, test set 1.774x speedup, val set 0.876x speedup, step: 39
JOB test speedup 0.8749013877132601
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7457390906134624
Epoch 48/300 |loss: 0.000971| train set 1.795x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 40
JOB test speedup 1.0550413129396012
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 49/300 |loss: 0.000885| train set 1.726x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 41
JOB test speedup 0.86607825871673
TPCH test speedup 1.8356453955414458
TPCH skew test speedup 1.7741754860160275
Epoch 50/300 |loss: 0.001078| train set 1.739x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 42
JOB test speedup 1.383604234181726
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 51/300 |loss: 0.000856| train set 1.764x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 43
JOB test speedup 1.3144650811596084
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 52/300 |loss: 0.001017| train set 1.790x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 44
JOB test speedup 0.8757723143971143
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 53/300 |loss: 0.000894| train set 1.780x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 45
JOB test speedup 1.0345784488424632
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 54/300 |loss: 0.000873| train set 1.797x speedup, test set 1.774x speedup, val set 0.887x speedup, step: 1
JOB test speedup 1.0311982663158195
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 55/300 |loss: 0.000930| train set 1.796x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8766763457976731
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 56/300 |loss: 0.000826| train set 1.795x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 3
JOB test speedup 1.0852817793177412
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 57/300 |loss: 0.000804| train set 1.795x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8941387619595256
TPCH test speedup 1.79789465527946
TPCH skew test speedup 1.728910415819266
Epoch 58/300 |loss: 0.000858| train set 1.791x speedup, test set 1.729x speedup, val set 0.886x speedup, step: 5
JOB test speedup 0.885966062303064
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 59/300 |loss: 0.000860| train set 1.796x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 6
JOB test speedup 1.06872559787818
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 60/300 |loss: 0.000807| train set 1.758x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8481911957702257
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 61/300 |loss: 0.000838| train set 1.759x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 8
JOB test speedup 0.8578400434477803
TPCH test speedup 1.8533498519727742
TPCH skew test speedup 1.7741754860160275
Epoch 62/300 |loss: 0.000741| train set 1.789x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 9
JOB test speedup 0.9601305125219267
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 63/300 |loss: 0.000762| train set 1.793x speedup, test set 1.774x speedup, val set 0.883x speedup, step: 10
JOB test speedup 0.893333668739318
TPCH test speedup 1.8495723233589079
TPCH skew test speedup 1.7741754860160275
Epoch 64/300 |loss: 0.000874| train set 1.761x speedup, test set 1.774x speedup, val set 0.993x speedup, step: 1
JOB test speedup 0.9790056741792423
TPCH test speedup 1.81400288879056
TPCH skew test speedup 1.763409753974088
Epoch 65/300 |loss: 0.000838| train set 1.791x speedup, test set 1.763x speedup, val set 0.999x speedup, step: 2
early stopping at epoch 65
Training per epoch cost 2.936 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 5.919s, pg runtime 5.879s, speedup 0.993x
08, opt runtime 1.737s, model runtime 5.958s, pg runtime 5.994s, speedup 1.006x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 4.443s, model runtime 51.682s, pg runtime 13.945s, speedup 0.270x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
26, opt runtime 0.965s, model runtime 1.128s, pg runtime 0.965s, speedup 0.856x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 139.919s, pg runtime 148.707s, speedup 1.063x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 119.421s, pg runtime 140.742s, speedup 1.179x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 64, train speedup 1.761, test speedup 0.893, val speedup 0.993
TPCH best validation speedup epoch: 64, train speedup 1.761, test speedup 1.850, val speedup 0.993
TPCH Skew best validation speedup epoch: 64, train speedup 1.761, test speedup 1.774, val speedup 0.993
execution cost 0:04:24.072703
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.199510, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.9975725197571982
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010600| train set 0.960x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007437| train set 1.011x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 0.9784717341773644
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.6974864140976704
Epoch 3/300 |loss: 0.005910| train set 1.058x speedup, test set 1.697x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.031308662979671
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005062| train set 1.523x speedup, test set 1.825x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.77385637471608
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 5/300 |loss: 0.004490| train set 1.512x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.031912769185071
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.004027| train set 1.585x speedup, test set 1.656x speedup, val set 0.563x speedup, step: 7
JOB test speedup 1.0282289382312413
TPCH test speedup 1.7070822276157118
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003685| train set 1.504x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 8
JOB test speedup 1.0395533799331804
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 8/300 |loss: 0.003530| train set 1.532x speedup, test set 1.656x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.809214234233994
TPCH test speedup 1.7017541945053822
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003509| train set 1.567x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.0145167218093287
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003042| train set 1.540x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.0768481441585833
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002944| train set 1.692x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 3
JOB test speedup 1.034508010960649
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002976| train set 1.528x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.8311600483065829
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002428| train set 1.501x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8680787054736478
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002562| train set 1.772x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8687122031655119
TPCH test speedup 1.812283406744417
TPCH skew test speedup 1.7230259585614784
Epoch 15/300 |loss: 0.002362| train set 1.522x speedup, test set 1.723x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8544813240923184
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002367| train set 1.690x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.3496728676439276
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002427| train set 1.779x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 4
JOB test speedup 1.3619889425462621
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 18/300 |loss: 0.001948| train set 1.716x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8929351467527267
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6550416000314938
Epoch 19/300 |loss: 0.001761| train set 1.746x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.866760884139013
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 20/300 |loss: 0.001715| train set 1.715x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.9087862570554675
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.001955| train set 1.742x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.8652174729740962
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 22/300 |loss: 0.001664| train set 1.785x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 9
JOB test speedup 0.8670665647486169
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 23/300 |loss: 0.001523| train set 1.615x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8720376032830787
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 24/300 |loss: 0.001493| train set 1.758x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8844268324078068
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 25/300 |loss: 0.001384| train set 1.791x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8462885373432868
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 26/300 |loss: 0.001409| train set 1.787x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.8883659233373379
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 27/300 |loss: 0.001386| train set 1.794x speedup, test set 3.645x speedup, val set 0.888x speedup, step: 4
JOB test speedup 0.8620978400512406
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 28/300 |loss: 0.001399| train set 1.761x speedup, test set 3.645x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.8886709218545787
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 29/300 |loss: 0.001324| train set 1.793x speedup, test set 3.645x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.9010144740881485
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 30/300 |loss: 0.001249| train set 1.794x speedup, test set 3.645x speedup, val set 0.888x speedup, step: 2
JOB test speedup 0.865791859526636
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 31/300 |loss: 0.001314| train set 1.796x speedup, test set 3.645x speedup, val set 0.888x speedup, step: 3
JOB test speedup 0.8560170616723599
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 32/300 |loss: 0.001198| train set 1.740x speedup, test set 3.882x speedup, val set 0.888x speedup, step: 4
JOB test speedup 0.8753908985025043
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.117268715015829
Epoch 33/300 |loss: 0.001189| train set 1.724x speedup, test set 4.117x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.8862988399486894
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.066369455022331
Epoch 34/300 |loss: 0.001211| train set 1.685x speedup, test set 4.066x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8691309676828699
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 35/300 |loss: 0.001146| train set 1.750x speedup, test set 3.605x speedup, val set 0.888x speedup, step: 2
JOB test speedup 0.8796379737782429
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 36/300 |loss: 0.001118| train set 1.742x speedup, test set 3.605x speedup, val set 0.888x speedup, step: 3
JOB test speedup 0.8728161978575331
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 37/300 |loss: 0.001100| train set 1.794x speedup, test set 3.605x speedup, val set 0.887x speedup, step: 4
JOB test speedup 0.8774824672848314
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 38/300 |loss: 0.001119| train set 1.795x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.8740432130920803
TPCH test speedup 3.5810985972849987
TPCH skew test speedup 3.4606368062539103
Epoch 39/300 |loss: 0.001076| train set 1.742x speedup, test set 3.461x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.977212163506136
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.6047261949907274
Epoch 40/300 |loss: 0.001001| train set 1.762x speedup, test set 3.605x speedup, val set 0.888x speedup, step: 2
JOB test speedup 0.8788894303171229
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 41/300 |loss: 0.001050| train set 1.740x speedup, test set 4.610x speedup, val set 0.887x speedup, step: 3
JOB test speedup 0.9877447929034251
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.066369455022331
Epoch 42/300 |loss: 0.001106| train set 1.774x speedup, test set 4.066x speedup, val set 0.888x speedup, step: 4
JOB test speedup 0.8710611772433061
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 43/300 |loss: 0.001019| train set 1.794x speedup, test set 3.605x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.8904990607303479
TPCH test speedup 4.004833700867293
TPCH skew test speedup 3.8386191890604118
Epoch 44/300 |loss: 0.000966| train set 1.763x speedup, test set 3.839x speedup, val set 0.888x speedup, step: 6
JOB test speedup 0.8603508299992431
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.066369455022331
Epoch 45/300 |loss: 0.000993| train set 1.753x speedup, test set 4.066x speedup, val set 0.888x speedup, step: 7
JOB test speedup 0.8696800688859233
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.066369455022331
Epoch 46/300 |loss: 0.001090| train set 1.792x speedup, test set 4.066x speedup, val set 0.888x speedup, step: 8
JOB test speedup 0.962385622529173
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.066369455022331
Epoch 47/300 |loss: 0.000931| train set 1.771x speedup, test set 4.066x speedup, val set 0.888x speedup, step: 9
JOB test speedup 0.8534035408951935
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 48/300 |loss: 0.000930| train set 1.784x speedup, test set 3.605x speedup, val set 0.888x speedup, step: 10
JOB test speedup 0.9846322682015354
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 49/300 |loss: 0.000921| train set 1.784x speedup, test set 3.605x speedup, val set 0.888x speedup, step: 11
JOB test speedup 1.2895877573864343
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 50/300 |loss: 0.000993| train set 1.737x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 12
JOB test speedup 0.8865395791603874
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 51/300 |loss: 0.000854| train set 1.793x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 13
JOB test speedup 0.8625681021880586
TPCH test speedup 3.8794917544958873
TPCH skew test speedup 3.8839447824563007
Epoch 52/300 |loss: 0.001037| train set 1.670x speedup, test set 3.884x speedup, val set 0.888x speedup, step: 14
JOB test speedup 0.8900331423439433
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 53/300 |loss: 0.000847| train set 1.792x speedup, test set 3.605x speedup, val set 0.888x speedup, step: 15
JOB test speedup 0.8685472447744663
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 54/300 |loss: 0.000862| train set 1.797x speedup, test set 3.605x speedup, val set 0.888x speedup, step: 16
JOB test speedup 0.8421066958353742
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.066369455022331
Epoch 55/300 |loss: 0.000902| train set 1.795x speedup, test set 4.066x speedup, val set 0.888x speedup, step: 17
JOB test speedup 1.3448784914130236
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 56/300 |loss: 0.000835| train set 1.777x speedup, test set 4.610x speedup, val set 0.888x speedup, step: 18
JOB test speedup 0.8561346885610619
TPCH test speedup 3.786086864163603
TPCH skew test speedup 3.7708493362680917
Epoch 57/300 |loss: 0.000794| train set 1.794x speedup, test set 3.771x speedup, val set 0.888x speedup, step: 19
JOB test speedup 1.3117572289130761
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 58/300 |loss: 0.000888| train set 1.791x speedup, test set 3.605x speedup, val set 0.888x speedup, step: 20
JOB test speedup 1.3862174966969691
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.066369455022331
Epoch 59/300 |loss: 0.000855| train set 1.795x speedup, test set 4.066x speedup, val set 0.888x speedup, step: 21
JOB test speedup 0.8692701618084935
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.648495179953015
Epoch 60/300 |loss: 0.000847| train set 1.791x speedup, test set 3.648x speedup, val set 0.888x speedup, step: 22
JOB test speedup 0.857863492242451
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 61/300 |loss: 0.000856| train set 1.741x speedup, test set 4.610x speedup, val set 0.888x speedup, step: 23
JOB test speedup 0.8462653382288866
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 62/300 |loss: 0.000793| train set 1.774x speedup, test set 4.610x speedup, val set 0.888x speedup, step: 24
JOB test speedup 1.6838048715136822
TPCH test speedup 3.964136663773001
TPCH skew test speedup 3.7708493362680917
Epoch 63/300 |loss: 0.000763| train set 1.795x speedup, test set 3.771x speedup, val set 0.888x speedup, step: 25
JOB test speedup 0.890529939292633
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.228973577695618
Epoch 64/300 |loss: 0.000936| train set 1.793x speedup, test set 4.229x speedup, val set 0.888x speedup, step: 26
JOB test speedup 0.8492498455488496
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.066369455022331
Epoch 65/300 |loss: 0.000896| train set 1.796x speedup, test set 4.066x speedup, val set 0.888x speedup, step: 27
early stopping at epoch 65
Training per epoch cost 2.914 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.332s, pg runtime 2.352s, speedup 7.089x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 14.577s, pg runtime 10.685s, speedup 0.733x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 4.730s, pg runtime 4.730s, speedup 1.000x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 39, train speedup 1.742, test speedup 0.874, val speedup 0.888
TPCH best validation speedup epoch: 39, train speedup 1.742, test speedup 3.581, val speedup 0.888
TPCH Skew best validation speedup epoch: 39, train speedup 1.742, test speedup 3.461, val speedup 0.888
execution cost 0:04:22.447686
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.256769, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.7091174843148246
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010601| train set 0.961x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9855432797436313
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007491| train set 1.002x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 0.9843765985062789
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 3/300 |loss: 0.005868| train set 1.057x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0297387683658128
TPCH test speedup 1.1296850071970974
TPCH skew test speedup 1.59189340764026
Epoch 4/300 |loss: 0.005098| train set 1.518x speedup, test set 1.592x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.7821886164149112
TPCH test speedup 1.0263230052053371
TPCH skew test speedup 0.99687231804193
Epoch 5/300 |loss: 0.004541| train set 1.505x speedup, test set 0.997x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.0378950491697165
TPCH test speedup 1.022193870383902
TPCH skew test speedup 0.9965973198564567
Epoch 6/300 |loss: 0.004012| train set 1.535x speedup, test set 0.997x speedup, val set 0.513x speedup, step: 7
JOB test speedup 1.013400598886634
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 7/300 |loss: 0.003677| train set 1.514x speedup, test set 0.996x speedup, val set 0.887x speedup, step: 8
JOB test speedup 1.0534813474579483
TPCH test speedup 1.72094838879486
TPCH skew test speedup 1.6564599327751515
Epoch 8/300 |loss: 0.003437| train set 1.532x speedup, test set 1.656x speedup, val set 0.887x speedup, step: 9
JOB test speedup 1.7565961406274746
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003540| train set 1.524x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.0401391920476457
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003030| train set 1.726x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.0649206523230448
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 11/300 |loss: 0.002820| train set 1.690x speedup, test set 0.996x speedup, val set 0.888x speedup, step: 3
JOB test speedup 0.8659186718653102
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 12/300 |loss: 0.002924| train set 1.438x speedup, test set 0.996x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.8371235707133591
TPCH test speedup 1.4624906733024454
TPCH skew test speedup 1.6397795250223364
Epoch 13/300 |loss: 0.002391| train set 1.508x speedup, test set 1.640x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.884956176067018
TPCH test speedup 1.4716563436526053
TPCH skew test speedup 1.4520502714645176
Epoch 14/300 |loss: 0.002626| train set 1.727x speedup, test set 1.452x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8646182380266082
TPCH test speedup 1.569158957891231
TPCH skew test speedup 2.2793204997719645
Epoch 15/300 |loss: 0.002314| train set 1.729x speedup, test set 2.279x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8741863002112853
TPCH test speedup 1.4624906733024454
TPCH skew test speedup 1.4520502714645176
Epoch 16/300 |loss: 0.002231| train set 1.750x speedup, test set 1.452x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.324060510673495
TPCH test speedup 1.4716563436526053
TPCH skew test speedup 1.4520502714645176
Epoch 17/300 |loss: 0.002271| train set 1.729x speedup, test set 1.452x speedup, val set 0.880x speedup, step: 4
JOB test speedup 1.3396870286807379
TPCH test speedup 1.4716563436526053
TPCH skew test speedup 1.4520502714645176
Epoch 18/300 |loss: 0.001943| train set 1.711x speedup, test set 1.452x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8642438025218958
TPCH test speedup 1.4895286701401593
TPCH skew test speedup 1.4769125760432333
Epoch 19/300 |loss: 0.001730| train set 1.527x speedup, test set 1.477x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8622509936625695
TPCH test speedup 1.4782305497380497
TPCH skew test speedup 1.4530638629250017
Epoch 20/300 |loss: 0.001685| train set 1.742x speedup, test set 1.453x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8820035576150523
TPCH test speedup 1.4716563436526053
TPCH skew test speedup 1.4520502714645176
Epoch 21/300 |loss: 0.001857| train set 1.792x speedup, test set 1.452x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.8706784102141233
TPCH test speedup 3.5969560148671507
TPCH skew test speedup 3.470173851730101
Epoch 22/300 |loss: 0.001617| train set 1.784x speedup, test set 3.470x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.86283623244838
TPCH test speedup 1.4859890174688644
TPCH skew test speedup 1.4531419077410286
Epoch 23/300 |loss: 0.001460| train set 1.765x speedup, test set 1.453x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.877258454952583
TPCH test speedup 3.6022983368016743
TPCH skew test speedup 3.4413799193948136
Epoch 24/300 |loss: 0.001456| train set 1.784x speedup, test set 3.441x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8528875252544479
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 25/300 |loss: 0.001333| train set 1.760x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.873299376871333
TPCH test speedup 3.5613948924839707
TPCH skew test speedup 3.42460697887221
Epoch 26/300 |loss: 0.001468| train set 1.686x speedup, test set 3.425x speedup, val set 0.886x speedup, step: 3
JOB test speedup 0.8875090626841576
TPCH test speedup 1.8019741063061236
TPCH skew test speedup 1.7023768154371746
Epoch 27/300 |loss: 0.001328| train set 1.791x speedup, test set 1.702x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.8811873589051236
TPCH test speedup 1.8019741063061236
TPCH skew test speedup 1.7023768154371746
Epoch 28/300 |loss: 0.001388| train set 1.788x speedup, test set 1.702x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.873822542387349
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 29/300 |loss: 0.001291| train set 1.789x speedup, test set 3.674x speedup, val set 0.880x speedup, step: 6
JOB test speedup 1.1201430756987314
TPCH test speedup 1.5403053445134052
TPCH skew test speedup 1.488358833467768
Epoch 30/300 |loss: 0.001225| train set 1.789x speedup, test set 1.488x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8699315423818654
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.674258564369058
Epoch 31/300 |loss: 0.001234| train set 1.792x speedup, test set 3.674x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.8742715747233682
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.8025333752746966
Epoch 32/300 |loss: 0.001148| train set 1.736x speedup, test set 3.803x speedup, val set 0.880x speedup, step: 9
JOB test speedup 0.8911471508062629
TPCH test speedup 4.086623382526104
TPCH skew test speedup 3.8025333752746966
Epoch 33/300 |loss: 0.001148| train set 1.789x speedup, test set 3.803x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8885809839121028
TPCH test speedup 1.5623712731855715
TPCH skew test speedup 1.488358833467768
Epoch 34/300 |loss: 0.001161| train set 1.676x speedup, test set 1.488x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8931942344125811
TPCH test speedup 4.086623382526104
TPCH skew test speedup 3.8025333752746966
Epoch 35/300 |loss: 0.001102| train set 1.789x speedup, test set 3.803x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.8693904566450125
TPCH test speedup 1.5694117867803816
TPCH skew test speedup 1.5429501642138916
Epoch 36/300 |loss: 0.001005| train set 1.793x speedup, test set 1.543x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.8923512638388275
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 37/300 |loss: 0.000993| train set 1.795x speedup, test set 3.969x speedup, val set 0.876x speedup, step: 14
JOB test speedup 0.8824266564167477
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 38/300 |loss: 0.000989| train set 1.790x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8905932277702729
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.8025333752746966
Epoch 39/300 |loss: 0.001027| train set 1.758x speedup, test set 3.803x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8694424809133715
TPCH test speedup 1.5666441529547075
TPCH skew test speedup 1.5345252325443368
Epoch 40/300 |loss: 0.001029| train set 1.726x speedup, test set 1.535x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.1427973643257845
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.8025333752746966
Epoch 41/300 |loss: 0.000979| train set 1.739x speedup, test set 3.803x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.9046356925804991
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 42/300 |loss: 0.001024| train set 1.768x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.8726173291683584
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 43/300 |loss: 0.001066| train set 1.790x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8990214107581075
TPCH test speedup 1.560781907116657
TPCH skew test speedup 1.5345252325443368
Epoch 44/300 |loss: 0.000942| train set 1.758x speedup, test set 1.535x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8772491026084394
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 45/300 |loss: 0.000900| train set 1.733x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8839193516730898
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 46/300 |loss: 0.000952| train set 1.796x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 3
JOB test speedup 0.86278256130485
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 47/300 |loss: 0.000939| train set 1.771x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 4
JOB test speedup 0.8798477121513613
TPCH test speedup 1.6667243813107053
TPCH skew test speedup 3.0091100328167606
Epoch 48/300 |loss: 0.000922| train set 1.765x speedup, test set 3.009x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.8679401945439439
TPCH test speedup 1.5666441529547075
TPCH skew test speedup 1.5345252325443368
Epoch 49/300 |loss: 0.000874| train set 1.796x speedup, test set 1.535x speedup, val set 0.886x speedup, step: 6
JOB test speedup 0.8640866721105864
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 50/300 |loss: 0.001009| train set 1.732x speedup, test set 3.969x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.8924688995131823
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 51/300 |loss: 0.000851| train set 1.789x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 8
JOB test speedup 0.875450437646331
TPCH test speedup 1.5104882161938618
TPCH skew test speedup 1.4768178255274755
Epoch 52/300 |loss: 0.001032| train set 1.789x speedup, test set 1.477x speedup, val set 0.886x speedup, step: 9
JOB test speedup 0.8867055516859139
TPCH test speedup 1.5666441529547075
TPCH skew test speedup 1.5345252325443368
Epoch 53/300 |loss: 0.000832| train set 1.794x speedup, test set 1.535x speedup, val set 0.888x speedup, step: 10
JOB test speedup 0.8816845080208879
TPCH test speedup 1.6549775530969135
TPCH skew test speedup 3.0091100328167606
Epoch 54/300 |loss: 0.000797| train set 1.796x speedup, test set 3.009x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8627011398633364
TPCH test speedup 1.5562612786712662
TPCH skew test speedup 1.5345252325443368
Epoch 55/300 |loss: 0.000848| train set 1.797x speedup, test set 1.535x speedup, val set 0.888x speedup, step: 12
JOB test speedup 1.3473389827529691
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 56/300 |loss: 0.000808| train set 1.769x speedup, test set 3.969x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.8833445069774888
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 57/300 |loss: 0.000793| train set 1.791x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 14
JOB test speedup 0.8569405080620195
TPCH test speedup 3.9390240509687193
TPCH skew test speedup 3.731422655307802
Epoch 58/300 |loss: 0.000774| train set 1.774x speedup, test set 3.731x speedup, val set 0.886x speedup, step: 15
JOB test speedup 0.9788454910316703
TPCH test speedup 1.5666441529547075
TPCH skew test speedup 1.5345252325443368
Epoch 59/300 |loss: 0.000786| train set 1.792x speedup, test set 1.535x speedup, val set 0.885x speedup, step: 16
JOB test speedup 0.8802114200559427
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 60/300 |loss: 0.000755| train set 1.791x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.8888183816069939
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 61/300 |loss: 0.000773| train set 1.740x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 18
JOB test speedup 0.8777469258304129
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 62/300 |loss: 0.000741| train set 1.775x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 19
JOB test speedup 0.8745372651019566
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 63/300 |loss: 0.000723| train set 1.791x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 20
JOB test speedup 0.902382301002289
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 64/300 |loss: 0.000820| train set 1.795x speedup, test set 3.969x speedup, val set 0.885x speedup, step: 21
JOB test speedup 0.8828523442741839
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 65/300 |loss: 0.000715| train set 1.796x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 22
JOB test speedup 0.8857917437350061
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 66/300 |loss: 0.000791| train set 1.763x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 23
JOB test speedup 0.8960982353394663
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 67/300 |loss: 0.000830| train set 1.796x speedup, test set 3.969x speedup, val set 0.888x speedup, step: 24
early stopping at epoch 67
Training per epoch cost 2.932 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 14.577s, pg runtime 10.685s, speedup 0.733x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 1.876s, pg runtime 6.089s, speedup 3.247x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 3.136s, pg runtime 5.620s, speedup 1.792x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 91.784s, pg runtime 91.784s, speedup 1.000x
02, opt runtime 29.763s, model runtime 91.648s, pg runtime 91.648s, speedup 1.000x
03, opt runtime 30.267s, model runtime 100.885s, pg runtime 100.885s, speedup 1.000x
04, opt runtime 29.286s, model runtime 92.131s, pg runtime 92.131s, speedup 1.000x
05, opt runtime 29.269s, model runtime 91.296s, pg runtime 91.296s, speedup 1.000x
06, opt runtime 29.502s, model runtime 112.305s, pg runtime 112.305s, speedup 1.000x
07, opt runtime 27.886s, model runtime 97.629s, pg runtime 97.629s, speedup 1.000x
08, opt runtime 30.705s, model runtime 89.698s, pg runtime 89.698s, speedup 1.000x
09, opt runtime 27.651s, model runtime 91.255s, pg runtime 91.255s, speedup 1.000x
10, opt runtime 33.637s, model runtime 90.618s, pg runtime 90.618s, speedup 1.000x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 580.359s, pg runtime 432.766s, speedup 0.746x
32, opt runtime 15.120s, model runtime 580.203s, pg runtime 566.078s, speedup 0.976x
33, opt runtime 16.639s, model runtime 576.339s, pg runtime 462.544s, speedup 0.803x
34, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
35, opt runtime 16.528s, model runtime 616.056s, pg runtime 620.762s, speedup 1.008x
36, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
37, opt runtime 16.438s, model runtime 583.941s, pg runtime 546.887s, speedup 0.937x
38, opt runtime 16.138s, model runtime 572.741s, pg runtime 501.793s, speedup 0.876x
39, opt runtime 16.770s, model runtime 617.719s, pg runtime 594.754s, speedup 0.963x
40, opt runtime 16.305s, model runtime 577.424s, pg runtime 436.168s, speedup 0.755x
========== TPCH skew
01, opt runtime 29.063s, model runtime 91.786s, pg runtime 91.786s, speedup 1.000x
02, opt runtime 33.249s, model runtime 103.551s, pg runtime 103.551s, speedup 1.000x
03, opt runtime 33.759s, model runtime 98.290s, pg runtime 98.290s, speedup 1.000x
04, opt runtime 36.646s, model runtime 98.171s, pg runtime 98.171s, speedup 1.000x
05, opt runtime 32.482s, model runtime 123.411s, pg runtime 123.411s, speedup 1.000x
06, opt runtime 31.996s, model runtime 120.854s, pg runtime 120.854s, speedup 1.000x
07, opt runtime 30.778s, model runtime 100.158s, pg runtime 100.158s, speedup 1.000x
08, opt runtime 30.030s, model runtime 85.930s, pg runtime 85.930s, speedup 1.000x
09, opt runtime 28.776s, model runtime 86.923s, pg runtime 86.923s, speedup 1.000x
10, opt runtime 29.576s, model runtime 113.059s, pg runtime 113.059s, speedup 1.000x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 620.176s, pg runtime 602.586s, speedup 0.972x
32, opt runtime 16.542s, model runtime 570.414s, pg runtime 461.957s, speedup 0.810x
33, opt runtime 16.136s, model runtime 573.236s, pg runtime 410.283s, speedup 0.716x
34, opt runtime 14.422s, model runtime 584.445s, pg runtime 497.542s, speedup 0.851x
35, opt runtime 15.980s, model runtime 578.049s, pg runtime 504.239s, speedup 0.872x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
38, opt runtime 16.194s, model runtime 575.813s, pg runtime 439.255s, speedup 0.763x
39, opt runtime 16.149s, model runtime 592.102s, pg runtime 423.122s, speedup 0.715x
40, opt runtime 13.751s, model runtime 572.258s, pg runtime 434.625s, speedup 0.759x
====================
JOB best validation speedup epoch: 44, train speedup 1.758, test speedup 0.899, val speedup 0.888
TPCH best validation speedup epoch: 44, train speedup 1.758, test speedup 1.561, val speedup 0.888
TPCH Skew best validation speedup epoch: 44, train speedup 1.758, test speedup 1.535, val speedup 0.888
execution cost 0:04:30.702047
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.571843, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.9975725197571982
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010600| train set 0.960x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007437| train set 1.011x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.6451523613673051
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.6974864140976704
Epoch 3/300 |loss: 0.005919| train set 1.093x speedup, test set 1.697x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0310426708118658
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005049| train set 1.517x speedup, test set 1.825x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.7822697344472798
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 5/300 |loss: 0.004491| train set 1.518x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.038082799819233
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.004009| train set 1.585x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 7
JOB test speedup 1.0193138771634918
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003651| train set 1.502x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 8
JOB test speedup 1.0535096911026762
TPCH test speedup 1.717594872461978
TPCH skew test speedup 1.6550416000314938
Epoch 8/300 |loss: 0.003506| train set 1.676x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.7721588634060244
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003437| train set 1.523x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.0415442588413888
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003026| train set 1.724x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.0712929463001113
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002911| train set 1.690x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 3
JOB test speedup 1.0464684392020094
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002828| train set 1.560x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 4
JOB test speedup 0.8520433567861376
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002412| train set 1.510x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 5
JOB test speedup 1.0219103390790165
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002655| train set 1.733x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.0304384948809535
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002360| train set 1.542x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 2
JOB test speedup 0.8505255728103233
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002411| train set 1.743x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.3540468789327837
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002335| train set 1.761x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 4
JOB test speedup 0.8639731375369085
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 18/300 |loss: 0.001882| train set 1.745x speedup, test set 0.996x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8647355077595058
TPCH test speedup 1.0565082271370958
TPCH skew test speedup 1.3062150060474722
Epoch 19/300 |loss: 0.001731| train set 1.744x speedup, test set 1.306x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.8570914923713675
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 20/300 |loss: 0.001687| train set 1.718x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8689434784346732
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.001903| train set 1.757x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.8646537301884126
TPCH test speedup 1.7499247383438443
TPCH skew test speedup 1.7023768154371746
Epoch 22/300 |loss: 0.001643| train set 1.788x speedup, test set 1.702x speedup, val set 0.880x speedup, step: 9
JOB test speedup 0.8653678883956479
TPCH test speedup 1.077238022621168
TPCH skew test speedup 1.3362742189785743
Epoch 23/300 |loss: 0.001497| train set 1.767x speedup, test set 1.336x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8637453821663973
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 24/300 |loss: 0.001489| train set 1.760x speedup, test set 1.774x speedup, val set 0.621x speedup, step: 11
JOB test speedup 0.8595639627180327
TPCH test speedup 1.0315278383217084
TPCH skew test speedup 1.010773917811871
Epoch 25/300 |loss: 0.001351| train set 1.759x speedup, test set 1.011x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.8502001819454164
TPCH test speedup 1.0609889109372832
TPCH skew test speedup 1.0380342662371218
Epoch 26/300 |loss: 0.001407| train set 1.781x speedup, test set 1.038x speedup, val set 0.621x speedup, step: 13
JOB test speedup 0.8727718420307876
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7645823023281915
Epoch 27/300 |loss: 0.001345| train set 1.792x speedup, test set 1.765x speedup, val set 0.880x speedup, step: 14
JOB test speedup 0.8658666022995295
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 28/300 |loss: 0.001415| train set 1.793x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8643520942818246
TPCH test speedup 1.0609889109372832
TPCH skew test speedup 1.0380342662371218
Epoch 29/300 |loss: 0.001283| train set 1.794x speedup, test set 1.038x speedup, val set 0.621x speedup, step: 16
JOB test speedup 0.8679063378197379
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 30/300 |loss: 0.001233| train set 1.793x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.8637448333932456
TPCH test speedup 1.0609889109372832
TPCH skew test speedup 1.0259855291661901
Epoch 31/300 |loss: 0.001313| train set 1.792x speedup, test set 1.026x speedup, val set 0.621x speedup, step: 18
JOB test speedup 0.8549909812669393
TPCH test speedup 1.833839919398697
TPCH skew test speedup 1.7741754860160275
Epoch 32/300 |loss: 0.001195| train set 1.795x speedup, test set 1.774x speedup, val set 0.621x speedup, step: 19
JOB test speedup 0.8799799689958174
TPCH test speedup 1.564841102385393
TPCH skew test speedup 1.5429501642138916
Epoch 33/300 |loss: 0.001222| train set 1.732x speedup, test set 1.543x speedup, val set 0.880x speedup, step: 20
JOB test speedup 0.8535598034401356
TPCH test speedup 1.0609889109372832
TPCH skew test speedup 1.029143481020284
Epoch 34/300 |loss: 0.001234| train set 1.690x speedup, test set 1.029x speedup, val set 0.879x speedup, step: 21
JOB test speedup 0.8289161109299624
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 35/300 |loss: 0.001135| train set 1.789x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 22
JOB test speedup 0.895273878118493
TPCH test speedup 1.4887055183593907
TPCH skew test speedup 1.4768195164893496
Epoch 36/300 |loss: 0.001037| train set 1.741x speedup, test set 1.477x speedup, val set 0.880x speedup, step: 23
JOB test speedup 0.8676259418803226
TPCH test speedup 1.0609889109372832
TPCH skew test speedup 1.0380342662371218
Epoch 37/300 |loss: 0.001091| train set 1.796x speedup, test set 1.038x speedup, val set 0.880x speedup, step: 24
JOB test speedup 0.8737948126508924
TPCH test speedup 1.0609889109372832
TPCH skew test speedup 1.0380342662371218
Epoch 38/300 |loss: 0.001048| train set 1.793x speedup, test set 1.038x speedup, val set 0.880x speedup, step: 25
JOB test speedup 0.8660117792856808
TPCH test speedup 1.5589923173102753
TPCH skew test speedup 1.5429501642138916
Epoch 39/300 |loss: 0.001043| train set 1.794x speedup, test set 1.543x speedup, val set 0.880x speedup, step: 26
JOB test speedup 0.9805334107595639
TPCH test speedup 1.0279589832706968
TPCH skew test speedup 1.010773917811871
Epoch 40/300 |loss: 0.001060| train set 1.775x speedup, test set 1.011x speedup, val set 0.880x speedup, step: 27
JOB test speedup 0.8644360477123383
TPCH test speedup 4.5806004627474755
TPCH skew test speedup 4.319867116444346
Epoch 41/300 |loss: 0.001051| train set 1.736x speedup, test set 4.320x speedup, val set 0.880x speedup, step: 28
JOB test speedup 0.9937033800524984
TPCH test speedup 1.0609889109372832
TPCH skew test speedup 1.0380342662371218
Epoch 42/300 |loss: 0.001127| train set 1.773x speedup, test set 1.038x speedup, val set 0.621x speedup, step: 29
JOB test speedup 0.8624828831799248
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 43/300 |loss: 0.001077| train set 1.796x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 30
JOB test speedup 0.8773629129498953
TPCH test speedup 1.0609889109372832
TPCH skew test speedup 1.0380342662371218
Epoch 44/300 |loss: 0.000982| train set 1.760x speedup, test set 1.038x speedup, val set 0.621x speedup, step: 31
JOB test speedup 0.8706328814821035
TPCH test speedup 1.8919395166050592
TPCH skew test speedup 1.798819822494563
Epoch 45/300 |loss: 0.000969| train set 1.760x speedup, test set 1.799x speedup, val set 0.880x speedup, step: 32
JOB test speedup 0.8816292307909463
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.117268715015829
Epoch 46/300 |loss: 0.001000| train set 1.793x speedup, test set 4.117x speedup, val set 0.880x speedup, step: 33
JOB test speedup 0.8625731031617981
TPCH test speedup 1.5589923173102753
TPCH skew test speedup 1.5213978783564683
Epoch 47/300 |loss: 0.000992| train set 1.774x speedup, test set 1.521x speedup, val set 0.880x speedup, step: 34
JOB test speedup 0.8732610859608693
TPCH test speedup 1.5589923173102753
TPCH skew test speedup 1.5429501642138916
Epoch 48/300 |loss: 0.000928| train set 1.784x speedup, test set 1.543x speedup, val set 0.621x speedup, step: 35
JOB test speedup 0.8275752138321071
TPCH test speedup 1.9360424540716965
TPCH skew test speedup 1.8791759971258206
Epoch 49/300 |loss: 0.000889| train set 1.771x speedup, test set 1.879x speedup, val set 0.880x speedup, step: 36
JOB test speedup 0.8853767008827377
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 50/300 |loss: 0.001029| train set 1.791x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 37
JOB test speedup 0.8718879282978256
TPCH test speedup 3.89513228511814
TPCH skew test speedup 2.1085330334257435
Epoch 51/300 |loss: 0.000871| train set 1.782x speedup, test set 2.109x speedup, val set 0.880x speedup, step: 38
JOB test speedup 0.8755496296252078
TPCH test speedup 1.9360424540716965
TPCH skew test speedup 1.8383706629639087
Epoch 52/300 |loss: 0.001028| train set 1.759x speedup, test set 1.838x speedup, val set 0.880x speedup, step: 39
JOB test speedup 0.8919725743930853
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.42323151821159
Epoch 53/300 |loss: 0.000887| train set 1.792x speedup, test set 4.423x speedup, val set 0.880x speedup, step: 40
JOB test speedup 0.8978025933132795
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.42323151821159
Epoch 54/300 |loss: 0.000898| train set 1.763x speedup, test set 4.423x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.0043239393120416
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 55/300 |loss: 0.000916| train set 1.798x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8751711850008352
TPCH test speedup 1.9360424540716965
TPCH skew test speedup 1.8791759971258206
Epoch 56/300 |loss: 0.000875| train set 1.779x speedup, test set 1.879x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.8806935448157274
TPCH test speedup 1.5589923173102753
TPCH skew test speedup 1.5213978783564683
Epoch 57/300 |loss: 0.000803| train set 1.792x speedup, test set 1.521x speedup, val set 0.880x speedup, step: 4
JOB test speedup 1.3406800960597582
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 58/300 |loss: 0.000867| train set 1.789x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8667831494387315
TPCH test speedup 1.9360424540716965
TPCH skew test speedup 1.8791759971258206
Epoch 59/300 |loss: 0.000816| train set 1.795x speedup, test set 1.879x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.9976629465130216
TPCH test speedup 3.1185104001935895
TPCH skew test speedup 3.621334393661106
Epoch 60/300 |loss: 0.000833| train set 1.796x speedup, test set 3.621x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8905873731364581
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.546237276296967
Epoch 61/300 |loss: 0.000843| train set 1.740x speedup, test set 4.546x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.8681642769451392
TPCH test speedup 1.5589923173102753
TPCH skew test speedup 1.5429501642138916
Epoch 62/300 |loss: 0.000776| train set 1.787x speedup, test set 1.543x speedup, val set 0.880x speedup, step: 9
JOB test speedup 1.7102585642559973
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 63/300 |loss: 0.000773| train set 1.762x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8837386449528168
TPCH test speedup 1.9360424540716965
TPCH skew test speedup 1.8791759971258206
Epoch 64/300 |loss: 0.000809| train set 1.791x speedup, test set 1.879x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8611409011916813
TPCH test speedup 1.9360424540716965
TPCH skew test speedup 1.8473043475166477
Epoch 65/300 |loss: 0.000778| train set 1.796x speedup, test set 1.847x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8909240732313284
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 66/300 |loss: 0.000838| train set 1.789x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.8674335118947829
TPCH test speedup 1.9360424540716965
TPCH skew test speedup 1.8473043475166477
Epoch 67/300 |loss: 0.001070| train set 1.741x speedup, test set 1.847x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.86672639002307
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 68/300 |loss: 0.000848| train set 1.796x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 5
early stopping at epoch 68
Training per epoch cost 2.950 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.332s, pg runtime 2.352s, speedup 7.089x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 10.685s, pg runtime 10.685s, speedup 1.000x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
19, opt runtime 0.379s, model runtime 0.410s, pg runtime 3.645s, speedup 8.890x
20, opt runtime 0.626s, model runtime 2.566s, pg runtime 2.558s, speedup 0.997x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 23.436s, pg runtime 432.766s, speedup 18.466x
32, opt runtime 15.120s, model runtime 23.316s, pg runtime 566.078s, speedup 24.279x
33, opt runtime 16.639s, model runtime 23.017s, pg runtime 462.544s, speedup 20.095x
34, opt runtime 16.280s, model runtime 23.060s, pg runtime 634.990s, speedup 27.537x
35, opt runtime 16.528s, model runtime 23.747s, pg runtime 620.762s, speedup 26.141x
36, opt runtime 18.690s, model runtime 25.079s, pg runtime 651.942s, speedup 25.995x
37, opt runtime 16.438s, model runtime 23.248s, pg runtime 546.887s, speedup 23.524x
38, opt runtime 16.138s, model runtime 23.246s, pg runtime 501.793s, speedup 21.586x
39, opt runtime 16.770s, model runtime 23.336s, pg runtime 594.754s, speedup 25.486x
40, opt runtime 16.305s, model runtime 22.633s, pg runtime 436.168s, speedup 19.271x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 23.251s, pg runtime 602.586s, speedup 25.917x
32, opt runtime 16.542s, model runtime 23.084s, pg runtime 461.957s, speedup 20.012x
33, opt runtime 16.136s, model runtime 23.037s, pg runtime 410.283s, speedup 17.810x
34, opt runtime 14.422s, model runtime 23.164s, pg runtime 497.542s, speedup 21.479x
35, opt runtime 15.980s, model runtime 23.042s, pg runtime 504.239s, speedup 21.884x
36, opt runtime 16.482s, model runtime 22.575s, pg runtime 622.915s, speedup 27.593x
37, opt runtime 16.301s, model runtime 23.129s, pg runtime 646.719s, speedup 27.961x
38, opt runtime 16.194s, model runtime 22.825s, pg runtime 439.255s, speedup 19.245x
39, opt runtime 16.149s, model runtime 23.253s, pg runtime 423.122s, speedup 18.197x
40, opt runtime 13.751s, model runtime 23.032s, pg runtime 434.625s, speedup 18.870x
====================
JOB best validation speedup epoch: 64, train speedup 1.791, test speedup 0.884, val speedup 0.880
TPCH best validation speedup epoch: 64, train speedup 1.791, test speedup 1.936, val speedup 0.880
TPCH Skew best validation speedup epoch: 64, train speedup 1.791, test speedup 1.879, val speedup 0.880
execution cost 0:04:37.454158
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.270199, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029389| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.7082709924053361
TPCH test speedup 1.6919996171556706
TPCH skew test speedup 1.5890392931842958
Epoch 1/300 |loss: 0.010627| train set 0.960x speedup, test set 1.589x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.7141515035419452
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007507| train set 0.998x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.5845824980995113
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 3/300 |loss: 0.005878| train set 1.056x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0245139732656126
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005135| train set 1.521x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 5
JOB test speedup 1.01271612076806
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 5/300 |loss: 0.004462| train set 1.531x speedup, test set 1.655x speedup, val set 0.563x speedup, step: 6
JOB test speedup 1.0123048557703505
TPCH test speedup 1.7142415226708987
TPCH skew test speedup 1.6563585214137309
Epoch 6/300 |loss: 0.004014| train set 1.585x speedup, test set 1.656x speedup, val set 0.885x speedup, step: 7
JOB test speedup 1.0224586182338375
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003596| train set 1.540x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 8
JOB test speedup 1.7528226127847844
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 8/300 |loss: 0.003458| train set 1.570x speedup, test set 1.656x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.7579366692944016
TPCH test speedup 3.489768097427546
TPCH skew test speedup 3.4606368062539103
Epoch 9/300 |loss: 0.003504| train set 1.524x speedup, test set 3.461x speedup, val set 0.886x speedup, step: 1
JOB test speedup 1.0263699089042813
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003026| train set 1.785x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 2
JOB test speedup 1.0559539862237852
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002846| train set 1.743x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 3
JOB test speedup 1.052188793278983
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002696| train set 1.788x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 4
JOB test speedup 0.8580464744522337
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002434| train set 1.702x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 5
JOB test speedup 1.0521452799833482
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002607| train set 1.769x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 6
JOB test speedup 1.0302351684897282
TPCH test speedup 1.7791737361604112
TPCH skew test speedup 1.7230259585614784
Epoch 15/300 |loss: 0.002274| train set 1.725x speedup, test set 1.723x speedup, val set 0.879x speedup, step: 7
JOB test speedup 0.7415367177138299
TPCH test speedup 1.7791737361604112
TPCH skew test speedup 1.7230259585614784
Epoch 16/300 |loss: 0.002346| train set 1.787x speedup, test set 1.723x speedup, val set 0.879x speedup, step: 8
JOB test speedup 1.0520420260239176
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002236| train set 1.731x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 9
JOB test speedup 1.0593323167295745
TPCH test speedup 1.7205525448328494
TPCH skew test speedup 1.6646549695273958
Epoch 18/300 |loss: 0.001892| train set 1.760x speedup, test set 1.665x speedup, val set 0.879x speedup, step: 10
JOB test speedup 1.0498318500626944
TPCH test speedup 1.7328670561417485
TPCH skew test speedup 1.6874186063153602
Epoch 19/300 |loss: 0.001674| train set 1.779x speedup, test set 1.687x speedup, val set 0.879x speedup, step: 11
JOB test speedup 0.8702287546113431
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 20/300 |loss: 0.001669| train set 1.721x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 12
JOB test speedup 1.0633945809485368
TPCH test speedup 1.7328670561417485
TPCH skew test speedup 1.6874186063153602
Epoch 21/300 |loss: 0.001897| train set 1.775x speedup, test set 1.687x speedup, val set 0.879x speedup, step: 13
JOB test speedup 0.8764674809041
TPCH test speedup 1.7887914711981223
TPCH skew test speedup 1.7230259585614784
Epoch 22/300 |loss: 0.001574| train set 1.791x speedup, test set 1.723x speedup, val set 0.879x speedup, step: 14
JOB test speedup 0.8717109033164518
TPCH test speedup 1.8263789470549385
TPCH skew test speedup 1.7230259585614784
Epoch 23/300 |loss: 0.001491| train set 1.771x speedup, test set 1.723x speedup, val set 0.885x speedup, step: 15
JOB test speedup 0.8781672833551671
TPCH test speedup 1.8155521123550926
TPCH skew test speedup 1.7674602757091842
Epoch 24/300 |loss: 0.001428| train set 1.793x speedup, test set 1.767x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8479719137500309
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 25/300 |loss: 0.001298| train set 1.760x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 2
JOB test speedup 0.8758600302479488
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.691358692030667
Epoch 26/300 |loss: 0.001340| train set 1.736x speedup, test set 1.691x speedup, val set 0.885x speedup, step: 3
JOB test speedup 0.8638564270927264
TPCH test speedup 1.867445110337304
TPCH skew test speedup 1.7674602757091842
Epoch 27/300 |loss: 0.001321| train set 1.793x speedup, test set 1.767x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8591688867906099
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6512688084968852
Epoch 28/300 |loss: 0.001417| train set 1.793x speedup, test set 1.651x speedup, val set 0.885x speedup, step: 5
JOB test speedup 0.8665728859570282
TPCH test speedup 1.7205525448328494
TPCH skew test speedup 1.6646549695273958
Epoch 29/300 |loss: 0.001288| train set 1.791x speedup, test set 1.665x speedup, val set 0.885x speedup, step: 6
JOB test speedup 0.8839535992951081
TPCH test speedup 1.76084511272575
TPCH skew test speedup 1.6779653620945298
Epoch 30/300 |loss: 0.001245| train set 1.796x speedup, test set 1.678x speedup, val set 0.885x speedup, step: 7
JOB test speedup 0.8456156812265204
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6872971295676944
Epoch 31/300 |loss: 0.001328| train set 1.791x speedup, test set 1.687x speedup, val set 0.885x speedup, step: 8
JOB test speedup 0.852376732467071
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.646755817278369
Epoch 32/300 |loss: 0.001169| train set 1.736x speedup, test set 1.647x speedup, val set 0.888x speedup, step: 9
JOB test speedup 0.8703074380350662
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.646755817278369
Epoch 33/300 |loss: 0.001200| train set 1.754x speedup, test set 1.647x speedup, val set 0.885x speedup, step: 10
JOB test speedup 0.8683233050673267
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 34/300 |loss: 0.001271| train set 1.693x speedup, test set 1.687x speedup, val set 0.885x speedup, step: 11
JOB test speedup 0.8545767227836092
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 35/300 |loss: 0.001114| train set 1.789x speedup, test set 1.647x speedup, val set 0.885x speedup, step: 12
JOB test speedup 0.8583460974729785
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 36/300 |loss: 0.001085| train set 1.739x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.8490898938130891
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6872971295676944
Epoch 37/300 |loss: 0.001059| train set 1.762x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 14
JOB test speedup 0.872770586632823
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6872971295676944
Epoch 38/300 |loss: 0.001114| train set 1.729x speedup, test set 1.687x speedup, val set 0.885x speedup, step: 15
JOB test speedup 0.879496215915637
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 39/300 |loss: 0.001051| train set 1.795x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 16
JOB test speedup 1.0584704379314522
TPCH test speedup 1.844919484870941
TPCH skew test speedup 1.7966146163360857
Epoch 40/300 |loss: 0.001102| train set 1.729x speedup, test set 1.797x speedup, val set 0.886x speedup, step: 17
JOB test speedup 0.8664176217588964
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 41/300 |loss: 0.001172| train set 1.792x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 18
JOB test speedup 0.8637058337497977
TPCH test speedup 1.7389729706127188
TPCH skew test speedup 1.6872971295676944
Epoch 42/300 |loss: 0.001195| train set 1.777x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 19
JOB test speedup 0.860388455910046
TPCH test speedup 1.8034530959679782
TPCH skew test speedup 1.74255759755688
Epoch 43/300 |loss: 0.000990| train set 1.763x speedup, test set 1.743x speedup, val set 0.886x speedup, step: 20
JOB test speedup 0.8476221601724162
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7570916990845502
Epoch 44/300 |loss: 0.000972| train set 1.793x speedup, test set 1.757x speedup, val set 0.886x speedup, step: 21
JOB test speedup 0.8611704923067824
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6550416000314938
Epoch 45/300 |loss: 0.000931| train set 1.743x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 22
JOB test speedup 0.8454428564665882
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 46/300 |loss: 0.000987| train set 1.791x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 23
JOB test speedup 0.849510757346122
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 47/300 |loss: 0.000864| train set 1.772x speedup, test set 1.687x speedup, val set 0.888x speedup, step: 24
JOB test speedup 0.8474512078854998
TPCH test speedup 1.804153014269622
TPCH skew test speedup 1.7580138529857054
Epoch 48/300 |loss: 0.000947| train set 1.795x speedup, test set 1.758x speedup, val set 0.886x speedup, step: 25
JOB test speedup 0.9846342545881774
TPCH test speedup 1.7565543248735824
TPCH skew test speedup 1.697289996592837
Epoch 49/300 |loss: 0.000829| train set 1.792x speedup, test set 1.697x speedup, val set 0.886x speedup, step: 26
JOB test speedup 0.8686908354776357
TPCH test speedup 1.8342380048175975
TPCH skew test speedup 1.7849030017605303
Epoch 50/300 |loss: 0.000891| train set 1.795x speedup, test set 1.785x speedup, val set 0.886x speedup, step: 27
JOB test speedup 0.8635727093226958
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7966146163360857
Epoch 51/300 |loss: 0.000845| train set 1.792x speedup, test set 1.797x speedup, val set 0.886x speedup, step: 28
JOB test speedup 0.8551044613407619
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7674602757091842
Epoch 52/300 |loss: 0.001056| train set 1.794x speedup, test set 1.767x speedup, val set 0.885x speedup, step: 29
JOB test speedup 0.8759098390008826
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 53/300 |loss: 0.000819| train set 1.797x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 30
JOB test speedup 0.8821113168769747
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7674602757091842
Epoch 54/300 |loss: 0.000856| train set 1.761x speedup, test set 1.767x speedup, val set 0.886x speedup, step: 31
JOB test speedup 0.9967072701386079
TPCH test speedup 1.844919484870941
TPCH skew test speedup 1.7674602757091842
Epoch 55/300 |loss: 0.000893| train set 1.798x speedup, test set 1.767x speedup, val set 0.880x speedup, step: 32
JOB test speedup 0.8804420838498451
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7674602757091842
Epoch 56/300 |loss: 0.000822| train set 1.774x speedup, test set 1.767x speedup, val set 0.886x speedup, step: 33
JOB test speedup 0.9830523170854857
TPCH test speedup 1.8488553457387251
TPCH skew test speedup 1.7564139715095968
Epoch 57/300 |loss: 0.000780| train set 1.798x speedup, test set 1.756x speedup, val set 0.886x speedup, step: 34
JOB test speedup 0.9622264750631275
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7674602757091842
Epoch 58/300 |loss: 0.000821| train set 1.794x speedup, test set 1.767x speedup, val set 0.886x speedup, step: 35
JOB test speedup 1.0117443553518009
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7966146163360857
Epoch 59/300 |loss: 0.000764| train set 1.796x speedup, test set 1.797x speedup, val set 0.886x speedup, step: 36
JOB test speedup 0.8892235166383566
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7674602757091842
Epoch 60/300 |loss: 0.000781| train set 1.793x speedup, test set 1.767x speedup, val set 0.880x speedup, step: 37
JOB test speedup 0.983611493182722
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7966146163360857
Epoch 61/300 |loss: 0.000774| train set 1.792x speedup, test set 1.797x speedup, val set 0.883x speedup, step: 38
JOB test speedup 0.8742901243354245
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7674602757091842
Epoch 62/300 |loss: 0.000784| train set 1.773x speedup, test set 1.767x speedup, val set 0.876x speedup, step: 39
JOB test speedup 0.9989261986905639
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7674602757091842
Epoch 63/300 |loss: 0.000776| train set 1.791x speedup, test set 1.767x speedup, val set 0.879x speedup, step: 40
JOB test speedup 0.9004283385932779
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 64/300 |loss: 0.000868| train set 1.792x speedup, test set 1.763x speedup, val set 0.886x speedup, step: 41
JOB test speedup 0.9593486537143995
TPCH test speedup 1.8527111235523215
TPCH skew test speedup 1.7674602757091842
Epoch 65/300 |loss: 0.000798| train set 1.793x speedup, test set 1.767x speedup, val set 0.880x speedup, step: 42
JOB test speedup 0.9784237330956596
TPCH test speedup 1.8268665141590823
TPCH skew test speedup 1.7349617971873912
Epoch 66/300 |loss: 0.000830| train set 1.786x speedup, test set 1.735x speedup, val set 0.876x speedup, step: 43
early stopping at epoch 66
Training per epoch cost 2.954 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 14.052s, pg runtime 10.685s, speedup 0.760x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.957s, pg runtime 6.089s, speedup 1.022x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.290s, pg runtime 4.730s, speedup 0.571x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 1.404s, pg runtime 2.558s, speedup 1.822x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
12, opt runtime 48.784s, model runtime 166.153s, pg runtime 78.349s, speedup 0.472x
13, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
14, opt runtime 47.812s, model runtime 160.525s, pg runtime 83.069s, speedup 0.517x
15, opt runtime 47.518s, model runtime 159.536s, pg runtime 75.736s, speedup 0.475x
16, opt runtime 48.067s, model runtime 105.466s, pg runtime 81.014s, speedup 0.768x
17, opt runtime 47.738s, model runtime 112.310s, pg runtime 76.021s, speedup 0.677x
18, opt runtime 47.804s, model runtime 107.236s, pg runtime 81.177s, speedup 0.757x
19, opt runtime 49.511s, model runtime 179.218s, pg runtime 87.329s, speedup 0.487x
20, opt runtime 51.276s, model runtime 106.998s, pg runtime 79.222s, speedup 0.740x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 108.405s, pg runtime 80.711s, speedup 0.745x
12, opt runtime 53.203s, model runtime 110.198s, pg runtime 79.156s, speedup 0.718x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 108.531s, pg runtime 77.674s, speedup 0.716x
16, opt runtime 47.844s, model runtime 105.990s, pg runtime 80.007s, speedup 0.755x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 112.519s, pg runtime 77.369s, speedup 0.688x
19, opt runtime 52.382s, model runtime 117.620s, pg runtime 82.710s, speedup 0.703x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 24, train speedup 1.793, test speedup 0.878, val speedup 0.888
TPCH best validation speedup epoch: 24, train speedup 1.793, test speedup 1.816, val speedup 0.888
TPCH Skew best validation speedup epoch: 24, train speedup 1.793, test speedup 1.767, val speedup 0.888
execution cost 0:04:29.359333
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.218590, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029389| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.7082709924053361
TPCH test speedup 1.6919996171556706
TPCH skew test speedup 1.5890392931842958
Epoch 1/300 |loss: 0.010627| train set 0.960x speedup, test set 1.589x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.7093638309148348
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007515| train set 0.998x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.5845824980995113
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 3/300 |loss: 0.005965| train set 1.041x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0254629912767534
TPCH test speedup 1.1296850071970974
TPCH skew test speedup 1.410108986433031
Epoch 4/300 |loss: 0.005102| train set 1.521x speedup, test set 1.410x speedup, val set 0.563x speedup, step: 5
JOB test speedup 1.0224519774788947
TPCH test speedup 1.0198010640062136
TPCH skew test speedup 0.9960837448892246
Epoch 5/300 |loss: 0.004434| train set 1.532x speedup, test set 0.996x speedup, val set 0.563x speedup, step: 6
JOB test speedup 1.0333809779270822
TPCH test speedup 1.7154539796370556
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.004047| train set 1.582x speedup, test set 1.656x speedup, val set 0.563x speedup, step: 7
JOB test speedup 1.0188259058391553
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003644| train set 1.541x speedup, test set 1.655x speedup, val set 0.563x speedup, step: 8
JOB test speedup 1.7842653477098973
TPCH test speedup 1.7017541945053822
TPCH skew test speedup 1.6550416000314938
Epoch 8/300 |loss: 0.003484| train set 1.567x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.7577590445575002
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003428| train set 1.525x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 1
JOB test speedup 1.037495196086433
TPCH test speedup 1.7017541945053822
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003174| train set 1.776x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 2
JOB test speedup 1.068026231713307
TPCH test speedup 1.7017541945053822
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002914| train set 1.742x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 3
JOB test speedup 1.0521952657285583
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002794| train set 1.565x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8656320398923805
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002483| train set 1.507x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 5
JOB test speedup 0.8862283119089656
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002654| train set 1.791x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 1
JOB test speedup 1.0414448656346058
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002432| train set 1.529x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 2
JOB test speedup 0.8797610295949946
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002469| train set 1.749x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.0412788365530001
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002323| train set 1.723x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8705966669504691
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 18/300 |loss: 0.002002| train set 1.716x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 5
JOB test speedup 1.041138266530454
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 19/300 |loss: 0.001802| train set 1.743x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 6
JOB test speedup 0.8750031005197768
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 20/300 |loss: 0.001779| train set 1.749x speedup, test set 1.647x speedup, val set 0.888x speedup, step: 7
JOB test speedup 0.8804701822253105
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.001941| train set 1.774x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 8
JOB test speedup 0.8629469155041574
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 22/300 |loss: 0.001674| train set 1.792x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 9
JOB test speedup 0.8699125518530404
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 23/300 |loss: 0.001539| train set 1.774x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 10
JOB test speedup 0.8718708910680052
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6459466624093964
Epoch 24/300 |loss: 0.001520| train set 1.734x speedup, test set 1.646x speedup, val set 0.886x speedup, step: 11
JOB test speedup 0.8662986520698012
TPCH test speedup 1.7033088414333177
TPCH skew test speedup 1.6550416000314938
Epoch 25/300 |loss: 0.001386| train set 1.758x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 12
JOB test speedup 0.8723386717048185
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 26/300 |loss: 0.001487| train set 1.784x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.8807173203614237
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.646755817278369
Epoch 27/300 |loss: 0.001383| train set 1.790x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 14
JOB test speedup 0.8773406338622171
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 28/300 |loss: 0.001561| train set 1.784x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 15
JOB test speedup 0.8631224279384456
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6459466624093964
Epoch 29/300 |loss: 0.001358| train set 1.792x speedup, test set 1.646x speedup, val set 0.886x speedup, step: 16
JOB test speedup 0.8592494125956944
TPCH test speedup 1.735923420144999
TPCH skew test speedup 1.6872971295676944
Epoch 30/300 |loss: 0.001283| train set 1.693x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 17
JOB test speedup 0.8593646023963089
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 31/300 |loss: 0.001357| train set 1.790x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 18
JOB test speedup 0.8569486583148803
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6506243234689535
Epoch 32/300 |loss: 0.001241| train set 1.735x speedup, test set 1.651x speedup, val set 0.886x speedup, step: 19
JOB test speedup 0.8786392361712891
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 33/300 |loss: 0.001309| train set 1.789x speedup, test set 3.605x speedup, val set 0.886x speedup, step: 20
JOB test speedup 0.8556978659113881
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 34/300 |loss: 0.001299| train set 1.694x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 21
JOB test speedup 0.8773930631967429
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 35/300 |loss: 0.001148| train set 1.785x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 22
JOB test speedup 0.8804713701467437
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 36/300 |loss: 0.001105| train set 1.797x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 23
JOB test speedup 0.8568658045171105
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 37/300 |loss: 0.001173| train set 1.792x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 24
JOB test speedup 0.8628112043573322
TPCH test speedup 3.6499663810854304
TPCH skew test speedup 3.6047261949907274
Epoch 38/300 |loss: 0.001147| train set 1.795x speedup, test set 3.605x speedup, val set 0.886x speedup, step: 25
JOB test speedup 0.8802322517690725
TPCH test speedup 4.016719572107184
TPCH skew test speedup 3.629731985664382
Epoch 39/300 |loss: 0.001093| train set 1.762x speedup, test set 3.630x speedup, val set 0.886x speedup, step: 26
JOB test speedup 1.0819234008267604
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6599503812133514
Epoch 40/300 |loss: 0.001074| train set 1.775x speedup, test set 1.660x speedup, val set 0.886x speedup, step: 27
JOB test speedup 0.887057168414158
TPCH test speedup 3.6499663810854304
TPCH skew test speedup 3.6008512623889786
Epoch 41/300 |loss: 0.001162| train set 1.791x speedup, test set 3.601x speedup, val set 0.886x speedup, step: 28
JOB test speedup 1.0285266445103531
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 42/300 |loss: 0.001238| train set 1.775x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 29
JOB test speedup 0.88020278128723
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 43/300 |loss: 0.001101| train set 1.731x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 30
JOB test speedup 0.8819274702045137
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.42460697887221
Epoch 44/300 |loss: 0.001005| train set 1.795x speedup, test set 3.425x speedup, val set 0.886x speedup, step: 31
JOB test speedup 0.8603876345339894
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 45/300 |loss: 0.000973| train set 1.755x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 32
JOB test speedup 0.8632622024226124
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 46/300 |loss: 0.001087| train set 1.795x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 33
JOB test speedup 1.022469403019665
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 47/300 |loss: 0.001007| train set 1.770x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 34
JOB test speedup 0.8433588006369429
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6948198372560226
Epoch 48/300 |loss: 0.000992| train set 1.793x speedup, test set 1.695x speedup, val set 0.886x speedup, step: 35
JOB test speedup 0.8482481728755888
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 49/300 |loss: 0.000954| train set 1.727x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 36
JOB test speedup 0.8700514085063085
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 50/300 |loss: 0.001136| train set 1.791x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 37
JOB test speedup 0.8838864615366372
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 51/300 |loss: 0.000912| train set 1.796x speedup, test set 3.605x speedup, val set 0.886x speedup, step: 38
JOB test speedup 0.8863017845898806
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.646755817278369
Epoch 52/300 |loss: 0.001087| train set 1.756x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 39
JOB test speedup 1.064127212072474
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 53/300 |loss: 0.000936| train set 1.796x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 40
JOB test speedup 1.3524420684473424
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 54/300 |loss: 0.000970| train set 1.789x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 41
JOB test speedup 0.8435966596153771
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 55/300 |loss: 0.001006| train set 1.797x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 42
JOB test speedup 1.3502877420265178
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 56/300 |loss: 0.000875| train set 1.777x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 43
JOB test speedup 1.0448616545122438
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 57/300 |loss: 0.000807| train set 1.777x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 44
JOB test speedup 0.8795665851937458
TPCH test speedup 1.7108713733543268
TPCH skew test speedup 1.646755817278369
Epoch 58/300 |loss: 0.000921| train set 1.793x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 45
JOB test speedup 0.9004453910743996
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 59/300 |loss: 0.000817| train set 1.740x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 46
JOB test speedup 0.866946590031774
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 60/300 |loss: 0.000852| train set 1.787x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 47
JOB test speedup 0.857367769661486
TPCH test speedup 1.79789465527946
TPCH skew test speedup 1.746240344941664
Epoch 61/300 |loss: 0.000868| train set 1.792x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 48
JOB test speedup 0.8691212459293094
TPCH test speedup 1.7283838804335654
TPCH skew test speedup 1.6823189186525216
Epoch 62/300 |loss: 0.000867| train set 1.772x speedup, test set 1.682x speedup, val set 0.886x speedup, step: 49
JOB test speedup 0.8652061974160433
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6536008668172804
Epoch 63/300 |loss: 0.000788| train set 1.796x speedup, test set 1.654x speedup, val set 0.883x speedup, step: 50
JOB test speedup 0.86518785297534
TPCH test speedup 1.79789465527946
TPCH skew test speedup 1.746240344941664
Epoch 64/300 |loss: 0.000934| train set 1.793x speedup, test set 1.746x speedup, val set 0.883x speedup, step: 51
JOB test speedup 0.8615679086382644
TPCH test speedup 1.698094204447454
TPCH skew test speedup 1.6400015653276456
Epoch 65/300 |loss: 0.000841| train set 1.796x speedup, test set 1.640x speedup, val set 0.886x speedup, step: 52
JOB test speedup 0.8862850066333823
TPCH test speedup 1.7302856050437365
TPCH skew test speedup 1.6795547952310468
Epoch 66/300 |loss: 0.000815| train set 1.797x speedup, test set 1.680x speedup, val set 0.886x speedup, step: 53
early stopping at epoch 66
Training per epoch cost 2.955 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.875s, pg runtime 2.352s, speedup 2.688x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 10.685s, pg runtime 10.685s, speedup 1.000x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 6.021s, pg runtime 6.089s, speedup 1.011x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.332s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 14, train speedup 1.791, test speedup 0.886, val speedup 0.887
TPCH best validation speedup epoch: 14, train speedup 1.791, test speedup 1.709, val speedup 0.887
TPCH Skew best validation speedup epoch: 14, train speedup 1.791, test speedup 1.655, val speedup 0.887
execution cost 0:04:29.325220
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.258919, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.9975725197571982
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010600| train set 0.960x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007437| train set 1.011x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.6451523613673051
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.676329954487448
Epoch 3/300 |loss: 0.005917| train set 1.069x speedup, test set 1.676x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.029422883646122
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005040| train set 1.518x speedup, test set 1.825x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.0318503655350924
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 5/300 |loss: 0.004449| train set 1.531x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.0318855757019523
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.004016| train set 1.585x speedup, test set 1.656x speedup, val set 0.887x speedup, step: 7
JOB test speedup 1.0229217028012256
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003609| train set 1.521x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 8
JOB test speedup 0.7472356481105947
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 8/300 |loss: 0.003498| train set 1.539x speedup, test set 1.656x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.0337698842594938
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003512| train set 1.567x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 1
JOB test speedup 1.0527781188144296
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003060| train set 1.527x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.0766672796717467
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002831| train set 1.788x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 3
JOB test speedup 1.0213244143188869
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002945| train set 1.519x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.8616166809651273
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 13/300 |loss: 0.002396| train set 1.447x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8802686779541972
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 14/300 |loss: 0.002554| train set 1.740x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.8738994415785339
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 15/300 |loss: 0.002373| train set 1.539x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8888787350314632
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 16/300 |loss: 0.002264| train set 1.776x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.8848504542148237
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 17/300 |loss: 0.002277| train set 1.786x speedup, test set 3.461x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.4330384738423803
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 18/300 |loss: 0.001947| train set 1.710x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8680643005663967
TPCH test speedup 3.8794917544958873
TPCH skew test speedup 3.8839447824563007
Epoch 19/300 |loss: 0.001774| train set 1.748x speedup, test set 3.884x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.882217326911629
TPCH test speedup 3.8794917544958873
TPCH skew test speedup 3.8839447824563007
Epoch 20/300 |loss: 0.001669| train set 1.718x speedup, test set 3.884x speedup, val set 0.880x speedup, step: 12
JOB test speedup 1.0588513620567421
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 21/300 |loss: 0.001909| train set 1.711x speedup, test set 3.461x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.867852624835745
TPCH test speedup 1.4982037861550428
TPCH skew test speedup 1.483479981247498
Epoch 22/300 |loss: 0.001605| train set 1.789x speedup, test set 1.483x speedup, val set 0.886x speedup, step: 14
JOB test speedup 0.8861366436635516
TPCH test speedup 1.4766445129765668
TPCH skew test speedup 1.4531419077410286
Epoch 23/300 |loss: 0.001559| train set 1.678x speedup, test set 1.453x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8894729935793889
TPCH test speedup 1.4887055183593907
TPCH skew test speedup 1.483479981247498
Epoch 24/300 |loss: 0.001520| train set 1.759x speedup, test set 1.483x speedup, val set 0.880x speedup, step: 16
JOB test speedup 1.0399569772262869
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 25/300 |loss: 0.001347| train set 1.760x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.8534476999748984
TPCH test speedup 3.765626984713282
TPCH skew test speedup 3.651553128797366
Epoch 26/300 |loss: 0.001401| train set 1.787x speedup, test set 3.652x speedup, val set 0.886x speedup, step: 18
JOB test speedup 0.891510947236451
TPCH test speedup 3.8794917544958873
TPCH skew test speedup 3.8839447824563007
Epoch 27/300 |loss: 0.001341| train set 1.772x speedup, test set 3.884x speedup, val set 0.886x speedup, step: 19
JOB test speedup 0.891659269708581
TPCH test speedup 3.6749302587400248
TPCH skew test speedup 3.6446678131503827
Epoch 28/300 |loss: 0.001455| train set 1.788x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 20
JOB test speedup 1.0568974199964147
TPCH test speedup 1.4716563436526053
TPCH skew test speedup 1.4520502714645176
Epoch 29/300 |loss: 0.001321| train set 1.792x speedup, test set 1.452x speedup, val set 0.880x speedup, step: 21
JOB test speedup 0.8776778715898982
TPCH test speedup 1.4982037861550428
TPCH skew test speedup 1.483479981247498
Epoch 30/300 |loss: 0.001222| train set 1.791x speedup, test set 1.483x speedup, val set 0.880x speedup, step: 22
JOB test speedup 0.8561555061061885
TPCH test speedup 1.5694117867803816
TPCH skew test speedup 1.5429501642138916
Epoch 31/300 |loss: 0.001295| train set 1.793x speedup, test set 1.543x speedup, val set 0.880x speedup, step: 23
JOB test speedup 0.8871312686605145
TPCH test speedup 4.735250267536302
TPCH skew test speedup 4.610464784698367
Epoch 32/300 |loss: 0.001234| train set 1.736x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 24
JOB test speedup 0.9012227591332629
TPCH test speedup 4.735250267536302
TPCH skew test speedup 4.610464784698367
Epoch 33/300 |loss: 0.001170| train set 1.789x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 25
JOB test speedup 0.8942215449621789
TPCH test speedup 4.479833056097433
TPCH skew test speedup 4.155070818499354
Epoch 34/300 |loss: 0.001201| train set 1.761x speedup, test set 4.155x speedup, val set 0.880x speedup, step: 26
JOB test speedup 0.8802908665863172
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 35/300 |loss: 0.001095| train set 1.735x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 27
JOB test speedup 1.0637068273897183
TPCH test speedup 1.4956814013516462
TPCH skew test speedup 1.4756903413917715
Epoch 36/300 |loss: 0.001021| train set 1.755x speedup, test set 1.476x speedup, val set 0.886x speedup, step: 28
JOB test speedup 0.9039624990006252
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 37/300 |loss: 0.001136| train set 1.761x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 29
JOB test speedup 0.8788725431935757
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 38/300 |loss: 0.001089| train set 1.788x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 30
JOB test speedup 1.3860581631565638
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 39/300 |loss: 0.001061| train set 1.753x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 31
JOB test speedup 1.3802488678345781
TPCH test speedup 3.8413504118193815
TPCH skew test speedup 3.7190440114064285
Epoch 40/300 |loss: 0.001030| train set 1.790x speedup, test set 3.719x speedup, val set 0.880x speedup, step: 32
JOB test speedup 1.3753074878287133
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 41/300 |loss: 0.001155| train set 1.736x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 33
JOB test speedup 0.8886103511744511
TPCH test speedup 3.7061936462173954
TPCH skew test speedup 3.651553128797366
Epoch 42/300 |loss: 0.001187| train set 1.766x speedup, test set 3.652x speedup, val set 0.880x speedup, step: 34
JOB test speedup 0.8880860348539276
TPCH test speedup 4.735250267536302
TPCH skew test speedup 4.610464784698367
Epoch 43/300 |loss: 0.001025| train set 1.794x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 35
JOB test speedup 0.90306988389846
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.9690395449190925
Epoch 44/300 |loss: 0.000971| train set 1.755x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 36
JOB test speedup 1.0385480622380643
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.8294910619785383
Epoch 45/300 |loss: 0.000943| train set 1.759x speedup, test set 3.829x speedup, val set 0.880x speedup, step: 37
JOB test speedup 0.8790333991460338
TPCH test speedup 1.4982037861550428
TPCH skew test speedup 1.483479981247498
Epoch 46/300 |loss: 0.001050| train set 1.793x speedup, test set 1.483x speedup, val set 0.880x speedup, step: 38
JOB test speedup 0.8646608371229586
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 47/300 |loss: 0.000914| train set 1.777x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 39
JOB test speedup 1.3822466277255567
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 48/300 |loss: 0.000918| train set 1.796x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 40
JOB test speedup 0.8895071824941324
TPCH test speedup 4.641649374992003
TPCH skew test speedup 4.610464784698367
Epoch 49/300 |loss: 0.000883| train set 1.790x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 41
JOB test speedup 0.8624933763146367
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 50/300 |loss: 0.001005| train set 1.776x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 42
JOB test speedup 0.8893625718643147
TPCH test speedup 4.11598666752517
TPCH skew test speedup 3.8294910619785383
Epoch 51/300 |loss: 0.000836| train set 1.789x speedup, test set 3.829x speedup, val set 0.880x speedup, step: 43
JOB test speedup 1.0127934307626099
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 52/300 |loss: 0.001043| train set 1.786x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 44
JOB test speedup 0.8877890775883434
TPCH test speedup 1.5693528810712407
TPCH skew test speedup 1.5429501642138916
Epoch 53/300 |loss: 0.000917| train set 1.741x speedup, test set 1.543x speedup, val set 0.880x speedup, step: 45
JOB test speedup 0.8975940418213735
TPCH test speedup 1.550797365560942
TPCH skew test speedup 1.5072063364310344
Epoch 54/300 |loss: 0.000845| train set 1.796x speedup, test set 1.507x speedup, val set 0.880x speedup, step: 46
JOB test speedup 0.8805802172241154
TPCH test speedup 4.734714055494682
TPCH skew test speedup 4.42323151821159
Epoch 55/300 |loss: 0.000933| train set 1.798x speedup, test set 4.423x speedup, val set 0.880x speedup, step: 47
JOB test speedup 0.8902013117637398
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 56/300 |loss: 0.000823| train set 1.778x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 48
JOB test speedup 0.893391767900248
TPCH test speedup 4.059746699250265
TPCH skew test speedup 3.79129768789284
Epoch 57/300 |loss: 0.000783| train set 1.794x speedup, test set 3.791x speedup, val set 0.880x speedup, step: 49
JOB test speedup 1.4084514080792208
TPCH test speedup 4.069586682001645
TPCH skew test speedup 4.117268715015829
Epoch 58/300 |loss: 0.000834| train set 1.794x speedup, test set 4.117x speedup, val set 0.880x speedup, step: 50
JOB test speedup 1.3591993098917348
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 59/300 |loss: 0.000811| train set 1.795x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 51
JOB test speedup 0.8773330386593776
TPCH test speedup 3.6749302587400248
TPCH skew test speedup 3.6446678131503827
Epoch 60/300 |loss: 0.000777| train set 1.798x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 52
JOB test speedup 1.3203420644336594
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 61/300 |loss: 0.000845| train set 1.739x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 53
JOB test speedup 0.8911538689016909
TPCH test speedup 4.13514537024913
TPCH skew test speedup 4.025897149096412
Epoch 62/300 |loss: 0.000774| train set 1.795x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 54
JOB test speedup 1.301723259439601
TPCH test speedup 4.437604444047875
TPCH skew test speedup 4.025897149096412
Epoch 63/300 |loss: 0.000737| train set 1.793x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 55
JOB test speedup 1.0330827807709824
TPCH test speedup 4.13473645012496
TPCH skew test speedup 4.025897149096412
Epoch 64/300 |loss: 0.000923| train set 1.797x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 56
JOB test speedup 1.0366218673531011
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 65/300 |loss: 0.000797| train set 1.794x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 57
JOB test speedup 1.0677836139430976
TPCH test speedup 4.735250267536302
TPCH skew test speedup 4.610464784698367
Epoch 66/300 |loss: 0.000776| train set 1.763x speedup, test set 4.610x speedup, val set 0.880x speedup, step: 58
JOB test speedup 0.855299542727981
TPCH test speedup 3.964136663773001
TPCH skew test speedup 3.8431436524239895
Epoch 67/300 |loss: 0.001099| train set 1.792x speedup, test set 3.843x speedup, val set 0.886x speedup, step: 59
JOB test speedup 0.8977950020651837
TPCH test speedup 4.13473645012496
TPCH skew test speedup 4.025897149096412
Epoch 68/300 |loss: 0.000862| train set 1.795x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 60
early stopping at epoch 68
Training per epoch cost 2.959 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 6.021s, pg runtime 6.089s, speedup 1.011x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.818s, pg runtime 8.279s, speedup 0.765x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 9, train speedup 1.567, test speedup 1.034, val speedup 0.886
TPCH best validation speedup epoch: 9, train speedup 1.567, test speedup 1.696, val speedup 0.886
TPCH Skew best validation speedup epoch: 9, train speedup 1.567, test speedup 1.655, val speedup 0.886
execution cost 0:04:38.330565
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.230349, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029389| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.7082709924053361
TPCH test speedup 1.6919996171556706
TPCH skew test speedup 1.5890392931842958
Epoch 1/300 |loss: 0.010627| train set 0.960x speedup, test set 1.589x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.7093638309148348
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007515| train set 0.998x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.5845824980995113
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 3/300 |loss: 0.005961| train set 1.048x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0254629912767534
TPCH test speedup 1.082801473262965
TPCH skew test speedup 1.0553800698521154
Epoch 4/300 |loss: 0.005081| train set 1.521x speedup, test set 1.055x speedup, val set 0.563x speedup, step: 5
JOB test speedup 1.019402280853305
TPCH test speedup 1.0198010640062136
TPCH skew test speedup 0.9960837448892246
Epoch 5/300 |loss: 0.004450| train set 1.532x speedup, test set 0.996x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.0210813518685011
TPCH test speedup 1.7142415226708987
TPCH skew test speedup 1.6564039613399422
Epoch 6/300 |loss: 0.004061| train set 1.583x speedup, test set 1.656x speedup, val set 0.832x speedup, step: 7
JOB test speedup 1.021176323455529
TPCH test speedup 1.0565082271370958
TPCH skew test speedup 1.3062150060474722
Epoch 7/300 |loss: 0.003617| train set 1.534x speedup, test set 1.306x speedup, val set 0.563x speedup, step: 8
JOB test speedup 1.772963848568614
TPCH test speedup 1.7017541945053822
TPCH skew test speedup 1.6550416000314938
Epoch 8/300 |loss: 0.003522| train set 1.572x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.7368013640480546
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003487| train set 1.562x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 1
JOB test speedup 1.0261863708320615
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003158| train set 1.585x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 2
JOB test speedup 1.063911322175195
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002914| train set 1.539x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 3
JOB test speedup 1.0520225870448943
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002717| train set 1.575x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 4
JOB test speedup 0.8556159925534341
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002507| train set 1.506x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 5
JOB test speedup 0.8575642728214742
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 14/300 |loss: 0.002743| train set 1.762x speedup, test set 0.996x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8645799588419933
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002495| train set 1.544x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 2
JOB test speedup 0.8766042684046329
TPCH test speedup 1.0565082271370958
TPCH skew test speedup 1.3062150060474722
Epoch 16/300 |loss: 0.002420| train set 1.748x speedup, test set 1.306x speedup, val set 0.886x speedup, step: 3
JOB test speedup 0.8709432493357542
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 17/300 |loss: 0.002388| train set 1.790x speedup, test set 0.996x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.853985501542291
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 18/300 |loss: 0.002103| train set 1.715x speedup, test set 0.996x speedup, val set 0.885x speedup, step: 5
JOB test speedup 0.8863890341924668
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 19/300 |loss: 0.001821| train set 1.752x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 6
JOB test speedup 0.8475037297925972
TPCH test speedup 1.7799774392569094
TPCH skew test speedup 1.6899740724242258
Epoch 20/300 |loss: 0.001774| train set 1.747x speedup, test set 1.690x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.8676696976952205
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.001932| train set 1.766x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 8
JOB test speedup 0.8692593636409325
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 22/300 |loss: 0.001631| train set 1.791x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 9
JOB test speedup 0.8672169087793933
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 23/300 |loss: 0.001519| train set 1.775x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 10
JOB test speedup 0.8786998066364121
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6550416000314938
Epoch 24/300 |loss: 0.001514| train set 1.736x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 11
JOB test speedup 0.8677713140427561
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 25/300 |loss: 0.001327| train set 1.760x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 12
JOB test speedup 0.8790140091573093
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6550416000314938
Epoch 26/300 |loss: 0.001485| train set 1.727x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.8789856090057149
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 27/300 |loss: 0.001387| train set 1.739x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 14
JOB test speedup 0.8637471769235122
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 28/300 |loss: 0.001532| train set 1.792x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 15
JOB test speedup 0.8787395081245084
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6872971295676944
Epoch 29/300 |loss: 0.001354| train set 1.795x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 16
JOB test speedup 0.8662077336406155
TPCH test speedup 1.7147060179543754
TPCH skew test speedup 1.646755817278369
Epoch 30/300 |loss: 0.001328| train set 1.763x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 17
JOB test speedup 0.8599224941954331
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.655859724054129
Epoch 31/300 |loss: 0.001331| train set 1.792x speedup, test set 1.656x speedup, val set 0.886x speedup, step: 18
JOB test speedup 0.8625371297528869
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 32/300 |loss: 0.001220| train set 1.734x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 19
JOB test speedup 0.8763981701164398
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 33/300 |loss: 0.001295| train set 1.750x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 20
JOB test speedup 0.8835703968476055
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 34/300 |loss: 0.001242| train set 1.757x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 21
JOB test speedup 0.8672036963585572
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 35/300 |loss: 0.001161| train set 1.732x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 22
JOB test speedup 0.8956831912286407
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 36/300 |loss: 0.001131| train set 1.736x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 23
JOB test speedup 0.8971219232475172
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 37/300 |loss: 0.001176| train set 1.793x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 24
JOB test speedup 0.8629326561886148
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 38/300 |loss: 0.001120| train set 1.796x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 25
JOB test speedup 0.8662423156801998
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 39/300 |loss: 0.001081| train set 1.761x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 26
JOB test speedup 1.0424300166950986
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 40/300 |loss: 0.001098| train set 1.794x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 27
JOB test speedup 0.8717590818221221
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 41/300 |loss: 0.001273| train set 1.740x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 28
JOB test speedup 1.0438121811360517
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 42/300 |loss: 0.001262| train set 1.791x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 29
JOB test speedup 0.8679326055890737
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 43/300 |loss: 0.001102| train set 1.742x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 30
JOB test speedup 0.8745985722155707
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 44/300 |loss: 0.001007| train set 1.791x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 31
JOB test speedup 0.8707947548479552
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 45/300 |loss: 0.000975| train set 1.759x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 32
JOB test speedup 0.8954389582981362
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 46/300 |loss: 0.001064| train set 1.786x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 33
JOB test speedup 0.8713514354171352
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 47/300 |loss: 0.000985| train set 1.705x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 34
JOB test speedup 0.8815179255876103
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 48/300 |loss: 0.000969| train set 1.719x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 35
JOB test speedup 0.852564753785987
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 49/300 |loss: 0.001016| train set 1.787x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 36
JOB test speedup 0.8910491733816357
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 50/300 |loss: 0.001041| train set 1.773x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 37
JOB test speedup 0.8949011009541659
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 51/300 |loss: 0.000917| train set 1.788x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 38
JOB test speedup 0.8615699769494007
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 52/300 |loss: 0.001042| train set 1.792x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 39
JOB test speedup 0.8956397863460472
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 53/300 |loss: 0.000900| train set 1.790x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 40
JOB test speedup 0.8635860902556355
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 54/300 |loss: 0.000932| train set 1.793x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 41
JOB test speedup 0.9865354026488373
TPCH test speedup 1.2608353410484034
TPCH skew test speedup 1.2360632800354558
Epoch 55/300 |loss: 0.000977| train set 1.796x speedup, test set 1.236x speedup, val set 0.886x speedup, step: 42
JOB test speedup 0.8684711006263172
TPCH test speedup 1.6621653549746727
TPCH skew test speedup 1.3838032220934702
Epoch 56/300 |loss: 0.000821| train set 1.776x speedup, test set 1.384x speedup, val set 0.886x speedup, step: 43
JOB test speedup 0.8697320438904831
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 57/300 |loss: 0.000820| train set 1.744x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 44
JOB test speedup 0.88893749499589
TPCH test speedup 1.2419806853052644
TPCH skew test speedup 1.214165721252102
Epoch 58/300 |loss: 0.000899| train set 1.793x speedup, test set 1.214x speedup, val set 0.886x speedup, step: 45
JOB test speedup 0.8850886746955234
TPCH test speedup 1.2608353410484034
TPCH skew test speedup 1.2360632800354558
Epoch 59/300 |loss: 0.000810| train set 1.793x speedup, test set 1.236x speedup, val set 0.886x speedup, step: 46
JOB test speedup 0.8848731440582782
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 60/300 |loss: 0.000849| train set 1.791x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 47
JOB test speedup 0.8836745589229698
TPCH test speedup 1.7313032164852664
TPCH skew test speedup 1.6872971295676944
Epoch 61/300 |loss: 0.000872| train set 1.737x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 48
JOB test speedup 0.8919223138773124
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2665455033722213
Epoch 62/300 |loss: 0.000838| train set 1.766x speedup, test set 1.267x speedup, val set 0.887x speedup, step: 49
JOB test speedup 0.8434348167566214
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.722823515582378
Epoch 63/300 |loss: 0.000850| train set 1.764x speedup, test set 1.723x speedup, val set 0.886x speedup, step: 50
JOB test speedup 0.8749680966599899
TPCH test speedup 1.6710369020055158
TPCH skew test speedup 1.3112280358457933
Epoch 64/300 |loss: 0.000959| train set 1.791x speedup, test set 1.311x speedup, val set 0.886x speedup, step: 51
JOB test speedup 0.8802431552951064
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 65/300 |loss: 0.000881| train set 1.793x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 52
early stopping at epoch 65
Training per epoch cost 2.915 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.875s, pg runtime 2.352s, speedup 2.688x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 6.021s, pg runtime 6.089s, speedup 1.011x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 10.818s, pg runtime 8.279s, speedup 0.765x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 580.359s, pg runtime 432.766s, speedup 0.746x
32, opt runtime 15.120s, model runtime 580.203s, pg runtime 566.078s, speedup 0.976x
33, opt runtime 16.639s, model runtime 576.339s, pg runtime 462.544s, speedup 0.803x
34, opt runtime 16.280s, model runtime 615.635s, pg runtime 634.990s, speedup 1.031x
35, opt runtime 16.528s, model runtime 616.056s, pg runtime 620.762s, speedup 1.008x
36, opt runtime 18.690s, model runtime 637.615s, pg runtime 651.942s, speedup 1.022x
37, opt runtime 16.438s, model runtime 583.941s, pg runtime 546.887s, speedup 0.937x
38, opt runtime 16.138s, model runtime 572.741s, pg runtime 501.793s, speedup 0.876x
39, opt runtime 16.770s, model runtime 617.719s, pg runtime 594.754s, speedup 0.963x
40, opt runtime 16.305s, model runtime 577.424s, pg runtime 436.168s, speedup 0.755x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 620.176s, pg runtime 602.586s, speedup 0.972x
32, opt runtime 16.542s, model runtime 570.414s, pg runtime 461.957s, speedup 0.810x
33, opt runtime 16.136s, model runtime 573.236s, pg runtime 410.283s, speedup 0.716x
34, opt runtime 14.422s, model runtime 584.445s, pg runtime 497.542s, speedup 0.851x
35, opt runtime 15.980s, model runtime 578.049s, pg runtime 504.239s, speedup 0.872x
36, opt runtime 16.482s, model runtime 621.378s, pg runtime 622.915s, speedup 1.002x
37, opt runtime 16.301s, model runtime 614.445s, pg runtime 646.719s, speedup 1.053x
38, opt runtime 16.194s, model runtime 575.813s, pg runtime 439.255s, speedup 0.763x
39, opt runtime 16.149s, model runtime 592.102s, pg runtime 423.122s, speedup 0.715x
40, opt runtime 13.751s, model runtime 572.258s, pg runtime 434.625s, speedup 0.759x
====================
JOB best validation speedup epoch: 14, train speedup 1.762, test speedup 0.858, val speedup 0.888
TPCH best validation speedup epoch: 14, train speedup 1.762, test speedup 1.015, val speedup 0.888
TPCH Skew best validation speedup epoch: 14, train speedup 1.762, test speedup 0.996, val speedup 0.888
execution cost 0:04:22.315164
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.198746, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.9975725197571982
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010600| train set 0.960x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007437| train set 1.011x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.6451523613673051
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.6974864140976704
Epoch 3/300 |loss: 0.005919| train set 1.097x speedup, test set 1.697x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.029422883646122
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005039| train set 1.518x speedup, test set 1.825x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.8066315754851971
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 5/300 |loss: 0.004497| train set 1.524x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.031912769185071
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.003978| train set 1.585x speedup, test set 1.656x speedup, val set 0.887x speedup, step: 7
JOB test speedup 1.0275756396626656
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003646| train set 1.485x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 8
JOB test speedup 0.7481797421343265
TPCH test speedup 1.7268479151067369
TPCH skew test speedup 1.6563585214137309
Epoch 8/300 |loss: 0.003428| train set 1.538x speedup, test set 1.656x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.756308354002879
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003483| train set 1.565x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.0417566831133547
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003053| train set 1.570x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.0588480600827472
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002859| train set 1.753x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 3
JOB test speedup 1.0528634755639268
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002847| train set 1.675x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8585389114789489
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 13/300 |loss: 0.002447| train set 1.504x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8717035470063066
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 14/300 |loss: 0.002556| train set 1.770x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.052674055889809
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 15/300 |loss: 0.002395| train set 1.725x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8746993100733726
TPCH test speedup 1.4716563436526053
TPCH skew test speedup 1.4520502714645176
Epoch 16/300 |loss: 0.002308| train set 1.745x speedup, test set 1.452x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.8559502725865017
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002392| train set 1.782x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 4
JOB test speedup 0.8636652208630115
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 18/300 |loss: 0.001904| train set 1.743x speedup, test set 0.996x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8712862091452339
TPCH test speedup 1.0294269818446682
TPCH skew test speedup 0.9960837448892246
Epoch 19/300 |loss: 0.001739| train set 1.689x speedup, test set 0.996x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8824409661709205
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 20/300 |loss: 0.001712| train set 1.717x speedup, test set 0.996x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8874018878961304
TPCH test speedup 1.0198010640062136
TPCH skew test speedup 0.9960837448892246
Epoch 21/300 |loss: 0.001897| train set 1.785x speedup, test set 0.996x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.8799882026664334
TPCH test speedup 1.0324788086278407
TPCH skew test speedup 1.010773917811871
Epoch 22/300 |loss: 0.001605| train set 1.787x speedup, test set 1.011x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.8842938107964442
TPCH test speedup 1.0279589832706968
TPCH skew test speedup 1.010773917811871
Epoch 23/300 |loss: 0.001484| train set 1.728x speedup, test set 1.011x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8881329908399462
TPCH test speedup 1.0324788086278407
TPCH skew test speedup 1.010773917811871
Epoch 24/300 |loss: 0.001474| train set 1.734x speedup, test set 1.011x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8820043962255943
TPCH test speedup 1.4624906733024454
TPCH skew test speedup 1.4520502714645176
Epoch 25/300 |loss: 0.001392| train set 1.749x speedup, test set 1.452x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8578364641561083
TPCH test speedup 1.0324788086278407
TPCH skew test speedup 1.010773917811871
Epoch 26/300 |loss: 0.001410| train set 1.778x speedup, test set 1.011x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.8788588069990784
TPCH test speedup 1.2485845401188225
TPCH skew test speedup 1.2186641144306138
Epoch 27/300 |loss: 0.001360| train set 1.788x speedup, test set 1.219x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.8680381495115136
TPCH test speedup 1.0324788086278407
TPCH skew test speedup 1.0093654770337537
Epoch 28/300 |loss: 0.001371| train set 1.785x speedup, test set 1.009x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8774405492325987
TPCH test speedup 1.4716563436526053
TPCH skew test speedup 1.4450447895936358
Epoch 29/300 |loss: 0.001295| train set 1.793x speedup, test set 1.445x speedup, val set 0.880x speedup, step: 6
JOB test speedup 1.068860765734648
TPCH test speedup 1.0312802502136356
TPCH skew test speedup 1.004077198219159
Epoch 30/300 |loss: 0.001220| train set 1.792x speedup, test set 1.004x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8835367822429376
TPCH test speedup 1.0324788086278407
TPCH skew test speedup 1.0076774185932575
Epoch 31/300 |loss: 0.001259| train set 1.789x speedup, test set 1.008x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.8799925262199775
TPCH test speedup 1.8928406560940798
TPCH skew test speedup 1.8084353419881432
Epoch 32/300 |loss: 0.001202| train set 1.784x speedup, test set 1.808x speedup, val set 0.880x speedup, step: 9
JOB test speedup 1.4111388151623177
TPCH test speedup 4.735250267536302
TPCH skew test speedup 4.536049364979434
Epoch 33/300 |loss: 0.001242| train set 1.735x speedup, test set 4.536x speedup, val set 0.880x speedup, step: 10
JOB test speedup 1.030045148875867
TPCH test speedup 1.0312802502136356
TPCH skew test speedup 1.004077198219159
Epoch 34/300 |loss: 0.001215| train set 1.759x speedup, test set 1.004x speedup, val set 0.880x speedup, step: 11
JOB test speedup 1.3219734291681635
TPCH test speedup 1.8031530791195005
TPCH skew test speedup 1.7182320249034126
Epoch 35/300 |loss: 0.001154| train set 1.742x speedup, test set 1.718x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.9046209529703653
TPCH test speedup 1.9521374171101153
TPCH skew test speedup 1.8791759971258206
Epoch 36/300 |loss: 0.001038| train set 1.790x speedup, test set 1.879x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.8997871773806376
TPCH test speedup 1.0324788086278407
TPCH skew test speedup 1.0076774185932575
Epoch 37/300 |loss: 0.001051| train set 1.791x speedup, test set 1.008x speedup, val set 0.880x speedup, step: 14
JOB test speedup 0.8655412706401912
TPCH test speedup 1.0658045411743118
TPCH skew test speedup 1.0380342662371218
Epoch 38/300 |loss: 0.001171| train set 1.793x speedup, test set 1.038x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8924021638340798
TPCH test speedup 1.7971221493070757
TPCH skew test speedup 1.736832968532509
Epoch 39/300 |loss: 0.001059| train set 1.763x speedup, test set 1.737x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.873326562304674
TPCH test speedup 1.8919395166050592
TPCH skew test speedup 1.8290267359966537
Epoch 40/300 |loss: 0.001039| train set 1.742x speedup, test set 1.829x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8964659294170488
TPCH test speedup 1.9521374171101153
TPCH skew test speedup 1.8791759971258206
Epoch 41/300 |loss: 0.001032| train set 1.793x speedup, test set 1.879x speedup, val set 0.880x speedup, step: 3
JOB test speedup 1.0201025138742905
TPCH test speedup 1.8431699730710238
TPCH skew test speedup 1.781991596054275
Epoch 42/300 |loss: 0.001049| train set 1.773x speedup, test set 1.782x speedup, val set 0.880x speedup, step: 4
JOB test speedup 1.0132455705779428
TPCH test speedup 1.9478571699106981
TPCH skew test speedup 1.8666940866769215
Epoch 43/300 |loss: 0.000993| train set 1.790x speedup, test set 1.867x speedup, val set 0.880x speedup, step: 5
JOB test speedup 1.0115081248373756
TPCH test speedup 1.0645274092174575
TPCH skew test speedup 1.0342142723221648
Epoch 44/300 |loss: 0.000925| train set 1.760x speedup, test set 1.034x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.8941323077290233
TPCH test speedup 1.0476058896733378
TPCH skew test speedup 1.0225470971962975
Epoch 45/300 |loss: 0.000965| train set 1.756x speedup, test set 1.023x speedup, val set 0.877x speedup, step: 7
JOB test speedup 0.8923423615255918
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9930764642124389
Epoch 46/300 |loss: 0.001009| train set 1.792x speedup, test set 0.993x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.8736708712610334
TPCH test speedup 1.0658045411743118
TPCH skew test speedup 1.0380342662371218
Epoch 47/300 |loss: 0.000942| train set 1.772x speedup, test set 1.038x speedup, val set 0.880x speedup, step: 9
JOB test speedup 0.8877920788824527
TPCH test speedup 1.060961988737723
TPCH skew test speedup 1.0342142723221648
Epoch 48/300 |loss: 0.001018| train set 1.745x speedup, test set 1.034x speedup, val set 0.880x speedup, step: 10
JOB test speedup 1.6538840605890273
TPCH test speedup 1.9360424540716965
TPCH skew test speedup 1.8791759971258206
Epoch 49/300 |loss: 0.000878| train set 1.789x speedup, test set 1.879x speedup, val set 0.880x speedup, step: 11
JOB test speedup 1.3064979248470532
TPCH test speedup 1.9649602423670136
TPCH skew test speedup 1.8791759971258206
Epoch 50/300 |loss: 0.000997| train set 1.739x speedup, test set 1.879x speedup, val set 0.880x speedup, step: 12
JOB test speedup 1.4326819667994988
TPCH test speedup 1.8288150819477214
TPCH skew test speedup 1.7916981690075913
Epoch 51/300 |loss: 0.000846| train set 1.766x speedup, test set 1.792x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.8625476441335693
TPCH test speedup 1.8288150819477214
TPCH skew test speedup 1.781991596054275
Epoch 52/300 |loss: 0.001004| train set 1.735x speedup, test set 1.782x speedup, val set 0.880x speedup, step: 14
JOB test speedup 0.9913345346017549
TPCH test speedup 1.8707166360246374
TPCH skew test speedup 1.8216643811640454
Epoch 53/300 |loss: 0.000850| train set 1.796x speedup, test set 1.822x speedup, val set 0.880x speedup, step: 15
JOB test speedup 1.3782536200861055
TPCH test speedup 1.8288150819477214
TPCH skew test speedup 1.781991596054275
Epoch 54/300 |loss: 0.000861| train set 1.794x speedup, test set 1.782x speedup, val set 0.880x speedup, step: 16
JOB test speedup 0.9666446030413648
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 55/300 |loss: 0.000973| train set 1.739x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 17
JOB test speedup 1.6999412802247602
TPCH test speedup 1.8841096537863027
TPCH skew test speedup 1.8400570333132256
Epoch 56/300 |loss: 0.000824| train set 1.776x speedup, test set 1.840x speedup, val set 0.880x speedup, step: 18
JOB test speedup 1.000850732311076
TPCH test speedup 1.825058024558377
TPCH skew test speedup 1.7707634859235442
Epoch 57/300 |loss: 0.000819| train set 1.740x speedup, test set 1.771x speedup, val set 0.880x speedup, step: 19
JOB test speedup 1.4091183283576771
TPCH test speedup 1.0279589832706968
TPCH skew test speedup 1.0076774185932575
Epoch 58/300 |loss: 0.000868| train set 1.793x speedup, test set 1.008x speedup, val set 0.876x speedup, step: 20
JOB test speedup 1.3958620737574101
TPCH test speedup 1.0279589832706968
TPCH skew test speedup 1.0076774185932575
Epoch 59/300 |loss: 0.000864| train set 1.794x speedup, test set 1.008x speedup, val set 0.876x speedup, step: 21
JOB test speedup 0.982674697529237
TPCH test speedup 1.8288150819477214
TPCH skew test speedup 1.781991596054275
Epoch 60/300 |loss: 0.000816| train set 1.758x speedup, test set 1.782x speedup, val set 0.880x speedup, step: 22
JOB test speedup 0.8625196625707705
TPCH test speedup 1.0609889109372832
TPCH skew test speedup 1.028234795512598
Epoch 61/300 |loss: 0.000807| train set 1.733x speedup, test set 1.028x speedup, val set 0.880x speedup, step: 23
JOB test speedup 0.8912735247860704
TPCH test speedup 1.060961988737723
TPCH skew test speedup 1.0342142723221648
Epoch 62/300 |loss: 0.000768| train set 1.771x speedup, test set 1.034x speedup, val set 0.880x speedup, step: 24
JOB test speedup 1.6358735372254603
TPCH test speedup 1.8859265018277946
TPCH skew test speedup 1.8213501200909779
Epoch 63/300 |loss: 0.000731| train set 1.763x speedup, test set 1.821x speedup, val set 0.880x speedup, step: 25
JOB test speedup 0.8983824122581112
TPCH test speedup 1.8288150819477214
TPCH skew test speedup 1.7916981690075913
Epoch 64/300 |loss: 0.000854| train set 1.792x speedup, test set 1.792x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.0121135495743214
TPCH test speedup 1.9360424540716965
TPCH skew test speedup 1.868417154144202
Epoch 65/300 |loss: 0.001024| train set 1.776x speedup, test set 1.868x speedup, val set 0.877x speedup, step: 2
early stopping at epoch 65
Training per epoch cost 2.896 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
19, opt runtime 0.379s, model runtime 0.379s, pg runtime 3.645s, speedup 9.614x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 23.436s, pg runtime 432.766s, speedup 18.466x
32, opt runtime 15.120s, model runtime 23.316s, pg runtime 566.078s, speedup 24.279x
33, opt runtime 16.639s, model runtime 23.017s, pg runtime 462.544s, speedup 20.095x
34, opt runtime 16.280s, model runtime 23.060s, pg runtime 634.990s, speedup 27.537x
35, opt runtime 16.528s, model runtime 23.747s, pg runtime 620.762s, speedup 26.141x
36, opt runtime 18.690s, model runtime 25.079s, pg runtime 651.942s, speedup 25.995x
37, opt runtime 16.438s, model runtime 23.248s, pg runtime 546.887s, speedup 23.524x
38, opt runtime 16.138s, model runtime 23.246s, pg runtime 501.793s, speedup 21.586x
39, opt runtime 16.770s, model runtime 23.336s, pg runtime 594.754s, speedup 25.486x
40, opt runtime 16.305s, model runtime 22.633s, pg runtime 436.168s, speedup 19.271x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 23.251s, pg runtime 602.586s, speedup 25.917x
32, opt runtime 16.542s, model runtime 23.084s, pg runtime 461.957s, speedup 20.012x
33, opt runtime 16.136s, model runtime 23.037s, pg runtime 410.283s, speedup 17.810x
34, opt runtime 14.422s, model runtime 23.164s, pg runtime 497.542s, speedup 21.479x
35, opt runtime 15.980s, model runtime 23.042s, pg runtime 504.239s, speedup 21.884x
36, opt runtime 16.482s, model runtime 22.575s, pg runtime 622.915s, speedup 27.593x
37, opt runtime 16.301s, model runtime 23.129s, pg runtime 646.719s, speedup 27.961x
38, opt runtime 16.194s, model runtime 22.825s, pg runtime 439.255s, speedup 19.245x
39, opt runtime 16.149s, model runtime 23.253s, pg runtime 423.122s, speedup 18.197x
40, opt runtime 13.751s, model runtime 23.032s, pg runtime 434.625s, speedup 18.870x
====================
JOB best validation speedup epoch: 64, train speedup 1.792, test speedup 0.898, val speedup 0.880
TPCH best validation speedup epoch: 64, train speedup 1.792, test speedup 1.829, val speedup 0.880
TPCH Skew best validation speedup epoch: 64, train speedup 1.792, test speedup 1.792, val speedup 0.880
execution cost 0:04:21.600542
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.305519, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.9975725197571982
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010600| train set 0.960x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007437| train set 1.011x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.6451523613673051
TPCH test speedup 1.764798380370333
TPCH skew test speedup 1.6974864140976704
Epoch 3/300 |loss: 0.005910| train set 1.103x speedup, test set 1.697x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.029422883646122
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005039| train set 1.518x speedup, test set 1.825x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.0263913316662097
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 5/300 |loss: 0.004475| train set 1.533x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.0311235192485362
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.003990| train set 1.584x speedup, test set 1.656x speedup, val set 0.885x speedup, step: 7
JOB test speedup 1.0265931253607947
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003676| train set 1.503x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 8
JOB test speedup 1.8184666400179421
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 8/300 |loss: 0.003495| train set 1.578x speedup, test set 1.656x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.7911140273296364
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003491| train set 1.568x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 1
JOB test speedup 0.8761899715930325
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003057| train set 1.528x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 2
JOB test speedup 0.8840166987279128
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002859| train set 1.733x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 3
JOB test speedup 0.8716912404917532
TPCH test speedup 1.7033088414333177
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002882| train set 1.589x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 4
JOB test speedup 0.8325691471982295
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002443| train set 1.505x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8633461709779692
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002604| train set 1.728x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.8676080419006884
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002386| train set 1.727x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8536612692078354
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002335| train set 1.778x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 8
JOB test speedup 1.348940738534675
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002260| train set 1.765x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.3663093593887667
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 18/300 |loss: 0.001933| train set 1.715x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 10
JOB test speedup 1.6215470002649497
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 19/300 |loss: 0.001758| train set 1.744x speedup, test set 1.696x speedup, val set 0.879x speedup, step: 11
JOB test speedup 0.8665045178674455
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 20/300 |loss: 0.001721| train set 1.711x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 12
JOB test speedup 1.0562797757433569
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.001991| train set 1.741x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.8806483157661226
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 22/300 |loss: 0.001673| train set 1.789x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 14
JOB test speedup 0.8868740803971018
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 23/300 |loss: 0.001516| train set 1.770x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8907763625777546
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 24/300 |loss: 0.001507| train set 1.758x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 16
JOB test speedup 1.0561341354767713
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 25/300 |loss: 0.001364| train set 1.759x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.8606337322905575
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 26/300 |loss: 0.001438| train set 1.782x speedup, test set 3.645x speedup, val set 0.886x speedup, step: 18
JOB test speedup 0.9109591016023721
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 27/300 |loss: 0.001386| train set 1.792x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 19
JOB test speedup 1.0639963584320686
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 28/300 |loss: 0.001497| train set 1.791x speedup, test set 3.645x speedup, val set 0.886x speedup, step: 20
JOB test speedup 1.0908673861500606
TPCH test speedup 2.693983031156379
TPCH skew test speedup 3.6512811455557035
Epoch 29/300 |loss: 0.001339| train set 1.790x speedup, test set 3.651x speedup, val set 0.880x speedup, step: 21
JOB test speedup 1.1017156364222929
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 30/300 |loss: 0.001299| train set 1.793x speedup, test set 3.645x speedup, val set 0.888x speedup, step: 22
JOB test speedup 1.279614291815722
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 31/300 |loss: 0.001331| train set 1.791x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 23
JOB test speedup 0.8710847040933382
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 32/300 |loss: 0.001276| train set 1.730x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 24
JOB test speedup 0.8586573093713613
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 33/300 |loss: 0.001293| train set 1.781x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 25
JOB test speedup 1.0419237794596932
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 34/300 |loss: 0.001231| train set 1.690x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 1
JOB test speedup 1.019552480522369
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 35/300 |loss: 0.001149| train set 1.720x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.0417950101794287
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 36/300 |loss: 0.001098| train set 1.739x speedup, test set 3.882x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.062532523532084
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 37/300 |loss: 0.001083| train set 1.792x speedup, test set 3.882x speedup, val set 0.886x speedup, step: 4
JOB test speedup 1.0722976764693484
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 38/300 |loss: 0.001124| train set 1.789x speedup, test set 1.746x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.8801271331641836
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 39/300 |loss: 0.001100| train set 1.791x speedup, test set 3.882x speedup, val set 0.886x speedup, step: 1
JOB test speedup 1.225450866306068
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 40/300 |loss: 0.001102| train set 1.734x speedup, test set 3.882x speedup, val set 0.886x speedup, step: 2
JOB test speedup 1.3226282208028484
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 41/300 |loss: 0.001089| train set 1.785x speedup, test set 3.882x speedup, val set 0.886x speedup, step: 3
JOB test speedup 0.8913985824915102
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 42/300 |loss: 0.001203| train set 1.770x speedup, test set 1.746x speedup, val set 0.888x speedup, step: 4
JOB test speedup 0.8522290197523371
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7349617971873912
Epoch 43/300 |loss: 0.001072| train set 1.791x speedup, test set 1.735x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.8557213973595277
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7457390906134624
Epoch 44/300 |loss: 0.000951| train set 1.760x speedup, test set 1.746x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.0839869585550002
TPCH test speedup 1.8150756740883804
TPCH skew test speedup 1.6959969855885142
Epoch 45/300 |loss: 0.000930| train set 1.742x speedup, test set 1.696x speedup, val set 0.888x speedup, step: 2
JOB test speedup 0.8511836678812786
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7457390906134624
Epoch 46/300 |loss: 0.001016| train set 1.794x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 3
JOB test speedup 0.8524237281102468
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7291751740291992
Epoch 47/300 |loss: 0.000909| train set 1.774x speedup, test set 1.729x speedup, val set 0.880x speedup, step: 4
JOB test speedup 1.3580696506618495
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 48/300 |loss: 0.000951| train set 1.769x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 5
JOB test speedup 1.036877574811048
TPCH test speedup 2.846462078466477
TPCH skew test speedup 3.1564017155354978
Epoch 49/300 |loss: 0.000887| train set 1.786x speedup, test set 3.156x speedup, val set 0.886x speedup, step: 6
JOB test speedup 0.8916481165103582
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 50/300 |loss: 0.001002| train set 1.796x speedup, test set 1.746x speedup, val set 0.888x speedup, step: 7
JOB test speedup 1.2156842003865638
TPCH test speedup 1.937960891115471
TPCH skew test speedup 1.848983939565261
Epoch 51/300 |loss: 0.000881| train set 1.793x speedup, test set 1.849x speedup, val set 0.886x speedup, step: 8
JOB test speedup 1.0068186579366742
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 52/300 |loss: 0.000967| train set 1.755x speedup, test set 1.746x speedup, val set 0.887x speedup, step: 9
JOB test speedup 1.2217992646308222
TPCH test speedup 1.937960891115471
TPCH skew test speedup 1.848983939565261
Epoch 53/300 |loss: 0.000808| train set 1.796x speedup, test set 1.849x speedup, val set 0.887x speedup, step: 10
JOB test speedup 1.097770683829572
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 54/300 |loss: 0.000865| train set 1.797x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 11
JOB test speedup 1.1449773417395872
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 55/300 |loss: 0.000957| train set 1.773x speedup, test set 1.746x speedup, val set 0.887x speedup, step: 12
JOB test speedup 1.5392777529771977
TPCH test speedup 1.9337425177854886
TPCH skew test speedup 1.836898602245362
Epoch 56/300 |loss: 0.000894| train set 1.775x speedup, test set 1.837x speedup, val set 0.885x speedup, step: 13
JOB test speedup 1.1928821263466316
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 57/300 |loss: 0.000824| train set 1.732x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 14
JOB test speedup 1.5960647122167855
TPCH test speedup 1.937960891115471
TPCH skew test speedup 1.848983939565261
Epoch 58/300 |loss: 0.000864| train set 1.789x speedup, test set 1.849x speedup, val set 0.887x speedup, step: 15
JOB test speedup 1.731916246742059
TPCH test speedup 1.9337425177854886
TPCH skew test speedup 1.836898602245362
Epoch 59/300 |loss: 0.000804| train set 1.776x speedup, test set 1.837x speedup, val set 0.886x speedup, step: 16
JOB test speedup 0.8643575676102878
TPCH test speedup 1.9337425177854886
TPCH skew test speedup 1.836898602245362
Epoch 60/300 |loss: 0.000744| train set 1.763x speedup, test set 1.837x speedup, val set 0.886x speedup, step: 17
JOB test speedup 1.0570325854959808
TPCH test speedup 1.9044694123998658
TPCH skew test speedup 1.821190304241002
Epoch 61/300 |loss: 0.000833| train set 1.736x speedup, test set 1.821x speedup, val set 0.886x speedup, step: 18
JOB test speedup 1.6693923536267488
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 62/300 |loss: 0.000818| train set 1.771x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 19
early stopping at epoch 62
Training per epoch cost 2.946 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 4.443s, model runtime 51.645s, pg runtime 13.945s, speedup 0.270x
13, opt runtime 5.179s, model runtime 11.835s, pg runtime 10.685s, speedup 0.903x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.957s, pg runtime 6.089s, speedup 1.022x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.332s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 2.566s, pg runtime 2.558s, speedup 0.997x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 10.818s, pg runtime 8.279s, speedup 0.765x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 44, train speedup 1.760, test speedup 0.856, val speedup 0.888
TPCH best validation speedup epoch: 44, train speedup 1.760, test speedup 1.842, val speedup 0.888
TPCH Skew best validation speedup epoch: 44, train speedup 1.760, test speedup 1.746, val speedup 0.888
execution cost 0:04:13.553440
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.205856, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029389| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.7082709924053361
TPCH test speedup 1.6919996171556706
TPCH skew test speedup 1.5890392931842958
Epoch 1/300 |loss: 0.010627| train set 0.960x speedup, test set 1.589x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.7093638309148348
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007515| train set 0.998x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.5845824980995113
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 3/300 |loss: 0.005963| train set 1.040x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0254629912767534
TPCH test speedup 1.1296850071970974
TPCH skew test speedup 1.410108986433031
Epoch 4/300 |loss: 0.005099| train set 1.517x speedup, test set 1.410x speedup, val set 0.563x speedup, step: 5
JOB test speedup 1.019402280853305
TPCH test speedup 1.0198010640062136
TPCH skew test speedup 0.9960837448892246
Epoch 5/300 |loss: 0.004483| train set 1.528x speedup, test set 0.996x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.0241411182366438
TPCH test speedup 1.7070822276157118
TPCH skew test speedup 1.6550416000314938
Epoch 6/300 |loss: 0.004063| train set 1.582x speedup, test set 1.655x speedup, val set 0.564x speedup, step: 7
JOB test speedup 1.0117707982168662
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003630| train set 1.541x speedup, test set 1.655x speedup, val set 0.564x speedup, step: 8
JOB test speedup 1.0901879838647532
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 8/300 |loss: 0.003544| train set 1.578x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.753197373311239
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003444| train set 1.525x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 1
JOB test speedup 1.8016014015418804
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003154| train set 1.779x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 2
JOB test speedup 1.0616926259271269
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002848| train set 1.742x speedup, test set 1.655x speedup, val set 0.884x speedup, step: 3
JOB test speedup 1.8249686704115424
TPCH test speedup 1.7017541945053822
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002698| train set 1.759x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 4
JOB test speedup 0.8543386813902086
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002478| train set 1.506x speedup, test set 1.655x speedup, val set 0.988x speedup, step: 5
JOB test speedup 0.867654314789196
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002659| train set 1.771x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 6
JOB test speedup 1.0559539862237852
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002396| train set 1.529x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 7
JOB test speedup 0.8685479735670539
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002479| train set 1.747x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 8
JOB test speedup 1.3330921708252967
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 17/300 |loss: 0.002319| train set 1.735x speedup, test set 1.647x speedup, val set 0.884x speedup, step: 9
JOB test speedup 0.86314822235297
TPCH test speedup 1.7017541945053822
TPCH skew test speedup 1.646755817278369
Epoch 18/300 |loss: 0.002051| train set 1.710x speedup, test set 1.647x speedup, val set 0.885x speedup, step: 10
JOB test speedup 0.8823806586018775
TPCH test speedup 1.755900670764566
TPCH skew test speedup 1.6506243234689535
Epoch 19/300 |loss: 0.001818| train set 1.748x speedup, test set 1.651x speedup, val set 0.885x speedup, step: 11
JOB test speedup 0.8742662039566671
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.646755817278369
Epoch 20/300 |loss: 0.001782| train set 1.748x speedup, test set 1.647x speedup, val set 0.999x speedup, step: 12
JOB test speedup 0.868665670132986
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.646755817278369
Epoch 21/300 |loss: 0.001916| train set 1.793x speedup, test set 1.647x speedup, val set 0.996x speedup, step: 13
JOB test speedup 0.8932065366781103
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.646755817278369
Epoch 22/300 |loss: 0.001659| train set 1.793x speedup, test set 1.647x speedup, val set 0.886x speedup, step: 14
JOB test speedup 0.8670882538917416
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6872971295676944
Epoch 23/300 |loss: 0.001491| train set 1.735x speedup, test set 1.687x speedup, val set 0.887x speedup, step: 15
JOB test speedup 0.8671931868475778
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 24/300 |loss: 0.001484| train set 1.730x speedup, test set 1.687x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.868019445514941
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 25/300 |loss: 0.001370| train set 1.787x speedup, test set 1.687x speedup, val set 0.887x speedup, step: 2
JOB test speedup 0.8641682531590605
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 26/300 |loss: 0.001469| train set 1.738x speedup, test set 1.687x speedup, val set 0.888x speedup, step: 3
JOB test speedup 0.873354613259699
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.646755817278369
Epoch 27/300 |loss: 0.001305| train set 1.791x speedup, test set 1.647x speedup, val set 1.011x speedup, step: 4
JOB test speedup 0.8898364397700471
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 28/300 |loss: 0.001493| train set 1.786x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 5
JOB test speedup 0.8548927126682536
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 29/300 |loss: 0.001284| train set 1.793x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 6
JOB test speedup 1.059713191287102
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 30/300 |loss: 0.001241| train set 1.776x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.8597892111154923
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6872971295676944
Epoch 31/300 |loss: 0.001317| train set 1.725x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 8
JOB test speedup 0.8557771777415104
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6872971295676944
Epoch 32/300 |loss: 0.001220| train set 1.739x speedup, test set 1.687x speedup, val set 0.888x speedup, step: 9
JOB test speedup 0.8785150972122666
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 33/300 |loss: 0.001208| train set 1.789x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 10
JOB test speedup 0.8849710803789185
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 34/300 |loss: 0.001220| train set 1.762x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 11
JOB test speedup 0.88554993198809
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 35/300 |loss: 0.001170| train set 1.727x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 12
JOB test speedup 0.8846626553639871
TPCH test speedup 1.7458751428791914
TPCH skew test speedup 1.686509447564179
Epoch 36/300 |loss: 0.001029| train set 1.739x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.8895359169584903
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 37/300 |loss: 0.001048| train set 1.794x speedup, test set 1.687x speedup, val set 0.888x speedup, step: 14
JOB test speedup 0.8455268529158835
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 38/300 |loss: 0.001024| train set 1.730x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 15
JOB test speedup 0.8488122096289449
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 39/300 |loss: 0.001078| train set 1.758x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 16
JOB test speedup 1.3215841487784503
TPCH test speedup 1.8072114631870582
TPCH skew test speedup 1.765933535389139
Epoch 40/300 |loss: 0.001147| train set 1.789x speedup, test set 1.766x speedup, val set 0.886x speedup, step: 17
JOB test speedup 1.3519276860490212
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 41/300 |loss: 0.001046| train set 1.728x speedup, test set 1.687x speedup, val set 0.885x speedup, step: 18
JOB test speedup 0.8440599509043308
TPCH test speedup 1.7516339168956023
TPCH skew test speedup 1.6887419894444324
Epoch 42/300 |loss: 0.001200| train set 1.775x speedup, test set 1.689x speedup, val set 0.886x speedup, step: 19
JOB test speedup 0.8838142883321278
TPCH test speedup 1.732721395243097
TPCH skew test speedup 1.722823515582378
Epoch 43/300 |loss: 0.001097| train set 1.795x speedup, test set 1.723x speedup, val set 0.886x speedup, step: 20
JOB test speedup 0.847055757759642
TPCH test speedup 1.7504678780432583
TPCH skew test speedup 1.7109864430303119
Epoch 44/300 |loss: 0.000962| train set 1.758x speedup, test set 1.711x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8682659680736694
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7349617971873912
Epoch 45/300 |loss: 0.000932| train set 1.756x speedup, test set 1.735x speedup, val set 0.887x speedup, step: 2
JOB test speedup 0.8537840311113197
TPCH test speedup 1.2607973218005535
TPCH skew test speedup 1.2407257055488818
Epoch 46/300 |loss: 0.001039| train set 1.798x speedup, test set 1.241x speedup, val set 0.887x speedup, step: 3
JOB test speedup 0.8721891524007316
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2820540295576366
Epoch 47/300 |loss: 0.000919| train set 1.772x speedup, test set 1.282x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.8796620691066374
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 48/300 |loss: 0.000980| train set 1.771x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8604849445203598
TPCH test speedup 1.8632964496738567
TPCH skew test speedup 1.8070414501325278
Epoch 49/300 |loss: 0.000912| train set 1.740x speedup, test set 1.807x speedup, val set 0.886x speedup, step: 6
JOB test speedup 0.860857749075045
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2820540295576366
Epoch 50/300 |loss: 0.001060| train set 1.799x speedup, test set 1.282x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.8889088142953641
TPCH test speedup 1.2991611182222564
TPCH skew test speedup 1.25684158158998
Epoch 51/300 |loss: 0.000848| train set 1.765x speedup, test set 1.257x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.8631472260928502
TPCH test speedup 1.2607973218005535
TPCH skew test speedup 1.2407257055488818
Epoch 52/300 |loss: 0.001047| train set 1.794x speedup, test set 1.241x speedup, val set 0.886x speedup, step: 9
JOB test speedup 0.8752145372622241
TPCH test speedup 1.3097464179459386
TPCH skew test speedup 1.2762319732290495
Epoch 53/300 |loss: 0.000840| train set 1.799x speedup, test set 1.276x speedup, val set 0.886x speedup, step: 10
JOB test speedup 0.882290133031136
TPCH test speedup 1.2966915036552542
TPCH skew test speedup 1.2614511477112942
Epoch 54/300 |loss: 0.000927| train set 1.760x speedup, test set 1.261x speedup, val set 0.886x speedup, step: 11
JOB test speedup 0.9233862952872963
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.27703714480566
Epoch 55/300 |loss: 0.000912| train set 1.797x speedup, test set 1.277x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.8443907935575644
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2820540295576366
Epoch 56/300 |loss: 0.000853| train set 1.794x speedup, test set 1.282x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.8910820648163059
TPCH test speedup 1.3108490350672017
TPCH skew test speedup 1.2762319732290495
Epoch 57/300 |loss: 0.000769| train set 1.744x speedup, test set 1.276x speedup, val set 0.886x speedup, step: 14
JOB test speedup 0.8618447806881436
TPCH test speedup 1.310059928517363
TPCH skew test speedup 1.271260461966683
Epoch 58/300 |loss: 0.000842| train set 1.778x speedup, test set 1.271x speedup, val set 0.886x speedup, step: 15
JOB test speedup 0.9273827030614491
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2820540295576366
Epoch 59/300 |loss: 0.000796| train set 1.796x speedup, test set 1.282x speedup, val set 0.879x speedup, step: 16
JOB test speedup 0.8953662411987026
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2820540295576366
Epoch 60/300 |loss: 0.000807| train set 1.774x speedup, test set 1.282x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.8515937837393653
TPCH test speedup 1.259048433151382
TPCH skew test speedup 1.2306505556777851
Epoch 61/300 |loss: 0.000836| train set 1.794x speedup, test set 1.231x speedup, val set 0.880x speedup, step: 18
JOB test speedup 0.8678966945983598
TPCH test speedup 1.295535541800261
TPCH skew test speedup 1.2771744810226804
Epoch 62/300 |loss: 0.000759| train set 1.776x speedup, test set 1.277x speedup, val set 0.880x speedup, step: 19
JOB test speedup 1.5381833619899143
TPCH test speedup 1.3108901328926141
TPCH skew test speedup 1.2820540295576366
Epoch 63/300 |loss: 0.000804| train set 1.796x speedup, test set 1.282x speedup, val set 0.880x speedup, step: 20
JOB test speedup 0.8860014103008199
TPCH test speedup 1.8593965329722677
TPCH skew test speedup 1.795496471730238
Epoch 64/300 |loss: 0.000756| train set 1.766x speedup, test set 1.795x speedup, val set 0.887x speedup, step: 21
JOB test speedup 0.8704779964788492
TPCH test speedup 1.2936489969009601
TPCH skew test speedup 1.2617128489287819
Epoch 65/300 |loss: 0.000872| train set 1.790x speedup, test set 1.262x speedup, val set 0.879x speedup, step: 22
JOB test speedup 0.9955816754245667
TPCH test speedup 1.3089586379485694
TPCH skew test speedup 1.2762319732290495
Epoch 66/300 |loss: 0.000801| train set 1.799x speedup, test set 1.276x speedup, val set 0.880x speedup, step: 23
early stopping at epoch 66
Training per epoch cost 2.884 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.299s, pg runtime 4.730s, speedup 0.570x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 157.104s, pg runtime 93.781s, speedup 0.597x
14, opt runtime 54.696s, model runtime 168.714s, pg runtime 98.172s, speedup 0.582x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 163.575s, pg runtime 95.799s, speedup 0.586x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 172.007s, pg runtime 102.039s, speedup 0.593x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 44, train speedup 1.758, test speedup 0.847, val speedup 0.888
TPCH best validation speedup epoch: 44, train speedup 1.758, test speedup 1.750, val speedup 0.888
TPCH Skew best validation speedup epoch: 44, train speedup 1.758, test speedup 1.711, val speedup 0.888
execution cost 0:04:23.874596
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.273778, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.9975725197571982
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010600| train set 0.960x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007437| train set 1.011x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.6671149058828327
TPCH test speedup 1.8700943585156096
TPCH skew test speedup 1.8237323685257538
Epoch 3/300 |loss: 0.005899| train set 1.059x speedup, test set 1.824x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0133354686666909
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 4/300 |loss: 0.005067| train set 1.517x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.7855421887169405
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 5/300 |loss: 0.004435| train set 1.500x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.0213580736045835
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.004006| train set 1.581x speedup, test set 1.656x speedup, val set 0.532x speedup, step: 7
JOB test speedup 1.0171774583014572
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003655| train set 1.518x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 8
JOB test speedup 1.0924863120648218
TPCH test speedup 1.717594872461978
TPCH skew test speedup 1.6550416000314938
Epoch 8/300 |loss: 0.003544| train set 1.532x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 9
JOB test speedup 1.7480654411296246
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003472| train set 1.518x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.051535247814109
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003131| train set 1.526x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 2
JOB test speedup 1.0710844345278883
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002866| train set 1.715x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.023886538264052
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002968| train set 1.502x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8264258868301422
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 13/300 |loss: 0.002420| train set 1.447x speedup, test set 3.461x speedup, val set 0.879x speedup, step: 5
JOB test speedup 0.8545309555469953
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 14/300 |loss: 0.002603| train set 1.773x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 6
JOB test speedup 1.7883610938886612
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 15/300 |loss: 0.002407| train set 1.531x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 7
JOB test speedup 1.333708277484867
TPCH test speedup 3.519211867964434
TPCH skew test speedup 3.4606368062539103
Epoch 16/300 |loss: 0.002269| train set 1.774x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 8
JOB test speedup 1.3511205019168362
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002294| train set 1.767x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.3636290426005517
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 18/300 |loss: 0.002001| train set 1.745x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 10
JOB test speedup 0.8617033773635877
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 19/300 |loss: 0.001790| train set 1.738x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8523076655047251
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 20/300 |loss: 0.001803| train set 1.740x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.8507612300097327
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.001985| train set 1.791x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.853654367034191
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 22/300 |loss: 0.001691| train set 1.777x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 14
JOB test speedup 0.8684537198079794
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 23/300 |loss: 0.001527| train set 1.762x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8738736163625853
TPCH test speedup 2.6205598683502545
TPCH skew test speedup 2.997450435845129
Epoch 24/300 |loss: 0.001563| train set 1.757x speedup, test set 2.997x speedup, val set 0.880x speedup, step: 16
JOB test speedup 0.8575345843503579
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 25/300 |loss: 0.001388| train set 1.788x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.8359001908447972
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 26/300 |loss: 0.001514| train set 1.732x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 18
JOB test speedup 0.8493837349320045
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 27/300 |loss: 0.001373| train set 1.787x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 19
JOB test speedup 0.8521755764378769
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 28/300 |loss: 0.001611| train set 1.792x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 20
JOB test speedup 0.8672805386220875
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 29/300 |loss: 0.001415| train set 1.795x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 21
JOB test speedup 1.1026206668516432
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.9768374609104815
Epoch 30/300 |loss: 0.001276| train set 1.795x speedup, test set 3.977x speedup, val set 0.880x speedup, step: 22
JOB test speedup 0.8809350450730551
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 31/300 |loss: 0.001340| train set 1.791x speedup, test set 3.645x speedup, val set 0.886x speedup, step: 23
JOB test speedup 0.8471990111133542
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 32/300 |loss: 0.001211| train set 1.788x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 24
JOB test speedup 0.8924000225398451
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 33/300 |loss: 0.001273| train set 1.731x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 25
JOB test speedup 0.8644743048617122
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 34/300 |loss: 0.001258| train set 1.762x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 26
JOB test speedup 1.3574340987633104
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 35/300 |loss: 0.001179| train set 1.736x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 27
JOB test speedup 0.8611159947610416
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 36/300 |loss: 0.001098| train set 1.775x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 28
JOB test speedup 0.8700160336827965
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 37/300 |loss: 0.001111| train set 1.794x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 29
JOB test speedup 0.9492353515413207
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 38/300 |loss: 0.001194| train set 1.789x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 30
JOB test speedup 0.8644027175320481
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 39/300 |loss: 0.001076| train set 1.792x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 31
JOB test speedup 0.952857060311579
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 40/300 |loss: 0.001098| train set 1.792x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 32
JOB test speedup 1.312690156758738
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 41/300 |loss: 0.001126| train set 1.740x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 33
JOB test speedup 0.8814216905962369
TPCH test speedup 3.874038429202652
TPCH skew test speedup 3.8025333752746966
Epoch 42/300 |loss: 0.001198| train set 1.774x speedup, test set 3.803x speedup, val set 0.880x speedup, step: 34
JOB test speedup 0.8273810505344888
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 43/300 |loss: 0.001108| train set 1.794x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 35
JOB test speedup 0.8838316543155362
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 44/300 |loss: 0.000975| train set 1.756x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 36
JOB test speedup 0.8447603451129471
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 45/300 |loss: 0.000974| train set 1.755x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 37
JOB test speedup 0.8613636009222309
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 46/300 |loss: 0.001018| train set 1.794x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 38
JOB test speedup 1.4099861560028404
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 47/300 |loss: 0.000989| train set 1.708x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 39
JOB test speedup 0.8687317541998516
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 48/300 |loss: 0.000958| train set 1.792x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 40
JOB test speedup 1.290783855713749
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 49/300 |loss: 0.000871| train set 1.791x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 41
JOB test speedup 1.3437910108699491
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 50/300 |loss: 0.000964| train set 1.737x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 42
JOB test speedup 0.8778132557202682
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 51/300 |loss: 0.000863| train set 1.790x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 43
JOB test speedup 1.500671391254834
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 52/300 |loss: 0.000990| train set 1.792x speedup, test set 3.605x speedup, val set 0.886x speedup, step: 44
JOB test speedup 0.975100652732829
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 53/300 |loss: 0.000870| train set 1.775x speedup, test set 4.026x speedup, val set 0.887x speedup, step: 45
JOB test speedup 0.8773224890848645
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 54/300 |loss: 0.000850| train set 1.795x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 46
JOB test speedup 0.8449876738366119
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 55/300 |loss: 0.000873| train set 1.796x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 47
JOB test speedup 0.8620553445524393
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 56/300 |loss: 0.000801| train set 1.766x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 48
JOB test speedup 0.9977221251327312
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 57/300 |loss: 0.000817| train set 1.782x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 49
JOB test speedup 1.7361131709403281
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 58/300 |loss: 0.000828| train set 1.791x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 50
JOB test speedup 1.508586897061763
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 59/300 |loss: 0.000848| train set 1.775x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 51
JOB test speedup 0.9078479781312454
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 60/300 |loss: 0.000757| train set 1.744x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 52
JOB test speedup 1.3417481559808062
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 61/300 |loss: 0.000810| train set 1.757x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 53
JOB test speedup 0.8708979119998974
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 62/300 |loss: 0.000778| train set 1.777x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 54
JOB test speedup 0.864992440605504
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 63/300 |loss: 0.000800| train set 1.789x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 55
JOB test speedup 0.8812679526411681
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 64/300 |loss: 0.000894| train set 1.793x speedup, test set 4.026x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.234568382834715
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 65/300 |loss: 0.000862| train set 1.788x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 2
early stopping at epoch 65
Training per epoch cost 2.910 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 6.021s, pg runtime 6.089s, speedup 1.011x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 2.298s, pg runtime 4.730s, speedup 2.058x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.404s, pg runtime 2.558s, speedup 1.822x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 35.457s, pg runtime 601.866s, speedup 16.975x
22, opt runtime 24.079s, model runtime 42.549s, pg runtime 608.707s, speedup 14.306x
23, opt runtime 24.662s, model runtime 38.046s, pg runtime 613.999s, speedup 16.138x
24, opt runtime 24.459s, model runtime 35.309s, pg runtime 608.717s, speedup 17.240x
25, opt runtime 25.236s, model runtime 38.025s, pg runtime 601.756s, speedup 15.825x
26, opt runtime 25.363s, model runtime 39.865s, pg runtime 611.327s, speedup 15.335x
27, opt runtime 24.706s, model runtime 37.014s, pg runtime 610.808s, speedup 16.502x
28, opt runtime 25.075s, model runtime 38.121s, pg runtime 612.430s, speedup 16.065x
29, opt runtime 24.840s, model runtime 42.656s, pg runtime 626.529s, speedup 14.688x
30, opt runtime 24.920s, model runtime 41.372s, pg runtime 610.993s, speedup 14.768x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 37.575s, pg runtime 616.762s, speedup 16.414x
22, opt runtime 25.478s, model runtime 44.246s, pg runtime 642.079s, speedup 14.512x
23, opt runtime 24.016s, model runtime 36.896s, pg runtime 601.228s, speedup 16.295x
24, opt runtime 24.103s, model runtime 36.952s, pg runtime 616.889s, speedup 16.694x
25, opt runtime 24.136s, model runtime 36.900s, pg runtime 609.432s, speedup 16.516x
26, opt runtime 25.431s, model runtime 40.641s, pg runtime 625.988s, speedup 15.403x
27, opt runtime 24.451s, model runtime 39.382s, pg runtime 628.615s, speedup 15.962x
28, opt runtime 24.465s, model runtime 40.642s, pg runtime 644.779s, speedup 15.865x
29, opt runtime 25.152s, model runtime 36.439s, pg runtime 613.332s, speedup 16.832x
30, opt runtime 24.505s, model runtime 41.060s, pg runtime 621.574s, speedup 15.138x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 64, train speedup 1.793, test speedup 0.881, val speedup 0.888
TPCH best validation speedup epoch: 64, train speedup 1.793, test speedup 4.064, val speedup 0.888
TPCH Skew best validation speedup epoch: 64, train speedup 1.793, test speedup 4.026, val speedup 0.888
execution cost 0:04:21.756317
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.235060, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029389| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.7082709924053361
TPCH test speedup 1.6919996171556706
TPCH skew test speedup 1.5890392931842958
Epoch 1/300 |loss: 0.010627| train set 0.960x speedup, test set 1.589x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.7093638309148348
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007505| train set 0.998x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.5845824980995113
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 3/300 |loss: 0.005899| train set 1.089x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0245139732656126
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005162| train set 1.519x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 5
JOB test speedup 1.0177226665639247
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 5/300 |loss: 0.004509| train set 1.533x speedup, test set 1.656x speedup, val set 0.563x speedup, step: 6
JOB test speedup 1.0121263130907983
TPCH test speedup 1.7154539796370556
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.004009| train set 1.581x speedup, test set 1.656x speedup, val set 0.885x speedup, step: 7
JOB test speedup 1.0215598383436695
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003667| train set 1.545x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 8
JOB test speedup 0.7573454466443968
TPCH test speedup 1.7271151487167804
TPCH skew test speedup 1.6572197893455713
Epoch 8/300 |loss: 0.003457| train set 1.569x speedup, test set 1.657x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.0230316047430563
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003378| train set 1.565x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 1
JOB test speedup 1.0525251865323604
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003168| train set 1.541x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 2
JOB test speedup 1.0523382221133102
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002864| train set 1.742x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 3
JOB test speedup 1.0521452799833482
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002825| train set 1.552x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8683791688089129
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002503| train set 1.508x speedup, test set 1.655x speedup, val set 1.010x speedup, step: 5
JOB test speedup 0.8592825082788182
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002670| train set 1.731x speedup, test set 1.655x speedup, val set 0.624x speedup, step: 6
JOB test speedup 1.0391671056080138
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002393| train set 1.542x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 7
JOB test speedup 0.8694494028647322
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002377| train set 1.750x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 8
JOB test speedup 0.8786881333649659
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002294| train set 1.734x speedup, test set 1.655x speedup, val set 0.746x speedup, step: 9
JOB test speedup 1.0525790414959504
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 18/300 |loss: 0.001991| train set 1.716x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 10
JOB test speedup 0.8880045128777944
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 19/300 |loss: 0.001836| train set 1.748x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 11
JOB test speedup 0.8379377377416646
TPCH test speedup 1.7017541945053822
TPCH skew test speedup 1.6550416000314938
Epoch 20/300 |loss: 0.001818| train set 1.742x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 12
JOB test speedup 0.8869091788581852
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.001996| train set 1.789x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 13
JOB test speedup 0.8821420139475964
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 22/300 |loss: 0.001737| train set 1.793x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 14
JOB test speedup 0.8734672342882062
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 23/300 |loss: 0.001548| train set 1.767x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 15
JOB test speedup 0.8688119216313014
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 24/300 |loss: 0.001575| train set 1.738x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 1
JOB test speedup 0.8559914246781544
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 25/300 |loss: 0.001355| train set 1.759x speedup, test set 1.655x speedup, val set 0.996x speedup, step: 2
JOB test speedup 0.8777367259196813
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 26/300 |loss: 0.001582| train set 1.791x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 3
JOB test speedup 0.8737483586233731
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 27/300 |loss: 0.001344| train set 1.793x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 4
JOB test speedup 1.0345532215926152
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 28/300 |loss: 0.001545| train set 1.792x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 5
JOB test speedup 0.8923295933227454
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 29/300 |loss: 0.001354| train set 1.794x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 6
JOB test speedup 0.8785386423256142
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 30/300 |loss: 0.001257| train set 1.792x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 7
JOB test speedup 0.8757204578184423
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 31/300 |loss: 0.001322| train set 1.793x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 8
JOB test speedup 0.8843051921672985
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 32/300 |loss: 0.001234| train set 1.736x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 9
JOB test speedup 0.8607343286918395
TPCH test speedup 1.735923420144999
TPCH skew test speedup 1.6550416000314938
Epoch 33/300 |loss: 0.001237| train set 1.753x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 10
JOB test speedup 0.8899943844768412
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 34/300 |loss: 0.001222| train set 1.756x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 11
JOB test speedup 0.8790930873957346
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 35/300 |loss: 0.001165| train set 1.740x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 12
JOB test speedup 0.8903019232147454
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 36/300 |loss: 0.001086| train set 1.741x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.9002460675456471
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.686447653552734
Epoch 37/300 |loss: 0.001175| train set 1.759x speedup, test set 1.686x speedup, val set 0.886x speedup, step: 14
JOB test speedup 0.8758264670574873
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 38/300 |loss: 0.001098| train set 1.726x speedup, test set 1.696x speedup, val set 0.888x speedup, step: 15
JOB test speedup 0.8854381213680624
TPCH test speedup 1.8019741063061236
TPCH skew test speedup 1.7023768154371746
Epoch 39/300 |loss: 0.001057| train set 1.758x speedup, test set 1.702x speedup, val set 0.885x speedup, step: 16
JOB test speedup 1.9327660718716901
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 40/300 |loss: 0.001113| train set 1.724x speedup, test set 1.774x speedup, val set 0.885x speedup, step: 17
JOB test speedup 0.8876544247262191
TPCH test speedup 1.7890563858421844
TPCH skew test speedup 1.7109864430303119
Epoch 41/300 |loss: 0.001230| train set 1.741x speedup, test set 1.711x speedup, val set 0.886x speedup, step: 18
JOB test speedup 1.0676060952826867
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 42/300 |loss: 0.001220| train set 1.773x speedup, test set 1.687x speedup, val set 0.885x speedup, step: 19
JOB test speedup 0.8637360766665914
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7449031323995015
Epoch 43/300 |loss: 0.001075| train set 1.736x speedup, test set 1.745x speedup, val set 0.886x speedup, step: 20
JOB test speedup 0.8925390162089141
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 44/300 |loss: 0.000982| train set 1.790x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 1
JOB test speedup 0.8810482628024162
TPCH test speedup 1.8019741063061236
TPCH skew test speedup 1.7023768154371746
Epoch 45/300 |loss: 0.001024| train set 1.735x speedup, test set 1.702x speedup, val set 0.886x speedup, step: 2
JOB test speedup 0.8824283993038966
TPCH test speedup 1.788251335008736
TPCH skew test speedup 1.7023768154371746
Epoch 46/300 |loss: 0.001106| train set 1.797x speedup, test set 1.702x speedup, val set 0.886x speedup, step: 3
JOB test speedup 1.0698407111696981
TPCH test speedup 1.8180617715235727
TPCH skew test speedup 1.7439652976447146
Epoch 47/300 |loss: 0.001006| train set 1.709x speedup, test set 1.744x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8695141200905389
TPCH test speedup 1.794222774037973
TPCH skew test speedup 1.7294071600181777
Epoch 48/300 |loss: 0.000953| train set 1.788x speedup, test set 1.729x speedup, val set 0.886x speedup, step: 5
JOB test speedup 0.8614890816477107
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 49/300 |loss: 0.000917| train set 1.723x speedup, test set 1.647x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8625844318948334
TPCH test speedup 1.8180617715235727
TPCH skew test speedup 1.7294071600181777
Epoch 50/300 |loss: 0.001030| train set 1.796x speedup, test set 1.729x speedup, val set 0.886x speedup, step: 2
JOB test speedup 0.8938016126265791
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6550416000314938
Epoch 51/300 |loss: 0.000927| train set 1.796x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 3
JOB test speedup 0.8642981029215866
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6550416000314938
Epoch 52/300 |loss: 0.001014| train set 1.792x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.896438580295585
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7741754860160275
Epoch 53/300 |loss: 0.000881| train set 1.793x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 5
JOB test speedup 1.4180023302119165
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 54/300 |loss: 0.000947| train set 1.797x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 6
JOB test speedup 0.8711821091643058
TPCH test speedup 1.788251335008736
TPCH skew test speedup 1.7080395516953257
Epoch 55/300 |loss: 0.000909| train set 1.795x speedup, test set 1.708x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.8621070285298655
TPCH test speedup 1.8356453955414458
TPCH skew test speedup 1.7741754860160275
Epoch 56/300 |loss: 0.000835| train set 1.791x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 8
JOB test speedup 0.8836092260344789
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 57/300 |loss: 0.000805| train set 1.791x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 9
JOB test speedup 0.9043388599140637
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 58/300 |loss: 0.000930| train set 1.793x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 10
JOB test speedup 1.0723408377834298
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 59/300 |loss: 0.000874| train set 1.763x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 11
JOB test speedup 0.8744018261481886
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 60/300 |loss: 0.000816| train set 1.795x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 12
JOB test speedup 0.8850382931060171
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 61/300 |loss: 0.000831| train set 1.729x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 13
JOB test speedup 0.8699217875092353
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 62/300 |loss: 0.000821| train set 1.773x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 14
JOB test speedup 1.3324384224601535
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 63/300 |loss: 0.000771| train set 1.795x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 15
JOB test speedup 0.8728399405770806
TPCH test speedup 1.8014327944740776
TPCH skew test speedup 1.7489282439714295
Epoch 64/300 |loss: 0.001070| train set 1.798x speedup, test set 1.749x speedup, val set 0.886x speedup, step: 16
JOB test speedup 1.3973496579845341
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 65/300 |loss: 0.000886| train set 1.795x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 17
early stopping at epoch 65
Training per epoch cost 2.846 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 6.220s, pg runtime 5.879s, speedup 0.945x
08, opt runtime 1.737s, model runtime 6.267s, pg runtime 5.994s, speedup 0.957x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 51.645s, pg runtime 13.945s, speedup 0.270x
13, opt runtime 5.179s, model runtime 10.685s, pg runtime 10.685s, speedup 1.000x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 6.021s, pg runtime 6.089s, speedup 1.011x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 4.730s, pg runtime 4.730s, speedup 1.000x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.397s, pg runtime 2.558s, speedup 1.832x
21, opt runtime 0.434s, model runtime 1.102s, pg runtime 0.434s, speedup 0.393x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 157.104s, pg runtime 93.781s, speedup 0.597x
14, opt runtime 54.696s, model runtime 168.714s, pg runtime 98.172s, speedup 0.582x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 163.575s, pg runtime 95.799s, speedup 0.586x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 172.007s, pg runtime 102.039s, speedup 0.593x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 49, train speedup 1.723, test speedup 0.861, val speedup 0.888
TPCH best validation speedup epoch: 49, train speedup 1.723, test speedup 1.696, val speedup 0.888
TPCH Skew best validation speedup epoch: 49, train speedup 1.723, test speedup 1.647, val speedup 0.888
execution cost 0:04:18.477337
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.238642, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029389| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.7082709924053361
TPCH test speedup 1.6919996171556706
TPCH skew test speedup 1.5890392931842958
Epoch 1/300 |loss: 0.010627| train set 0.960x speedup, test set 1.589x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.7093638309148348
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007515| train set 0.998x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.5845824980995113
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 3/300 |loss: 0.005956| train set 1.040x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0241731544388022
TPCH test speedup 1.082801473262965
TPCH skew test speedup 1.0553800698521154
Epoch 4/300 |loss: 0.005108| train set 1.514x speedup, test set 1.055x speedup, val set 0.563x speedup, step: 5
JOB test speedup 1.0203418481185171
TPCH test speedup 1.0263230052053371
TPCH skew test speedup 0.99687231804193
Epoch 5/300 |loss: 0.004470| train set 1.533x speedup, test set 0.997x speedup, val set 0.563x speedup, step: 6
JOB test speedup 1.0134151277630075
TPCH test speedup 1.7154539796370556
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.004034| train set 1.580x speedup, test set 1.656x speedup, val set 0.774x speedup, step: 7
JOB test speedup 1.0119401217089208
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003650| train set 1.539x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 8
JOB test speedup 1.0241699267490532
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 8/300 |loss: 0.003565| train set 1.729x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.7795187926596514
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003432| train set 1.520x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 1
JOB test speedup 1.032193936365545
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003149| train set 1.779x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 2
JOB test speedup 1.061403402072031
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002920| train set 1.752x speedup, test set 1.655x speedup, val set 0.884x speedup, step: 3
JOB test speedup 1.0523382221133102
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002828| train set 1.560x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 4
JOB test speedup 0.8675217305891149
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002551| train set 1.509x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 5
JOB test speedup 0.8597518518286762
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002751| train set 1.715x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 6
JOB test speedup 1.0391855683230309
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002454| train set 1.529x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 7
JOB test speedup 0.8878999730869814
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002443| train set 1.750x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.875373131131567
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002353| train set 1.733x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 9
JOB test speedup 0.8741531370738507
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 18/300 |loss: 0.002026| train set 1.742x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 10
JOB test speedup 0.8637302030298678
TPCH test speedup 1.7142415226708987
TPCH skew test speedup 1.6550416000314938
Epoch 19/300 |loss: 0.001804| train set 1.746x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8668086147608727
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 20/300 |loss: 0.001828| train set 1.745x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 12
JOB test speedup 0.8685641321509419
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.001908| train set 1.789x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.8527962701944497
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 22/300 |loss: 0.001673| train set 1.789x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 14
JOB test speedup 0.8590040380231011
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6550416000314938
Epoch 23/300 |loss: 0.001524| train set 1.718x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 15
JOB test speedup 0.8721275350895921
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 24/300 |loss: 0.001509| train set 1.738x speedup, test set 1.647x speedup, val set 0.880x speedup, step: 16
JOB test speedup 0.847863465979464
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 25/300 |loss: 0.001390| train set 1.682x speedup, test set 1.647x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.871573434757889
TPCH test speedup 1.7154539796370556
TPCH skew test speedup 1.6506243234689535
Epoch 26/300 |loss: 0.001528| train set 1.733x speedup, test set 1.651x speedup, val set 0.880x speedup, step: 18
JOB test speedup 0.8716303591738741
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 27/300 |loss: 0.001409| train set 1.765x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 19
JOB test speedup 0.8504016743216708
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 28/300 |loss: 0.001644| train set 1.791x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 20
JOB test speedup 0.8512782512105456
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 29/300 |loss: 0.001334| train set 1.792x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 21
JOB test speedup 0.8716602220869601
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 30/300 |loss: 0.001282| train set 1.793x speedup, test set 1.647x speedup, val set 0.879x speedup, step: 22
JOB test speedup 0.8726281584817872
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 31/300 |loss: 0.001312| train set 1.759x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 23
JOB test speedup 0.8572389970583297
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 32/300 |loss: 0.001227| train set 1.739x speedup, test set 1.647x speedup, val set 0.880x speedup, step: 24
JOB test speedup 0.8668033834461207
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 33/300 |loss: 0.001291| train set 1.792x speedup, test set 1.647x speedup, val set 0.880x speedup, step: 25
JOB test speedup 0.8967178890088688
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6627346371273264
Epoch 34/300 |loss: 0.001283| train set 1.740x speedup, test set 1.663x speedup, val set 0.880x speedup, step: 26
JOB test speedup 0.8758536295485853
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 35/300 |loss: 0.001194| train set 1.737x speedup, test set 1.647x speedup, val set 0.880x speedup, step: 27
JOB test speedup 0.9005572525334142
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 36/300 |loss: 0.001076| train set 1.795x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 28
JOB test speedup 0.8546540173347483
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 37/300 |loss: 0.001122| train set 1.763x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 29
JOB test speedup 0.8753744372726411
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 38/300 |loss: 0.001104| train set 1.728x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 30
JOB test speedup 0.8441205025013685
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 39/300 |loss: 0.001069| train set 1.738x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 31
JOB test speedup 1.3829896359667928
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 40/300 |loss: 0.001077| train set 1.725x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 32
JOB test speedup 0.8663336857511517
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 41/300 |loss: 0.001157| train set 1.761x speedup, test set 1.647x speedup, val set 0.880x speedup, step: 33
JOB test speedup 0.8690496158469098
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 42/300 |loss: 0.001252| train set 1.767x speedup, test set 1.687x speedup, val set 0.880x speedup, step: 34
JOB test speedup 0.8694168374649296
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 43/300 |loss: 0.001091| train set 1.789x speedup, test set 1.687x speedup, val set 0.888x speedup, step: 35
JOB test speedup 0.8498238263937548
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 44/300 |loss: 0.000978| train set 1.762x speedup, test set 1.647x speedup, val set 0.880x speedup, step: 36
JOB test speedup 0.8752793447062267
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 45/300 |loss: 0.000946| train set 1.761x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 37
JOB test speedup 0.8676844366179703
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 46/300 |loss: 0.001063| train set 1.792x speedup, test set 1.696x speedup, val set 0.888x speedup, step: 38
JOB test speedup 0.8447149769034938
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 47/300 |loss: 0.000961| train set 1.769x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 39
JOB test speedup 0.8402544888451218
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 48/300 |loss: 0.000955| train set 1.764x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 40
JOB test speedup 0.8803428848426605
TPCH test speedup 1.7504678780432583
TPCH skew test speedup 1.7457390906134624
Epoch 49/300 |loss: 0.000900| train set 1.788x speedup, test set 1.746x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.3598086818060677
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 50/300 |loss: 0.001061| train set 1.741x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 2
JOB test speedup 0.8660355958909707
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7516944834575743
Epoch 51/300 |loss: 0.000925| train set 1.788x speedup, test set 1.752x speedup, val set 0.888x speedup, step: 3
JOB test speedup 0.8322956631774513
TPCH test speedup 1.7329397972204723
TPCH skew test speedup 1.6731558949522594
Epoch 52/300 |loss: 0.001064| train set 1.762x speedup, test set 1.673x speedup, val set 0.880x speedup, step: 4
JOB test speedup 1.3541650783715962
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 53/300 |loss: 0.000858| train set 1.796x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 5
JOB test speedup 0.8784038779554838
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 54/300 |loss: 0.000916| train set 1.740x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.8403136047687533
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 55/300 |loss: 0.000947| train set 1.792x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 7
JOB test speedup 1.330861420827163
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 56/300 |loss: 0.000878| train set 1.774x speedup, test set 1.774x speedup, val set 1.240x speedup, step: 8
JOB test speedup 0.8784313526007431
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 57/300 |loss: 0.000815| train set 1.796x speedup, test set 1.774x speedup, val set 1.240x speedup, step: 9
JOB test speedup 0.8697895479074575
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 58/300 |loss: 0.000847| train set 1.792x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 10
JOB test speedup 1.3541447914936509
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 59/300 |loss: 0.000809| train set 1.795x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 11
JOB test speedup 0.8642431209433763
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7446131252916182
Epoch 60/300 |loss: 0.000875| train set 1.762x speedup, test set 1.745x speedup, val set 1.256x speedup, step: 12
JOB test speedup 1.342365833082099
TPCH test speedup 1.79789465527946
TPCH skew test speedup 1.746240344941664
Epoch 61/300 |loss: 0.000859| train set 1.761x speedup, test set 1.746x speedup, val set 1.256x speedup, step: 13
JOB test speedup 0.8614833592122079
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 62/300 |loss: 0.000765| train set 1.794x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 14
JOB test speedup 1.2874399703749757
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 63/300 |loss: 0.000724| train set 1.742x speedup, test set 1.774x speedup, val set 1.256x speedup, step: 15
JOB test speedup 1.080148969791176
TPCH test speedup 1.79789465527946
TPCH skew test speedup 1.746240344941664
Epoch 64/300 |loss: 0.000834| train set 1.793x speedup, test set 1.746x speedup, val set 1.256x speedup, step: 1
JOB test speedup 1.085531021756608
TPCH test speedup 1.7738682825538017
TPCH skew test speedup 1.702492001251115
Epoch 65/300 |loss: 0.000814| train set 1.757x speedup, test set 1.702x speedup, val set 1.257x speedup, step: 2
JOB test speedup 0.8904280697013114
TPCH test speedup 1.79789465527946
TPCH skew test speedup 1.746240344941664
Epoch 66/300 |loss: 0.000741| train set 1.763x speedup, test set 1.746x speedup, val set 1.256x speedup, step: 3
JOB test speedup 0.8736547112036002
TPCH test speedup 1.8148986624094838
TPCH skew test speedup 1.746240344941664
Epoch 67/300 |loss: 0.000929| train set 1.795x speedup, test set 1.746x speedup, val set 1.256x speedup, step: 4
JOB test speedup 0.8431785814521976
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 68/300 |loss: 0.000858| train set 1.764x speedup, test set 1.774x speedup, val set 1.256x speedup, step: 5
early stopping at epoch 68
Training per epoch cost 2.901 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.211s, pg runtime 0.206s, speedup 0.978x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 11.471s, pg runtime 10.685s, speedup 0.931x
14, opt runtime 0.157s, model runtime 0.176s, pg runtime 0.393s, speedup 2.231x
15, opt runtime 1.829s, model runtime 1.829s, pg runtime 53.885s, speedup 29.462x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 1.305s, pg runtime 4.730s, speedup 3.626x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 140.509s, pg runtime 78.349s, speedup 0.558x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 139.115s, pg runtime 83.069s, speedup 0.597x
15, opt runtime 47.518s, model runtime 133.905s, pg runtime 75.736s, speedup 0.566x
16, opt runtime 48.067s, model runtime 135.202s, pg runtime 81.014s, speedup 0.599x
17, opt runtime 47.738s, model runtime 135.818s, pg runtime 76.021s, speedup 0.560x
18, opt runtime 47.804s, model runtime 136.805s, pg runtime 81.177s, speedup 0.593x
19, opt runtime 49.511s, model runtime 157.094s, pg runtime 87.329s, speedup 0.556x
20, opt runtime 51.276s, model runtime 134.457s, pg runtime 79.222s, speedup 0.589x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 140.245s, pg runtime 80.711s, speedup 0.575x
12, opt runtime 53.203s, model runtime 135.711s, pg runtime 79.156s, speedup 0.583x
13, opt runtime 51.456s, model runtime 132.632s, pg runtime 93.781s, speedup 0.707x
14, opt runtime 54.696s, model runtime 141.455s, pg runtime 98.172s, speedup 0.694x
15, opt runtime 51.200s, model runtime 137.865s, pg runtime 77.674s, speedup 0.563x
16, opt runtime 47.844s, model runtime 133.323s, pg runtime 80.007s, speedup 0.600x
17, opt runtime 54.335s, model runtime 134.646s, pg runtime 95.799s, speedup 0.711x
18, opt runtime 48.088s, model runtime 135.391s, pg runtime 77.369s, speedup 0.571x
19, opt runtime 52.382s, model runtime 146.665s, pg runtime 82.710s, speedup 0.564x
20, opt runtime 52.135s, model runtime 137.176s, pg runtime 102.039s, speedup 0.744x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 64, train speedup 1.793, test speedup 1.080, val speedup 1.256
TPCH best validation speedup epoch: 64, train speedup 1.793, test speedup 1.798, val speedup 1.256
TPCH Skew best validation speedup epoch: 64, train speedup 1.793, test speedup 1.746, val speedup 1.256
execution cost 0:04:33.361703
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.226650, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029390| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.7091174843148246
TPCH test speedup 2.5990468860576805
TPCH skew test speedup 2.457464216370867
Epoch 1/300 |loss: 0.010601| train set 0.961x speedup, test set 2.457x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.9888301778714155
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007482| train set 1.001x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 0.9843765985062789
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 3/300 |loss: 0.005911| train set 1.057x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.030525899064818
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005086| train set 1.517x speedup, test set 1.825x speedup, val set 0.564x speedup, step: 5
JOB test speedup 1.0283875599993373
TPCH test speedup 1.0266630305325042
TPCH skew test speedup 0.9965973198564567
Epoch 5/300 |loss: 0.004475| train set 1.533x speedup, test set 0.997x speedup, val set 0.564x speedup, step: 6
JOB test speedup 1.031912769185071
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 6/300 |loss: 0.003997| train set 1.583x speedup, test set 1.656x speedup, val set 0.887x speedup, step: 7
JOB test speedup 1.0201516087002582
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003645| train set 1.515x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 8
JOB test speedup 1.045761143857236
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 8/300 |loss: 0.003428| train set 1.526x speedup, test set 1.656x speedup, val set 0.887x speedup, step: 9
JOB test speedup 1.02126256939383
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003391| train set 1.464x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 1
JOB test speedup 0.8603406650538932
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003014| train set 1.541x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 2
JOB test speedup 1.0526225260273523
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002758| train set 1.740x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.0434920725613661
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002695| train set 1.677x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 4
JOB test speedup 0.8541953088134121
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 13/300 |loss: 0.002374| train set 1.511x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8562348403848333
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 14/300 |loss: 0.002645| train set 1.768x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.8497083512467862
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 15/300 |loss: 0.002278| train set 1.724x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8412104385260876
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 16/300 |loss: 0.002367| train set 1.705x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.8712072593526784
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 17/300 |loss: 0.002236| train set 1.716x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 4
JOB test speedup 1.3522998744134094
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 18/300 |loss: 0.001936| train set 1.713x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 5
JOB test speedup 1.6359689107802289
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 19/300 |loss: 0.001780| train set 1.745x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8716524676489988
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 20/300 |loss: 0.001700| train set 1.674x speedup, test set 3.461x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8757141075720866
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.646755817278369
Epoch 21/300 |loss: 0.002021| train set 1.793x speedup, test set 1.647x speedup, val set 0.880x speedup, step: 3
JOB test speedup 0.8592052251959761
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6446678131503827
Epoch 22/300 |loss: 0.001664| train set 1.791x speedup, test set 3.645x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.865909093561411
TPCH test speedup 1.4887055183593907
TPCH skew test speedup 1.4768195164893496
Epoch 23/300 |loss: 0.001500| train set 1.663x speedup, test set 1.477x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8597613028833775
TPCH test speedup 1.578789410078632
TPCH skew test speedup 2.2790988601937188
Epoch 24/300 |loss: 0.001531| train set 1.754x speedup, test set 2.279x speedup, val set 0.880x speedup, step: 1
JOB test speedup 0.8498684040648815
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 25/300 |loss: 0.001409| train set 1.755x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8524275939097811
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 26/300 |loss: 0.001443| train set 1.784x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 3
JOB test speedup 0.8746201078696674
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9930764642124389
Epoch 27/300 |loss: 0.001375| train set 1.792x speedup, test set 0.993x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8881241687200431
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 28/300 |loss: 0.001589| train set 1.681x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 5
JOB test speedup 0.9862110988807206
TPCH test speedup 1.0279589832706968
TPCH skew test speedup 1.0076774185932575
Epoch 29/300 |loss: 0.001397| train set 1.791x speedup, test set 1.008x speedup, val set 0.880x speedup, step: 1
JOB test speedup 1.063255508420269
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 30/300 |loss: 0.001268| train set 1.796x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 2
JOB test speedup 0.8705928803677199
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 31/300 |loss: 0.001379| train set 1.789x speedup, test set 3.605x speedup, val set 0.886x speedup, step: 3
JOB test speedup 1.3267831843359223
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 32/300 |loss: 0.001273| train set 1.739x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 4
JOB test speedup 0.8713131255994998
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 33/300 |loss: 0.001283| train set 1.759x speedup, test set 3.605x speedup, val set 0.886x speedup, step: 5
JOB test speedup 0.9718776452570609
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 34/300 |loss: 0.001249| train set 1.694x speedup, test set 1.687x speedup, val set 0.887x speedup, step: 1
JOB test speedup 0.9548235749440536
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 35/300 |loss: 0.001190| train set 1.783x speedup, test set 1.687x speedup, val set 0.887x speedup, step: 2
JOB test speedup 0.8286135479062343
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 36/300 |loss: 0.001097| train set 1.794x speedup, test set 1.687x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.017990295758882
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 37/300 |loss: 0.001094| train set 1.793x speedup, test set 1.687x speedup, val set 0.887x speedup, step: 4
JOB test speedup 1.1893134409712955
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 38/300 |loss: 0.001098| train set 1.795x speedup, test set 3.605x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8692889125170102
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 39/300 |loss: 0.001134| train set 1.759x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 6
JOB test speedup 0.9734937445025241
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 40/300 |loss: 0.001101| train set 1.762x speedup, test set 1.687x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.9706916921213626
TPCH test speedup 3.700977376164284
TPCH skew test speedup 3.7146011759780544
Epoch 41/300 |loss: 0.001122| train set 1.792x speedup, test set 3.715x speedup, val set 0.886x speedup, step: 8
JOB test speedup 1.5722853604345226
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 42/300 |loss: 0.001196| train set 1.766x speedup, test set 3.605x speedup, val set 0.880x speedup, step: 9
JOB test speedup 0.838650226849553
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 43/300 |loss: 0.001130| train set 1.739x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 10
JOB test speedup 0.8615661477770143
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 44/300 |loss: 0.000998| train set 1.757x speedup, test set 3.882x speedup, val set 0.886x speedup, step: 11
JOB test speedup 0.862672130397966
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.8294910619785383
Epoch 45/300 |loss: 0.000992| train set 1.756x speedup, test set 3.829x speedup, val set 0.886x speedup, step: 12
JOB test speedup 0.9490053941255958
TPCH test speedup 3.6183038707979507
TPCH skew test speedup 3.6047261949907274
Epoch 46/300 |loss: 0.000984| train set 1.794x speedup, test set 3.605x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.8640885025672614
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 47/300 |loss: 0.001026| train set 1.766x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 14
JOB test speedup 0.936664002109904
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.8371045439940956
Epoch 48/300 |loss: 0.000932| train set 1.773x speedup, test set 3.837x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.9635175707562271
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 49/300 |loss: 0.000937| train set 1.786x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 16
JOB test speedup 0.8656422299123732
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 50/300 |loss: 0.000973| train set 1.793x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 17
JOB test speedup 0.8739154441315401
TPCH test speedup 4.060244864142433
TPCH skew test speedup 3.9690395449190925
Epoch 51/300 |loss: 0.000945| train set 1.789x speedup, test set 3.969x speedup, val set 0.886x speedup, step: 18
JOB test speedup 0.8923748747183857
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 52/300 |loss: 0.000962| train set 1.773x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 19
JOB test speedup 0.9730971367297817
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 53/300 |loss: 0.000905| train set 1.791x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 20
JOB test speedup 0.8570035892885064
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 54/300 |loss: 0.000922| train set 1.793x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 21
JOB test speedup 0.9325899287769004
TPCH test speedup 3.700977376164284
TPCH skew test speedup 3.7146011759780544
Epoch 55/300 |loss: 0.000902| train set 1.795x speedup, test set 3.715x speedup, val set 0.886x speedup, step: 22
JOB test speedup 0.8561347180072314
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 56/300 |loss: 0.000841| train set 1.795x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 23
JOB test speedup 0.8415659198613856
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 57/300 |loss: 0.000868| train set 1.796x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 24
JOB test speedup 1.2969175369800137
TPCH test speedup 4.063586251191793
TPCH skew test speedup 3.882394164227722
Epoch 58/300 |loss: 0.000929| train set 1.759x speedup, test set 3.882x speedup, val set 0.886x speedup, step: 25
JOB test speedup 1.694378810293725
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 59/300 |loss: 0.000885| train set 1.795x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 26
JOB test speedup 0.8337606303066548
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.8294910619785383
Epoch 60/300 |loss: 0.000949| train set 1.760x speedup, test set 3.829x speedup, val set 0.880x speedup, step: 27
JOB test speedup 0.843038670804666
TPCH test speedup 4.13514537024913
TPCH skew test speedup 3.882394164227722
Epoch 61/300 |loss: 0.000924| train set 1.795x speedup, test set 3.882x speedup, val set 0.880x speedup, step: 28
JOB test speedup 0.8605688716282992
TPCH test speedup 4.045083414246247
TPCH skew test speedup 3.9690395449190925
Epoch 62/300 |loss: 0.000820| train set 1.777x speedup, test set 3.969x speedup, val set 0.880x speedup, step: 29
JOB test speedup 0.84315450804415
TPCH test speedup 3.964136663773001
TPCH skew test speedup 3.6446678131503827
Epoch 63/300 |loss: 0.000814| train set 1.794x speedup, test set 3.645x speedup, val set 0.886x speedup, step: 30
JOB test speedup 0.8384889251317604
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 64/300 |loss: 0.000934| train set 1.799x speedup, test set 4.026x speedup, val set 0.883x speedup, step: 31
JOB test speedup 0.8507326157503713
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 65/300 |loss: 0.000939| train set 1.791x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 32
early stopping at epoch 65
Training per epoch cost 2.912 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 6.220s, pg runtime 5.879s, speedup 0.945x
08, opt runtime 1.737s, model runtime 6.267s, pg runtime 5.994s, speedup 0.957x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.294s, pg runtime 2.352s, speedup 8.004x
12, opt runtime 4.443s, model runtime 19.886s, pg runtime 13.945s, speedup 0.701x
13, opt runtime 5.179s, model runtime 14.577s, pg runtime 10.685s, speedup 0.733x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.501s, pg runtime 2.558s, speedup 1.705x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 157.104s, pg runtime 93.781s, speedup 0.597x
14, opt runtime 54.696s, model runtime 168.714s, pg runtime 98.172s, speedup 0.582x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 163.575s, pg runtime 95.799s, speedup 0.586x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 172.007s, pg runtime 102.039s, speedup 0.593x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 34, train speedup 1.694, test speedup 0.972, val speedup 0.887
TPCH best validation speedup epoch: 34, train speedup 1.694, test speedup 1.732, val speedup 0.887
TPCH Skew best validation speedup epoch: 34, train speedup 1.694, test speedup 1.687, val speedup 0.887
execution cost 0:04:23.666974
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.262176, and there are 10731 training samples
in channel 9
JOB test speedup 1.1024686693732124
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029389| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.7082709924053361
TPCH test speedup 1.6919996171556706
TPCH skew test speedup 1.5890392931842958
Epoch 1/300 |loss: 0.010627| train set 0.960x speedup, test set 1.589x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.7093638309148348
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007515| train set 0.998x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.5845824980995113
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 3/300 |loss: 0.005956| train set 1.040x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.0241731544388022
TPCH test speedup 1.082801473262965
TPCH skew test speedup 1.0553800698521154
Epoch 4/300 |loss: 0.005108| train set 1.514x speedup, test set 1.055x speedup, val set 0.563x speedup, step: 5
JOB test speedup 1.01271612076806
TPCH test speedup 1.0236585742082016
TPCH skew test speedup 0.9960837448892246
Epoch 5/300 |loss: 0.004468| train set 1.533x speedup, test set 0.996x speedup, val set 0.563x speedup, step: 6
JOB test speedup 1.0241411182366438
TPCH test speedup 1.7142415226708987
TPCH skew test speedup 1.6564039613399422
Epoch 6/300 |loss: 0.004015| train set 1.583x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 7
JOB test speedup 1.012696344114398
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003633| train set 1.540x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 8
JOB test speedup 1.0399989512603052
TPCH test speedup 1.7280782766616183
TPCH skew test speedup 1.6564599327751515
Epoch 8/300 |loss: 0.003501| train set 1.723x speedup, test set 1.656x speedup, val set 0.885x speedup, step: 9
JOB test speedup 1.0201221219727248
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003438| train set 1.524x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.0373753359508142
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 10/300 |loss: 0.003131| train set 1.735x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 2
JOB test speedup 1.067733547268397
TPCH test speedup 1.7017541945053822
TPCH skew test speedup 1.6550416000314938
Epoch 11/300 |loss: 0.002929| train set 1.784x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 3
JOB test speedup 1.0701663513984667
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 12/300 |loss: 0.002778| train set 1.730x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 4
JOB test speedup 0.8489309873988212
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002551| train set 1.513x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 5
JOB test speedup 0.8863508492936591
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 14/300 |loss: 0.002689| train set 1.729x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 6
JOB test speedup 1.066445424923621
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 15/300 |loss: 0.002443| train set 1.527x speedup, test set 1.655x speedup, val set 0.887x speedup, step: 7
JOB test speedup 0.8797610295949946
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 16/300 |loss: 0.002429| train set 1.749x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 8
JOB test speedup 1.0345141592024587
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 17/300 |loss: 0.002407| train set 1.735x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 9
JOB test speedup 0.8759183555467902
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 18/300 |loss: 0.001997| train set 1.714x speedup, test set 1.655x speedup, val set 0.624x speedup, step: 10
JOB test speedup 0.8880634537796468
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 19/300 |loss: 0.001826| train set 1.748x speedup, test set 1.655x speedup, val set 0.624x speedup, step: 11
JOB test speedup 0.8760293874157116
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 20/300 |loss: 0.001760| train set 1.719x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 12
JOB test speedup 0.8760380582403366
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 21/300 |loss: 0.002011| train set 1.786x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 13
JOB test speedup 0.869270771833462
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 22/300 |loss: 0.001707| train set 1.792x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 14
JOB test speedup 0.8733678714996014
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 23/300 |loss: 0.001510| train set 1.716x speedup, test set 1.655x speedup, val set 0.625x speedup, step: 15
JOB test speedup 0.873176770553285
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 24/300 |loss: 0.001487| train set 1.695x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8690536180232797
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 25/300 |loss: 0.001397| train set 1.758x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 2
JOB test speedup 0.8690650121467451
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 26/300 |loss: 0.001539| train set 1.739x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 3
JOB test speedup 0.8687547785407832
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 27/300 |loss: 0.001363| train set 1.764x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 4
JOB test speedup 0.8904136650613708
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 28/300 |loss: 0.001573| train set 1.790x speedup, test set 1.655x speedup, val set 0.624x speedup, step: 5
JOB test speedup 0.8725086117266
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 29/300 |loss: 0.001301| train set 1.793x speedup, test set 1.655x speedup, val set 0.888x speedup, step: 1
JOB test speedup 0.8987331270713514
TPCH test speedup 1.7087256040975096
TPCH skew test speedup 1.6550416000314938
Epoch 30/300 |loss: 0.001298| train set 1.793x speedup, test set 1.655x speedup, val set 0.624x speedup, step: 2
JOB test speedup 0.8849661886289253
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6550416000314938
Epoch 31/300 |loss: 0.001298| train set 1.789x speedup, test set 1.655x speedup, val set 0.624x speedup, step: 3
JOB test speedup 0.8688598769747632
TPCH test speedup 1.8019741063061236
TPCH skew test speedup 1.7023768154371746
Epoch 32/300 |loss: 0.001197| train set 1.733x speedup, test set 1.702x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.8809771944935213
TPCH test speedup 1.735923420144999
TPCH skew test speedup 1.6550416000314938
Epoch 33/300 |loss: 0.001245| train set 1.760x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 5
JOB test speedup 0.8719901191134947
TPCH test speedup 1.744619317921946
TPCH skew test speedup 1.6959969855885142
Epoch 34/300 |loss: 0.001240| train set 1.761x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.8764019934080299
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 35/300 |loss: 0.001182| train set 1.733x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 7
JOB test speedup 0.8645403961637392
TPCH test speedup 1.7373525702366297
TPCH skew test speedup 1.6959969855885142
Epoch 36/300 |loss: 0.001099| train set 1.742x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 8
JOB test speedup 0.8947270033407078
TPCH test speedup 1.2608353410484034
TPCH skew test speedup 1.2360632800354558
Epoch 37/300 |loss: 0.001112| train set 1.794x speedup, test set 1.236x speedup, val set 0.886x speedup, step: 9
JOB test speedup 0.8753642806992004
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 38/300 |loss: 0.001092| train set 1.730x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 10
JOB test speedup 0.8879083812743408
TPCH test speedup 1.788251335008736
TPCH skew test speedup 1.7023768154371746
Epoch 39/300 |loss: 0.001021| train set 1.762x speedup, test set 1.702x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8724348547335535
TPCH test speedup 1.8419381082114514
TPCH skew test speedup 1.7457390906134624
Epoch 40/300 |loss: 0.001167| train set 1.777x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 12
JOB test speedup 0.8945844905209501
TPCH test speedup 1.7231846616498854
TPCH skew test speedup 1.6550416000314938
Epoch 41/300 |loss: 0.001194| train set 1.737x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 13
JOB test speedup 0.9781641273992765
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6872971295676944
Epoch 42/300 |loss: 0.001234| train set 1.787x speedup, test set 1.687x speedup, val set 0.621x speedup, step: 14
JOB test speedup 0.8904000033045489
TPCH test speedup 1.7875892638108504
TPCH skew test speedup 1.7457390906134624
Epoch 43/300 |loss: 0.001078| train set 1.742x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8918048869021675
TPCH test speedup 1.719919427222743
TPCH skew test speedup 1.6652581205912793
Epoch 44/300 |loss: 0.000975| train set 1.761x speedup, test set 1.665x speedup, val set 0.880x speedup, step: 16
JOB test speedup 0.896540515928435
TPCH test speedup 1.788251335008736
TPCH skew test speedup 1.7023768154371746
Epoch 45/300 |loss: 0.000945| train set 1.794x speedup, test set 1.702x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.8694807536778442
TPCH test speedup 1.7384970276684704
TPCH skew test speedup 1.6933328593741024
Epoch 46/300 |loss: 0.001067| train set 1.778x speedup, test set 1.693x speedup, val set 0.880x speedup, step: 18
JOB test speedup 0.9784601798981494
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 47/300 |loss: 0.000941| train set 1.776x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 19
JOB test speedup 0.9971818908636234
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 48/300 |loss: 0.000974| train set 1.792x speedup, test set 1.774x speedup, val set 0.621x speedup, step: 20
JOB test speedup 0.9798703173870809
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 49/300 |loss: 0.000863| train set 1.793x speedup, test set 1.774x speedup, val set 0.877x speedup, step: 21
JOB test speedup 1.0241445443922357
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 50/300 |loss: 0.000942| train set 1.798x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 22
JOB test speedup 0.8878607342200344
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 51/300 |loss: 0.000859| train set 1.797x speedup, test set 1.763x speedup, val set 0.880x speedup, step: 23
JOB test speedup 1.0084662288995734
TPCH test speedup 1.747025530183658
TPCH skew test speedup 1.6933328593741024
Epoch 52/300 |loss: 0.000945| train set 1.794x speedup, test set 1.693x speedup, val set 0.886x speedup, step: 24
JOB test speedup 1.3925063980395247
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 53/300 |loss: 0.000784| train set 1.776x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 25
JOB test speedup 0.8868598680034471
TPCH test speedup 1.827522442815584
TPCH skew test speedup 1.7457390906134624
Epoch 54/300 |loss: 0.000853| train set 1.794x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 26
JOB test speedup 0.9683729276785131
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 55/300 |loss: 0.000883| train set 1.793x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 27
JOB test speedup 0.8751034539957281
TPCH test speedup 1.3089586379485694
TPCH skew test speedup 1.2762319732290495
Epoch 56/300 |loss: 0.000796| train set 1.793x speedup, test set 1.276x speedup, val set 0.886x speedup, step: 28
JOB test speedup 1.0124427279666326
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 57/300 |loss: 0.000792| train set 1.740x speedup, test set 1.763x speedup, val set 0.880x speedup, step: 29
JOB test speedup 0.9978518123150306
TPCH test speedup 1.7317530861995212
TPCH skew test speedup 1.6959969855885142
Epoch 58/300 |loss: 0.000796| train set 1.793x speedup, test set 1.696x speedup, val set 0.886x speedup, step: 30
JOB test speedup 0.9612033484105524
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 59/300 |loss: 0.000795| train set 1.741x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 31
JOB test speedup 0.8908228725163173
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 60/300 |loss: 0.000808| train set 1.762x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 32
JOB test speedup 1.0086175920752942
TPCH test speedup 1.059723286999353
TPCH skew test speedup 1.0342142723221648
Epoch 61/300 |loss: 0.000852| train set 1.794x speedup, test set 1.034x speedup, val set 0.880x speedup, step: 33
JOB test speedup 0.8688602647403636
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 62/300 |loss: 0.000765| train set 1.761x speedup, test set 1.763x speedup, val set 0.886x speedup, step: 34
JOB test speedup 1.0104948133996716
TPCH test speedup 1.0609889109372832
TPCH skew test speedup 1.0380342662371218
Epoch 63/300 |loss: 0.000749| train set 1.763x speedup, test set 1.038x speedup, val set 0.887x speedup, step: 35
JOB test speedup 1.0063244704327536
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 64/300 |loss: 0.000850| train set 1.791x speedup, test set 1.763x speedup, val set 0.886x speedup, step: 36
JOB test speedup 0.997068571702414
TPCH test speedup 1.827522442815584
TPCH skew test speedup 1.7741754860160275
Epoch 65/300 |loss: 0.000746| train set 1.795x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 37
JOB test speedup 1.0066472403946247
TPCH test speedup 1.7860256690661305
TPCH skew test speedup 1.7312503535298522
Epoch 66/300 |loss: 0.000808| train set 1.756x speedup, test set 1.731x speedup, val set 0.880x speedup, step: 38
JOB test speedup 1.0021049099605233
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 67/300 |loss: 0.001173| train set 1.796x speedup, test set 1.763x speedup, val set 0.623x speedup, step: 39
early stopping at epoch 67
Training per epoch cost 2.896 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.206s, pg runtime 0.206s, speedup 1.000x
02, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
03, opt runtime 1.763s, model runtime 1.763s, pg runtime 1.763s, speedup 1.000x
04, opt runtime 1.386s, model runtime 1.386s, pg runtime 1.386s, speedup 1.000x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.283s, pg runtime 8.283s, speedup 1.000x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.909s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 6.021s, pg runtime 6.089s, speedup 1.011x
17, opt runtime 2.413s, model runtime 57.202s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
19, opt runtime 0.379s, model runtime 0.379s, pg runtime 3.645s, speedup 9.614x
20, opt runtime 0.626s, model runtime 1.544s, pg runtime 2.558s, speedup 1.657x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 4.173s, pg runtime 8.279s, speedup 1.984x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 99.906s, pg runtime 91.784s, speedup 0.919x
02, opt runtime 29.763s, model runtime 99.246s, pg runtime 91.648s, speedup 0.923x
03, opt runtime 30.267s, model runtime 99.382s, pg runtime 100.885s, speedup 1.015x
04, opt runtime 29.286s, model runtime 118.456s, pg runtime 92.131s, speedup 0.778x
05, opt runtime 29.269s, model runtime 116.896s, pg runtime 91.296s, speedup 0.781x
06, opt runtime 29.502s, model runtime 124.239s, pg runtime 112.305s, speedup 0.904x
07, opt runtime 27.886s, model runtime 120.312s, pg runtime 97.629s, speedup 0.811x
08, opt runtime 30.705s, model runtime 101.271s, pg runtime 89.698s, speedup 0.886x
09, opt runtime 27.651s, model runtime 105.385s, pg runtime 91.255s, speedup 0.866x
10, opt runtime 33.637s, model runtime 110.814s, pg runtime 90.618s, speedup 0.818x
11, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
12, opt runtime 48.784s, model runtime 175.198s, pg runtime 78.349s, speedup 0.447x
13, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
14, opt runtime 47.812s, model runtime 178.938s, pg runtime 83.069s, speedup 0.464x
15, opt runtime 47.518s, model runtime 168.350s, pg runtime 75.736s, speedup 0.450x
16, opt runtime 48.067s, model runtime 174.668s, pg runtime 81.014s, speedup 0.464x
17, opt runtime 47.738s, model runtime 166.363s, pg runtime 76.021s, speedup 0.457x
18, opt runtime 47.804s, model runtime 179.734s, pg runtime 81.177s, speedup 0.452x
19, opt runtime 49.511s, model runtime 192.596s, pg runtime 87.329s, speedup 0.453x
20, opt runtime 51.276s, model runtime 162.495s, pg runtime 79.222s, speedup 0.488x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 106.736s, pg runtime 91.786s, speedup 0.860x
02, opt runtime 33.249s, model runtime 117.478s, pg runtime 103.551s, speedup 0.881x
03, opt runtime 33.759s, model runtime 103.676s, pg runtime 98.290s, speedup 0.948x
04, opt runtime 36.646s, model runtime 116.461s, pg runtime 98.171s, speedup 0.843x
05, opt runtime 32.482s, model runtime 133.244s, pg runtime 123.411s, speedup 0.926x
06, opt runtime 31.996s, model runtime 130.089s, pg runtime 120.854s, speedup 0.929x
07, opt runtime 30.778s, model runtime 121.345s, pg runtime 100.158s, speedup 0.825x
08, opt runtime 30.030s, model runtime 104.949s, pg runtime 85.930s, speedup 0.819x
09, opt runtime 28.776s, model runtime 99.276s, pg runtime 86.923s, speedup 0.876x
10, opt runtime 29.576s, model runtime 133.996s, pg runtime 113.059s, speedup 0.844x
11, opt runtime 53.915s, model runtime 167.240s, pg runtime 80.711s, speedup 0.483x
12, opt runtime 53.203s, model runtime 164.941s, pg runtime 79.156s, speedup 0.480x
13, opt runtime 51.456s, model runtime 161.031s, pg runtime 93.781s, speedup 0.582x
14, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
15, opt runtime 51.200s, model runtime 163.267s, pg runtime 77.674s, speedup 0.476x
16, opt runtime 47.844s, model runtime 157.600s, pg runtime 80.007s, speedup 0.508x
17, opt runtime 54.335s, model runtime 147.057s, pg runtime 95.799s, speedup 0.651x
18, opt runtime 48.088s, model runtime 158.416s, pg runtime 77.369s, speedup 0.488x
19, opt runtime 52.382s, model runtime 165.380s, pg runtime 82.710s, speedup 0.500x
20, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 29, train speedup 1.793, test speedup 0.873, val speedup 0.888
TPCH best validation speedup epoch: 29, train speedup 1.793, test speedup 1.709, val speedup 0.888
TPCH Skew best validation speedup epoch: 29, train speedup 1.793, test speedup 1.655, val speedup 0.888
execution cost 0:04:28.158964
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
construct training samples cost 0:00:01.241766, and there are 10731 training samples
in channel 9
JOB test speedup 1.1087041921102816
TPCH test speedup 4.400118130070605
TPCH skew test speedup 4.3698379589503125
Epoch 0/300 |loss: 0.029387| train set 0.770x speedup, test set 4.370x speedup, val set 0.688x speedup, step: 1
JOB test speedup 0.7082709924053361
TPCH test speedup 2.597594365888096
TPCH skew test speedup 2.4584560260497605
Epoch 1/300 |loss: 0.010622| train set 0.961x speedup, test set 2.458x speedup, val set 0.503x speedup, step: 2
JOB test speedup 0.7093509804000875
TPCH test speedup 2.090144142328622
TPCH skew test speedup 1.9593515161698005
Epoch 2/300 |loss: 0.007417| train set 1.002x speedup, test set 1.959x speedup, val set 0.564x speedup, step: 3
JOB test speedup 1.6086731030532397
TPCH test speedup 1.8807231312247867
TPCH skew test speedup 1.8237323685257538
Epoch 3/300 |loss: 0.005946| train set 1.041x speedup, test set 1.824x speedup, val set 0.563x speedup, step: 4
JOB test speedup 1.030525899064818
TPCH test speedup 1.8932997072038922
TPCH skew test speedup 1.825454714717651
Epoch 4/300 |loss: 0.005107| train set 1.522x speedup, test set 1.825x speedup, val set 0.563x speedup, step: 5
JOB test speedup 1.7816353064543484
TPCH test speedup 1.72094838879486
TPCH skew test speedup 1.6564599327751515
Epoch 5/300 |loss: 0.004465| train set 1.535x speedup, test set 1.656x speedup, val set 0.564x speedup, step: 6
JOB test speedup 0.7402198168055362
TPCH test speedup 3.5438142910184496
TPCH skew test speedup 3.470173851730101
Epoch 6/300 |loss: 0.003957| train set 1.581x speedup, test set 3.470x speedup, val set 0.564x speedup, step: 7
JOB test speedup 1.0309646319224164
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 7/300 |loss: 0.003637| train set 1.543x speedup, test set 1.655x speedup, val set 0.885x speedup, step: 8
JOB test speedup 1.0650621171395878
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 8/300 |loss: 0.003436| train set 1.662x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 9
JOB test speedup 1.7514419910133872
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 9/300 |loss: 0.003432| train set 1.583x speedup, test set 1.655x speedup, val set 0.886x speedup, step: 1
JOB test speedup 1.0375951157964525
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6459466624093964
Epoch 10/300 |loss: 0.003049| train set 1.761x speedup, test set 1.646x speedup, val set 0.879x speedup, step: 2
JOB test speedup 1.0697036568744522
TPCH test speedup 3.4672487578991142
TPCH skew test speedup 3.4606368062539103
Epoch 11/300 |loss: 0.002846| train set 1.743x speedup, test set 3.461x speedup, val set 0.888x speedup, step: 3
JOB test speedup 1.8514972209258262
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 12/300 |loss: 0.002691| train set 1.568x speedup, test set 0.996x speedup, val set 0.885x speedup, step: 4
JOB test speedup 0.8574268597429439
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 13/300 |loss: 0.002477| train set 1.505x speedup, test set 1.655x speedup, val set 0.879x speedup, step: 5
JOB test speedup 0.8739554925300933
TPCH test speedup 3.8794917544958873
TPCH skew test speedup 3.8839447824563007
Epoch 14/300 |loss: 0.002688| train set 1.789x speedup, test set 3.884x speedup, val set 0.887x speedup, step: 1
JOB test speedup 1.0266490684006429
TPCH test speedup 3.8794917544958873
TPCH skew test speedup 3.8839447824563007
Epoch 15/300 |loss: 0.002437| train set 1.539x speedup, test set 3.884x speedup, val set 0.879x speedup, step: 2
JOB test speedup 1.3520563726091155
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 16/300 |loss: 0.002498| train set 1.741x speedup, test set 0.996x speedup, val set 0.879x speedup, step: 3
JOB test speedup 1.4734523733138187
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 17/300 |loss: 0.002420| train set 1.726x speedup, test set 0.996x speedup, val set 0.888x speedup, step: 4
JOB test speedup 1.3521775529033682
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 18/300 |loss: 0.002050| train set 1.717x speedup, test set 0.996x speedup, val set 0.887x speedup, step: 5
JOB test speedup 0.9268293667627583
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 19/300 |loss: 0.001823| train set 1.742x speedup, test set 0.996x speedup, val set 0.880x speedup, step: 6
JOB test speedup 0.8732035114825941
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9930764642124389
Epoch 20/300 |loss: 0.001830| train set 1.747x speedup, test set 0.993x speedup, val set 0.741x speedup, step: 7
JOB test speedup 0.8746334682202057
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 21/300 |loss: 0.002101| train set 1.745x speedup, test set 0.996x speedup, val set 0.879x speedup, step: 8
JOB test speedup 0.8721471070118595
TPCH test speedup 1.6963814717616552
TPCH skew test speedup 1.6550416000314938
Epoch 22/300 |loss: 0.001693| train set 1.761x speedup, test set 1.655x speedup, val set 0.880x speedup, step: 9
JOB test speedup 1.3643472010426683
TPCH test speedup 1.0279589832706968
TPCH skew test speedup 1.010773917811871
Epoch 23/300 |loss: 0.001547| train set 1.769x speedup, test set 1.011x speedup, val set 0.888x speedup, step: 10
JOB test speedup 0.8777281400793152
TPCH test speedup 1.7262731792381836
TPCH skew test speedup 1.6959969855885142
Epoch 24/300 |loss: 0.001569| train set 1.736x speedup, test set 1.696x speedup, val set 0.880x speedup, step: 11
JOB test speedup 0.8767432734977928
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 25/300 |loss: 0.001359| train set 1.753x speedup, test set 0.996x speedup, val set 0.887x speedup, step: 12
JOB test speedup 1.3476241195594139
TPCH test speedup 1.0279589832706968
TPCH skew test speedup 1.010773917811871
Epoch 26/300 |loss: 0.001563| train set 1.788x speedup, test set 1.011x speedup, val set 0.888x speedup, step: 13
JOB test speedup 0.8779881441997779
TPCH test speedup 1.0279589832706968
TPCH skew test speedup 1.010773917811871
Epoch 27/300 |loss: 0.001415| train set 1.787x speedup, test set 1.011x speedup, val set 0.880x speedup, step: 14
JOB test speedup 0.8766586247144319
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 28/300 |loss: 0.001570| train set 1.760x speedup, test set 0.996x speedup, val set 0.880x speedup, step: 15
JOB test speedup 0.8768210906314571
TPCH test speedup 1.015391317470438
TPCH skew test speedup 0.9960837448892246
Epoch 29/300 |loss: 0.001371| train set 1.758x speedup, test set 0.996x speedup, val set 0.888x speedup, step: 1
JOB test speedup 1.4084207282631034
TPCH test speedup 1.7505372733732334
TPCH skew test speedup 1.6959969855885142
Epoch 30/300 |loss: 0.001275| train set 1.790x speedup, test set 1.696x speedup, val set 0.888x speedup, step: 2
JOB test speedup 0.8963818734097735
TPCH test speedup 1.070121144890303
TPCH skew test speedup 1.3315933521213652
Epoch 31/300 |loss: 0.001350| train set 1.787x speedup, test set 1.332x speedup, val set 0.886x speedup, step: 3
JOB test speedup 0.8966749536675854
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 32/300 |loss: 0.001298| train set 1.738x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 4
JOB test speedup 0.8967499611035064
TPCH test speedup 1.5589923173102753
TPCH skew test speedup 1.5213978783564683
Epoch 33/300 |loss: 0.001351| train set 1.732x speedup, test set 1.521x speedup, val set 0.888x speedup, step: 5
JOB test speedup 1.0972222387667083
TPCH test speedup 1.03170482508171
TPCH skew test speedup 1.0107947596613827
Epoch 34/300 |loss: 0.001357| train set 1.680x speedup, test set 1.011x speedup, val set 0.879x speedup, step: 6
JOB test speedup 0.8792023887847111
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 35/300 |loss: 0.001328| train set 1.733x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 7
JOB test speedup 0.8733020519333546
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 36/300 |loss: 0.001119| train set 1.741x speedup, test set 1.746x speedup, val set 0.888x speedup, step: 8
JOB test speedup 1.1039881974295018
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 37/300 |loss: 0.001142| train set 1.794x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 9
JOB test speedup 1.3562705469143868
TPCH test speedup 1.9047776406699393
TPCH skew test speedup 1.799112408031845
Epoch 38/300 |loss: 0.001196| train set 1.762x speedup, test set 1.799x speedup, val set 0.886x speedup, step: 10
JOB test speedup 1.1045742916064474
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 39/300 |loss: 0.001137| train set 1.796x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 11
JOB test speedup 1.821467653401259
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 40/300 |loss: 0.001252| train set 1.787x speedup, test set 1.746x speedup, val set 0.886x speedup, step: 12
JOB test speedup 1.8029742771640693
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 41/300 |loss: 0.001221| train set 1.737x speedup, test set 1.774x speedup, val set 0.887x speedup, step: 13
JOB test speedup 1.418255742684196
TPCH test speedup 1.9047776406699393
TPCH skew test speedup 1.799112408031845
Epoch 42/300 |loss: 0.001246| train set 1.771x speedup, test set 1.799x speedup, val set 0.888x speedup, step: 14
JOB test speedup 0.8610611984508859
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 43/300 |loss: 0.001205| train set 1.735x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 15
JOB test speedup 1.103509093626221
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 44/300 |loss: 0.001008| train set 1.757x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 16
JOB test speedup 1.0710919733331437
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 45/300 |loss: 0.001002| train set 1.762x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 17
JOB test speedup 0.8730855183240714
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 46/300 |loss: 0.001133| train set 1.794x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 18
JOB test speedup 0.8691301866108737
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 47/300 |loss: 0.001008| train set 1.772x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 19
JOB test speedup 1.4043157053716129
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 48/300 |loss: 0.000974| train set 1.791x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 20
JOB test speedup 1.3030914229566162
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 49/300 |loss: 0.000913| train set 1.788x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 21
JOB test speedup 1.3434614105376335
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 50/300 |loss: 0.001013| train set 1.791x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 22
JOB test speedup 1.090115148191466
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 51/300 |loss: 0.000898| train set 1.788x speedup, test set 4.026x speedup, val set 0.886x speedup, step: 23
JOB test speedup 1.410486776885814
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 52/300 |loss: 0.001095| train set 1.770x speedup, test set 1.774x speedup, val set 0.886x speedup, step: 24
JOB test speedup 1.0872814657841252
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 53/300 |loss: 0.000886| train set 1.794x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 25
JOB test speedup 1.5203858926758647
TPCH test speedup 1.9047776406699393
TPCH skew test speedup 1.799112408031845
Epoch 54/300 |loss: 0.001043| train set 1.790x speedup, test set 1.799x speedup, val set 0.886x speedup, step: 26
JOB test speedup 1.0422251725969145
TPCH test speedup 4.063586251191793
TPCH skew test speedup 4.025897149096412
Epoch 55/300 |loss: 0.001074| train set 1.795x speedup, test set 4.026x speedup, val set 0.880x speedup, step: 27
JOB test speedup 1.3086543291987056
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 56/300 |loss: 0.000868| train set 1.772x speedup, test set 1.746x speedup, val set 0.880x speedup, step: 28
JOB test speedup 0.8913046348955704
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 57/300 |loss: 0.000876| train set 1.796x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 29
JOB test speedup 2.1450259793200104
TPCH test speedup 1.9047776406699393
TPCH skew test speedup 1.799112408031845
Epoch 58/300 |loss: 0.000901| train set 1.797x speedup, test set 1.799x speedup, val set 0.888x speedup, step: 30
JOB test speedup 1.492237824401463
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7457390906134624
Epoch 59/300 |loss: 0.000910| train set 1.762x speedup, test set 1.746x speedup, val set 0.887x speedup, step: 31
JOB test speedup 0.8962455419977601
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 60/300 |loss: 0.000891| train set 1.761x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 32
JOB test speedup 0.8657860324645175
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 61/300 |loss: 0.000824| train set 1.796x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 33
JOB test speedup 0.8682078945661409
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 62/300 |loss: 0.000905| train set 1.774x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 34
JOB test speedup 1.360504094030334
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 63/300 |loss: 0.000844| train set 1.764x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 35
JOB test speedup 1.056753068494564
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 64/300 |loss: 0.000975| train set 1.795x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 36
JOB test speedup 1.0158461660721305
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 65/300 |loss: 0.000830| train set 1.795x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 37
JOB test speedup 0.8708848693845732
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 66/300 |loss: 0.000773| train set 1.794x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 38
JOB test speedup 0.8937161256129732
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 67/300 |loss: 0.000880| train set 1.792x speedup, test set 1.763x speedup, val set 0.880x speedup, step: 39
JOB test speedup 0.8962494605117952
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 68/300 |loss: 0.000754| train set 1.772x speedup, test set 1.774x speedup, val set 0.880x speedup, step: 40
JOB test speedup 0.8644538985305996
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7630453489720395
Epoch 69/300 |loss: 0.000891| train set 1.798x speedup, test set 1.763x speedup, val set 0.880x speedup, step: 41
JOB test speedup 0.8744257700393012
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 70/300 |loss: 0.000721| train set 1.796x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 42
JOB test speedup 0.9034648103251802
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 71/300 |loss: 0.000833| train set 1.739x speedup, test set 1.774x speedup, val set 0.876x speedup, step: 43
JOB test speedup 1.0372229297346953
TPCH test speedup 1.8238502427091503
TPCH skew test speedup 1.7551981626452058
Epoch 72/300 |loss: 0.000731| train set 1.795x speedup, test set 1.755x speedup, val set 0.888x speedup, step: 44
JOB test speedup 0.8720278884059484
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 73/300 |loss: 0.000973| train set 1.709x speedup, test set 1.774x speedup, val set 0.877x speedup, step: 45
JOB test speedup 1.1178910109534816
TPCH test speedup 1.8276023239622288
TPCH skew test speedup 1.7741754860160275
Epoch 74/300 |loss: 0.000855| train set 1.742x speedup, test set 1.774x speedup, val set 0.888x speedup, step: 1
early stopping at epoch 74
Training per epoch cost 2.905 s
Optimal speedup on JOB test set is 4.686x
Optimal speedup on tpch test set is 11.153x
Optimal speedup on tpch skew test set is 10.601x
========== JOB
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 6.143s, pg runtime 6.143s, speedup 1.000x
06, opt runtime 2.593s, model runtime 9.387s, pg runtime 8.283s, speedup 0.882x
07, opt runtime 2.046s, model runtime 5.879s, pg runtime 5.879s, speedup 1.000x
08, opt runtime 1.737s, model runtime 5.994s, pg runtime 5.994s, speedup 1.000x
09, opt runtime 2.324s, model runtime 10.605s, pg runtime 10.605s, speedup 1.000x
10, opt runtime 3.248s, model runtime 10.538s, pg runtime 10.538s, speedup 1.000x
11, opt runtime 0.294s, model runtime 0.317s, pg runtime 2.352s, speedup 7.417x
12, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
13, opt runtime 5.179s, model runtime 13.282s, pg runtime 10.685s, speedup 0.804x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 53.885s, pg runtime 53.885s, speedup 1.000x
16, opt runtime 1.876s, model runtime 5.928s, pg runtime 6.089s, speedup 1.027x
17, opt runtime 2.413s, model runtime 57.198s, pg runtime 57.198s, speedup 1.000x
18, opt runtime 0.953s, model runtime 2.298s, pg runtime 4.730s, speedup 2.058x
19, opt runtime 0.379s, model runtime 0.662s, pg runtime 3.645s, speedup 5.503x
20, opt runtime 0.626s, model runtime 1.091s, pg runtime 2.558s, speedup 2.346x
21, opt runtime 0.434s, model runtime 0.434s, pg runtime 0.434s, speedup 1.000x
22, opt runtime 3.136s, model runtime 5.620s, pg runtime 5.620s, speedup 1.000x
23, opt runtime 4.173s, model runtime 10.818s, pg runtime 8.279s, speedup 0.765x
24, opt runtime 0.332s, model runtime 0.332s, pg runtime 0.332s, speedup 1.000x
25, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
26, opt runtime 0.965s, model runtime 0.965s, pg runtime 0.965s, speedup 1.000x
========== TPCH
01, opt runtime 28.639s, model runtime 90.669s, pg runtime 91.784s, speedup 1.012x
02, opt runtime 29.763s, model runtime 89.249s, pg runtime 91.648s, speedup 1.027x
03, opt runtime 30.267s, model runtime 95.064s, pg runtime 100.885s, speedup 1.061x
04, opt runtime 29.286s, model runtime 93.826s, pg runtime 92.131s, speedup 0.982x
05, opt runtime 29.269s, model runtime 93.062s, pg runtime 91.296s, speedup 0.981x
06, opt runtime 29.502s, model runtime 110.289s, pg runtime 112.305s, speedup 1.018x
07, opt runtime 27.886s, model runtime 96.221s, pg runtime 97.629s, speedup 1.015x
08, opt runtime 30.705s, model runtime 83.708s, pg runtime 89.698s, speedup 1.072x
09, opt runtime 27.651s, model runtime 90.545s, pg runtime 91.255s, speedup 1.008x
10, opt runtime 33.637s, model runtime 91.493s, pg runtime 90.618s, speedup 0.990x
11, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
12, opt runtime 48.784s, model runtime 124.142s, pg runtime 78.349s, speedup 0.631x
13, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
14, opt runtime 47.812s, model runtime 125.507s, pg runtime 83.069s, speedup 0.662x
15, opt runtime 47.518s, model runtime 120.739s, pg runtime 75.736s, speedup 0.627x
16, opt runtime 48.067s, model runtime 125.085s, pg runtime 81.014s, speedup 0.648x
17, opt runtime 47.738s, model runtime 121.140s, pg runtime 76.021s, speedup 0.628x
18, opt runtime 47.804s, model runtime 120.974s, pg runtime 81.177s, speedup 0.671x
19, opt runtime 49.511s, model runtime 129.074s, pg runtime 87.329s, speedup 0.677x
20, opt runtime 51.276s, model runtime 124.765s, pg runtime 79.222s, speedup 0.635x
21, opt runtime 24.391s, model runtime 500.041s, pg runtime 601.866s, speedup 1.204x
22, opt runtime 24.079s, model runtime 319.497s, pg runtime 608.707s, speedup 1.905x
23, opt runtime 24.662s, model runtime 510.305s, pg runtime 613.999s, speedup 1.203x
24, opt runtime 24.459s, model runtime 564.126s, pg runtime 608.717s, speedup 1.079x
25, opt runtime 25.236s, model runtime 391.425s, pg runtime 601.756s, speedup 1.537x
26, opt runtime 25.363s, model runtime 412.017s, pg runtime 611.327s, speedup 1.484x
27, opt runtime 24.706s, model runtime 517.819s, pg runtime 610.808s, speedup 1.180x
28, opt runtime 25.075s, model runtime 449.868s, pg runtime 612.430s, speedup 1.361x
29, opt runtime 24.840s, model runtime 446.886s, pg runtime 626.529s, speedup 1.402x
30, opt runtime 24.920s, model runtime 321.831s, pg runtime 610.993s, speedup 1.898x
31, opt runtime 16.268s, model runtime 64.202s, pg runtime 432.766s, speedup 6.741x
32, opt runtime 15.120s, model runtime 62.890s, pg runtime 566.078s, speedup 9.001x
33, opt runtime 16.639s, model runtime 63.262s, pg runtime 462.544s, speedup 7.312x
34, opt runtime 16.280s, model runtime 65.389s, pg runtime 634.990s, speedup 9.711x
35, opt runtime 16.528s, model runtime 65.648s, pg runtime 620.762s, speedup 9.456x
36, opt runtime 18.690s, model runtime 65.943s, pg runtime 651.942s, speedup 9.886x
37, opt runtime 16.438s, model runtime 65.669s, pg runtime 546.887s, speedup 8.328x
38, opt runtime 16.138s, model runtime 65.836s, pg runtime 501.793s, speedup 7.622x
39, opt runtime 16.770s, model runtime 64.638s, pg runtime 594.754s, speedup 9.201x
40, opt runtime 16.305s, model runtime 62.435s, pg runtime 436.168s, speedup 6.986x
========== TPCH skew
01, opt runtime 29.063s, model runtime 92.970s, pg runtime 91.786s, speedup 0.987x
02, opt runtime 33.249s, model runtime 96.442s, pg runtime 103.551s, speedup 1.074x
03, opt runtime 33.759s, model runtime 89.036s, pg runtime 98.290s, speedup 1.104x
04, opt runtime 36.646s, model runtime 87.214s, pg runtime 98.171s, speedup 1.126x
05, opt runtime 32.482s, model runtime 112.209s, pg runtime 123.411s, speedup 1.100x
06, opt runtime 31.996s, model runtime 114.384s, pg runtime 120.854s, speedup 1.057x
07, opt runtime 30.778s, model runtime 93.529s, pg runtime 100.158s, speedup 1.071x
08, opt runtime 30.030s, model runtime 88.309s, pg runtime 85.930s, speedup 0.973x
09, opt runtime 28.776s, model runtime 86.008s, pg runtime 86.923s, speedup 1.011x
10, opt runtime 29.576s, model runtime 115.231s, pg runtime 113.059s, speedup 0.981x
11, opt runtime 53.915s, model runtime 130.925s, pg runtime 80.711s, speedup 0.616x
12, opt runtime 53.203s, model runtime 124.632s, pg runtime 79.156s, speedup 0.635x
13, opt runtime 51.456s, model runtime 120.725s, pg runtime 93.781s, speedup 0.777x
14, opt runtime 54.696s, model runtime 125.918s, pg runtime 98.172s, speedup 0.780x
15, opt runtime 51.200s, model runtime 122.391s, pg runtime 77.674s, speedup 0.635x
16, opt runtime 47.844s, model runtime 125.734s, pg runtime 80.007s, speedup 0.636x
17, opt runtime 54.335s, model runtime 125.771s, pg runtime 95.799s, speedup 0.762x
18, opt runtime 48.088s, model runtime 123.814s, pg runtime 77.369s, speedup 0.625x
19, opt runtime 52.382s, model runtime 128.364s, pg runtime 82.710s, speedup 0.644x
20, opt runtime 52.135s, model runtime 128.232s, pg runtime 102.039s, speedup 0.796x
21, opt runtime 24.737s, model runtime 540.923s, pg runtime 616.762s, speedup 1.140x
22, opt runtime 25.478s, model runtime 347.705s, pg runtime 642.079s, speedup 1.847x
23, opt runtime 24.016s, model runtime 517.232s, pg runtime 601.228s, speedup 1.162x
24, opt runtime 24.103s, model runtime 583.830s, pg runtime 616.889s, speedup 1.057x
25, opt runtime 24.136s, model runtime 384.925s, pg runtime 609.432s, speedup 1.583x
26, opt runtime 25.431s, model runtime 398.378s, pg runtime 625.988s, speedup 1.571x
27, opt runtime 24.451s, model runtime 520.208s, pg runtime 628.615s, speedup 1.208x
28, opt runtime 24.465s, model runtime 516.440s, pg runtime 644.779s, speedup 1.249x
29, opt runtime 25.152s, model runtime 418.845s, pg runtime 613.332s, speedup 1.464x
30, opt runtime 24.505s, model runtime 308.883s, pg runtime 621.574s, speedup 2.012x
31, opt runtime 16.756s, model runtime 61.933s, pg runtime 602.586s, speedup 9.730x
32, opt runtime 16.542s, model runtime 66.077s, pg runtime 461.957s, speedup 6.991x
33, opt runtime 16.136s, model runtime 63.985s, pg runtime 410.283s, speedup 6.412x
34, opt runtime 14.422s, model runtime 65.851s, pg runtime 497.542s, speedup 7.556x
35, opt runtime 15.980s, model runtime 66.163s, pg runtime 504.239s, speedup 7.621x
36, opt runtime 16.482s, model runtime 60.517s, pg runtime 622.915s, speedup 10.293x
37, opt runtime 16.301s, model runtime 63.339s, pg runtime 646.719s, speedup 10.210x
38, opt runtime 16.194s, model runtime 66.325s, pg runtime 439.255s, speedup 6.623x
39, opt runtime 16.149s, model runtime 64.290s, pg runtime 423.122s, speedup 6.582x
40, opt runtime 13.751s, model runtime 66.166s, pg runtime 434.625s, speedup 6.569x
====================
JOB best validation speedup epoch: 74, train speedup 1.742, test speedup 1.118, val speedup 0.888
TPCH best validation speedup epoch: 74, train speedup 1.742, test speedup 1.828, val speedup 0.888
TPCH Skew best validation speedup epoch: 74, train speedup 1.742, test speedup 1.774, val speedup 0.888
execution cost 0:04:57.166079
==================================================
