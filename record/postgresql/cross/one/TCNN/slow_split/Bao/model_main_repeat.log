all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.619952, and there are 12152 training samples
in channel 9
JOB test speedup 0.8332574965365315
TPCH test speedup 2.7008538715679307
TPCH skew test speedup 2.4919791006059993
Epoch 0/300 |loss: 0.030404| train set 2.230x speedup, test set 2.492x speedup, val set 2.187x speedup, step: 1
JOB test speedup 1.7782118783959584
TPCH test speedup 2.6574002196825117
TPCH skew test speedup 2.5859402215194427
Epoch 1/300 |loss: 0.011531| train set 2.467x speedup, test set 2.586x speedup, val set 2.446x speedup, step: 2
JOB test speedup 1.6380192951665835
TPCH test speedup 2.9631375311939974
TPCH skew test speedup 2.8548075407205884
Epoch 2/300 |loss: 0.008415| train set 2.729x speedup, test set 2.855x speedup, val set 2.859x speedup, step: 3
JOB test speedup 2.0257091272773136
TPCH test speedup 3.542412009672309
TPCH skew test speedup 3.103773805925222
Epoch 3/300 |loss: 0.006322| train set 3.209x speedup, test set 3.104x speedup, val set 3.824x speedup, step: 4
JOB test speedup 2.10697422596246
TPCH test speedup 3.5752093172179302
TPCH skew test speedup 3.4131782470281804
Epoch 4/300 |loss: 0.005631| train set 3.856x speedup, test set 3.413x speedup, val set 3.892x speedup, step: 1
JOB test speedup 1.791877096793326
TPCH test speedup 4.389417217752493
TPCH skew test speedup 4.112374731938995
Epoch 5/300 |loss: 0.005827| train set 3.687x speedup, test set 4.112x speedup, val set 4.441x speedup, step: 2
JOB test speedup 1.273574004906159
TPCH test speedup 4.3660216439384625
TPCH skew test speedup 4.073207894239466
Epoch 6/300 |loss: 0.004050| train set 4.578x speedup, test set 4.073x speedup, val set 4.980x speedup, step: 3
JOB test speedup 1.2534745267866005
TPCH test speedup 4.048028364924655
TPCH skew test speedup 3.8347792495991047
Epoch 7/300 |loss: 0.003750| train set 4.216x speedup, test set 3.835x speedup, val set 4.793x speedup, step: 4
JOB test speedup 0.7908500936824465
TPCH test speedup 4.156743594758693
TPCH skew test speedup 3.9067329832665574
Epoch 8/300 |loss: 0.003523| train set 4.432x speedup, test set 3.907x speedup, val set 4.972x speedup, step: 5
JOB test speedup 0.7266899111804384
TPCH test speedup 4.031179615770867
TPCH skew test speedup 3.6793594749520704
Epoch 9/300 |loss: 0.002884| train set 4.172x speedup, test set 3.679x speedup, val set 5.223x speedup, step: 1
JOB test speedup 0.7754851515379729
TPCH test speedup 4.378397921909314
TPCH skew test speedup 4.052544026122553
Epoch 10/300 |loss: 0.003021| train set 4.741x speedup, test set 4.053x speedup, val set 5.174x speedup, step: 2
JOB test speedup 0.7528271764313126
TPCH test speedup 4.3542471855760425
TPCH skew test speedup 4.020345242765013
Epoch 11/300 |loss: 0.002992| train set 4.788x speedup, test set 4.020x speedup, val set 5.196x speedup, step: 3
JOB test speedup 0.7878444733866227
TPCH test speedup 4.316701739393713
TPCH skew test speedup 4.018010899156635
Epoch 12/300 |loss: 0.002888| train set 4.995x speedup, test set 4.018x speedup, val set 5.240x speedup, step: 4
JOB test speedup 0.7547118818523227
TPCH test speedup 4.323257928765737
TPCH skew test speedup 3.994256438939708
Epoch 13/300 |loss: 0.002477| train set 4.819x speedup, test set 3.994x speedup, val set 5.159x speedup, step: 5
JOB test speedup 0.9539924623901933
TPCH test speedup 4.284759588476184
TPCH skew test speedup 3.9409946587765474
Epoch 14/300 |loss: 0.002392| train set 4.986x speedup, test set 3.941x speedup, val set 5.214x speedup, step: 6
JOB test speedup 0.9717863342856724
TPCH test speedup 4.24743179627859
TPCH skew test speedup 3.912405185793508
Epoch 15/300 |loss: 0.001957| train set 4.975x speedup, test set 3.912x speedup, val set 5.142x speedup, step: 7
JOB test speedup 0.9769792787431119
TPCH test speedup 4.285670172174391
TPCH skew test speedup 3.993349494645553
Epoch 16/300 |loss: 0.002250| train set 5.042x speedup, test set 3.993x speedup, val set 5.169x speedup, step: 8
JOB test speedup 0.9815635654807932
TPCH test speedup 4.32558785094445
TPCH skew test speedup 3.975093751193983
Epoch 17/300 |loss: 0.002179| train set 5.096x speedup, test set 3.975x speedup, val set 5.294x speedup, step: 9
JOB test speedup 0.7654029671930327
TPCH test speedup 4.274837148480505
TPCH skew test speedup 3.986117946208317
Epoch 18/300 |loss: 0.002024| train set 5.005x speedup, test set 3.986x speedup, val set 5.145x speedup, step: 10
JOB test speedup 0.9539414722551571
TPCH test speedup 4.350580582960196
TPCH skew test speedup 4.053657406031365
Epoch 19/300 |loss: 0.001642| train set 5.025x speedup, test set 4.054x speedup, val set 5.204x speedup, step: 11
JOB test speedup 0.9760089748317374
TPCH test speedup 4.39954735905457
TPCH skew test speedup 4.062283640418624
Epoch 20/300 |loss: 0.001781| train set 5.116x speedup, test set 4.062x speedup, val set 5.293x speedup, step: 12
JOB test speedup 0.9724905087671327
TPCH test speedup 4.216471631298013
TPCH skew test speedup 3.8867839013102157
Epoch 21/300 |loss: 0.001933| train set 5.058x speedup, test set 3.887x speedup, val set 5.204x speedup, step: 13
JOB test speedup 0.9749510670804957
TPCH test speedup 4.283782171447522
TPCH skew test speedup 3.9882246159372974
Epoch 22/300 |loss: 0.002222| train set 5.029x speedup, test set 3.988x speedup, val set 5.167x speedup, step: 14
JOB test speedup 0.9723520664899847
TPCH test speedup 4.248959648689368
TPCH skew test speedup 3.9143127394642137
Epoch 23/300 |loss: 0.001826| train set 5.088x speedup, test set 3.914x speedup, val set 5.229x speedup, step: 15
JOB test speedup 0.9448175690235006
TPCH test speedup 4.400077231729074
TPCH skew test speedup 4.0604883925646735
Epoch 24/300 |loss: 0.001754| train set 5.023x speedup, test set 4.060x speedup, val set 5.308x speedup, step: 1
JOB test speedup 0.9770445351263842
TPCH test speedup 4.231522052722531
TPCH skew test speedup 3.914752759162266
Epoch 25/300 |loss: 0.001441| train set 5.069x speedup, test set 3.915x speedup, val set 5.069x speedup, step: 2
JOB test speedup 0.9707773914533395
TPCH test speedup 4.244384290580521
TPCH skew test speedup 3.937525016532109
Epoch 26/300 |loss: 0.001685| train set 5.070x speedup, test set 3.938x speedup, val set 5.073x speedup, step: 3
JOB test speedup 0.9650791765669111
TPCH test speedup 4.326627223305438
TPCH skew test speedup 3.9757173659319904
Epoch 27/300 |loss: 0.001380| train set 5.078x speedup, test set 3.976x speedup, val set 5.177x speedup, step: 4
JOB test speedup 0.9683826229113399
TPCH test speedup 4.242428195897492
TPCH skew test speedup 3.9387515271720708
Epoch 28/300 |loss: 0.001308| train set 5.106x speedup, test set 3.939x speedup, val set 5.083x speedup, step: 5
JOB test speedup 0.9781288948780654
TPCH test speedup 4.282780841741381
TPCH skew test speedup 3.944496913206993
Epoch 29/300 |loss: 0.001243| train set 5.120x speedup, test set 3.944x speedup, val set 5.229x speedup, step: 6
JOB test speedup 1.3126234540077502
TPCH test speedup 4.350860092999427
TPCH skew test speedup 4.00543967531233
Epoch 30/300 |loss: 0.001380| train set 5.063x speedup, test set 4.005x speedup, val set 5.169x speedup, step: 7
JOB test speedup 0.9258716789610071
TPCH test speedup 4.250529570052381
TPCH skew test speedup 3.9412133166791
Epoch 31/300 |loss: 0.001173| train set 5.107x speedup, test set 3.941x speedup, val set 5.293x speedup, step: 8
JOB test speedup 1.2877404886635524
TPCH test speedup 4.235766108438163
TPCH skew test speedup 3.8957394563559657
Epoch 32/300 |loss: 0.001358| train set 4.962x speedup, test set 3.896x speedup, val set 4.966x speedup, step: 9
JOB test speedup 0.9657960407974208
TPCH test speedup 4.2887054271421565
TPCH skew test speedup 3.940568192716557
Epoch 33/300 |loss: 0.001476| train set 5.038x speedup, test set 3.941x speedup, val set 5.161x speedup, step: 10
JOB test speedup 1.3112815633103447
TPCH test speedup 4.322219468719055
TPCH skew test speedup 3.9732443984736796
Epoch 34/300 |loss: 0.001152| train set 5.115x speedup, test set 3.973x speedup, val set 5.169x speedup, step: 11
JOB test speedup 0.9880321272768966
TPCH test speedup 4.0066155332259195
TPCH skew test speedup 3.725297339188648
Epoch 35/300 |loss: 0.001053| train set 5.117x speedup, test set 3.725x speedup, val set 5.265x speedup, step: 12
JOB test speedup 1.311322292997868
TPCH test speedup 4.262615770394162
TPCH skew test speedup 3.9428386653685052
Epoch 36/300 |loss: 0.001214| train set 5.107x speedup, test set 3.943x speedup, val set 5.124x speedup, step: 13
JOB test speedup 1.2830772953030358
TPCH test speedup 4.016075545959922
TPCH skew test speedup 3.7441738290888518
Epoch 37/300 |loss: 0.001002| train set 5.050x speedup, test set 3.744x speedup, val set 5.164x speedup, step: 14
JOB test speedup 1.3122011439347905
TPCH test speedup 4.287090193167605
TPCH skew test speedup 3.9697413637027315
Epoch 38/300 |loss: 0.001119| train set 4.997x speedup, test set 3.970x speedup, val set 5.135x speedup, step: 15
JOB test speedup 1.3241103105186807
TPCH test speedup 4.005847774969904
TPCH skew test speedup 3.738121966365642
Epoch 39/300 |loss: 0.000954| train set 5.123x speedup, test set 3.738x speedup, val set 5.128x speedup, step: 16
JOB test speedup 1.3208857568153185
TPCH test speedup 4.351454393653659
TPCH skew test speedup 4.050599721893119
Epoch 40/300 |loss: 0.001037| train set 5.098x speedup, test set 4.051x speedup, val set 5.271x speedup, step: 17
JOB test speedup 1.30471285367139
TPCH test speedup 4.005261926233223
TPCH skew test speedup 3.730081236395998
Epoch 41/300 |loss: 0.000943| train set 5.035x speedup, test set 3.730x speedup, val set 5.095x speedup, step: 18
JOB test speedup 1.2842725119652185
TPCH test speedup 4.065384125843721
TPCH skew test speedup 3.8088398901433402
Epoch 42/300 |loss: 0.000889| train set 5.077x speedup, test set 3.809x speedup, val set 5.297x speedup, step: 19
JOB test speedup 1.3522740167712357
TPCH test speedup 4.352587779611346
TPCH skew test speedup 4.05173499778139
Epoch 43/300 |loss: 0.001009| train set 5.031x speedup, test set 4.052x speedup, val set 5.308x speedup, step: 20
JOB test speedup 1.3356888366692485
TPCH test speedup 4.278131364263435
TPCH skew test speedup 3.967654170153918
Epoch 44/300 |loss: 0.000843| train set 5.122x speedup, test set 3.968x speedup, val set 5.168x speedup, step: 21
JOB test speedup 0.9410732815709676
TPCH test speedup 4.058200676432828
TPCH skew test speedup 3.7609549486532097
Epoch 45/300 |loss: 0.000821| train set 5.091x speedup, test set 3.761x speedup, val set 5.178x speedup, step: 22
JOB test speedup 1.311063321039679
TPCH test speedup 4.320773707190818
TPCH skew test speedup 3.96881031624977
Epoch 46/300 |loss: 0.000805| train set 5.087x speedup, test set 3.969x speedup, val set 5.086x speedup, step: 23
JOB test speedup 1.316330934258121
TPCH test speedup 4.327290997397712
TPCH skew test speedup 4.024165517134009
Epoch 47/300 |loss: 0.000763| train set 5.131x speedup, test set 4.024x speedup, val set 5.295x speedup, step: 24
JOB test speedup 0.9375876869151811
TPCH test speedup 4.287325665594471
TPCH skew test speedup 3.9754838249867603
Epoch 48/300 |loss: 0.000633| train set 5.072x speedup, test set 3.975x speedup, val set 5.071x speedup, step: 25
JOB test speedup 0.9552213853343069
TPCH test speedup 3.963188493862574
TPCH skew test speedup 3.7001949543209767
Epoch 49/300 |loss: 0.000644| train set 5.100x speedup, test set 3.700x speedup, val set 5.147x speedup, step: 26
JOB test speedup 1.1565556264911867
TPCH test speedup 3.982106329207904
TPCH skew test speedup 3.713000911226227
Epoch 50/300 |loss: 0.000623| train set 5.067x speedup, test set 3.713x speedup, val set 4.957x speedup, step: 27
JOB test speedup 0.8760982059175421
TPCH test speedup 4.00814727564559
TPCH skew test speedup 3.7200086747179166
Epoch 51/300 |loss: 0.000619| train set 5.004x speedup, test set 3.720x speedup, val set 5.129x speedup, step: 28
JOB test speedup 0.986283586143327
TPCH test speedup 4.257422790719646
TPCH skew test speedup 3.9330715506198715
Epoch 52/300 |loss: 0.000580| train set 5.121x speedup, test set 3.933x speedup, val set 5.256x speedup, step: 29
JOB test speedup 0.948744412016904
TPCH test speedup 3.9914203001048114
TPCH skew test speedup 3.7241389536336387
Epoch 53/300 |loss: 0.000574| train set 5.115x speedup, test set 3.724x speedup, val set 5.145x speedup, step: 30
JOB test speedup 0.9436665361679497
TPCH test speedup 4.033086584837043
TPCH skew test speedup 3.735238511060661
Epoch 54/300 |loss: 0.000526| train set 5.119x speedup, test set 3.735x speedup, val set 5.086x speedup, step: 31
JOB test speedup 1.2644089370238052
TPCH test speedup 3.9985637944431205
TPCH skew test speedup 3.7311985469461093
Epoch 55/300 |loss: 0.000610| train set 5.103x speedup, test set 3.731x speedup, val set 5.113x speedup, step: 32
JOB test speedup 0.9398764345909933
TPCH test speedup 3.9618803818443475
TPCH skew test speedup 3.690174144592284
Epoch 56/300 |loss: 0.000705| train set 5.116x speedup, test set 3.690x speedup, val set 4.665x speedup, step: 33
JOB test speedup 0.9388013248853975
TPCH test speedup 4.259450397546768
TPCH skew test speedup 3.9236792861759904
Epoch 57/300 |loss: 0.000665| train set 5.104x speedup, test set 3.924x speedup, val set 5.274x speedup, step: 34
early stopping at epoch 57
Training per epoch cost 3.475 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.243s, pg runtime 0.207s, speedup 0.851x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.418s, pg runtime 0.354s, speedup 0.847x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.072s, pg runtime 0.089s, speedup 1.239x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.231s, pg runtime 0.157s, speedup 0.678x
29, opt runtime 0.158s, model runtime 0.172s, pg runtime 0.158s, speedup 0.921x
30, opt runtime 1.646s, model runtime 4.938s, pg runtime 4.855s, speedup 0.983x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.641s, pg runtime 1.438s, speedup 0.876x
20, opt runtime 1.428s, model runtime 1.764s, pg runtime 1.428s, speedup 0.810x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.600s, pg runtime 1.587s, speedup 0.992x
20, opt runtime 1.308s, model runtime 1.435s, pg runtime 1.528s, speedup 1.065x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.631s, pg runtime 7.675s, speedup 1.006x
28, opt runtime 7.312s, model runtime 7.596s, pg runtime 7.655s, speedup 1.008x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 24, train speedup 5.023, test speedup 0.945, val speedup 5.308
TPCH best validation speedup epoch: 24, train speedup 5.023, test speedup 4.400, val speedup 5.308
TPCH Skew best validation speedup epoch: 24, train speedup 5.023, test speedup 4.060, val speedup 5.308
execution cost 0:04:34.941039
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.659989, and there are 12152 training samples
in channel 9
JOB test speedup 0.8332574965365315
TPCH test speedup 2.7008538715679307
TPCH skew test speedup 2.4919791006059993
Epoch 0/300 |loss: 0.030404| train set 2.230x speedup, test set 2.492x speedup, val set 2.187x speedup, step: 1
JOB test speedup 1.7782118783959584
TPCH test speedup 2.6574002196825117
TPCH skew test speedup 2.5859402215194427
Epoch 1/300 |loss: 0.011531| train set 2.467x speedup, test set 2.586x speedup, val set 2.446x speedup, step: 2
JOB test speedup 1.6032347068281123
TPCH test speedup 2.9671356852209896
TPCH skew test speedup 2.8588587842813658
Epoch 2/300 |loss: 0.008403| train set 2.834x speedup, test set 2.859x speedup, val set 2.866x speedup, step: 3
JOB test speedup 2.0661141122782136
TPCH test speedup 3.32757145231818
TPCH skew test speedup 3.0363924460442666
Epoch 3/300 |loss: 0.006306| train set 3.485x speedup, test set 3.036x speedup, val set 3.517x speedup, step: 4
JOB test speedup 1.9252963004248964
TPCH test speedup 3.5300187840852435
TPCH skew test speedup 3.4076985144429686
Epoch 4/300 |loss: 0.005803| train set 3.909x speedup, test set 3.408x speedup, val set 3.786x speedup, step: 1
JOB test speedup 1.8081673656832715
TPCH test speedup 4.345339134939177
TPCH skew test speedup 3.824500698341926
Epoch 5/300 |loss: 0.005789| train set 3.592x speedup, test set 3.825x speedup, val set 4.297x speedup, step: 2
JOB test speedup 1.231293907638178
TPCH test speedup 4.255387474465654
TPCH skew test speedup 3.525612588620036
Epoch 6/300 |loss: 0.004096| train set 4.702x speedup, test set 3.526x speedup, val set 5.105x speedup, step: 3
JOB test speedup 1.3168181558916368
TPCH test speedup 3.9998988722494375
TPCH skew test speedup 3.8271774759520625
Epoch 7/300 |loss: 0.003710| train set 4.282x speedup, test set 3.827x speedup, val set 4.755x speedup, step: 4
JOB test speedup 1.2538495826881297
TPCH test speedup 4.1790346334563635
TPCH skew test speedup 3.8792537957644355
Epoch 8/300 |loss: 0.003490| train set 4.866x speedup, test set 3.879x speedup, val set 5.250x speedup, step: 5
JOB test speedup 0.7361989922585669
TPCH test speedup 4.349213129281417
TPCH skew test speedup 4.0199082021873025
Epoch 9/300 |loss: 0.002875| train set 5.003x speedup, test set 4.020x speedup, val set 5.244x speedup, step: 1
JOB test speedup 0.9698927601382549
TPCH test speedup 4.314865080147116
TPCH skew test speedup 3.985167036928879
Epoch 10/300 |loss: 0.002854| train set 4.900x speedup, test set 3.985x speedup, val set 5.198x speedup, step: 2
JOB test speedup 0.7493936443551031
TPCH test speedup 4.399186874616373
TPCH skew test speedup 3.604110045076897
Epoch 11/300 |loss: 0.002828| train set 4.966x speedup, test set 3.604x speedup, val set 5.290x speedup, step: 3
JOB test speedup 1.9033877260224275
TPCH test speedup 4.315674723995654
TPCH skew test speedup 4.012609006097391
Epoch 12/300 |loss: 0.002934| train set 4.993x speedup, test set 4.013x speedup, val set 5.200x speedup, step: 4
JOB test speedup 0.9448164728464192
TPCH test speedup 4.315857201195178
TPCH skew test speedup 3.9937052118094893
Epoch 13/300 |loss: 0.002503| train set 5.001x speedup, test set 3.994x speedup, val set 5.167x speedup, step: 5
JOB test speedup 0.9306891003435174
TPCH test speedup 4.401901723109045
TPCH skew test speedup 4.062074318241184
Epoch 14/300 |loss: 0.002405| train set 5.076x speedup, test set 4.062x speedup, val set 5.325x speedup, step: 1
JOB test speedup 0.927054950303974
TPCH test speedup 4.351034094030766
TPCH skew test speedup 4.031871481013169
Epoch 15/300 |loss: 0.001969| train set 5.062x speedup, test set 4.032x speedup, val set 5.232x speedup, step: 2
JOB test speedup 0.9473922678396482
TPCH test speedup 4.244165966224617
TPCH skew test speedup 3.9138984466975884
Epoch 16/300 |loss: 0.002298| train set 4.979x speedup, test set 3.914x speedup, val set 5.137x speedup, step: 3
JOB test speedup 0.9654768969463852
TPCH test speedup 4.400677834738659
TPCH skew test speedup 4.060143920323722
Epoch 17/300 |loss: 0.002193| train set 5.079x speedup, test set 4.060x speedup, val set 5.236x speedup, step: 4
JOB test speedup 0.9631964779359677
TPCH test speedup 4.361220066094389
TPCH skew test speedup 4.059900355625383
Epoch 18/300 |loss: 0.002034| train set 4.916x speedup, test set 4.060x speedup, val set 5.313x speedup, step: 5
JOB test speedup 1.9207820099835058
TPCH test speedup 4.398654128618087
TPCH skew test speedup 4.064216074018888
Epoch 19/300 |loss: 0.001746| train set 5.118x speedup, test set 4.064x speedup, val set 5.309x speedup, step: 6
JOB test speedup 0.9285737574836157
TPCH test speedup 4.340320494084805
TPCH skew test speedup 4.011627477785006
Epoch 20/300 |loss: 0.001795| train set 5.029x speedup, test set 4.012x speedup, val set 5.237x speedup, step: 7
JOB test speedup 0.943205114002039
TPCH test speedup 4.384384168887907
TPCH skew test speedup 4.0637674173600296
Epoch 21/300 |loss: 0.002028| train set 5.098x speedup, test set 4.064x speedup, val set 5.286x speedup, step: 8
JOB test speedup 0.9588640206987582
TPCH test speedup 4.27789617310623
TPCH skew test speedup 3.989968684928975
Epoch 22/300 |loss: 0.001918| train set 4.900x speedup, test set 3.990x speedup, val set 5.130x speedup, step: 9
JOB test speedup 0.9704030953467674
TPCH test speedup 4.360824056710099
TPCH skew test speedup 4.029489150690244
Epoch 23/300 |loss: 0.001739| train set 5.089x speedup, test set 4.029x speedup, val set 5.233x speedup, step: 10
JOB test speedup 0.8691036305576781
TPCH test speedup 4.358571887106632
TPCH skew test speedup 4.02583367299668
Epoch 24/300 |loss: 0.001671| train set 4.367x speedup, test set 4.026x speedup, val set 5.232x speedup, step: 11
JOB test speedup 0.960032376402449
TPCH test speedup 4.3111003970070945
TPCH skew test speedup 3.9495582819231627
Epoch 25/300 |loss: 0.001440| train set 5.105x speedup, test set 3.950x speedup, val set 5.257x speedup, step: 12
JOB test speedup 0.9462210148932545
TPCH test speedup 4.352960148005501
TPCH skew test speedup 4.030610628820687
Epoch 26/300 |loss: 0.001755| train set 5.008x speedup, test set 4.031x speedup, val set 5.205x speedup, step: 13
JOB test speedup 0.9591701765501852
TPCH test speedup 4.300851981990601
TPCH skew test speedup 3.955657562514934
Epoch 27/300 |loss: 0.001345| train set 5.087x speedup, test set 3.956x speedup, val set 5.181x speedup, step: 14
JOB test speedup 1.315912964408148
TPCH test speedup 4.245933728579866
TPCH skew test speedup 3.91630147452634
Epoch 28/300 |loss: 0.001286| train set 5.006x speedup, test set 3.916x speedup, val set 5.152x speedup, step: 15
JOB test speedup 1.276939192521041
TPCH test speedup 4.2902139505683206
TPCH skew test speedup 3.9444238707042567
Epoch 29/300 |loss: 0.001192| train set 5.087x speedup, test set 3.944x speedup, val set 5.101x speedup, step: 16
JOB test speedup 1.350466479880104
TPCH test speedup 4.325646181398132
TPCH skew test speedup 4.014147734393806
Epoch 30/300 |loss: 0.001182| train set 5.126x speedup, test set 4.014x speedup, val set 5.235x speedup, step: 17
JOB test speedup 0.9334144731264822
TPCH test speedup 4.3002755122043785
TPCH skew test speedup 3.9570294771253653
Epoch 31/300 |loss: 0.001127| train set 5.084x speedup, test set 3.957x speedup, val set 5.206x speedup, step: 18
JOB test speedup 1.312623614081429
TPCH test speedup 3.980667247013391
TPCH skew test speedup 3.6864238003501137
Epoch 32/300 |loss: 0.001243| train set 4.980x speedup, test set 3.686x speedup, val set 5.005x speedup, step: 19
JOB test speedup 1.2978382583002204
TPCH test speedup 4.365005427652702
TPCH skew test speedup 4.031830043136006
Epoch 33/300 |loss: 0.001353| train set 5.068x speedup, test set 4.032x speedup, val set 5.192x speedup, step: 20
JOB test speedup 0.959946364846661
TPCH test speedup 4.358816441887402
TPCH skew test speedup 4.0598676650087056
Epoch 34/300 |loss: 0.000936| train set 5.123x speedup, test set 4.060x speedup, val set 5.278x speedup, step: 21
JOB test speedup 0.8984908997143269
TPCH test speedup 4.284324054162074
TPCH skew test speedup 3.932800941418558
Epoch 35/300 |loss: 0.000970| train set 5.127x speedup, test set 3.933x speedup, val set 5.124x speedup, step: 22
JOB test speedup 1.3177765009763025
TPCH test speedup 4.305367233994746
TPCH skew test speedup 3.9513382116461178
Epoch 36/300 |loss: 0.001077| train set 5.096x speedup, test set 3.951x speedup, val set 5.222x speedup, step: 23
JOB test speedup 1.3687359788888047
TPCH test speedup 4.311012821941873
TPCH skew test speedup 3.953710029556253
Epoch 37/300 |loss: 0.000981| train set 5.120x speedup, test set 3.954x speedup, val set 5.085x speedup, step: 24
JOB test speedup 1.2807516362843603
TPCH test speedup 4.386628285429766
TPCH skew test speedup 4.037194681518634
Epoch 38/300 |loss: 0.001045| train set 5.098x speedup, test set 4.037x speedup, val set 5.220x speedup, step: 25
JOB test speedup 1.2993794962123624
TPCH test speedup 4.284750010824488
TPCH skew test speedup 3.932927985690821
Epoch 39/300 |loss: 0.000784| train set 5.129x speedup, test set 3.933x speedup, val set 5.220x speedup, step: 26
JOB test speedup 1.1596620057939306
TPCH test speedup 4.343404999613033
TPCH skew test speedup 4.000028492274788
Epoch 40/300 |loss: 0.000744| train set 5.121x speedup, test set 4.000x speedup, val set 5.200x speedup, step: 27
JOB test speedup 1.176428436799638
TPCH test speedup 4.2871054844725895
TPCH skew test speedup 3.9367048559118794
Epoch 41/300 |loss: 0.000750| train set 5.126x speedup, test set 3.937x speedup, val set 5.262x speedup, step: 28
JOB test speedup 1.2839463006082434
TPCH test speedup 4.357323733866958
TPCH skew test speedup 4.023811775440531
Epoch 42/300 |loss: 0.000703| train set 5.122x speedup, test set 4.024x speedup, val set 5.230x speedup, step: 29
JOB test speedup 1.3108403020597732
TPCH test speedup 4.175646209039218
TPCH skew test speedup 3.8448547264052664
Epoch 43/300 |loss: 0.000752| train set 5.066x speedup, test set 3.845x speedup, val set 5.131x speedup, step: 30
JOB test speedup 0.9788848290294008
TPCH test speedup 4.3016925912236985
TPCH skew test speedup 3.9603577206860083
Epoch 44/300 |loss: 0.000638| train set 5.119x speedup, test set 3.960x speedup, val set 5.033x speedup, step: 31
JOB test speedup 1.3260687789519052
TPCH test speedup 4.30910629527148
TPCH skew test speedup 3.9734600865527394
Epoch 45/300 |loss: 0.000852| train set 5.054x speedup, test set 3.973x speedup, val set 5.107x speedup, step: 32
JOB test speedup 1.1870761291536576
TPCH test speedup 4.217720868792138
TPCH skew test speedup 3.8918564082345117
Epoch 46/300 |loss: 0.000827| train set 5.133x speedup, test set 3.892x speedup, val set 5.025x speedup, step: 33
JOB test speedup 0.8937919453938226
TPCH test speedup 4.314408707253657
TPCH skew test speedup 3.9794956491200706
Epoch 47/300 |loss: 0.000681| train set 5.030x speedup, test set 3.979x speedup, val set 5.294x speedup, step: 34
JOB test speedup 1.0849437877149983
TPCH test speedup 4.401901723109045
TPCH skew test speedup 4.062074318241184
Epoch 48/300 |loss: 0.000616| train set 5.108x speedup, test set 4.062x speedup, val set 5.276x speedup, step: 35
JOB test speedup 1.1825217003032855
TPCH test speedup 4.359677885265223
TPCH skew test speedup 4.027283315410641
Epoch 49/300 |loss: 0.000690| train set 5.131x speedup, test set 4.027x speedup, val set 4.951x speedup, step: 36
JOB test speedup 1.1970363821696774
TPCH test speedup 4.289112811243389
TPCH skew test speedup 3.943347926554964
Epoch 50/300 |loss: 0.000646| train set 5.096x speedup, test set 3.943x speedup, val set 4.810x speedup, step: 37
JOB test speedup 1.2923261148690213
TPCH test speedup 4.22319325277
TPCH skew test speedup 3.8956790563530137
Epoch 51/300 |loss: 0.000590| train set 5.085x speedup, test set 3.896x speedup, val set 5.209x speedup, step: 38
JOB test speedup 0.9013716318041249
TPCH test speedup 4.340497194913923
TPCH skew test speedup 4.014147734393806
Epoch 52/300 |loss: 0.000504| train set 5.130x speedup, test set 4.014x speedup, val set 5.300x speedup, step: 39
JOB test speedup 1.3104278412980437
TPCH test speedup 4.226423844784449
TPCH skew test speedup 3.9086652127280694
Epoch 53/300 |loss: 0.000624| train set 5.119x speedup, test set 3.909x speedup, val set 4.892x speedup, step: 40
JOB test speedup 0.9848109224806724
TPCH test speedup 4.218709044007404
TPCH skew test speedup 3.8924541778125463
Epoch 54/300 |loss: 0.000658| train set 5.121x speedup, test set 3.892x speedup, val set 4.876x speedup, step: 41
JOB test speedup 0.923213500536721
TPCH test speedup 4.22319325277
TPCH skew test speedup 3.8956790563530137
Epoch 55/300 |loss: 0.000670| train set 5.123x speedup, test set 3.896x speedup, val set 4.948x speedup, step: 42
JOB test speedup 0.8866849148063015
TPCH test speedup 3.9890506072349106
TPCH skew test speedup 3.6792196984655106
Epoch 56/300 |loss: 0.000604| train set 5.022x speedup, test set 3.679x speedup, val set 5.276x speedup, step: 43
JOB test speedup 1.283812396528756
TPCH test speedup 4.3378006696088915
TPCH skew test speedup 4.0106937236953595
Epoch 57/300 |loss: 0.000600| train set 5.124x speedup, test set 4.011x speedup, val set 5.220x speedup, step: 44
JOB test speedup 1.2159298291896523
TPCH test speedup 4.126975333247409
TPCH skew test speedup 3.8345868439122555
Epoch 58/300 |loss: 0.000462| train set 5.109x speedup, test set 3.835x speedup, val set 5.323x speedup, step: 45
JOB test speedup 1.2109745216262573
TPCH test speedup 4.213783417101008
TPCH skew test speedup 3.8873115802651315
Epoch 59/300 |loss: 0.000546| train set 5.104x speedup, test set 3.887x speedup, val set 5.288x speedup, step: 46
JOB test speedup 1.2143774511866952
TPCH test speedup 4.397579866903101
TPCH skew test speedup 4.063564389466194
Epoch 60/300 |loss: 0.000577| train set 5.109x speedup, test set 4.064x speedup, val set 5.001x speedup, step: 47
JOB test speedup 1.190448968903042
TPCH test speedup 4.286079802130933
TPCH skew test speedup 3.945280265775043
Epoch 61/300 |loss: 0.000519| train set 5.128x speedup, test set 3.945x speedup, val set 5.154x speedup, step: 48
early stopping at epoch 61
Training per epoch cost 3.558 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.084s, pg runtime 0.081s, speedup 0.961x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.238s, pg runtime 0.207s, speedup 0.868x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.392s, pg runtime 0.354s, speedup 0.901x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.068s, pg runtime 0.089s, speedup 1.309x
21, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.433s, pg runtime 0.389s, speedup 0.898x
24, opt runtime 2.719s, model runtime 4.408s, pg runtime 3.112s, speedup 0.706x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.179s, pg runtime 0.157s, speedup 0.875x
29, opt runtime 0.158s, model runtime 0.214s, pg runtime 0.158s, speedup 0.739x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.398s, pg runtime 1.438s, speedup 1.028x
20, opt runtime 1.428s, model runtime 1.645s, pg runtime 1.428s, speedup 0.868x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.308s, model runtime 1.308s, pg runtime 1.528s, speedup 1.168x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.631s, pg runtime 7.675s, speedup 1.006x
28, opt runtime 7.312s, model runtime 7.596s, pg runtime 7.655s, speedup 1.008x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 14, train speedup 5.076, test speedup 0.931, val speedup 5.325
TPCH best validation speedup epoch: 14, train speedup 5.076, test speedup 4.402, val speedup 5.325
TPCH Skew best validation speedup epoch: 14, train speedup 5.076, test speedup 4.062, val speedup 5.325
execution cost 0:05:00.869929
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.596164, and there are 12152 training samples
in channel 9
JOB test speedup 0.8332574965365315
TPCH test speedup 2.7008538715679307
TPCH skew test speedup 2.4919791006059993
Epoch 0/300 |loss: 0.030404| train set 2.230x speedup, test set 2.492x speedup, val set 2.187x speedup, step: 1
JOB test speedup 1.7782118783959584
TPCH test speedup 2.6574002196825117
TPCH skew test speedup 2.5859402215194427
Epoch 1/300 |loss: 0.011531| train set 2.467x speedup, test set 2.586x speedup, val set 2.446x speedup, step: 2
JOB test speedup 1.6032644465937633
TPCH test speedup 2.9965455623968
TPCH skew test speedup 2.8239412932512646
Epoch 2/300 |loss: 0.008398| train set 2.874x speedup, test set 2.824x speedup, val set 2.900x speedup, step: 3
JOB test speedup 2.0297169009597296
TPCH test speedup 3.42024889783438
TPCH skew test speedup 3.107166632255112
Epoch 3/300 |loss: 0.006319| train set 3.551x speedup, test set 3.107x speedup, val set 3.705x speedup, step: 4
JOB test speedup 1.9762105072202656
TPCH test speedup 3.667284233164213
TPCH skew test speedup 3.3354571886193627
Epoch 4/300 |loss: 0.005702| train set 3.552x speedup, test set 3.335x speedup, val set 3.541x speedup, step: 1
JOB test speedup 1.9656927878777026
TPCH test speedup 4.123669296095187
TPCH skew test speedup 3.817168331008974
Epoch 5/300 |loss: 0.005885| train set 3.762x speedup, test set 3.817x speedup, val set 4.083x speedup, step: 2
JOB test speedup 1.828258294064466
TPCH test speedup 4.3014998863400855
TPCH skew test speedup 4.022161717095263
Epoch 6/300 |loss: 0.004007| train set 4.686x speedup, test set 4.022x speedup, val set 5.115x speedup, step: 3
JOB test speedup 1.2978681118843134
TPCH test speedup 4.318367712461449
TPCH skew test speedup 4.015730739843179
Epoch 7/300 |loss: 0.003719| train set 4.400x speedup, test set 4.016x speedup, val set 5.214x speedup, step: 4
JOB test speedup 1.271659002362754
TPCH test speedup 4.299495594862877
TPCH skew test speedup 3.759857821651733
Epoch 8/300 |loss: 0.003476| train set 4.792x speedup, test set 3.760x speedup, val set 5.126x speedup, step: 5
JOB test speedup 0.7375365149135279
TPCH test speedup 4.349213129281417
TPCH skew test speedup 4.0199082021873025
Epoch 9/300 |loss: 0.002904| train set 4.948x speedup, test set 4.020x speedup, val set 5.238x speedup, step: 1
JOB test speedup 0.7603271252834125
TPCH test speedup 4.399219579323268
TPCH skew test speedup 4.054162673262347
Epoch 10/300 |loss: 0.002884| train set 4.984x speedup, test set 4.054x speedup, val set 5.216x speedup, step: 2
JOB test speedup 0.7544562450333197
TPCH test speedup 4.356964203481424
TPCH skew test speedup 4.023815904440817
Epoch 11/300 |loss: 0.002882| train set 4.866x speedup, test set 4.024x speedup, val set 5.248x speedup, step: 3
JOB test speedup 1.9455515894274464
TPCH test speedup 4.310721834350888
TPCH skew test speedup 4.016458149975835
Epoch 12/300 |loss: 0.002813| train set 5.013x speedup, test set 4.016x speedup, val set 5.209x speedup, step: 4
JOB test speedup 0.9734627243376032
TPCH test speedup 4.351923866435392
TPCH skew test speedup 4.023378109006486
Epoch 13/300 |loss: 0.002545| train set 4.653x speedup, test set 4.023x speedup, val set 5.239x speedup, step: 5
JOB test speedup 0.98912525032754
TPCH test speedup 4.355828537489798
TPCH skew test speedup 4.022696218067342
Epoch 14/300 |loss: 0.002441| train set 5.002x speedup, test set 4.023x speedup, val set 5.305x speedup, step: 1
JOB test speedup 0.9553298566964736
TPCH test speedup 4.230435051578394
TPCH skew test speedup 3.9126342911845646
Epoch 15/300 |loss: 0.001947| train set 5.043x speedup, test set 3.913x speedup, val set 5.131x speedup, step: 2
JOB test speedup 0.8922747745771114
TPCH test speedup 4.317714076587781
TPCH skew test speedup 3.99522357350969
Epoch 16/300 |loss: 0.002134| train set 4.971x speedup, test set 3.995x speedup, val set 5.220x speedup, step: 3
JOB test speedup 0.9657893606154931
TPCH test speedup 4.323061136701131
TPCH skew test speedup 3.974505593771019
Epoch 17/300 |loss: 0.002150| train set 5.120x speedup, test set 3.975x speedup, val set 5.169x speedup, step: 4
JOB test speedup 1.0038609850005378
TPCH test speedup 4.36381896607843
TPCH skew test speedup 4.059206811655855
Epoch 18/300 |loss: 0.002035| train set 5.080x speedup, test set 4.059x speedup, val set 5.289x speedup, step: 5
JOB test speedup 0.971872980060987
TPCH test speedup 4.360958847817625
TPCH skew test speedup 4.032336615078673
Epoch 19/300 |loss: 0.001738| train set 4.944x speedup, test set 4.032x speedup, val set 5.199x speedup, step: 6
JOB test speedup 0.8668228630006173
TPCH test speedup 4.287317874354312
TPCH skew test speedup 3.9501297473324852
Epoch 20/300 |loss: 0.001739| train set 5.032x speedup, test set 3.950x speedup, val set 5.300x speedup, step: 7
JOB test speedup 1.0059683129254935
TPCH test speedup 4.242949937304733
TPCH skew test speedup 3.9125257931187716
Epoch 21/300 |loss: 0.001961| train set 5.090x speedup, test set 3.913x speedup, val set 5.284x speedup, step: 8
JOB test speedup 1.0108450214225184
TPCH test speedup 4.130451317904375
TPCH skew test speedup 3.760493207720683
Epoch 22/300 |loss: 0.001984| train set 4.962x speedup, test set 3.760x speedup, val set 4.823x speedup, step: 9
JOB test speedup 1.012146914203485
TPCH test speedup 4.317714076587781
TPCH skew test speedup 3.99522357350969
Epoch 23/300 |loss: 0.001893| train set 4.705x speedup, test set 3.995x speedup, val set 4.884x speedup, step: 10
JOB test speedup 0.908497813520875
TPCH test speedup 4.37770184233156
TPCH skew test speedup 4.0386387823118834
Epoch 24/300 |loss: 0.001725| train set 5.097x speedup, test set 4.039x speedup, val set 5.325x speedup, step: 1
JOB test speedup 1.0128674470876318
TPCH test speedup 4.061401092394532
TPCH skew test speedup 3.758738666922323
Epoch 25/300 |loss: 0.001511| train set 5.027x speedup, test set 3.759x speedup, val set 5.164x speedup, step: 2
JOB test speedup 0.9660801238279434
TPCH test speedup 4.02468965347791
TPCH skew test speedup 3.731488126877827
Epoch 26/300 |loss: 0.001783| train set 5.056x speedup, test set 3.731x speedup, val set 5.069x speedup, step: 3
JOB test speedup 0.9641779037693184
TPCH test speedup 4.365509448286571
TPCH skew test speedup 4.030183456822371
Epoch 27/300 |loss: 0.001423| train set 5.033x speedup, test set 4.030x speedup, val set 5.228x speedup, step: 4
JOB test speedup 0.9709298631444789
TPCH test speedup 4.019694102767554
TPCH skew test speedup 3.7270987909635855
Epoch 28/300 |loss: 0.001370| train set 4.992x speedup, test set 3.727x speedup, val set 5.070x speedup, step: 5
JOB test speedup 0.948087152969535
TPCH test speedup 4.02468965347791
TPCH skew test speedup 3.731488126877827
Epoch 29/300 |loss: 0.001191| train set 5.086x speedup, test set 3.731x speedup, val set 5.258x speedup, step: 6
JOB test speedup 0.9403689064905948
TPCH test speedup 4.06337307361063
TPCH skew test speedup 3.807157787323499
Epoch 30/300 |loss: 0.001213| train set 5.037x speedup, test set 3.807x speedup, val set 5.200x speedup, step: 7
JOB test speedup 0.9742225464640168
TPCH test speedup 3.9223383881517897
TPCH skew test speedup 3.6722814919207796
Epoch 31/300 |loss: 0.001155| train set 5.056x speedup, test set 3.672x speedup, val set 4.966x speedup, step: 8
JOB test speedup 0.9913360154282469
TPCH test speedup 4.053715302348421
TPCH skew test speedup 3.756066895453216
Epoch 32/300 |loss: 0.001408| train set 5.023x speedup, test set 3.756x speedup, val set 4.747x speedup, step: 9
JOB test speedup 0.9739206870631717
TPCH test speedup 4.057462127209013
TPCH skew test speedup 3.7606114822517487
Epoch 33/300 |loss: 0.001448| train set 5.119x speedup, test set 3.761x speedup, val set 4.735x speedup, step: 10
JOB test speedup 0.9027756150906469
TPCH test speedup 4.0575329907659325
TPCH skew test speedup 3.761031750981057
Epoch 34/300 |loss: 0.001038| train set 5.109x speedup, test set 3.761x speedup, val set 5.165x speedup, step: 11
JOB test speedup 0.9759588025903053
TPCH test speedup 4.026093467655559
TPCH skew test speedup 3.7346753969016007
Epoch 35/300 |loss: 0.001061| train set 5.109x speedup, test set 3.735x speedup, val set 4.656x speedup, step: 12
JOB test speedup 0.9690326275996612
TPCH test speedup 4.055415590414021
TPCH skew test speedup 3.758845114345733
Epoch 36/300 |loss: 0.001209| train set 5.102x speedup, test set 3.759x speedup, val set 5.080x speedup, step: 13
JOB test speedup 1.347444394897203
TPCH test speedup 4.0584475220006055
TPCH skew test speedup 3.7615900051171445
Epoch 37/300 |loss: 0.000989| train set 5.123x speedup, test set 3.762x speedup, val set 5.324x speedup, step: 14
JOB test speedup 1.3441333985591046
TPCH test speedup 4.0584475220006055
TPCH skew test speedup 3.7615900051171445
Epoch 38/300 |loss: 0.001119| train set 5.097x speedup, test set 3.762x speedup, val set 4.962x speedup, step: 15
JOB test speedup 1.3069932079599278
TPCH test speedup 4.019076043543014
TPCH skew test speedup 3.7258823137763524
Epoch 39/300 |loss: 0.000856| train set 5.125x speedup, test set 3.726x speedup, val set 5.145x speedup, step: 16
JOB test speedup 1.19920302646611
TPCH test speedup 4.024841269201467
TPCH skew test speedup 3.7585689387649324
Epoch 40/300 |loss: 0.000885| train set 5.117x speedup, test set 3.759x speedup, val set 5.055x speedup, step: 17
JOB test speedup 1.1553447501882033
TPCH test speedup 4.0584475220006055
TPCH skew test speedup 3.7615900051171445
Epoch 41/300 |loss: 0.000872| train set 5.042x speedup, test set 3.762x speedup, val set 4.714x speedup, step: 18
JOB test speedup 1.2637361414297392
TPCH test speedup 4.050971175988511
TPCH skew test speedup 3.754579463478068
Epoch 42/300 |loss: 0.000730| train set 5.068x speedup, test set 3.755x speedup, val set 4.708x speedup, step: 19
JOB test speedup 1.3147529388062515
TPCH test speedup 3.777979265856863
TPCH skew test speedup 3.585176690741799
Epoch 43/300 |loss: 0.000820| train set 5.004x speedup, test set 3.585x speedup, val set 4.969x speedup, step: 20
JOB test speedup 1.295097155633244
TPCH test speedup 4.018454187132895
TPCH skew test speedup 3.752543465439694
Epoch 44/300 |loss: 0.000860| train set 5.124x speedup, test set 3.753x speedup, val set 4.694x speedup, step: 21
JOB test speedup 1.2629859401232206
TPCH test speedup 4.056832400077059
TPCH skew test speedup 3.759373034123375
Epoch 45/300 |loss: 0.000935| train set 5.107x speedup, test set 3.759x speedup, val set 4.713x speedup, step: 22
JOB test speedup 1.103061468680837
TPCH test speedup 4.0584475220006055
TPCH skew test speedup 3.7615900051171445
Epoch 46/300 |loss: 0.001041| train set 5.110x speedup, test set 3.762x speedup, val set 4.710x speedup, step: 23
JOB test speedup 1.248748968314286
TPCH test speedup 3.851344316616413
TPCH skew test speedup 3.6590371606706005
Epoch 47/300 |loss: 0.000710| train set 5.130x speedup, test set 3.659x speedup, val set 5.074x speedup, step: 24
JOB test speedup 1.1168831133676747
TPCH test speedup 4.055847789340441
TPCH skew test speedup 3.7583956641936784
Epoch 48/300 |loss: 0.000704| train set 5.046x speedup, test set 3.758x speedup, val set 5.175x speedup, step: 25
JOB test speedup 1.250775338184545
TPCH test speedup 3.8891435146773237
TPCH skew test speedup 3.6676008028269083
Epoch 49/300 |loss: 0.000671| train set 5.124x speedup, test set 3.668x speedup, val set 5.148x speedup, step: 26
JOB test speedup 1.247054690973699
TPCH test speedup 3.85500148366531
TPCH skew test speedup 3.630283888590478
Epoch 50/300 |loss: 0.000699| train set 5.069x speedup, test set 3.630x speedup, val set 4.402x speedup, step: 27
JOB test speedup 1.2378092204725597
TPCH test speedup 3.888065321994148
TPCH skew test speedup 3.6676379553811813
Epoch 51/300 |loss: 0.000640| train set 5.082x speedup, test set 3.668x speedup, val set 4.464x speedup, step: 28
JOB test speedup 1.2859089927623661
TPCH test speedup 3.881203013817895
TPCH skew test speedup 3.6609729302531138
Epoch 52/300 |loss: 0.000587| train set 5.114x speedup, test set 3.661x speedup, val set 4.643x speedup, step: 29
JOB test speedup 1.2696058227546716
TPCH test speedup 3.881203013817895
TPCH skew test speedup 3.6609729302531138
Epoch 53/300 |loss: 0.000726| train set 5.111x speedup, test set 3.661x speedup, val set 4.917x speedup, step: 30
JOB test speedup 1.2235349553844208
TPCH test speedup 4.0499894079411485
TPCH skew test speedup 3.753604584121835
Epoch 54/300 |loss: 0.000531| train set 5.123x speedup, test set 3.754x speedup, val set 4.708x speedup, step: 31
JOB test speedup 1.2571016494516223
TPCH test speedup 3.8707606329028175
TPCH skew test speedup 3.6619302372045635
Epoch 55/300 |loss: 0.000648| train set 5.110x speedup, test set 3.662x speedup, val set 4.920x speedup, step: 32
JOB test speedup 1.2114995911213462
TPCH test speedup 3.8881303919911567
TPCH skew test speedup 3.6680376992933517
Epoch 56/300 |loss: 0.000599| train set 5.128x speedup, test set 3.668x speedup, val set 4.440x speedup, step: 33
JOB test speedup 1.2431133615043497
TPCH test speedup 4.030096897322649
TPCH skew test speedup 3.7211737171420576
Epoch 57/300 |loss: 0.000612| train set 5.130x speedup, test set 3.721x speedup, val set 4.737x speedup, step: 34
JOB test speedup 1.2564571092025743
TPCH test speedup 3.811295675330979
TPCH skew test speedup 3.6056807747498287
Epoch 58/300 |loss: 0.000534| train set 5.102x speedup, test set 3.606x speedup, val set 4.429x speedup, step: 35
JOB test speedup 1.2654027471715228
TPCH test speedup 4.013743369300357
TPCH skew test speedup 3.7453985258769853
Epoch 59/300 |loss: 0.000894| train set 5.119x speedup, test set 3.745x speedup, val set 4.925x speedup, step: 36
JOB test speedup 1.2836399667913303
TPCH test speedup 3.8247759225196183
TPCH skew test speedup 3.6361084321738315
Epoch 60/300 |loss: 0.000795| train set 5.074x speedup, test set 3.636x speedup, val set 4.564x speedup, step: 37
early stopping at epoch 60
Training per epoch cost 3.552 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.238s, pg runtime 0.207s, speedup 0.868x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 3.108s, pg runtime 57.198s, speedup 18.401x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
16, opt runtime 0.441s, model runtime 0.458s, pg runtime 0.453s, speedup 0.991x
17, opt runtime 0.327s, model runtime 0.392s, pg runtime 0.354s, speedup 0.901x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.093s, pg runtime 0.089s, speedup 0.956x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.160s, pg runtime 2.389s, speedup 14.940x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.239s, pg runtime 0.239s, speedup 1.000x
28, opt runtime 0.157s, model runtime 0.231s, pg runtime 0.157s, speedup 0.678x
29, opt runtime 0.158s, model runtime 0.158s, pg runtime 0.158s, speedup 1.000x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 31.752s, pg runtime 25.034s, speedup 0.788x
22, opt runtime 20.897s, model runtime 20.897s, pg runtime 23.708s, speedup 1.135x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 33.362s, pg runtime 30.614s, speedup 0.918x
22, opt runtime 28.744s, model runtime 31.889s, pg runtime 29.665s, speedup 0.930x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 24, train speedup 5.097, test speedup 0.908, val speedup 5.325
TPCH best validation speedup epoch: 24, train speedup 5.097, test speedup 4.378, val speedup 5.325
TPCH Skew best validation speedup epoch: 24, train speedup 5.097, test speedup 4.039, val speedup 5.325
execution cost 0:04:55.248415
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.621454, and there are 12152 training samples
in channel 9
JOB test speedup 0.8332574965365315
TPCH test speedup 2.7008538715679307
TPCH skew test speedup 2.4919791006059993
Epoch 0/300 |loss: 0.030404| train set 2.230x speedup, test set 2.492x speedup, val set 2.187x speedup, step: 1
JOB test speedup 1.7962356257630245
TPCH test speedup 2.6778183246787806
TPCH skew test speedup 2.604581572222994
Epoch 1/300 |loss: 0.011475| train set 2.487x speedup, test set 2.605x speedup, val set 2.466x speedup, step: 2
JOB test speedup 1.6625273997689705
TPCH test speedup 2.9983624097305785
TPCH skew test speedup 2.825754690144113
Epoch 2/300 |loss: 0.008415| train set 2.622x speedup, test set 2.826x speedup, val set 2.558x speedup, step: 3
JOB test speedup 2.040324995719386
TPCH test speedup 3.328509121245268
TPCH skew test speedup 3.0516039197208134
Epoch 3/300 |loss: 0.006291| train set 3.421x speedup, test set 3.052x speedup, val set 3.416x speedup, step: 4
JOB test speedup 1.9433673762866233
TPCH test speedup 3.7193288618988496
TPCH skew test speedup 3.5423907591066603
Epoch 4/300 |loss: 0.005695| train set 3.587x speedup, test set 3.542x speedup, val set 3.600x speedup, step: 1
JOB test speedup 1.8130946490088693
TPCH test speedup 4.38222927826211
TPCH skew test speedup 4.07407556914704
Epoch 5/300 |loss: 0.005640| train set 3.585x speedup, test set 4.074x speedup, val set 4.864x speedup, step: 2
JOB test speedup 1.95794774627534
TPCH test speedup 4.350580690964666
TPCH skew test speedup 4.101688835161624
Epoch 6/300 |loss: 0.004064| train set 4.715x speedup, test set 4.102x speedup, val set 5.139x speedup, step: 3
JOB test speedup 1.2404475170502138
TPCH test speedup 4.091937571424638
TPCH skew test speedup 3.911731865615962
Epoch 7/300 |loss: 0.003713| train set 4.197x speedup, test set 3.912x speedup, val set 4.662x speedup, step: 4
JOB test speedup 0.7514658338868079
TPCH test speedup 4.324376483183659
TPCH skew test speedup 3.985115280913074
Epoch 8/300 |loss: 0.003531| train set 4.187x speedup, test set 3.985x speedup, val set 5.256x speedup, step: 5
JOB test speedup 0.8439241303304185
TPCH test speedup 4.348760249902851
TPCH skew test speedup 4.020310982031017
Epoch 9/300 |loss: 0.002834| train set 4.944x speedup, test set 4.020x speedup, val set 5.250x speedup, step: 1
JOB test speedup 1.0139642156907598
TPCH test speedup 4.389652237111816
TPCH skew test speedup 4.060836543545095
Epoch 10/300 |loss: 0.002897| train set 5.090x speedup, test set 4.061x speedup, val set 5.309x speedup, step: 2
JOB test speedup 0.7091603961817725
TPCH test speedup 4.388582367338457
TPCH skew test speedup 3.6042407578886535
Epoch 11/300 |loss: 0.002912| train set 5.090x speedup, test set 3.604x speedup, val set 5.276x speedup, step: 3
JOB test speedup 1.0113773287261594
TPCH test speedup 4.350264578972893
TPCH skew test speedup 4.019645874546385
Epoch 12/300 |loss: 0.002801| train set 5.020x speedup, test set 4.020x speedup, val set 5.231x speedup, step: 4
JOB test speedup 0.9955682393302585
TPCH test speedup 4.3525222718330285
TPCH skew test speedup 4.024420570392882
Epoch 13/300 |loss: 0.002455| train set 5.113x speedup, test set 4.024x speedup, val set 5.218x speedup, step: 5
JOB test speedup 1.2601607717216932
TPCH test speedup 4.308828402285924
TPCH skew test speedup 3.991593922932165
Epoch 14/300 |loss: 0.002442| train set 5.036x speedup, test set 3.992x speedup, val set 5.115x speedup, step: 6
JOB test speedup 1.3178867029333217
TPCH test speedup 4.3866571121387095
TPCH skew test speedup 3.9943313765109534
Epoch 15/300 |loss: 0.001943| train set 5.094x speedup, test set 3.994x speedup, val set 5.183x speedup, step: 7
JOB test speedup 1.3887877978497547
TPCH test speedup 4.304218064713768
TPCH skew test speedup 3.9921908011082206
Epoch 16/300 |loss: 0.002242| train set 4.941x speedup, test set 3.992x speedup, val set 5.287x speedup, step: 8
JOB test speedup 1.3262412227585638
TPCH test speedup 4.317718113204108
TPCH skew test speedup 4.0584332967766406
Epoch 17/300 |loss: 0.002152| train set 5.120x speedup, test set 4.058x speedup, val set 5.331x speedup, step: 9
JOB test speedup 1.3068341122256923
TPCH test speedup 4.321835226294719
TPCH skew test speedup 4.019789628013329
Epoch 18/300 |loss: 0.002045| train set 5.090x speedup, test set 4.020x speedup, val set 5.270x speedup, step: 10
JOB test speedup 1.2966944654177335
TPCH test speedup 4.356401087283359
TPCH skew test speedup 4.0567038042375945
Epoch 19/300 |loss: 0.001747| train set 5.031x speedup, test set 4.057x speedup, val set 5.174x speedup, step: 11
JOB test speedup 1.297515515429129
TPCH test speedup 4.306105959152288
TPCH skew test speedup 3.975364201313194
Epoch 20/300 |loss: 0.001814| train set 5.020x speedup, test set 3.975x speedup, val set 5.259x speedup, step: 12
JOB test speedup 1.3543264763111282
TPCH test speedup 4.197809442511327
TPCH skew test speedup 3.9142416770089294
Epoch 21/300 |loss: 0.002007| train set 5.100x speedup, test set 3.914x speedup, val set 5.256x speedup, step: 13
JOB test speedup 1.3570318628250146
TPCH test speedup 4.241819413662124
TPCH skew test speedup 3.9392143040145746
Epoch 22/300 |loss: 0.002049| train set 5.054x speedup, test set 3.939x speedup, val set 5.147x speedup, step: 14
JOB test speedup 1.3526672945415772
TPCH test speedup 4.313958068386708
TPCH skew test speedup 4.020558497620456
Epoch 23/300 |loss: 0.001825| train set 5.127x speedup, test set 4.021x speedup, val set 5.238x speedup, step: 15
JOB test speedup 1.147351706349945
TPCH test speedup 4.397649399685011
TPCH skew test speedup 4.059698184589584
Epoch 24/300 |loss: 0.001666| train set 5.086x speedup, test set 4.060x speedup, val set 5.304x speedup, step: 1
JOB test speedup 0.9864071978050823
TPCH test speedup 4.3231213742863375
TPCH skew test speedup 3.9780176188083516
Epoch 25/300 |loss: 0.001461| train set 4.969x speedup, test set 3.978x speedup, val set 5.141x speedup, step: 2
JOB test speedup 1.2846987315336504
TPCH test speedup 4.357868129105419
TPCH skew test speedup 4.028883418254062
Epoch 26/300 |loss: 0.001765| train set 5.057x speedup, test set 4.029x speedup, val set 5.202x speedup, step: 3
JOB test speedup 0.9897474968026352
TPCH test speedup 4.321074732200604
TPCH skew test speedup 3.9766755424797133
Epoch 27/300 |loss: 0.001390| train set 4.991x speedup, test set 3.977x speedup, val set 5.175x speedup, step: 4
JOB test speedup 1.311584818470666
TPCH test speedup 4.244642465307085
TPCH skew test speedup 3.9123467588399707
Epoch 28/300 |loss: 0.001331| train set 5.002x speedup, test set 3.912x speedup, val set 5.103x speedup, step: 5
JOB test speedup 1.2884584727887713
TPCH test speedup 4.360231399085829
TPCH skew test speedup 3.994593824916976
Epoch 29/300 |loss: 0.001284| train set 5.074x speedup, test set 3.995x speedup, val set 5.214x speedup, step: 6
JOB test speedup 1.2860601946977492
TPCH test speedup 4.356012878542778
TPCH skew test speedup 4.023513686029301
Epoch 30/300 |loss: 0.001347| train set 5.085x speedup, test set 4.024x speedup, val set 5.223x speedup, step: 7
JOB test speedup 1.3293865658247916
TPCH test speedup 4.36269035589407
TPCH skew test speedup 4.032036259811347
Epoch 31/300 |loss: 0.001113| train set 5.082x speedup, test set 4.032x speedup, val set 5.226x speedup, step: 8
JOB test speedup 0.9480634404849234
TPCH test speedup 4.2618545319821015
TPCH skew test speedup 3.9356270840534857
Epoch 32/300 |loss: 0.001412| train set 4.968x speedup, test set 3.936x speedup, val set 4.973x speedup, step: 9
JOB test speedup 1.3076120783893324
TPCH test speedup 4.394959691497893
TPCH skew test speedup 4.0611432288908285
Epoch 33/300 |loss: 0.001503| train set 5.117x speedup, test set 4.061x speedup, val set 5.315x speedup, step: 10
JOB test speedup 1.2934925933562946
TPCH test speedup 4.320038025523976
TPCH skew test speedup 3.9760516271377737
Epoch 34/300 |loss: 0.001121| train set 5.120x speedup, test set 3.976x speedup, val set 5.176x speedup, step: 11
JOB test speedup 1.2480474679701639
TPCH test speedup 4.099191882195175
TPCH skew test speedup 3.8106691731400937
Epoch 35/300 |loss: 0.001040| train set 5.068x speedup, test set 3.811x speedup, val set 5.313x speedup, step: 12
JOB test speedup 1.2666622648892119
TPCH test speedup 4.243919495238492
TPCH skew test speedup 3.911047894897
Epoch 36/300 |loss: 0.001183| train set 5.106x speedup, test set 3.911x speedup, val set 5.065x speedup, step: 13
JOB test speedup 1.2817753945466646
TPCH test speedup 4.167351260554152
TPCH skew test speedup 3.936217370094794
Epoch 37/300 |loss: 0.001006| train set 4.989x speedup, test set 3.936x speedup, val set 5.165x speedup, step: 14
JOB test speedup 1.3016930066787615
TPCH test speedup 4.138797301629485
TPCH skew test speedup 3.9123467588399707
Epoch 38/300 |loss: 0.001098| train set 5.123x speedup, test set 3.912x speedup, val set 5.088x speedup, step: 15
JOB test speedup 1.3421759490478777
TPCH test speedup 3.87967601289075
TPCH skew test speedup 3.6865377834625135
Epoch 39/300 |loss: 0.000971| train set 5.115x speedup, test set 3.687x speedup, val set 5.164x speedup, step: 16
JOB test speedup 1.2930760830246333
TPCH test speedup 4.283039894974019
TPCH skew test speedup 4.059698184589584
Epoch 40/300 |loss: 0.000963| train set 5.114x speedup, test set 4.060x speedup, val set 5.315x speedup, step: 17
JOB test speedup 1.2751610792068937
TPCH test speedup 3.9144505325765047
TPCH skew test speedup 3.7133261527037695
Epoch 41/300 |loss: 0.000967| train set 4.993x speedup, test set 3.713x speedup, val set 5.178x speedup, step: 18
JOB test speedup 1.2488485024450595
TPCH test speedup 4.218061713757319
TPCH skew test speedup 3.9969899216037277
Epoch 42/300 |loss: 0.000946| train set 5.025x speedup, test set 3.997x speedup, val set 5.205x speedup, step: 19
JOB test speedup 1.2563952248001125
TPCH test speedup 4.319218565465832
TPCH skew test speedup 3.989320404238656
Epoch 43/300 |loss: 0.000997| train set 5.101x speedup, test set 3.989x speedup, val set 5.226x speedup, step: 20
JOB test speedup 1.354220992992751
TPCH test speedup 4.154394019829635
TPCH skew test speedup 3.9146480773703094
Epoch 44/300 |loss: 0.000844| train set 5.116x speedup, test set 3.915x speedup, val set 5.225x speedup, step: 21
JOB test speedup 1.1526901257114737
TPCH test speedup 3.957217035040607
TPCH skew test speedup 3.775945138715596
Epoch 45/300 |loss: 0.001026| train set 5.074x speedup, test set 3.776x speedup, val set 4.715x speedup, step: 22
JOB test speedup 1.133432105644912
TPCH test speedup 3.9718186919059306
TPCH skew test speedup 3.75403796418107
Epoch 46/300 |loss: 0.000982| train set 5.058x speedup, test set 3.754x speedup, val set 4.545x speedup, step: 23
JOB test speedup 1.2560832111379665
TPCH test speedup 3.8917373001730358
TPCH skew test speedup 3.697771256249647
Epoch 47/300 |loss: 0.000775| train set 5.090x speedup, test set 3.698x speedup, val set 4.895x speedup, step: 24
JOB test speedup 1.1657969158357055
TPCH test speedup 3.8952073565918894
TPCH skew test speedup 3.7010758090553093
Epoch 48/300 |loss: 0.000726| train set 5.096x speedup, test set 3.701x speedup, val set 5.086x speedup, step: 25
JOB test speedup 1.136185316172752
TPCH test speedup 3.966801341215485
TPCH skew test speedup 3.7795955894726974
Epoch 49/300 |loss: 0.000751| train set 5.118x speedup, test set 3.780x speedup, val set 5.011x speedup, step: 26
JOB test speedup 1.2807383648456767
TPCH test speedup 3.9201859865187134
TPCH skew test speedup 3.722648638333258
Epoch 50/300 |loss: 0.000761| train set 5.061x speedup, test set 3.723x speedup, val set 5.019x speedup, step: 27
JOB test speedup 1.2197318044095662
TPCH test speedup 3.8373160643179243
TPCH skew test speedup 3.6534042247255485
Epoch 51/300 |loss: 0.000659| train set 5.076x speedup, test set 3.653x speedup, val set 5.218x speedup, step: 28
JOB test speedup 1.2493701873910055
TPCH test speedup 4.203759727663456
TPCH skew test speedup 3.9893492298154447
Epoch 52/300 |loss: 0.000561| train set 5.127x speedup, test set 3.989x speedup, val set 5.171x speedup, step: 29
JOB test speedup 1.2500940676010264
TPCH test speedup 4.057848982414784
TPCH skew test speedup 3.8658574407998354
Epoch 53/300 |loss: 0.000742| train set 5.015x speedup, test set 3.866x speedup, val set 5.214x speedup, step: 30
JOB test speedup 1.1465202196354116
TPCH test speedup 3.843491531367127
TPCH skew test speedup 3.6554985729888783
Epoch 54/300 |loss: 0.000543| train set 5.121x speedup, test set 3.655x speedup, val set 5.110x speedup, step: 31
JOB test speedup 1.1594472985944433
TPCH test speedup 3.968574533347623
TPCH skew test speedup 3.7802858682015446
Epoch 55/300 |loss: 0.000613| train set 5.112x speedup, test set 3.780x speedup, val set 5.157x speedup, step: 32
JOB test speedup 1.1447384964230702
TPCH test speedup 3.9035824581677114
TPCH skew test speedup 3.705538040211023
Epoch 56/300 |loss: 0.000685| train set 5.003x speedup, test set 3.706x speedup, val set 4.658x speedup, step: 33
JOB test speedup 1.2718280103389943
TPCH test speedup 4.216024692154194
TPCH skew test speedup 3.9955935675094603
Epoch 57/300 |loss: 0.000593| train set 5.124x speedup, test set 3.996x speedup, val set 5.229x speedup, step: 34
JOB test speedup 1.2796627894518633
TPCH test speedup 3.908898500585071
TPCH skew test speedup 3.719046524894987
Epoch 58/300 |loss: 0.000497| train set 5.110x speedup, test set 3.719x speedup, val set 5.006x speedup, step: 35
JOB test speedup 1.274526307427976
TPCH test speedup 4.18596106933604
TPCH skew test speedup 4.0131661883236065
Epoch 59/300 |loss: 0.000590| train set 5.098x speedup, test set 4.013x speedup, val set 4.835x speedup, step: 36
JOB test speedup 1.099453608561015
TPCH test speedup 3.962850762994223
TPCH skew test speedup 3.7840413637763883
Epoch 60/300 |loss: 0.000535| train set 5.099x speedup, test set 3.784x speedup, val set 4.880x speedup, step: 37
JOB test speedup 1.1275899929739144
TPCH test speedup 4.139384030452847
TPCH skew test speedup 3.9106352435936613
Epoch 61/300 |loss: 0.000489| train set 5.040x speedup, test set 3.911x speedup, val set 5.077x speedup, step: 38
JOB test speedup 1.1412079562749735
TPCH test speedup 3.903118992215431
TPCH skew test speedup 3.652633975537363
Epoch 62/300 |loss: 0.000519| train set 5.097x speedup, test set 3.653x speedup, val set 5.236x speedup, step: 39
JOB test speedup 1.2485931287565262
TPCH test speedup 4.154595569286724
TPCH skew test speedup 3.923692665519048
Epoch 63/300 |loss: 0.000587| train set 5.118x speedup, test set 3.924x speedup, val set 4.983x speedup, step: 40
JOB test speedup 1.2237429835045779
TPCH test speedup 4.000825468507493
TPCH skew test speedup 3.778771217343719
Epoch 64/300 |loss: 0.000534| train set 5.131x speedup, test set 3.779x speedup, val set 5.288x speedup, step: 41
JOB test speedup 1.2507419414709844
TPCH test speedup 3.9902360370500713
TPCH skew test speedup 3.8248894801274504
Epoch 65/300 |loss: 0.000567| train set 5.002x speedup, test set 3.825x speedup, val set 5.096x speedup, step: 42
JOB test speedup 1.2531077189234292
TPCH test speedup 3.939674139391139
TPCH skew test speedup 3.6909813777976668
Epoch 66/300 |loss: 0.000567| train set 5.130x speedup, test set 3.691x speedup, val set 5.158x speedup, step: 43
JOB test speedup 1.237059479606244
TPCH test speedup 3.866560022936399
TPCH skew test speedup 3.695938208349818
Epoch 67/300 |loss: 0.000564| train set 5.091x speedup, test set 3.696x speedup, val set 5.063x speedup, step: 44
early stopping at epoch 67
Training per epoch cost 3.519 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.688s, pg runtime 0.207s, speedup 0.301x
04, opt runtime 0.920s, model runtime 1.675s, pg runtime 1.680s, speedup 1.003x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.919s, pg runtime 0.942s, speedup 1.024x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
12, opt runtime 0.517s, model runtime 0.954s, pg runtime 0.738s, speedup 0.774x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.885s, pg runtime 2.718s, speedup 0.942x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.327s, pg runtime 0.354s, speedup 1.083x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.068s, pg runtime 0.089s, speedup 1.309x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.322s, pg runtime 2.389s, speedup 7.421x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 4.408s, pg runtime 3.112s, speedup 0.706x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.231s, pg runtime 0.157s, speedup 0.678x
29, opt runtime 0.158s, model runtime 0.158s, pg runtime 0.158s, speedup 1.000x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.438s, pg runtime 1.438s, speedup 1.000x
20, opt runtime 1.428s, model runtime 1.428s, pg runtime 1.428s, speedup 1.000x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.308s, model runtime 1.528s, pg runtime 1.528s, speedup 1.000x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 24, train speedup 5.086, test speedup 1.147, val speedup 5.304
TPCH best validation speedup epoch: 24, train speedup 5.086, test speedup 4.398, val speedup 5.304
TPCH Skew best validation speedup epoch: 24, train speedup 5.086, test speedup 4.060, val speedup 5.304
execution cost 0:05:23.895017
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.643136, and there are 12152 training samples
in channel 9
JOB test speedup 0.8332574965365315
TPCH test speedup 2.7008538715679307
TPCH skew test speedup 2.4919791006059993
Epoch 0/300 |loss: 0.030404| train set 2.230x speedup, test set 2.492x speedup, val set 2.187x speedup, step: 1
JOB test speedup 1.7782118783959584
TPCH test speedup 2.6574002196825117
TPCH skew test speedup 2.5859402215194427
Epoch 1/300 |loss: 0.011531| train set 2.467x speedup, test set 2.586x speedup, val set 2.446x speedup, step: 2
JOB test speedup 1.6380192951665835
TPCH test speedup 2.9631375311939974
TPCH skew test speedup 2.8548075407205884
Epoch 2/300 |loss: 0.008415| train set 2.729x speedup, test set 2.855x speedup, val set 2.860x speedup, step: 3
JOB test speedup 2.0125559740533987
TPCH test speedup 3.5546816171285944
TPCH skew test speedup 3.2712028390060723
Epoch 3/300 |loss: 0.006294| train set 3.497x speedup, test set 3.271x speedup, val set 3.648x speedup, step: 4
JOB test speedup 1.8903671085050955
TPCH test speedup 3.817943646737131
TPCH skew test speedup 3.577300692244086
Epoch 4/300 |loss: 0.005569| train set 4.217x speedup, test set 3.577x speedup, val set 4.131x speedup, step: 1
JOB test speedup 1.2625697903299058
TPCH test speedup 4.319925998598993
TPCH skew test speedup 4.053157449793921
Epoch 5/300 |loss: 0.005854| train set 3.604x speedup, test set 4.053x speedup, val set 4.008x speedup, step: 2
JOB test speedup 1.2751959854005563
TPCH test speedup 4.309856018579636
TPCH skew test speedup 4.050775473254116
Epoch 6/300 |loss: 0.004149| train set 4.502x speedup, test set 4.051x speedup, val set 4.944x speedup, step: 3
JOB test speedup 1.2528489837560408
TPCH test speedup 3.8341498018949185
TPCH skew test speedup 3.5843638041477544
Epoch 7/300 |loss: 0.003828| train set 4.426x speedup, test set 3.584x speedup, val set 4.914x speedup, step: 4
JOB test speedup 1.2601538205670821
TPCH test speedup 4.192638151454123
TPCH skew test speedup 3.9280198109806674
Epoch 8/300 |loss: 0.003509| train set 4.663x speedup, test set 3.928x speedup, val set 5.029x speedup, step: 5
JOB test speedup 0.7599735614016356
TPCH test speedup 4.31175407398465
TPCH skew test speedup 4.017574365924064
Epoch 9/300 |loss: 0.003008| train set 4.935x speedup, test set 4.018x speedup, val set 5.200x speedup, step: 1
JOB test speedup 0.8310073198234607
TPCH test speedup 4.355816471838646
TPCH skew test speedup 4.056544816290954
Epoch 10/300 |loss: 0.002968| train set 4.847x speedup, test set 4.057x speedup, val set 5.254x speedup, step: 2
JOB test speedup 0.8128549261366281
TPCH test speedup 4.156676540698476
TPCH skew test speedup 3.9165360557838
Epoch 11/300 |loss: 0.002887| train set 4.811x speedup, test set 3.917x speedup, val set 5.156x speedup, step: 3
JOB test speedup 1.2166891508803768
TPCH test speedup 4.314011960100287
TPCH skew test speedup 3.9911733686072544
Epoch 12/300 |loss: 0.002867| train set 4.991x speedup, test set 3.991x speedup, val set 5.150x speedup, step: 4
JOB test speedup 1.83802499247336
TPCH test speedup 4.313384788142524
TPCH skew test speedup 4.020402330168623
Epoch 13/300 |loss: 0.002524| train set 5.037x speedup, test set 4.020x speedup, val set 5.244x speedup, step: 5
JOB test speedup 0.955084572151821
TPCH test speedup 4.35793765681282
TPCH skew test speedup 4.023072084188757
Epoch 14/300 |loss: 0.002461| train set 5.058x speedup, test set 4.023x speedup, val set 5.235x speedup, step: 1
JOB test speedup 0.9604743685557778
TPCH test speedup 4.350872306151465
TPCH skew test speedup 4.022739454111175
Epoch 15/300 |loss: 0.002013| train set 5.014x speedup, test set 4.023x speedup, val set 5.245x speedup, step: 2
JOB test speedup 0.9721552492917841
TPCH test speedup 4.353811913287622
TPCH skew test speedup 4.024919121480839
Epoch 16/300 |loss: 0.002218| train set 4.943x speedup, test set 4.025x speedup, val set 5.240x speedup, step: 3
JOB test speedup 2.0092699351512673
TPCH test speedup 4.325219157455222
TPCH skew test speedup 3.975342033549844
Epoch 17/300 |loss: 0.002156| train set 5.115x speedup, test set 3.975x speedup, val set 5.141x speedup, step: 4
JOB test speedup 0.9578755379427891
TPCH test speedup 4.40241430097482
TPCH skew test speedup 4.060402941065665
Epoch 18/300 |loss: 0.001993| train set 5.086x speedup, test set 4.060x speedup, val set 5.303x speedup, step: 5
JOB test speedup 0.9764954431163503
TPCH test speedup 4.27484197354084
TPCH skew test speedup 3.934045781586302
Epoch 19/300 |loss: 0.001729| train set 5.035x speedup, test set 3.934x speedup, val set 5.061x speedup, step: 6
JOB test speedup 0.9451389378824507
TPCH test speedup 4.319214965739623
TPCH skew test speedup 3.975171243544337
Epoch 20/300 |loss: 0.001670| train set 5.117x speedup, test set 3.975x speedup, val set 5.306x speedup, step: 7
JOB test speedup 0.9960748692889827
TPCH test speedup 4.319214965739623
TPCH skew test speedup 3.975171243544337
Epoch 21/300 |loss: 0.001824| train set 5.101x speedup, test set 3.975x speedup, val set 5.278x speedup, step: 8
JOB test speedup 0.9647979691271786
TPCH test speedup 4.1964315818280795
TPCH skew test speedup 3.898943676309169
Epoch 22/300 |loss: 0.002027| train set 4.975x speedup, test set 3.899x speedup, val set 5.108x speedup, step: 9
JOB test speedup 0.9806775571247908
TPCH test speedup 4.244642465307085
TPCH skew test speedup 3.9123467588399707
Epoch 23/300 |loss: 0.001690| train set 5.083x speedup, test set 3.912x speedup, val set 5.136x speedup, step: 10
JOB test speedup 0.9435302305230261
TPCH test speedup 4.326132010476657
TPCH skew test speedup 3.972902235909469
Epoch 24/300 |loss: 0.001573| train set 5.107x speedup, test set 3.973x speedup, val set 5.266x speedup, step: 1
JOB test speedup 0.9792040628807153
TPCH test speedup 4.061401092394532
TPCH skew test speedup 3.758738666922323
Epoch 25/300 |loss: 0.001294| train set 5.084x speedup, test set 3.759x speedup, val set 5.141x speedup, step: 2
JOB test speedup 0.9619372255027758
TPCH test speedup 4.008179926930242
TPCH skew test speedup 3.7171211873397163
Epoch 26/300 |loss: 0.001543| train set 5.053x speedup, test set 3.717x speedup, val set 5.075x speedup, step: 3
JOB test speedup 0.9689212372755087
TPCH test speedup 4.2812406187060255
TPCH skew test speedup 3.9386553882001456
Epoch 27/300 |loss: 0.001308| train set 5.042x speedup, test set 3.939x speedup, val set 5.220x speedup, step: 4
JOB test speedup 0.9725307367999518
TPCH test speedup 4.2014290592952
TPCH skew test speedup 3.8530274639092035
Epoch 28/300 |loss: 0.001268| train set 4.935x speedup, test set 3.853x speedup, val set 5.075x speedup, step: 5
JOB test speedup 1.3688779695672169
TPCH test speedup 4.282667355546949
TPCH skew test speedup 3.9455881987916155
Epoch 29/300 |loss: 0.001199| train set 5.117x speedup, test set 3.946x speedup, val set 5.082x speedup, step: 6
JOB test speedup 1.3216211760065204
TPCH test speedup 4.27160636436566
TPCH skew test speedup 3.922833619083777
Epoch 30/300 |loss: 0.001309| train set 5.084x speedup, test set 3.923x speedup, val set 5.158x speedup, step: 7
JOB test speedup 0.9566964277789897
TPCH test speedup 4.358478038081347
TPCH skew test speedup 4.05924564262207
Epoch 31/300 |loss: 0.001125| train set 5.003x speedup, test set 4.059x speedup, val set 5.290x speedup, step: 8
JOB test speedup 0.9120443724720475
TPCH test speedup 3.9221748030983163
TPCH skew test speedup 3.542254897449283
Epoch 32/300 |loss: 0.001458| train set 4.589x speedup, test set 3.542x speedup, val set 4.667x speedup, step: 9
JOB test speedup 1.2588744241523873
TPCH test speedup 4.017221529323387
TPCH skew test speedup 3.7259999126156647
Epoch 33/300 |loss: 0.001399| train set 5.116x speedup, test set 3.726x speedup, val set 5.079x speedup, step: 10
JOB test speedup 0.8964703124023607
TPCH test speedup 4.055918596519279
TPCH skew test speedup 3.7588154377818817
Epoch 34/300 |loss: 0.001025| train set 5.001x speedup, test set 3.759x speedup, val set 5.164x speedup, step: 11
JOB test speedup 0.9845358353332523
TPCH test speedup 4.024573706630325
TPCH skew test speedup 3.7329040349909555
Epoch 35/300 |loss: 0.000961| train set 5.080x speedup, test set 3.733x speedup, val set 4.774x speedup, step: 12
JOB test speedup 0.9686537262543979
TPCH test speedup 4.320038025523976
TPCH skew test speedup 3.9760516271377737
Epoch 36/300 |loss: 0.001175| train set 5.115x speedup, test set 3.976x speedup, val set 5.172x speedup, step: 13
JOB test speedup 0.9769930109961843
TPCH test speedup 4.055847789340441
TPCH skew test speedup 3.7583956641936784
Epoch 37/300 |loss: 0.000979| train set 5.116x speedup, test set 3.758x speedup, val set 5.172x speedup, step: 14
JOB test speedup 1.3168457182995346
TPCH test speedup 4.325004731536066
TPCH skew test speedup 3.9764791831371404
Epoch 38/300 |loss: 0.001162| train set 5.095x speedup, test set 3.976x speedup, val set 5.139x speedup, step: 15
JOB test speedup 0.9414437462489906
TPCH test speedup 4.055918596519279
TPCH skew test speedup 3.7588154377818817
Epoch 39/300 |loss: 0.000872| train set 5.117x speedup, test set 3.759x speedup, val set 5.312x speedup, step: 1
JOB test speedup 1.322500674388784
TPCH test speedup 4.300942387058002
TPCH skew test speedup 3.9592780082442194
Epoch 40/300 |loss: 0.000869| train set 5.124x speedup, test set 3.959x speedup, val set 5.166x speedup, step: 2
JOB test speedup 0.989488645464895
TPCH test speedup 4.023322453205216
TPCH skew test speedup 3.7567748443117686
Epoch 41/300 |loss: 0.000885| train set 5.047x speedup, test set 3.757x speedup, val set 5.169x speedup, step: 3
JOB test speedup 1.3488515047786376
TPCH test speedup 3.834780334899528
TPCH skew test speedup 3.642745373911504
Epoch 42/300 |loss: 0.000829| train set 5.123x speedup, test set 3.643x speedup, val set 4.816x speedup, step: 4
JOB test speedup 1.311269191173235
TPCH test speedup 4.283077709896581
TPCH skew test speedup 3.973768422212059
Epoch 43/300 |loss: 0.000869| train set 5.093x speedup, test set 3.974x speedup, val set 5.290x speedup, step: 5
JOB test speedup 1.382752184311393
TPCH test speedup 4.048451556448776
TPCH skew test speedup 3.751815224725699
Epoch 44/300 |loss: 0.000853| train set 5.120x speedup, test set 3.752x speedup, val set 5.183x speedup, step: 6
JOB test speedup 1.298600288871647
TPCH test speedup 3.96281947721318
TPCH skew test speedup 3.702840499051351
Epoch 45/300 |loss: 0.000876| train set 5.128x speedup, test set 3.703x speedup, val set 4.728x speedup, step: 7
JOB test speedup 1.305465222180524
TPCH test speedup 3.88682112340082
TPCH skew test speedup 3.6649631084356056
Epoch 46/300 |loss: 0.000959| train set 5.095x speedup, test set 3.665x speedup, val set 4.732x speedup, step: 8
JOB test speedup 1.3320168446058256
TPCH test speedup 4.000887470378911
TPCH skew test speedup 3.710275269747586
Epoch 47/300 |loss: 0.000849| train set 5.129x speedup, test set 3.710x speedup, val set 5.032x speedup, step: 9
JOB test speedup 1.3491144393157737
TPCH test speedup 4.0580462122414405
TPCH skew test speedup 3.759792355329892
Epoch 48/300 |loss: 0.000693| train set 5.123x speedup, test set 3.760x speedup, val set 5.302x speedup, step: 10
JOB test speedup 1.3367186267963025
TPCH test speedup 4.070238654964517
TPCH skew test speedup 3.845784420574833
Epoch 49/300 |loss: 0.000746| train set 5.099x speedup, test set 3.846x speedup, val set 5.299x speedup, step: 11
JOB test speedup 1.245859829996837
TPCH test speedup 3.975925409833222
TPCH skew test speedup 3.7165247628928335
Epoch 50/300 |loss: 0.000663| train set 5.080x speedup, test set 3.717x speedup, val set 5.064x speedup, step: 12
JOB test speedup 1.3022603632004215
TPCH test speedup 3.9488512107580878
TPCH skew test speedup 3.656517730955347
Epoch 51/300 |loss: 0.000714| train set 5.085x speedup, test set 3.657x speedup, val set 4.666x speedup, step: 13
JOB test speedup 1.3206540718469486
TPCH test speedup 4.10315723304537
TPCH skew test speedup 3.849423879078359
Epoch 52/300 |loss: 0.000656| train set 5.126x speedup, test set 3.849x speedup, val set 5.310x speedup, step: 14
JOB test speedup 1.3173348866731371
TPCH test speedup 3.809933723878632
TPCH skew test speedup 3.604029637239003
Epoch 53/300 |loss: 0.000670| train set 5.129x speedup, test set 3.604x speedup, val set 5.165x speedup, step: 15
JOB test speedup 1.283217466847343
TPCH test speedup 4.048451556448776
TPCH skew test speedup 3.751815224725699
Epoch 54/300 |loss: 0.000550| train set 4.997x speedup, test set 3.752x speedup, val set 4.714x speedup, step: 16
JOB test speedup 1.313677101232812
TPCH test speedup 3.8712919419649103
TPCH skew test speedup 3.650310882008229
Epoch 55/300 |loss: 0.000519| train set 5.108x speedup, test set 3.650x speedup, val set 4.837x speedup, step: 17
JOB test speedup 1.2762736022811914
TPCH test speedup 3.879500275820011
TPCH skew test speedup 3.659266556495148
Epoch 56/300 |loss: 0.000672| train set 5.131x speedup, test set 3.659x speedup, val set 4.449x speedup, step: 18
JOB test speedup 1.2294148010981236
TPCH test speedup 3.8303283819058023
TPCH skew test speedup 3.6075576478161095
Epoch 57/300 |loss: 0.000648| train set 4.987x speedup, test set 3.608x speedup, val set 4.961x speedup, step: 19
JOB test speedup 1.2912099398748718
TPCH test speedup 3.8499535975580237
TPCH skew test speedup 3.6573368064931873
Epoch 58/300 |loss: 0.000526| train set 5.100x speedup, test set 3.657x speedup, val set 5.166x speedup, step: 20
JOB test speedup 1.2991483964949064
TPCH test speedup 3.8579423403137114
TPCH skew test speedup 3.666489623783473
Epoch 59/300 |loss: 0.000575| train set 5.060x speedup, test set 3.666x speedup, val set 5.296x speedup, step: 21
JOB test speedup 1.2579418584198854
TPCH test speedup 4.020024426189609
TPCH skew test speedup 3.750576000969852
Epoch 60/300 |loss: 0.000555| train set 5.112x speedup, test set 3.751x speedup, val set 5.156x speedup, step: 22
JOB test speedup 1.2702501596643656
TPCH test speedup 3.8499535975580237
TPCH skew test speedup 3.6573368064931873
Epoch 61/300 |loss: 0.000497| train set 5.133x speedup, test set 3.657x speedup, val set 5.161x speedup, step: 23
JOB test speedup 1.2705846699085839
TPCH test speedup 4.048205925309141
TPCH skew test speedup 3.752229092005885
Epoch 62/300 |loss: 0.000507| train set 5.125x speedup, test set 3.752x speedup, val set 5.145x speedup, step: 24
JOB test speedup 1.2247776136775839
TPCH test speedup 3.8321565460122895
TPCH skew test speedup 3.608279303287671
Epoch 63/300 |loss: 0.000593| train set 5.118x speedup, test set 3.608x speedup, val set 5.138x speedup, step: 25
JOB test speedup 1.2977543726129797
TPCH test speedup 4.015733136493467
TPCH skew test speedup 3.7501956415540416
Epoch 64/300 |loss: 0.000537| train set 5.096x speedup, test set 3.750x speedup, val set 5.164x speedup, step: 26
early stopping at epoch 64
Training per epoch cost 3.453 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 2.126s, pg runtime 0.207s, speedup 0.097x
04, opt runtime 0.920s, model runtime 1.675s, pg runtime 1.680s, speedup 1.003x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.954s, pg runtime 0.738s, speedup 0.774x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.516s, pg runtime 0.453s, speedup 0.879x
17, opt runtime 0.327s, model runtime 0.392s, pg runtime 0.354s, speedup 0.901x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.083s, pg runtime 0.089s, speedup 1.083x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.130s, pg runtime 2.389s, speedup 18.364x
23, opt runtime 0.389s, model runtime 0.433s, pg runtime 0.389s, speedup 0.898x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.239s, pg runtime 0.239s, speedup 1.000x
28, opt runtime 0.157s, model runtime 0.179s, pg runtime 0.157s, speedup 0.875x
29, opt runtime 0.158s, model runtime 0.216s, pg runtime 0.158s, speedup 0.732x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 60.311s, pg runtime 112.305s, speedup 1.862x
04, opt runtime 30.267s, model runtime 57.401s, pg runtime 100.885s, speedup 1.758x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.457s, pg runtime 1.438s, speedup 0.987x
20, opt runtime 1.428s, model runtime 1.528s, pg runtime 1.428s, speedup 0.934x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 32.681s, pg runtime 626.529s, speedup 19.171x
32, opt runtime 24.662s, model runtime 32.192s, pg runtime 613.999s, speedup 19.073x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
04, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.308s, model runtime 1.377s, pg runtime 1.528s, speedup 1.110x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 34.623s, pg runtime 644.779s, speedup 18.623x
32, opt runtime 25.478s, model runtime 35.320s, pg runtime 642.079s, speedup 18.179x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 39, train speedup 5.117, test speedup 0.941, val speedup 5.312
TPCH best validation speedup epoch: 39, train speedup 5.117, test speedup 4.056, val speedup 5.312
TPCH Skew best validation speedup epoch: 39, train speedup 5.117, test speedup 3.759, val speedup 5.312
execution cost 0:05:05.229769
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.643822, and there are 12152 training samples
in channel 9
JOB test speedup 0.8332574965365315
TPCH test speedup 2.7008538715679307
TPCH skew test speedup 2.4919791006059993
Epoch 0/300 |loss: 0.030404| train set 2.230x speedup, test set 2.492x speedup, val set 2.187x speedup, step: 1
JOB test speedup 1.7782118783959584
TPCH test speedup 2.6574002196825117
TPCH skew test speedup 2.5859402215194427
Epoch 1/300 |loss: 0.011531| train set 2.467x speedup, test set 2.586x speedup, val set 2.446x speedup, step: 2
JOB test speedup 1.6380192951665835
TPCH test speedup 2.9631375311939974
TPCH skew test speedup 2.8548075407205884
Epoch 2/300 |loss: 0.008415| train set 2.729x speedup, test set 2.855x speedup, val set 2.859x speedup, step: 3
JOB test speedup 2.0222134029778935
TPCH test speedup 3.636590076201571
TPCH skew test speedup 3.3140409864640574
Epoch 3/300 |loss: 0.006359| train set 3.633x speedup, test set 3.314x speedup, val set 3.753x speedup, step: 4
JOB test speedup 1.9348923404362113
TPCH test speedup 3.6645422869020416
TPCH skew test speedup 3.3361197175223976
Epoch 4/300 |loss: 0.005669| train set 4.218x speedup, test set 3.336x speedup, val set 3.746x speedup, step: 1
JOB test speedup 1.183792170789799
TPCH test speedup 4.214708214889273
TPCH skew test speedup 4.033138598055854
Epoch 5/300 |loss: 0.005806| train set 3.465x speedup, test set 4.033x speedup, val set 3.929x speedup, step: 2
JOB test speedup 1.2460975113198327
TPCH test speedup 4.30233155170127
TPCH skew test speedup 4.036305473285917
Epoch 6/300 |loss: 0.004045| train set 4.525x speedup, test set 4.036x speedup, val set 5.028x speedup, step: 3
JOB test speedup 0.7889359369225553
TPCH test speedup 4.017770584671293
TPCH skew test speedup 3.8078137072290423
Epoch 7/300 |loss: 0.003699| train set 4.263x speedup, test set 3.808x speedup, val set 4.720x speedup, step: 4
JOB test speedup 1.2710237722950959
TPCH test speedup 4.142211413742837
TPCH skew test speedup 3.8810215467438915
Epoch 8/300 |loss: 0.003494| train set 4.026x speedup, test set 3.881x speedup, val set 4.953x speedup, step: 5
JOB test speedup 0.7084433607609153
TPCH test speedup 4.258757872764048
TPCH skew test speedup 3.848365334105956
Epoch 9/300 |loss: 0.002860| train set 4.811x speedup, test set 3.848x speedup, val set 4.992x speedup, step: 1
JOB test speedup 0.7474853134126074
TPCH test speedup 4.256705297841174
TPCH skew test speedup 3.941308187776371
Epoch 10/300 |loss: 0.002967| train set 4.872x speedup, test set 3.941x speedup, val set 5.091x speedup, step: 2
JOB test speedup 0.754750562158025
TPCH test speedup 4.378357136454133
TPCH skew test speedup 4.023815904440817
Epoch 11/300 |loss: 0.002773| train set 4.938x speedup, test set 4.024x speedup, val set 5.293x speedup, step: 3
JOB test speedup 2.0271902221727562
TPCH test speedup 4.249437224828574
TPCH skew test speedup 3.9127607231567754
Epoch 12/300 |loss: 0.002673| train set 4.574x speedup, test set 3.913x speedup, val set 5.250x speedup, step: 4
JOB test speedup 2.0785839904254084
TPCH test speedup 4.278968084045689
TPCH skew test speedup 3.9914016929844585
Epoch 13/300 |loss: 0.002379| train set 5.043x speedup, test set 3.991x speedup, val set 5.239x speedup, step: 5
JOB test speedup 0.9829705895651607
TPCH test speedup 4.322395404461997
TPCH skew test speedup 3.9961246783139517
Epoch 14/300 |loss: 0.002411| train set 4.910x speedup, test set 3.996x speedup, val set 5.310x speedup, step: 1
JOB test speedup 0.9892550225780732
TPCH test speedup 4.322675437325394
TPCH skew test speedup 3.9956552629001787
Epoch 15/300 |loss: 0.001840| train set 5.119x speedup, test set 3.996x speedup, val set 5.204x speedup, step: 2
JOB test speedup 1.9838528691242048
TPCH test speedup 4.268366639921509
TPCH skew test speedup 3.9935881783804152
Epoch 16/300 |loss: 0.002226| train set 4.953x speedup, test set 3.994x speedup, val set 5.117x speedup, step: 3
JOB test speedup 1.384639930066314
TPCH test speedup 4.326043823652999
TPCH skew test speedup 3.977103232679563
Epoch 17/300 |loss: 0.002156| train set 5.115x speedup, test set 3.977x speedup, val set 5.165x speedup, step: 4
JOB test speedup 1.4066421836765481
TPCH test speedup 4.250912957409234
TPCH skew test speedup 3.947876207646833
Epoch 18/300 |loss: 0.001909| train set 5.091x speedup, test set 3.948x speedup, val set 5.208x speedup, step: 5
JOB test speedup 1.3824898493446174
TPCH test speedup 4.362922252673367
TPCH skew test speedup 4.0293224126707665
Epoch 19/300 |loss: 0.001657| train set 5.094x speedup, test set 4.029x speedup, val set 5.299x speedup, step: 6
JOB test speedup 1.2982525958021187
TPCH test speedup 4.287317874354312
TPCH skew test speedup 3.9501297473324852
Epoch 20/300 |loss: 0.001581| train set 5.108x speedup, test set 3.950x speedup, val set 5.160x speedup, step: 7
JOB test speedup 0.9760803629990584
TPCH test speedup 4.310471102646195
TPCH skew test speedup 4.031294576530856
Epoch 21/300 |loss: 0.001902| train set 5.102x speedup, test set 4.031x speedup, val set 5.283x speedup, step: 8
JOB test speedup 0.9519584614674971
TPCH test speedup 4.326515872588808
TPCH skew test speedup 4.0283646205204
Epoch 22/300 |loss: 0.001860| train set 5.039x speedup, test set 4.028x speedup, val set 5.181x speedup, step: 9
JOB test speedup 1.3258666976903566
TPCH test speedup 4.323378520923278
TPCH skew test speedup 4.030470967253085
Epoch 23/300 |loss: 0.001703| train set 5.125x speedup, test set 4.030x speedup, val set 5.219x speedup, step: 10
JOB test speedup 1.1624546562715568
TPCH test speedup 4.355176398571123
TPCH skew test speedup 4.051044240509873
Epoch 24/300 |loss: 0.001570| train set 5.040x speedup, test set 4.051x speedup, val set 5.297x speedup, step: 11
JOB test speedup 1.3690273736237855
TPCH test speedup 4.254153418942547
TPCH skew test speedup 3.944735579160428
Epoch 25/300 |loss: 0.001315| train set 5.077x speedup, test set 3.945x speedup, val set 5.072x speedup, step: 12
JOB test speedup 1.3163130868077044
TPCH test speedup 4.327555691029953
TPCH skew test speedup 4.029005062922897
Epoch 26/300 |loss: 0.001595| train set 5.014x speedup, test set 4.029x speedup, val set 5.208x speedup, step: 13
JOB test speedup 1.325634551793789
TPCH test speedup 4.356642615529113
TPCH skew test speedup 4.02330116015827
Epoch 27/300 |loss: 0.001431| train set 5.058x speedup, test set 4.023x speedup, val set 5.218x speedup, step: 14
JOB test speedup 1.273581152951148
TPCH test speedup 4.310004743065465
TPCH skew test speedup 3.996326056695369
Epoch 28/300 |loss: 0.001299| train set 4.931x speedup, test set 3.996x speedup, val set 5.138x speedup, step: 15
JOB test speedup 1.2992184780182503
TPCH test speedup 4.327555691029953
TPCH skew test speedup 4.029005062922897
Epoch 29/300 |loss: 0.001134| train set 5.037x speedup, test set 4.029x speedup, val set 5.235x speedup, step: 16
JOB test speedup 1.2717433874976434
TPCH test speedup 4.356642615529113
TPCH skew test speedup 4.02330116015827
Epoch 30/300 |loss: 0.001298| train set 5.113x speedup, test set 4.023x speedup, val set 5.221x speedup, step: 17
JOB test speedup 1.3210191229198696
TPCH test speedup 4.21733977364124
TPCH skew test speedup 3.948203785746863
Epoch 31/300 |loss: 0.001119| train set 5.064x speedup, test set 3.948x speedup, val set 4.938x speedup, step: 18
JOB test speedup 1.2928521237687536
TPCH test speedup 4.045450354914526
TPCH skew test speedup 3.760695562345576
Epoch 32/300 |loss: 0.001472| train set 4.730x speedup, test set 3.761x speedup, val set 5.098x speedup, step: 19
JOB test speedup 1.2310801885635894
TPCH test speedup 4.093283890191995
TPCH skew test speedup 3.80523384351728
Epoch 33/300 |loss: 0.001580| train set 5.110x speedup, test set 3.805x speedup, val set 5.307x speedup, step: 20
JOB test speedup 1.299403796291062
TPCH test speedup 4.059418545603261
TPCH skew test speedup 3.8021468518796366
Epoch 34/300 |loss: 0.001043| train set 5.117x speedup, test set 3.802x speedup, val set 5.299x speedup, step: 21
JOB test speedup 1.2708206917454963
TPCH test speedup 3.9663814025011566
TPCH skew test speedup 3.719496011543066
Epoch 35/300 |loss: 0.001088| train set 5.109x speedup, test set 3.719x speedup, val set 4.633x speedup, step: 22
JOB test speedup 1.309082994561673
TPCH test speedup 4.1063218063081095
TPCH skew test speedup 3.819168943824864
Epoch 36/300 |loss: 0.001178| train set 5.101x speedup, test set 3.819x speedup, val set 5.279x speedup, step: 23
JOB test speedup 1.2416911739024146
TPCH test speedup 4.09578182707297
TPCH skew test speedup 3.8082007411786414
Epoch 37/300 |loss: 0.000997| train set 5.122x speedup, test set 3.808x speedup, val set 5.214x speedup, step: 24
JOB test speedup 1.2602465374471687
TPCH test speedup 4.08816742522016
TPCH skew test speedup 3.801015550553716
Epoch 38/300 |loss: 0.001123| train set 5.041x speedup, test set 3.801x speedup, val set 5.218x speedup, step: 25
JOB test speedup 1.328159587733572
TPCH test speedup 4.08710459654311
TPCH skew test speedup 3.8006248923656303
Epoch 39/300 |loss: 0.000915| train set 5.136x speedup, test set 3.801x speedup, val set 5.312x speedup, step: 1
JOB test speedup 1.257335063745689
TPCH test speedup 3.9489611293265052
TPCH skew test speedup 3.725624511798198
Epoch 40/300 |loss: 0.000917| train set 5.010x speedup, test set 3.726x speedup, val set 5.300x speedup, step: 2
JOB test speedup 1.287216867664684
TPCH test speedup 4.07419611039429
TPCH skew test speedup 3.7924217272359955
Epoch 41/300 |loss: 0.000974| train set 5.121x speedup, test set 3.792x speedup, val set 5.221x speedup, step: 3
JOB test speedup 1.3064172075954252
TPCH test speedup 4.07419611039429
TPCH skew test speedup 3.7924217272359955
Epoch 42/300 |loss: 0.000940| train set 5.039x speedup, test set 3.792x speedup, val set 4.762x speedup, step: 4
JOB test speedup 1.303024497102564
TPCH test speedup 4.041306714997741
TPCH skew test speedup 3.79034449222923
Epoch 43/300 |loss: 0.000954| train set 5.062x speedup, test set 3.790x speedup, val set 5.179x speedup, step: 5
JOB test speedup 1.3198810194897006
TPCH test speedup 3.9579167972838554
TPCH skew test speedup 3.733540949908092
Epoch 44/300 |loss: 0.000849| train set 5.128x speedup, test set 3.734x speedup, val set 5.054x speedup, step: 6
JOB test speedup 1.3023237289497747
TPCH test speedup 4.083478355743608
TPCH skew test speedup 3.808237709734379
Epoch 45/300 |loss: 0.000975| train set 5.103x speedup, test set 3.808x speedup, val set 4.758x speedup, step: 7
JOB test speedup 1.3405143538776616
TPCH test speedup 4.083729500424464
TPCH skew test speedup 3.8006248923656303
Epoch 46/300 |loss: 0.001008| train set 5.050x speedup, test set 3.801x speedup, val set 5.215x speedup, step: 8
JOB test speedup 1.328693448492996
TPCH test speedup 4.07419611039429
TPCH skew test speedup 3.7924217272359955
Epoch 47/300 |loss: 0.000716| train set 5.089x speedup, test set 3.792x speedup, val set 5.216x speedup, step: 9
JOB test speedup 1.1859192344154268
TPCH test speedup 4.094850394540385
TPCH skew test speedup 3.8082007411786414
Epoch 48/300 |loss: 0.000802| train set 5.045x speedup, test set 3.808x speedup, val set 5.189x speedup, step: 10
JOB test speedup 1.321493733658001
TPCH test speedup 4.09578182707297
TPCH skew test speedup 3.8082007411786414
Epoch 49/300 |loss: 0.000694| train set 5.086x speedup, test set 3.808x speedup, val set 5.204x speedup, step: 11
JOB test speedup 1.3147300092530771
TPCH test speedup 4.060416635398772
TPCH skew test speedup 3.8100830876878344
Epoch 50/300 |loss: 0.000751| train set 5.117x speedup, test set 3.810x speedup, val set 4.772x speedup, step: 12
JOB test speedup 1.2602987309063416
TPCH test speedup 4.0056964562516795
TPCH skew test speedup 3.7156965676645903
Epoch 51/300 |loss: 0.000731| train set 5.127x speedup, test set 3.716x speedup, val set 4.953x speedup, step: 13
JOB test speedup 1.2983283796485026
TPCH test speedup 4.032018891508243
TPCH skew test speedup 3.729861230069094
Epoch 52/300 |loss: 0.000582| train set 5.041x speedup, test set 3.730x speedup, val set 4.672x speedup, step: 14
JOB test speedup 1.293899654185629
TPCH test speedup 4.001593086381694
TPCH skew test speedup 3.711809388204461
Epoch 53/300 |loss: 0.000783| train set 5.127x speedup, test set 3.712x speedup, val set 5.197x speedup, step: 15
JOB test speedup 1.2800657822160837
TPCH test speedup 3.999301097770804
TPCH skew test speedup 3.7088558917556522
Epoch 54/300 |loss: 0.000602| train set 5.046x speedup, test set 3.709x speedup, val set 4.628x speedup, step: 16
JOB test speedup 1.2954964298392704
TPCH test speedup 4.074386387579216
TPCH skew test speedup 3.79138739711468
Epoch 55/300 |loss: 0.000618| train set 5.032x speedup, test set 3.791x speedup, val set 5.158x speedup, step: 17
JOB test speedup 1.2659663469758544
TPCH test speedup 4.014911607942849
TPCH skew test speedup 3.7230237991774175
Epoch 56/300 |loss: 0.000646| train set 5.121x speedup, test set 3.723x speedup, val set 4.656x speedup, step: 18
JOB test speedup 1.1277618585755844
TPCH test speedup 3.9316267714430504
TPCH skew test speedup 3.6677577415762466
Epoch 57/300 |loss: 0.000593| train set 5.128x speedup, test set 3.668x speedup, val set 5.202x speedup, step: 19
JOB test speedup 1.3049926559550111
TPCH test speedup 4.020174627052069
TPCH skew test speedup 3.7202623560662174
Epoch 58/300 |loss: 0.000525| train set 5.072x speedup, test set 3.720x speedup, val set 4.738x speedup, step: 20
JOB test speedup 1.193250367977719
TPCH test speedup 4.025473439112114
TPCH skew test speedup 3.7334539696839655
Epoch 59/300 |loss: 0.000636| train set 5.074x speedup, test set 3.733x speedup, val set 4.769x speedup, step: 21
JOB test speedup 1.2698536634694702
TPCH test speedup 4.08816742522016
TPCH skew test speedup 3.801015550553716
Epoch 60/300 |loss: 0.000615| train set 5.110x speedup, test set 3.801x speedup, val set 5.234x speedup, step: 22
JOB test speedup 1.2895026964303475
TPCH test speedup 4.017221529323387
TPCH skew test speedup 3.7265478147978683
Epoch 61/300 |loss: 0.000471| train set 5.134x speedup, test set 3.727x speedup, val set 5.229x speedup, step: 23
JOB test speedup 1.2641609338418425
TPCH test speedup 4.081342483841272
TPCH skew test speedup 3.797528422416992
Epoch 62/300 |loss: 0.000537| train set 5.052x speedup, test set 3.798x speedup, val set 4.759x speedup, step: 24
JOB test speedup 1.261816275687376
TPCH test speedup 4.024891618737821
TPCH skew test speedup 3.732375921407156
Epoch 63/300 |loss: 0.000555| train set 5.095x speedup, test set 3.732x speedup, val set 4.749x speedup, step: 25
JOB test speedup 1.2644800934354103
TPCH test speedup 4.054436371532782
TPCH skew test speedup 3.723234054491046
Epoch 64/300 |loss: 0.000501| train set 5.091x speedup, test set 3.723x speedup, val set 4.754x speedup, step: 26
JOB test speedup 1.26223171001133
TPCH test speedup 4.017221529323387
TPCH skew test speedup 3.7259999126156647
Epoch 65/300 |loss: 0.000581| train set 5.123x speedup, test set 3.726x speedup, val set 4.644x speedup, step: 27
JOB test speedup 1.2933865930793755
TPCH test speedup 4.026163239731588
TPCH skew test speedup 3.7350898883053127
Epoch 66/300 |loss: 0.000627| train set 5.133x speedup, test set 3.735x speedup, val set 4.756x speedup, step: 28
JOB test speedup 1.2973710154317366
TPCH test speedup 4.064294571400535
TPCH skew test speedup 3.7822243476797768
Epoch 67/300 |loss: 0.000598| train set 5.048x speedup, test set 3.782x speedup, val set 5.202x speedup, step: 29
early stopping at epoch 67
Training per epoch cost 3.531 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.238s, pg runtime 0.207s, speedup 0.868x
04, opt runtime 0.920s, model runtime 2.104s, pg runtime 1.680s, speedup 0.798x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.885s, pg runtime 2.718s, speedup 0.942x
16, opt runtime 0.441s, model runtime 0.467s, pg runtime 0.453s, speedup 0.972x
17, opt runtime 0.327s, model runtime 0.354s, pg runtime 0.354s, speedup 1.000x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.089s, pg runtime 0.089s, speedup 1.000x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 4.408s, pg runtime 3.112s, speedup 0.706x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
30, opt runtime 1.646s, model runtime 1.646s, pg runtime 4.855s, speedup 2.949x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 60.311s, pg runtime 112.305s, speedup 1.862x
04, opt runtime 30.267s, model runtime 57.401s, pg runtime 100.885s, speedup 1.758x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.457s, pg runtime 1.438s, speedup 0.987x
20, opt runtime 1.428s, model runtime 1.528s, pg runtime 1.428s, speedup 0.934x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 2.393s, pg runtime 1.423s, speedup 0.594x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
04, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.308s, model runtime 1.377s, pg runtime 1.528s, speedup 1.110x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 2.260s, pg runtime 1.433s, speedup 0.634x
26, opt runtime 1.420s, model runtime 2.491s, pg runtime 1.420s, speedup 0.570x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 39, train speedup 5.136, test speedup 1.328, val speedup 5.312
TPCH best validation speedup epoch: 39, train speedup 5.136, test speedup 4.087, val speedup 5.312
TPCH Skew best validation speedup epoch: 39, train speedup 5.136, test speedup 3.801, val speedup 5.312
execution cost 0:05:25.874626
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.644794, and there are 12152 training samples
in channel 9
JOB test speedup 0.8332574965365315
TPCH test speedup 2.7008538715679307
TPCH skew test speedup 2.4919791006059993
Epoch 0/300 |loss: 0.030404| train set 2.230x speedup, test set 2.492x speedup, val set 2.187x speedup, step: 1
JOB test speedup 1.7782118783959584
TPCH test speedup 2.6574002196825117
TPCH skew test speedup 2.5859402215194427
Epoch 1/300 |loss: 0.011531| train set 2.467x speedup, test set 2.586x speedup, val set 2.446x speedup, step: 2
JOB test speedup 1.6380192951665835
TPCH test speedup 2.9631375311939974
TPCH skew test speedup 2.8548075407205884
Epoch 2/300 |loss: 0.008414| train set 2.655x speedup, test set 2.855x speedup, val set 2.859x speedup, step: 3
JOB test speedup 1.818854173527431
TPCH test speedup 3.648821633129283
TPCH skew test speedup 3.331308586470046
Epoch 3/300 |loss: 0.006338| train set 3.742x speedup, test set 3.331x speedup, val set 3.783x speedup, step: 4
JOB test speedup 1.9027409817077934
TPCH test speedup 3.7169449779112256
TPCH skew test speedup 3.547362006956263
Epoch 4/300 |loss: 0.005602| train set 3.467x speedup, test set 3.547x speedup, val set 3.564x speedup, step: 1
JOB test speedup 1.198814795278638
TPCH test speedup 4.1730855049711
TPCH skew test speedup 3.9892783162113146
Epoch 5/300 |loss: 0.005758| train set 3.530x speedup, test set 3.989x speedup, val set 4.230x speedup, step: 2
JOB test speedup 1.264370488253486
TPCH test speedup 4.2486514169967196
TPCH skew test speedup 3.985680789294487
Epoch 6/300 |loss: 0.004090| train set 4.481x speedup, test set 3.986x speedup, val set 4.943x speedup, step: 3
JOB test speedup 0.8122156760379923
TPCH test speedup 4.130289933540642
TPCH skew test speedup 3.918145919356067
Epoch 7/300 |loss: 0.003681| train set 4.383x speedup, test set 3.918x speedup, val set 4.876x speedup, step: 4
JOB test speedup 1.3048292900299339
TPCH test speedup 4.160190373403963
TPCH skew test speedup 3.9057358406241796
Epoch 8/300 |loss: 0.003471| train set 4.384x speedup, test set 3.906x speedup, val set 4.888x speedup, step: 5
JOB test speedup 0.7336762056408588
TPCH test speedup 4.352175198112133
TPCH skew test speedup 4.020345242765013
Epoch 9/300 |loss: 0.002885| train set 3.766x speedup, test set 4.020x speedup, val set 5.223x speedup, step: 1
JOB test speedup 0.7766984615790573
TPCH test speedup 4.352960148005501
TPCH skew test speedup 4.030610628820687
Epoch 10/300 |loss: 0.002933| train set 4.887x speedup, test set 4.031x speedup, val set 5.002x speedup, step: 2
JOB test speedup 0.7583500194804883
TPCH test speedup 4.356964203481424
TPCH skew test speedup 4.023815904440817
Epoch 11/300 |loss: 0.002936| train set 5.031x speedup, test set 4.024x speedup, val set 5.237x speedup, step: 3
JOB test speedup 2.205805679634844
TPCH test speedup 4.291916340068083
TPCH skew test speedup 3.996067413051725
Epoch 12/300 |loss: 0.002849| train set 5.003x speedup, test set 3.996x speedup, val set 5.280x speedup, step: 4
JOB test speedup 1.029271443236891
TPCH test speedup 4.131331929653754
TPCH skew test speedup 3.8994209034254497
Epoch 13/300 |loss: 0.002490| train set 4.623x speedup, test set 3.899x speedup, val set 4.917x speedup, step: 5
JOB test speedup 1.0017233680571138
TPCH test speedup 4.345690192157059
TPCH skew test speedup 4.0265146386718245
Epoch 14/300 |loss: 0.002443| train set 4.974x speedup, test set 4.027x speedup, val set 5.218x speedup, step: 6
JOB test speedup 0.9643422942452001
TPCH test speedup 4.270454518629186
TPCH skew test speedup 3.942853022879031
Epoch 15/300 |loss: 0.001915| train set 5.098x speedup, test set 3.943x speedup, val set 5.286x speedup, step: 7
JOB test speedup 0.9728896725300559
TPCH test speedup 4.284375254340558
TPCH skew test speedup 3.9931890627002544
Epoch 16/300 |loss: 0.002195| train set 4.997x speedup, test set 3.993x speedup, val set 5.236x speedup, step: 8
JOB test speedup 1.0332412775796174
TPCH test speedup 4.325004731536066
TPCH skew test speedup 3.9764791831371404
Epoch 17/300 |loss: 0.002244| train set 5.116x speedup, test set 3.976x speedup, val set 5.316x speedup, step: 9
JOB test speedup 0.985426269531134
TPCH test speedup 4.296625209184889
TPCH skew test speedup 4.0097121957341
Epoch 18/300 |loss: 0.002037| train set 5.038x speedup, test set 4.010x speedup, val set 5.199x speedup, step: 10
JOB test speedup 0.9809268407768351
TPCH test speedup 4.363533577276835
TPCH skew test speedup 4.059691278982341
Epoch 19/300 |loss: 0.001799| train set 5.098x speedup, test set 4.060x speedup, val set 5.290x speedup, step: 1
JOB test speedup 0.9707672035065184
TPCH test speedup 4.400825874714325
TPCH skew test speedup 4.061423320300412
Epoch 20/300 |loss: 0.001844| train set 5.036x speedup, test set 4.061x speedup, val set 5.318x speedup, step: 2
JOB test speedup 0.9793840722277992
TPCH test speedup 4.360808362388624
TPCH skew test speedup 4.056158481419544
Epoch 21/300 |loss: 0.002020| train set 5.090x speedup, test set 4.056x speedup, val set 5.312x speedup, step: 3
JOB test speedup 0.9723222543894986
TPCH test speedup 4.327555691029953
TPCH skew test speedup 4.029005062922897
Epoch 22/300 |loss: 0.001905| train set 4.992x speedup, test set 4.029x speedup, val set 5.223x speedup, step: 4
JOB test speedup 0.9774693239361301
TPCH test speedup 4.395683604335568
TPCH skew test speedup 4.060977303624107
Epoch 23/300 |loss: 0.001848| train set 5.114x speedup, test set 4.061x speedup, val set 5.315x speedup, step: 5
JOB test speedup 0.9021335597377224
TPCH test speedup 4.374886949861439
TPCH skew test speedup 4.025395438405457
Epoch 24/300 |loss: 0.001683| train set 5.100x speedup, test set 4.025x speedup, val set 5.266x speedup, step: 6
JOB test speedup 0.9744638294125801
TPCH test speedup 4.289591954075047
TPCH skew test speedup 3.946370899273426
Epoch 25/300 |loss: 0.001459| train set 5.036x speedup, test set 3.946x speedup, val set 5.095x speedup, step: 7
JOB test speedup 0.9895093272847175
TPCH test speedup 4.23994770629677
TPCH skew test speedup 3.9371106815049446
Epoch 26/300 |loss: 0.001708| train set 5.029x speedup, test set 3.937x speedup, val set 5.225x speedup, step: 8
JOB test speedup 0.9766350755552209
TPCH test speedup 4.1996591974074855
TPCH skew test speedup 3.812005501049024
Epoch 27/300 |loss: 0.001364| train set 5.080x speedup, test set 3.812x speedup, val set 5.081x speedup, step: 9
JOB test speedup 0.9488031897446679
TPCH test speedup 4.264651617132124
TPCH skew test speedup 3.9256576200645954
Epoch 28/300 |loss: 0.001277| train set 4.782x speedup, test set 3.926x speedup, val set 5.174x speedup, step: 10
JOB test speedup 0.9915892161402017
TPCH test speedup 4.3599464793216365
TPCH skew test speedup 4.031390502166722
Epoch 29/300 |loss: 0.001163| train set 5.002x speedup, test set 4.031x speedup, val set 5.235x speedup, step: 11
JOB test speedup 0.983434714305541
TPCH test speedup 4.402192152937059
TPCH skew test speedup 4.061589282016986
Epoch 30/300 |loss: 0.001267| train set 5.084x speedup, test set 4.062x speedup, val set 5.235x speedup, step: 12
JOB test speedup 1.0161858370987424
TPCH test speedup 4.358762765948167
TPCH skew test speedup 4.0587612816443235
Epoch 31/300 |loss: 0.001122| train set 5.089x speedup, test set 4.059x speedup, val set 5.247x speedup, step: 13
JOB test speedup 0.9254479407486317
TPCH test speedup 4.216335542521084
TPCH skew test speedup 3.873759145958134
Epoch 32/300 |loss: 0.001284| train set 4.935x speedup, test set 3.874x speedup, val set 4.952x speedup, step: 14
JOB test speedup 0.911411570892018
TPCH test speedup 4.061212026096622
TPCH skew test speedup 3.7597552575255415
Epoch 33/300 |loss: 0.001359| train set 5.094x speedup, test set 3.760x speedup, val set 5.182x speedup, step: 15
JOB test speedup 0.9162462300330926
TPCH test speedup 4.264493405610826
TPCH skew test speedup 3.9264250450506544
Epoch 34/300 |loss: 0.001082| train set 5.031x speedup, test set 3.926x speedup, val set 5.086x speedup, step: 16
JOB test speedup 0.9855813349124999
TPCH test speedup 4.390762834088238
TPCH skew test speedup 4.054108702786519
Epoch 35/300 |loss: 0.000994| train set 5.113x speedup, test set 4.054x speedup, val set 5.217x speedup, step: 17
JOB test speedup 1.0235527931011479
TPCH test speedup 4.323365221163952
TPCH skew test speedup 3.9737126514679004
Epoch 36/300 |loss: 0.001134| train set 5.036x speedup, test set 3.974x speedup, val set 5.167x speedup, step: 18
JOB test speedup 0.9534462364565695
TPCH test speedup 4.05908061409422
TPCH skew test speedup 3.752700452392025
Epoch 37/300 |loss: 0.001004| train set 5.036x speedup, test set 3.753x speedup, val set 5.313x speedup, step: 19
JOB test speedup 0.9012525293074031
TPCH test speedup 4.323537367321578
TPCH skew test speedup 3.973403231779901
Epoch 38/300 |loss: 0.001033| train set 5.098x speedup, test set 3.973x speedup, val set 5.156x speedup, step: 20
JOB test speedup 0.9642708286423924
TPCH test speedup 4.025244473603409
TPCH skew test speedup 3.7299311613294512
Epoch 39/300 |loss: 0.000848| train set 5.132x speedup, test set 3.730x speedup, val set 4.868x speedup, step: 21
JOB test speedup 0.8915667467736214
TPCH test speedup 4.338413263735472
TPCH skew test speedup 4.03898080809855
Epoch 40/300 |loss: 0.000883| train set 4.981x speedup, test set 4.039x speedup, val set 5.259x speedup, step: 22
JOB test speedup 0.9242109720876891
TPCH test speedup 4.0076465972391
TPCH skew test speedup 3.742349392061273
Epoch 41/300 |loss: 0.000817| train set 5.121x speedup, test set 3.742x speedup, val set 4.733x speedup, step: 23
JOB test speedup 0.9664642040291208
TPCH test speedup 4.0705394230585785
TPCH skew test speedup 3.8139390120889147
Epoch 42/300 |loss: 0.000799| train set 5.100x speedup, test set 3.814x speedup, val set 5.238x speedup, step: 24
JOB test speedup 0.9309722067424406
TPCH test speedup 4.020541320310436
TPCH skew test speedup 3.8583535388927026
Epoch 43/300 |loss: 0.000858| train set 5.108x speedup, test set 3.858x speedup, val set 5.277x speedup, step: 25
JOB test speedup 0.9541335386212342
TPCH test speedup 4.231011626216102
TPCH skew test speedup 3.9187816211564432
Epoch 44/300 |loss: 0.000750| train set 5.132x speedup, test set 3.919x speedup, val set 5.164x speedup, step: 26
JOB test speedup 0.8810205260853022
TPCH test speedup 4.040603983539076
TPCH skew test speedup 3.7427766673956535
Epoch 45/300 |loss: 0.000834| train set 5.061x speedup, test set 3.743x speedup, val set 5.189x speedup, step: 27
JOB test speedup 0.8758129754807401
TPCH test speedup 4.016763989575031
TPCH skew test speedup 3.7229063881224342
Epoch 46/300 |loss: 0.000941| train set 5.085x speedup, test set 3.723x speedup, val set 4.717x speedup, step: 28
JOB test speedup 0.9270388518769098
TPCH test speedup 4.301969947899668
TPCH skew test speedup 3.9598966701043072
Epoch 47/300 |loss: 0.000661| train set 5.096x speedup, test set 3.960x speedup, val set 5.169x speedup, step: 29
JOB test speedup 0.8875711159574763
TPCH test speedup 4.024726454945902
TPCH skew test speedup 3.7560948766144
Epoch 48/300 |loss: 0.000600| train set 5.126x speedup, test set 3.756x speedup, val set 4.720x speedup, step: 30
JOB test speedup 0.9435891467692274
TPCH test speedup 4.006869737565801
TPCH skew test speedup 3.740374172839148
Epoch 49/300 |loss: 0.000654| train set 5.124x speedup, test set 3.740x speedup, val set 5.141x speedup, step: 31
JOB test speedup 0.9234001180187277
TPCH test speedup 3.9711810000132486
TPCH skew test speedup 3.7075921899592617
Epoch 50/300 |loss: 0.000560| train set 4.965x speedup, test set 3.708x speedup, val set 5.289x speedup, step: 32
JOB test speedup 0.9449624502444413
TPCH test speedup 4.006685714154558
TPCH skew test speedup 3.7413808526362415
Epoch 51/300 |loss: 0.000567| train set 5.041x speedup, test set 3.741x speedup, val set 4.733x speedup, step: 33
JOB test speedup 0.9389540140229884
TPCH test speedup 4.323437374963565
TPCH skew test speedup 4.0255853720984325
Epoch 52/300 |loss: 0.000551| train set 5.101x speedup, test set 4.026x speedup, val set 5.317x speedup, step: 34
JOB test speedup 0.9356784040188567
TPCH test speedup 4.301560640071024
TPCH skew test speedup 3.9574917234752682
Epoch 53/300 |loss: 0.000577| train set 5.111x speedup, test set 3.957x speedup, val set 5.296x speedup, step: 35
JOB test speedup 0.9446447662412427
TPCH test speedup 4.026719608697947
TPCH skew test speedup 3.7296741656908297
Epoch 54/300 |loss: 0.000508| train set 5.133x speedup, test set 3.730x speedup, val set 5.299x speedup, step: 1
JOB test speedup 0.9827084269326167
TPCH test speedup 4.011998301033927
TPCH skew test speedup 3.732856012249881
Epoch 55/300 |loss: 0.000611| train set 5.101x speedup, test set 3.733x speedup, val set 5.239x speedup, step: 2
JOB test speedup 0.9441532523508371
TPCH test speedup 4.026573581402843
TPCH skew test speedup 3.7291253438763277
Epoch 56/300 |loss: 0.000764| train set 5.107x speedup, test set 3.729x speedup, val set 4.818x speedup, step: 3
JOB test speedup 0.9430552842658366
TPCH test speedup 4.337215207438286
TPCH skew test speedup 4.036354771307903
Epoch 57/300 |loss: 0.000629| train set 5.127x speedup, test set 4.036x speedup, val set 5.288x speedup, step: 4
early stopping at epoch 57
Training per epoch cost 3.501 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 5.933s, pg runtime 5.855s, speedup 0.987x
03, opt runtime 0.207s, model runtime 0.238s, pg runtime 0.207s, speedup 0.868x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 3.108s, pg runtime 57.198s, speedup 18.401x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.392s, pg runtime 0.354s, speedup 0.901x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.087s, pg runtime 0.089s, speedup 1.024x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.163s, pg runtime 2.389s, speedup 14.664x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.171s, pg runtime 0.239s, speedup 1.394x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.158s, pg runtime 0.158s, speedup 1.000x
30, opt runtime 1.646s, model runtime 4.938s, pg runtime 4.855s, speedup 0.983x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 60.311s, pg runtime 112.305s, speedup 1.862x
04, opt runtime 30.267s, model runtime 57.401s, pg runtime 100.885s, speedup 1.758x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.438s, pg runtime 1.438s, speedup 1.000x
20, opt runtime 1.428s, model runtime 1.428s, pg runtime 1.428s, speedup 1.000x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 3.201s, pg runtime 1.752s, speedup 0.547x
26, opt runtime 1.423s, model runtime 3.228s, pg runtime 1.423s, speedup 0.441x
27, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 32.681s, pg runtime 626.529s, speedup 19.171x
32, opt runtime 24.662s, model runtime 32.192s, pg runtime 613.999s, speedup 19.073x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 62.841s, pg runtime 123.411s, speedup 1.964x
04, opt runtime 31.996s, model runtime 57.217s, pg runtime 120.854s, speedup 2.112x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.308s, model runtime 1.528s, pg runtime 1.528s, speedup 1.000x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 3.295s, pg runtime 1.433s, speedup 0.435x
26, opt runtime 1.420s, model runtime 3.248s, pg runtime 1.420s, speedup 0.437x
27, opt runtime 7.419s, model runtime 9.598s, pg runtime 7.675s, speedup 0.800x
28, opt runtime 7.312s, model runtime 9.807s, pg runtime 7.655s, speedup 0.781x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 34.623s, pg runtime 644.779s, speedup 18.623x
32, opt runtime 25.478s, model runtime 35.320s, pg runtime 642.079s, speedup 18.179x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 54, train speedup 5.133, test speedup 0.945, val speedup 5.299
TPCH best validation speedup epoch: 54, train speedup 5.133, test speedup 4.027, val speedup 5.299
TPCH Skew best validation speedup epoch: 54, train speedup 5.133, test speedup 3.730, val speedup 5.299
execution cost 0:04:37.363975
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.616450, and there are 12152 training samples
in channel 9
JOB test speedup 0.8332574965365315
TPCH test speedup 2.7008538715679307
TPCH skew test speedup 2.4919791006059993
Epoch 0/300 |loss: 0.030404| train set 2.230x speedup, test set 2.492x speedup, val set 2.187x speedup, step: 1
JOB test speedup 1.7782118783959584
TPCH test speedup 2.6574002196825117
TPCH skew test speedup 2.5859402215194427
Epoch 1/300 |loss: 0.011531| train set 2.467x speedup, test set 2.586x speedup, val set 2.446x speedup, step: 2
JOB test speedup 1.6380192951665835
TPCH test speedup 2.9631375311939974
TPCH skew test speedup 2.8548075407205884
Epoch 2/300 |loss: 0.008415| train set 2.729x speedup, test set 2.855x speedup, val set 2.860x speedup, step: 3
JOB test speedup 2.0312329849895763
TPCH test speedup 3.543474685469055
TPCH skew test speedup 3.2635243140468595
Epoch 3/300 |loss: 0.006277| train set 3.570x speedup, test set 3.264x speedup, val set 3.825x speedup, step: 4
JOB test speedup 1.9769674812291886
TPCH test speedup 3.9214402727212727
TPCH skew test speedup 3.6483964031854477
Epoch 4/300 |loss: 0.005590| train set 3.946x speedup, test set 3.648x speedup, val set 4.261x speedup, step: 1
JOB test speedup 1.1761568546065688
TPCH test speedup 4.427163153658062
TPCH skew test speedup 4.1091548918837235
Epoch 5/300 |loss: 0.005858| train set 3.683x speedup, test set 4.109x speedup, val set 4.079x speedup, step: 2
JOB test speedup 1.272763871734566
TPCH test speedup 4.366162395343502
TPCH skew test speedup 4.103742550312946
Epoch 6/300 |loss: 0.004124| train set 4.493x speedup, test set 4.104x speedup, val set 5.051x speedup, step: 3
JOB test speedup 1.2623158226364621
TPCH test speedup 4.049416105658114
TPCH skew test speedup 3.836611841025517
Epoch 7/300 |loss: 0.003763| train set 4.297x speedup, test set 3.837x speedup, val set 4.792x speedup, step: 4
JOB test speedup 1.2241962707044687
TPCH test speedup 4.021680300853483
TPCH skew test speedup 3.754964934328749
Epoch 8/300 |loss: 0.003464| train set 4.596x speedup, test set 3.755x speedup, val set 4.660x speedup, step: 5
JOB test speedup 0.7350110479275036
TPCH test speedup 4.316701739393713
TPCH skew test speedup 4.018010899156635
Epoch 9/300 |loss: 0.002918| train set 4.871x speedup, test set 4.018x speedup, val set 5.212x speedup, step: 1
JOB test speedup 1.228306541324892
TPCH test speedup 4.39912838762691
TPCH skew test speedup 4.058537373762649
Epoch 10/300 |loss: 0.002954| train set 4.884x speedup, test set 4.059x speedup, val set 5.328x speedup, step: 2
JOB test speedup 0.6944279848121977
TPCH test speedup 4.320814293036824
TPCH skew test speedup 3.994136573122484
Epoch 11/300 |loss: 0.002817| train set 4.742x speedup, test set 3.994x speedup, val set 4.818x speedup, step: 3
JOB test speedup 1.3136355513238986
TPCH test speedup 4.238676400346598
TPCH skew test speedup 3.934890884916573
Epoch 12/300 |loss: 0.002724| train set 5.030x speedup, test set 3.935x speedup, val set 5.247x speedup, step: 4
JOB test speedup 2.0414977282630113
TPCH test speedup 4.355672214051532
TPCH skew test speedup 4.027460454468837
Epoch 13/300 |loss: 0.002418| train set 4.641x speedup, test set 4.027x speedup, val set 4.996x speedup, step: 5
JOB test speedup 0.9856395217025365
TPCH test speedup 4.355852864342867
TPCH skew test speedup 4.02235953117922
Epoch 14/300 |loss: 0.002498| train set 5.076x speedup, test set 4.022x speedup, val set 5.242x speedup, step: 1
JOB test speedup 0.9605266160226686
TPCH test speedup 4.353313882358653
TPCH skew test speedup 4.025434580963563
Epoch 15/300 |loss: 0.001878| train set 5.047x speedup, test set 4.025x speedup, val set 5.221x speedup, step: 2
JOB test speedup 0.9967676871237974
TPCH test speedup 4.345973251628245
TPCH skew test speedup 4.026038056860644
Epoch 16/300 |loss: 0.002087| train set 5.097x speedup, test set 4.026x speedup, val set 5.198x speedup, step: 3
JOB test speedup 0.9863804254217822
TPCH test speedup 4.32150348297781
TPCH skew test speedup 3.972210592882073
Epoch 17/300 |loss: 0.002071| train set 5.106x speedup, test set 3.972x speedup, val set 5.170x speedup, step: 4
JOB test speedup 1.007135676396305
TPCH test speedup 4.303403874622933
TPCH skew test speedup 4.000687492367086
Epoch 18/300 |loss: 0.001987| train set 4.787x speedup, test set 4.001x speedup, val set 4.942x speedup, step: 5
JOB test speedup 1.0014835857360422
TPCH test speedup 4.388272139342797
TPCH skew test speedup 4.016893728367046
Epoch 19/300 |loss: 0.001684| train set 5.040x speedup, test set 4.017x speedup, val set 5.316x speedup, step: 1
JOB test speedup 1.3290864331968884
TPCH test speedup 4.360342329327936
TPCH skew test speedup 4.061830521888769
Epoch 20/300 |loss: 0.001653| train set 5.069x speedup, test set 4.062x speedup, val set 5.247x speedup, step: 2
JOB test speedup 0.9952230447596987
TPCH test speedup 4.357621097883084
TPCH skew test speedup 4.058294001771215
Epoch 21/300 |loss: 0.001944| train set 5.091x speedup, test set 4.058x speedup, val set 5.312x speedup, step: 3
JOB test speedup 1.0315779589489218
TPCH test speedup 4.274267630998944
TPCH skew test speedup 3.987511074637675
Epoch 22/300 |loss: 0.002033| train set 4.995x speedup, test set 3.988x speedup, val set 5.151x speedup, step: 4
JOB test speedup 1.0275515730563511
TPCH test speedup 4.317714076587781
TPCH skew test speedup 3.99522357350969
Epoch 23/300 |loss: 0.001716| train set 5.118x speedup, test set 3.995x speedup, val set 5.222x speedup, step: 5
JOB test speedup 0.9071421359977528
TPCH test speedup 4.387983543266114
TPCH skew test speedup 4.049933897954762
Epoch 24/300 |loss: 0.001724| train set 5.110x speedup, test set 4.050x speedup, val set 5.306x speedup, step: 6
JOB test speedup 0.9894154579083091
TPCH test speedup 4.2877684276230195
TPCH skew test speedup 3.944765174781101
Epoch 25/300 |loss: 0.001465| train set 5.061x speedup, test set 3.945x speedup, val set 5.084x speedup, step: 7
JOB test speedup 0.9859202413441777
TPCH test speedup 4.276905836414343
TPCH skew test speedup 3.940420814505817
Epoch 26/300 |loss: 0.001633| train set 5.057x speedup, test set 3.940x speedup, val set 5.212x speedup, step: 8
JOB test speedup 1.2884602923066695
TPCH test speedup 4.182393081280628
TPCH skew test speedup 3.8879321200777657
Epoch 27/300 |loss: 0.001340| train set 5.090x speedup, test set 3.888x speedup, val set 5.089x speedup, step: 9
JOB test speedup 1.377370360248312
TPCH test speedup 3.947820953662961
TPCH skew test speedup 3.701627544844574
Epoch 28/300 |loss: 0.001286| train set 5.016x speedup, test set 3.702x speedup, val set 4.989x speedup, step: 10
JOB test speedup 1.3461486099847213
TPCH test speedup 4.285726019514237
TPCH skew test speedup 3.9507595607050194
Epoch 29/300 |loss: 0.001186| train set 5.084x speedup, test set 3.951x speedup, val set 5.231x speedup, step: 11
JOB test speedup 2.1009807900037387
TPCH test speedup 4.277951562623972
TPCH skew test speedup 3.9895444547020125
Epoch 30/300 |loss: 0.001262| train set 5.084x speedup, test set 3.990x speedup, val set 5.131x speedup, step: 12
JOB test speedup 2.122812777996425
TPCH test speedup 4.315929480087623
TPCH skew test speedup 4.023061995607964
Epoch 31/300 |loss: 0.001121| train set 5.003x speedup, test set 4.023x speedup, val set 5.165x speedup, step: 13
JOB test speedup 1.3602618068979162
TPCH test speedup 3.976474631318555
TPCH skew test speedup 3.699200713481733
Epoch 32/300 |loss: 0.001306| train set 5.001x speedup, test set 3.699x speedup, val set 5.044x speedup, step: 14
JOB test speedup 1.3514012597985543
TPCH test speedup 3.985609335882897
TPCH skew test speedup 3.69803544654901
Epoch 33/300 |loss: 0.001334| train set 5.042x speedup, test set 3.698x speedup, val set 5.145x speedup, step: 15
JOB test speedup 1.3340485648353324
TPCH test speedup 3.9938026438002376
TPCH skew test speedup 3.733484709841089
Epoch 34/300 |loss: 0.000964| train set 5.110x speedup, test set 3.733x speedup, val set 5.051x speedup, step: 16
JOB test speedup 1.3242688946364491
TPCH test speedup 3.9347625458448245
TPCH skew test speedup 3.6785946544492267
Epoch 35/300 |loss: 0.000931| train set 5.126x speedup, test set 3.679x speedup, val set 5.106x speedup, step: 17
JOB test speedup 1.3606898739973963
TPCH test speedup 4.2725583129776465
TPCH skew test speedup 3.9753028215428294
Epoch 36/300 |loss: 0.001173| train set 5.021x speedup, test set 3.975x speedup, val set 5.254x speedup, step: 18
JOB test speedup 1.3683739406524666
TPCH test speedup 3.952537581042019
TPCH skew test speedup 3.696197986624948
Epoch 37/300 |loss: 0.000895| train set 5.038x speedup, test set 3.696x speedup, val set 5.289x speedup, step: 19
JOB test speedup 1.37218124484857
TPCH test speedup 3.9909882699362806
TPCH skew test speedup 3.7285922691556985
Epoch 38/300 |loss: 0.000985| train set 5.099x speedup, test set 3.729x speedup, val set 5.040x speedup, step: 20
JOB test speedup 1.3420384880783993
TPCH test speedup 3.9414047911720904
TPCH skew test speedup 3.686700856433884
Epoch 39/300 |loss: 0.000755| train set 5.124x speedup, test set 3.687x speedup, val set 5.075x speedup, step: 21
JOB test speedup 1.3950401994564317
TPCH test speedup 3.970041529759882
TPCH skew test speedup 3.7088297300982354
Epoch 40/300 |loss: 0.000750| train set 5.130x speedup, test set 3.709x speedup, val set 5.092x speedup, step: 22
JOB test speedup 1.374977655024661
TPCH test speedup 4.01697967308403
TPCH skew test speedup 3.7264081037437964
Epoch 41/300 |loss: 0.000792| train set 5.126x speedup, test set 3.726x speedup, val set 4.658x speedup, step: 23
JOB test speedup 1.3253163911592607
TPCH test speedup 3.954001930811098
TPCH skew test speedup 3.680760777358744
Epoch 42/300 |loss: 0.000718| train set 5.131x speedup, test set 3.681x speedup, val set 4.750x speedup, step: 24
JOB test speedup 1.3835789921208803
TPCH test speedup 3.974776605207541
TPCH skew test speedup 3.713702510170581
Epoch 43/300 |loss: 0.000777| train set 4.990x speedup, test set 3.714x speedup, val set 5.177x speedup, step: 25
JOB test speedup 1.382344503762099
TPCH test speedup 3.9496263694102156
TPCH skew test speedup 3.694051351054898
Epoch 44/300 |loss: 0.000691| train set 5.115x speedup, test set 3.694x speedup, val set 5.077x speedup, step: 26
JOB test speedup 1.3400060046951545
TPCH test speedup 3.9689180221029683
TPCH skew test speedup 3.7088677226443885
Epoch 45/300 |loss: 0.000804| train set 5.068x speedup, test set 3.709x speedup, val set 5.053x speedup, step: 27
JOB test speedup 1.1920970038124044
TPCH test speedup 3.926895382704459
TPCH skew test speedup 3.6689762459447657
Epoch 46/300 |loss: 0.001067| train set 4.947x speedup, test set 3.669x speedup, val set 4.102x speedup, step: 28
JOB test speedup 1.3475578154650913
TPCH test speedup 4.007926639325947
TPCH skew test speedup 3.7177046550447312
Epoch 47/300 |loss: 0.000750| train set 5.092x speedup, test set 3.718x speedup, val set 5.055x speedup, step: 29
JOB test speedup 1.3036833623711346
TPCH test speedup 3.9893893292898173
TPCH skew test speedup 3.701831699192181
Epoch 48/300 |loss: 0.000607| train set 5.129x speedup, test set 3.702x speedup, val set 5.059x speedup, step: 30
JOB test speedup 1.3186291919585142
TPCH test speedup 3.9707554091825923
TPCH skew test speedup 3.710614923545014
Epoch 49/300 |loss: 0.000604| train set 5.120x speedup, test set 3.711x speedup, val set 5.279x speedup, step: 31
JOB test speedup 1.3262094647043388
TPCH test speedup 3.952771739378386
TPCH skew test speedup 3.694851790729866
Epoch 50/300 |loss: 0.000577| train set 5.101x speedup, test set 3.695x speedup, val set 4.573x speedup, step: 32
JOB test speedup 1.3285680419179686
TPCH test speedup 4.009776826939454
TPCH skew test speedup 3.741781278227439
Epoch 51/300 |loss: 0.000530| train set 5.130x speedup, test set 3.742x speedup, val set 4.704x speedup, step: 33
JOB test speedup 1.333267331791167
TPCH test speedup 4.00035607946686
TPCH skew test speedup 3.735410318992248
Epoch 52/300 |loss: 0.000514| train set 5.094x speedup, test set 3.735x speedup, val set 5.192x speedup, step: 34
JOB test speedup 1.322297343678134
TPCH test speedup 3.9800600619960873
TPCH skew test speedup 3.717883929112897
Epoch 53/300 |loss: 0.000523| train set 5.134x speedup, test set 3.718x speedup, val set 5.130x speedup, step: 35
JOB test speedup 1.2851049162328347
TPCH test speedup 3.99939868876938
TPCH skew test speedup 3.734445367510428
Epoch 54/300 |loss: 0.000496| train set 5.129x speedup, test set 3.734x speedup, val set 4.689x speedup, step: 36
JOB test speedup 1.3381041916089815
TPCH test speedup 3.97987849286526
TPCH skew test speedup 3.718878537701903
Epoch 55/300 |loss: 0.000668| train set 5.115x speedup, test set 3.719x speedup, val set 4.994x speedup, step: 37
JOB test speedup 1.2053711931364866
TPCH test speedup 3.9707554091825923
TPCH skew test speedup 3.710614923545014
Epoch 56/300 |loss: 0.000683| train set 5.135x speedup, test set 3.711x speedup, val set 4.595x speedup, step: 38
JOB test speedup 1.3143022330453127
TPCH test speedup 4.002261894199104
TPCH skew test speedup 3.713010927302061
Epoch 57/300 |loss: 0.000623| train set 5.119x speedup, test set 3.713x speedup, val set 5.236x speedup, step: 39
early stopping at epoch 57
Training per epoch cost 3.502 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.084s, pg runtime 0.081s, speedup 0.961x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.238s, pg runtime 0.207s, speedup 0.868x
04, opt runtime 0.920s, model runtime 0.920s, pg runtime 1.680s, speedup 1.825x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.885s, pg runtime 2.718s, speedup 0.942x
16, opt runtime 0.441s, model runtime 0.468s, pg runtime 0.453s, speedup 0.969x
17, opt runtime 0.327s, model runtime 0.392s, pg runtime 0.354s, speedup 0.901x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.087s, pg runtime 0.089s, speedup 1.024x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.322s, pg runtime 2.389s, speedup 7.421x
23, opt runtime 0.389s, model runtime 0.433s, pg runtime 0.389s, speedup 0.898x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.179s, pg runtime 0.157s, speedup 0.875x
29, opt runtime 0.158s, model runtime 0.161s, pg runtime 0.158s, speedup 0.986x
30, opt runtime 1.646s, model runtime 4.938s, pg runtime 4.855s, speedup 0.983x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 2.923s, pg runtime 5.521s, speedup 1.889x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.457s, pg runtime 1.438s, speedup 0.987x
20, opt runtime 1.428s, model runtime 1.528s, pg runtime 1.428s, speedup 0.934x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 2.529s, pg runtime 1.752s, speedup 0.693x
26, opt runtime 1.423s, model runtime 2.393s, pg runtime 1.423s, speedup 0.594x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.308s, model runtime 1.377s, pg runtime 1.528s, speedup 1.110x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.433s, model runtime 2.260s, pg runtime 1.433s, speedup 0.634x
26, opt runtime 1.420s, model runtime 2.491s, pg runtime 1.420s, speedup 0.570x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 19, train speedup 5.040, test speedup 1.001, val speedup 5.316
TPCH best validation speedup epoch: 19, train speedup 5.040, test speedup 4.388, val speedup 5.316
TPCH Skew best validation speedup epoch: 19, train speedup 5.040, test speedup 4.017, val speedup 5.316
execution cost 0:04:37.538206
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.613539, and there are 12152 training samples
in channel 9
JOB test speedup 0.8332574965365315
TPCH test speedup 2.7008538715679307
TPCH skew test speedup 2.4919791006059993
Epoch 0/300 |loss: 0.030404| train set 2.230x speedup, test set 2.492x speedup, val set 2.187x speedup, step: 1
JOB test speedup 1.7782118783959584
TPCH test speedup 2.6574002196825117
TPCH skew test speedup 2.5859402215194427
Epoch 1/300 |loss: 0.011531| train set 2.467x speedup, test set 2.586x speedup, val set 2.446x speedup, step: 2
JOB test speedup 1.6032347068281123
TPCH test speedup 2.9671356852209896
TPCH skew test speedup 2.8588587842813658
Epoch 2/300 |loss: 0.008403| train set 2.834x speedup, test set 2.859x speedup, val set 2.866x speedup, step: 3
JOB test speedup 2.008008768742109
TPCH test speedup 3.4535040120290046
TPCH skew test speedup 3.0504444252015563
Epoch 3/300 |loss: 0.006335| train set 3.634x speedup, test set 3.050x speedup, val set 3.543x speedup, step: 4
JOB test speedup 1.9246444300324164
TPCH test speedup 3.7840322268883964
TPCH skew test speedup 3.546152538489025
Epoch 4/300 |loss: 0.005804| train set 3.857x speedup, test set 3.546x speedup, val set 3.849x speedup, step: 1
JOB test speedup 1.8477295007678807
TPCH test speedup 4.388899389428954
TPCH skew test speedup 3.858837245543846
Epoch 5/300 |loss: 0.005796| train set 4.013x speedup, test set 3.859x speedup, val set 4.811x speedup, step: 2
JOB test speedup 1.2688001909610063
TPCH test speedup 4.296366100266577
TPCH skew test speedup 4.002005586952157
Epoch 6/300 |loss: 0.004077| train set 4.564x speedup, test set 4.002x speedup, val set 5.051x speedup, step: 3
JOB test speedup 1.2559475240643314
TPCH test speedup 3.8057676022284355
TPCH skew test speedup 3.5600920983950606
Epoch 7/300 |loss: 0.003778| train set 4.279x speedup, test set 3.560x speedup, val set 4.845x speedup, step: 4
JOB test speedup 1.3059851499807067
TPCH test speedup 4.157845019408523
TPCH skew test speedup 3.84891723503562
Epoch 8/300 |loss: 0.003535| train set 4.191x speedup, test set 3.849x speedup, val set 5.164x speedup, step: 5
JOB test speedup 0.5562289233635775
TPCH test speedup 4.349213129281417
TPCH skew test speedup 4.0199082021873025
Epoch 9/300 |loss: 0.002860| train set 4.891x speedup, test set 4.020x speedup, val set 5.245x speedup, step: 1
JOB test speedup 0.8088319925021616
TPCH test speedup 4.298103346313899
TPCH skew test speedup 3.976506244952842
Epoch 10/300 |loss: 0.003032| train set 4.999x speedup, test set 3.977x speedup, val set 5.216x speedup, step: 2
JOB test speedup 0.5640357340727356
TPCH test speedup 4.081018303445442
TPCH skew test speedup 3.8537230651341856
Epoch 11/300 |loss: 0.002977| train set 4.740x speedup, test set 3.854x speedup, val set 4.769x speedup, step: 3
JOB test speedup 1.293341636566905
TPCH test speedup 4.350872306151465
TPCH skew test speedup 4.022739454111175
Epoch 12/300 |loss: 0.002941| train set 5.007x speedup, test set 4.023x speedup, val set 5.221x speedup, step: 4
JOB test speedup 0.9949872690326785
TPCH test speedup 4.351923866435392
TPCH skew test speedup 4.023378109006486
Epoch 13/300 |loss: 0.002627| train set 5.038x speedup, test set 4.023x speedup, val set 5.247x speedup, step: 5
JOB test speedup 0.9583080562321825
TPCH test speedup 4.235197749344413
TPCH skew test speedup 3.913048316354259
Epoch 14/300 |loss: 0.002401| train set 4.955x speedup, test set 3.913x speedup, val set 5.126x speedup, step: 6
JOB test speedup 0.93820697076458
TPCH test speedup 4.235197749344413
TPCH skew test speedup 3.913048316354259
Epoch 15/300 |loss: 0.001956| train set 5.082x speedup, test set 3.913x speedup, val set 5.128x speedup, step: 7
JOB test speedup 0.9312075658334
TPCH test speedup 4.317434686151448
TPCH skew test speedup 3.9956928874919857
Epoch 16/300 |loss: 0.002330| train set 4.953x speedup, test set 3.996x speedup, val set 5.141x speedup, step: 8
JOB test speedup 0.9934302147846377
TPCH test speedup 4.287548455285269
TPCH skew test speedup 3.946009227906499
Epoch 17/300 |loss: 0.002166| train set 5.120x speedup, test set 3.946x speedup, val set 5.220x speedup, step: 9
JOB test speedup 1.0031144449775378
TPCH test speedup 4.319372088785828
TPCH skew test speedup 4.021477529906092
Epoch 18/300 |loss: 0.002001| train set 4.982x speedup, test set 4.021x speedup, val set 5.152x speedup, step: 10
JOB test speedup 0.9950347975772295
TPCH test speedup 4.399103574998074
TPCH skew test speedup 4.028683238590758
Epoch 19/300 |loss: 0.001702| train set 5.099x speedup, test set 4.029x speedup, val set 5.270x speedup, step: 1
JOB test speedup 0.9486314379103123
TPCH test speedup 4.331374895621769
TPCH skew test speedup 4.0012484480284245
Epoch 20/300 |loss: 0.001805| train set 5.031x speedup, test set 4.001x speedup, val set 5.197x speedup, step: 2
JOB test speedup 0.9778373427847273
TPCH test speedup 4.2890726498920815
TPCH skew test speedup 4.010492388010198
Epoch 21/300 |loss: 0.002077| train set 4.902x speedup, test set 4.010x speedup, val set 5.183x speedup, step: 3
JOB test speedup 0.961162301122342
TPCH test speedup 4.242641558701337
TPCH skew test speedup 3.911991296699964
Epoch 22/300 |loss: 0.001948| train set 4.968x speedup, test set 3.912x speedup, val set 5.128x speedup, step: 4
JOB test speedup 0.9677302124255492
TPCH test speedup 4.340785773440274
TPCH skew test speedup 3.9965782006062502
Epoch 23/300 |loss: 0.001877| train set 4.722x speedup, test set 3.997x speedup, val set 5.160x speedup, step: 5
JOB test speedup 1.1747220741583422
TPCH test speedup 4.379582618937833
TPCH skew test speedup 4.041197475516054
Epoch 24/300 |loss: 0.001644| train set 5.091x speedup, test set 4.041x speedup, val set 5.314x speedup, step: 1
JOB test speedup 0.9552942288885826
TPCH test speedup 4.228308788177437
TPCH skew test speedup 3.924500266970649
Epoch 25/300 |loss: 0.001472| train set 5.076x speedup, test set 3.925x speedup, val set 5.216x speedup, step: 2
JOB test speedup 1.2375353918377208
TPCH test speedup 4.264252819314439
TPCH skew test speedup 3.938182931204736
Epoch 26/300 |loss: 0.001676| train set 5.092x speedup, test set 3.938x speedup, val set 5.045x speedup, step: 3
JOB test speedup 0.9332810096492444
TPCH test speedup 4.263130002851229
TPCH skew test speedup 3.9523168682641816
Epoch 27/300 |loss: 0.001297| train set 5.029x speedup, test set 3.952x speedup, val set 5.137x speedup, step: 4
JOB test speedup 1.3183621776381922
TPCH test speedup 4.236147090812456
TPCH skew test speedup 3.9108683292382076
Epoch 28/300 |loss: 0.001245| train set 4.938x speedup, test set 3.911x speedup, val set 5.139x speedup, step: 5
JOB test speedup 1.2530204994149126
TPCH test speedup 4.321656792293654
TPCH skew test speedup 3.9463195954785255
Epoch 29/300 |loss: 0.001197| train set 5.118x speedup, test set 3.946x speedup, val set 5.315x speedup, step: 1
JOB test speedup 0.9385660878300337
TPCH test speedup 4.349727606503155
TPCH skew test speedup 4.004330191092309
Epoch 30/300 |loss: 0.001313| train set 5.074x speedup, test set 4.004x speedup, val set 5.123x speedup, step: 2
JOB test speedup 1.1732244685442665
TPCH test speedup 4.215563317053175
TPCH skew test speedup 3.995880028499061
Epoch 31/300 |loss: 0.001117| train set 5.062x speedup, test set 3.996x speedup, val set 5.210x speedup, step: 3
JOB test speedup 1.2149538923243948
TPCH test speedup 4.2299311751083515
TPCH skew test speedup 3.8942797550283013
Epoch 32/300 |loss: 0.001305| train set 4.947x speedup, test set 3.894x speedup, val set 5.118x speedup, step: 4
JOB test speedup 1.3006177713004592
TPCH test speedup 4.025978581948458
TPCH skew test speedup 3.7322326801926535
Epoch 33/300 |loss: 0.001465| train set 5.074x speedup, test set 3.732x speedup, val set 5.265x speedup, step: 5
JOB test speedup 1.2587388096766787
TPCH test speedup 4.264873577255305
TPCH skew test speedup 3.9556421174451715
Epoch 34/300 |loss: 0.001108| train set 5.095x speedup, test set 3.956x speedup, val set 5.161x speedup, step: 6
JOB test speedup 1.3429207158136325
TPCH test speedup 4.005847774969904
TPCH skew test speedup 3.738121966365642
Epoch 35/300 |loss: 0.000917| train set 5.116x speedup, test set 3.738x speedup, val set 5.284x speedup, step: 7
JOB test speedup 1.278842471732068
TPCH test speedup 4.275667882390074
TPCH skew test speedup 3.9255793692033008
Epoch 36/300 |loss: 0.001129| train set 5.107x speedup, test set 3.926x speedup, val set 5.146x speedup, step: 8
JOB test speedup 1.2719582365670785
TPCH test speedup 4.281816313767166
TPCH skew test speedup 3.969196881749749
Epoch 37/300 |loss: 0.000905| train set 5.120x speedup, test set 3.969x speedup, val set 5.169x speedup, step: 9
JOB test speedup 1.1577735737315134
TPCH test speedup 4.232480433308518
TPCH skew test speedup 3.9224819328963836
Epoch 38/300 |loss: 0.001083| train set 5.012x speedup, test set 3.922x speedup, val set 5.220x speedup, step: 10
JOB test speedup 1.2607342055487596
TPCH test speedup 4.004690066324584
TPCH skew test speedup 3.739632499682847
Epoch 39/300 |loss: 0.000885| train set 5.118x speedup, test set 3.740x speedup, val set 5.130x speedup, step: 11
JOB test speedup 1.2907656292026402
TPCH test speedup 4.259368201921901
TPCH skew test speedup 3.8684981443775612
Epoch 40/300 |loss: 0.000899| train set 5.125x speedup, test set 3.868x speedup, val set 5.256x speedup, step: 12
JOB test speedup 1.256015944885439
TPCH test speedup 4.00814727564559
TPCH skew test speedup 3.741122276842435
Epoch 41/300 |loss: 0.000790| train set 5.100x speedup, test set 3.741x speedup, val set 5.063x speedup, step: 13
JOB test speedup 1.3206973727208706
TPCH test speedup 4.004690066324584
TPCH skew test speedup 3.739632499682847
Epoch 42/300 |loss: 0.000790| train set 5.125x speedup, test set 3.740x speedup, val set 5.300x speedup, step: 14
JOB test speedup 1.289247704647251
TPCH test speedup 3.7944845203363684
TPCH skew test speedup 3.75501326738345
Epoch 43/300 |loss: 0.000856| train set 5.099x speedup, test set 3.755x speedup, val set 5.288x speedup, step: 15
JOB test speedup 1.3016142541155888
TPCH test speedup 4.248094875627936
TPCH skew test speedup 3.95505970166944
Epoch 44/300 |loss: 0.000665| train set 5.123x speedup, test set 3.955x speedup, val set 5.290x speedup, step: 16
JOB test speedup 0.9554483996642843
TPCH test speedup 3.961675641331812
TPCH skew test speedup 3.693174748063599
Epoch 45/300 |loss: 0.000896| train set 5.088x speedup, test set 3.693x speedup, val set 4.769x speedup, step: 17
JOB test speedup 1.2669320172934646
TPCH test speedup 3.825441087869917
TPCH skew test speedup 3.757577502170253
Epoch 46/300 |loss: 0.000818| train set 5.125x speedup, test set 3.758x speedup, val set 5.306x speedup, step: 18
JOB test speedup 1.2142013832991925
TPCH test speedup 4.321074732200604
TPCH skew test speedup 3.9766755424797133
Epoch 47/300 |loss: 0.000771| train set 5.116x speedup, test set 3.977x speedup, val set 5.157x speedup, step: 19
JOB test speedup 1.153968409425801
TPCH test speedup 3.964215424375008
TPCH skew test speedup 3.7149735799376944
Epoch 48/300 |loss: 0.000639| train set 5.013x speedup, test set 3.715x speedup, val set 5.158x speedup, step: 20
JOB test speedup 0.7835151912242745
TPCH test speedup 4.247726343335209
TPCH skew test speedup 3.93146858600654
Epoch 49/300 |loss: 0.000664| train set 5.094x speedup, test set 3.931x speedup, val set 5.235x speedup, step: 21
JOB test speedup 1.2341349042858583
TPCH test speedup 3.994589243234888
TPCH skew test speedup 3.7276650816613572
Epoch 50/300 |loss: 0.000615| train set 5.103x speedup, test set 3.728x speedup, val set 5.187x speedup, step: 22
JOB test speedup 1.2663521447424775
TPCH test speedup 4.038767269844703
TPCH skew test speedup 3.743816766261621
Epoch 51/300 |loss: 0.000568| train set 5.083x speedup, test set 3.744x speedup, val set 5.089x speedup, step: 23
JOB test speedup 1.2993716009852792
TPCH test speedup 4.192729259699528
TPCH skew test speedup 3.873308372873858
Epoch 52/300 |loss: 0.000534| train set 5.042x speedup, test set 3.873x speedup, val set 5.227x speedup, step: 24
JOB test speedup 1.2416260069101093
TPCH test speedup 4.232502139680961
TPCH skew test speedup 3.940021173699558
Epoch 53/300 |loss: 0.000617| train set 5.092x speedup, test set 3.940x speedup, val set 5.088x speedup, step: 25
JOB test speedup 1.2361292067201897
TPCH test speedup 4.2130558925449195
TPCH skew test speedup 3.861038297629149
Epoch 54/300 |loss: 0.000481| train set 5.110x speedup, test set 3.861x speedup, val set 5.134x speedup, step: 26
JOB test speedup 1.2582051400930108
TPCH test speedup 4.039992947949814
TPCH skew test speedup 3.7542206040207886
Epoch 55/300 |loss: 0.000521| train set 5.131x speedup, test set 3.754x speedup, val set 5.053x speedup, step: 27
JOB test speedup 1.263068050360149
TPCH test speedup 4.000211958002681
TPCH skew test speedup 3.734859807853446
Epoch 56/300 |loss: 0.000632| train set 5.077x speedup, test set 3.735x speedup, val set 4.667x speedup, step: 28
JOB test speedup 1.3122827062273599
TPCH test speedup 4.2691843768794095
TPCH skew test speedup 3.949203890267145
Epoch 57/300 |loss: 0.000669| train set 5.119x speedup, test set 3.949x speedup, val set 5.307x speedup, step: 29
JOB test speedup 1.2875035554883998
TPCH test speedup 4.0148461813529535
TPCH skew test speedup 3.7317411934465263
Epoch 58/300 |loss: 0.000563| train set 5.096x speedup, test set 3.732x speedup, val set 4.653x speedup, step: 30
JOB test speedup 1.301326173623917
TPCH test speedup 4.251538306224854
TPCH skew test speedup 3.9326555582640834
Epoch 59/300 |loss: 0.000633| train set 5.108x speedup, test set 3.933x speedup, val set 5.128x speedup, step: 31
JOB test speedup 1.2105512684003035
TPCH test speedup 3.9911127473809103
TPCH skew test speedup 3.6832049586851525
Epoch 60/300 |loss: 0.000583| train set 5.077x speedup, test set 3.683x speedup, val set 5.086x speedup, step: 32
early stopping at epoch 60
Training per epoch cost 3.485 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 3.393s, pg runtime 5.855s, speedup 1.726x
03, opt runtime 0.207s, model runtime 0.238s, pg runtime 0.207s, speedup 0.868x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.885s, pg runtime 2.718s, speedup 0.942x
16, opt runtime 0.441s, model runtime 0.474s, pg runtime 0.453s, speedup 0.956x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.962s, model runtime 8.622s, pg runtime 6.876s, speedup 0.798x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.093s, pg runtime 0.089s, speedup 0.956x
21, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 4.408s, pg runtime 3.112s, speedup 0.706x
25, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.218s, pg runtime 0.158s, speedup 0.728x
30, opt runtime 1.646s, model runtime 1.646s, pg runtime 4.855s, speedup 2.949x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.438s, pg runtime 1.438s, speedup 1.000x
20, opt runtime 1.428s, model runtime 1.428s, pg runtime 1.428s, speedup 1.000x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 32.681s, pg runtime 626.529s, speedup 19.171x
32, opt runtime 24.662s, model runtime 32.192s, pg runtime 613.999s, speedup 19.073x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.308s, model runtime 1.528s, pg runtime 1.528s, speedup 1.000x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 34.623s, pg runtime 644.779s, speedup 18.623x
32, opt runtime 25.478s, model runtime 35.320s, pg runtime 642.079s, speedup 18.179x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 29, train speedup 5.118, test speedup 1.253, val speedup 5.315
TPCH best validation speedup epoch: 29, train speedup 5.118, test speedup 4.322, val speedup 5.315
TPCH Skew best validation speedup epoch: 29, train speedup 5.118, test speedup 3.946, val speedup 5.315
execution cost 0:04:49.553203
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.678189, and there are 12152 training samples
in channel 9
JOB test speedup 0.8332574965365315
TPCH test speedup 2.7008538715679307
TPCH skew test speedup 2.4919791006059993
Epoch 0/300 |loss: 0.030404| train set 2.230x speedup, test set 2.492x speedup, val set 2.187x speedup, step: 1
JOB test speedup 1.7782118783959584
TPCH test speedup 2.6574002196825117
TPCH skew test speedup 2.5859402215194427
Epoch 1/300 |loss: 0.011531| train set 2.467x speedup, test set 2.586x speedup, val set 2.446x speedup, step: 2
JOB test speedup 1.6380192951665835
TPCH test speedup 2.9631375311939974
TPCH skew test speedup 2.8548075407205884
Epoch 2/300 |loss: 0.008415| train set 2.844x speedup, test set 2.855x speedup, val set 2.859x speedup, step: 3
JOB test speedup 2.0600392223660964
TPCH test speedup 3.4174125629987646
TPCH skew test speedup 3.175621250805335
Epoch 3/300 |loss: 0.006319| train set 3.103x speedup, test set 3.176x speedup, val set 3.824x speedup, step: 4
JOB test speedup 1.9769674812291886
TPCH test speedup 3.4779109342803434
TPCH skew test speedup 3.2219085816174657
Epoch 4/300 |loss: 0.005595| train set 3.545x speedup, test set 3.222x speedup, val set 3.539x speedup, step: 1
JOB test speedup 2.0129418766437204
TPCH test speedup 4.172971041862059
TPCH skew test speedup 4.000447070218017
Epoch 5/300 |loss: 0.005593| train set 3.469x speedup, test set 4.000x speedup, val set 4.917x speedup, step: 2
JOB test speedup 1.8383497314260127
TPCH test speedup 4.2851530197492815
TPCH skew test speedup 4.01724329231655
Epoch 6/300 |loss: 0.004147| train set 4.584x speedup, test set 4.017x speedup, val set 5.026x speedup, step: 3
JOB test speedup 1.3076510424550238
TPCH test speedup 4.093942100499131
TPCH skew test speedup 3.8918852563221216
Epoch 7/300 |loss: 0.003806| train set 4.419x speedup, test set 3.892x speedup, val set 4.855x speedup, step: 4
JOB test speedup 1.2761497643519488
TPCH test speedup 4.128173486957114
TPCH skew test speedup 3.6655711207287776
Epoch 8/300 |loss: 0.003620| train set 3.938x speedup, test set 3.666x speedup, val set 4.943x speedup, step: 5
JOB test speedup 0.7419694248197753
TPCH test speedup 4.2343715648206
TPCH skew test speedup 3.859092304976649
Epoch 9/300 |loss: 0.002966| train set 4.678x speedup, test set 3.859x speedup, val set 5.017x speedup, step: 1
JOB test speedup 1.256529439740722
TPCH test speedup 4.358571887106632
TPCH skew test speedup 4.023336810201782
Epoch 10/300 |loss: 0.003013| train set 4.839x speedup, test set 4.023x speedup, val set 5.136x speedup, step: 2
JOB test speedup 1.2491327162155477
TPCH test speedup 4.3542471855760425
TPCH skew test speedup 4.020345242765013
Epoch 11/300 |loss: 0.002869| train set 4.928x speedup, test set 4.020x speedup, val set 5.244x speedup, step: 3
JOB test speedup 1.2587871425317183
TPCH test speedup 4.278170469567983
TPCH skew test speedup 3.989500714576816
Epoch 12/300 |loss: 0.002850| train set 4.915x speedup, test set 3.990x speedup, val set 5.157x speedup, step: 4
JOB test speedup 0.9804164788387321
TPCH test speedup 4.094298591155774
TPCH skew test speedup 3.848298226781499
Epoch 13/300 |loss: 0.002467| train set 4.658x speedup, test set 3.848x speedup, val set 4.986x speedup, step: 5
JOB test speedup 0.9732674125260616
TPCH test speedup 4.320952144705331
TPCH skew test speedup 4.023492953369946
Epoch 14/300 |loss: 0.002512| train set 5.078x speedup, test set 4.023x speedup, val set 5.245x speedup, step: 1
JOB test speedup 0.9389752750641237
TPCH test speedup 4.353811913287622
TPCH skew test speedup 4.024919121480839
Epoch 15/300 |loss: 0.001977| train set 4.975x speedup, test set 4.025x speedup, val set 5.159x speedup, step: 2
JOB test speedup 0.9649565468915728
TPCH test speedup 4.159359511724319
TPCH skew test speedup 3.9186021230562753
Epoch 16/300 |loss: 0.002227| train set 4.810x speedup, test set 3.919x speedup, val set 4.925x speedup, step: 3
JOB test speedup 2.0367772925628866
TPCH test speedup 4.285515491425071
TPCH skew test speedup 3.947685039365342
Epoch 17/300 |loss: 0.002349| train set 5.037x speedup, test set 3.948x speedup, val set 5.084x speedup, step: 4
JOB test speedup 2.0798186950904713
TPCH test speedup 4.303403874622933
TPCH skew test speedup 4.000687492367086
Epoch 18/300 |loss: 0.002015| train set 4.986x speedup, test set 4.001x speedup, val set 5.180x speedup, step: 5
JOB test speedup 0.9699805608775304
TPCH test speedup 4.358856627235803
TPCH skew test speedup 4.025357252361724
Epoch 19/300 |loss: 0.001738| train set 5.082x speedup, test set 4.025x speedup, val set 5.311x speedup, step: 1
JOB test speedup 1.305970817665324
TPCH test speedup 4.300126586761553
TPCH skew test speedup 3.9584050362491103
Epoch 20/300 |loss: 0.001797| train set 5.120x speedup, test set 3.958x speedup, val set 5.312x speedup, step: 2
JOB test speedup 1.3489974658618806
TPCH test speedup 4.356401087283359
TPCH skew test speedup 4.0567038042375945
Epoch 21/300 |loss: 0.001895| train set 5.060x speedup, test set 4.057x speedup, val set 5.301x speedup, step: 3
JOB test speedup 1.0014925865584021
TPCH test speedup 4.234471862668668
TPCH skew test speedup 3.9044095013815903
Epoch 22/300 |loss: 0.002060| train set 4.882x speedup, test set 3.904x speedup, val set 5.146x speedup, step: 4
JOB test speedup 0.9894258934036905
TPCH test speedup 4.242023144601949
TPCH skew test speedup 3.909865587117096
Epoch 23/300 |loss: 0.001896| train set 5.064x speedup, test set 3.910x speedup, val set 5.227x speedup, step: 5
JOB test speedup 0.8864832150641705
TPCH test speedup 4.3970466909958255
TPCH skew test speedup 4.0611432288908285
Epoch 24/300 |loss: 0.001621| train set 5.108x speedup, test set 4.061x speedup, val set 5.323x speedup, step: 1
JOB test speedup 0.9769642540313478
TPCH test speedup 4.326043823652999
TPCH skew test speedup 3.977103232679563
Epoch 25/300 |loss: 0.001371| train set 5.087x speedup, test set 3.977x speedup, val set 5.078x speedup, step: 2
JOB test speedup 0.9861613829901215
TPCH test speedup 4.258460553246687
TPCH skew test speedup 3.923493242322556
Epoch 26/300 |loss: 0.001646| train set 5.065x speedup, test set 3.923x speedup, val set 5.082x speedup, step: 3
JOB test speedup 1.318814644614655
TPCH test speedup 4.319056026047468
TPCH skew test speedup 4.020963383681859
Epoch 27/300 |loss: 0.001382| train set 5.088x speedup, test set 4.021x speedup, val set 5.204x speedup, step: 4
JOB test speedup 1.3602994174203242
TPCH test speedup 4.371486500451245
TPCH skew test speedup 4.013089796281578
Epoch 28/300 |loss: 0.001326| train set 5.028x speedup, test set 4.013x speedup, val set 5.200x speedup, step: 5
JOB test speedup 1.3622348724132827
TPCH test speedup 4.330904738474485
TPCH skew test speedup 4.00553199351948
Epoch 29/300 |loss: 0.001234| train set 5.067x speedup, test set 4.006x speedup, val set 5.221x speedup, step: 6
JOB test speedup 1.2950136893866684
TPCH test speedup 4.1063218063081095
TPCH skew test speedup 3.819168943824864
Epoch 30/300 |loss: 0.001294| train set 5.068x speedup, test set 3.819x speedup, val set 5.220x speedup, step: 7
JOB test speedup 0.9637164716201652
TPCH test speedup 4.065384125843721
TPCH skew test speedup 3.8098436756618965
Epoch 31/300 |loss: 0.001158| train set 5.113x speedup, test set 3.810x speedup, val set 5.309x speedup, step: 8
JOB test speedup 0.9670223886513851
TPCH test speedup 4.133322698184191
TPCH skew test speedup 3.8102959155927083
Epoch 32/300 |loss: 0.001317| train set 4.936x speedup, test set 3.810x speedup, val set 5.094x speedup, step: 9
JOB test speedup 0.9666960620652905
TPCH test speedup 4.1060691028904674
TPCH skew test speedup 3.8195978050782284
Epoch 33/300 |loss: 0.001484| train set 5.090x speedup, test set 3.820x speedup, val set 5.313x speedup, step: 10
JOB test speedup 1.285772893779895
TPCH test speedup 4.039268988793392
TPCH skew test speedup 3.7428131906956748
Epoch 34/300 |loss: 0.001056| train set 5.072x speedup, test set 3.743x speedup, val set 5.080x speedup, step: 11
JOB test speedup 1.3053352119923778
TPCH test speedup 4.068728953707048
TPCH skew test speedup 3.8170623129570482
Epoch 35/300 |loss: 0.001060| train set 5.111x speedup, test set 3.817x speedup, val set 4.815x speedup, step: 12
JOB test speedup 1.3071844068144374
TPCH test speedup 4.1063218063081095
TPCH skew test speedup 3.819168943824864
Epoch 36/300 |loss: 0.001085| train set 5.094x speedup, test set 3.819x speedup, val set 5.252x speedup, step: 13
JOB test speedup 1.2984075863093967
TPCH test speedup 4.118407156102662
TPCH skew test speedup 3.7961409943458273
Epoch 37/300 |loss: 0.001008| train set 5.119x speedup, test set 3.796x speedup, val set 5.266x speedup, step: 14
JOB test speedup 1.3096673277321769
TPCH test speedup 4.355382054080102
TPCH skew test speedup 4.053077090939048
Epoch 38/300 |loss: 0.001051| train set 5.102x speedup, test set 4.053x speedup, val set 5.271x speedup, step: 15
JOB test speedup 0.9575810775468899
TPCH test speedup 4.08978356256161
TPCH skew test speedup 3.8330820923570355
Epoch 39/300 |loss: 0.000970| train set 5.126x speedup, test set 3.833x speedup, val set 5.278x speedup, step: 16
JOB test speedup 1.299902843338445
TPCH test speedup 4.122780684076095
TPCH skew test speedup 3.8341938884339064
Epoch 40/300 |loss: 0.000955| train set 5.126x speedup, test set 3.834x speedup, val set 5.279x speedup, step: 17
JOB test speedup 1.3170395142486402
TPCH test speedup 4.022208476028338
TPCH skew test speedup 3.754593153308993
Epoch 41/300 |loss: 0.000898| train set 5.125x speedup, test set 3.755x speedup, val set 4.833x speedup, step: 18
JOB test speedup 1.2850259345971107
TPCH test speedup 4.06439536015625
TPCH skew test speedup 3.8088398901433402
Epoch 42/300 |loss: 0.000913| train set 5.126x speedup, test set 3.809x speedup, val set 4.791x speedup, step: 19
JOB test speedup 1.2848446566438694
TPCH test speedup 4.065136435775213
TPCH skew test speedup 3.8102704450532796
Epoch 43/300 |loss: 0.000968| train set 5.109x speedup, test set 3.810x speedup, val set 5.284x speedup, step: 20
JOB test speedup 1.3387926410083033
TPCH test speedup 4.031676745297491
TPCH skew test speedup 3.736461768848064
Epoch 44/300 |loss: 0.000932| train set 5.085x speedup, test set 3.736x speedup, val set 4.712x speedup, step: 21
JOB test speedup 0.9652211062248433
TPCH test speedup 3.994091946097357
TPCH skew test speedup 3.7288833832054746
Epoch 45/300 |loss: 0.000976| train set 5.108x speedup, test set 3.729x speedup, val set 4.802x speedup, step: 22
JOB test speedup 1.2181100287123585
TPCH test speedup 4.1202497166829835
TPCH skew test speedup 3.83118636699696
Epoch 46/300 |loss: 0.001044| train set 5.110x speedup, test set 3.831x speedup, val set 4.828x speedup, step: 23
JOB test speedup 1.3360494470442654
TPCH test speedup 4.057682443605408
TPCH skew test speedup 3.77070437566499
Epoch 47/300 |loss: 0.000851| train set 5.119x speedup, test set 3.771x speedup, val set 4.762x speedup, step: 24
JOB test speedup 0.8999446997391067
TPCH test speedup 4.045145685236394
TPCH skew test speedup 3.7932156881968897
Epoch 48/300 |loss: 0.000827| train set 5.125x speedup, test set 3.793x speedup, val set 4.829x speedup, step: 25
JOB test speedup 0.9580014148622097
TPCH test speedup 4.044182966209549
TPCH skew test speedup 3.788462173677414
Epoch 49/300 |loss: 0.000753| train set 5.105x speedup, test set 3.788x speedup, val set 4.824x speedup, step: 26
JOB test speedup 0.9622571549470537
TPCH test speedup 4.0711896074484955
TPCH skew test speedup 3.780340813828817
Epoch 50/300 |loss: 0.000776| train set 5.051x speedup, test set 3.780x speedup, val set 5.216x speedup, step: 27
JOB test speedup 0.9726870197071755
TPCH test speedup 4.017425520640091
TPCH skew test speedup 3.71968263431032
Epoch 51/300 |loss: 0.000733| train set 5.097x speedup, test set 3.720x speedup, val set 4.825x speedup, step: 28
JOB test speedup 0.9632161789394912
TPCH test speedup 4.015974842647452
TPCH skew test speedup 3.750337142026984
Epoch 52/300 |loss: 0.000663| train set 5.087x speedup, test set 3.750x speedup, val set 5.286x speedup, step: 29
JOB test speedup 0.9735142008961698
TPCH test speedup 4.045533456824909
TPCH skew test speedup 3.7930709336686887
Epoch 53/300 |loss: 0.000777| train set 5.128x speedup, test set 3.793x speedup, val set 5.192x speedup, step: 30
JOB test speedup 0.964541717486351
TPCH test speedup 4.046035126156272
TPCH skew test speedup 3.748380206363755
Epoch 54/300 |loss: 0.000630| train set 5.123x speedup, test set 3.748x speedup, val set 4.855x speedup, step: 31
JOB test speedup 0.9677173735676231
TPCH test speedup 3.957428521552882
TPCH skew test speedup 3.6972488230066425
Epoch 55/300 |loss: 0.000664| train set 4.990x speedup, test set 3.697x speedup, val set 4.763x speedup, step: 32
JOB test speedup 1.191998416500916
TPCH test speedup 3.9650437491698587
TPCH skew test speedup 3.680037927496594
Epoch 56/300 |loss: 0.000651| train set 5.125x speedup, test set 3.680x speedup, val set 4.699x speedup, step: 33
JOB test speedup 0.9660631956980612
TPCH test speedup 4.032843425877248
TPCH skew test speedup 3.570901054839085
Epoch 57/300 |loss: 0.000626| train set 5.127x speedup, test set 3.571x speedup, val set 5.306x speedup, step: 34
JOB test speedup 0.9916096085382231
TPCH test speedup 4.014319679965966
TPCH skew test speedup 3.747734915524059
Epoch 58/300 |loss: 0.000508| train set 5.077x speedup, test set 3.748x speedup, val set 4.843x speedup, step: 35
JOB test speedup 0.9694945364010039
TPCH test speedup 3.916412127148581
TPCH skew test speedup 3.654424788895917
Epoch 59/300 |loss: 0.000610| train set 5.088x speedup, test set 3.654x speedup, val set 5.125x speedup, step: 36
JOB test speedup 1.1888279769123988
TPCH test speedup 3.932428749509727
TPCH skew test speedup 3.4779282083595673
Epoch 60/300 |loss: 0.000541| train set 5.131x speedup, test set 3.478x speedup, val set 5.264x speedup, step: 37
JOB test speedup 0.8952580403148561
TPCH test speedup 4.020763200331609
TPCH skew test speedup 3.545878326744414
Epoch 61/300 |loss: 0.000467| train set 5.129x speedup, test set 3.546x speedup, val set 5.285x speedup, step: 38
JOB test speedup 0.9780402980649978
TPCH test speedup 3.9968697718606374
TPCH skew test speedup 3.525978888955816
Epoch 62/300 |loss: 0.000510| train set 5.132x speedup, test set 3.526x speedup, val set 4.784x speedup, step: 39
JOB test speedup 0.9559340377730541
TPCH test speedup 3.978490159508643
TPCH skew test speedup 3.5122223855115107
Epoch 63/300 |loss: 0.000609| train set 5.072x speedup, test set 3.512x speedup, val set 5.309x speedup, step: 40
JOB test speedup 0.9680993485137536
TPCH test speedup 4.014319679965966
TPCH skew test speedup 3.747734915524059
Epoch 64/300 |loss: 0.000624| train set 5.097x speedup, test set 3.748x speedup, val set 5.293x speedup, step: 41
JOB test speedup 0.9915466427787988
TPCH test speedup 3.9423278675088964
TPCH skew test speedup 3.6836792011392387
Epoch 65/300 |loss: 0.000650| train set 5.126x speedup, test set 3.684x speedup, val set 5.158x speedup, step: 42
JOB test speedup 1.2952786727446166
TPCH test speedup 3.99693853471259
TPCH skew test speedup 3.526348348192561
Epoch 66/300 |loss: 0.000536| train set 5.127x speedup, test set 3.526x speedup, val set 4.715x speedup, step: 43
JOB test speedup 0.9590945992614444
TPCH test speedup 3.9596039048290224
TPCH skew test speedup 3.701446140390463
Epoch 67/300 |loss: 0.000643| train set 5.120x speedup, test set 3.701x speedup, val set 5.285x speedup, step: 44
early stopping at epoch 67
Training per epoch cost 3.440 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.084s, pg runtime 0.081s, speedup 0.961x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.238s, pg runtime 0.207s, speedup 0.868x
04, opt runtime 0.920s, model runtime 2.104s, pg runtime 1.680s, speedup 0.798x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.883s, pg runtime 0.802s, speedup 0.908x
07, opt runtime 0.919s, model runtime 0.933s, pg runtime 0.942s, speedup 1.009x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.885s, pg runtime 2.718s, speedup 0.942x
16, opt runtime 0.441s, model runtime 0.488s, pg runtime 0.453s, speedup 0.929x
17, opt runtime 0.327s, model runtime 0.392s, pg runtime 0.354s, speedup 0.901x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.064s, model runtime 0.072s, pg runtime 0.089s, speedup 1.239x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.231s, pg runtime 0.157s, speedup 0.678x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.457s, pg runtime 1.438s, speedup 0.987x
20, opt runtime 1.428s, model runtime 1.528s, pg runtime 1.428s, speedup 0.934x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.308s, model runtime 1.377s, pg runtime 1.528s, speedup 1.110x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 24, train speedup 5.108, test speedup 0.886, val speedup 5.323
TPCH best validation speedup epoch: 24, train speedup 5.108, test speedup 4.397, val speedup 5.323
TPCH Skew best validation speedup epoch: 24, train speedup 5.108, test speedup 4.061, val speedup 5.323
execution cost 0:05:18.488614
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.133239, and there are 9604 training samples
in channel 9
JOB test speedup 0.6316320939600328
TPCH test speedup 2.825356230297737
TPCH skew test speedup 2.5572325182245006
Epoch 0/300 |loss: 0.037331| train set 2.542x speedup, test set 2.557x speedup, val set 2.424x speedup, step: 1
JOB test speedup 0.841527964906055
TPCH test speedup 2.9649249839407066
TPCH skew test speedup 2.7468799114622504
Epoch 1/300 |loss: 0.016884| train set 2.629x speedup, test set 2.747x speedup, val set 2.764x speedup, step: 2
JOB test speedup 1.545354485518611
TPCH test speedup 3.1231157393898346
TPCH skew test speedup 2.9396720987635394
Epoch 2/300 |loss: 0.010821| train set 2.855x speedup, test set 2.940x speedup, val set 3.113x speedup, step: 3
JOB test speedup 1.5828697957718656
TPCH test speedup 3.3479101260006567
TPCH skew test speedup 3.1104795854959737
Epoch 3/300 |loss: 0.008661| train set 2.639x speedup, test set 3.110x speedup, val set 2.764x speedup, step: 4
JOB test speedup 1.6623221014899228
TPCH test speedup 3.8754330085889306
TPCH skew test speedup 3.492569766663634
Epoch 4/300 |loss: 0.007259| train set 3.218x speedup, test set 3.493x speedup, val set 3.413x speedup, step: 1
JOB test speedup 1.5321090886203117
TPCH test speedup 3.760010128079522
TPCH skew test speedup 3.2331216740615023
Epoch 5/300 |loss: 0.006411| train set 3.566x speedup, test set 3.233x speedup, val set 4.109x speedup, step: 2
JOB test speedup 1.8868192126355166
TPCH test speedup 3.822708224688175
TPCH skew test speedup 3.5492663080801004
Epoch 6/300 |loss: 0.006070| train set 3.301x speedup, test set 3.549x speedup, val set 3.877x speedup, step: 3
JOB test speedup 1.7643279481557275
TPCH test speedup 4.299433793056481
TPCH skew test speedup 3.792983009099129
Epoch 7/300 |loss: 0.005223| train set 4.643x speedup, test set 3.793x speedup, val set 4.870x speedup, step: 4
JOB test speedup 1.9782399278585618
TPCH test speedup 3.9913146855640256
TPCH skew test speedup 3.4807831128647377
Epoch 8/300 |loss: 0.007712| train set 4.310x speedup, test set 3.481x speedup, val set 4.555x speedup, step: 5
JOB test speedup 1.208840664390113
TPCH test speedup 3.9503124078209857
TPCH skew test speedup 3.4344095778836614
Epoch 9/300 |loss: 0.004956| train set 4.013x speedup, test set 3.434x speedup, val set 4.429x speedup, step: 1
JOB test speedup 1.1516861860872238
TPCH test speedup 4.194778058163068
TPCH skew test speedup 3.7617344128453545
Epoch 10/300 |loss: 0.004446| train set 3.416x speedup, test set 3.762x speedup, val set 4.933x speedup, step: 2
JOB test speedup 1.2408314798104536
TPCH test speedup 3.9031838101781378
TPCH skew test speedup 3.684315677109618
Epoch 11/300 |loss: 0.003500| train set 4.396x speedup, test set 3.684x speedup, val set 4.915x speedup, step: 3
JOB test speedup 1.9046802680382793
TPCH test speedup 4.113460630625359
TPCH skew test speedup 3.815719236942788
Epoch 12/300 |loss: 0.003443| train set 4.971x speedup, test set 3.816x speedup, val set 5.294x speedup, step: 4
JOB test speedup 1.9305808286409363
TPCH test speedup 4.00690936561654
TPCH skew test speedup 4.001797796440569
Epoch 13/300 |loss: 0.003219| train set 4.976x speedup, test set 4.002x speedup, val set 5.196x speedup, step: 5
JOB test speedup 1.2371298680696379
TPCH test speedup 4.100405634391162
TPCH skew test speedup 4.04162698565112
Epoch 14/300 |loss: 0.004125| train set 4.359x speedup, test set 4.042x speedup, val set 5.280x speedup, step: 1
JOB test speedup 1.0058457441830009
TPCH test speedup 4.116691509372666
TPCH skew test speedup 3.801846612659631
Epoch 15/300 |loss: 0.002493| train set 5.152x speedup, test set 3.802x speedup, val set 5.136x speedup, step: 2
JOB test speedup 0.8559179548036956
TPCH test speedup 4.031468189288004
TPCH skew test speedup 3.964667738083956
Epoch 16/300 |loss: 0.002348| train set 5.003x speedup, test set 3.965x speedup, val set 5.222x speedup, step: 3
JOB test speedup 1.2466928796024022
TPCH test speedup 4.076592514846859
TPCH skew test speedup 4.017689898743413
Epoch 17/300 |loss: 0.002618| train set 5.128x speedup, test set 4.018x speedup, val set 5.283x speedup, step: 4
JOB test speedup 0.9386245375817317
TPCH test speedup 3.9422968875831845
TPCH skew test speedup 3.889079434994678
Epoch 18/300 |loss: 0.002103| train set 4.965x speedup, test set 3.889x speedup, val set 5.124x speedup, step: 5
JOB test speedup 0.9554309386764203
TPCH test speedup 4.051488044034532
TPCH skew test speedup 3.7934621704990774
Epoch 19/300 |loss: 0.002064| train set 5.148x speedup, test set 3.793x speedup, val set 5.200x speedup, step: 6
JOB test speedup 0.9732990861786485
TPCH test speedup 3.9937146851434364
TPCH skew test speedup 3.7193235166987555
Epoch 20/300 |loss: 0.002002| train set 4.976x speedup, test set 3.719x speedup, val set 5.039x speedup, step: 7
JOB test speedup 0.8530362021581529
TPCH test speedup 3.48406737644128
TPCH skew test speedup 3.448676540718473
Epoch 21/300 |loss: 0.002260| train set 3.228x speedup, test set 3.449x speedup, val set 3.381x speedup, step: 8
JOB test speedup 1.3249656540567818
TPCH test speedup 4.056704755131703
TPCH skew test speedup 4.013339176226298
Epoch 22/300 |loss: 0.002598| train set 5.168x speedup, test set 4.013x speedup, val set 3.756x speedup, step: 9
JOB test speedup 0.9882983628317862
TPCH test speedup 4.074690175614895
TPCH skew test speedup 3.9913280274606766
Epoch 23/300 |loss: 0.001819| train set 5.059x speedup, test set 3.991x speedup, val set 5.142x speedup, step: 10
JOB test speedup 0.9422156418239075
TPCH test speedup 4.070203382866403
TPCH skew test speedup 4.027619405023463
Epoch 24/300 |loss: 0.002108| train set 5.173x speedup, test set 4.028x speedup, val set 5.310x speedup, step: 1
JOB test speedup 1.2817271405508517
TPCH test speedup 4.074395347494778
TPCH skew test speedup 4.032481713678105
Epoch 25/300 |loss: 0.001841| train set 5.182x speedup, test set 4.032x speedup, val set 5.194x speedup, step: 2
JOB test speedup 0.9279255717619749
TPCH test speedup 4.061099793029234
TPCH skew test speedup 4.02308670903731
Epoch 26/300 |loss: 0.001615| train set 5.077x speedup, test set 4.023x speedup, val set 5.192x speedup, step: 3
JOB test speedup 1.312347241246303
TPCH test speedup 4.051205917816293
TPCH skew test speedup 4.0084000525934895
Epoch 27/300 |loss: 0.001601| train set 5.154x speedup, test set 4.008x speedup, val set 5.164x speedup, step: 4
JOB test speedup 1.3568687512296105
TPCH test speedup 4.067186144304102
TPCH skew test speedup 4.024171712736349
Epoch 28/300 |loss: 0.001637| train set 5.150x speedup, test set 4.024x speedup, val set 5.190x speedup, step: 5
JOB test speedup 1.2935932169976387
TPCH test speedup 4.021846600215088
TPCH skew test speedup 3.9417863387336287
Epoch 29/300 |loss: 0.001523| train set 5.136x speedup, test set 3.942x speedup, val set 4.272x speedup, step: 6
JOB test speedup 1.305037607445536
TPCH test speedup 4.071151328406945
TPCH skew test speedup 4.022388340864761
Epoch 30/300 |loss: 0.001973| train set 5.170x speedup, test set 4.022x speedup, val set 5.286x speedup, step: 7
JOB test speedup 1.3041176696008354
TPCH test speedup 4.0564639766735695
TPCH skew test speedup 4.017343931036757
Epoch 31/300 |loss: 0.001547| train set 5.057x speedup, test set 4.017x speedup, val set 5.187x speedup, step: 8
JOB test speedup 1.3452818482980933
TPCH test speedup 3.937425714446912
TPCH skew test speedup 3.8703206488978656
Epoch 32/300 |loss: 0.001488| train set 5.133x speedup, test set 3.870x speedup, val set 4.106x speedup, step: 9
JOB test speedup 1.277381778238877
TPCH test speedup 4.05503774866178
TPCH skew test speedup 4.018758975485108
Epoch 33/300 |loss: 0.001633| train set 5.163x speedup, test set 4.019x speedup, val set 5.184x speedup, step: 10
JOB test speedup 1.3100837352442605
TPCH test speedup 4.062529126366317
TPCH skew test speedup 4.026643690143875
Epoch 34/300 |loss: 0.001505| train set 5.172x speedup, test set 4.027x speedup, val set 5.194x speedup, step: 11
JOB test speedup 1.3391986865861298
TPCH test speedup 4.076767158467579
TPCH skew test speedup 4.024023764621652
Epoch 35/300 |loss: 0.001390| train set 5.166x speedup, test set 4.024x speedup, val set 5.189x speedup, step: 12
JOB test speedup 1.318236462708149
TPCH test speedup 4.051644729923942
TPCH skew test speedup 3.9678071146656126
Epoch 36/300 |loss: 0.001564| train set 5.140x speedup, test set 3.968x speedup, val set 5.153x speedup, step: 13
JOB test speedup 1.3348134624627892
TPCH test speedup 4.06751652071573
TPCH skew test speedup 4.01438964844463
Epoch 37/300 |loss: 0.001399| train set 5.162x speedup, test set 4.014x speedup, val set 5.131x speedup, step: 14
JOB test speedup 1.2481028423359022
TPCH test speedup 4.068783485643775
TPCH skew test speedup 4.018481760271627
Epoch 38/300 |loss: 0.001657| train set 5.140x speedup, test set 4.018x speedup, val set 5.202x speedup, step: 15
JOB test speedup 1.3149820152424014
TPCH test speedup 4.0795549034812755
TPCH skew test speedup 4.019218876985757
Epoch 39/300 |loss: 0.001164| train set 5.175x speedup, test set 4.019x speedup, val set 5.206x speedup, step: 16
JOB test speedup 1.3215173441699983
TPCH test speedup 4.077172763240889
TPCH skew test speedup 4.015756137515443
Epoch 40/300 |loss: 0.000994| train set 5.147x speedup, test set 4.016x speedup, val set 5.175x speedup, step: 17
JOB test speedup 1.3228231908479708
TPCH test speedup 4.042709771063821
TPCH skew test speedup 3.9817932368453133
Epoch 41/300 |loss: 0.001021| train set 5.030x speedup, test set 3.982x speedup, val set 5.105x speedup, step: 18
JOB test speedup 1.2867567828719737
TPCH test speedup 4.116291667125733
TPCH skew test speedup 4.062585005851998
Epoch 42/300 |loss: 0.001098| train set 5.141x speedup, test set 4.063x speedup, val set 5.292x speedup, step: 19
JOB test speedup 1.1995878646325067
TPCH test speedup 4.072859887446359
TPCH skew test speedup 4.026643690143875
Epoch 43/300 |loss: 0.001083| train set 5.106x speedup, test set 4.027x speedup, val set 5.197x speedup, step: 20
JOB test speedup 1.319932240715625
TPCH test speedup 4.10849150641732
TPCH skew test speedup 4.046137709788458
Epoch 44/300 |loss: 0.001244| train set 5.179x speedup, test set 4.046x speedup, val set 5.271x speedup, step: 21
JOB test speedup 1.3242610671236872
TPCH test speedup 4.116097455884303
TPCH skew test speedup 4.063772622414143
Epoch 45/300 |loss: 0.001153| train set 5.159x speedup, test set 4.064x speedup, val set 5.298x speedup, step: 22
JOB test speedup 1.3241702582112498
TPCH test speedup 4.072605096735625
TPCH skew test speedup 4.025223088659194
Epoch 46/300 |loss: 0.000966| train set 5.160x speedup, test set 4.025x speedup, val set 5.205x speedup, step: 23
JOB test speedup 1.312617406035185
TPCH test speedup 4.077310333020685
TPCH skew test speedup 4.018831221026888
Epoch 47/300 |loss: 0.001250| train set 5.149x speedup, test set 4.019x speedup, val set 5.084x speedup, step: 24
JOB test speedup 1.1411309697674656
TPCH test speedup 3.751860556982243
TPCH skew test speedup 3.7212272626123966
Epoch 48/300 |loss: 0.001299| train set 4.351x speedup, test set 3.721x speedup, val set 4.641x speedup, step: 25
early stopping at epoch 48
Training per epoch cost 2.349 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 7.467s, pg runtime 5.855s, speedup 0.784x
03, opt runtime 0.207s, model runtime 0.696s, pg runtime 0.207s, speedup 0.297x
04, opt runtime 0.920s, model runtime 2.104s, pg runtime 1.680s, speedup 0.798x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.064s, pg runtime 0.089s, speedup 1.393x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.322s, pg runtime 2.389s, speedup 7.421x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.938s, pg runtime 4.855s, speedup 0.983x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 2.923s, pg runtime 5.521s, speedup 1.889x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
16, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.457s, pg runtime 1.438s, speedup 0.987x
20, opt runtime 1.428s, model runtime 1.528s, pg runtime 1.428s, speedup 0.934x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
30, opt runtime 5.539s, model runtime 5.690s, pg runtime 5.539s, speedup 0.973x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 43.993s, pg runtime 75.984s, speedup 1.727x
34, opt runtime 39.191s, model runtime 43.993s, pg runtime 75.984s, speedup 1.727x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.280s, model runtime 18.051s, pg runtime 634.990s, speedup 35.177x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.308s, model runtime 1.377s, pg runtime 1.528s, speedup 1.110x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
30, opt runtime 5.271s, model runtime 5.766s, pg runtime 5.271s, speedup 0.914x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.301s, model runtime 16.301s, pg runtime 646.719s, speedup 39.673x
36, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 24, train speedup 5.173, test speedup 0.942, val speedup 5.310
TPCH best validation speedup epoch: 24, train speedup 5.173, test speedup 4.070, val speedup 5.310
TPCH Skew best validation speedup epoch: 24, train speedup 5.173, test speedup 4.028, val speedup 5.310
execution cost 0:02:48.821368
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.172164, and there are 9604 training samples
in channel 9
JOB test speedup 0.6316320939600328
TPCH test speedup 2.825356230297737
TPCH skew test speedup 2.5572325182245006
Epoch 0/300 |loss: 0.037331| train set 2.542x speedup, test set 2.557x speedup, val set 2.424x speedup, step: 1
JOB test speedup 0.841527964906055
TPCH test speedup 2.9649249839407066
TPCH skew test speedup 2.7468799114622504
Epoch 1/300 |loss: 0.016884| train set 2.629x speedup, test set 2.747x speedup, val set 2.764x speedup, step: 2
JOB test speedup 1.545354485518611
TPCH test speedup 3.1231157393898346
TPCH skew test speedup 2.9396720987635394
Epoch 2/300 |loss: 0.010821| train set 2.855x speedup, test set 2.940x speedup, val set 3.113x speedup, step: 3
JOB test speedup 1.5828697957718656
TPCH test speedup 3.3479101260006567
TPCH skew test speedup 3.1104795854959737
Epoch 3/300 |loss: 0.008661| train set 2.639x speedup, test set 3.110x speedup, val set 2.764x speedup, step: 4
JOB test speedup 1.6617132364868408
TPCH test speedup 4.143136850250963
TPCH skew test speedup 3.6280239310934568
Epoch 4/300 |loss: 0.007270| train set 3.216x speedup, test set 3.628x speedup, val set 3.599x speedup, step: 1
JOB test speedup 1.5325391713202408
TPCH test speedup 3.871748935132526
TPCH skew test speedup 3.3027155023830423
Epoch 5/300 |loss: 0.006400| train set 4.268x speedup, test set 3.303x speedup, val set 4.105x speedup, step: 2
JOB test speedup 1.8023234829426962
TPCH test speedup 3.822033849812731
TPCH skew test speedup 3.759615271689465
Epoch 6/300 |loss: 0.006090| train set 3.178x speedup, test set 3.760x speedup, val set 3.387x speedup, step: 3
JOB test speedup 1.8341831214928774
TPCH test speedup 4.154714900037965
TPCH skew test speedup 3.7037496769750193
Epoch 7/300 |loss: 0.005262| train set 4.650x speedup, test set 3.704x speedup, val set 4.867x speedup, step: 4
JOB test speedup 2.2084985378074453
TPCH test speedup 4.073161650188838
TPCH skew test speedup 3.4605955033101323
Epoch 8/300 |loss: 0.007745| train set 4.368x speedup, test set 3.461x speedup, val set 4.526x speedup, step: 5
JOB test speedup 1.2034321238529175
TPCH test speedup 4.2898888404151565
TPCH skew test speedup 4.007748403108066
Epoch 9/300 |loss: 0.005089| train set 4.299x speedup, test set 4.008x speedup, val set 5.210x speedup, step: 1
JOB test speedup 1.1432581591599142
TPCH test speedup 3.9419252927037944
TPCH skew test speedup 3.751314132718035
Epoch 10/300 |loss: 0.004583| train set 3.973x speedup, test set 3.751x speedup, val set 4.888x speedup, step: 2
JOB test speedup 1.1852971262458993
TPCH test speedup 3.940226294018525
TPCH skew test speedup 3.7491432079967706
Epoch 11/300 |loss: 0.003474| train set 4.365x speedup, test set 3.749x speedup, val set 4.905x speedup, step: 3
JOB test speedup 0.9280768471400618
TPCH test speedup 4.09538862223951
TPCH skew test speedup 3.795525448609058
Epoch 12/300 |loss: 0.003446| train set 4.900x speedup, test set 3.796x speedup, val set 5.235x speedup, step: 4
JOB test speedup 1.2512072000042669
TPCH test speedup 4.044875936940533
TPCH skew test speedup 4.030836704344999
Epoch 13/300 |loss: 0.003277| train set 4.848x speedup, test set 4.031x speedup, val set 5.070x speedup, step: 5
JOB test speedup 1.9261577940635426
TPCH test speedup 3.8707808478921897
TPCH skew test speedup 3.8329713310261067
Epoch 14/300 |loss: 0.003953| train set 5.018x speedup, test set 3.833x speedup, val set 5.270x speedup, step: 1
JOB test speedup 0.9469541609865219
TPCH test speedup 4.073998665473815
TPCH skew test speedup 4.014956965181816
Epoch 15/300 |loss: 0.002522| train set 5.047x speedup, test set 4.015x speedup, val set 5.299x speedup, step: 2
JOB test speedup 0.8464104199231356
TPCH test speedup 4.033797206655311
TPCH skew test speedup 3.9680428951129354
Epoch 16/300 |loss: 0.002360| train set 4.744x speedup, test set 3.968x speedup, val set 5.152x speedup, step: 3
JOB test speedup 0.9492609585182797
TPCH test speedup 4.022730423513003
TPCH skew test speedup 3.947921066031641
Epoch 17/300 |loss: 0.002554| train set 5.099x speedup, test set 3.948x speedup, val set 5.093x speedup, step: 4
JOB test speedup 0.926162505618145
TPCH test speedup 3.900920270019686
TPCH skew test speedup 3.827107965790937
Epoch 18/300 |loss: 0.002043| train set 4.608x speedup, test set 3.827x speedup, val set 5.022x speedup, step: 5
JOB test speedup 0.927988088439723
TPCH test speedup 4.082898995426943
TPCH skew test speedup 4.074040940204468
Epoch 19/300 |loss: 0.002015| train set 5.122x speedup, test set 4.074x speedup, val set 5.096x speedup, step: 6
JOB test speedup 0.9430077351158759
TPCH test speedup 3.7726118483523297
TPCH skew test speedup 3.541665281617536
Epoch 20/300 |loss: 0.001906| train set 4.999x speedup, test set 3.542x speedup, val set 4.981x speedup, step: 7
JOB test speedup 0.6880209097085721
TPCH test speedup 3.2998062135573614
TPCH skew test speedup 3.266586889442403
Epoch 21/300 |loss: 0.002416| train set 3.809x speedup, test set 3.267x speedup, val set 3.209x speedup, step: 8
JOB test speedup 0.9904861031355692
TPCH test speedup 4.081037038889478
TPCH skew test speedup 4.029565416130006
Epoch 22/300 |loss: 0.002485| train set 5.136x speedup, test set 4.030x speedup, val set 3.775x speedup, step: 9
JOB test speedup 0.9434807313639962
TPCH test speedup 4.086809848404072
TPCH skew test speedup 4.0302248608600815
Epoch 23/300 |loss: 0.001791| train set 5.069x speedup, test set 4.030x speedup, val set 5.194x speedup, step: 10
JOB test speedup 0.878103071641726
TPCH test speedup 4.0889267974267
TPCH skew test speedup 4.025123654939212
Epoch 24/300 |loss: 0.002338| train set 5.153x speedup, test set 4.025x speedup, val set 5.184x speedup, step: 11
JOB test speedup 0.9458721192502867
TPCH test speedup 4.084010397148822
TPCH skew test speedup 4.032333153911726
Epoch 25/300 |loss: 0.001852| train set 5.166x speedup, test set 4.032x speedup, val set 5.187x speedup, step: 12
JOB test speedup 0.7271493385464595
TPCH test speedup 4.036914952837198
TPCH skew test speedup 3.9841229537206084
Epoch 26/300 |loss: 0.001598| train set 5.169x speedup, test set 3.984x speedup, val set 5.194x speedup, step: 13
JOB test speedup 0.9506235209804969
TPCH test speedup 3.936644887773704
TPCH skew test speedup 3.864758767511163
Epoch 27/300 |loss: 0.001594| train set 5.086x speedup, test set 3.865x speedup, val set 5.079x speedup, step: 14
JOB test speedup 0.8786594127357286
TPCH test speedup 3.934911386723863
TPCH skew test speedup 3.9390861489768088
Epoch 28/300 |loss: 0.001448| train set 5.185x speedup, test set 3.939x speedup, val set 5.303x speedup, step: 15
JOB test speedup 0.8769831616025842
TPCH test speedup 4.008468992917571
TPCH skew test speedup 3.9333008565020537
Epoch 29/300 |loss: 0.001489| train set 5.058x speedup, test set 3.933x speedup, val set 5.196x speedup, step: 16
JOB test speedup 0.9569155761466882
TPCH test speedup 3.918499326212689
TPCH skew test speedup 3.918946788871496
Epoch 30/300 |loss: 0.001960| train set 5.171x speedup, test set 3.919x speedup, val set 5.307x speedup, step: 17
JOB test speedup 1.9146098632988033
TPCH test speedup 4.041448365677558
TPCH skew test speedup 4.019974632816972
Epoch 31/300 |loss: 0.001548| train set 5.173x speedup, test set 4.020x speedup, val set 5.036x speedup, step: 18
JOB test speedup 0.9855332221405179
TPCH test speedup 3.9357284739255287
TPCH skew test speedup 3.910608915484082
Epoch 32/300 |loss: 0.001546| train set 5.027x speedup, test set 3.911x speedup, val set 5.172x speedup, step: 19
JOB test speedup 0.9670738046055454
TPCH test speedup 4.076583974056085
TPCH skew test speedup 4.026211492197584
Epoch 33/300 |loss: 0.001641| train set 5.155x speedup, test set 4.026x speedup, val set 5.196x speedup, step: 20
JOB test speedup 0.9654505571296882
TPCH test speedup 4.040445579533981
TPCH skew test speedup 3.992887779943831
Epoch 34/300 |loss: 0.001620| train set 4.714x speedup, test set 3.993x speedup, val set 5.129x speedup, step: 21
JOB test speedup 1.3396991589599347
TPCH test speedup 4.055550339064682
TPCH skew test speedup 4.017343931036757
Epoch 35/300 |loss: 0.001440| train set 5.165x speedup, test set 4.017x speedup, val set 5.180x speedup, step: 22
JOB test speedup 0.9843954351980981
TPCH test speedup 3.9975688369833366
TPCH skew test speedup 3.930558991832729
Epoch 36/300 |loss: 0.001390| train set 5.178x speedup, test set 3.931x speedup, val set 5.161x speedup, step: 23
JOB test speedup 0.9467851936584666
TPCH test speedup 3.922015152892723
TPCH skew test speedup 3.9391590306896926
Epoch 37/300 |loss: 0.001337| train set 5.126x speedup, test set 3.939x speedup, val set 5.195x speedup, step: 24
JOB test speedup 0.973111574205897
TPCH test speedup 4.048349079622755
TPCH skew test speedup 3.9963236618223306
Epoch 38/300 |loss: 0.001528| train set 5.139x speedup, test set 3.996x speedup, val set 5.219x speedup, step: 25
JOB test speedup 1.2445919594889552
TPCH test speedup 3.922204762454987
TPCH skew test speedup 3.9364108842758134
Epoch 39/300 |loss: 0.001200| train set 5.126x speedup, test set 3.936x speedup, val set 5.183x speedup, step: 26
JOB test speedup 1.1192685940626244
TPCH test speedup 3.9349984914027507
TPCH skew test speedup 3.9465491008426317
Epoch 40/300 |loss: 0.001027| train set 5.146x speedup, test set 3.947x speedup, val set 5.197x speedup, step: 27
JOB test speedup 1.1523143729909393
TPCH test speedup 3.6774236576447024
TPCH skew test speedup 3.686421114292564
Epoch 41/300 |loss: 0.001011| train set 5.118x speedup, test set 3.686x speedup, val set 4.665x speedup, step: 28
JOB test speedup 1.3122241151984704
TPCH test speedup 4.039044081214337
TPCH skew test speedup 3.9786776282693195
Epoch 42/300 |loss: 0.001096| train set 5.067x speedup, test set 3.979x speedup, val set 5.219x speedup, step: 29
JOB test speedup 0.9633545283905642
TPCH test speedup 4.0221975175605325
TPCH skew test speedup 3.968943534119772
Epoch 43/300 |loss: 0.001232| train set 5.146x speedup, test set 3.969x speedup, val set 5.116x speedup, step: 30
JOB test speedup 1.34226622178261
TPCH test speedup 4.074301962233629
TPCH skew test speedup 4.000119170443609
Epoch 44/300 |loss: 0.001210| train set 5.184x speedup, test set 4.000x speedup, val set 5.212x speedup, step: 31
JOB test speedup 1.3412208043668041
TPCH test speedup 4.066441249491698
TPCH skew test speedup 4.046790097117714
Epoch 45/300 |loss: 0.001223| train set 5.162x speedup, test set 4.047x speedup, val set 5.331x speedup, step: 32
JOB test speedup 1.342165458647007
TPCH test speedup 4.029533219854978
TPCH skew test speedup 3.960453122550691
Epoch 46/300 |loss: 0.001033| train set 5.161x speedup, test set 3.960x speedup, val set 5.154x speedup, step: 33
JOB test speedup 1.3201908165812695
TPCH test speedup 3.9297121967227957
TPCH skew test speedup 3.9233116318480907
Epoch 47/300 |loss: 0.001191| train set 5.167x speedup, test set 3.923x speedup, val set 5.130x speedup, step: 34
JOB test speedup 1.3060955866457584
TPCH test speedup 3.684688500889925
TPCH skew test speedup 3.740042420501206
Epoch 48/300 |loss: 0.001511| train set 4.441x speedup, test set 3.740x speedup, val set 4.823x speedup, step: 35
JOB test speedup 1.3544932878247724
TPCH test speedup 4.005486330286757
TPCH skew test speedup 3.948353895884159
Epoch 49/300 |loss: 0.001964| train set 5.086x speedup, test set 3.948x speedup, val set 5.082x speedup, step: 36
early stopping at epoch 49
Training per epoch cost 2.353 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 9.953s, pg runtime 5.855s, speedup 0.588x
03, opt runtime 0.207s, model runtime 0.608s, pg runtime 0.207s, speedup 0.340x
04, opt runtime 0.920s, model runtime 2.104s, pg runtime 1.680s, speedup 0.798x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.885s, pg runtime 2.718s, speedup 0.942x
16, opt runtime 0.441s, model runtime 0.458s, pg runtime 0.453s, speedup 0.991x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.093s, pg runtime 0.089s, speedup 0.956x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.163s, pg runtime 2.389s, speedup 14.664x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 2.719s, model runtime 4.408s, pg runtime 3.112s, speedup 0.706x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.793s, pg runtime 0.161s, speedup 0.203x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.158s, pg runtime 0.158s, speedup 1.000x
30, opt runtime 1.646s, model runtime 1.646s, pg runtime 4.855s, speedup 2.949x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 5.959s, pg runtime 6.444s, speedup 1.081x
33, opt runtime 2.755s, model runtime 2.923s, pg runtime 5.521s, speedup 1.889x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
16, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.629s, pg runtime 1.438s, speedup 0.883x
20, opt runtime 1.428s, model runtime 1.835s, pg runtime 1.428s, speedup 0.778x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.122s, pg runtime 7.799s, speedup 1.095x
28, opt runtime 7.199s, model runtime 7.919s, pg runtime 7.619s, speedup 0.962x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 55.171s, pg runtime 626.529s, speedup 11.356x
32, opt runtime 24.662s, model runtime 53.254s, pg runtime 613.999s, speedup 11.530x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.280s, model runtime 18.051s, pg runtime 634.990s, speedup 35.177x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.581s, pg runtime 1.587s, speedup 1.004x
20, opt runtime 1.308s, model runtime 1.676s, pg runtime 1.528s, speedup 0.912x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.419s, pg runtime 7.675s, speedup 1.035x
28, opt runtime 7.312s, model runtime 7.312s, pg runtime 7.655s, speedup 1.047x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 49.500s, pg runtime 644.779s, speedup 13.026x
32, opt runtime 25.478s, model runtime 56.775s, pg runtime 642.079s, speedup 11.309x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.301s, pg runtime 646.719s, speedup 39.673x
36, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 14, train speedup 5.018, test speedup 1.926, val speedup 5.270
TPCH best validation speedup epoch: 14, train speedup 5.018, test speedup 3.871, val speedup 5.270
TPCH Skew best validation speedup epoch: 14, train speedup 5.018, test speedup 3.833, val speedup 5.270
execution cost 0:02:52.297498
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.164113, and there are 9604 training samples
in channel 9
JOB test speedup 0.6316320939600328
TPCH test speedup 2.825356230297737
TPCH skew test speedup 2.5572325182245006
Epoch 0/300 |loss: 0.037331| train set 2.542x speedup, test set 2.557x speedup, val set 2.424x speedup, step: 1
JOB test speedup 0.841527964906055
TPCH test speedup 2.9649249839407066
TPCH skew test speedup 2.7468799114622504
Epoch 1/300 |loss: 0.016884| train set 2.629x speedup, test set 2.747x speedup, val set 2.824x speedup, step: 2
JOB test speedup 1.5443976704003086
TPCH test speedup 3.1422398370961866
TPCH skew test speedup 2.946361853699809
Epoch 2/300 |loss: 0.010913| train set 2.996x speedup, test set 2.946x speedup, val set 3.113x speedup, step: 3
JOB test speedup 1.5746796080325112
TPCH test speedup 3.3479101260006567
TPCH skew test speedup 3.1104795854959737
Epoch 3/300 |loss: 0.008637| train set 2.815x speedup, test set 3.110x speedup, val set 2.915x speedup, step: 4
JOB test speedup 1.6036414062491229
TPCH test speedup 3.360057435406594
TPCH skew test speedup 3.21641850288759
Epoch 4/300 |loss: 0.007455| train set 3.221x speedup, test set 3.216x speedup, val set 3.321x speedup, step: 1
JOB test speedup 1.5855511899622265
TPCH test speedup 4.0828712083893715
TPCH skew test speedup 3.602331536983551
Epoch 5/300 |loss: 0.006418| train set 3.621x speedup, test set 3.602x speedup, val set 3.881x speedup, step: 2
JOB test speedup 1.8089368373398866
TPCH test speedup 3.9143299529253857
TPCH skew test speedup 3.760176890880883
Epoch 6/300 |loss: 0.006105| train set 3.467x speedup, test set 3.760x speedup, val set 3.876x speedup, step: 3
JOB test speedup 1.9521287025079266
TPCH test speedup 3.9433301926173585
TPCH skew test speedup 3.587576179361814
Epoch 7/300 |loss: 0.005224| train set 4.533x speedup, test set 3.588x speedup, val set 4.569x speedup, step: 4
JOB test speedup 1.9295117611925712
TPCH test speedup 4.324995936082387
TPCH skew test speedup 4.051204689702667
Epoch 8/300 |loss: 0.007815| train set 4.421x speedup, test set 4.051x speedup, val set 5.104x speedup, step: 5
JOB test speedup 1.134848186315606
TPCH test speedup 4.301357661518664
TPCH skew test speedup 3.769384341745643
Epoch 9/300 |loss: 0.005031| train set 4.282x speedup, test set 3.769x speedup, val set 5.234x speedup, step: 1
JOB test speedup 1.054452366285331
TPCH test speedup 4.277633300741772
TPCH skew test speedup 3.943960534416886
Epoch 10/300 |loss: 0.004623| train set 3.620x speedup, test set 3.944x speedup, val set 4.960x speedup, step: 2
JOB test speedup 1.1815010319224042
TPCH test speedup 4.18845841962162
TPCH skew test speedup 3.9856655238937835
Epoch 11/300 |loss: 0.003547| train set 4.392x speedup, test set 3.986x speedup, val set 4.894x speedup, step: 3
JOB test speedup 1.1559821606651397
TPCH test speedup 4.37747454616811
TPCH skew test speedup 3.9916600240734486
Epoch 12/300 |loss: 0.003453| train set 4.871x speedup, test set 3.992x speedup, val set 5.185x speedup, step: 4
JOB test speedup 1.19979365303058
TPCH test speedup 4.322083756116197
TPCH skew test speedup 4.066016927307464
Epoch 13/300 |loss: 0.003350| train set 4.886x speedup, test set 4.066x speedup, val set 5.174x speedup, step: 5
JOB test speedup 1.2698505717025463
TPCH test speedup 4.052199591821061
TPCH skew test speedup 3.9692970038658464
Epoch 14/300 |loss: 0.003909| train set 4.861x speedup, test set 3.969x speedup, val set 5.163x speedup, step: 6
JOB test speedup 0.9892043093385832
TPCH test speedup 4.04631211114623
TPCH skew test speedup 3.756924699728835
Epoch 15/300 |loss: 0.002589| train set 5.000x speedup, test set 3.757x speedup, val set 5.110x speedup, step: 7
JOB test speedup 0.7183626738749566
TPCH test speedup 3.971344418870329
TPCH skew test speedup 3.6625077065822116
Epoch 16/300 |loss: 0.002395| train set 4.532x speedup, test set 3.663x speedup, val set 4.886x speedup, step: 8
JOB test speedup 1.2397891946218262
TPCH test speedup 4.057702712706605
TPCH skew test speedup 3.7649394779845977
Epoch 17/300 |loss: 0.002667| train set 4.975x speedup, test set 3.765x speedup, val set 5.241x speedup, step: 9
JOB test speedup 0.9241804243452646
TPCH test speedup 4.01698466321036
TPCH skew test speedup 3.7390715939138697
Epoch 18/300 |loss: 0.002092| train set 5.040x speedup, test set 3.739x speedup, val set 5.191x speedup, step: 10
JOB test speedup 0.8394516542863601
TPCH test speedup 4.006927530353305
TPCH skew test speedup 3.7162176223116568
Epoch 19/300 |loss: 0.002030| train set 5.114x speedup, test set 3.716x speedup, val set 5.136x speedup, step: 11
JOB test speedup 0.9308562990883118
TPCH test speedup 3.98600815306543
TPCH skew test speedup 3.6929187150808382
Epoch 20/300 |loss: 0.002041| train set 4.966x speedup, test set 3.693x speedup, val set 5.034x speedup, step: 12
JOB test speedup 0.8148775653660432
TPCH test speedup 3.448969370795816
TPCH skew test speedup 3.2325856693242296
Epoch 21/300 |loss: 0.002521| train set 3.063x speedup, test set 3.233x speedup, val set 3.136x speedup, step: 13
JOB test speedup 1.2658207172641023
TPCH test speedup 3.9718708713311606
TPCH skew test speedup 3.91228513179076
Epoch 22/300 |loss: 0.002797| train set 5.034x speedup, test set 3.912x speedup, val set 3.779x speedup, step: 14
JOB test speedup 1.2390766276301373
TPCH test speedup 4.042481483023837
TPCH skew test speedup 3.9423972084207346
Epoch 23/300 |loss: 0.001878| train set 5.067x speedup, test set 3.942x speedup, val set 5.131x speedup, step: 15
JOB test speedup 0.9215119544099452
TPCH test speedup 4.035968709251234
TPCH skew test speedup 3.9940114508752123
Epoch 24/300 |loss: 0.002579| train set 5.149x speedup, test set 3.994x speedup, val set 5.132x speedup, step: 16
JOB test speedup 1.2404295030348005
TPCH test speedup 4.065644062613431
TPCH skew test speedup 4.012303645609062
Epoch 25/300 |loss: 0.001913| train set 5.167x speedup, test set 4.012x speedup, val set 5.182x speedup, step: 17
JOB test speedup 0.9366618447298753
TPCH test speedup 3.967683057751992
TPCH skew test speedup 3.9002481907122055
Epoch 26/300 |loss: 0.001753| train set 5.119x speedup, test set 3.900x speedup, val set 5.149x speedup, step: 18
JOB test speedup 0.9249914968084924
TPCH test speedup 3.983836676387683
TPCH skew test speedup 3.922565981544949
Epoch 27/300 |loss: 0.001698| train set 5.151x speedup, test set 3.923x speedup, val set 5.031x speedup, step: 19
JOB test speedup 0.8817354424071903
TPCH test speedup 4.011964043094732
TPCH skew test speedup 3.969250317501502
Epoch 28/300 |loss: 0.001795| train set 5.140x speedup, test set 3.969x speedup, val set 5.190x speedup, step: 20
JOB test speedup 0.9349228518538141
TPCH test speedup 4.0200182507570394
TPCH skew test speedup 4.022700664624199
Epoch 29/300 |loss: 0.001663| train set 5.141x speedup, test set 4.023x speedup, val set 5.192x speedup, step: 21
JOB test speedup 0.9587728812850311
TPCH test speedup 4.042993839762655
TPCH skew test speedup 3.960377429320805
Epoch 30/300 |loss: 0.002184| train set 5.154x speedup, test set 3.960x speedup, val set 5.273x speedup, step: 22
JOB test speedup 0.9690432065303747
TPCH test speedup 4.066224816256268
TPCH skew test speedup 4.049738069460169
Epoch 31/300 |loss: 0.001606| train set 5.156x speedup, test set 4.050x speedup, val set 5.250x speedup, step: 23
JOB test speedup 1.099970142956062
TPCH test speedup 4.078163437217484
TPCH skew test speedup 4.021070644959844
Epoch 32/300 |loss: 0.001513| train set 5.122x speedup, test set 4.021x speedup, val set 4.095x speedup, step: 24
JOB test speedup 0.9339927261097217
TPCH test speedup 4.108306444030869
TPCH skew test speedup 4.043481063330739
Epoch 33/300 |loss: 0.001801| train set 5.172x speedup, test set 4.043x speedup, val set 5.239x speedup, step: 25
JOB test speedup 1.2797911914880244
TPCH test speedup 4.0648184227458435
TPCH skew test speedup 4.020700437507547
Epoch 34/300 |loss: 0.001543| train set 5.145x speedup, test set 4.021x speedup, val set 5.195x speedup, step: 26
JOB test speedup 1.2732929841400227
TPCH test speedup 3.9379759597102013
TPCH skew test speedup 3.940153098930275
Epoch 35/300 |loss: 0.001465| train set 5.158x speedup, test set 3.940x speedup, val set 5.170x speedup, step: 27
JOB test speedup 1.253171555103959
TPCH test speedup 4.0520311639615345
TPCH skew test speedup 3.9702047450839086
Epoch 36/300 |loss: 0.001504| train set 5.173x speedup, test set 3.970x speedup, val set 5.043x speedup, step: 28
JOB test speedup 1.260616360317233
TPCH test speedup 4.07138616124754
TPCH skew test speedup 4.026734078714608
Epoch 37/300 |loss: 0.001593| train set 5.126x speedup, test set 4.027x speedup, val set 5.157x speedup, step: 29
JOB test speedup 1.2617910201754765
TPCH test speedup 4.426299127423862
TPCH skew test speedup 4.13342251503554
Epoch 38/300 |loss: 0.001488| train set 5.164x speedup, test set 4.133x speedup, val set 5.295x speedup, step: 30
JOB test speedup 1.1649947550845625
TPCH test speedup 4.077252874961665
TPCH skew test speedup 4.014167982035382
Epoch 39/300 |loss: 0.001108| train set 5.114x speedup, test set 4.014x speedup, val set 5.184x speedup, step: 31
JOB test speedup 1.1688964942634306
TPCH test speedup 3.80775394425029
TPCH skew test speedup 3.748553616152479
Epoch 40/300 |loss: 0.001133| train set 5.121x speedup, test set 3.749x speedup, val set 5.110x speedup, step: 32
JOB test speedup 1.1635412973727517
TPCH test speedup 4.3462905609858336
TPCH skew test speedup 4.03095418452642
Epoch 41/300 |loss: 0.001185| train set 5.097x speedup, test set 4.031x speedup, val set 5.180x speedup, step: 33
JOB test speedup 1.2953641003344605
TPCH test speedup 4.329121673030439
TPCH skew test speedup 3.9884063189685426
Epoch 42/300 |loss: 0.001166| train set 5.090x speedup, test set 3.988x speedup, val set 5.174x speedup, step: 34
JOB test speedup 1.2746847655513391
TPCH test speedup 3.868155312583578
TPCH skew test speedup 3.762281087108482
Epoch 43/300 |loss: 0.001276| train set 5.139x speedup, test set 3.762x speedup, val set 4.940x speedup, step: 35
JOB test speedup 1.271317854642895
TPCH test speedup 4.377208489419073
TPCH skew test speedup 4.023693627031578
Epoch 44/300 |loss: 0.001481| train set 5.131x speedup, test set 4.024x speedup, val set 5.265x speedup, step: 1
JOB test speedup 1.2470574968417152
TPCH test speedup 4.134163447165342
TPCH skew test speedup 4.057042399418064
Epoch 45/300 |loss: 0.001242| train set 5.174x speedup, test set 4.057x speedup, val set 5.292x speedup, step: 2
JOB test speedup 1.2345396712351377
TPCH test speedup 4.389312721000059
TPCH skew test speedup 4.053718423951749
Epoch 46/300 |loss: 0.000996| train set 5.185x speedup, test set 4.054x speedup, val set 5.298x speedup, step: 3
JOB test speedup 1.2902567715081974
TPCH test speedup 3.9181656264729914
TPCH skew test speedup 3.898756564467467
Epoch 47/300 |loss: 0.001372| train set 5.157x speedup, test set 3.899x speedup, val set 5.280x speedup, step: 4
JOB test speedup 1.166824978388486
TPCH test speedup 3.8945394451984385
TPCH skew test speedup 3.8828144748918993
Epoch 48/300 |loss: 0.001877| train set 5.034x speedup, test set 3.883x speedup, val set 4.860x speedup, step: 5
early stopping at epoch 48
Training per epoch cost 2.327 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 7.467s, pg runtime 5.855s, speedup 0.784x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 52.203s, pg runtime 13.945s, speedup 0.267x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 3.108s, pg runtime 57.198s, speedup 18.401x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.271s, pg runtime 2.718s, speedup 1.197x
16, opt runtime 0.441s, model runtime 0.474s, pg runtime 0.453s, speedup 0.956x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.093s, pg runtime 0.089s, speedup 0.956x
21, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
22, opt runtime 0.093s, model runtime 0.322s, pg runtime 2.389s, speedup 7.421x
23, opt runtime 0.389s, model runtime 0.433s, pg runtime 0.389s, speedup 0.898x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.239s, pg runtime 0.239s, speedup 1.000x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.172s, pg runtime 0.158s, speedup 0.921x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 5.959s, pg runtime 6.444s, speedup 1.081x
33, opt runtime 2.755s, model runtime 2.923s, pg runtime 5.521s, speedup 1.889x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 9.232s, pg runtime 31.019s, speedup 3.360x
08, opt runtime 7.377s, model runtime 8.566s, pg runtime 28.655s, speedup 3.345x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.457s, pg runtime 1.438s, speedup 0.987x
20, opt runtime 1.428s, model runtime 1.528s, pg runtime 1.428s, speedup 0.934x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 2.529s, pg runtime 1.752s, speedup 0.693x
26, opt runtime 1.423s, model runtime 2.393s, pg runtime 1.423s, speedup 0.594x
27, opt runtime 6.789s, model runtime 6.789s, pg runtime 7.799s, speedup 1.149x
28, opt runtime 7.199s, model runtime 7.589s, pg runtime 7.619s, speedup 1.004x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 8.857s, pg runtime 14.081s, speedup 1.590x
08, opt runtime 5.471s, model runtime 8.538s, pg runtime 13.410s, speedup 1.571x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.308s, model runtime 1.377s, pg runtime 1.528s, speedup 1.110x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 2.260s, pg runtime 1.433s, speedup 0.634x
26, opt runtime 1.420s, model runtime 2.491s, pg runtime 1.420s, speedup 0.570x
27, opt runtime 7.419s, model runtime 7.893s, pg runtime 7.675s, speedup 0.972x
28, opt runtime 7.312s, model runtime 8.350s, pg runtime 7.655s, speedup 0.917x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 44, train speedup 5.131, test speedup 1.271, val speedup 5.265
TPCH best validation speedup epoch: 44, train speedup 5.131, test speedup 4.377, val speedup 5.265
TPCH Skew best validation speedup epoch: 44, train speedup 5.131, test speedup 4.024, val speedup 5.265
execution cost 0:02:47.879528
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.135912, and there are 9604 training samples
in channel 9
JOB test speedup 0.6316320939600328
TPCH test speedup 2.825356230297737
TPCH skew test speedup 2.5572325182245006
Epoch 0/300 |loss: 0.037331| train set 2.542x speedup, test set 2.557x speedup, val set 2.424x speedup, step: 1
JOB test speedup 0.841527964906055
TPCH test speedup 2.9649249839407066
TPCH skew test speedup 2.7468799114622504
Epoch 1/300 |loss: 0.016884| train set 2.629x speedup, test set 2.747x speedup, val set 2.764x speedup, step: 2
JOB test speedup 1.545354485518611
TPCH test speedup 3.1231157393898346
TPCH skew test speedup 2.9396720987635394
Epoch 2/300 |loss: 0.010821| train set 2.855x speedup, test set 2.940x speedup, val set 3.113x speedup, step: 3
JOB test speedup 1.5828697957718656
TPCH test speedup 3.3479101260006567
TPCH skew test speedup 3.1104795854959737
Epoch 3/300 |loss: 0.008661| train set 2.639x speedup, test set 3.110x speedup, val set 2.764x speedup, step: 4
JOB test speedup 1.6623221014899228
TPCH test speedup 3.8754330085889306
TPCH skew test speedup 3.492569766663634
Epoch 4/300 |loss: 0.007259| train set 3.218x speedup, test set 3.493x speedup, val set 3.413x speedup, step: 1
JOB test speedup 1.5329648917185192
TPCH test speedup 3.872216231668427
TPCH skew test speedup 3.3017597272246033
Epoch 5/300 |loss: 0.006408| train set 3.275x speedup, test set 3.302x speedup, val set 3.673x speedup, step: 2
JOB test speedup 1.8802726213618228
TPCH test speedup 3.822708224688175
TPCH skew test speedup 3.757961584780048
Epoch 6/300 |loss: 0.006043| train set 3.182x speedup, test set 3.758x speedup, val set 3.389x speedup, step: 3
JOB test speedup 1.8339777558015653
TPCH test speedup 4.084504829970843
TPCH skew test speedup 3.849813431029915
Epoch 7/300 |loss: 0.005244| train set 4.649x speedup, test set 3.850x speedup, val set 4.823x speedup, step: 4
JOB test speedup 2.1724594283428553
TPCH test speedup 4.21402673596732
TPCH skew test speedup 4.063060114303924
Epoch 8/300 |loss: 0.007672| train set 4.397x speedup, test set 4.063x speedup, val set 4.555x speedup, step: 5
JOB test speedup 1.2014557529183083
TPCH test speedup 4.014623385422159
TPCH skew test speedup 3.922462112292059
Epoch 9/300 |loss: 0.004912| train set 4.097x speedup, test set 3.922x speedup, val set 4.968x speedup, step: 1
JOB test speedup 0.9772811367303246
TPCH test speedup 3.9473762254813733
TPCH skew test speedup 3.761176115848787
Epoch 10/300 |loss: 0.004422| train set 3.751x speedup, test set 3.761x speedup, val set 4.935x speedup, step: 2
JOB test speedup 1.21883821963143
TPCH test speedup 3.931707582055076
TPCH skew test speedup 3.743738998012786
Epoch 11/300 |loss: 0.003470| train set 4.413x speedup, test set 3.744x speedup, val set 4.891x speedup, step: 3
JOB test speedup 0.737732208182482
TPCH test speedup 4.12404242735376
TPCH skew test speedup 3.8137373886149653
Epoch 12/300 |loss: 0.003377| train set 4.894x speedup, test set 3.814x speedup, val set 5.284x speedup, step: 4
JOB test speedup 0.7504709914523399
TPCH test speedup 3.7736343224819047
TPCH skew test speedup 3.5687593348156947
Epoch 13/300 |loss: 0.003142| train set 4.957x speedup, test set 3.569x speedup, val set 4.435x speedup, step: 5
JOB test speedup 0.9587508157442369
TPCH test speedup 4.069845456051286
TPCH skew test speedup 3.775566615106725
Epoch 14/300 |loss: 0.003792| train set 5.015x speedup, test set 3.776x speedup, val set 5.296x speedup, step: 1
JOB test speedup 0.9348881850004462
TPCH test speedup 4.070300085381994
TPCH skew test speedup 3.7788783002799615
Epoch 15/300 |loss: 0.002405| train set 5.017x speedup, test set 3.779x speedup, val set 5.115x speedup, step: 2
JOB test speedup 0.8666183093912413
TPCH test speedup 3.9912848181541274
TPCH skew test speedup 3.706422512547371
Epoch 16/300 |loss: 0.002352| train set 5.014x speedup, test set 3.706x speedup, val set 5.173x speedup, step: 3
JOB test speedup 0.9341545259441516
TPCH test speedup 4.090527138901674
TPCH skew test speedup 3.7779314414174685
Epoch 17/300 |loss: 0.002649| train set 5.026x speedup, test set 3.778x speedup, val set 5.311x speedup, step: 4
JOB test speedup 0.9671300079070194
TPCH test speedup 3.927831141569478
TPCH skew test speedup 3.640956843573086
Epoch 18/300 |loss: 0.002009| train set 5.000x speedup, test set 3.641x speedup, val set 4.910x speedup, step: 5
JOB test speedup 0.9446727754789326
TPCH test speedup 3.993976648360002
TPCH skew test speedup 3.7102794524311435
Epoch 19/300 |loss: 0.002030| train set 5.072x speedup, test set 3.710x speedup, val set 5.178x speedup, step: 6
JOB test speedup 0.9475577465478872
TPCH test speedup 4.022431705217382
TPCH skew test speedup 3.761335643996027
Epoch 20/300 |loss: 0.001989| train set 5.003x speedup, test set 3.761x speedup, val set 5.076x speedup, step: 7
JOB test speedup 0.8434460324806694
TPCH test speedup 3.488424314205011
TPCH skew test speedup 3.2655852468322135
Epoch 21/300 |loss: 0.002367| train set 3.093x speedup, test set 3.266x speedup, val set 3.174x speedup, step: 8
JOB test speedup 1.321330061069088
TPCH test speedup 4.070515574555064
TPCH skew test speedup 4.029073104309583
Epoch 22/300 |loss: 0.002636| train set 3.704x speedup, test set 4.029x speedup, val set 3.744x speedup, step: 9
JOB test speedup 1.3447290474279858
TPCH test speedup 4.091342022836834
TPCH skew test speedup 3.7850131480174505
Epoch 23/300 |loss: 0.001807| train set 5.052x speedup, test set 3.785x speedup, val set 3.766x speedup, step: 10
JOB test speedup 0.9658381523099822
TPCH test speedup 4.0631631024753485
TPCH skew test speedup 3.989923121024824
Epoch 24/300 |loss: 0.002266| train set 5.077x speedup, test set 3.990x speedup, val set 3.737x speedup, step: 11
JOB test speedup 0.9198133128609403
TPCH test speedup 4.115904456594114
TPCH skew test speedup 4.060390655729499
Epoch 25/300 |loss: 0.001753| train set 5.157x speedup, test set 4.060x speedup, val set 5.291x speedup, step: 12
JOB test speedup 0.962120846716464
TPCH test speedup 4.059063810813976
TPCH skew test speedup 4.0193634611570195
Epoch 26/300 |loss: 0.001715| train set 5.142x speedup, test set 4.019x speedup, val set 5.192x speedup, step: 13
JOB test speedup 0.9802975185375002
TPCH test speedup 4.059268150308577
TPCH skew test speedup 4.022710840183287
Epoch 27/300 |loss: 0.001679| train set 5.160x speedup, test set 4.023x speedup, val set 5.162x speedup, step: 14
JOB test speedup 1.1830777002702646
TPCH test speedup 4.062341117792781
TPCH skew test speedup 4.023471111633401
Epoch 28/300 |loss: 0.001545| train set 5.152x speedup, test set 4.023x speedup, val set 3.762x speedup, step: 15
JOB test speedup 1.2991104896711703
TPCH test speedup 4.065764773854768
TPCH skew test speedup 4.000153538854235
Epoch 29/300 |loss: 0.001578| train set 5.083x speedup, test set 4.000x speedup, val set 5.146x speedup, step: 16
JOB test speedup 1.2836059123483061
TPCH test speedup 3.925264710608049
TPCH skew test speedup 3.940350651925485
Epoch 30/300 |loss: 0.001858| train set 5.155x speedup, test set 3.940x speedup, val set 5.091x speedup, step: 17
JOB test speedup 2.0109663876564605
TPCH test speedup 4.010888096531455
TPCH skew test speedup 3.964330841332242
Epoch 31/300 |loss: 0.001456| train set 5.156x speedup, test set 3.964x speedup, val set 4.918x speedup, step: 18
JOB test speedup 1.3121617900106313
TPCH test speedup 4.076481644023859
TPCH skew test speedup 4.029052507640504
Epoch 32/300 |loss: 0.001423| train set 3.852x speedup, test set 4.029x speedup, val set 3.753x speedup, step: 19
JOB test speedup 1.2600011069515
TPCH test speedup 3.9363359548005112
TPCH skew test speedup 3.9185327573392055
Epoch 33/300 |loss: 0.001972| train set 5.146x speedup, test set 3.919x speedup, val set 4.974x speedup, step: 20
JOB test speedup 1.3040940332730446
TPCH test speedup 4.06640676417992
TPCH skew test speedup 4.024163345244681
Epoch 34/300 |loss: 0.001374| train set 5.156x speedup, test set 4.024x speedup, val set 5.172x speedup, step: 21
JOB test speedup 1.2615660654274705
TPCH test speedup 4.053937521817336
TPCH skew test speedup 4.014815345086121
Epoch 35/300 |loss: 0.001345| train set 5.171x speedup, test set 4.015x speedup, val set 5.181x speedup, step: 22
JOB test speedup 0.9456282593033726
TPCH test speedup 4.0284951155809425
TPCH skew test speedup 3.8035596033568067
Epoch 36/300 |loss: 0.001429| train set 5.174x speedup, test set 3.804x speedup, val set 5.110x speedup, step: 23
JOB test speedup 0.9392651599145431
TPCH test speedup 4.0763632854647565
TPCH skew test speedup 4.025375944196145
Epoch 37/300 |loss: 0.001401| train set 5.096x speedup, test set 4.025x speedup, val set 4.996x speedup, step: 24
JOB test speedup 1.3037134168128264
TPCH test speedup 4.109949084141054
TPCH skew test speedup 4.093502746189219
Epoch 38/300 |loss: 0.001433| train set 5.082x speedup, test set 4.094x speedup, val set 5.009x speedup, step: 25
JOB test speedup 1.2937035778766486
TPCH test speedup 4.084560469601554
TPCH skew test speedup 4.017208338818652
Epoch 39/300 |loss: 0.001223| train set 5.131x speedup, test set 4.017x speedup, val set 5.027x speedup, step: 26
JOB test speedup 1.3501908260113444
TPCH test speedup 3.9322838540059126
TPCH skew test speedup 3.9480728127113456
Epoch 40/300 |loss: 0.001060| train set 5.181x speedup, test set 3.948x speedup, val set 5.216x speedup, step: 27
JOB test speedup 1.1790830996279331
TPCH test speedup 4.102897072560591
TPCH skew test speedup 4.05274864663589
Epoch 41/300 |loss: 0.001076| train set 5.129x speedup, test set 4.053x speedup, val set 5.294x speedup, step: 28
JOB test speedup 1.2642365772727315
TPCH test speedup 3.97292864951943
TPCH skew test speedup 3.911286956067069
Epoch 42/300 |loss: 0.001124| train set 5.117x speedup, test set 3.911x speedup, val set 5.161x speedup, step: 29
JOB test speedup 1.2439044810416056
TPCH test speedup 4.077683785425247
TPCH skew test speedup 4.0234831745734185
Epoch 43/300 |loss: 0.001194| train set 5.179x speedup, test set 4.023x speedup, val set 5.200x speedup, step: 30
JOB test speedup 1.2403166906383212
TPCH test speedup 4.010281357431712
TPCH skew test speedup 3.9534292523430854
Epoch 44/300 |loss: 0.001461| train set 5.162x speedup, test set 3.953x speedup, val set 5.106x speedup, step: 31
JOB test speedup 1.2900998213898398
TPCH test speedup 4.063635185762794
TPCH skew test speedup 4.026265299606052
Epoch 45/300 |loss: 0.001255| train set 5.179x speedup, test set 4.026x speedup, val set 5.299x speedup, step: 32
JOB test speedup 1.2714376613757632
TPCH test speedup 4.0751729262385075
TPCH skew test speedup 4.026100975977931
Epoch 46/300 |loss: 0.000973| train set 5.157x speedup, test set 4.026x speedup, val set 5.267x speedup, step: 33
JOB test speedup 1.2565377115381218
TPCH test speedup 4.10953858615528
TPCH skew test speedup 3.78911457895816
Epoch 47/300 |loss: 0.001299| train set 5.158x speedup, test set 3.789x speedup, val set 5.276x speedup, step: 34
JOB test speedup 1.2570551544375386
TPCH test speedup 3.767399122297241
TPCH skew test speedup 3.7538270077199307
Epoch 48/300 |loss: 0.001635| train set 4.404x speedup, test set 3.754x speedup, val set 4.704x speedup, step: 35
early stopping at epoch 48
Training per epoch cost 2.366 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 2.238s, model runtime 2.885s, pg runtime 2.718s, speedup 0.942x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.354s, pg runtime 0.354s, speedup 1.000x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.093s, pg runtime 0.089s, speedup 0.956x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.322s, pg runtime 2.389s, speedup 7.421x
23, opt runtime 0.389s, model runtime 0.433s, pg runtime 0.389s, speedup 0.898x
24, opt runtime 2.719s, model runtime 4.408s, pg runtime 3.112s, speedup 0.706x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.350s, pg runtime 0.161s, speedup 0.460x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 2.923s, pg runtime 5.521s, speedup 1.889x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
16, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.438s, pg runtime 1.438s, speedup 1.000x
20, opt runtime 1.428s, model runtime 1.428s, pg runtime 1.428s, speedup 1.000x
21, opt runtime 25.034s, model runtime 31.752s, pg runtime 25.034s, speedup 0.788x
22, opt runtime 20.897s, model runtime 20.897s, pg runtime 23.708s, speedup 1.135x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.280s, model runtime 18.051s, pg runtime 634.990s, speedup 35.177x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 38.717s, pg runtime 42.976s, speedup 1.110x
18, opt runtime 6.531s, model runtime 34.854s, pg runtime 29.727s, speedup 0.853x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.308s, model runtime 1.528s, pg runtime 1.528s, speedup 1.000x
21, opt runtime 26.669s, model runtime 33.362s, pg runtime 30.614s, speedup 0.918x
22, opt runtime 28.744s, model runtime 31.889s, pg runtime 29.665s, speedup 0.930x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 9.598s, pg runtime 7.675s, speedup 0.800x
28, opt runtime 7.312s, model runtime 9.807s, pg runtime 7.655s, speedup 0.781x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.301s, pg runtime 646.719s, speedup 39.673x
36, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 14, train speedup 5.015, test speedup 0.959, val speedup 5.296
TPCH best validation speedup epoch: 14, train speedup 5.015, test speedup 4.070, val speedup 5.296
TPCH Skew best validation speedup epoch: 14, train speedup 5.015, test speedup 3.776, val speedup 5.296
execution cost 0:02:49.247179
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.156908, and there are 9604 training samples
in channel 9
JOB test speedup 0.6316320939600328
TPCH test speedup 2.825356230297737
TPCH skew test speedup 2.5572325182245006
Epoch 0/300 |loss: 0.037331| train set 2.542x speedup, test set 2.557x speedup, val set 2.424x speedup, step: 1
JOB test speedup 0.841527964906055
TPCH test speedup 2.9649249839407066
TPCH skew test speedup 2.7468799114622504
Epoch 1/300 |loss: 0.016884| train set 2.629x speedup, test set 2.747x speedup, val set 2.764x speedup, step: 2
JOB test speedup 1.545354485518611
TPCH test speedup 3.1231157393898346
TPCH skew test speedup 2.9396720987635394
Epoch 2/300 |loss: 0.010821| train set 2.855x speedup, test set 2.940x speedup, val set 3.113x speedup, step: 3
JOB test speedup 1.5828697957718656
TPCH test speedup 3.3479101260006567
TPCH skew test speedup 3.1104795854959737
Epoch 3/300 |loss: 0.008661| train set 2.639x speedup, test set 3.110x speedup, val set 2.764x speedup, step: 4
JOB test speedup 1.6617132364868408
TPCH test speedup 4.143136850250963
TPCH skew test speedup 3.6280239310934568
Epoch 4/300 |loss: 0.007300| train set 3.219x speedup, test set 3.628x speedup, val set 3.419x speedup, step: 1
JOB test speedup 1.5329511152025033
TPCH test speedup 3.95832097270724
TPCH skew test speedup 3.5207822280033962
Epoch 5/300 |loss: 0.006406| train set 3.320x speedup, test set 3.521x speedup, val set 3.402x speedup, step: 2
JOB test speedup 1.8097487159819083
TPCH test speedup 3.856071424165598
TPCH skew test speedup 3.549606999452083
Epoch 6/300 |loss: 0.006091| train set 3.179x speedup, test set 3.550x speedup, val set 3.393x speedup, step: 3
JOB test speedup 1.7898299702704823
TPCH test speedup 4.217754754188859
TPCH skew test speedup 3.872261812600783
Epoch 7/300 |loss: 0.005231| train set 4.649x speedup, test set 3.872x speedup, val set 4.872x speedup, step: 4
JOB test speedup 2.025893629076261
TPCH test speedup 4.164641821397723
TPCH skew test speedup 4.012595558620875
Epoch 8/300 |loss: 0.007703| train set 4.369x speedup, test set 4.013x speedup, val set 4.391x speedup, step: 5
JOB test speedup 1.155294065765007
TPCH test speedup 4.128119104979473
TPCH skew test speedup 3.9251184444512113
Epoch 9/300 |loss: 0.005053| train set 4.029x speedup, test set 3.925x speedup, val set 4.798x speedup, step: 1
JOB test speedup 0.725438562743062
TPCH test speedup 3.9509902940379975
TPCH skew test speedup 3.999482903828009
Epoch 10/300 |loss: 0.004420| train set 4.396x speedup, test set 3.999x speedup, val set 4.915x speedup, step: 2
JOB test speedup 0.7301723849590996
TPCH test speedup 4.112233200945104
TPCH skew test speedup 4.084606736094508
Epoch 11/300 |loss: 0.003497| train set 4.147x speedup, test set 4.085x speedup, val set 4.284x speedup, step: 3
JOB test speedup 0.7294395941335458
TPCH test speedup 4.11250789730486
TPCH skew test speedup 3.814348487180193
Epoch 12/300 |loss: 0.003414| train set 4.792x speedup, test set 3.814x speedup, val set 5.270x speedup, step: 4
JOB test speedup 0.7479234028545452
TPCH test speedup 4.005316926383341
TPCH skew test speedup 4.002708722537617
Epoch 13/300 |loss: 0.003255| train set 4.383x speedup, test set 4.003x speedup, val set 4.963x speedup, step: 5
JOB test speedup 0.7536778996254238
TPCH test speedup 4.116625600421772
TPCH skew test speedup 4.062325706648105
Epoch 14/300 |loss: 0.003967| train set 4.875x speedup, test set 4.062x speedup, val set 5.261x speedup, step: 1
JOB test speedup 0.9773071589457188
TPCH test speedup 4.078511185641198
TPCH skew test speedup 4.025804380417564
Epoch 15/300 |loss: 0.002523| train set 4.853x speedup, test set 4.026x speedup, val set 5.183x speedup, step: 2
JOB test speedup 0.9253857589221062
TPCH test speedup 3.986706676688949
TPCH skew test speedup 3.905322121294518
Epoch 16/300 |loss: 0.002345| train set 4.729x speedup, test set 3.905x speedup, val set 5.163x speedup, step: 3
JOB test speedup 0.9531832069054184
TPCH test speedup 4.115140240615712
TPCH skew test speedup 4.059438477997054
Epoch 17/300 |loss: 0.002570| train set 5.118x speedup, test set 4.059x speedup, val set 5.268x speedup, step: 4
JOB test speedup 0.929202427616926
TPCH test speedup 4.043143552678597
TPCH skew test speedup 3.988173441957499
Epoch 18/300 |loss: 0.002024| train set 5.032x speedup, test set 3.988x speedup, val set 5.284x speedup, step: 5
JOB test speedup 0.9407174268644523
TPCH test speedup 4.06678663639774
TPCH skew test speedup 4.0328970506924895
Epoch 19/300 |loss: 0.001903| train set 5.066x speedup, test set 4.033x speedup, val set 5.103x speedup, step: 6
JOB test speedup 0.8696241873794494
TPCH test speedup 3.972075234376499
TPCH skew test speedup 3.931789610506077
Epoch 20/300 |loss: 0.001852| train set 5.073x speedup, test set 3.932x speedup, val set 4.924x speedup, step: 7
JOB test speedup 0.5992479721634683
TPCH test speedup 3.48574303411708
TPCH skew test speedup 3.439171941810747
Epoch 21/300 |loss: 0.002526| train set 3.092x speedup, test set 3.439x speedup, val set 3.170x speedup, step: 8
JOB test speedup 0.9882144321880822
TPCH test speedup 4.0868885512150515
TPCH skew test speedup 4.025910951184221
Epoch 22/300 |loss: 0.002692| train set 5.144x speedup, test set 4.026x speedup, val set 3.754x speedup, step: 9
JOB test speedup 0.9942788040387835
TPCH test speedup 4.029690183196675
TPCH skew test speedup 3.940019524351304
Epoch 23/300 |loss: 0.001762| train set 5.067x speedup, test set 3.940x speedup, val set 5.219x speedup, step: 10
JOB test speedup 1.1559029161106418
TPCH test speedup 3.9757269336416323
TPCH skew test speedup 3.8981707874605567
Epoch 24/300 |loss: 0.002473| train set 5.166x speedup, test set 3.898x speedup, val set 5.102x speedup, step: 11
JOB test speedup 0.9709741867791262
TPCH test speedup 4.084010397148822
TPCH skew test speedup 4.032333153911726
Epoch 25/300 |loss: 0.001734| train set 5.160x speedup, test set 4.032x speedup, val set 5.277x speedup, step: 12
JOB test speedup 0.9593085878353548
TPCH test speedup 4.054017066566565
TPCH skew test speedup 4.00551604347821
Epoch 26/300 |loss: 0.001623| train set 5.171x speedup, test set 4.006x speedup, val set 5.194x speedup, step: 13
JOB test speedup 0.9679607872982577
TPCH test speedup 4.031938073110994
TPCH skew test speedup 3.9586655088192777
Epoch 27/300 |loss: 0.001631| train set 5.066x speedup, test set 3.959x speedup, val set 5.134x speedup, step: 14
JOB test speedup 1.1923852444160365
TPCH test speedup 4.062718315319951
TPCH skew test speedup 4.025625727852617
Epoch 28/300 |loss: 0.001593| train set 5.140x speedup, test set 4.026x speedup, val set 5.117x speedup, step: 15
JOB test speedup 0.9559621027900248
TPCH test speedup 3.9993198671899792
TPCH skew test speedup 3.936341167783886
Epoch 29/300 |loss: 0.001417| train set 5.113x speedup, test set 3.936x speedup, val set 5.028x speedup, step: 16
JOB test speedup 1.403052511154358
TPCH test speedup 4.094325023215104
TPCH skew test speedup 4.0439665886562475
Epoch 30/300 |loss: 0.002036| train set 5.158x speedup, test set 4.044x speedup, val set 5.276x speedup, step: 17
JOB test speedup 1.0138447673137934
TPCH test speedup 4.096727254372912
TPCH skew test speedup 4.047478171366593
Epoch 31/300 |loss: 0.001501| train set 5.178x speedup, test set 4.047x speedup, val set 5.270x speedup, step: 18
JOB test speedup 1.3127561383233137
TPCH test speedup 3.580781222023694
TPCH skew test speedup 3.6291159640274286
Epoch 32/300 |loss: 0.001460| train set 5.137x speedup, test set 3.629x speedup, val set 3.638x speedup, step: 19
JOB test speedup 1.2938251189835883
TPCH test speedup 4.115414462012665
TPCH skew test speedup 4.056602394613957
Epoch 33/300 |loss: 0.001779| train set 5.185x speedup, test set 4.057x speedup, val set 5.309x speedup, step: 20
JOB test speedup 1.3052358776445299
TPCH test speedup 4.066746842969934
TPCH skew test speedup 4.026661637725477
Epoch 34/300 |loss: 0.001495| train set 5.153x speedup, test set 4.027x speedup, val set 5.193x speedup, step: 21
JOB test speedup 1.2579697279062843
TPCH test speedup 4.079976543889209
TPCH skew test speedup 4.026734078714608
Epoch 35/300 |loss: 0.001348| train set 5.143x speedup, test set 4.027x speedup, val set 5.200x speedup, step: 22
JOB test speedup 1.3074633345543651
TPCH test speedup 4.375763853434792
TPCH skew test speedup 4.046790097117714
Epoch 36/300 |loss: 0.001392| train set 5.140x speedup, test set 4.047x speedup, val set 5.324x speedup, step: 23
JOB test speedup 1.3333234486630736
TPCH test speedup 4.377181508693458
TPCH skew test speedup 4.056677773108543
Epoch 37/300 |loss: 0.001312| train set 5.184x speedup, test set 4.057x speedup, val set 5.259x speedup, step: 24
JOB test speedup 1.258803839616915
TPCH test speedup 4.295048651968212
TPCH skew test speedup 3.960768001565224
Epoch 38/300 |loss: 0.001463| train set 5.116x speedup, test set 3.961x speedup, val set 4.021x speedup, step: 25
JOB test speedup 1.2353765775381924
TPCH test speedup 4.068789662921192
TPCH skew test speedup 4.008138991338635
Epoch 39/300 |loss: 0.001142| train set 5.132x speedup, test set 4.008x speedup, val set 5.164x speedup, step: 26
JOB test speedup 1.2418564023525809
TPCH test speedup 4.024736364230408
TPCH skew test speedup 3.95536696546423
Epoch 40/300 |loss: 0.000909| train set 5.142x speedup, test set 3.955x speedup, val set 5.082x speedup, step: 27
JOB test speedup 1.0729563075886497
TPCH test speedup 4.047624932499167
TPCH skew test speedup 3.750524212434821
Epoch 41/300 |loss: 0.000939| train set 5.113x speedup, test set 3.751x speedup, val set 5.103x speedup, step: 28
JOB test speedup 1.298989571211931
TPCH test speedup 4.1210355967025345
TPCH skew test speedup 4.0645512859884185
Epoch 42/300 |loss: 0.001037| train set 4.874x speedup, test set 4.065x speedup, val set 5.242x speedup, step: 29
JOB test speedup 1.2455262078441682
TPCH test speedup 4.041949451950627
TPCH skew test speedup 3.9817932368453133
Epoch 43/300 |loss: 0.001349| train set 5.158x speedup, test set 3.982x speedup, val set 5.074x speedup, step: 30
JOB test speedup 1.3291036939474046
TPCH test speedup 4.291227534582473
TPCH skew test speedup 3.963698301439403
Epoch 44/300 |loss: 0.001351| train set 5.163x speedup, test set 3.964x speedup, val set 5.266x speedup, step: 1
early stopping at epoch 44
Training per epoch cost 2.370 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.084s, pg runtime 0.081s, speedup 0.961x
02, opt runtime 1.299s, model runtime 5.933s, pg runtime 5.855s, speedup 0.987x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
12, opt runtime 0.517s, model runtime 0.517s, pg runtime 0.738s, speedup 1.427x
13, opt runtime 2.413s, model runtime 3.108s, pg runtime 57.198s, speedup 18.401x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.484s, pg runtime 0.453s, speedup 0.936x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.064s, pg runtime 0.089s, speedup 1.393x
21, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
22, opt runtime 0.093s, model runtime 0.322s, pg runtime 2.389s, speedup 7.421x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.218s, pg runtime 0.158s, speedup 0.728x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 5.959s, pg runtime 6.444s, speedup 1.081x
33, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 3.332s, pg runtime 21.298s, speedup 6.391x
14, opt runtime 3.258s, model runtime 3.258s, pg runtime 18.141s, speedup 5.568x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.457s, pg runtime 1.438s, speedup 0.987x
20, opt runtime 1.428s, model runtime 1.528s, pg runtime 1.428s, speedup 0.934x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 2.529s, pg runtime 1.752s, speedup 0.693x
26, opt runtime 1.423s, model runtime 2.393s, pg runtime 1.423s, speedup 0.594x
27, opt runtime 6.789s, model runtime 7.122s, pg runtime 7.799s, speedup 1.095x
28, opt runtime 7.199s, model runtime 7.919s, pg runtime 7.619s, speedup 0.962x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 47.053s, pg runtime 75.984s, speedup 1.615x
34, opt runtime 39.191s, model runtime 47.053s, pg runtime 75.984s, speedup 1.615x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.280s, model runtime 18.051s, pg runtime 634.990s, speedup 35.177x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
14, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.308s, model runtime 1.377s, pg runtime 1.528s, speedup 1.110x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 2.260s, pg runtime 1.433s, speedup 0.634x
26, opt runtime 1.420s, model runtime 2.491s, pg runtime 1.420s, speedup 0.570x
27, opt runtime 7.419s, model runtime 7.419s, pg runtime 7.675s, speedup 1.035x
28, opt runtime 7.312s, model runtime 7.312s, pg runtime 7.655s, speedup 1.047x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 51.586s, pg runtime 78.181s, speedup 1.516x
34, opt runtime 41.237s, model runtime 51.586s, pg runtime 78.181s, speedup 1.516x
35, opt runtime 16.301s, model runtime 16.301s, pg runtime 646.719s, speedup 39.673x
36, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 44, train speedup 5.163, test speedup 1.329, val speedup 5.266
TPCH best validation speedup epoch: 44, train speedup 5.163, test speedup 4.291, val speedup 5.266
TPCH Skew best validation speedup epoch: 44, train speedup 5.163, test speedup 3.964, val speedup 5.266
execution cost 0:02:37.010604
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.147874, and there are 9604 training samples
in channel 9
JOB test speedup 0.6316320939600328
TPCH test speedup 2.825356230297737
TPCH skew test speedup 2.5572325182245006
Epoch 0/300 |loss: 0.037331| train set 2.542x speedup, test set 2.557x speedup, val set 2.424x speedup, step: 1
JOB test speedup 0.841527964906055
TPCH test speedup 2.9649249839407066
TPCH skew test speedup 2.7468799114622504
Epoch 1/300 |loss: 0.016884| train set 2.629x speedup, test set 2.747x speedup, val set 2.764x speedup, step: 2
JOB test speedup 1.545354485518611
TPCH test speedup 3.1231157393898346
TPCH skew test speedup 2.9396720987635394
Epoch 2/300 |loss: 0.010821| train set 2.855x speedup, test set 2.940x speedup, val set 3.113x speedup, step: 3
JOB test speedup 1.5828697957718656
TPCH test speedup 3.3413329323248178
TPCH skew test speedup 3.1037996085285773
Epoch 3/300 |loss: 0.008664| train set 2.636x speedup, test set 3.104x speedup, val set 2.728x speedup, step: 4
JOB test speedup 1.6958732873059263
TPCH test speedup 4.109129619584411
TPCH skew test speedup 3.6280239310934568
Epoch 4/300 |loss: 0.007276| train set 3.216x speedup, test set 3.628x speedup, val set 3.599x speedup, step: 1
JOB test speedup 1.5741287248829852
TPCH test speedup 4.082351688870196
TPCH skew test speedup 3.603469278515119
Epoch 5/300 |loss: 0.006378| train set 3.529x speedup, test set 3.603x speedup, val set 4.703x speedup, step: 2
JOB test speedup 1.841713822021512
TPCH test speedup 3.822708224688175
TPCH skew test speedup 3.5492663080801004
Epoch 6/300 |loss: 0.006047| train set 3.747x speedup, test set 3.549x speedup, val set 4.508x speedup, step: 3
JOB test speedup 1.882602589584479
TPCH test speedup 4.146880008268285
TPCH skew test speedup 3.923932651982701
Epoch 7/300 |loss: 0.005281| train set 4.323x speedup, test set 3.924x speedup, val set 4.867x speedup, step: 4
JOB test speedup 2.1191488174717077
TPCH test speedup 4.31317161129286
TPCH skew test speedup 4.038519964986899
Epoch 8/300 |loss: 0.007709| train set 4.468x speedup, test set 4.039x speedup, val set 5.097x speedup, step: 5
JOB test speedup 1.1497405275425183
TPCH test speedup 4.152600377196873
TPCH skew test speedup 3.9070671150373357
Epoch 9/300 |loss: 0.005002| train set 4.295x speedup, test set 3.907x speedup, val set 4.431x speedup, step: 1
JOB test speedup 1.1725310346261095
TPCH test speedup 4.143953613438191
TPCH skew test speedup 3.9119091957779624
Epoch 10/300 |loss: 0.004521| train set 4.371x speedup, test set 3.912x speedup, val set 4.956x speedup, step: 2
JOB test speedup 1.1959071790148479
TPCH test speedup 4.439622772905887
TPCH skew test speedup 4.140372703231755
Epoch 11/300 |loss: 0.003551| train set 4.076x speedup, test set 4.140x speedup, val set 4.574x speedup, step: 3
JOB test speedup 0.7429149677636288
TPCH test speedup 4.330724647453065
TPCH skew test speedup 3.7571846777697995
Epoch 12/300 |loss: 0.003450| train set 4.854x speedup, test set 3.757x speedup, val set 5.122x speedup, step: 4
JOB test speedup 2.0233915363153048
TPCH test speedup 3.999813694174035
TPCH skew test speedup 3.7790091156402315
Epoch 13/300 |loss: 0.003097| train set 4.744x speedup, test set 3.779x speedup, val set 5.090x speedup, step: 5
JOB test speedup 0.7379938856873074
TPCH test speedup 3.829450287688555
TPCH skew test speedup 3.788470932028453
Epoch 14/300 |loss: 0.003724| train set 5.037x speedup, test set 3.788x speedup, val set 5.306x speedup, step: 1
JOB test speedup 0.9325028777865093
TPCH test speedup 4.020633500638836
TPCH skew test speedup 3.9415526007055885
Epoch 15/300 |loss: 0.002490| train set 5.073x speedup, test set 3.942x speedup, val set 5.167x speedup, step: 2
JOB test speedup 0.9167431728832531
TPCH test speedup 3.9594958657704926
TPCH skew test speedup 3.87605857661787
Epoch 16/300 |loss: 0.002406| train set 4.730x speedup, test set 3.876x speedup, val set 5.166x speedup, step: 3
JOB test speedup 0.9452995021746334
TPCH test speedup 4.00572063307865
TPCH skew test speedup 4.022641500090315
Epoch 17/300 |loss: 0.002582| train set 5.017x speedup, test set 4.023x speedup, val set 5.262x speedup, step: 4
JOB test speedup 0.9103428284937938
TPCH test speedup 3.9402699149776885
TPCH skew test speedup 3.867317873579068
Epoch 18/300 |loss: 0.001986| train set 4.956x speedup, test set 3.867x speedup, val set 4.888x speedup, step: 5
JOB test speedup 0.9438467333926486
TPCH test speedup 3.9590685963145216
TPCH skew test speedup 3.91668744621263
Epoch 19/300 |loss: 0.001978| train set 5.054x speedup, test set 3.917x speedup, val set 5.104x speedup, step: 6
JOB test speedup 0.9178396181938889
TPCH test speedup 3.9503295606975453
TPCH skew test speedup 3.8996489457427934
Epoch 20/300 |loss: 0.001983| train set 5.108x speedup, test set 3.900x speedup, val set 4.992x speedup, step: 7
JOB test speedup 0.6882164731073179
TPCH test speedup 3.4776077539002372
TPCH skew test speedup 3.440739723382748
Epoch 21/300 |loss: 0.002469| train set 3.112x speedup, test set 3.441x speedup, val set 3.404x speedup, step: 8
JOB test speedup 0.952385195948442
TPCH test speedup 4.027589180478621
TPCH skew test speedup 3.968598648288479
Epoch 22/300 |loss: 0.002509| train set 5.073x speedup, test set 3.969x speedup, val set 5.221x speedup, step: 9
JOB test speedup 0.9569908831493444
TPCH test speedup 4.096728380690695
TPCH skew test speedup 4.026701806798428
Epoch 23/300 |loss: 0.001767| train set 5.060x speedup, test set 4.027x speedup, val set 5.222x speedup, step: 10
JOB test speedup 0.9439710423951916
TPCH test speedup 4.05555879194822
TPCH skew test speedup 4.0077484141244595
Epoch 24/300 |loss: 0.002382| train set 5.142x speedup, test set 4.008x speedup, val set 5.215x speedup, step: 11
JOB test speedup 0.9531073274095606
TPCH test speedup 4.112027737618288
TPCH skew test speedup 4.009252177027588
Epoch 25/300 |loss: 0.001875| train set 5.160x speedup, test set 4.009x speedup, val set 5.184x speedup, step: 12
JOB test speedup 1.3051769164250047
TPCH test speedup 3.472612909313238
TPCH skew test speedup 3.4392630524743057
Epoch 26/300 |loss: 0.001622| train set 5.072x speedup, test set 3.439x speedup, val set 4.083x speedup, step: 13
JOB test speedup 1.2972213589479653
TPCH test speedup 4.181237006317382
TPCH skew test speedup 4.029073104309583
Epoch 27/300 |loss: 0.001638| train set 5.111x speedup, test set 4.029x speedup, val set 5.196x speedup, step: 14
JOB test speedup 1.3198264576346612
TPCH test speedup 4.11496385034946
TPCH skew test speedup 4.059740197289405
Epoch 28/300 |loss: 0.001512| train set 5.145x speedup, test set 4.060x speedup, val set 5.289x speedup, step: 15
JOB test speedup 1.2676251983355364
TPCH test speedup 3.4872407795729528
TPCH skew test speedup 3.423572831989183
Epoch 29/300 |loss: 0.001499| train set 5.105x speedup, test set 3.424x speedup, val set 5.224x speedup, step: 16
JOB test speedup 0.9461856919655858
TPCH test speedup 4.237155897386635
TPCH skew test speedup 4.012901985685738
Epoch 30/300 |loss: 0.001889| train set 5.138x speedup, test set 4.013x speedup, val set 5.232x speedup, step: 17
JOB test speedup 1.3118773620561504
TPCH test speedup 4.1449790934638635
TPCH skew test speedup 3.958707845494255
Epoch 31/300 |loss: 0.001443| train set 5.055x speedup, test set 3.959x speedup, val set 5.144x speedup, step: 18
JOB test speedup 1.3399073766981238
TPCH test speedup 4.060355791307073
TPCH skew test speedup 4.022151944768596
Epoch 32/300 |loss: 0.001486| train set 5.031x speedup, test set 4.022x speedup, val set 4.092x speedup, step: 19
JOB test speedup 1.2841937591798867
TPCH test speedup 4.249614062886603
TPCH skew test speedup 4.006548073000251
Epoch 33/300 |loss: 0.001651| train set 5.186x speedup, test set 4.007x speedup, val set 5.217x speedup, step: 20
JOB test speedup 1.333354509449702
TPCH test speedup 4.189712935530155
TPCH skew test speedup 3.962034486203722
Epoch 34/300 |loss: 0.001454| train set 5.060x speedup, test set 3.962x speedup, val set 5.141x speedup, step: 21
JOB test speedup 1.3339286524409137
TPCH test speedup 4.329293499042807
TPCH skew test speedup 4.024171712736349
Epoch 35/300 |loss: 0.001375| train set 5.143x speedup, test set 4.024x speedup, val set 5.196x speedup, step: 22
JOB test speedup 0.9671571069571531
TPCH test speedup 4.21576812832893
TPCH skew test speedup 4.026010615827307
Epoch 36/300 |loss: 0.001366| train set 5.163x speedup, test set 4.026x speedup, val set 5.156x speedup, step: 23
JOB test speedup 1.3547883021361606
TPCH test speedup 4.067152227063608
TPCH skew test speedup 4.021087326036297
Epoch 37/300 |loss: 0.001497| train set 5.123x speedup, test set 4.021x speedup, val set 5.147x speedup, step: 24
JOB test speedup 1.311528008240277
TPCH test speedup 4.077587590785751
TPCH skew test speedup 4.025804380417564
Epoch 38/300 |loss: 0.001426| train set 5.142x speedup, test set 4.026x speedup, val set 5.236x speedup, step: 25
JOB test speedup 1.3133799083083915
TPCH test speedup 3.946226827769018
TPCH skew test speedup 3.949916517470114
Epoch 39/300 |loss: 0.001262| train set 5.122x speedup, test set 3.950x speedup, val set 5.197x speedup, step: 26
JOB test speedup 1.3883444077331726
TPCH test speedup 3.9205430813893467
TPCH skew test speedup 3.9059778724136076
Epoch 40/300 |loss: 0.001044| train set 5.134x speedup, test set 3.906x speedup, val set 5.176x speedup, step: 27
JOB test speedup 1.2114092210127465
TPCH test speedup 4.183785731331177
TPCH skew test speedup 3.9780290713131987
Epoch 41/300 |loss: 0.000971| train set 5.011x speedup, test set 3.978x speedup, val set 5.110x speedup, step: 28
JOB test speedup 1.369660806653155
TPCH test speedup 4.072378080665632
TPCH skew test speedup 4.0071399559422085
Epoch 42/300 |loss: 0.001130| train set 4.972x speedup, test set 4.007x speedup, val set 5.195x speedup, step: 29
JOB test speedup 1.332267931599328
TPCH test speedup 3.958791032884821
TPCH skew test speedup 3.919508511920861
Epoch 43/300 |loss: 0.001422| train set 5.097x speedup, test set 3.920x speedup, val set 4.986x speedup, step: 30
JOB test speedup 1.3329365070284585
TPCH test speedup 4.021197969354436
TPCH skew test speedup 3.940436931902593
Epoch 44/300 |loss: 0.001376| train set 5.164x speedup, test set 3.940x speedup, val set 5.197x speedup, step: 31
early stopping at epoch 44
Training per epoch cost 2.376 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.556s, pg runtime 0.207s, speedup 0.372x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.883s, pg runtime 0.802s, speedup 0.908x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
14, opt runtime 0.113s, model runtime 0.198s, pg runtime 0.153s, speedup 0.772x
15, opt runtime 2.238s, model runtime 2.885s, pg runtime 2.718s, speedup 0.942x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.349s, pg runtime 0.354s, speedup 1.012x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.077s, pg runtime 0.089s, speedup 1.158x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.793s, pg runtime 0.161s, speedup 0.203x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 2.923s, pg runtime 5.521s, speedup 1.889x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
16, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.438s, pg runtime 1.438s, speedup 1.000x
20, opt runtime 1.428s, model runtime 1.428s, pg runtime 1.428s, speedup 1.000x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 9.462s, pg runtime 7.799s, speedup 0.824x
28, opt runtime 7.199s, model runtime 9.907s, pg runtime 7.619s, speedup 0.769x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 55.171s, pg runtime 626.529s, speedup 11.356x
32, opt runtime 24.662s, model runtime 53.254s, pg runtime 613.999s, speedup 11.530x
33, opt runtime 39.191s, model runtime 43.993s, pg runtime 75.984s, speedup 1.727x
34, opt runtime 39.191s, model runtime 43.993s, pg runtime 75.984s, speedup 1.727x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.308s, model runtime 1.528s, pg runtime 1.528s, speedup 1.000x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 9.598s, pg runtime 7.675s, speedup 0.800x
28, opt runtime 7.312s, model runtime 9.807s, pg runtime 7.655s, speedup 0.781x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 49.500s, pg runtime 644.779s, speedup 13.026x
32, opt runtime 25.478s, model runtime 56.775s, pg runtime 642.079s, speedup 11.309x
33, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 14, train speedup 5.037, test speedup 0.738, val speedup 5.306
TPCH best validation speedup epoch: 14, train speedup 5.037, test speedup 3.829, val speedup 5.306
TPCH Skew best validation speedup epoch: 14, train speedup 5.037, test speedup 3.788, val speedup 5.306
execution cost 0:02:37.262775
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.157347, and there are 9604 training samples
in channel 9
JOB test speedup 0.6316320939600328
TPCH test speedup 2.825356230297737
TPCH skew test speedup 2.5572325182245006
Epoch 0/300 |loss: 0.037331| train set 2.542x speedup, test set 2.557x speedup, val set 2.424x speedup, step: 1
JOB test speedup 0.841527964906055
TPCH test speedup 2.9649249839407066
TPCH skew test speedup 2.7468799114622504
Epoch 1/300 |loss: 0.016884| train set 2.629x speedup, test set 2.747x speedup, val set 2.764x speedup, step: 2
JOB test speedup 1.545354485518611
TPCH test speedup 3.1231157393898346
TPCH skew test speedup 2.9396720987635394
Epoch 2/300 |loss: 0.010821| train set 2.855x speedup, test set 2.940x speedup, val set 3.113x speedup, step: 3
JOB test speedup 1.5828697957718656
TPCH test speedup 3.3479101260006567
TPCH skew test speedup 3.1082824816602175
Epoch 3/300 |loss: 0.008668| train set 2.638x speedup, test set 3.108x speedup, val set 2.874x speedup, step: 4
JOB test speedup 1.6520808753210765
TPCH test speedup 3.9443367619072944
TPCH skew test speedup 3.6280239310934568
Epoch 4/300 |loss: 0.007423| train set 3.218x speedup, test set 3.628x speedup, val set 3.467x speedup, step: 1
JOB test speedup 1.575824110977304
TPCH test speedup 3.95832097270724
TPCH skew test speedup 3.5207822280033962
Epoch 5/300 |loss: 0.006436| train set 3.286x speedup, test set 3.521x speedup, val set 3.402x speedup, step: 2
JOB test speedup 1.876424399699063
TPCH test speedup 3.9169015429100535
TPCH skew test speedup 3.549606999452083
Epoch 6/300 |loss: 0.006000| train set 3.184x speedup, test set 3.550x speedup, val set 3.400x speedup, step: 3
JOB test speedup 1.8349338705978182
TPCH test speedup 4.110920545414584
TPCH skew test speedup 3.6399747932923723
Epoch 7/300 |loss: 0.005224| train set 4.653x speedup, test set 3.640x speedup, val set 4.914x speedup, step: 4
JOB test speedup 1.9458010820642413
TPCH test speedup 4.070072296692755
TPCH skew test speedup 3.4600330583026557
Epoch 8/300 |loss: 0.007765| train set 4.405x speedup, test set 3.460x speedup, val set 4.560x speedup, step: 5
JOB test speedup 1.1803436782787196
TPCH test speedup 4.116351643240473
TPCH skew test speedup 3.922577714681261
Epoch 9/300 |loss: 0.004894| train set 4.082x speedup, test set 3.923x speedup, val set 4.414x speedup, step: 1
JOB test speedup 1.1488102891061642
TPCH test speedup 3.8756610044076356
TPCH skew test speedup 3.715213723260838
Epoch 10/300 |loss: 0.004485| train set 4.157x speedup, test set 3.715x speedup, val set 4.846x speedup, step: 2
JOB test speedup 1.2027662296710262
TPCH test speedup 3.708314349131045
TPCH skew test speedup 3.4201662885692046
Epoch 11/300 |loss: 0.003596| train set 4.086x speedup, test set 3.420x speedup, val set 4.270x speedup, step: 3
JOB test speedup 1.2736762014030838
TPCH test speedup 4.043677377850824
TPCH skew test speedup 3.778779689665644
Epoch 12/300 |loss: 0.003335| train set 4.738x speedup, test set 3.779x speedup, val set 5.257x speedup, step: 4
JOB test speedup 2.084978692040148
TPCH test speedup 4.059733674859205
TPCH skew test speedup 4.018744831203288
Epoch 13/300 |loss: 0.003240| train set 5.057x speedup, test set 4.019x speedup, val set 5.247x speedup, step: 5
JOB test speedup 1.2478728659847285
TPCH test speedup 4.032771353213478
TPCH skew test speedup 3.722599269369355
Epoch 14/300 |loss: 0.003748| train set 4.952x speedup, test set 3.723x speedup, val set 5.207x speedup, step: 1
JOB test speedup 0.7390530477023277
TPCH test speedup 4.094859678688423
TPCH skew test speedup 3.7985855007560407
Epoch 15/300 |loss: 0.002423| train set 5.166x speedup, test set 3.799x speedup, val set 5.112x speedup, step: 2
JOB test speedup 0.8973598984865309
TPCH test speedup 4.043717435076522
TPCH skew test speedup 3.9763252676851892
Epoch 16/300 |loss: 0.002300| train set 4.726x speedup, test set 3.976x speedup, val set 5.174x speedup, step: 3
JOB test speedup 0.9472995008443325
TPCH test speedup 4.047475028759949
TPCH skew test speedup 3.9886940665751074
Epoch 17/300 |loss: 0.002660| train set 5.064x speedup, test set 3.989x speedup, val set 5.196x speedup, step: 4
JOB test speedup 0.9345263190107054
TPCH test speedup 3.975446993337407
TPCH skew test speedup 3.9195906179399325
Epoch 18/300 |loss: 0.002038| train set 5.045x speedup, test set 3.920x speedup, val set 5.127x speedup, step: 5
JOB test speedup 0.938545398011423
TPCH test speedup 3.93793508071429
TPCH skew test speedup 3.86903781388784
Epoch 19/300 |loss: 0.001961| train set 5.177x speedup, test set 3.869x speedup, val set 4.839x speedup, step: 6
JOB test speedup 0.9490477806105652
TPCH test speedup 3.962779170712501
TPCH skew test speedup 3.923314625264691
Epoch 20/300 |loss: 0.001936| train set 5.019x speedup, test set 3.923x speedup, val set 5.066x speedup, step: 7
JOB test speedup 0.6814968904928147
TPCH test speedup 3.481094770408589
TPCH skew test speedup 3.4347055139664033
Epoch 21/300 |loss: 0.002425| train set 3.089x speedup, test set 3.435x speedup, val set 3.185x speedup, step: 8
JOB test speedup 1.2869967865549703
TPCH test speedup 4.048736560769896
TPCH skew test speedup 3.9680878133862616
Epoch 22/300 |loss: 0.002568| train set 5.055x speedup, test set 3.968x speedup, val set 3.733x speedup, step: 9
JOB test speedup 1.2908097562078442
TPCH test speedup 4.083300634026655
TPCH skew test speedup 4.03042656415286
Epoch 23/300 |loss: 0.001806| train set 5.182x speedup, test set 4.030x speedup, val set 5.195x speedup, step: 10
JOB test speedup 0.9663541351581427
TPCH test speedup 4.082020804015392
TPCH skew test speedup 4.025517256484449
Epoch 24/300 |loss: 0.002055| train set 5.171x speedup, test set 4.026x speedup, val set 5.222x speedup, step: 1
JOB test speedup 1.3012999205443023
TPCH test speedup 4.084010397148822
TPCH skew test speedup 4.032333153911726
Epoch 25/300 |loss: 0.001783| train set 5.116x speedup, test set 4.032x speedup, val set 5.205x speedup, step: 2
JOB test speedup 0.9853810389535105
TPCH test speedup 4.044727341755199
TPCH skew test speedup 4.001901148772591
Epoch 26/300 |loss: 0.001617| train set 5.150x speedup, test set 4.002x speedup, val set 5.189x speedup, step: 3
JOB test speedup 1.3062390363515963
TPCH test speedup 4.085716782064524
TPCH skew test speedup 4.031798728370671
Epoch 27/300 |loss: 0.001628| train set 5.163x speedup, test set 4.032x speedup, val set 5.235x speedup, step: 4
JOB test speedup 1.3673386395666647
TPCH test speedup 4.0614248311474155
TPCH skew test speedup 4.0228324272143645
Epoch 28/300 |loss: 0.001674| train set 5.160x speedup, test set 4.023x speedup, val set 5.264x speedup, step: 5
JOB test speedup 0.9930553853538506
TPCH test speedup 4.009392232199934
TPCH skew test speedup 3.931453547054433
Epoch 29/300 |loss: 0.001731| train set 5.127x speedup, test set 3.931x speedup, val set 4.932x speedup, step: 6
JOB test speedup 1.3740459254400526
TPCH test speedup 4.1079798638107325
TPCH skew test speedup 4.047968495632454
Epoch 30/300 |loss: 0.001951| train set 5.052x speedup, test set 4.048x speedup, val set 5.274x speedup, step: 7
JOB test speedup 1.3080782200295704
TPCH test speedup 4.055550339064682
TPCH skew test speedup 4.017343931036757
Epoch 31/300 |loss: 0.001492| train set 5.038x speedup, test set 4.017x speedup, val set 5.089x speedup, step: 8
JOB test speedup 1.3416248053822761
TPCH test speedup 3.4444613324266604
TPCH skew test speedup 3.381086589509524
Epoch 32/300 |loss: 0.001513| train set 3.623x speedup, test set 3.381x speedup, val set 3.180x speedup, step: 9
JOB test speedup 1.3479508229018484
TPCH test speedup 4.337356927862982
TPCH skew test speedup 4.024690545998042
Epoch 33/300 |loss: 0.001911| train set 5.126x speedup, test set 4.025x speedup, val set 5.173x speedup, step: 10
JOB test speedup 1.346832929659453
TPCH test speedup 4.066231418535819
TPCH skew test speedup 4.0280832549705
Epoch 34/300 |loss: 0.001596| train set 5.068x speedup, test set 4.028x speedup, val set 5.206x speedup, step: 11
JOB test speedup 1.3221184864885864
TPCH test speedup 4.054791317690125
TPCH skew test speedup 4.0192338354316295
Epoch 35/300 |loss: 0.001322| train set 5.146x speedup, test set 4.019x speedup, val set 5.180x speedup, step: 12
JOB test speedup 1.3466797666821884
TPCH test speedup 4.045444918241741
TPCH skew test speedup 3.9641630204484124
Epoch 36/300 |loss: 0.001250| train set 5.149x speedup, test set 3.964x speedup, val set 5.156x speedup, step: 13
JOB test speedup 1.316847373715104
TPCH test speedup 4.0795549034812755
TPCH skew test speedup 4.019218876985757
Epoch 37/300 |loss: 0.001394| train set 5.109x speedup, test set 4.019x speedup, val set 5.201x speedup, step: 14
JOB test speedup 1.335534842649984
TPCH test speedup 4.073950572643246
TPCH skew test speedup 4.015877869612913
Epoch 38/300 |loss: 0.001409| train set 5.147x speedup, test set 4.016x speedup, val set 5.245x speedup, step: 15
JOB test speedup 1.3266713353459108
TPCH test speedup 4.07792294123086
TPCH skew test speedup 4.016687930980823
Epoch 39/300 |loss: 0.001148| train set 5.123x speedup, test set 4.017x speedup, val set 5.232x speedup, step: 1
JOB test speedup 1.3285357802098676
TPCH test speedup 4.091329059614006
TPCH skew test speedup 4.026053038820153
Epoch 40/300 |loss: 0.001029| train set 5.143x speedup, test set 4.026x speedup, val set 5.213x speedup, step: 2
JOB test speedup 1.3044151937428412
TPCH test speedup 4.033043962612286
TPCH skew test speedup 3.9496339706650216
Epoch 41/300 |loss: 0.001018| train set 5.099x speedup, test set 3.950x speedup, val set 5.214x speedup, step: 3
JOB test speedup 1.3117962718320963
TPCH test speedup 4.098703456805729
TPCH skew test speedup 4.0345936054318585
Epoch 42/300 |loss: 0.001162| train set 5.159x speedup, test set 4.035x speedup, val set 5.194x speedup, step: 4
JOB test speedup 1.3654277519513254
TPCH test speedup 4.045567858017585
TPCH skew test speedup 3.950235946202971
Epoch 43/300 |loss: 0.001248| train set 5.090x speedup, test set 3.950x speedup, val set 5.118x speedup, step: 5
JOB test speedup 1.3368721479565628
TPCH test speedup 4.337356927862982
TPCH skew test speedup 4.024690545998042
Epoch 44/300 |loss: 0.001348| train set 5.186x speedup, test set 4.025x speedup, val set 5.228x speedup, step: 6
JOB test speedup 1.2943719001883625
TPCH test speedup 4.095385403619809
TPCH skew test speedup 4.031650218922525
Epoch 45/300 |loss: 0.001177| train set 5.181x speedup, test set 4.032x speedup, val set 5.237x speedup, step: 7
JOB test speedup 1.3122453089195687
TPCH test speedup 4.059123564617954
TPCH skew test speedup 3.975637373738348
Epoch 46/300 |loss: 0.000999| train set 5.184x speedup, test set 3.976x speedup, val set 5.198x speedup, step: 8
JOB test speedup 1.309032565745101
TPCH test speedup 3.8998421068304365
TPCH skew test speedup 3.902922791820802
Epoch 47/300 |loss: 0.001398| train set 5.153x speedup, test set 3.903x speedup, val set 5.317x speedup, step: 9
JOB test speedup 1.1767115467758988
TPCH test speedup 3.696376634169031
TPCH skew test speedup 3.7406362606242
Epoch 48/300 |loss: 0.001622| train set 4.394x speedup, test set 3.741x speedup, val set 4.754x speedup, step: 10
early stopping at epoch 48
Training per epoch cost 2.382 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.084s, pg runtime 0.081s, speedup 0.961x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.556s, pg runtime 0.207s, speedup 0.372x
04, opt runtime 0.920s, model runtime 2.104s, pg runtime 1.680s, speedup 0.798x
05, opt runtime 2.262s, model runtime 2.262s, pg runtime 3.549s, speedup 1.569x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 2.238s, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.087s, pg runtime 0.089s, speedup 1.024x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.322s, pg runtime 2.389s, speedup 7.421x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.218s, pg runtime 0.158s, speedup 0.728x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 2.923s, pg runtime 5.521s, speedup 1.889x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 3.332s, pg runtime 21.298s, speedup 6.391x
14, opt runtime 3.258s, model runtime 3.258s, pg runtime 18.141s, speedup 5.568x
15, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
16, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.457s, pg runtime 1.438s, speedup 0.987x
20, opt runtime 1.428s, model runtime 1.528s, pg runtime 1.428s, speedup 0.934x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 2.529s, pg runtime 1.752s, speedup 0.693x
26, opt runtime 1.423s, model runtime 2.393s, pg runtime 1.423s, speedup 0.594x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.004s, pg runtime 17.818s, speedup 5.932x
14, opt runtime 3.244s, model runtime 3.364s, pg runtime 17.707s, speedup 5.263x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.308s, model runtime 1.377s, pg runtime 1.528s, speedup 1.110x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 2.260s, pg runtime 1.433s, speedup 0.634x
26, opt runtime 1.420s, model runtime 2.491s, pg runtime 1.420s, speedup 0.570x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 39, train speedup 5.123, test speedup 1.327, val speedup 5.232
TPCH best validation speedup epoch: 39, train speedup 5.123, test speedup 4.078, val speedup 5.232
TPCH Skew best validation speedup epoch: 39, train speedup 5.123, test speedup 4.017, val speedup 5.232
execution cost 0:02:50.350965
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.198080, and there are 9604 training samples
in channel 9
JOB test speedup 0.6316320939600328
TPCH test speedup 2.825356230297737
TPCH skew test speedup 2.5572325182245006
Epoch 0/300 |loss: 0.037331| train set 2.542x speedup, test set 2.557x speedup, val set 2.424x speedup, step: 1
JOB test speedup 0.841527964906055
TPCH test speedup 2.9649249839407066
TPCH skew test speedup 2.7468799114622504
Epoch 1/300 |loss: 0.016884| train set 2.629x speedup, test set 2.747x speedup, val set 2.824x speedup, step: 2
JOB test speedup 1.545354485518611
TPCH test speedup 3.1422398370961866
TPCH skew test speedup 2.946361853699809
Epoch 2/300 |loss: 0.010918| train set 2.994x speedup, test set 2.946x speedup, val set 3.113x speedup, step: 3
JOB test speedup 1.6058508769444813
TPCH test speedup 3.42060187547333
TPCH skew test speedup 3.17058844518557
Epoch 3/300 |loss: 0.008630| train set 2.816x speedup, test set 3.171x speedup, val set 2.915x speedup, step: 4
JOB test speedup 1.6624906201460008
TPCH test speedup 3.4800964979902553
TPCH skew test speedup 3.218041199325882
Epoch 4/300 |loss: 0.007497| train set 2.857x speedup, test set 3.218x speedup, val set 3.015x speedup, step: 1
JOB test speedup 1.5622320758269264
TPCH test speedup 4.0828712083893715
TPCH skew test speedup 3.602331536983551
Epoch 5/300 |loss: 0.006492| train set 3.334x speedup, test set 3.602x speedup, val set 4.010x speedup, step: 2
JOB test speedup 1.8068740946846018
TPCH test speedup 3.8241422720792047
TPCH skew test speedup 3.760176890880883
Epoch 6/300 |loss: 0.005996| train set 3.181x speedup, test set 3.760x speedup, val set 3.392x speedup, step: 3
JOB test speedup 1.7939528696513605
TPCH test speedup 4.153254061863766
TPCH skew test speedup 3.929666106863561
Epoch 7/300 |loss: 0.005293| train set 4.652x speedup, test set 3.930x speedup, val set 4.867x speedup, step: 4
JOB test speedup 1.8995672055588664
TPCH test speedup 4.084325974917458
TPCH skew test speedup 3.469310590039965
Epoch 8/300 |loss: 0.007411| train set 4.331x speedup, test set 3.469x speedup, val set 4.558x speedup, step: 5
JOB test speedup 1.1283231819242754
TPCH test speedup 4.314187469561801
TPCH skew test speedup 4.017695642647305
Epoch 9/300 |loss: 0.005105| train set 4.097x speedup, test set 4.018x speedup, val set 4.993x speedup, step: 1
JOB test speedup 1.1046614957733596
TPCH test speedup 3.9426426433700157
TPCH skew test speedup 3.9856655238937835
Epoch 10/300 |loss: 0.004653| train set 3.765x speedup, test set 3.986x speedup, val set 4.915x speedup, step: 2
JOB test speedup 0.9167623569855361
TPCH test speedup 3.741697977167031
TPCH skew test speedup 3.621753770666562
Epoch 11/300 |loss: 0.003578| train set 4.141x speedup, test set 3.622x speedup, val set 4.401x speedup, step: 3
JOB test speedup 1.165775271736336
TPCH test speedup 4.053012701675765
TPCH skew test speedup 3.9737389578932554
Epoch 12/300 |loss: 0.003415| train set 4.785x speedup, test set 3.974x speedup, val set 5.185x speedup, step: 4
JOB test speedup 1.8941946355325987
TPCH test speedup 4.04579758820037
TPCH skew test speedup 4.032367498196876
Epoch 13/300 |loss: 0.003240| train set 4.484x speedup, test set 4.032x speedup, val set 4.628x speedup, step: 5
JOB test speedup 1.2051843616889588
TPCH test speedup 4.063991672733578
TPCH skew test speedup 4.012338223713759
Epoch 14/300 |loss: 0.004021| train set 3.831x speedup, test set 4.012x speedup, val set 4.043x speedup, step: 6
JOB test speedup 0.7248924202001378
TPCH test speedup 3.971835302129268
TPCH skew test speedup 3.897529034997583
Epoch 15/300 |loss: 0.002557| train set 5.142x speedup, test set 3.898x speedup, val set 5.239x speedup, step: 7
JOB test speedup 0.9342023932741133
TPCH test speedup 4.071738077239624
TPCH skew test speedup 4.006078222034092
Epoch 16/300 |loss: 0.002346| train set 4.726x speedup, test set 4.006x speedup, val set 4.915x speedup, step: 8
JOB test speedup 1.8977931018893759
TPCH test speedup 3.99955971063832
TPCH skew test speedup 3.9387483660249147
Epoch 17/300 |loss: 0.002588| train set 5.004x speedup, test set 3.939x speedup, val set 5.065x speedup, step: 9
JOB test speedup 0.9311808478957314
TPCH test speedup 3.97550469292519
TPCH skew test speedup 3.9123993763283207
Epoch 18/300 |loss: 0.002099| train set 4.997x speedup, test set 3.912x speedup, val set 5.047x speedup, step: 10
JOB test speedup 0.948454945724643
TPCH test speedup 4.03763572247579
TPCH skew test speedup 4.01953108951795
Epoch 19/300 |loss: 0.002048| train set 5.129x speedup, test set 4.020x speedup, val set 5.057x speedup, step: 1
JOB test speedup 0.9215815963796884
TPCH test speedup 3.7513986859614077
TPCH skew test speedup 3.7236880865528166
Epoch 20/300 |loss: 0.002014| train set 4.996x speedup, test set 3.724x speedup, val set 4.998x speedup, step: 2
JOB test speedup 0.6652568970270555
TPCH test speedup 3.4611563314760234
TPCH skew test speedup 3.417526267894678
Epoch 21/300 |loss: 0.002396| train set 2.942x speedup, test set 3.418x speedup, val set 3.156x speedup, step: 3
JOB test speedup 1.258299478443668
TPCH test speedup 3.9380412297433356
TPCH skew test speedup 3.8496724303694005
Epoch 22/300 |loss: 0.002718| train set 5.156x speedup, test set 3.850x speedup, val set 3.689x speedup, step: 4
JOB test speedup 0.9396835184140744
TPCH test speedup 4.059250209010765
TPCH skew test speedup 3.9868562384519266
Epoch 23/300 |loss: 0.001812| train set 5.048x speedup, test set 3.987x speedup, val set 5.219x speedup, step: 5
JOB test speedup 0.9642139857508046
TPCH test speedup 4.081692461057071
TPCH skew test speedup 4.025771877845625
Epoch 24/300 |loss: 0.002247| train set 5.074x speedup, test set 4.026x speedup, val set 3.768x speedup, step: 6
JOB test speedup 0.9236770777533821
TPCH test speedup 4.084936904224629
TPCH skew test speedup 4.032974858896769
Epoch 25/300 |loss: 0.001792| train set 5.168x speedup, test set 4.033x speedup, val set 5.194x speedup, step: 7
JOB test speedup 0.9540124773822709
TPCH test speedup 4.070893773666281
TPCH skew test speedup 3.98408650671227
Epoch 26/300 |loss: 0.001640| train set 5.152x speedup, test set 3.984x speedup, val set 5.212x speedup, step: 8
JOB test speedup 0.947487648191338
TPCH test speedup 3.971721822904005
TPCH skew test speedup 3.8952237457115286
Epoch 27/300 |loss: 0.001589| train set 5.146x speedup, test set 3.895x speedup, val set 4.973x speedup, step: 9
JOB test speedup 1.173463020185312
TPCH test speedup 4.09896285541668
TPCH skew test speedup 4.049305702992986
Epoch 28/300 |loss: 0.001659| train set 5.111x speedup, test set 4.049x speedup, val set 3.810x speedup, step: 10
JOB test speedup 1.2621205124234063
TPCH test speedup 4.042459065928099
TPCH skew test speedup 3.9617900985180543
Epoch 29/300 |loss: 0.001639| train set 5.180x speedup, test set 3.962x speedup, val set 5.167x speedup, step: 1
JOB test speedup 1.2448297811028617
TPCH test speedup 4.122374685228693
TPCH skew test speedup 4.0555515964401305
Epoch 30/300 |loss: 0.001940| train set 5.169x speedup, test set 4.056x speedup, val set 5.306x speedup, step: 2
JOB test speedup 1.2955422504154726
TPCH test speedup 4.042376729806575
TPCH skew test speedup 3.8909708046062605
Epoch 31/300 |loss: 0.001583| train set 5.074x speedup, test set 3.891x speedup, val set 5.318x speedup, step: 3
JOB test speedup 1.2987608654244824
TPCH test speedup 4.084119777394009
TPCH skew test speedup 4.0218387874211565
Epoch 32/300 |loss: 0.001579| train set 5.030x speedup, test set 4.022x speedup, val set 4.104x speedup, step: 4
JOB test speedup 1.237082199044536
TPCH test speedup 4.084598903947115
TPCH skew test speedup 4.022537749683334
Epoch 33/300 |loss: 0.001910| train set 5.142x speedup, test set 4.023x speedup, val set 5.317x speedup, step: 5
JOB test speedup 1.3068924252764549
TPCH test speedup 4.070373780079091
TPCH skew test speedup 4.018042232642877
Epoch 34/300 |loss: 0.001732| train set 5.118x speedup, test set 4.018x speedup, val set 5.177x speedup, step: 1
JOB test speedup 1.2507942395557856
TPCH test speedup 4.1114341632521665
TPCH skew test speedup 4.05227742189274
Epoch 35/300 |loss: 0.001428| train set 5.142x speedup, test set 4.052x speedup, val set 5.293x speedup, step: 2
JOB test speedup 1.3037675448490658
TPCH test speedup 4.05720626888076
TPCH skew test speedup 3.996869506196181
Epoch 36/300 |loss: 0.001373| train set 5.143x speedup, test set 3.997x speedup, val set 5.156x speedup, step: 3
JOB test speedup 1.2404338806306752
TPCH test speedup 3.9854737072563196
TPCH skew test speedup 3.9080586515781994
Epoch 37/300 |loss: 0.001481| train set 5.178x speedup, test set 3.908x speedup, val set 5.317x speedup, step: 4
JOB test speedup 1.2708773964860498
TPCH test speedup 4.082617916608586
TPCH skew test speedup 4.056423888357636
Epoch 38/300 |loss: 0.001421| train set 5.132x speedup, test set 4.056x speedup, val set 5.207x speedup, step: 5
JOB test speedup 1.2575325025365236
TPCH test speedup 3.9424334253953455
TPCH skew test speedup 3.9489197137253043
Epoch 39/300 |loss: 0.001262| train set 5.115x speedup, test set 3.949x speedup, val set 5.187x speedup, step: 1
JOB test speedup 1.218464544963986
TPCH test speedup 3.934985748961047
TPCH skew test speedup 3.9339946549326275
Epoch 40/300 |loss: 0.001071| train set 5.182x speedup, test set 3.934x speedup, val set 5.206x speedup, step: 2
JOB test speedup 1.2504016452463025
TPCH test speedup 3.900214897212418
TPCH skew test speedup 3.8976855892754574
Epoch 41/300 |loss: 0.001136| train set 5.009x speedup, test set 3.898x speedup, val set 5.187x speedup, step: 3
JOB test speedup 1.2092196314557022
TPCH test speedup 3.9401215254257673
TPCH skew test speedup 3.866734726494412
Epoch 42/300 |loss: 0.001182| train set 5.068x speedup, test set 3.867x speedup, val set 5.182x speedup, step: 4
JOB test speedup 1.2554820067693755
TPCH test speedup 4.09713619006985
TPCH skew test speedup 4.049129809262643
Epoch 43/300 |loss: 0.001129| train set 5.128x speedup, test set 4.049x speedup, val set 5.238x speedup, step: 5
JOB test speedup 1.2941829897443367
TPCH test speedup 4.053179103963774
TPCH skew test speedup 4.0167028705935985
Epoch 44/300 |loss: 0.001263| train set 5.161x speedup, test set 4.017x speedup, val set 5.182x speedup, step: 6
JOB test speedup 1.2628443836739616
TPCH test speedup 4.113866443686237
TPCH skew test speedup 4.059047172369202
Epoch 45/300 |loss: 0.001291| train set 5.161x speedup, test set 4.059x speedup, val set 5.274x speedup, step: 7
JOB test speedup 1.2713607685741963
TPCH test speedup 4.113866443686237
TPCH skew test speedup 4.059047172369202
Epoch 46/300 |loss: 0.000983| train set 5.154x speedup, test set 4.059x speedup, val set 5.252x speedup, step: 8
JOB test speedup 1.264400208246041
TPCH test speedup 4.13630040134937
TPCH skew test speedup 4.104311884607395
Epoch 47/300 |loss: 0.001184| train set 5.150x speedup, test set 4.104x speedup, val set 5.228x speedup, step: 9
JOB test speedup 1.2291594807140505
TPCH test speedup 3.881339124570462
TPCH skew test speedup 3.8720398636764157
Epoch 48/300 |loss: 0.001683| train set 4.493x speedup, test set 3.872x speedup, val set 5.052x speedup, step: 10
JOB test speedup 1.2245388127018348
TPCH test speedup 4.113866443686237
TPCH skew test speedup 4.059047172369202
Epoch 49/300 |loss: 0.002391| train set 5.132x speedup, test set 4.059x speedup, val set 5.275x speedup, step: 1
early stopping at epoch 49
Training per epoch cost 2.346 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.084s, pg runtime 0.081s, speedup 0.961x
02, opt runtime 1.299s, model runtime 9.953s, pg runtime 5.855s, speedup 0.588x
03, opt runtime 0.207s, model runtime 0.207s, pg runtime 0.207s, speedup 1.000x
04, opt runtime 0.920s, model runtime 1.651s, pg runtime 1.680s, speedup 1.018x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.942s, pg runtime 0.942s, speedup 1.000x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.093s, pg runtime 0.089s, speedup 0.956x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.239s, pg runtime 0.239s, speedup 1.000x
28, opt runtime 0.157s, model runtime 0.231s, pg runtime 0.157s, speedup 0.678x
29, opt runtime 0.158s, model runtime 0.218s, pg runtime 0.158s, speedup 0.728x
30, opt runtime 1.646s, model runtime 5.667s, pg runtime 4.855s, speedup 0.857x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 2.923s, pg runtime 5.521s, speedup 1.889x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
16, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.122s, pg runtime 7.799s, speedup 1.095x
28, opt runtime 7.199s, model runtime 7.919s, pg runtime 7.619s, speedup 0.962x
29, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
30, opt runtime 5.539s, model runtime 5.690s, pg runtime 5.539s, speedup 0.973x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.280s, model runtime 18.051s, pg runtime 634.990s, speedup 35.177x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.419s, pg runtime 7.675s, speedup 1.035x
28, opt runtime 7.312s, model runtime 7.312s, pg runtime 7.655s, speedup 1.047x
29, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
30, opt runtime 5.271s, model runtime 5.766s, pg runtime 5.271s, speedup 0.914x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.301s, pg runtime 646.719s, speedup 39.673x
36, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 49, train speedup 5.132, test speedup 1.225, val speedup 5.275
TPCH best validation speedup epoch: 49, train speedup 5.132, test speedup 4.114, val speedup 5.275
TPCH Skew best validation speedup epoch: 49, train speedup 5.132, test speedup 4.059, val speedup 5.275
execution cost 0:02:52.362785
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.137029, and there are 9604 training samples
in channel 9
JOB test speedup 0.6316320939600328
TPCH test speedup 2.825356230297737
TPCH skew test speedup 2.5572325182245006
Epoch 0/300 |loss: 0.037331| train set 2.542x speedup, test set 2.557x speedup, val set 2.424x speedup, step: 1
JOB test speedup 0.841527964906055
TPCH test speedup 2.9649249839407066
TPCH skew test speedup 2.7468799114622504
Epoch 1/300 |loss: 0.016884| train set 2.629x speedup, test set 2.747x speedup, val set 2.764x speedup, step: 2
JOB test speedup 1.545354485518611
TPCH test speedup 3.1231157393898346
TPCH skew test speedup 2.9396720987635394
Epoch 2/300 |loss: 0.010821| train set 2.855x speedup, test set 2.940x speedup, val set 3.113x speedup, step: 3
JOB test speedup 1.5828697957718656
TPCH test speedup 3.3479101260006567
TPCH skew test speedup 3.1104795854959737
Epoch 3/300 |loss: 0.008661| train set 2.639x speedup, test set 3.110x speedup, val set 2.764x speedup, step: 4
JOB test speedup 1.6623221014899228
TPCH test speedup 3.8754330085889306
TPCH skew test speedup 3.492569766663634
Epoch 4/300 |loss: 0.007259| train set 3.218x speedup, test set 3.493x speedup, val set 3.413x speedup, step: 1
JOB test speedup 1.5329648917185192
TPCH test speedup 3.760010128079522
TPCH skew test speedup 3.2331216740615023
Epoch 5/300 |loss: 0.006405| train set 3.369x speedup, test set 3.233x speedup, val set 4.096x speedup, step: 2
JOB test speedup 1.785668188313054
TPCH test speedup 3.8241422720792047
TPCH skew test speedup 3.760176890880883
Epoch 6/300 |loss: 0.006109| train set 3.314x speedup, test set 3.760x speedup, val set 3.878x speedup, step: 3
JOB test speedup 1.7684212400611194
TPCH test speedup 4.110920545414584
TPCH skew test speedup 3.8598039638155375
Epoch 7/300 |loss: 0.005244| train set 4.651x speedup, test set 3.860x speedup, val set 4.914x speedup, step: 4
JOB test speedup 1.8954384465773384
TPCH test speedup 3.9654905450993803
TPCH skew test speedup 3.6514433938643203
Epoch 8/300 |loss: 0.007576| train set 4.411x speedup, test set 3.651x speedup, val set 4.579x speedup, step: 5
JOB test speedup 1.1536649930897769
TPCH test speedup 4.125679928743306
TPCH skew test speedup 3.921815883848534
Epoch 9/300 |loss: 0.004935| train set 4.097x speedup, test set 3.922x speedup, val set 4.996x speedup, step: 1
JOB test speedup 1.0470488262254878
TPCH test speedup 3.9107628803988197
TPCH skew test speedup 3.9358527192184143
Epoch 10/300 |loss: 0.004468| train set 3.523x speedup, test set 3.936x speedup, val set 4.934x speedup, step: 2
JOB test speedup 1.204497863944127
TPCH test speedup 3.900794743774685
TPCH skew test speedup 3.7053796914394375
Epoch 11/300 |loss: 0.003539| train set 4.128x speedup, test set 3.705x speedup, val set 4.271x speedup, step: 3
JOB test speedup 1.211063655826659
TPCH test speedup 4.068449221868202
TPCH skew test speedup 3.7571846777697995
Epoch 12/300 |loss: 0.003407| train set 4.858x speedup, test set 3.757x speedup, val set 5.208x speedup, step: 4
JOB test speedup 1.2248767951260293
TPCH test speedup 4.005849423165895
TPCH skew test speedup 3.9559987399446976
Epoch 13/300 |loss: 0.003263| train set 4.798x speedup, test set 3.956x speedup, val set 5.143x speedup, step: 5
JOB test speedup 1.2236455480173716
TPCH test speedup 4.071025447289187
TPCH skew test speedup 3.9947548533342805
Epoch 14/300 |loss: 0.003921| train set 5.004x speedup, test set 3.995x speedup, val set 5.292x speedup, step: 1
JOB test speedup 2.207386681570628
TPCH test speedup 3.9087905242326477
TPCH skew test speedup 3.6870797536411515
Epoch 15/300 |loss: 0.002530| train set 5.071x speedup, test set 3.687x speedup, val set 5.193x speedup, step: 2
JOB test speedup 1.9081323697888595
TPCH test speedup 4.003699364632554
TPCH skew test speedup 3.9233730712234562
Epoch 16/300 |loss: 0.002334| train set 4.733x speedup, test set 3.923x speedup, val set 5.053x speedup, step: 3
JOB test speedup 1.8691226354213677
TPCH test speedup 4.079084836794247
TPCH skew test speedup 4.021145837926647
Epoch 17/300 |loss: 0.002806| train set 4.976x speedup, test set 4.021x speedup, val set 5.232x speedup, step: 4
JOB test speedup 0.9333330005626451
TPCH test speedup 3.9132982048625977
TPCH skew test speedup 3.8340803598581292
Epoch 18/300 |loss: 0.002019| train set 5.020x speedup, test set 3.834x speedup, val set 4.998x speedup, step: 5
JOB test speedup 1.8553708980194668
TPCH test speedup 3.8962267435185747
TPCH skew test speedup 3.787082831341525
Epoch 19/300 |loss: 0.001953| train set 5.109x speedup, test set 3.787x speedup, val set 5.144x speedup, step: 6
JOB test speedup 0.902820451158259
TPCH test speedup 3.7189012190713546
TPCH skew test speedup 3.6627999948991667
Epoch 20/300 |loss: 0.001899| train set 5.124x speedup, test set 3.663x speedup, val set 4.546x speedup, step: 7
JOB test speedup 0.8187736816862324
TPCH test speedup 3.5157166140778906
TPCH skew test speedup 3.321788354785656
Epoch 21/300 |loss: 0.002430| train set 3.134x speedup, test set 3.322x speedup, val set 3.211x speedup, step: 8
JOB test speedup 1.8592084748742612
TPCH test speedup 4.032044331945166
TPCH skew test speedup 3.9770180298827484
Epoch 22/300 |loss: 0.002607| train set 5.150x speedup, test set 3.977x speedup, val set 5.098x speedup, step: 9
JOB test speedup 1.8077461180677912
TPCH test speedup 4.116706989410784
TPCH skew test speedup 4.056910859498778
Epoch 23/300 |loss: 0.001723| train set 5.051x speedup, test set 4.057x speedup, val set 5.316x speedup, step: 10
JOB test speedup 1.2144384249362195
TPCH test speedup 4.115843547882954
TPCH skew test speedup 4.064258180280016
Epoch 24/300 |loss: 0.002156| train set 5.162x speedup, test set 4.064x speedup, val set 5.309x speedup, step: 1
JOB test speedup 1.250511372721449
TPCH test speedup 4.119135564135463
TPCH skew test speedup 4.06044496835349
Epoch 25/300 |loss: 0.001925| train set 5.163x speedup, test set 4.060x speedup, val set 5.297x speedup, step: 2
JOB test speedup 1.2843969252490315
TPCH test speedup 4.059268150308577
TPCH skew test speedup 4.022710840183287
Epoch 26/300 |loss: 0.001591| train set 5.172x speedup, test set 4.023x speedup, val set 5.196x speedup, step: 3
JOB test speedup 1.244438089846543
TPCH test speedup 4.005721314807101
TPCH skew test speedup 3.946384569764325
Epoch 27/300 |loss: 0.001650| train set 5.162x speedup, test set 3.946x speedup, val set 5.110x speedup, step: 4
JOB test speedup 1.2600690637020968
TPCH test speedup 3.9408347192557143
TPCH skew test speedup 3.9516003779328694
Epoch 28/300 |loss: 0.001551| train set 5.149x speedup, test set 3.952x speedup, val set 5.296x speedup, step: 5
JOB test speedup 1.2470422699245653
TPCH test speedup 3.937328098500544
TPCH skew test speedup 3.942884065585552
Epoch 29/300 |loss: 0.001425| train set 5.127x speedup, test set 3.943x speedup, val set 5.160x speedup, step: 6
JOB test speedup 1.266166506020176
TPCH test speedup 4.385354389171017
TPCH skew test speedup 4.062325706648105
Epoch 30/300 |loss: 0.001993| train set 5.158x speedup, test set 4.062x speedup, val set 5.286x speedup, step: 7
JOB test speedup 1.2333760613587015
TPCH test speedup 4.10540701587059
TPCH skew test speedup 4.048749058579729
Epoch 31/300 |loss: 0.001428| train set 5.062x speedup, test set 4.049x speedup, val set 5.294x speedup, step: 8
JOB test speedup 1.201525911117106
TPCH test speedup 3.527825946749913
TPCH skew test speedup 3.5685836856553075
Epoch 32/300 |loss: 0.001424| train set 3.479x speedup, test set 3.569x speedup, val set 3.640x speedup, step: 9
JOB test speedup 1.2603277422107082
TPCH test speedup 4.32765865490283
TPCH skew test speedup 4.022789189171987
Epoch 33/300 |loss: 0.001983| train set 5.182x speedup, test set 4.023x speedup, val set 5.258x speedup, step: 10
JOB test speedup 1.2617703616140667
TPCH test speedup 4.3519080869267075
TPCH skew test speedup 4.029969675922146
Epoch 34/300 |loss: 0.001398| train set 5.064x speedup, test set 4.030x speedup, val set 5.212x speedup, step: 11
JOB test speedup 1.270753681599018
TPCH test speedup 4.3519080869267075
TPCH skew test speedup 4.029969675922146
Epoch 35/300 |loss: 0.001309| train set 5.161x speedup, test set 4.030x speedup, val set 5.181x speedup, step: 12
JOB test speedup 1.2636443121983456
TPCH test speedup 4.2762773031528
TPCH skew test speedup 3.7165687921524677
Epoch 36/300 |loss: 0.001327| train set 4.987x speedup, test set 3.717x speedup, val set 5.052x speedup, step: 13
JOB test speedup 1.260182136685573
TPCH test speedup 4.187945509679613
TPCH skew test speedup 3.8785425700841327
Epoch 37/300 |loss: 0.001265| train set 5.145x speedup, test set 3.879x speedup, val set 5.168x speedup, step: 14
JOB test speedup 1.130710237898965
TPCH test speedup 4.347939855163409
TPCH skew test speedup 4.030749301230983
Epoch 38/300 |loss: 0.001276| train set 5.086x speedup, test set 4.031x speedup, val set 5.198x speedup, step: 15
JOB test speedup 1.2436871369722293
TPCH test speedup 4.345548629398167
TPCH skew test speedup 4.021070644959844
Epoch 39/300 |loss: 0.001262| train set 5.117x speedup, test set 4.021x speedup, val set 5.188x speedup, step: 16
JOB test speedup 1.2658063597915437
TPCH test speedup 4.19975374091187
TPCH skew test speedup 3.953638840314973
Epoch 40/300 |loss: 0.001007| train set 5.177x speedup, test set 3.954x speedup, val set 4.945x speedup, step: 17
JOB test speedup 1.0690349940444703
TPCH test speedup 4.139990651718454
TPCH skew test speedup 3.904018881916877
Epoch 41/300 |loss: 0.001014| train set 5.151x speedup, test set 3.904x speedup, val set 5.084x speedup, step: 18
JOB test speedup 1.2749963695668503
TPCH test speedup 4.38497543728397
TPCH skew test speedup 4.062585005851998
Epoch 42/300 |loss: 0.000977| train set 5.125x speedup, test set 4.063x speedup, val set 5.297x speedup, step: 19
JOB test speedup 1.2494017873963634
TPCH test speedup 4.278862193541499
TPCH skew test speedup 3.9434949032420445
Epoch 43/300 |loss: 0.001030| train set 5.071x speedup, test set 3.943x speedup, val set 5.206x speedup, step: 20
JOB test speedup 1.2930115069287016
TPCH test speedup 4.399369150197105
TPCH skew test speedup 4.11019049771304
Epoch 44/300 |loss: 0.001409| train set 5.163x speedup, test set 4.110x speedup, val set 5.220x speedup, step: 21
JOB test speedup 1.245161364339489
TPCH test speedup 4.359175820739869
TPCH skew test speedup 4.03027171651536
Epoch 45/300 |loss: 0.001321| train set 5.149x speedup, test set 4.030x speedup, val set 5.203x speedup, step: 22
JOB test speedup 1.2886886132839281
TPCH test speedup 4.35007873470364
TPCH skew test speedup 4.0329684110203745
Epoch 46/300 |loss: 0.000929| train set 5.182x speedup, test set 4.033x speedup, val set 5.183x speedup, step: 23
JOB test speedup 1.1575502990342172
TPCH test speedup 4.124979044777206
TPCH skew test speedup 3.8352103859266315
Epoch 47/300 |loss: 0.001357| train set 5.169x speedup, test set 3.835x speedup, val set 5.189x speedup, step: 24
JOB test speedup 1.1760325406729712
TPCH test speedup 4.264590182408878
TPCH skew test speedup 3.9468034193785173
Epoch 48/300 |loss: 0.002056| train set 4.455x speedup, test set 3.947x speedup, val set 4.736x speedup, step: 25
early stopping at epoch 48
Training per epoch cost 2.387 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.081s, pg runtime 0.081s, speedup 1.000x
02, opt runtime 1.299s, model runtime 7.470s, pg runtime 5.855s, speedup 0.784x
03, opt runtime 0.207s, model runtime 0.556s, pg runtime 0.207s, speedup 0.372x
04, opt runtime 0.920s, model runtime 2.104s, pg runtime 1.680s, speedup 0.798x
05, opt runtime 2.262s, model runtime 4.385s, pg runtime 3.549s, speedup 0.809x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 2.238s, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 2.625s, pg runtime 3.540s, speedup 1.349x
20, opt runtime 0.064s, model runtime 0.064s, pg runtime 0.089s, speedup 1.393x
21, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.433s, pg runtime 0.389s, speedup 0.898x
24, opt runtime 2.719s, model runtime 4.408s, pg runtime 3.112s, speedup 0.706x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.350s, pg runtime 0.161s, speedup 0.460x
27, opt runtime 0.068s, model runtime 0.158s, pg runtime 0.239s, speedup 1.515x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 2.923s, pg runtime 5.521s, speedup 1.889x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
16, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.398s, pg runtime 1.438s, speedup 1.028x
20, opt runtime 1.428s, model runtime 1.645s, pg runtime 1.428s, speedup 0.868x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.122s, pg runtime 7.799s, speedup 1.095x
28, opt runtime 7.199s, model runtime 7.919s, pg runtime 7.619s, speedup 0.962x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.280s, model runtime 18.051s, pg runtime 634.990s, speedup 35.177x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.308s, model runtime 1.308s, pg runtime 1.528s, speedup 1.168x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.419s, pg runtime 7.675s, speedup 1.035x
28, opt runtime 7.312s, model runtime 7.312s, pg runtime 7.655s, speedup 1.047x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.301s, pg runtime 646.719s, speedup 39.673x
36, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 24, train speedup 5.162, test speedup 1.214, val speedup 5.309
TPCH best validation speedup epoch: 24, train speedup 5.162, test speedup 4.116, val speedup 5.309
TPCH Skew best validation speedup epoch: 24, train speedup 5.162, test speedup 4.064, val speedup 5.309
execution cost 0:02:51.421030
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[0, 1, 2, 4, 5, 7, 9] [6, 8] [3 3]
[0, 1, 3, 7, 8, 9] [5, 2] [4 6]
[2, 4, 5, 7, 8, 9] [1, 3] [0 6]
[0, 2, 3, 4, 6, 8] [1, 9] [7 5]
[1, 3, 4, 5, 6, 8, 9] [7, 2] [0 0]
[1, 2, 3, 4, 6, 8] [5, 9] [7 0]
[2, 3, 4, 5, 7, 8] [1, 6] [9 0]
[1, 3, 4, 6, 7, 8] [0, 2] [5 9]
[2, 3, 4, 5, 6, 7] [1, 0] [9 8]
[0, 1, 4, 5, 6, 7, 8] [3, 9] [2 2]
[1, 2, 3, 5, 7, 8] [4, 6] [0 9]
[0, 1, 3, 4, 5, 6, 7] [9, 8] [2 2]
[3, 5, 6, 7, 8, 9] [1, 2] [0 4]
[1, 3, 4, 6, 8, 9] [0, 7] [5 2]
[0, 4, 5, 6, 7, 9] [3, 2] [8 1]
[1, 3, 5, 6, 7, 9] [8, 2] [0 4]
[1, 2, 3, 4, 6, 9] [8, 5] [7 0]
[0, 1, 2, 6, 7, 8] [5, 3] [9 4]
[2, 3, 4, 5, 6, 8] [7, 9] [1 0]
[0, 1, 3, 4, 5, 7] [2, 6] [9 8]
load TPCH succ
load TPCH_Skew...
[0, 2, 3, 4, 5, 9] [6, 1] [8 7]
[0, 1, 2, 3, 7, 8] [4, 5] [9 6]
[0, 1, 6, 7, 8, 9] [4, 5] [2 3]
[0, 2, 3, 4, 5, 8] [1, 6] [9 7]
[0, 1, 4, 5, 6, 8, 9] [7, 3] [2 2]
[2, 4, 5, 7, 8, 9] [0, 6] [1 3]
[0, 2, 4, 5, 7, 9] [3, 1] [6 8]
[0, 1, 4, 5, 7, 8] [9, 3] [6 2]
[1, 2, 3, 6, 7, 8] [9, 4] [0 5]
[0, 4, 5, 6, 7, 9] [3, 2] [1 8]
[0, 1, 2, 3, 5, 9] [4, 6] [8 7]
[0, 1, 3, 4, 5, 9] [8, 7] [6 2]
[1, 3, 4, 6, 7, 9] [2, 5] [0 8]
[1, 3, 4, 5, 6, 8] [0, 9] [7 2]
[0, 2, 4, 5, 7, 8] [9, 6] [1 3]
[0, 2, 4, 6, 8, 9] [7, 1] [5 3]
[0, 1, 2, 4, 5, 7] [6, 3] [8 9]
[1, 2, 3, 4, 7, 9] [6, 5] [8 0]
[0, 1, 3, 7, 8, 9] [2, 4] [5 6]
[0, 1, 3, 6, 7, 8] [5, 2] [9 4]
load TPCH Skew succ
construct training samples cost 0:00:01.134070, and there are 9604 training samples
in channel 9
JOB test speedup 0.6316320939600328
TPCH test speedup 2.825356230297737
TPCH skew test speedup 2.5572325182245006
Epoch 0/300 |loss: 0.037331| train set 2.542x speedup, test set 2.557x speedup, val set 2.424x speedup, step: 1
JOB test speedup 0.841527964906055
TPCH test speedup 2.9649249839407066
TPCH skew test speedup 2.7468799114622504
Epoch 1/300 |loss: 0.016884| train set 2.629x speedup, test set 2.747x speedup, val set 2.764x speedup, step: 2
JOB test speedup 1.545354485518611
TPCH test speedup 3.1231157393898346
TPCH skew test speedup 2.9396720987635394
Epoch 2/300 |loss: 0.010821| train set 2.855x speedup, test set 2.940x speedup, val set 3.113x speedup, step: 3
JOB test speedup 1.5828697957718656
TPCH test speedup 3.3479101260006567
TPCH skew test speedup 3.1104795854959737
Epoch 3/300 |loss: 0.008661| train set 2.639x speedup, test set 3.110x speedup, val set 2.764x speedup, step: 4
JOB test speedup 1.6617132364868408
TPCH test speedup 4.143136850250963
TPCH skew test speedup 3.6280239310934568
Epoch 4/300 |loss: 0.007270| train set 3.216x speedup, test set 3.628x speedup, val set 3.599x speedup, step: 1
JOB test speedup 1.5325391713202408
TPCH test speedup 3.871748935132526
TPCH skew test speedup 3.3027155023830423
Epoch 5/300 |loss: 0.006402| train set 4.142x speedup, test set 3.303x speedup, val set 4.249x speedup, step: 2
JOB test speedup 1.8042061993172063
TPCH test speedup 3.825920941800542
TPCH skew test speedup 3.5505848372442106
Epoch 6/300 |loss: 0.006109| train set 3.315x speedup, test set 3.551x speedup, val set 3.389x speedup, step: 3
JOB test speedup 1.7607160664702033
TPCH test speedup 4.172628543318714
TPCH skew test speedup 3.589063802853583
Epoch 7/300 |loss: 0.005273| train set 4.721x speedup, test set 3.589x speedup, val set 4.867x speedup, step: 4
JOB test speedup 2.376474456085181
TPCH test speedup 3.9936786761487455
TPCH skew test speedup 3.473939382634461
Epoch 8/300 |loss: 0.007436| train set 4.384x speedup, test set 3.474x speedup, val set 4.394x speedup, step: 5
JOB test speedup 1.197416633768182
TPCH test speedup 4.125679928743306
TPCH skew test speedup 3.921815883848534
Epoch 9/300 |loss: 0.004951| train set 4.015x speedup, test set 3.922x speedup, val set 4.796x speedup, step: 1
JOB test speedup 1.1461704236129777
TPCH test speedup 3.938514885598176
TPCH skew test speedup 3.7492875635213614
Epoch 10/300 |loss: 0.004465| train set 4.379x speedup, test set 3.749x speedup, val set 4.877x speedup, step: 2
JOB test speedup 1.169753952488995
TPCH test speedup 3.9426426433700157
TPCH skew test speedup 3.7496677387485304
Epoch 11/300 |loss: 0.003466| train set 4.384x speedup, test set 3.750x speedup, val set 4.891x speedup, step: 3
JOB test speedup 1.223911763092213
TPCH test speedup 4.053012701675765
TPCH skew test speedup 3.7391098703415864
Epoch 12/300 |loss: 0.003417| train set 4.715x speedup, test set 3.739x speedup, val set 5.161x speedup, step: 4
JOB test speedup 1.2615726528662214
TPCH test speedup 4.014883199937678
TPCH skew test speedup 3.96861791266267
Epoch 13/300 |loss: 0.003262| train set 4.988x speedup, test set 3.969x speedup, val set 5.147x speedup, step: 5
JOB test speedup 2.0415807667835293
TPCH test speedup 4.098567201700753
TPCH skew test speedup 4.042899459190806
Epoch 14/300 |loss: 0.003836| train set 5.127x speedup, test set 4.043x speedup, val set 5.275x speedup, step: 1
JOB test speedup 0.9863627574404766
TPCH test speedup 4.079694614055295
TPCH skew test speedup 4.009372939799634
Epoch 15/300 |loss: 0.002468| train set 5.046x speedup, test set 4.009x speedup, val set 5.272x speedup, step: 2
JOB test speedup 0.9533895574193081
TPCH test speedup 4.047901675845517
TPCH skew test speedup 3.7351735747919004
Epoch 16/300 |loss: 0.002379| train set 5.024x speedup, test set 3.735x speedup, val set 5.169x speedup, step: 3
JOB test speedup 1.9303679860645886
TPCH test speedup 4.076923191355076
TPCH skew test speedup 4.021145837926647
Epoch 17/300 |loss: 0.002576| train set 5.015x speedup, test set 4.021x speedup, val set 5.181x speedup, step: 4
JOB test speedup 0.963424037333502
TPCH test speedup 3.902825240199828
TPCH skew test speedup 3.8276516940871854
Epoch 18/300 |loss: 0.002105| train set 4.645x speedup, test set 3.828x speedup, val set 5.001x speedup, step: 5
JOB test speedup 0.9392345401426959
TPCH test speedup 4.035302271748368
TPCH skew test speedup 4.0160678122879885
Epoch 19/300 |loss: 0.002103| train set 4.926x speedup, test set 4.016x speedup, val set 4.985x speedup, step: 6
JOB test speedup 0.8780550439745238
TPCH test speedup 4.038563107478425
TPCH skew test speedup 4.008260791984364
Epoch 20/300 |loss: 0.002193| train set 5.138x speedup, test set 4.008x speedup, val set 5.144x speedup, step: 7
JOB test speedup 0.6075240528875795
TPCH test speedup 3.4864013366154785
TPCH skew test speedup 3.443791510088137
Epoch 21/300 |loss: 0.002320| train set 3.019x speedup, test set 3.444x speedup, val set 3.161x speedup, step: 8
JOB test speedup 0.9773246930547941
TPCH test speedup 4.048074775395267
TPCH skew test speedup 3.9875240808787047
Epoch 22/300 |loss: 0.003117| train set 5.096x speedup, test set 3.988x speedup, val set 3.721x speedup, step: 9
JOB test speedup 0.9657698342664968
TPCH test speedup 4.058257709084428
TPCH skew test speedup 3.990458367780312
Epoch 23/300 |loss: 0.001875| train set 5.065x speedup, test set 3.990x speedup, val set 4.579x speedup, step: 10
JOB test speedup 0.955090263730443
TPCH test speedup 4.01355283516423
TPCH skew test speedup 3.959692913430596
Epoch 24/300 |loss: 0.002154| train set 5.161x speedup, test set 3.960x speedup, val set 5.141x speedup, step: 11
JOB test speedup 1.2629773512548912
TPCH test speedup 4.073956303410912
TPCH skew test speedup 4.034130178879527
Epoch 25/300 |loss: 0.001823| train set 5.155x speedup, test set 4.034x speedup, val set 5.181x speedup, step: 12
JOB test speedup 1.3020433144897328
TPCH test speedup 4.049518318157521
TPCH skew test speedup 4.001956529238242
Epoch 26/300 |loss: 0.001661| train set 5.173x speedup, test set 4.002x speedup, val set 5.200x speedup, step: 13
JOB test speedup 1.2851015896518423
TPCH test speedup 4.0235641159277264
TPCH skew test speedup 3.966178775410291
Epoch 27/300 |loss: 0.001727| train set 5.159x speedup, test set 3.966x speedup, val set 5.236x speedup, step: 14
JOB test speedup 1.3065524900918692
TPCH test speedup 4.068510687602996
TPCH skew test speedup 4.019241630466843
Epoch 28/300 |loss: 0.001574| train set 5.165x speedup, test set 4.019x speedup, val set 5.260x speedup, step: 15
JOB test speedup 1.2992518271786686
TPCH test speedup 4.069276171126668
TPCH skew test speedup 4.019665770680162
Epoch 29/300 |loss: 0.001629| train set 5.118x speedup, test set 4.020x speedup, val set 5.188x speedup, step: 16
JOB test speedup 1.2987535409559106
TPCH test speedup 4.053385210480532
TPCH skew test speedup 4.001626196408525
Epoch 30/300 |loss: 0.001802| train set 5.172x speedup, test set 4.002x speedup, val set 5.276x speedup, step: 17
JOB test speedup 1.3453616357735334
TPCH test speedup 4.101064935538475
TPCH skew test speedup 4.088545430082818
Epoch 31/300 |loss: 0.001534| train set 5.025x speedup, test set 4.089x speedup, val set 5.202x speedup, step: 18
JOB test speedup 1.344915463112592
TPCH test speedup 4.069621036191107
TPCH skew test speedup 4.010293629581375
Epoch 32/300 |loss: 0.001452| train set 3.626x speedup, test set 4.010x speedup, val set 3.750x speedup, step: 19
JOB test speedup 1.3197390160845517
TPCH test speedup 3.946492241661271
TPCH skew test speedup 3.879957458740785
Epoch 33/300 |loss: 0.002135| train set 5.139x speedup, test set 3.880x speedup, val set 5.287x speedup, step: 20
JOB test speedup 1.3100131953040375
TPCH test speedup 4.058388505238332
TPCH skew test speedup 4.010969347796758
Epoch 34/300 |loss: 0.001624| train set 5.071x speedup, test set 4.011x speedup, val set 5.174x speedup, step: 21
JOB test speedup 1.3458804741686439
TPCH test speedup 4.083168849720819
TPCH skew test speedup 4.019869043100284
Epoch 35/300 |loss: 0.001378| train set 5.149x speedup, test set 4.020x speedup, val set 5.184x speedup, step: 22
JOB test speedup 1.3568625563849994
TPCH test speedup 4.052993656176881
TPCH skew test speedup 4.016741844282027
Epoch 36/300 |loss: 0.001313| train set 5.161x speedup, test set 4.017x speedup, val set 5.285x speedup, step: 23
JOB test speedup 1.2761589718738318
TPCH test speedup 4.07632101128419
TPCH skew test speedup 4.024485080005542
Epoch 37/300 |loss: 0.001417| train set 5.075x speedup, test set 4.024x speedup, val set 5.188x speedup, step: 24
JOB test speedup 1.3328481832601642
TPCH test speedup 4.07183967873347
TPCH skew test speedup 4.027120415357875
Epoch 38/300 |loss: 0.001581| train set 5.126x speedup, test set 4.027x speedup, val set 5.191x speedup, step: 25
JOB test speedup 1.296867789005919
TPCH test speedup 3.9333780861585006
TPCH skew test speedup 3.943121963452735
Epoch 39/300 |loss: 0.001177| train set 5.170x speedup, test set 3.943x speedup, val set 5.195x speedup, step: 26
JOB test speedup 1.2674555317686365
TPCH test speedup 3.9414808222158157
TPCH skew test speedup 3.9481691281748366
Epoch 40/300 |loss: 0.000985| train set 5.147x speedup, test set 3.948x speedup, val set 5.218x speedup, step: 27
JOB test speedup 1.2267926890753917
TPCH test speedup 3.798221018819932
TPCH skew test speedup 3.7628187495232104
Epoch 41/300 |loss: 0.001053| train set 5.031x speedup, test set 3.763x speedup, val set 5.108x speedup, step: 28
JOB test speedup 1.2666377223059697
TPCH test speedup 3.998389878819621
TPCH skew test speedup 3.9384780138569524
Epoch 42/300 |loss: 0.001179| train set 5.090x speedup, test set 3.938x speedup, val set 5.074x speedup, step: 29
JOB test speedup 1.2734526074087156
TPCH test speedup 4.0195443156021975
TPCH skew test speedup 3.9529208213475013
Epoch 43/300 |loss: 0.001134| train set 5.140x speedup, test set 3.953x speedup, val set 5.158x speedup, step: 30
JOB test speedup 1.2822589468821628
TPCH test speedup 4.029319381361619
TPCH skew test speedup 3.9790710090507035
Epoch 44/300 |loss: 0.001110| train set 5.179x speedup, test set 3.979x speedup, val set 5.308x speedup, step: 1
JOB test speedup 1.2964418833243743
TPCH test speedup 4.084010397148822
TPCH skew test speedup 4.032333153911726
Epoch 45/300 |loss: 0.001141| train set 5.158x speedup, test set 4.032x speedup, val set 5.193x speedup, step: 2
JOB test speedup 1.252337184857433
TPCH test speedup 4.060835375153833
TPCH skew test speedup 4.0244309626830645
Epoch 46/300 |loss: 0.001030| train set 5.156x speedup, test set 4.024x speedup, val set 5.177x speedup, step: 3
JOB test speedup 1.2660028427242782
TPCH test speedup 3.92821969539095
TPCH skew test speedup 3.8452947297177382
Epoch 47/300 |loss: 0.001172| train set 5.178x speedup, test set 3.845x speedup, val set 5.153x speedup, step: 4
JOB test speedup 1.329398772977759
TPCH test speedup 3.897726096099163
TPCH skew test speedup 3.9012908597628737
Epoch 48/300 |loss: 0.001509| train set 4.498x speedup, test set 3.901x speedup, val set 5.104x speedup, step: 5
JOB test speedup 1.2252887999951443
TPCH test speedup 4.001424117885594
TPCH skew test speedup 3.929192934319776
Epoch 49/300 |loss: 0.002015| train set 4.915x speedup, test set 3.929x speedup, val set 5.060x speedup, step: 6
early stopping at epoch 49
Training per epoch cost 2.434 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 7.470s, pg runtime 5.855s, speedup 0.784x
03, opt runtime 0.207s, model runtime 0.556s, pg runtime 0.207s, speedup 0.372x
04, opt runtime 0.920s, model runtime 2.104s, pg runtime 1.680s, speedup 0.798x
05, opt runtime 2.262s, model runtime 5.495s, pg runtime 3.549s, speedup 0.646x
06, opt runtime 0.756s, model runtime 0.883s, pg runtime 0.802s, speedup 0.908x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 49.329s, pg runtime 13.945s, speedup 0.283x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 2.238s, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
16, opt runtime 0.441s, model runtime 0.441s, pg runtime 0.453s, speedup 1.028x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.087s, pg runtime 0.089s, speedup 1.024x
21, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
22, opt runtime 0.093s, model runtime 0.322s, pg runtime 2.389s, speedup 7.421x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.239s, pg runtime 0.239s, speedup 1.000x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.167s, pg runtime 0.158s, speedup 0.947x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 5.959s, pg runtime 6.444s, speedup 1.081x
33, opt runtime 2.755s, model runtime 2.923s, pg runtime 5.521s, speedup 1.889x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 180.921s, pg runtime 148.707s, speedup 0.822x
16, opt runtime 53.440s, model runtime 165.749s, pg runtime 140.742s, speedup 0.849x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.122s, pg runtime 7.799s, speedup 1.095x
28, opt runtime 7.199s, model runtime 7.919s, pg runtime 7.619s, speedup 0.962x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 43.993s, pg runtime 75.984s, speedup 1.727x
34, opt runtime 39.191s, model runtime 43.993s, pg runtime 75.984s, speedup 1.727x
35, opt runtime 18.690s, model runtime 25.079s, pg runtime 651.942s, speedup 25.995x
36, opt runtime 16.280s, model runtime 23.060s, pg runtime 634.990s, speedup 27.537x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.419s, pg runtime 7.675s, speedup 1.035x
28, opt runtime 7.312s, model runtime 7.312s, pg runtime 7.655s, speedup 1.047x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
34, opt runtime 41.237s, model runtime 44.750s, pg runtime 78.181s, speedup 1.747x
35, opt runtime 16.301s, model runtime 23.129s, pg runtime 646.719s, speedup 27.961x
36, opt runtime 16.482s, model runtime 22.575s, pg runtime 622.915s, speedup 27.593x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 44, train speedup 5.179, test speedup 1.282, val speedup 5.308
TPCH best validation speedup epoch: 44, train speedup 5.179, test speedup 4.029, val speedup 5.308
TPCH Skew best validation speedup epoch: 44, train speedup 5.179, test speedup 3.979, val speedup 5.308
execution cost 0:02:59.860177
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.131728, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.7538343289323024
TPCH test speedup 3.1501199199362073
TPCH skew test speedup 2.9465946739546878
Epoch 3/300 |loss: 0.007703| train set 2.620x speedup, test set 2.947x speedup, val set 3.125x speedup, step: 4
JOB test speedup 1.9301180963213382
TPCH test speedup 4.089132122033244
TPCH skew test speedup 3.9124835460649194
Epoch 4/300 |loss: 0.006311| train set 4.464x speedup, test set 3.912x speedup, val set 4.359x speedup, step: 1
JOB test speedup 1.5653363332249348
TPCH test speedup 4.0781895602624845
TPCH skew test speedup 3.9131267023901457
Epoch 5/300 |loss: 0.007926| train set 3.496x speedup, test set 3.913x speedup, val set 3.755x speedup, step: 2
JOB test speedup 1.8161203261030092
TPCH test speedup 4.147830036018565
TPCH skew test speedup 3.9825655304556133
Epoch 6/300 |loss: 0.005278| train set 4.520x speedup, test set 3.983x speedup, val set 4.801x speedup, step: 3
JOB test speedup 2.018449928011055
TPCH test speedup 3.75506591541279
TPCH skew test speedup 3.3012739164570304
Epoch 7/300 |loss: 0.004668| train set 3.233x speedup, test set 3.301x speedup, val set 3.552x speedup, step: 4
JOB test speedup 1.776581511070131
TPCH test speedup 4.208395435212925
TPCH skew test speedup 3.917185705909588
Epoch 8/300 |loss: 0.005043| train set 4.906x speedup, test set 3.917x speedup, val set 5.206x speedup, step: 5
JOB test speedup 1.6226456371628983
TPCH test speedup 4.302145261798199
TPCH skew test speedup 4.007512684184639
Epoch 9/300 |loss: 0.004469| train set 4.837x speedup, test set 4.008x speedup, val set 5.299x speedup, step: 1
JOB test speedup 1.750007943085453
TPCH test speedup 3.5937372657511797
TPCH skew test speedup 3.385874213583444
Epoch 10/300 |loss: 0.004309| train set 3.753x speedup, test set 3.386x speedup, val set 4.026x speedup, step: 2
JOB test speedup 1.844614599114446
TPCH test speedup 4.199934421818234
TPCH skew test speedup 3.905762455090974
Epoch 11/300 |loss: 0.003723| train set 5.016x speedup, test set 3.906x speedup, val set 5.175x speedup, step: 3
JOB test speedup 1.734012799421711
TPCH test speedup 4.278439992988357
TPCH skew test speedup 3.954677433336213
Epoch 12/300 |loss: 0.003616| train set 4.911x speedup, test set 3.955x speedup, val set 5.246x speedup, step: 4
JOB test speedup 2.0042701185621796
TPCH test speedup 4.345501755406487
TPCH skew test speedup 4.010248059546349
Epoch 13/300 |loss: 0.002885| train set 5.184x speedup, test set 4.010x speedup, val set 5.481x speedup, step: 5
JOB test speedup 1.9325070441774075
TPCH test speedup 3.8433884346520015
TPCH skew test speedup 3.6018347310818695
Epoch 14/300 |loss: 0.002998| train set 5.025x speedup, test set 3.602x speedup, val set 5.067x speedup, step: 6
JOB test speedup 1.7431263742513423
TPCH test speedup 3.5978993578911385
TPCH skew test speedup 3.299630906080796
Epoch 15/300 |loss: 0.002931| train set 3.941x speedup, test set 3.300x speedup, val set 4.121x speedup, step: 7
JOB test speedup 1.8507534248626933
TPCH test speedup 4.3149797756862105
TPCH skew test speedup 4.019590203895545
Epoch 16/300 |loss: 0.002731| train set 5.084x speedup, test set 4.020x speedup, val set 5.303x speedup, step: 8
JOB test speedup 0.9945265945968604
TPCH test speedup 4.3156262131071745
TPCH skew test speedup 3.7538630783729863
Epoch 17/300 |loss: 0.003506| train set 5.173x speedup, test set 3.754x speedup, val set 4.244x speedup, step: 9
JOB test speedup 0.7538805853003402
TPCH test speedup 4.156212220956295
TPCH skew test speedup 3.7194650363705493
Epoch 18/300 |loss: 0.002404| train set 4.961x speedup, test set 3.719x speedup, val set 4.084x speedup, step: 10
JOB test speedup 1.9377653851755796
TPCH test speedup 4.316598777322991
TPCH skew test speedup 3.9941197408975158
Epoch 19/300 |loss: 0.002268| train set 5.114x speedup, test set 3.994x speedup, val set 5.427x speedup, step: 1
JOB test speedup 0.9893130825700209
TPCH test speedup 3.5460083165317444
TPCH skew test speedup 3.190221621878811
Epoch 20/300 |loss: 0.002109| train set 4.260x speedup, test set 3.190x speedup, val set 3.876x speedup, step: 2
JOB test speedup 0.9636014616949085
TPCH test speedup 4.019782880785292
TPCH skew test speedup 3.8273324381233667
Epoch 21/300 |loss: 0.002555| train set 4.551x speedup, test set 3.827x speedup, val set 4.587x speedup, step: 3
JOB test speedup 0.9499030026141124
TPCH test speedup 4.32288963233663
TPCH skew test speedup 3.994507120924564
Epoch 22/300 |loss: 0.002291| train set 5.186x speedup, test set 3.995x speedup, val set 4.882x speedup, step: 4
JOB test speedup 0.939079718625478
TPCH test speedup 4.164541175868455
TPCH skew test speedup 3.95204063026732
Epoch 23/300 |loss: 0.001942| train set 5.181x speedup, test set 3.952x speedup, val set 5.368x speedup, step: 5
JOB test speedup 0.9503988894511994
TPCH test speedup 4.111926597710721
TPCH skew test speedup 3.6888289545676987
Epoch 24/300 |loss: 0.001751| train set 5.163x speedup, test set 3.689x speedup, val set 4.768x speedup, step: 6
JOB test speedup 0.9598012053636963
TPCH test speedup 4.13554609717772
TPCH skew test speedup 3.888681816348764
Epoch 25/300 |loss: 0.001853| train set 5.192x speedup, test set 3.889x speedup, val set 5.279x speedup, step: 7
JOB test speedup 0.8990881520591971
TPCH test speedup 4.181512939263417
TPCH skew test speedup 3.663182517477709
Epoch 26/300 |loss: 0.001686| train set 5.092x speedup, test set 3.663x speedup, val set 4.149x speedup, step: 8
JOB test speedup 0.8466796031925234
TPCH test speedup 4.304009977476539
TPCH skew test speedup 3.784149099187988
Epoch 27/300 |loss: 0.001683| train set 4.845x speedup, test set 3.784x speedup, val set 5.220x speedup, step: 9
JOB test speedup 0.9111820172003088
TPCH test speedup 4.280706467943432
TPCH skew test speedup 3.755797098189945
Epoch 28/300 |loss: 0.001709| train set 5.193x speedup, test set 3.756x speedup, val set 5.302x speedup, step: 10
JOB test speedup 0.9188722428983592
TPCH test speedup 4.195929893219947
TPCH skew test speedup 3.670740369159155
Epoch 29/300 |loss: 0.001557| train set 5.143x speedup, test set 3.671x speedup, val set 4.491x speedup, step: 11
JOB test speedup 0.9328402257508117
TPCH test speedup 4.140251036179831
TPCH skew test speedup 3.8949082585122925
Epoch 30/300 |loss: 0.001583| train set 5.200x speedup, test set 3.895x speedup, val set 5.422x speedup, step: 12
JOB test speedup 0.9208477302113548
TPCH test speedup 4.1944142791644365
TPCH skew test speedup 3.6702370472184453
Epoch 31/300 |loss: 0.001448| train set 5.147x speedup, test set 3.670x speedup, val set 5.278x speedup, step: 13
JOB test speedup 0.9172515165883611
TPCH test speedup 4.203062551506117
TPCH skew test speedup 3.9200705541174723
Epoch 32/300 |loss: 0.001477| train set 5.167x speedup, test set 3.920x speedup, val set 5.338x speedup, step: 14
JOB test speedup 0.9286565842609844
TPCH test speedup 4.024772967619367
TPCH skew test speedup 3.8209632250768975
Epoch 33/300 |loss: 0.001574| train set 5.198x speedup, test set 3.821x speedup, val set 4.598x speedup, step: 15
JOB test speedup 0.9271631292933713
TPCH test speedup 4.002747399958212
TPCH skew test speedup 3.7938673903891917
Epoch 34/300 |loss: 0.001366| train set 5.184x speedup, test set 3.794x speedup, val set 5.010x speedup, step: 16
JOB test speedup 0.9278254536400917
TPCH test speedup 4.033261383919821
TPCH skew test speedup 3.627819065596295
Epoch 35/300 |loss: 0.001385| train set 5.197x speedup, test set 3.628x speedup, val set 4.941x speedup, step: 17
JOB test speedup 0.9137537697432421
TPCH test speedup 4.035762561800426
TPCH skew test speedup 3.6127049559701314
Epoch 36/300 |loss: 0.001345| train set 5.182x speedup, test set 3.613x speedup, val set 5.031x speedup, step: 18
JOB test speedup 0.9057237504475397
TPCH test speedup 4.042679345427771
TPCH skew test speedup 3.809602552674847
Epoch 37/300 |loss: 0.001276| train set 5.192x speedup, test set 3.810x speedup, val set 5.117x speedup, step: 19
JOB test speedup 0.9308707931128982
TPCH test speedup 4.11623079949864
TPCH skew test speedup 3.889270916788129
Epoch 38/300 |loss: 0.001360| train set 5.141x speedup, test set 3.889x speedup, val set 5.108x speedup, step: 20
JOB test speedup 0.9124646744654243
TPCH test speedup 4.072837593092466
TPCH skew test speedup 3.8426418375242615
Epoch 39/300 |loss: 0.001258| train set 5.175x speedup, test set 3.843x speedup, val set 4.928x speedup, step: 21
JOB test speedup 0.9331771730014926
TPCH test speedup 4.138735172715161
TPCH skew test speedup 3.8941863666590346
Epoch 40/300 |loss: 0.001092| train set 5.187x speedup, test set 3.894x speedup, val set 4.090x speedup, step: 22
JOB test speedup 0.9161536090644435
TPCH test speedup 4.144831943420733
TPCH skew test speedup 3.906569972002514
Epoch 41/300 |loss: 0.001168| train set 5.164x speedup, test set 3.907x speedup, val set 5.167x speedup, step: 23
JOB test speedup 0.919228442619731
TPCH test speedup 4.041810471486511
TPCH skew test speedup 3.601925079092126
Epoch 42/300 |loss: 0.001257| train set 5.079x speedup, test set 3.602x speedup, val set 5.386x speedup, step: 24
JOB test speedup 0.9243129056602586
TPCH test speedup 4.0554008096462395
TPCH skew test speedup 3.588353706989968
Epoch 43/300 |loss: 0.001241| train set 5.196x speedup, test set 3.588x speedup, val set 5.091x speedup, step: 25
JOB test speedup 0.925912772499038
TPCH test speedup 4.035620318458122
TPCH skew test speedup 3.6343712119812595
Epoch 44/300 |loss: 0.001239| train set 5.173x speedup, test set 3.634x speedup, val set 3.926x speedup, step: 26
JOB test speedup 0.9279744782869116
TPCH test speedup 4.057941840683894
TPCH skew test speedup 3.825076289532821
Epoch 45/300 |loss: 0.001001| train set 5.189x speedup, test set 3.825x speedup, val set 5.167x speedup, step: 27
JOB test speedup 0.8710709653568799
TPCH test speedup 4.115733525066898
TPCH skew test speedup 3.8877590246760745
Epoch 46/300 |loss: 0.001036| train set 5.155x speedup, test set 3.888x speedup, val set 5.100x speedup, step: 28
JOB test speedup 0.8987074982149963
TPCH test speedup 4.103039773168829
TPCH skew test speedup 3.8802750506357744
Epoch 47/300 |loss: 0.001046| train set 5.178x speedup, test set 3.880x speedup, val set 5.228x speedup, step: 29
JOB test speedup 0.9156937451718361
TPCH test speedup 4.0480342821674355
TPCH skew test speedup 3.6248778114187976
Epoch 48/300 |loss: 0.000960| train set 5.190x speedup, test set 3.625x speedup, val set 5.065x speedup, step: 30
JOB test speedup 0.9341547033651165
TPCH test speedup 4.069865661925751
TPCH skew test speedup 3.8404704358925805
Epoch 49/300 |loss: 0.001212| train set 5.066x speedup, test set 3.840x speedup, val set 5.075x speedup, step: 31
JOB test speedup 0.9379542367717063
TPCH test speedup 4.144800524889378
TPCH skew test speedup 3.909335972867259
Epoch 50/300 |loss: 0.001096| train set 5.053x speedup, test set 3.909x speedup, val set 5.178x speedup, step: 32
JOB test speedup 0.9265214220125538
TPCH test speedup 4.088371872185999
TPCH skew test speedup 3.8323209594093894
Epoch 51/300 |loss: 0.000921| train set 5.103x speedup, test set 3.832x speedup, val set 5.053x speedup, step: 33
JOB test speedup 0.9437518519802741
TPCH test speedup 4.133972552126438
TPCH skew test speedup 3.90811296984825
Epoch 52/300 |loss: 0.000881| train set 5.158x speedup, test set 3.908x speedup, val set 4.669x speedup, step: 34
JOB test speedup 0.915842061192882
TPCH test speedup 4.184967816179826
TPCH skew test speedup 3.9462222196233636
Epoch 53/300 |loss: 0.000921| train set 5.197x speedup, test set 3.946x speedup, val set 5.240x speedup, step: 35
JOB test speedup 0.9325069136269413
TPCH test speedup 4.111433807828944
TPCH skew test speedup 3.867818269035597
Epoch 54/300 |loss: 0.000868| train set 5.169x speedup, test set 3.868x speedup, val set 5.147x speedup, step: 36
JOB test speedup 0.8633596077855772
TPCH test speedup 4.147635731093516
TPCH skew test speedup 3.9123003174377193
Epoch 55/300 |loss: 0.001006| train set 5.195x speedup, test set 3.912x speedup, val set 5.175x speedup, step: 37
JOB test speedup 0.8350221074840136
TPCH test speedup 4.006539449661077
TPCH skew test speedup 3.776896443643249
Epoch 56/300 |loss: 0.001024| train set 5.164x speedup, test set 3.777x speedup, val set 5.016x speedup, step: 38
JOB test speedup 0.8734145476029312
TPCH test speedup 4.182077886247406
TPCH skew test speedup 3.8950819201787947
Epoch 57/300 |loss: 0.000957| train set 5.190x speedup, test set 3.895x speedup, val set 5.177x speedup, step: 39
JOB test speedup 0.9345084431913601
TPCH test speedup 3.547953396099325
TPCH skew test speedup 3.365073337913616
Epoch 58/300 |loss: 0.000899| train set 5.158x speedup, test set 3.365x speedup, val set 4.014x speedup, step: 40
JOB test speedup 0.912730362955583
TPCH test speedup 4.1337570592722965
TPCH skew test speedup 3.8562801723139986
Epoch 59/300 |loss: 0.000985| train set 5.157x speedup, test set 3.856x speedup, val set 5.211x speedup, step: 41
JOB test speedup 0.9141983617266125
TPCH test speedup 4.1869747518687985
TPCH skew test speedup 3.8968893647803333
Epoch 60/300 |loss: 0.000923| train set 5.166x speedup, test set 3.897x speedup, val set 4.205x speedup, step: 42
early stopping at epoch 60
Training per epoch cost 2.343 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 2.415s, pg runtime 5.855s, speedup 2.425x
03, opt runtime 0.207s, model runtime 0.678s, pg runtime 0.207s, speedup 0.305x
04, opt runtime 0.920s, model runtime 1.675s, pg runtime 1.680s, speedup 1.003x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 4.238s, pg runtime 0.942s, speedup 0.222x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
12, opt runtime 0.517s, model runtime 0.954s, pg runtime 0.738s, speedup 0.774x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.271s, pg runtime 2.718s, speedup 1.197x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.418s, pg runtime 0.354s, speedup 0.847x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.064s, model runtime 0.397s, pg runtime 0.089s, speedup 0.225x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.322s, pg runtime 2.389s, speedup 7.421x
23, opt runtime 0.389s, model runtime 0.421s, pg runtime 0.389s, speedup 0.924x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.158s, pg runtime 0.158s, speedup 1.000x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.457s, pg runtime 1.438s, speedup 0.987x
20, opt runtime 1.428s, model runtime 1.528s, pg runtime 1.428s, speedup 0.934x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 10.621s, pg runtime 32.969s, speedup 3.104x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.244s, pg runtime 1.206s, speedup 0.970x
40, opt runtime 1.086s, model runtime 1.160s, pg runtime 1.181s, speedup 1.018x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.308s, model runtime 1.377s, pg runtime 1.528s, speedup 1.110x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.239s, pg runtime 1.161s, speedup 0.938x
40, opt runtime 1.020s, model runtime 1.161s, pg runtime 1.125s, speedup 0.969x
====================
JOB best validation speedup epoch: 19, train speedup 5.114, test speedup 1.938, val speedup 5.427
TPCH best validation speedup epoch: 19, train speedup 5.114, test speedup 4.317, val speedup 5.427
TPCH Skew best validation speedup epoch: 19, train speedup 5.114, test speedup 3.994, val speedup 5.427
execution cost 0:03:26.095381
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.125431, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.7240135627018456
TPCH test speedup 3.4364693610738257
TPCH skew test speedup 3.0329988767864067
Epoch 3/300 |loss: 0.007711| train set 2.672x speedup, test set 3.033x speedup, val set 2.832x speedup, step: 4
JOB test speedup 1.955963867127444
TPCH test speedup 4.076346203778694
TPCH skew test speedup 3.8893974062326477
Epoch 4/300 |loss: 0.006294| train set 4.177x speedup, test set 3.889x speedup, val set 4.518x speedup, step: 1
JOB test speedup 1.674821991461493
TPCH test speedup 4.013983888610171
TPCH skew test speedup 3.7594291544674507
Epoch 5/300 |loss: 0.007855| train set 3.263x speedup, test set 3.759x speedup, val set 3.410x speedup, step: 2
JOB test speedup 1.8916037716792575
TPCH test speedup 4.126626063039543
TPCH skew test speedup 3.9215662020545747
Epoch 6/300 |loss: 0.005347| train set 4.669x speedup, test set 3.922x speedup, val set 4.996x speedup, step: 3
JOB test speedup 2.0149889551734335
TPCH test speedup 3.75465583146354
TPCH skew test speedup 3.299740196417084
Epoch 7/300 |loss: 0.004634| train set 3.227x speedup, test set 3.300x speedup, val set 3.537x speedup, step: 4
JOB test speedup 1.5570724716799014
TPCH test speedup 4.303173397559242
TPCH skew test speedup 4.008146513009244
Epoch 8/300 |loss: 0.005092| train set 4.904x speedup, test set 4.008x speedup, val set 5.247x speedup, step: 5
JOB test speedup 2.005346387172395
TPCH test speedup 4.046515283507747
TPCH skew test speedup 3.763629372823069
Epoch 9/300 |loss: 0.004294| train set 4.965x speedup, test set 3.764x speedup, val set 4.975x speedup, step: 1
JOB test speedup 1.8684491638320826
TPCH test speedup 3.858626816547049
TPCH skew test speedup 3.670857817338261
Epoch 10/300 |loss: 0.004157| train set 3.976x speedup, test set 3.671x speedup, val set 4.572x speedup, step: 2
JOB test speedup 1.872215658345067
TPCH test speedup 3.828292513394203
TPCH skew test speedup 3.5854112260828717
Epoch 11/300 |loss: 0.003571| train set 5.002x speedup, test set 3.585x speedup, val set 5.222x speedup, step: 3
JOB test speedup 1.1642933222466494
TPCH test speedup 4.292546903384466
TPCH skew test speedup 3.977000236121023
Epoch 12/300 |loss: 0.003329| train set 4.845x speedup, test set 3.977x speedup, val set 4.705x speedup, step: 4
JOB test speedup 1.727373690215668
TPCH test speedup 4.378209483100609
TPCH skew test speedup 4.056083701794681
Epoch 13/300 |loss: 0.002694| train set 5.154x speedup, test set 4.056x speedup, val set 5.482x speedup, step: 5
JOB test speedup 1.836657728820463
TPCH test speedup 4.191444169035576
TPCH skew test speedup 3.8844031031153126
Epoch 14/300 |loss: 0.002921| train set 4.929x speedup, test set 3.884x speedup, val set 4.952x speedup, step: 6
JOB test speedup 1.7199012372786582
TPCH test speedup 3.5978993578911385
TPCH skew test speedup 3.299630906080796
Epoch 15/300 |loss: 0.002883| train set 3.585x speedup, test set 3.300x speedup, val set 3.789x speedup, step: 7
JOB test speedup 0.7368823659812845
TPCH test speedup 4.274675802558737
TPCH skew test speedup 3.9861295870737754
Epoch 16/300 |loss: 0.002659| train set 4.948x speedup, test set 3.986x speedup, val set 5.327x speedup, step: 8
JOB test speedup 0.9670379716423727
TPCH test speedup 4.277724532372606
TPCH skew test speedup 3.9874786887821116
Epoch 17/300 |loss: 0.003333| train set 5.188x speedup, test set 3.987x speedup, val set 5.363x speedup, step: 9
JOB test speedup 0.7497678159689846
TPCH test speedup 3.622743393415589
TPCH skew test speedup 3.4136951140361993
Epoch 18/300 |loss: 0.002353| train set 4.973x speedup, test set 3.414x speedup, val set 5.286x speedup, step: 10
JOB test speedup 0.9526004991168492
TPCH test speedup 4.311519422589934
TPCH skew test speedup 3.9874471540477945
Epoch 19/300 |loss: 0.002211| train set 5.110x speedup, test set 3.987x speedup, val set 5.403x speedup, step: 1
JOB test speedup 0.9827572200919203
TPCH test speedup 3.4275757813855248
TPCH skew test speedup 3.276519062792749
Epoch 20/300 |loss: 0.002076| train set 4.176x speedup, test set 3.277x speedup, val set 3.751x speedup, step: 2
JOB test speedup 0.9921389576797277
TPCH test speedup 4.059756944331492
TPCH skew test speedup 3.823047126452998
Epoch 21/300 |loss: 0.002337| train set 4.688x speedup, test set 3.823x speedup, val set 4.788x speedup, step: 3
JOB test speedup 0.9374579132600942
TPCH test speedup 3.7158880914311685
TPCH skew test speedup 3.5207391833242947
Epoch 22/300 |loss: 0.002209| train set 5.085x speedup, test set 3.521x speedup, val set 3.770x speedup, step: 4
JOB test speedup 0.9521247165982215
TPCH test speedup 4.27550042723334
TPCH skew test speedup 3.9870476809275406
Epoch 23/300 |loss: 0.001848| train set 5.092x speedup, test set 3.987x speedup, val set 5.284x speedup, step: 5
JOB test speedup 0.9713116997765772
TPCH test speedup 4.199969643457827
TPCH skew test speedup 3.68971835886355
Epoch 24/300 |loss: 0.001731| train set 5.166x speedup, test set 3.690x speedup, val set 4.792x speedup, step: 6
JOB test speedup 0.9584673611758106
TPCH test speedup 4.072450720132998
TPCH skew test speedup 3.8249930671795833
Epoch 25/300 |loss: 0.001833| train set 5.177x speedup, test set 3.825x speedup, val set 4.817x speedup, step: 7
JOB test speedup 0.9332641782619443
TPCH test speedup 4.006271884794991
TPCH skew test speedup 3.574868639231673
Epoch 26/300 |loss: 0.001584| train set 4.902x speedup, test set 3.575x speedup, val set 4.930x speedup, step: 8
JOB test speedup 0.9256618172608593
TPCH test speedup 4.083454534307031
TPCH skew test speedup 3.857688880542831
Epoch 27/300 |loss: 0.001637| train set 5.046x speedup, test set 3.858x speedup, val set 5.438x speedup, step: 9
JOB test speedup 0.9518227423163902
TPCH test speedup 4.073123349489498
TPCH skew test speedup 3.616723766912632
Epoch 28/300 |loss: 0.001603| train set 5.174x speedup, test set 3.617x speedup, val set 5.276x speedup, step: 10
JOB test speedup 0.9293541987143134
TPCH test speedup 4.135969380980768
TPCH skew test speedup 3.8730488980748223
Epoch 29/300 |loss: 0.001470| train set 5.051x speedup, test set 3.873x speedup, val set 4.625x speedup, step: 11
JOB test speedup 0.9603876307612855
TPCH test speedup 3.9175673853815227
TPCH skew test speedup 3.539251177040296
Epoch 30/300 |loss: 0.001484| train set 5.198x speedup, test set 3.539x speedup, val set 4.480x speedup, step: 12
JOB test speedup 0.9316585285664227
TPCH test speedup 4.07546330629118
TPCH skew test speedup 3.8219005438398295
Epoch 31/300 |loss: 0.001404| train set 5.178x speedup, test set 3.822x speedup, val set 5.189x speedup, step: 13
JOB test speedup 0.9411652230790188
TPCH test speedup 4.088544469016788
TPCH skew test speedup 3.823141549399361
Epoch 32/300 |loss: 0.001429| train set 5.173x speedup, test set 3.823x speedup, val set 4.666x speedup, step: 14
JOB test speedup 0.9314968491012484
TPCH test speedup 4.068412602026835
TPCH skew test speedup 3.799847316234209
Epoch 33/300 |loss: 0.001493| train set 5.190x speedup, test set 3.800x speedup, val set 4.889x speedup, step: 15
JOB test speedup 0.953733518422044
TPCH test speedup 4.2269011675497685
TPCH skew test speedup 3.918729742438262
Epoch 34/300 |loss: 0.001265| train set 5.187x speedup, test set 3.919x speedup, val set 4.881x speedup, step: 16
JOB test speedup 0.9510026623344572
TPCH test speedup 4.100569165886156
TPCH skew test speedup 3.6134362135980926
Epoch 35/300 |loss: 0.001267| train set 5.084x speedup, test set 3.613x speedup, val set 4.882x speedup, step: 17
JOB test speedup 0.916467208941724
TPCH test speedup 4.060821934598791
TPCH skew test speedup 3.5912473598842203
Epoch 36/300 |loss: 0.001204| train set 5.181x speedup, test set 3.591x speedup, val set 5.154x speedup, step: 18
JOB test speedup 0.9523569497692521
TPCH test speedup 4.132098713154816
TPCH skew test speedup 3.8609028662670313
Epoch 37/300 |loss: 0.001266| train set 5.115x speedup, test set 3.861x speedup, val set 4.427x speedup, step: 19
JOB test speedup 0.9248821550489507
TPCH test speedup 3.962860231618296
TPCH skew test speedup 3.7575186032931596
Epoch 38/300 |loss: 0.001225| train set 5.185x speedup, test set 3.758x speedup, val set 5.037x speedup, step: 20
JOB test speedup 0.9213190646184984
TPCH test speedup 4.218231354566006
TPCH skew test speedup 3.6926876212021944
Epoch 39/300 |loss: 0.001300| train set 5.099x speedup, test set 3.693x speedup, val set 4.809x speedup, step: 21
JOB test speedup 0.9329921351275141
TPCH test speedup 4.070697530514904
TPCH skew test speedup 3.8023495711276234
Epoch 40/300 |loss: 0.001047| train set 5.183x speedup, test set 3.802x speedup, val set 4.815x speedup, step: 22
JOB test speedup 0.9398430953913541
TPCH test speedup 4.089184080499185
TPCH skew test speedup 3.824422375472553
Epoch 41/300 |loss: 0.001029| train set 5.105x speedup, test set 3.824x speedup, val set 5.208x speedup, step: 23
JOB test speedup 0.9175526112567175
TPCH test speedup 4.1161981726526005
TPCH skew test speedup 3.8778907872634933
Epoch 42/300 |loss: 0.001225| train set 5.089x speedup, test set 3.878x speedup, val set 5.208x speedup, step: 24
JOB test speedup 0.8700814286938475
TPCH test speedup 4.085086065197789
TPCH skew test speedup 3.633540120124053
Epoch 43/300 |loss: 0.001093| train set 5.175x speedup, test set 3.634x speedup, val set 4.730x speedup, step: 25
JOB test speedup 0.9506955809757099
TPCH test speedup 4.088901424304763
TPCH skew test speedup 3.606740603210236
Epoch 44/300 |loss: 0.001050| train set 5.187x speedup, test set 3.607x speedup, val set 4.659x speedup, step: 26
JOB test speedup 0.9370684483287771
TPCH test speedup 3.9847899303441574
TPCH skew test speedup 3.7601148127098485
Epoch 45/300 |loss: 0.000882| train set 5.193x speedup, test set 3.760x speedup, val set 5.119x speedup, step: 27
JOB test speedup 0.9366551704951773
TPCH test speedup 4.072573229820998
TPCH skew test speedup 3.8067645274396007
Epoch 46/300 |loss: 0.000971| train set 5.193x speedup, test set 3.807x speedup, val set 5.358x speedup, step: 28
JOB test speedup 0.9316760477470195
TPCH test speedup 4.066098698169024
TPCH skew test speedup 3.807009941615143
Epoch 47/300 |loss: 0.000838| train set 5.196x speedup, test set 3.807x speedup, val set 5.080x speedup, step: 29
JOB test speedup 0.9281255886752019
TPCH test speedup 4.077247142133365
TPCH skew test speedup 3.625673699150474
Epoch 48/300 |loss: 0.000779| train set 5.117x speedup, test set 3.626x speedup, val set 5.084x speedup, step: 30
JOB test speedup 0.9523434067547559
TPCH test speedup 4.168601440052929
TPCH skew test speedup 3.8699353980334674
Epoch 49/300 |loss: 0.001025| train set 5.169x speedup, test set 3.870x speedup, val set 5.252x speedup, step: 31
JOB test speedup 0.9287045784432522
TPCH test speedup 4.093007245288478
TPCH skew test speedup 3.826022157214312
Epoch 50/300 |loss: 0.000948| train set 5.196x speedup, test set 3.826x speedup, val set 5.416x speedup, step: 32
JOB test speedup 0.9513429177910213
TPCH test speedup 3.9250793420625425
TPCH skew test speedup 3.4915126655853914
Epoch 51/300 |loss: 0.000874| train set 5.197x speedup, test set 3.492x speedup, val set 5.073x speedup, step: 33
JOB test speedup 0.9250060633774616
TPCH test speedup 4.093335305737623
TPCH skew test speedup 3.816902810936843
Epoch 52/300 |loss: 0.000773| train set 5.085x speedup, test set 3.817x speedup, val set 4.908x speedup, step: 34
JOB test speedup 0.9421711797027734
TPCH test speedup 4.1225642871571555
TPCH skew test speedup 3.8526509703086558
Epoch 53/300 |loss: 0.000835| train set 5.193x speedup, test set 3.853x speedup, val set 5.172x speedup, step: 35
JOB test speedup 0.9246727704181409
TPCH test speedup 3.981700569350682
TPCH skew test speedup 3.5347207644818086
Epoch 54/300 |loss: 0.000787| train set 5.193x speedup, test set 3.535x speedup, val set 4.815x speedup, step: 36
JOB test speedup 0.9358268809663963
TPCH test speedup 3.9512607763733785
TPCH skew test speedup 3.547253803153068
Epoch 55/300 |loss: 0.000916| train set 5.186x speedup, test set 3.547x speedup, val set 5.295x speedup, step: 37
JOB test speedup 0.9362649970978992
TPCH test speedup 4.079791658668447
TPCH skew test speedup 3.828611073968945
Epoch 56/300 |loss: 0.000817| train set 5.187x speedup, test set 3.829x speedup, val set 5.117x speedup, step: 38
JOB test speedup 0.9381029001584998
TPCH test speedup 4.014884609630715
TPCH skew test speedup 3.7564383622031268
Epoch 57/300 |loss: 0.000877| train set 5.098x speedup, test set 3.756x speedup, val set 4.839x speedup, step: 39
early stopping at epoch 57
Training per epoch cost 2.356 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.678s, pg runtime 0.207s, speedup 0.305x
04, opt runtime 0.920s, model runtime 1.675s, pg runtime 1.680s, speedup 1.003x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.204s, pg runtime 0.153s, speedup 0.750x
15, opt runtime 2.238s, model runtime 2.271s, pg runtime 2.718s, speedup 1.197x
16, opt runtime 0.441s, model runtime 0.453s, pg runtime 0.453s, speedup 1.000x
17, opt runtime 0.327s, model runtime 0.418s, pg runtime 0.354s, speedup 0.847x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.064s, model runtime 0.397s, pg runtime 0.089s, speedup 0.225x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 3.535s, pg runtime 3.112s, speedup 0.880x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.158s, pg runtime 0.158s, speedup 1.000x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.457s, pg runtime 1.438s, speedup 0.987x
20, opt runtime 1.428s, model runtime 1.528s, pg runtime 1.428s, speedup 0.934x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 10.621s, pg runtime 32.969s, speedup 3.104x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.642s, model runtime 2.195s, pg runtime 1.752s, speedup 0.798x
26, opt runtime 1.423s, model runtime 1.495s, pg runtime 1.423s, speedup 0.951x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
30, opt runtime 5.539s, model runtime 5.690s, pg runtime 5.539s, speedup 0.973x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.403s, pg runtime 1.587s, speedup 1.131x
20, opt runtime 1.308s, model runtime 1.377s, pg runtime 1.528s, speedup 1.110x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.433s, model runtime 1.911s, pg runtime 1.433s, speedup 0.750x
26, opt runtime 1.420s, model runtime 1.837s, pg runtime 1.420s, speedup 0.773x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
30, opt runtime 5.271s, model runtime 5.766s, pg runtime 5.271s, speedup 0.914x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 19, train speedup 5.110, test speedup 0.953, val speedup 5.403
TPCH best validation speedup epoch: 19, train speedup 5.110, test speedup 4.312, val speedup 5.403
TPCH Skew best validation speedup epoch: 19, train speedup 5.110, test speedup 3.987, val speedup 5.403
execution cost 0:03:18.004339
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.132333, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.7242890650429363
TPCH test speedup 3.4364693610738257
TPCH skew test speedup 3.0329988767864067
Epoch 3/300 |loss: 0.007709| train set 2.672x speedup, test set 3.033x speedup, val set 2.819x speedup, step: 4
JOB test speedup 1.9040403528700578
TPCH test speedup 4.125172570977311
TPCH skew test speedup 3.936599982403671
Epoch 4/300 |loss: 0.006285| train set 4.477x speedup, test set 3.937x speedup, val set 4.418x speedup, step: 1
JOB test speedup 1.5910414170703018
TPCH test speedup 3.891543685307827
TPCH skew test speedup 3.7222744446325775
Epoch 5/300 |loss: 0.008125| train set 3.086x speedup, test set 3.722x speedup, val set 3.310x speedup, step: 2
JOB test speedup 1.8310988480110624
TPCH test speedup 4.158960529372654
TPCH skew test speedup 3.996361387629898
Epoch 6/300 |loss: 0.005295| train set 3.653x speedup, test set 3.996x speedup, val set 4.831x speedup, step: 3
JOB test speedup 1.8411523159276875
TPCH test speedup 3.913179628025705
TPCH skew test speedup 3.5414139497560755
Epoch 7/300 |loss: 0.004670| train set 3.363x speedup, test set 3.541x speedup, val set 3.557x speedup, step: 4
JOB test speedup 1.7948876155150537
TPCH test speedup 4.303173397559242
TPCH skew test speedup 4.008146513009244
Epoch 8/300 |loss: 0.005005| train set 4.897x speedup, test set 4.008x speedup, val set 5.158x speedup, step: 5
JOB test speedup 1.9088248378315167
TPCH test speedup 4.350633049110948
TPCH skew test speedup 4.083263568518592
Epoch 9/300 |loss: 0.004327| train set 4.863x speedup, test set 4.083x speedup, val set 4.986x speedup, step: 1
JOB test speedup 1.873701745110076
TPCH test speedup 3.8380192213691235
TPCH skew test speedup 3.5991307081842505
Epoch 10/300 |loss: 0.004220| train set 4.331x speedup, test set 3.599x speedup, val set 5.286x speedup, step: 2
JOB test speedup 1.4858309714604667
TPCH test speedup 4.05839675951347
TPCH skew test speedup 3.8481274107238663
Epoch 11/300 |loss: 0.003762| train set 4.921x speedup, test set 3.848x speedup, val set 4.907x speedup, step: 3
JOB test speedup 1.8123179219729417
TPCH test speedup 4.340765245647026
TPCH skew test speedup 4.009996614203948
Epoch 12/300 |loss: 0.003601| train set 4.923x speedup, test set 4.010x speedup, val set 5.385x speedup, step: 4
JOB test speedup 1.8060807355175559
TPCH test speedup 4.128367215765974
TPCH skew test speedup 3.8823711366907125
Epoch 13/300 |loss: 0.002884| train set 5.036x speedup, test set 3.882x speedup, val set 4.722x speedup, step: 5
JOB test speedup 1.9911423907029788
TPCH test speedup 4.354989953249139
TPCH skew test speedup 4.054581295561964
Epoch 14/300 |loss: 0.003033| train set 4.928x speedup, test set 4.055x speedup, val set 5.261x speedup, step: 1
JOB test speedup 1.6699949166446857
TPCH test speedup 4.230378576901422
TPCH skew test speedup 3.83146913747137
Epoch 15/300 |loss: 0.003119| train set 3.934x speedup, test set 3.831x speedup, val set 4.252x speedup, step: 2
JOB test speedup 1.2152601837166184
TPCH test speedup 4.105036645924286
TPCH skew test speedup 3.8913630924235454
Epoch 16/300 |loss: 0.002690| train set 5.097x speedup, test set 3.891x speedup, val set 5.261x speedup, step: 3
JOB test speedup 0.9709578661019262
TPCH test speedup 4.263946498932072
TPCH skew test speedup 3.988027240372657
Epoch 17/300 |loss: 0.003483| train set 5.066x speedup, test set 3.988x speedup, val set 4.648x speedup, step: 4
JOB test speedup 0.9719285431688451
TPCH test speedup 4.248317698114288
TPCH skew test speedup 3.7380750403504672
Epoch 18/300 |loss: 0.002441| train set 5.108x speedup, test set 3.738x speedup, val set 4.214x speedup, step: 5
JOB test speedup 1.7445418547100502
TPCH test speedup 4.301604020740292
TPCH skew test speedup 3.990696706022873
Epoch 19/300 |loss: 0.002335| train set 4.922x speedup, test set 3.991x speedup, val set 5.400x speedup, step: 1
JOB test speedup 0.9004931025290943
TPCH test speedup 3.541980710048339
TPCH skew test speedup 3.3460423544931754
Epoch 20/300 |loss: 0.002143| train set 3.721x speedup, test set 3.346x speedup, val set 4.001x speedup, step: 2
JOB test speedup 0.9515896771325094
TPCH test speedup 3.9826049578867697
TPCH skew test speedup 3.584052103204065
Epoch 21/300 |loss: 0.002598| train set 4.694x speedup, test set 3.584x speedup, val set 4.578x speedup, step: 3
JOB test speedup 0.9901975207880044
TPCH test speedup 4.1822721162681535
TPCH skew test speedup 3.5728340143546506
Epoch 22/300 |loss: 0.002347| train set 5.092x speedup, test set 3.573x speedup, val set 5.356x speedup, step: 4
JOB test speedup 0.9787569840329017
TPCH test speedup 4.2810034100554235
TPCH skew test speedup 3.9152813590011566
Epoch 23/300 |loss: 0.001980| train set 5.175x speedup, test set 3.915x speedup, val set 5.392x speedup, step: 5
JOB test speedup 0.9510767029274553
TPCH test speedup 4.185678248616487
TPCH skew test speedup 3.6914853715275493
Epoch 24/300 |loss: 0.001785| train set 5.158x speedup, test set 3.691x speedup, val set 4.787x speedup, step: 6
JOB test speedup 0.9412456556219674
TPCH test speedup 4.070979874150118
TPCH skew test speedup 3.824989150042729
Epoch 25/300 |loss: 0.001912| train set 5.040x speedup, test set 3.825x speedup, val set 5.368x speedup, step: 7
JOB test speedup 0.8811074210224095
TPCH test speedup 4.087071835095612
TPCH skew test speedup 3.640600082745017
Epoch 26/300 |loss: 0.001680| train set 5.095x speedup, test set 3.641x speedup, val set 4.452x speedup, step: 8
JOB test speedup 0.8423753193550596
TPCH test speedup 3.8973624760145595
TPCH skew test speedup 3.711329667031277
Epoch 27/300 |loss: 0.001688| train set 4.946x speedup, test set 3.711x speedup, val set 5.379x speedup, step: 9
JOB test speedup 0.8484128644100943
TPCH test speedup 3.94906726520716
TPCH skew test speedup 3.5766350332957377
Epoch 28/300 |loss: 0.001693| train set 5.173x speedup, test set 3.577x speedup, val set 5.066x speedup, step: 10
JOB test speedup 0.9336916515330348
TPCH test speedup 3.9954990424070815
TPCH skew test speedup 3.7943888615111114
Epoch 29/300 |loss: 0.001512| train set 5.128x speedup, test set 3.794x speedup, val set 4.327x speedup, step: 11
JOB test speedup 0.9564003024549339
TPCH test speedup 4.056601051696915
TPCH skew test speedup 3.5912477571338317
Epoch 30/300 |loss: 0.001566| train set 5.191x speedup, test set 3.591x speedup, val set 4.879x speedup, step: 12
JOB test speedup 0.9142317429515397
TPCH test speedup 3.9196065987407365
TPCH skew test speedup 3.723664817210651
Epoch 31/300 |loss: 0.001438| train set 5.151x speedup, test set 3.724x speedup, val set 4.686x speedup, step: 13
JOB test speedup 0.9123813156589966
TPCH test speedup 4.206039445489481
TPCH skew test speedup 3.930997067216307
Epoch 32/300 |loss: 0.001595| train set 5.165x speedup, test set 3.931x speedup, val set 5.463x speedup, step: 14
JOB test speedup 0.860640144003871
TPCH test speedup 4.094875532661933
TPCH skew test speedup 3.7433828009686954
Epoch 33/300 |loss: 0.001622| train set 5.111x speedup, test set 3.743x speedup, val set 4.772x speedup, step: 15
JOB test speedup 0.9261937181587897
TPCH test speedup 4.055736348391049
TPCH skew test speedup 3.8216536296129737
Epoch 34/300 |loss: 0.001333| train set 5.181x speedup, test set 3.822x speedup, val set 4.615x speedup, step: 16
JOB test speedup 0.9299559605002611
TPCH test speedup 3.996415793097399
TPCH skew test speedup 3.483109835552001
Epoch 35/300 |loss: 0.001319| train set 5.190x speedup, test set 3.483x speedup, val set 4.795x speedup, step: 17
JOB test speedup 0.936030322592397
TPCH test speedup 4.02216720623383
TPCH skew test speedup 3.507630960175531
Epoch 36/300 |loss: 0.001271| train set 5.193x speedup, test set 3.508x speedup, val set 5.284x speedup, step: 18
JOB test speedup 0.9249373589067945
TPCH test speedup 3.9656330230854384
TPCH skew test speedup 3.5291838826124837
Epoch 37/300 |loss: 0.001266| train set 5.196x speedup, test set 3.529x speedup, val set 5.078x speedup, step: 19
JOB test speedup 1.670612091497357
TPCH test speedup 4.110869001600999
TPCH skew test speedup 3.7789317678950143
Epoch 38/300 |loss: 0.001447| train set 5.087x speedup, test set 3.779x speedup, val set 5.244x speedup, step: 20
JOB test speedup 0.9141392610045624
TPCH test speedup 4.092472831369353
TPCH skew test speedup 3.563132461651563
Epoch 39/300 |loss: 0.001271| train set 5.096x speedup, test set 3.563x speedup, val set 4.969x speedup, step: 21
JOB test speedup 0.9294997620048816
TPCH test speedup 4.1044912243925324
TPCH skew test speedup 3.5369197871931224
Epoch 40/300 |loss: 0.001050| train set 5.181x speedup, test set 3.537x speedup, val set 4.806x speedup, step: 22
JOB test speedup 0.9115212376726726
TPCH test speedup 3.9671033291006235
TPCH skew test speedup 3.7710367568460983
Epoch 41/300 |loss: 0.001135| train set 5.072x speedup, test set 3.771x speedup, val set 4.997x speedup, step: 23
JOB test speedup 0.929508340204919
TPCH test speedup 4.032852229229999
TPCH skew test speedup 3.6136891651318384
Epoch 42/300 |loss: 0.001198| train set 5.176x speedup, test set 3.614x speedup, val set 5.010x speedup, step: 24
JOB test speedup 0.9251630217977658
TPCH test speedup 4.139674989198662
TPCH skew test speedup 3.6466298149369964
Epoch 43/300 |loss: 0.001131| train set 5.173x speedup, test set 3.647x speedup, val set 5.104x speedup, step: 25
JOB test speedup 0.924015623053074
TPCH test speedup 4.0571001702514735
TPCH skew test speedup 3.6395476110473557
Epoch 44/300 |loss: 0.001074| train set 5.170x speedup, test set 3.640x speedup, val set 4.619x speedup, step: 26
JOB test speedup 0.9226854402851753
TPCH test speedup 4.040650339367203
TPCH skew test speedup 3.812589561551824
Epoch 45/300 |loss: 0.000866| train set 5.195x speedup, test set 3.813x speedup, val set 4.816x speedup, step: 27
JOB test speedup 0.9142646899313294
TPCH test speedup 4.134113321280023
TPCH skew test speedup 3.8518932942200106
Epoch 46/300 |loss: 0.000980| train set 5.160x speedup, test set 3.852x speedup, val set 5.175x speedup, step: 28
JOB test speedup 0.9381167462292447
TPCH test speedup 4.100376330062744
TPCH skew test speedup 3.8431467791369287
Epoch 47/300 |loss: 0.000871| train set 5.178x speedup, test set 3.843x speedup, val set 5.261x speedup, step: 29
JOB test speedup 0.9185569940829893
TPCH test speedup 4.064619456106877
TPCH skew test speedup 3.63793721828706
Epoch 48/300 |loss: 0.000803| train set 5.195x speedup, test set 3.638x speedup, val set 4.853x speedup, step: 30
JOB test speedup 0.9216944850603882
TPCH test speedup 4.074315281101522
TPCH skew test speedup 3.8441857955649437
Epoch 49/300 |loss: 0.001060| train set 5.151x speedup, test set 3.844x speedup, val set 5.027x speedup, step: 31
JOB test speedup 0.9230947724826886
TPCH test speedup 4.127935162878596
TPCH skew test speedup 3.897592412575289
Epoch 50/300 |loss: 0.001029| train set 5.200x speedup, test set 3.898x speedup, val set 5.462x speedup, step: 32
JOB test speedup 0.9263438400881188
TPCH test speedup 4.170367912084012
TPCH skew test speedup 3.699130102243186
Epoch 51/300 |loss: 0.000849| train set 5.190x speedup, test set 3.699x speedup, val set 4.942x speedup, step: 33
JOB test speedup 1.1068125549773111
TPCH test speedup 4.112412890027404
TPCH skew test speedup 3.8671474601428955
Epoch 52/300 |loss: 0.000760| train set 5.060x speedup, test set 3.867x speedup, val set 4.943x speedup, step: 34
JOB test speedup 0.9422794975734969
TPCH test speedup 4.241972342287737
TPCH skew test speedup 3.9536403948506447
Epoch 53/300 |loss: 0.000780| train set 5.201x speedup, test set 3.954x speedup, val set 5.471x speedup, step: 35
JOB test speedup 0.9501693083294296
TPCH test speedup 4.16405634472029
TPCH skew test speedup 3.6576830462450616
Epoch 54/300 |loss: 0.000774| train set 5.198x speedup, test set 3.658x speedup, val set 5.237x speedup, step: 36
JOB test speedup 0.9392449001353056
TPCH test speedup 4.081276607833746
TPCH skew test speedup 3.879623115276627
Epoch 55/300 |loss: 0.000864| train set 5.196x speedup, test set 3.880x speedup, val set 5.284x speedup, step: 37
JOB test speedup 0.9303825290661645
TPCH test speedup 4.08145205701756
TPCH skew test speedup 3.8031022017856113
Epoch 56/300 |loss: 0.000865| train set 5.093x speedup, test set 3.803x speedup, val set 5.268x speedup, step: 38
JOB test speedup 0.9261593526032577
TPCH test speedup 4.110553235781515
TPCH skew test speedup 3.8969373915878918
Epoch 57/300 |loss: 0.000826| train set 5.194x speedup, test set 3.897x speedup, val set 5.286x speedup, step: 39
early stopping at epoch 57
Training per epoch cost 2.358 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.678s, pg runtime 0.207s, speedup 0.305x
04, opt runtime 0.920s, model runtime 1.675s, pg runtime 1.680s, speedup 1.003x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 4.238s, pg runtime 0.942s, speedup 0.222x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 10.128s, pg runtime 10.605s, speedup 1.047x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.271s, pg runtime 2.718s, speedup 1.197x
16, opt runtime 0.441s, model runtime 0.453s, pg runtime 0.453s, speedup 1.000x
17, opt runtime 0.327s, model runtime 0.349s, pg runtime 0.354s, speedup 1.012x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 2.365s, pg runtime 3.540s, speedup 1.497x
20, opt runtime 0.064s, model runtime 0.397s, pg runtime 0.089s, speedup 0.225x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.093s, pg runtime 2.389s, speedup 25.590x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 10.621s, pg runtime 32.969s, speedup 3.104x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
30, opt runtime 5.539s, model runtime 5.690s, pg runtime 5.539s, speedup 0.973x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.280s, model runtime 18.051s, pg runtime 634.990s, speedup 35.177x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
30, opt runtime 5.271s, model runtime 5.766s, pg runtime 5.271s, speedup 0.914x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.301s, pg runtime 646.719s, speedup 39.673x
36, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 19, train speedup 4.922, test speedup 1.745, val speedup 5.400
TPCH best validation speedup epoch: 19, train speedup 4.922, test speedup 4.302, val speedup 5.400
TPCH Skew best validation speedup epoch: 19, train speedup 4.922, test speedup 3.991, val speedup 5.400
execution cost 0:03:18.066894
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.202491, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.7240135627018456
TPCH test speedup 3.4364693610738257
TPCH skew test speedup 3.0329988767864067
Epoch 3/300 |loss: 0.007710| train set 2.672x speedup, test set 3.033x speedup, val set 2.832x speedup, step: 4
JOB test speedup 1.8217647428391464
TPCH test speedup 4.076346203778694
TPCH skew test speedup 3.8893974062326477
Epoch 4/300 |loss: 0.006284| train set 4.329x speedup, test set 3.889x speedup, val set 4.603x speedup, step: 1
JOB test speedup 1.6249918509003534
TPCH test speedup 3.796779878791645
TPCH skew test speedup 3.6836249439214943
Epoch 5/300 |loss: 0.007866| train set 3.215x speedup, test set 3.684x speedup, val set 3.412x speedup, step: 2
JOB test speedup 1.8915441289160264
TPCH test speedup 4.115077096363724
TPCH skew test speedup 3.922212348209875
Epoch 6/300 |loss: 0.005292| train set 4.608x speedup, test set 3.922x speedup, val set 4.981x speedup, step: 3
JOB test speedup 2.008981996244082
TPCH test speedup 3.6986249608422535
TPCH skew test speedup 3.2539563161985154
Epoch 7/300 |loss: 0.004679| train set 2.972x speedup, test set 3.254x speedup, val set 3.274x speedup, step: 4
JOB test speedup 1.7948876155150537
TPCH test speedup 4.3008195877090225
TPCH skew test speedup 4.003371708965212
Epoch 8/300 |loss: 0.005071| train set 4.747x speedup, test set 4.003x speedup, val set 5.167x speedup, step: 5
JOB test speedup 1.735107510461493
TPCH test speedup 4.00009520010576
TPCH skew test speedup 3.7783746695361304
Epoch 9/300 |loss: 0.004382| train set 4.937x speedup, test set 3.778x speedup, val set 5.268x speedup, step: 1
JOB test speedup 1.8798740137508485
TPCH test speedup 3.6778347817611854
TPCH skew test speedup 3.472740006668752
Epoch 10/300 |loss: 0.004243| train set 4.101x speedup, test set 3.473x speedup, val set 4.369x speedup, step: 2
JOB test speedup 1.7968894855777764
TPCH test speedup 3.890619227396851
TPCH skew test speedup 3.6199757995463298
Epoch 11/300 |loss: 0.003644| train set 5.011x speedup, test set 3.620x speedup, val set 5.177x speedup, step: 3
JOB test speedup 1.849656363920454
TPCH test speedup 4.397490651440473
TPCH skew test speedup 3.8122844566627827
Epoch 12/300 |loss: 0.003555| train set 5.000x speedup, test set 3.812x speedup, val set 5.482x speedup, step: 4
JOB test speedup 1.845002586417675
TPCH test speedup 4.342668359585538
TPCH skew test speedup 4.036345340288808
Epoch 13/300 |loss: 0.002931| train set 5.140x speedup, test set 4.036x speedup, val set 4.722x speedup, step: 5
JOB test speedup 1.92866334742128
TPCH test speedup 4.357925579474328
TPCH skew test speedup 4.0569270347051445
Epoch 14/300 |loss: 0.003089| train set 4.933x speedup, test set 4.057x speedup, val set 5.391x speedup, step: 1
JOB test speedup 1.5114395763735797
TPCH test speedup 3.7585274839513616
TPCH skew test speedup 3.4696246473206345
Epoch 15/300 |loss: 0.002909| train set 3.893x speedup, test set 3.470x speedup, val set 3.679x speedup, step: 2
JOB test speedup 1.2483687274303583
TPCH test speedup 4.312368086325102
TPCH skew test speedup 4.019927828869685
Epoch 16/300 |loss: 0.002672| train set 5.095x speedup, test set 4.020x speedup, val set 5.299x speedup, step: 3
JOB test speedup 1.0016665023214884
TPCH test speedup 3.988163885684215
TPCH skew test speedup 3.827214813865353
Epoch 17/300 |loss: 0.003282| train set 4.697x speedup, test set 3.827x speedup, val set 3.990x speedup, step: 4
JOB test speedup 0.749868040419709
TPCH test speedup 3.6224188909712054
TPCH skew test speedup 3.240292002845153
Epoch 18/300 |loss: 0.002317| train set 4.983x speedup, test set 3.240x speedup, val set 4.145x speedup, step: 5
JOB test speedup 0.964468900967412
TPCH test speedup 3.9981400736324617
TPCH skew test speedup 3.6518001703128293
Epoch 19/300 |loss: 0.002212| train set 5.106x speedup, test set 3.652x speedup, val set 4.778x speedup, step: 6
JOB test speedup 0.9772891303605188
TPCH test speedup 3.426046192391882
TPCH skew test speedup 3.105590528670546
Epoch 20/300 |loss: 0.002010| train set 4.907x speedup, test set 3.106x speedup, val set 4.036x speedup, step: 7
JOB test speedup 0.9553439677339007
TPCH test speedup 3.983848716368314
TPCH skew test speedup 3.8015565265640667
Epoch 21/300 |loss: 0.002484| train set 4.692x speedup, test set 3.802x speedup, val set 4.733x speedup, step: 8
JOB test speedup 0.945047045739639
TPCH test speedup 3.5933389113892003
TPCH skew test speedup 3.1410592972725078
Epoch 22/300 |loss: 0.002286| train set 5.181x speedup, test set 3.141x speedup, val set 4.231x speedup, step: 9
JOB test speedup 0.9942555132035181
TPCH test speedup 4.355759132372115
TPCH skew test speedup 4.055713620276734
Epoch 23/300 |loss: 0.001875| train set 5.187x speedup, test set 4.056x speedup, val set 5.386x speedup, step: 10
JOB test speedup 0.962578594736859
TPCH test speedup 4.224546877427636
TPCH skew test speedup 3.9354316450827604
Epoch 24/300 |loss: 0.001701| train set 5.162x speedup, test set 3.935x speedup, val set 4.893x speedup, step: 11
JOB test speedup 0.928500538173829
TPCH test speedup 4.039701918928663
TPCH skew test speedup 3.801705685537699
Epoch 25/300 |loss: 0.001854| train set 5.121x speedup, test set 3.802x speedup, val set 5.274x speedup, step: 12
JOB test speedup 0.9328414149965096
TPCH test speedup 4.1127380164259595
TPCH skew test speedup 3.8706628986079163
Epoch 26/300 |loss: 0.001633| train set 5.190x speedup, test set 3.871x speedup, val set 4.087x speedup, step: 13
JOB test speedup 0.921809929908828
TPCH test speedup 4.1582401521282
TPCH skew test speedup 3.9414889952729872
Epoch 27/300 |loss: 0.001636| train set 4.963x speedup, test set 3.941x speedup, val set 5.384x speedup, step: 14
JOB test speedup 0.9154156504819033
TPCH test speedup 3.976581496113437
TPCH skew test speedup 3.80637276257346
Epoch 28/300 |loss: 0.001660| train set 5.174x speedup, test set 3.806x speedup, val set 4.756x speedup, step: 15
JOB test speedup 0.9193333630950625
TPCH test speedup 4.024665408881809
TPCH skew test speedup 3.7303515969992023
Epoch 29/300 |loss: 0.001453| train set 5.007x speedup, test set 3.730x speedup, val set 4.584x speedup, step: 16
JOB test speedup 0.949928894557572
TPCH test speedup 4.008878729945943
TPCH skew test speedup 3.7682412432834695
Epoch 30/300 |loss: 0.001456| train set 5.194x speedup, test set 3.768x speedup, val set 4.628x speedup, step: 17
JOB test speedup 0.851799014642423
TPCH test speedup 3.933722751421473
TPCH skew test speedup 3.7360887192163528
Epoch 31/300 |loss: 0.001410| train set 5.144x speedup, test set 3.736x speedup, val set 4.749x speedup, step: 18
JOB test speedup 0.9237586334082788
TPCH test speedup 4.070749458370981
TPCH skew test speedup 3.801484221677896
Epoch 32/300 |loss: 0.001539| train set 5.048x speedup, test set 3.801x speedup, val set 4.842x speedup, step: 19
JOB test speedup 0.9437190371186749
TPCH test speedup 4.0628706085977955
TPCH skew test speedup 3.813797608784275
Epoch 33/300 |loss: 0.001552| train set 5.117x speedup, test set 3.814x speedup, val set 4.698x speedup, step: 20
JOB test speedup 0.9203765652982581
TPCH test speedup 4.049559057729025
TPCH skew test speedup 3.7952569323630163
Epoch 34/300 |loss: 0.001338| train set 5.181x speedup, test set 3.795x speedup, val set 4.156x speedup, step: 21
JOB test speedup 0.9154305680665553
TPCH test speedup 3.8872911929061478
TPCH skew test speedup 3.505133631672249
Epoch 35/300 |loss: 0.001273| train set 5.197x speedup, test set 3.505x speedup, val set 5.216x speedup, step: 22
JOB test speedup 0.9360727617393776
TPCH test speedup 3.91176256026738
TPCH skew test speedup 3.6180427878706647
Epoch 36/300 |loss: 0.001266| train set 5.185x speedup, test set 3.618x speedup, val set 5.088x speedup, step: 23
JOB test speedup 0.9545481317254073
TPCH test speedup 4.034400558529816
TPCH skew test speedup 3.79171847931493
Epoch 37/300 |loss: 0.001257| train set 5.195x speedup, test set 3.792x speedup, val set 4.038x speedup, step: 24
JOB test speedup 0.9369232577533777
TPCH test speedup 4.02066291052107
TPCH skew test speedup 3.829210379818992
Epoch 38/300 |loss: 0.001360| train set 5.025x speedup, test set 3.829x speedup, val set 5.088x speedup, step: 25
JOB test speedup 0.9278395462607891
TPCH test speedup 3.9982463679770768
TPCH skew test speedup 3.7887244540405063
Epoch 39/300 |loss: 0.001189| train set 5.174x speedup, test set 3.789x speedup, val set 4.642x speedup, step: 26
JOB test speedup 0.6468887137257718
TPCH test speedup 4.14645012050074
TPCH skew test speedup 3.861609855194553
Epoch 40/300 |loss: 0.001083| train set 5.162x speedup, test set 3.862x speedup, val set 4.831x speedup, step: 27
JOB test speedup 0.8571772279671269
TPCH test speedup 3.9842280597804547
TPCH skew test speedup 3.7891507553346706
Epoch 41/300 |loss: 0.001082| train set 5.166x speedup, test set 3.789x speedup, val set 5.172x speedup, step: 28
JOB test speedup 0.9227459241151412
TPCH test speedup 4.031338185124732
TPCH skew test speedup 3.7913670400883577
Epoch 42/300 |loss: 0.001068| train set 5.170x speedup, test set 3.791x speedup, val set 5.194x speedup, step: 29
JOB test speedup 0.9370967963637987
TPCH test speedup 3.9593021854328367
TPCH skew test speedup 3.7746697133935263
Epoch 43/300 |loss: 0.001134| train set 5.160x speedup, test set 3.775x speedup, val set 4.873x speedup, step: 30
JOB test speedup 0.9257275439450829
TPCH test speedup 4.070219585945884
TPCH skew test speedup 3.8918186332425844
Epoch 44/300 |loss: 0.001104| train set 5.195x speedup, test set 3.892x speedup, val set 5.127x speedup, step: 31
JOB test speedup 0.9258538372296442
TPCH test speedup 4.12423214791251
TPCH skew test speedup 3.845411449679724
Epoch 45/300 |loss: 0.000940| train set 5.183x speedup, test set 3.845x speedup, val set 5.310x speedup, step: 32
JOB test speedup 0.923640775942101
TPCH test speedup 4.139042009608953
TPCH skew test speedup 3.8284545323136636
Epoch 46/300 |loss: 0.001008| train set 5.186x speedup, test set 3.828x speedup, val set 5.309x speedup, step: 33
JOB test speedup 0.9269131328152304
TPCH test speedup 3.9764219405365955
TPCH skew test speedup 3.7856488802764527
Epoch 47/300 |loss: 0.000922| train set 5.174x speedup, test set 3.786x speedup, val set 5.387x speedup, step: 34
JOB test speedup 0.9328178954431401
TPCH test speedup 4.083253772204565
TPCH skew test speedup 3.8760340515628133
Epoch 48/300 |loss: 0.000830| train set 5.194x speedup, test set 3.876x speedup, val set 5.157x speedup, step: 35
JOB test speedup 0.9223781855664193
TPCH test speedup 4.069032467575933
TPCH skew test speedup 3.7988239947802653
Epoch 49/300 |loss: 0.001051| train set 5.153x speedup, test set 3.799x speedup, val set 5.180x speedup, step: 36
JOB test speedup 0.9265491944475286
TPCH test speedup 4.062642616740371
TPCH skew test speedup 3.8342676968885536
Epoch 50/300 |loss: 0.000969| train set 5.188x speedup, test set 3.834x speedup, val set 4.699x speedup, step: 37
JOB test speedup 0.9270035997555659
TPCH test speedup 4.137196164787997
TPCH skew test speedup 3.88682916617602
Epoch 51/300 |loss: 0.000814| train set 5.198x speedup, test set 3.887x speedup, val set 5.194x speedup, step: 38
JOB test speedup 0.9249054869081234
TPCH test speedup 4.161086708069465
TPCH skew test speedup 3.844060956378878
Epoch 52/300 |loss: 0.000771| train set 5.168x speedup, test set 3.844x speedup, val set 5.237x speedup, step: 39
JOB test speedup 0.9159773534184442
TPCH test speedup 4.180179831845702
TPCH skew test speedup 3.8886714750055877
Epoch 53/300 |loss: 0.000810| train set 5.181x speedup, test set 3.889x speedup, val set 5.356x speedup, step: 40
JOB test speedup 0.9264814556072793
TPCH test speedup 4.050934736773252
TPCH skew test speedup 3.835687855555264
Epoch 54/300 |loss: 0.000753| train set 5.171x speedup, test set 3.836x speedup, val set 5.253x speedup, step: 41
JOB test speedup 0.9363882956079156
TPCH test speedup 4.172085669788219
TPCH skew test speedup 3.8879000111173587
Epoch 55/300 |loss: 0.000879| train set 5.185x speedup, test set 3.888x speedup, val set 5.363x speedup, step: 42
JOB test speedup 0.9236955100386235
TPCH test speedup 3.9830738674212514
TPCH skew test speedup 3.784402078801264
Epoch 56/300 |loss: 0.000803| train set 5.174x speedup, test set 3.784x speedup, val set 5.131x speedup, step: 43
JOB test speedup 0.924760495316513
TPCH test speedup 4.1649630192354525
TPCH skew test speedup 3.8816902117287753
Epoch 57/300 |loss: 0.000854| train set 5.192x speedup, test set 3.882x speedup, val set 4.736x speedup, step: 44
JOB test speedup 0.9323515326491175
TPCH test speedup 4.163457683570004
TPCH skew test speedup 3.917694610633707
Epoch 58/300 |loss: 0.000772| train set 5.166x speedup, test set 3.918x speedup, val set 4.084x speedup, step: 45
JOB test speedup 0.9076420189616731
TPCH test speedup 4.041246092797192
TPCH skew test speedup 3.7929265588570362
Epoch 59/300 |loss: 0.000967| train set 5.151x speedup, test set 3.793x speedup, val set 4.911x speedup, step: 46
JOB test speedup 0.919333827393142
TPCH test speedup 4.040624919832788
TPCH skew test speedup 3.807460056455682
Epoch 60/300 |loss: 0.000968| train set 5.179x speedup, test set 3.807x speedup, val set 5.370x speedup, step: 47
early stopping at epoch 60
Training per epoch cost 2.365 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.608s, pg runtime 0.207s, speedup 0.340x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 4.238s, pg runtime 0.942s, speedup 0.222x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.718s, pg runtime 2.718s, speedup 1.000x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.349s, pg runtime 0.354s, speedup 1.012x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.089s, pg runtime 0.089s, speedup 1.000x
21, opt runtime 0.953s, model runtime 8.490s, pg runtime 4.730s, speedup 0.557x
22, opt runtime 0.093s, model runtime 0.163s, pg runtime 2.389s, speedup 14.664x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 1.646s, pg runtime 4.855s, speedup 2.949x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 5.959s, pg runtime 6.444s, speedup 1.081x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 16.078s, pg runtime 32.939s, speedup 2.049x
18, opt runtime 6.149s, model runtime 8.538s, pg runtime 30.760s, speedup 3.603x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
34, opt runtime 39.191s, model runtime 39.191s, pg runtime 75.984s, speedup 1.939x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 5.629s, pg runtime 42.976s, speedup 7.634x
18, opt runtime 6.531s, model runtime 8.113s, pg runtime 29.727s, speedup 3.664x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
34, opt runtime 41.237s, model runtime 41.237s, pg runtime 78.181s, speedup 1.896x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 14, train speedup 4.933, test speedup 1.929, val speedup 5.391
TPCH best validation speedup epoch: 14, train speedup 4.933, test speedup 4.358, val speedup 5.391
TPCH Skew best validation speedup epoch: 14, train speedup 4.933, test speedup 4.057, val speedup 5.391
execution cost 0:03:29.085559
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.161226, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.7538343289323024
TPCH test speedup 3.1501199199362073
TPCH skew test speedup 2.9465946739546878
Epoch 3/300 |loss: 0.007703| train set 2.620x speedup, test set 2.947x speedup, val set 3.125x speedup, step: 4
JOB test speedup 1.9301180963213382
TPCH test speedup 4.089532119794656
TPCH skew test speedup 3.9124835460649194
Epoch 4/300 |loss: 0.006312| train set 4.464x speedup, test set 3.912x speedup, val set 4.359x speedup, step: 1
JOB test speedup 1.6183118423832004
TPCH test speedup 4.087892166928235
TPCH skew test speedup 3.910085199850733
Epoch 5/300 |loss: 0.007732| train set 3.492x speedup, test set 3.910x speedup, val set 3.765x speedup, step: 2
JOB test speedup 1.8931601913959002
TPCH test speedup 4.147830036018565
TPCH skew test speedup 3.9825655304556133
Epoch 6/300 |loss: 0.005326| train set 4.519x speedup, test set 3.983x speedup, val set 4.812x speedup, step: 3
JOB test speedup 2.0086759892658876
TPCH test speedup 3.75506591541279
TPCH skew test speedup 3.3012739164570304
Epoch 7/300 |loss: 0.004666| train set 3.231x speedup, test set 3.301x speedup, val set 3.546x speedup, step: 4
JOB test speedup 1.7751517932090417
TPCH test speedup 4.206658785859582
TPCH skew test speedup 3.9147815931693097
Epoch 8/300 |loss: 0.005098| train set 4.906x speedup, test set 3.915x speedup, val set 5.201x speedup, step: 5
JOB test speedup 1.7809797497313302
TPCH test speedup 4.302634869406978
TPCH skew test speedup 4.005885896226912
Epoch 9/300 |loss: 0.004403| train set 4.922x speedup, test set 4.006x speedup, val set 5.299x speedup, step: 1
JOB test speedup 1.90694708709313
TPCH test speedup 3.989158584319645
TPCH skew test speedup 3.714113188205961
Epoch 10/300 |loss: 0.004330| train set 4.723x speedup, test set 3.714x speedup, val set 4.514x speedup, step: 2
JOB test speedup 1.721846452139804
TPCH test speedup 3.907825286133235
TPCH skew test speedup 3.635642419893988
Epoch 11/300 |loss: 0.003648| train set 5.012x speedup, test set 3.636x speedup, val set 4.619x speedup, step: 3
JOB test speedup 1.788344123647879
TPCH test speedup 4.327163028262541
TPCH skew test speedup 4.0088811833816775
Epoch 12/300 |loss: 0.003468| train set 4.950x speedup, test set 4.009x speedup, val set 5.369x speedup, step: 4
JOB test speedup 1.7771501020896565
TPCH test speedup 4.175131603445051
TPCH skew test speedup 3.869805621171579
Epoch 13/300 |loss: 0.002826| train set 5.036x speedup, test set 3.870x speedup, val set 5.057x speedup, step: 5
JOB test speedup 0.9373049461143713
TPCH test speedup 4.02381868196164
TPCH skew test speedup 3.752201937404237
Epoch 14/300 |loss: 0.002989| train set 5.139x speedup, test set 3.752x speedup, val set 5.399x speedup, step: 1
JOB test speedup 2.0966342725539073
TPCH test speedup 3.5984503936290992
TPCH skew test speedup 3.3009086643703713
Epoch 15/300 |loss: 0.002937| train set 3.895x speedup, test set 3.301x speedup, val set 3.776x speedup, step: 2
JOB test speedup 2.1100630497708805
TPCH test speedup 4.123119655713339
TPCH skew test speedup 3.6893284304037866
Epoch 16/300 |loss: 0.002820| train set 5.094x speedup, test set 3.689x speedup, val set 5.310x speedup, step: 3
JOB test speedup 0.9711894560149054
TPCH test speedup 4.301968699013164
TPCH skew test speedup 3.753898999471797
Epoch 17/300 |loss: 0.003505| train set 5.087x speedup, test set 3.754x speedup, val set 4.178x speedup, step: 4
JOB test speedup 0.7359519640934673
TPCH test speedup 3.5350868057531026
TPCH skew test speedup 3.1935184352532815
Epoch 18/300 |loss: 0.002408| train set 4.949x speedup, test set 3.194x speedup, val set 4.100x speedup, step: 5
JOB test speedup 2.027717909616266
TPCH test speedup 4.312552044283592
TPCH skew test speedup 3.9880746511307796
Epoch 19/300 |loss: 0.002294| train set 5.111x speedup, test set 3.988x speedup, val set 5.405x speedup, step: 1
JOB test speedup 0.9687309187274117
TPCH test speedup 3.5360874039664374
TPCH skew test speedup 3.359674371135107
Epoch 20/300 |loss: 0.002225| train set 3.949x speedup, test set 3.360x speedup, val set 4.101x speedup, step: 2
JOB test speedup 0.9882114145009543
TPCH test speedup 4.145083123392148
TPCH skew test speedup 3.913425825403812
Epoch 21/300 |loss: 0.002493| train set 4.692x speedup, test set 3.913x speedup, val set 5.063x speedup, step: 3
JOB test speedup 0.9698213940071597
TPCH test speedup 3.6319360634327045
TPCH skew test speedup 3.3797897353875537
Epoch 22/300 |loss: 0.002270| train set 5.183x speedup, test set 3.380x speedup, val set 4.925x speedup, step: 4
JOB test speedup 0.9578113914708161
TPCH test speedup 4.163453948513357
TPCH skew test speedup 3.7186139976326578
Epoch 23/300 |loss: 0.001914| train set 5.181x speedup, test set 3.719x speedup, val set 5.358x speedup, step: 5
JOB test speedup 0.958977679585091
TPCH test speedup 4.1967991957115345
TPCH skew test speedup 3.6898900634185754
Epoch 24/300 |loss: 0.001731| train set 5.168x speedup, test set 3.690x speedup, val set 5.424x speedup, step: 1
JOB test speedup 0.9624577895566628
TPCH test speedup 4.210092322069471
TPCH skew test speedup 3.9197834309367527
Epoch 25/300 |loss: 0.001938| train set 5.190x speedup, test set 3.920x speedup, val set 5.364x speedup, step: 2
JOB test speedup 0.8897039671334879
TPCH test speedup 4.260161928212266
TPCH skew test speedup 3.732639441764048
Epoch 26/300 |loss: 0.001633| train set 5.143x speedup, test set 3.733x speedup, val set 5.450x speedup, step: 3
JOB test speedup 0.9536316503785749
TPCH test speedup 4.34182428080833
TPCH skew test speedup 4.024792063214488
Epoch 27/300 |loss: 0.001629| train set 4.936x speedup, test set 4.025x speedup, val set 5.333x speedup, step: 4
JOB test speedup 0.91562233407906
TPCH test speedup 4.06167593381709
TPCH skew test speedup 3.638392050478067
Epoch 28/300 |loss: 0.001638| train set 5.192x speedup, test set 3.638x speedup, val set 5.078x speedup, step: 5
JOB test speedup 0.9028204742051604
TPCH test speedup 3.807839918709476
TPCH skew test speedup 3.3935082560227072
Epoch 29/300 |loss: 0.001512| train set 5.182x speedup, test set 3.394x speedup, val set 5.376x speedup, step: 6
JOB test speedup 0.9001203979676954
TPCH test speedup 4.069512348989105
TPCH skew test speedup 3.640274976809772
Epoch 30/300 |loss: 0.001453| train set 5.155x speedup, test set 3.640x speedup, val set 4.990x speedup, step: 7
JOB test speedup 0.9420183673358521
TPCH test speedup 4.240483783768205
TPCH skew test speedup 3.9259860640305364
Epoch 31/300 |loss: 0.001432| train set 5.155x speedup, test set 3.926x speedup, val set 5.383x speedup, step: 8
JOB test speedup 0.9142981289013732
TPCH test speedup 4.0631266217617465
TPCH skew test speedup 3.8417303871814465
Epoch 32/300 |loss: 0.001494| train set 5.170x speedup, test set 3.842x speedup, val set 5.217x speedup, step: 9
JOB test speedup 0.9703995958763662
TPCH test speedup 4.057581424844614
TPCH skew test speedup 3.8210128369624274
Epoch 33/300 |loss: 0.001639| train set 5.191x speedup, test set 3.821x speedup, val set 5.124x speedup, step: 10
JOB test speedup 0.9260077156246777
TPCH test speedup 3.999565504889322
TPCH skew test speedup 3.790214965420146
Epoch 34/300 |loss: 0.001321| train set 5.192x speedup, test set 3.790x speedup, val set 5.154x speedup, step: 11
JOB test speedup 0.9056841355960765
TPCH test speedup 4.015346558359475
TPCH skew test speedup 3.8027692684574044
Epoch 35/300 |loss: 0.001337| train set 5.195x speedup, test set 3.803x speedup, val set 5.077x speedup, step: 12
JOB test speedup 0.9409433328536679
TPCH test speedup 4.0463730611186275
TPCH skew test speedup 3.6142131089272773
Epoch 36/300 |loss: 0.001183| train set 5.173x speedup, test set 3.614x speedup, val set 4.557x speedup, step: 13
JOB test speedup 0.9093147291580373
TPCH test speedup 4.079946258856321
TPCH skew test speedup 3.8292914817864765
Epoch 37/300 |loss: 0.001205| train set 5.187x speedup, test set 3.829x speedup, val set 5.170x speedup, step: 14
JOB test speedup 0.9397473798012393
TPCH test speedup 4.147893576911751
TPCH skew test speedup 3.9118503876708637
Epoch 38/300 |loss: 0.001276| train set 5.192x speedup, test set 3.912x speedup, val set 5.424x speedup, step: 15
JOB test speedup 0.9038732977409176
TPCH test speedup 4.116182571387387
TPCH skew test speedup 3.8820037819677626
Epoch 39/300 |loss: 0.001164| train set 5.117x speedup, test set 3.882x speedup, val set 5.155x speedup, step: 16
JOB test speedup 0.6556324870946039
TPCH test speedup 4.0092729099113775
TPCH skew test speedup 3.7813230795257664
Epoch 40/300 |loss: 0.000977| train set 5.185x speedup, test set 3.781x speedup, val set 4.086x speedup, step: 17
JOB test speedup 0.9268764501161432
TPCH test speedup 4.117123734933397
TPCH skew test speedup 3.8468867222107
Epoch 41/300 |loss: 0.001035| train set 5.165x speedup, test set 3.847x speedup, val set 5.236x speedup, step: 18
JOB test speedup 0.9407766060674186
TPCH test speedup 4.117123734933397
TPCH skew test speedup 3.8494765408245657
Epoch 42/300 |loss: 0.001086| train set 5.116x speedup, test set 3.849x speedup, val set 5.242x speedup, step: 19
JOB test speedup 0.8441575685360239
TPCH test speedup 4.277085768008791
TPCH skew test speedup 4.004895197005142
Epoch 43/300 |loss: 0.001111| train set 5.008x speedup, test set 4.005x speedup, val set 5.336x speedup, step: 20
JOB test speedup 0.9418896984180812
TPCH test speedup 4.009112104903989
TPCH skew test speedup 3.829332704702596
Epoch 44/300 |loss: 0.001188| train set 5.191x speedup, test set 3.829x speedup, val set 5.157x speedup, step: 21
JOB test speedup 0.9150532950128862
TPCH test speedup 4.102280326555309
TPCH skew test speedup 3.8794054658714927
Epoch 45/300 |loss: 0.000872| train set 5.173x speedup, test set 3.879x speedup, val set 5.207x speedup, step: 22
JOB test speedup 0.9498561951277206
TPCH test speedup 4.064162406692768
TPCH skew test speedup 3.8371308174960492
Epoch 46/300 |loss: 0.001040| train set 5.160x speedup, test set 3.837x speedup, val set 5.107x speedup, step: 23
JOB test speedup 0.914242048264007
TPCH test speedup 4.059862022666268
TPCH skew test speedup 3.83367739586125
Epoch 47/300 |loss: 0.000874| train set 5.171x speedup, test set 3.834x speedup, val set 5.471x speedup, step: 24
JOB test speedup 0.9413964250939898
TPCH test speedup 4.063559453012509
TPCH skew test speedup 3.800005168178054
Epoch 48/300 |loss: 0.000801| train set 5.194x speedup, test set 3.800x speedup, val set 5.125x speedup, step: 25
JOB test speedup 0.9187896256700415
TPCH test speedup 4.022976052463663
TPCH skew test speedup 3.801381358901517
Epoch 49/300 |loss: 0.001064| train set 5.152x speedup, test set 3.801x speedup, val set 5.072x speedup, step: 26
JOB test speedup 0.8457683024936181
TPCH test speedup 4.116182571387387
TPCH skew test speedup 3.8488918976517708
Epoch 50/300 |loss: 0.001051| train set 5.027x speedup, test set 3.849x speedup, val set 5.371x speedup, step: 27
early stopping at epoch 50
Training per epoch cost 2.336 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.678s, pg runtime 0.207s, speedup 0.305x
04, opt runtime 0.920s, model runtime 2.104s, pg runtime 1.680s, speedup 0.798x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.802s, pg runtime 0.802s, speedup 1.000x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 2.413s, pg runtime 57.198s, speedup 23.705x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.271s, pg runtime 2.718s, speedup 1.197x
16, opt runtime 0.441s, model runtime 0.453s, pg runtime 0.453s, speedup 1.000x
17, opt runtime 0.327s, model runtime 0.418s, pg runtime 0.354s, speedup 0.847x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.064s, model runtime 0.397s, pg runtime 0.089s, speedup 0.225x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.398s, pg runtime 1.438s, speedup 1.028x
20, opt runtime 1.428s, model runtime 1.645s, pg runtime 1.428s, speedup 0.868x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 11.165s, pg runtime 32.969s, speedup 2.953x
24, opt runtime 6.234s, model runtime 10.220s, pg runtime 32.540s, speedup 3.184x
25, opt runtime 1.642s, model runtime 2.195s, pg runtime 1.752s, speedup 0.798x
26, opt runtime 1.423s, model runtime 1.495s, pg runtime 1.423s, speedup 0.951x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 54.004s, pg runtime 75.984s, speedup 1.407x
34, opt runtime 39.191s, model runtime 54.004s, pg runtime 75.984s, speedup 1.407x
35, opt runtime 18.690s, model runtime 19.533s, pg runtime 651.942s, speedup 33.376x
36, opt runtime 16.280s, model runtime 18.051s, pg runtime 634.990s, speedup 35.177x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 38.717s, pg runtime 42.976s, speedup 1.110x
18, opt runtime 6.531s, model runtime 34.854s, pg runtime 29.727s, speedup 0.853x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.308s, model runtime 1.308s, pg runtime 1.528s, speedup 1.168x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
24, opt runtime 5.806s, model runtime 10.377s, pg runtime 31.870s, speedup 3.071x
25, opt runtime 1.433s, model runtime 1.911s, pg runtime 1.433s, speedup 0.750x
26, opt runtime 1.420s, model runtime 1.837s, pg runtime 1.420s, speedup 0.773x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 53.530s, pg runtime 78.181s, speedup 1.461x
34, opt runtime 41.237s, model runtime 53.530s, pg runtime 78.181s, speedup 1.461x
35, opt runtime 16.301s, model runtime 16.301s, pg runtime 646.719s, speedup 39.673x
36, opt runtime 16.482s, model runtime 16.675s, pg runtime 622.915s, speedup 37.357x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 24, train speedup 5.168, test speedup 0.959, val speedup 5.424
TPCH best validation speedup epoch: 24, train speedup 5.168, test speedup 4.197, val speedup 5.424
TPCH Skew best validation speedup epoch: 24, train speedup 5.168, test speedup 3.690, val speedup 5.424
execution cost 0:02:54.295919
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.150336, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.6880124781399064
TPCH test speedup 3.39844752612612
TPCH skew test speedup 2.9824048733863333
Epoch 3/300 |loss: 0.007715| train set 2.672x speedup, test set 2.982x speedup, val set 2.773x speedup, step: 4
JOB test speedup 2.0309043070235453
TPCH test speedup 4.125172570977311
TPCH skew test speedup 3.936599982403671
Epoch 4/300 |loss: 0.006284| train set 4.456x speedup, test set 3.937x speedup, val set 4.670x speedup, step: 1
JOB test speedup 1.7214199956744156
TPCH test speedup 3.947524245730114
TPCH skew test speedup 3.9131267023901457
Epoch 5/300 |loss: 0.007867| train set 3.289x speedup, test set 3.913x speedup, val set 3.504x speedup, step: 2
JOB test speedup 1.831779180864182
TPCH test speedup 4.158503072221547
TPCH skew test speedup 3.9979804474258356
Epoch 6/300 |loss: 0.005300| train set 4.545x speedup, test set 3.998x speedup, val set 4.838x speedup, step: 3
JOB test speedup 2.0042739642444474
TPCH test speedup 3.7020587026462097
TPCH skew test speedup 3.2588876719848425
Epoch 7/300 |loss: 0.004666| train set 3.188x speedup, test set 3.259x speedup, val set 3.495x speedup, step: 4
JOB test speedup 1.7933769766202858
TPCH test speedup 4.242157763560408
TPCH skew test speedup 3.9435375899584106
Epoch 8/300 |loss: 0.005073| train set 4.827x speedup, test set 3.944x speedup, val set 5.159x speedup, step: 5
JOB test speedup 1.6867370810488123
TPCH test speedup 4.3024226768520535
TPCH skew test speedup 4.007040589671915
Epoch 9/300 |loss: 0.004418| train set 4.837x speedup, test set 4.007x speedup, val set 5.269x speedup, step: 1
JOB test speedup 1.8549833380693652
TPCH test speedup 3.675567433406677
TPCH skew test speedup 3.4743052632469764
Epoch 10/300 |loss: 0.004133| train set 4.103x speedup, test set 3.474x speedup, val set 4.160x speedup, step: 2
JOB test speedup 1.691296056251712
TPCH test speedup 3.8482298631040535
TPCH skew test speedup 3.514178198794977
Epoch 11/300 |loss: 0.003668| train set 4.921x speedup, test set 3.514x speedup, val set 5.210x speedup, step: 3
JOB test speedup 1.1170311796723822
TPCH test speedup 4.342048405429414
TPCH skew test speedup 4.005750316975779
Epoch 12/300 |loss: 0.003489| train set 4.793x speedup, test set 4.006x speedup, val set 5.269x speedup, step: 4
JOB test speedup 1.7654077938214963
TPCH test speedup 4.260293885764558
TPCH skew test speedup 3.8502109368878377
Epoch 13/300 |loss: 0.002857| train set 5.141x speedup, test set 3.850x speedup, val set 5.387x speedup, step: 5
JOB test speedup 0.940085565310881
TPCH test speedup 4.382444203254515
TPCH skew test speedup 4.110642425155724
Epoch 14/300 |loss: 0.002995| train set 4.866x speedup, test set 4.111x speedup, val set 5.081x speedup, step: 6
JOB test speedup 1.3967744065999927
TPCH test speedup 3.55551349453689
TPCH skew test speedup 3.2572127689330412
Epoch 15/300 |loss: 0.002939| train set 3.872x speedup, test set 3.257x speedup, val set 4.046x speedup, step: 7
JOB test speedup 1.1885831912447324
TPCH test speedup 4.25109868699571
TPCH skew test speedup 3.936936819038978
Epoch 16/300 |loss: 0.002706| train set 5.088x speedup, test set 3.937x speedup, val set 5.374x speedup, step: 8
JOB test speedup 0.9686611081307303
TPCH test speedup 4.277724532372606
TPCH skew test speedup 3.9874786887821116
Epoch 17/300 |loss: 0.003316| train set 5.113x speedup, test set 3.987x speedup, val set 5.339x speedup, step: 9
JOB test speedup 0.7377707923416302
TPCH test speedup 4.2857176485292054
TPCH skew test speedup 3.9701578123045125
Epoch 18/300 |loss: 0.002349| train set 4.969x speedup, test set 3.970x speedup, val set 4.517x speedup, step: 10
JOB test speedup 0.9436359560732782
TPCH test speedup 4.311732513406267
TPCH skew test speedup 3.9863037237129575
Epoch 19/300 |loss: 0.002164| train set 5.030x speedup, test set 3.986x speedup, val set 5.389x speedup, step: 1
JOB test speedup 0.9481828476130354
TPCH test speedup 4.0547582227834
TPCH skew test speedup 3.743651226518182
Epoch 20/300 |loss: 0.002055| train set 4.632x speedup, test set 3.744x speedup, val set 3.605x speedup, step: 2
JOB test speedup 0.952556534684928
TPCH test speedup 3.983848716368314
TPCH skew test speedup 3.8015565265640667
Epoch 21/300 |loss: 0.002378| train set 4.699x speedup, test set 3.802x speedup, val set 4.491x speedup, step: 3
JOB test speedup 0.9362006911559984
TPCH test speedup 4.17221330273236
TPCH skew test speedup 3.892410171456666
Epoch 22/300 |loss: 0.002171| train set 5.183x speedup, test set 3.892x speedup, val set 4.697x speedup, step: 4
JOB test speedup 0.931539935549026
TPCH test speedup 4.317872191322783
TPCH skew test speedup 4.024006086897471
Epoch 23/300 |loss: 0.001796| train set 5.167x speedup, test set 4.024x speedup, val set 5.381x speedup, step: 5
JOB test speedup 0.9546975774773743
TPCH test speedup 4.13486465747809
TPCH skew test speedup 3.7653937028247606
Epoch 24/300 |loss: 0.001633| train set 5.164x speedup, test set 3.765x speedup, val set 4.857x speedup, step: 6
JOB test speedup 0.9196779841623371
TPCH test speedup 4.168611036851028
TPCH skew test speedup 3.8906562975649135
Epoch 25/300 |loss: 0.001713| train set 5.063x speedup, test set 3.891x speedup, val set 5.456x speedup, step: 7
JOB test speedup 0.9298653588234792
TPCH test speedup 4.2218669956608705
TPCH skew test speedup 3.9676695452495014
Epoch 26/300 |loss: 0.001563| train set 5.186x speedup, test set 3.968x speedup, val set 5.188x speedup, step: 8
JOB test speedup 0.9361390678528428
TPCH test speedup 4.01588246169342
TPCH skew test speedup 3.736388711262873
Epoch 27/300 |loss: 0.001595| train set 4.883x speedup, test set 3.736x speedup, val set 5.256x speedup, step: 9
JOB test speedup 0.9250447227690516
TPCH test speedup 4.073194761153338
TPCH skew test speedup 3.6171124887730475
Epoch 28/300 |loss: 0.001592| train set 5.066x speedup, test set 3.617x speedup, val set 5.191x speedup, step: 10
JOB test speedup 0.9134487409255244
TPCH test speedup 4.158392702481059
TPCH skew test speedup 3.8918903023731417
Epoch 29/300 |loss: 0.001488| train set 5.108x speedup, test set 3.892x speedup, val set 5.091x speedup, step: 11
JOB test speedup 0.93765924726259
TPCH test speedup 4.1428242728531846
TPCH skew test speedup 3.6383783431002747
Epoch 30/300 |loss: 0.001435| train set 5.182x speedup, test set 3.638x speedup, val set 4.878x speedup, step: 12
JOB test speedup 0.9398622463202791
TPCH test speedup 4.024228120959963
TPCH skew test speedup 3.7631192309034107
Epoch 31/300 |loss: 0.001380| train set 5.193x speedup, test set 3.763x speedup, val set 4.809x speedup, step: 13
JOB test speedup 0.9128434260438089
TPCH test speedup 4.0989259905860145
TPCH skew test speedup 3.828743268576404
Epoch 32/300 |loss: 0.001484| train set 5.047x speedup, test set 3.829x speedup, val set 4.935x speedup, step: 14
JOB test speedup 0.9384904079021736
TPCH test speedup 4.132636765481082
TPCH skew test speedup 3.8307040224990665
Epoch 33/300 |loss: 0.001502| train set 5.189x speedup, test set 3.831x speedup, val set 5.208x speedup, step: 15
JOB test speedup 0.927886747719176
TPCH test speedup 4.195905930880313
TPCH skew test speedup 3.882496407033743
Epoch 34/300 |loss: 0.001306| train set 5.091x speedup, test set 3.882x speedup, val set 4.853x speedup, step: 16
JOB test speedup 0.9288786253768039
TPCH test speedup 4.192844176892331
TPCH skew test speedup 3.929189643142386
Epoch 35/300 |loss: 0.001254| train set 5.174x speedup, test set 3.929x speedup, val set 4.671x speedup, step: 17
JOB test speedup 0.9428125117674102
TPCH test speedup 4.09959802335607
TPCH skew test speedup 3.609811694056274
Epoch 36/300 |loss: 0.001187| train set 5.178x speedup, test set 3.610x speedup, val set 5.379x speedup, step: 18
JOB test speedup 0.927459532737785
TPCH test speedup 4.11057806402688
TPCH skew test speedup 3.8419392324790334
Epoch 37/300 |loss: 0.001187| train set 5.075x speedup, test set 3.842x speedup, val set 4.780x speedup, step: 19
JOB test speedup 0.9106075259708951
TPCH test speedup 4.32817563105725
TPCH skew test speedup 4.00499384483013
Epoch 38/300 |loss: 0.001248| train set 5.083x speedup, test set 4.005x speedup, val set 5.107x speedup, step: 20
JOB test speedup 0.9121738003003274
TPCH test speedup 4.22720461876838
TPCH skew test speedup 3.8997659800099105
Epoch 39/300 |loss: 0.001303| train set 5.092x speedup, test set 3.900x speedup, val set 4.851x speedup, step: 21
JOB test speedup 0.9364456656092116
TPCH test speedup 4.283071044591107
TPCH skew test speedup 3.9639551554328967
Epoch 40/300 |loss: 0.001015| train set 5.164x speedup, test set 3.964x speedup, val set 4.891x speedup, step: 22
JOB test speedup 0.8611215931892411
TPCH test speedup 4.328456413407039
TPCH skew test speedup 4.004522343546511
Epoch 41/300 |loss: 0.001040| train set 5.063x speedup, test set 4.005x speedup, val set 5.465x speedup, step: 23
JOB test speedup 0.9453437871582095
TPCH test speedup 4.150015915916275
TPCH skew test speedup 3.872752304764418
Epoch 42/300 |loss: 0.001122| train set 5.157x speedup, test set 3.873x speedup, val set 4.681x speedup, step: 24
JOB test speedup 0.8470824162394144
TPCH test speedup 4.1070324083941125
TPCH skew test speedup 3.6402491036371476
Epoch 43/300 |loss: 0.001004| train set 5.198x speedup, test set 3.640x speedup, val set 4.671x speedup, step: 25
JOB test speedup 0.9221445601190598
TPCH test speedup 4.24553677128748
TPCH skew test speedup 3.9616479053284803
Epoch 44/300 |loss: 0.000971| train set 5.172x speedup, test set 3.962x speedup, val set 4.776x speedup, step: 26
JOB test speedup 0.9516376152649503
TPCH test speedup 4.283083254472574
TPCH skew test speedup 3.9620412417121966
Epoch 45/300 |loss: 0.000857| train set 5.186x speedup, test set 3.962x speedup, val set 4.876x speedup, step: 27
JOB test speedup 0.9271642450778713
TPCH test speedup 4.222769232681436
TPCH skew test speedup 3.9085389386049036
Epoch 46/300 |loss: 0.000906| train set 5.163x speedup, test set 3.909x speedup, val set 4.823x speedup, step: 28
JOB test speedup 0.9382120114023479
TPCH test speedup 4.149693828997516
TPCH skew test speedup 3.8918639030674576
Epoch 47/300 |loss: 0.000851| train set 5.172x speedup, test set 3.892x speedup, val set 4.724x speedup, step: 29
JOB test speedup 0.9497453863543881
TPCH test speedup 4.254569591158671
TPCH skew test speedup 3.737642020935119
Epoch 48/300 |loss: 0.000842| train set 5.181x speedup, test set 3.738x speedup, val set 4.797x speedup, step: 30
JOB test speedup 0.8716695891117239
TPCH test speedup 4.22704942057906
TPCH skew test speedup 3.9163490935375056
Epoch 49/300 |loss: 0.001000| train set 5.061x speedup, test set 3.916x speedup, val set 4.830x speedup, step: 31
JOB test speedup 0.8618071032239142
TPCH test speedup 4.304542960027769
TPCH skew test speedup 3.986434412721641
Epoch 50/300 |loss: 0.000935| train set 5.073x speedup, test set 3.986x speedup, val set 4.896x speedup, step: 32
JOB test speedup 0.9251702985064326
TPCH test speedup 4.32817563105725
TPCH skew test speedup 4.00499384483013
Epoch 51/300 |loss: 0.000817| train set 5.198x speedup, test set 4.005x speedup, val set 4.828x speedup, step: 33
JOB test speedup 0.940842601750441
TPCH test speedup 4.23516092088589
TPCH skew test speedup 3.9763250941760724
Epoch 52/300 |loss: 0.000739| train set 5.177x speedup, test set 3.976x speedup, val set 4.869x speedup, step: 34
JOB test speedup 0.8772302668840881
TPCH test speedup 4.347300923500129
TPCH skew test speedup 4.025957572173682
Epoch 53/300 |loss: 0.000791| train set 5.193x speedup, test set 4.026x speedup, val set 5.261x speedup, step: 35
JOB test speedup 0.9391824003751583
TPCH test speedup 4.103483705910003
TPCH skew test speedup 3.6228229934296423
Epoch 54/300 |loss: 0.000766| train set 5.196x speedup, test set 3.623x speedup, val set 4.727x speedup, step: 36
JOB test speedup 0.8721644563599749
TPCH test speedup 4.201887945655711
TPCH skew test speedup 3.918689695623164
Epoch 55/300 |loss: 0.000907| train set 5.182x speedup, test set 3.919x speedup, val set 4.809x speedup, step: 37
JOB test speedup 0.9396391653620849
TPCH test speedup 4.186257312990641
TPCH skew test speedup 3.9227006578026735
Epoch 56/300 |loss: 0.000827| train set 5.198x speedup, test set 3.923x speedup, val set 4.772x speedup, step: 38
JOB test speedup 0.9360979665601059
TPCH test speedup 4.347800863566494
TPCH skew test speedup 4.024315777986445
Epoch 57/300 |loss: 0.000891| train set 5.196x speedup, test set 4.024x speedup, val set 4.951x speedup, step: 39
JOB test speedup 0.9269523983542824
TPCH test speedup 4.3206249170847855
TPCH skew test speedup 4.007304570735764
Epoch 58/300 |loss: 0.000739| train set 4.982x speedup, test set 4.007x speedup, val set 4.806x speedup, step: 40
JOB test speedup 0.8753702015492097
TPCH test speedup 4.281392585288306
TPCH skew test speedup 3.9737486972367977
Epoch 59/300 |loss: 0.000885| train set 5.165x speedup, test set 3.974x speedup, val set 4.855x speedup, step: 41
JOB test speedup 0.8648880341472915
TPCH test speedup 4.351343858805928
TPCH skew test speedup 4.010999995766455
Epoch 60/300 |loss: 0.000812| train set 5.171x speedup, test set 4.011x speedup, val set 5.466x speedup, step: 42
JOB test speedup 0.9351633368923457
TPCH test speedup 4.364727580635249
TPCH skew test speedup 4.083532371328099
Epoch 61/300 |loss: 0.000711| train set 5.186x speedup, test set 4.084x speedup, val set 4.908x speedup, step: 43
JOB test speedup 0.9510046667357495
TPCH test speedup 4.312887250979991
TPCH skew test speedup 4.00270435003687
Epoch 62/300 |loss: 0.000753| train set 5.198x speedup, test set 4.003x speedup, val set 5.431x speedup, step: 44
JOB test speedup 0.9289973621004558
TPCH test speedup 4.308833670573645
TPCH skew test speedup 3.985713406455422
Epoch 63/300 |loss: 0.000796| train set 5.194x speedup, test set 3.986x speedup, val set 4.884x speedup, step: 45
JOB test speedup 0.9329302596383974
TPCH test speedup 4.334525080815639
TPCH skew test speedup 4.0219197056008404
Epoch 64/300 |loss: 0.000707| train set 5.080x speedup, test set 4.022x speedup, val set 4.921x speedup, step: 46
JOB test speedup 0.8694835320060496
TPCH test speedup 4.326419305393049
TPCH skew test speedup 4.002956847886787
Epoch 65/300 |loss: 0.000674| train set 5.186x speedup, test set 4.003x speedup, val set 5.424x speedup, step: 47
JOB test speedup 0.9249408549391379
TPCH test speedup 4.348432146571773
TPCH skew test speedup 4.027079075081577
Epoch 66/300 |loss: 0.000615| train set 5.093x speedup, test set 4.027x speedup, val set 4.952x speedup, step: 48
JOB test speedup 0.8609749901116248
TPCH test speedup 4.30397940034469
TPCH skew test speedup 3.986431325184405
Epoch 67/300 |loss: 0.000664| train set 5.156x speedup, test set 3.986x speedup, val set 4.885x speedup, step: 49
JOB test speedup 0.9321886543303964
TPCH test speedup 4.346225334004871
TPCH skew test speedup 3.7478873349528974
Epoch 68/300 |loss: 0.000641| train set 5.189x speedup, test set 3.748x speedup, val set 4.942x speedup, step: 50
JOB test speedup 0.8652821891052828
TPCH test speedup 4.348932346868503
TPCH skew test speedup 4.025436366250936
Epoch 69/300 |loss: 0.000637| train set 5.194x speedup, test set 4.025x speedup, val set 5.472x speedup, step: 1
JOB test speedup 0.859514898111293
TPCH test speedup 4.316386212919949
TPCH skew test speedup 4.002835897859413
Epoch 70/300 |loss: 0.000613| train set 5.160x speedup, test set 4.003x speedup, val set 4.955x speedup, step: 2
JOB test speedup 0.9289298434448031
TPCH test speedup 4.311310696822365
TPCH skew test speedup 4.022457543096839
Epoch 71/300 |loss: 0.000707| train set 5.196x speedup, test set 4.022x speedup, val set 5.370x speedup, step: 3
JOB test speedup 0.8652244617782415
TPCH test speedup 4.170027675296335
TPCH skew test speedup 3.921594363648042
Epoch 72/300 |loss: 0.000572| train set 5.178x speedup, test set 3.922x speedup, val set 4.894x speedup, step: 4
JOB test speedup 0.9306619001848548
TPCH test speedup 4.34854524871495
TPCH skew test speedup 4.01369494507924
Epoch 73/300 |loss: 0.000760| train set 5.188x speedup, test set 4.014x speedup, val set 4.893x speedup, step: 5
JOB test speedup 0.9262039969051864
TPCH test speedup 4.431526426808136
TPCH skew test speedup 3.80991636406148
Epoch 74/300 |loss: 0.000813| train set 5.186x speedup, test set 3.810x speedup, val set 4.868x speedup, step: 6
early stopping at epoch 74
Training per epoch cost 2.319 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 2.126s, pg runtime 0.207s, speedup 0.097x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 18.741s, pg runtime 18.741s, speedup 1.000x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 3.108s, pg runtime 57.198s, speedup 18.401x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.885s, pg runtime 2.718s, speedup 0.942x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.611s, pg runtime 0.354s, speedup 0.579x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.971s, pg runtime 3.540s, speedup 1.796x
20, opt runtime 0.064s, model runtime 0.064s, pg runtime 0.089s, speedup 1.393x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.130s, pg runtime 2.389s, speedup 18.364x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 4.408s, pg runtime 3.112s, speedup 0.706x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.161s, pg runtime 0.161s, speedup 1.000x
27, opt runtime 0.068s, model runtime 0.171s, pg runtime 0.239s, speedup 1.394x
28, opt runtime 0.157s, model runtime 0.179s, pg runtime 0.157s, speedup 0.875x
29, opt runtime 0.158s, model runtime 0.214s, pg runtime 0.158s, speedup 0.739x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 10.445s, pg runtime 8.605s, speedup 0.824x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 34.775s, pg runtime 37.830s, speedup 1.088x
02, opt runtime 31.109s, model runtime 36.875s, pg runtime 31.109s, speedup 0.844x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 6.250s, pg runtime 32.969s, speedup 5.275x
24, opt runtime 6.234s, model runtime 6.234s, pg runtime 32.540s, speedup 5.220x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.122s, pg runtime 7.799s, speedup 1.095x
28, opt runtime 7.199s, model runtime 7.919s, pg runtime 7.619s, speedup 0.962x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.547s, pg runtime 38.026s, speedup 0.986x
02, opt runtime 34.296s, model runtime 35.390s, pg runtime 34.296s, speedup 0.969x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
24, opt runtime 5.806s, model runtime 5.806s, pg runtime 31.870s, speedup 5.489x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.419s, pg runtime 7.675s, speedup 1.035x
28, opt runtime 7.312s, model runtime 7.312s, pg runtime 7.655s, speedup 1.047x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.116s, pg runtime 1.161s, speedup 1.041x
40, opt runtime 1.020s, model runtime 1.020s, pg runtime 1.125s, speedup 1.103x
====================
JOB best validation speedup epoch: 69, train speedup 5.194, test speedup 0.865, val speedup 5.472
TPCH best validation speedup epoch: 69, train speedup 5.194, test speedup 4.349, val speedup 5.472
TPCH Skew best validation speedup epoch: 69, train speedup 5.194, test speedup 4.025, val speedup 5.472
execution cost 0:04:10.495281
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.129473, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.7307198380126814
TPCH test speedup 3.353361311862523
TPCH skew test speedup 2.9824048733863333
Epoch 3/300 |loss: 0.007711| train set 2.672x speedup, test set 2.982x speedup, val set 2.734x speedup, step: 4
JOB test speedup 2.0227618660727216
TPCH test speedup 4.076346203778694
TPCH skew test speedup 3.8893974062326477
Epoch 4/300 |loss: 0.006284| train set 4.329x speedup, test set 3.889x speedup, val set 4.603x speedup, step: 1
JOB test speedup 1.6200426154202023
TPCH test speedup 4.089532119794656
TPCH skew test speedup 3.9124835460649194
Epoch 5/300 |loss: 0.008139| train set 3.292x speedup, test set 3.912x speedup, val set 3.493x speedup, step: 2
JOB test speedup 1.831779180864182
TPCH test speedup 4.158960529372654
TPCH skew test speedup 3.996361387629898
Epoch 6/300 |loss: 0.005288| train set 4.541x speedup, test set 3.996x speedup, val set 4.818x speedup, step: 3
JOB test speedup 1.9843290466045342
TPCH test speedup 3.705548534852441
TPCH skew test speedup 3.3003862785733458
Epoch 7/300 |loss: 0.004682| train set 3.220x speedup, test set 3.300x speedup, val set 3.549x speedup, step: 4
JOB test speedup 1.8069636344912976
TPCH test speedup 4.239917597777929
TPCH skew test speedup 3.942675617253527
Epoch 8/300 |loss: 0.004987| train set 4.906x speedup, test set 3.943x speedup, val set 5.152x speedup, step: 5
JOB test speedup 1.792892139949667
TPCH test speedup 4.302634869406978
TPCH skew test speedup 4.005885896226912
Epoch 9/300 |loss: 0.004379| train set 4.942x speedup, test set 4.006x speedup, val set 5.191x speedup, step: 1
JOB test speedup 1.8288764194588627
TPCH test speedup 3.675567433406677
TPCH skew test speedup 3.4743052632469764
Epoch 10/300 |loss: 0.004199| train set 4.069x speedup, test set 3.474x speedup, val set 3.959x speedup, step: 2
JOB test speedup 1.614531374129623
TPCH test speedup 4.144203806020821
TPCH skew test speedup 3.8359189815312145
Epoch 11/300 |loss: 0.003671| train set 4.985x speedup, test set 3.836x speedup, val set 5.190x speedup, step: 3
JOB test speedup 1.1594375008333482
TPCH test speedup 4.150740319336009
TPCH skew test speedup 3.9110931134072806
Epoch 12/300 |loss: 0.003442| train set 4.889x speedup, test set 3.911x speedup, val set 5.103x speedup, step: 4
JOB test speedup 1.8059190136869607
TPCH test speedup 4.306559431410742
TPCH skew test speedup 4.005591676251525
Epoch 13/300 |loss: 0.002917| train set 4.849x speedup, test set 4.006x speedup, val set 4.979x speedup, step: 5
JOB test speedup 1.9042718073033422
TPCH test speedup 4.2400293302639795
TPCH skew test speedup 3.9343963112232134
Epoch 14/300 |loss: 0.003066| train set 4.889x speedup, test set 3.934x speedup, val set 5.258x speedup, step: 1
JOB test speedup 1.7483082465215312
TPCH test speedup 3.7585274839513616
TPCH skew test speedup 3.4696246473206345
Epoch 15/300 |loss: 0.003079| train set 3.886x speedup, test set 3.470x speedup, val set 4.123x speedup, step: 2
JOB test speedup 1.2320002975804163
TPCH test speedup 4.279520366512301
TPCH skew test speedup 3.9899729472614527
Epoch 16/300 |loss: 0.002713| train set 5.089x speedup, test set 3.990x speedup, val set 5.335x speedup, step: 3
JOB test speedup 0.9421779793935193
TPCH test speedup 4.11223685305705
TPCH skew test speedup 3.8922971640507287
Epoch 17/300 |loss: 0.003418| train set 3.698x speedup, test set 3.892x speedup, val set 4.057x speedup, step: 4
JOB test speedup 0.7476864647743668
TPCH test speedup 4.248674870440559
TPCH skew test speedup 3.8790199739614044
Epoch 18/300 |loss: 0.002441| train set 4.978x speedup, test set 3.879x speedup, val set 4.221x speedup, step: 5
JOB test speedup 1.8506647268676122
TPCH test speedup 4.312273321475434
TPCH skew test speedup 3.987914642728445
Epoch 19/300 |loss: 0.002304| train set 5.118x speedup, test set 3.988x speedup, val set 5.382x speedup, step: 1
JOB test speedup 0.9639694459836179
TPCH test speedup 3.5637855438807415
TPCH skew test speedup 3.4623200746799117
Epoch 20/300 |loss: 0.002047| train set 3.967x speedup, test set 3.462x speedup, val set 3.993x speedup, step: 2
JOB test speedup 1.836259127858908
TPCH test speedup 4.019164794261928
TPCH skew test speedup 3.8260496624344005
Epoch 21/300 |loss: 0.002456| train set 4.993x speedup, test set 3.826x speedup, val set 5.010x speedup, step: 3
JOB test speedup 0.9756782260873456
TPCH test speedup 4.220087352369498
TPCH skew test speedup 3.7946774803111643
Epoch 22/300 |loss: 0.002322| train set 5.163x speedup, test set 3.795x speedup, val set 5.443x speedup, step: 4
JOB test speedup 0.9660511600090252
TPCH test speedup 4.270363645464729
TPCH skew test speedup 3.9949416965165554
Epoch 23/300 |loss: 0.001898| train set 5.182x speedup, test set 3.995x speedup, val set 5.393x speedup, step: 5
JOB test speedup 0.9818386761428233
TPCH test speedup 4.274913572051565
TPCH skew test speedup 3.9840087326929163
Epoch 24/300 |loss: 0.001777| train set 5.192x speedup, test set 3.984x speedup, val set 5.303x speedup, step: 6
JOB test speedup 1.845511021642273
TPCH test speedup 4.171982325840388
TPCH skew test speedup 3.8952530174335642
Epoch 25/300 |loss: 0.001942| train set 5.185x speedup, test set 3.895x speedup, val set 5.409x speedup, step: 7
JOB test speedup 0.940573067664339
TPCH test speedup 4.320942552795917
TPCH skew test speedup 4.027098901279927
Epoch 26/300 |loss: 0.001688| train set 5.172x speedup, test set 4.027x speedup, val set 5.216x speedup, step: 8
JOB test speedup 0.8572049136685705
TPCH test speedup 3.998322769505823
TPCH skew test speedup 3.654046514025173
Epoch 27/300 |loss: 0.001703| train set 4.962x speedup, test set 3.654x speedup, val set 5.341x speedup, step: 9
JOB test speedup 0.8790119711932737
TPCH test speedup 4.265422985471433
TPCH skew test speedup 3.985052718401624
Epoch 28/300 |loss: 0.001685| train set 5.174x speedup, test set 3.985x speedup, val set 5.284x speedup, step: 10
JOB test speedup 0.8626776489375384
TPCH test speedup 3.798918948888761
TPCH skew test speedup 3.522300362428786
Epoch 29/300 |loss: 0.001533| train set 5.070x speedup, test set 3.522x speedup, val set 3.985x speedup, step: 11
JOB test speedup 0.9505999698137331
TPCH test speedup 4.12322664148491
TPCH skew test speedup 3.6463132940291434
Epoch 30/300 |loss: 0.001653| train set 5.197x speedup, test set 3.646x speedup, val set 4.800x speedup, step: 12
JOB test speedup 0.9256001557813832
TPCH test speedup 4.189168586843545
TPCH skew test speedup 3.8958553362262207
Epoch 31/300 |loss: 0.001411| train set 5.181x speedup, test set 3.896x speedup, val set 5.287x speedup, step: 13
JOB test speedup 0.9384619648171846
TPCH test speedup 4.276650556901052
TPCH skew test speedup 3.9499583996909684
Epoch 32/300 |loss: 0.001501| train set 5.163x speedup, test set 3.950x speedup, val set 4.863x speedup, step: 14
JOB test speedup 0.8846389135950897
TPCH test speedup 4.128920125656477
TPCH skew test speedup 3.835563059512386
Epoch 33/300 |loss: 0.001466| train set 5.111x speedup, test set 3.836x speedup, val set 4.673x speedup, step: 15
JOB test speedup 0.9419182708199187
TPCH test speedup 4.149191511150096
TPCH skew test speedup 3.865643860916914
Epoch 34/300 |loss: 0.001383| train set 5.187x speedup, test set 3.866x speedup, val set 4.595x speedup, step: 16
JOB test speedup 0.9609912660691111
TPCH test speedup 4.158638438486146
TPCH skew test speedup 3.8685808528623356
Epoch 35/300 |loss: 0.001349| train set 5.194x speedup, test set 3.869x speedup, val set 4.755x speedup, step: 17
JOB test speedup 0.928238313660327
TPCH test speedup 3.9771412432962414
TPCH skew test speedup 3.4980857849345273
Epoch 36/300 |loss: 0.001334| train set 5.166x speedup, test set 3.498x speedup, val set 5.158x speedup, step: 18
JOB test speedup 0.9525922676948646
TPCH test speedup 4.186274204329084
TPCH skew test speedup 3.887454251074658
Epoch 37/300 |loss: 0.001307| train set 5.186x speedup, test set 3.887x speedup, val set 5.315x speedup, step: 19
JOB test speedup 1.687559716960597
TPCH test speedup 4.284799138447984
TPCH skew test speedup 3.9651656288642902
Epoch 38/300 |loss: 0.001375| train set 4.939x speedup, test set 3.965x speedup, val set 5.195x speedup, step: 20
JOB test speedup 0.9464870015802893
TPCH test speedup 4.20489515470853
TPCH skew test speedup 3.897300734814748
Epoch 39/300 |loss: 0.001374| train set 5.091x speedup, test set 3.897x speedup, val set 4.854x speedup, step: 21
JOB test speedup 1.2742860103186142
TPCH test speedup 4.212705167933737
TPCH skew test speedup 3.898166595837492
Epoch 40/300 |loss: 0.001122| train set 5.170x speedup, test set 3.898x speedup, val set 5.383x speedup, step: 22
JOB test speedup 0.9253446787146368
TPCH test speedup 4.14803839382285
TPCH skew test speedup 3.86612921745932
Epoch 41/300 |loss: 0.001095| train set 5.166x speedup, test set 3.866x speedup, val set 5.391x speedup, step: 23
JOB test speedup 0.9247738916006653
TPCH test speedup 4.01643991790693
TPCH skew test speedup 3.66225756197669
Epoch 42/300 |loss: 0.001207| train set 5.160x speedup, test set 3.662x speedup, val set 5.053x speedup, step: 24
JOB test speedup 0.9424928686870523
TPCH test speedup 4.039940061660658
TPCH skew test speedup 3.5718130674109125
Epoch 43/300 |loss: 0.001168| train set 5.174x speedup, test set 3.572x speedup, val set 4.710x speedup, step: 25
JOB test speedup 0.9214930809438266
TPCH test speedup 4.114144990702993
TPCH skew test speedup 3.642725201743102
Epoch 44/300 |loss: 0.001204| train set 5.196x speedup, test set 3.643x speedup, val set 4.681x speedup, step: 26
JOB test speedup 0.9273292649089532
TPCH test speedup 4.208731474192316
TPCH skew test speedup 3.8969571198307356
Epoch 45/300 |loss: 0.000908| train set 5.186x speedup, test set 3.897x speedup, val set 4.888x speedup, step: 27
JOB test speedup 0.9395532507405123
TPCH test speedup 4.283162218165744
TPCH skew test speedup 3.9658761637586686
Epoch 46/300 |loss: 0.001028| train set 5.194x speedup, test set 3.966x speedup, val set 4.841x speedup, step: 28
JOB test speedup 0.928157913819063
TPCH test speedup 4.18791975325914
TPCH skew test speedup 3.8778684433864536
Epoch 47/300 |loss: 0.000885| train set 5.174x speedup, test set 3.878x speedup, val set 5.252x speedup, step: 29
JOB test speedup 1.7246680140530652
TPCH test speedup 4.139534400086964
TPCH skew test speedup 3.6659149755506872
Epoch 48/300 |loss: 0.000870| train set 5.193x speedup, test set 3.666x speedup, val set 4.770x speedup, step: 30
JOB test speedup 1.275229157141568
TPCH test speedup 4.1191735679488986
TPCH skew test speedup 3.6636890165004075
Epoch 49/300 |loss: 0.000999| train set 5.162x speedup, test set 3.664x speedup, val set 5.035x speedup, step: 31
JOB test speedup 1.2111779802291585
TPCH test speedup 3.6306126254623723
TPCH skew test speedup 3.778552384449685
Epoch 50/300 |loss: 0.000965| train set 5.088x speedup, test set 3.779x speedup, val set 4.191x speedup, step: 32
JOB test speedup 0.9117121279593223
TPCH test speedup 4.3735761589374516
TPCH skew test speedup 3.791971943967569
Epoch 51/300 |loss: 0.000939| train set 5.192x speedup, test set 3.792x speedup, val set 4.872x speedup, step: 33
JOB test speedup 1.2007825343613456
TPCH test speedup 4.056163735909287
TPCH skew test speedup 3.8346813848195587
Epoch 52/300 |loss: 0.000803| train set 5.150x speedup, test set 3.835x speedup, val set 5.150x speedup, step: 34
JOB test speedup 1.2351106063252801
TPCH test speedup 4.332955509306334
TPCH skew test speedup 4.005122128574282
Epoch 53/300 |loss: 0.000849| train set 5.192x speedup, test set 4.005x speedup, val set 5.395x speedup, step: 35
JOB test speedup 1.2327849739844687
TPCH test speedup 4.020087332285561
TPCH skew test speedup 3.776137335832046
Epoch 54/300 |loss: 0.000812| train set 5.188x speedup, test set 3.776x speedup, val set 5.096x speedup, step: 36
JOB test speedup 1.2252252320915666
TPCH test speedup 4.3039746747327055
TPCH skew test speedup 4.001086692057696
Epoch 55/300 |loss: 0.000843| train set 5.182x speedup, test set 4.001x speedup, val set 5.420x speedup, step: 37
JOB test speedup 1.2275932337470334
TPCH test speedup 4.021701302327596
TPCH skew test speedup 3.7503231490901334
Epoch 56/300 |loss: 0.000915| train set 5.166x speedup, test set 3.750x speedup, val set 5.105x speedup, step: 38
JOB test speedup 1.2371366108142212
TPCH test speedup 4.130088469180764
TPCH skew test speedup 3.8434419856226847
Epoch 57/300 |loss: 0.000921| train set 5.174x speedup, test set 3.843x speedup, val set 5.218x speedup, step: 39
early stopping at epoch 57
Training per epoch cost 2.350 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.678s, pg runtime 0.207s, speedup 0.305x
04, opt runtime 0.920s, model runtime 1.675s, pg runtime 1.680s, speedup 1.003x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 4.238s, pg runtime 0.942s, speedup 0.222x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 4.443s, pg runtime 13.945s, speedup 3.139x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.238s, pg runtime 2.718s, speedup 1.215x
16, opt runtime 0.441s, model runtime 0.453s, pg runtime 0.453s, speedup 1.000x
17, opt runtime 0.327s, model runtime 0.418s, pg runtime 0.354s, speedup 0.847x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.064s, model runtime 0.397s, pg runtime 0.089s, speedup 0.225x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.433s, pg runtime 0.389s, speedup 0.898x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.200s, pg runtime 0.161s, speedup 0.805x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.398s, pg runtime 1.438s, speedup 1.028x
20, opt runtime 1.428s, model runtime 1.645s, pg runtime 1.428s, speedup 0.868x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 10.621s, pg runtime 32.969s, speedup 3.104x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.642s, model runtime 2.195s, pg runtime 1.752s, speedup 0.798x
26, opt runtime 1.423s, model runtime 1.495s, pg runtime 1.423s, speedup 0.951x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
30, opt runtime 5.539s, model runtime 5.690s, pg runtime 5.539s, speedup 0.973x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.088s, pg runtime 1.206s, speedup 1.109x
40, opt runtime 1.086s, model runtime 1.086s, pg runtime 1.181s, speedup 1.088x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.308s, model runtime 1.308s, pg runtime 1.528s, speedup 1.168x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.433s, model runtime 1.911s, pg runtime 1.433s, speedup 0.750x
26, opt runtime 1.420s, model runtime 1.837s, pg runtime 1.420s, speedup 0.773x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
30, opt runtime 5.271s, model runtime 5.766s, pg runtime 5.271s, speedup 0.914x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 19, train speedup 5.118, test speedup 1.851, val speedup 5.382
TPCH best validation speedup epoch: 19, train speedup 5.118, test speedup 4.312, val speedup 5.382
TPCH Skew best validation speedup epoch: 19, train speedup 5.118, test speedup 3.988, val speedup 5.382
execution cost 0:03:17.353219
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.116342, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.7240135627018456
TPCH test speedup 3.4364693610738257
TPCH skew test speedup 3.0329988767864067
Epoch 3/300 |loss: 0.007709| train set 2.672x speedup, test set 3.033x speedup, val set 2.832x speedup, step: 4
JOB test speedup 1.8210120707798199
TPCH test speedup 4.076346203778694
TPCH skew test speedup 3.8893974062326477
Epoch 4/300 |loss: 0.006294| train set 4.329x speedup, test set 3.889x speedup, val set 4.518x speedup, step: 1
JOB test speedup 1.656034782883636
TPCH test speedup 4.087892166928235
TPCH skew test speedup 3.910085199850733
Epoch 5/300 |loss: 0.007949| train set 3.255x speedup, test set 3.910x speedup, val set 3.508x speedup, step: 2
JOB test speedup 1.8738425512603463
TPCH test speedup 4.158960529372654
TPCH skew test speedup 3.996361387629898
Epoch 6/300 |loss: 0.005357| train set 4.542x speedup, test set 3.996x speedup, val set 4.831x speedup, step: 3
JOB test speedup 1.9999656337823937
TPCH test speedup 3.913584700858516
TPCH skew test speedup 3.5401435072094483
Epoch 7/300 |loss: 0.004676| train set 3.177x speedup, test set 3.540x speedup, val set 3.809x speedup, step: 4
JOB test speedup 1.5532648023507543
TPCH test speedup 4.267377235690116
TPCH skew test speedup 3.9764695092781106
Epoch 8/300 |loss: 0.005000| train set 4.894x speedup, test set 3.976x speedup, val set 5.309x speedup, step: 5
JOB test speedup 1.7150226656809735
TPCH test speedup 4.2838997142671955
TPCH skew test speedup 3.985130141060744
Epoch 9/300 |loss: 0.004331| train set 4.856x speedup, test set 3.985x speedup, val set 5.249x speedup, step: 1
JOB test speedup 1.8395593372090877
TPCH test speedup 3.9210128937326645
TPCH skew test speedup 3.6997916652585627
Epoch 10/300 |loss: 0.004083| train set 4.341x speedup, test set 3.700x speedup, val set 4.697x speedup, step: 2
JOB test speedup 1.8093736494364752
TPCH test speedup 3.966901517228013
TPCH skew test speedup 3.6936047756522576
Epoch 11/300 |loss: 0.003657| train set 5.014x speedup, test set 3.694x speedup, val set 5.263x speedup, step: 3
JOB test speedup 1.7366917612492654
TPCH test speedup 4.341400674646246
TPCH skew test speedup 4.004154088118369
Epoch 12/300 |loss: 0.003399| train set 4.998x speedup, test set 4.004x speedup, val set 5.378x speedup, step: 4
JOB test speedup 1.963754510329954
TPCH test speedup 4.140804454084252
TPCH skew test speedup 3.866447635724143
Epoch 13/300 |loss: 0.002742| train set 5.147x speedup, test set 3.866x speedup, val set 5.390x speedup, step: 5
JOB test speedup 0.9586351392743072
TPCH test speedup 4.358299870256396
TPCH skew test speedup 4.056668457228477
Epoch 14/300 |loss: 0.002932| train set 5.067x speedup, test set 4.057x speedup, val set 5.392x speedup, step: 1
JOB test speedup 1.708403717919085
TPCH test speedup 4.232693214474403
TPCH skew test speedup 3.832484190548353
Epoch 15/300 |loss: 0.002937| train set 3.577x speedup, test set 3.832x speedup, val set 3.812x speedup, step: 2
JOB test speedup 1.2198699811289992
TPCH test speedup 4.314225297374293
TPCH skew test speedup 3.9900278005410152
Epoch 16/300 |loss: 0.002656| train set 5.043x speedup, test set 3.990x speedup, val set 5.430x speedup, step: 3
JOB test speedup 0.9790481543284238
TPCH test speedup 4.314592118872789
TPCH skew test speedup 3.9897776804378386
Epoch 17/300 |loss: 0.003312| train set 5.180x speedup, test set 3.990x speedup, val set 4.781x speedup, step: 4
JOB test speedup 0.7558763438743185
TPCH test speedup 4.290756832614715
TPCH skew test speedup 3.973191831548057
Epoch 18/300 |loss: 0.002415| train set 4.977x speedup, test set 3.973x speedup, val set 5.511x speedup, step: 5
JOB test speedup 0.9710853475067335
TPCH test speedup 4.319178639040928
TPCH skew test speedup 3.990458367780312
Epoch 19/300 |loss: 0.002243| train set 5.028x speedup, test set 3.990x speedup, val set 5.406x speedup, step: 1
JOB test speedup 0.9585573637047877
TPCH test speedup 4.023769109411923
TPCH skew test speedup 3.8162326796810206
Epoch 20/300 |loss: 0.002081| train set 4.627x speedup, test set 3.816x speedup, val set 3.923x speedup, step: 2
JOB test speedup 0.9742929680122759
TPCH test speedup 4.1551881065970395
TPCH skew test speedup 3.8901806980011253
Epoch 21/300 |loss: 0.002409| train set 5.090x speedup, test set 3.890x speedup, val set 4.881x speedup, step: 3
JOB test speedup 0.9522560983618602
TPCH test speedup 3.6832238163909032
TPCH skew test speedup 3.478068465977158
Epoch 22/300 |loss: 0.002284| train set 5.161x speedup, test set 3.478x speedup, val set 4.272x speedup, step: 4
JOB test speedup 0.9740226362919074
TPCH test speedup 4.2773227310660715
TPCH skew test speedup 3.9885609836516536
Epoch 23/300 |loss: 0.001850| train set 5.180x speedup, test set 3.989x speedup, val set 5.388x speedup, step: 5
JOB test speedup 0.993676864587837
TPCH test speedup 4.306128865461367
TPCH skew test speedup 3.991956277700373
Epoch 24/300 |loss: 0.001733| train set 5.152x speedup, test set 3.992x speedup, val set 4.850x speedup, step: 6
JOB test speedup 0.9627160235579018
TPCH test speedup 4.168226237082704
TPCH skew test speedup 3.8926410187019376
Epoch 25/300 |loss: 0.001875| train set 5.171x speedup, test set 3.893x speedup, val set 5.415x speedup, step: 7
JOB test speedup 0.9749058293514685
TPCH test speedup 4.170985890467895
TPCH skew test speedup 3.892601259577626
Epoch 26/300 |loss: 0.001648| train set 5.179x speedup, test set 3.893x speedup, val set 5.230x speedup, step: 8
JOB test speedup 0.9771773150062717
TPCH test speedup 4.01813076998506
TPCH skew test speedup 3.7526284556768825
Epoch 27/300 |loss: 0.001564| train set 4.979x speedup, test set 3.753x speedup, val set 5.167x speedup, step: 9
JOB test speedup 0.971192853235008
TPCH test speedup 4.136521850038128
TPCH skew test speedup 3.667184124632615
Epoch 28/300 |loss: 0.001627| train set 5.173x speedup, test set 3.667x speedup, val set 5.392x speedup, step: 10
JOB test speedup 0.8679782351604195
TPCH test speedup 4.0704898765278275
TPCH skew test speedup 3.5981591829623483
Epoch 29/300 |loss: 0.001536| train set 4.936x speedup, test set 3.598x speedup, val set 5.066x speedup, step: 11
JOB test speedup 0.9749472403702079
TPCH test speedup 4.170985890467895
TPCH skew test speedup 3.667184124632615
Epoch 30/300 |loss: 0.001613| train set 5.193x speedup, test set 3.667x speedup, val set 4.770x speedup, step: 12
JOB test speedup 0.9304040599092522
TPCH test speedup 4.177430916868727
TPCH skew test speedup 3.887535735780294
Epoch 31/300 |loss: 0.001423| train set 5.180x speedup, test set 3.888x speedup, val set 5.264x speedup, step: 13
JOB test speedup 0.9240378132844991
TPCH test speedup 4.157422572246834
TPCH skew test speedup 3.885317654208486
Epoch 32/300 |loss: 0.001417| train set 5.157x speedup, test set 3.885x speedup, val set 5.402x speedup, step: 14
JOB test speedup 0.8826006200330186
TPCH test speedup 3.9627767727246006
TPCH skew test speedup 3.791785984638838
Epoch 33/300 |loss: 0.001628| train set 5.171x speedup, test set 3.792x speedup, val set 5.093x speedup, step: 15
JOB test speedup 0.9364443998536965
TPCH test speedup 3.9135226518385524
TPCH skew test speedup 3.8834023319940196
Epoch 34/300 |loss: 0.001488| train set 5.057x speedup, test set 3.883x speedup, val set 4.579x speedup, step: 16
JOB test speedup 0.9366720570837148
TPCH test speedup 4.08681527665837
TPCH skew test speedup 3.6471329558100196
Epoch 35/300 |loss: 0.001346| train set 5.200x speedup, test set 3.647x speedup, val set 5.223x speedup, step: 17
JOB test speedup 0.9453279557476149
TPCH test speedup 4.163221725872999
TPCH skew test speedup 3.692908059679338
Epoch 36/300 |loss: 0.001315| train set 5.196x speedup, test set 3.693x speedup, val set 5.193x speedup, step: 18
JOB test speedup 0.9287300360692737
TPCH test speedup 4.199863603964392
TPCH skew test speedup 3.9240098214455497
Epoch 37/300 |loss: 0.001255| train set 5.097x speedup, test set 3.924x speedup, val set 4.141x speedup, step: 19
JOB test speedup 0.9113155446456517
TPCH test speedup 4.088590088927636
TPCH skew test speedup 3.931172876076414
Epoch 38/300 |loss: 0.001315| train set 5.146x speedup, test set 3.931x speedup, val set 5.161x speedup, step: 20
JOB test speedup 0.9322410431592215
TPCH test speedup 4.199635636582555
TPCH skew test speedup 3.9298195617346803
Epoch 39/300 |loss: 0.001172| train set 5.100x speedup, test set 3.930x speedup, val set 5.274x speedup, step: 21
JOB test speedup 0.9463759234835973
TPCH test speedup 4.109169049721622
TPCH skew test speedup 3.431097844236316
Epoch 40/300 |loss: 0.001080| train set 5.181x speedup, test set 3.431x speedup, val set 4.887x speedup, step: 22
JOB test speedup 0.868758707667385
TPCH test speedup 4.1726932048031555
TPCH skew test speedup 3.894978198822623
Epoch 41/300 |loss: 0.001141| train set 5.072x speedup, test set 3.895x speedup, val set 4.995x speedup, step: 23
JOB test speedup 0.9213546332317133
TPCH test speedup 4.212343517162863
TPCH skew test speedup 3.9305237744742327
Epoch 42/300 |loss: 0.001174| train set 5.071x speedup, test set 3.931x speedup, val set 5.273x speedup, step: 24
JOB test speedup 0.9337805149790428
TPCH test speedup 4.1664006684176105
TPCH skew test speedup 3.9300090036036175
Epoch 43/300 |loss: 0.001094| train set 5.156x speedup, test set 3.930x speedup, val set 5.140x speedup, step: 25
JOB test speedup 0.9462875487905454
TPCH test speedup 4.16425916624518
TPCH skew test speedup 3.6938516619976745
Epoch 44/300 |loss: 0.001224| train set 5.080x speedup, test set 3.694x speedup, val set 4.727x speedup, step: 26
JOB test speedup 0.9516176668746021
TPCH test speedup 4.160446788349683
TPCH skew test speedup 3.887535735780294
Epoch 45/300 |loss: 0.000980| train set 5.188x speedup, test set 3.888x speedup, val set 4.743x speedup, step: 27
JOB test speedup 0.9309888376899222
TPCH test speedup 4.171982325840388
TPCH skew test speedup 3.8952530174335642
Epoch 46/300 |loss: 0.001083| train set 5.171x speedup, test set 3.895x speedup, val set 5.282x speedup, step: 28
JOB test speedup 0.9366580717083435
TPCH test speedup 4.151762236793054
TPCH skew test speedup 3.6258080513622484
Epoch 47/300 |loss: 0.001008| train set 5.188x speedup, test set 3.626x speedup, val set 5.175x speedup, step: 29
JOB test speedup 0.9643319078557204
TPCH test speedup 3.9412383334340126
TPCH skew test speedup 3.572701720788869
Epoch 48/300 |loss: 0.000918| train set 5.183x speedup, test set 3.573x speedup, val set 4.819x speedup, step: 30
JOB test speedup 0.9396228932038494
TPCH test speedup 4.102080362135626
TPCH skew test speedup 3.8315196642154143
Epoch 49/300 |loss: 0.001155| train set 5.182x speedup, test set 3.832x speedup, val set 5.378x speedup, step: 31
JOB test speedup 0.9448205126080956
TPCH test speedup 4.199939528935767
TPCH skew test speedup 3.9244674071221755
Epoch 50/300 |loss: 0.000941| train set 5.195x speedup, test set 3.924x speedup, val set 5.465x speedup, step: 32
JOB test speedup 0.9417369367377486
TPCH test speedup 4.028873160367381
TPCH skew test speedup 3.8546344698401573
Epoch 51/300 |loss: 0.000924| train set 5.102x speedup, test set 3.855x speedup, val set 4.879x speedup, step: 33
JOB test speedup 0.9366549767665995
TPCH test speedup 4.1681962958755605
TPCH skew test speedup 3.8684417007317373
Epoch 52/300 |loss: 0.000889| train set 5.089x speedup, test set 3.868x speedup, val set 4.675x speedup, step: 34
JOB test speedup 0.951251415095203
TPCH test speedup 4.203896630299584
TPCH skew test speedup 3.9256940225083112
Epoch 53/300 |loss: 0.000976| train set 5.184x speedup, test set 3.926x speedup, val set 5.260x speedup, step: 35
JOB test speedup 0.9532938992152473
TPCH test speedup 4.101225291821412
TPCH skew test speedup 3.8546864376616723
Epoch 54/300 |loss: 0.000856| train set 5.185x speedup, test set 3.855x speedup, val set 5.194x speedup, step: 36
JOB test speedup 0.9427263796684441
TPCH test speedup 4.100291382100545
TPCH skew test speedup 3.8551279973998955
Epoch 55/300 |loss: 0.000916| train set 5.194x speedup, test set 3.855x speedup, val set 5.176x speedup, step: 37
JOB test speedup 0.8721549282775327
TPCH test speedup 4.044401910808845
TPCH skew test speedup 3.807464330965888
Epoch 56/300 |loss: 0.000876| train set 5.088x speedup, test set 3.807x speedup, val set 5.165x speedup, step: 38
JOB test speedup 0.9469085442835465
TPCH test speedup 4.09957594922594
TPCH skew test speedup 3.8533852635333052
Epoch 57/300 |loss: 0.000833| train set 5.194x speedup, test set 3.853x speedup, val set 5.190x speedup, step: 39
JOB test speedup 0.8405413500061198
TPCH test speedup 4.1926538612192115
TPCH skew test speedup 3.9188620908960723
Epoch 58/300 |loss: 0.000864| train set 5.064x speedup, test set 3.919x speedup, val set 5.229x speedup, step: 40
JOB test speedup 0.9377280705091761
TPCH test speedup 4.089817866612886
TPCH skew test speedup 3.6349828655846466
Epoch 59/300 |loss: 0.000959| train set 5.157x speedup, test set 3.635x speedup, val set 5.161x speedup, step: 41
JOB test speedup 0.8810307547076981
TPCH test speedup 4.204878337579942
TPCH skew test speedup 3.926302232661074
Epoch 60/300 |loss: 0.000864| train set 5.189x speedup, test set 3.926x speedup, val set 5.255x speedup, step: 42
JOB test speedup 0.9568657980359545
TPCH test speedup 4.044401910808845
TPCH skew test speedup 3.807464330965888
Epoch 61/300 |loss: 0.000720| train set 5.199x speedup, test set 3.807x speedup, val set 5.082x speedup, step: 43
JOB test speedup 0.9504574721875252
TPCH test speedup 4.100291382100545
TPCH skew test speedup 3.8551279973998955
Epoch 62/300 |loss: 0.000781| train set 5.198x speedup, test set 3.855x speedup, val set 5.186x speedup, step: 44
JOB test speedup 0.9439041548475621
TPCH test speedup 3.9195013563721544
TPCH skew test speedup 3.6471716347831653
Epoch 63/300 |loss: 0.000807| train set 5.201x speedup, test set 3.647x speedup, val set 5.174x speedup, step: 45
JOB test speedup 0.949089811084417
TPCH test speedup 4.139638194092284
TPCH skew test speedup 3.8727319904200095
Epoch 64/300 |loss: 0.000667| train set 5.100x speedup, test set 3.873x speedup, val set 5.150x speedup, step: 46
JOB test speedup 0.958231600952892
TPCH test speedup 4.1524960016921275
TPCH skew test speedup 3.880842728322453
Epoch 65/300 |loss: 0.000666| train set 5.174x speedup, test set 3.881x speedup, val set 5.189x speedup, step: 47
JOB test speedup 0.863267007700442
TPCH test speedup 4.198523548777779
TPCH skew test speedup 3.924258515362355
Epoch 66/300 |loss: 0.000651| train set 5.090x speedup, test set 3.924x speedup, val set 5.243x speedup, step: 48
JOB test speedup 0.934436750412983
TPCH test speedup 4.178447835472961
TPCH skew test speedup 3.6630840136330534
Epoch 67/300 |loss: 0.000607| train set 5.168x speedup, test set 3.663x speedup, val set 5.200x speedup, step: 49
JOB test speedup 0.9500674916613882
TPCH test speedup 4.165960976982464
TPCH skew test speedup 3.6959920061254112
Epoch 68/300 |loss: 0.000699| train set 5.197x speedup, test set 3.696x speedup, val set 5.289x speedup, step: 50
JOB test speedup 0.8654588149949364
TPCH test speedup 4.199939528935767
TPCH skew test speedup 3.9244674071221755
Epoch 69/300 |loss: 0.000714| train set 5.198x speedup, test set 3.924x speedup, val set 5.275x speedup, step: 51
JOB test speedup 0.9235986089090159
TPCH test speedup 4.110430229774201
TPCH skew test speedup 3.861301082411546
Epoch 70/300 |loss: 0.000690| train set 5.187x speedup, test set 3.861x speedup, val set 5.259x speedup, step: 52
JOB test speedup 0.9471795961339274
TPCH test speedup 4.071611933623316
TPCH skew test speedup 3.8547500963077894
Epoch 71/300 |loss: 0.000590| train set 5.091x speedup, test set 3.855x speedup, val set 5.090x speedup, step: 53
JOB test speedup 0.9387110844813233
TPCH test speedup 4.140949543221442
TPCH skew test speedup 3.446969769123652
Epoch 72/300 |loss: 0.000601| train set 5.189x speedup, test set 3.447x speedup, val set 5.470x speedup, step: 54
JOB test speedup 0.9517649474007399
TPCH test speedup 4.348932346868503
TPCH skew test speedup 4.025436366250936
Epoch 73/300 |loss: 0.000653| train set 5.196x speedup, test set 4.025x speedup, val set 5.474x speedup, step: 55
JOB test speedup 0.9477466725636681
TPCH test speedup 4.146775346321531
TPCH skew test speedup 3.675372795194905
Epoch 74/300 |loss: 0.000633| train set 5.185x speedup, test set 3.675x speedup, val set 5.289x speedup, step: 56
JOB test speedup 0.9303083250505882
TPCH test speedup 4.205701194478277
TPCH skew test speedup 3.926302232661074
Epoch 75/300 |loss: 0.000607| train set 5.173x speedup, test set 3.926x speedup, val set 5.269x speedup, step: 57
JOB test speedup 0.932689250156744
TPCH test speedup 4.213656797249368
TPCH skew test speedup 3.909666061089322
Epoch 76/300 |loss: 0.000716| train set 5.078x speedup, test set 3.910x speedup, val set 5.326x speedup, step: 58
early stopping at epoch 76
Training per epoch cost 2.337 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.243s, pg runtime 0.207s, speedup 0.851x
04, opt runtime 0.920s, model runtime 1.675s, pg runtime 1.680s, speedup 1.003x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.271s, pg runtime 2.718s, speedup 1.197x
16, opt runtime 0.441s, model runtime 0.477s, pg runtime 0.453s, speedup 0.950x
17, opt runtime 0.327s, model runtime 0.349s, pg runtime 0.354s, speedup 1.012x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.064s, model runtime 0.397s, pg runtime 0.089s, speedup 0.225x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.093s, pg runtime 2.389s, speedup 25.590x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.603s, pg runtime 5.521s, speedup 0.985x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.347s, pg runtime 1.438s, speedup 1.067x
20, opt runtime 1.428s, model runtime 1.595s, pg runtime 1.428s, speedup 0.896x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 10.621s, pg runtime 32.969s, speedup 3.104x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.642s, model runtime 1.752s, pg runtime 1.752s, speedup 1.000x
26, opt runtime 1.423s, model runtime 1.423s, pg runtime 1.423s, speedup 1.000x
27, opt runtime 6.789s, model runtime 7.197s, pg runtime 7.799s, speedup 1.084x
28, opt runtime 7.199s, model runtime 7.199s, pg runtime 7.619s, speedup 1.058x
29, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
30, opt runtime 5.539s, model runtime 5.690s, pg runtime 5.539s, speedup 0.973x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.538s, pg runtime 1.587s, speedup 1.032x
20, opt runtime 1.308s, model runtime 1.517s, pg runtime 1.528s, speedup 1.008x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.433s, model runtime 1.433s, pg runtime 1.433s, speedup 1.000x
26, opt runtime 1.420s, model runtime 1.420s, pg runtime 1.420s, speedup 1.000x
27, opt runtime 7.419s, model runtime 7.631s, pg runtime 7.675s, speedup 1.006x
28, opt runtime 7.312s, model runtime 7.596s, pg runtime 7.655s, speedup 1.008x
29, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
30, opt runtime 5.271s, model runtime 5.766s, pg runtime 5.271s, speedup 0.914x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 19, train speedup 5.028, test speedup 0.971, val speedup 5.406
TPCH best validation speedup epoch: 19, train speedup 5.028, test speedup 4.319, val speedup 5.406
TPCH Skew best validation speedup epoch: 19, train speedup 5.028, test speedup 3.990, val speedup 5.406
execution cost 0:04:16.951819
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.132416, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.7240135627018456
TPCH test speedup 3.4364693610738257
TPCH skew test speedup 3.0329988767864067
Epoch 3/300 |loss: 0.007710| train set 2.672x speedup, test set 3.033x speedup, val set 2.832x speedup, step: 4
JOB test speedup 1.8217647428391464
TPCH test speedup 4.076346203778694
TPCH skew test speedup 3.8893974062326477
Epoch 4/300 |loss: 0.006285| train set 4.329x speedup, test set 3.889x speedup, val set 4.603x speedup, step: 1
JOB test speedup 1.5761425367324557
TPCH test speedup 4.089532119794656
TPCH skew test speedup 3.9124835460649194
Epoch 5/300 |loss: 0.007800| train set 3.453x speedup, test set 3.912x speedup, val set 3.578x speedup, step: 2
JOB test speedup 1.8796886312842878
TPCH test speedup 4.158960529372654
TPCH skew test speedup 3.996361387629898
Epoch 6/300 |loss: 0.005324| train set 4.604x speedup, test set 3.996x speedup, val set 4.829x speedup, step: 3
JOB test speedup 1.9786166504843752
TPCH test speedup 3.7771034769988314
TPCH skew test speedup 3.27828353356455
Epoch 7/300 |loss: 0.004669| train set 2.970x speedup, test set 3.278x speedup, val set 3.341x speedup, step: 4
JOB test speedup 1.8046751701055213
TPCH test speedup 4.302634869406978
TPCH skew test speedup 4.005885896226912
Epoch 8/300 |loss: 0.005015| train set 4.741x speedup, test set 4.006x speedup, val set 5.158x speedup, step: 5
JOB test speedup 1.729908958737587
TPCH test speedup 4.209493047885104
TPCH skew test speedup 3.9788018498438302
Epoch 9/300 |loss: 0.004481| train set 4.847x speedup, test set 3.979x speedup, val set 5.009x speedup, step: 1
JOB test speedup 1.8384565166165776
TPCH test speedup 3.675567433406677
TPCH skew test speedup 3.4743052632469764
Epoch 10/300 |loss: 0.004225| train set 4.087x speedup, test set 3.474x speedup, val set 4.147x speedup, step: 2
JOB test speedup 1.7394501823965796
TPCH test speedup 3.9371668469709107
TPCH skew test speedup 3.66132998753425
Epoch 11/300 |loss: 0.003668| train set 4.993x speedup, test set 3.661x speedup, val set 5.178x speedup, step: 3
JOB test speedup 1.7295798542101344
TPCH test speedup 4.343096393322624
TPCH skew test speedup 4.006123022893651
Epoch 12/300 |loss: 0.003493| train set 5.018x speedup, test set 4.006x speedup, val set 5.389x speedup, step: 4
JOB test speedup 1.9971362364361989
TPCH test speedup 4.361147896136625
TPCH skew test speedup 4.025200837174736
Epoch 13/300 |loss: 0.002768| train set 5.145x speedup, test set 4.025x speedup, val set 5.491x speedup, step: 5
JOB test speedup 0.934873868035352
TPCH test speedup 4.302164432941143
TPCH skew test speedup 3.969545813310784
Epoch 14/300 |loss: 0.002976| train set 4.942x speedup, test set 3.970x speedup, val set 5.244x speedup, step: 1
JOB test speedup 1.8159151667063793
TPCH test speedup 3.7591288240642604
TPCH skew test speedup 3.4710374829369854
Epoch 15/300 |loss: 0.003078| train set 3.835x speedup, test set 3.471x speedup, val set 3.666x speedup, step: 2
JOB test speedup 1.8786276679903964
TPCH test speedup 4.276951412403871
TPCH skew test speedup 3.990305614964132
Epoch 16/300 |loss: 0.002708| train set 5.101x speedup, test set 3.990x speedup, val set 5.275x speedup, step: 3
JOB test speedup 0.9987025491256122
TPCH test speedup 4.184840254385002
TPCH skew test speedup 3.831099503480352
Epoch 17/300 |loss: 0.003407| train set 5.084x speedup, test set 3.831x speedup, val set 3.862x speedup, step: 4
JOB test speedup 0.7442741148153599
TPCH test speedup 4.267636688026247
TPCH skew test speedup 3.9843837554511197
Epoch 18/300 |loss: 0.002381| train set 4.976x speedup, test set 3.984x speedup, val set 4.417x speedup, step: 5
JOB test speedup 0.9766892489139731
TPCH test speedup 4.3111608308566725
TPCH skew test speedup 3.9874421426792837
Epoch 19/300 |loss: 0.002132| train set 5.043x speedup, test set 3.987x speedup, val set 5.380x speedup, step: 1
JOB test speedup 0.967576498875849
TPCH test speedup 4.065995699262814
TPCH skew test speedup 3.532370035219625
Epoch 20/300 |loss: 0.002071| train set 4.656x speedup, test set 3.532x speedup, val set 3.602x speedup, step: 2
JOB test speedup 0.9555669904965973
TPCH test speedup 3.947252282985354
TPCH skew test speedup 3.679555828209027
Epoch 21/300 |loss: 0.002478| train set 4.701x speedup, test set 3.680x speedup, val set 4.574x speedup, step: 3
JOB test speedup 0.9472721596232385
TPCH test speedup 4.358454580874816
TPCH skew test speedup 4.027683949460347
Epoch 22/300 |loss: 0.002202| train set 5.182x speedup, test set 4.028x speedup, val set 5.474x speedup, step: 4
JOB test speedup 0.9649520811058434
TPCH test speedup 4.160974244562827
TPCH skew test speedup 3.944885248118714
Epoch 23/300 |loss: 0.001800| train set 5.180x speedup, test set 3.945x speedup, val set 5.368x speedup, step: 5
JOB test speedup 0.9573240814155746
TPCH test speedup 4.217637664253128
TPCH skew test speedup 3.612670560769384
Epoch 24/300 |loss: 0.001648| train set 5.162x speedup, test set 3.613x speedup, val set 4.906x speedup, step: 6
JOB test speedup 0.9366656071501185
TPCH test speedup 4.03814217583488
TPCH skew test speedup 3.8228760952764373
Epoch 25/300 |loss: 0.001771| train set 5.030x speedup, test set 3.823x speedup, val set 5.214x speedup, step: 7
JOB test speedup 0.9515931215035631
TPCH test speedup 4.151270376033035
TPCH skew test speedup 3.6491801510046695
Epoch 26/300 |loss: 0.001553| train set 5.190x speedup, test set 3.649x speedup, val set 5.190x speedup, step: 8
JOB test speedup 0.9421497497850123
TPCH test speedup 4.154906955350051
TPCH skew test speedup 3.6794421438991303
Epoch 27/300 |loss: 0.001498| train set 4.867x speedup, test set 3.679x speedup, val set 5.337x speedup, step: 9
JOB test speedup 0.9313668778468102
TPCH test speedup 4.074073569966569
TPCH skew test speedup 3.619012861504187
Epoch 28/300 |loss: 0.001589| train set 5.199x speedup, test set 3.619x speedup, val set 5.294x speedup, step: 10
JOB test speedup 0.9211630980482298
TPCH test speedup 4.136771465491964
TPCH skew test speedup 3.9103965662241498
Epoch 29/300 |loss: 0.001485| train set 5.190x speedup, test set 3.910x speedup, val set 3.951x speedup, step: 11
JOB test speedup 0.9299107721407087
TPCH test speedup 4.041608335605238
TPCH skew test speedup 3.6251264505930756
Epoch 30/300 |loss: 0.001495| train set 5.145x speedup, test set 3.625x speedup, val set 4.595x speedup, step: 12
JOB test speedup 0.9321939534396972
TPCH test speedup 3.9487494868638544
TPCH skew test speedup 3.5374752630647657
Epoch 31/300 |loss: 0.001403| train set 5.057x speedup, test set 3.537x speedup, val set 4.583x speedup, step: 13
JOB test speedup 0.922472888680381
TPCH test speedup 4.136648618548756
TPCH skew test speedup 3.84436493315204
Epoch 32/300 |loss: 0.001465| train set 5.192x speedup, test set 3.844x speedup, val set 4.772x speedup, step: 14
JOB test speedup 0.9373722633487728
TPCH test speedup 3.945612584547916
TPCH skew test speedup 3.736055850036051
Epoch 33/300 |loss: 0.001490| train set 5.117x speedup, test set 3.736x speedup, val set 4.990x speedup, step: 15
JOB test speedup 0.9235232344925622
TPCH test speedup 4.01170804604201
TPCH skew test speedup 3.772273983241903
Epoch 34/300 |loss: 0.001320| train set 5.189x speedup, test set 3.772x speedup, val set 4.594x speedup, step: 16
JOB test speedup 0.9315081758779029
TPCH test speedup 4.060895349895046
TPCH skew test speedup 3.596298392175433
Epoch 35/300 |loss: 0.001303| train set 5.136x speedup, test set 3.596x speedup, val set 5.299x speedup, step: 17
JOB test speedup 0.9302613208473703
TPCH test speedup 4.066264555370509
TPCH skew test speedup 3.621407676722563
Epoch 36/300 |loss: 0.001236| train set 5.186x speedup, test set 3.621x speedup, val set 5.176x speedup, step: 18
JOB test speedup 0.9389702582738243
TPCH test speedup 4.108921191779771
TPCH skew test speedup 3.8396265681025716
Epoch 37/300 |loss: 0.001263| train set 5.086x speedup, test set 3.840x speedup, val set 5.244x speedup, step: 19
JOB test speedup 0.9264013216740536
TPCH test speedup 4.122493424460093
TPCH skew test speedup 3.856137157571808
Epoch 38/300 |loss: 0.001371| train set 5.192x speedup, test set 3.856x speedup, val set 5.141x speedup, step: 20
JOB test speedup 0.9258030720437727
TPCH test speedup 4.015503436484996
TPCH skew test speedup 3.774016874630591
Epoch 39/300 |loss: 0.001333| train set 5.088x speedup, test set 3.774x speedup, val set 4.779x speedup, step: 21
JOB test speedup 0.9321361356808465
TPCH test speedup 3.976360006183901
TPCH skew test speedup 3.739524275106107
Epoch 40/300 |loss: 0.001031| train set 5.189x speedup, test set 3.740x speedup, val set 5.228x speedup, step: 22
JOB test speedup 0.9208461443412801
TPCH test speedup 4.031960021773351
TPCH skew test speedup 3.7926266609810133
Epoch 41/300 |loss: 0.001088| train set 5.167x speedup, test set 3.793x speedup, val set 5.268x speedup, step: 23
JOB test speedup 0.926418728052851
TPCH test speedup 4.108606014083066
TPCH skew test speedup 3.83728240017903
Epoch 42/300 |loss: 0.001156| train set 5.095x speedup, test set 3.837x speedup, val set 5.212x speedup, step: 24
JOB test speedup 0.9332073650856938
TPCH test speedup 3.882844135106528
TPCH skew test speedup 3.506431511790765
Epoch 43/300 |loss: 0.001085| train set 5.173x speedup, test set 3.506x speedup, val set 4.870x speedup, step: 25
JOB test speedup 1.2375438443654267
TPCH test speedup 3.9140213120642575
TPCH skew test speedup 3.516686676979496
Epoch 44/300 |loss: 0.001087| train set 5.095x speedup, test set 3.517x speedup, val set 4.191x speedup, step: 26
JOB test speedup 0.9319130444898277
TPCH test speedup 4.016229033492589
TPCH skew test speedup 3.758490739641966
Epoch 45/300 |loss: 0.000966| train set 5.185x speedup, test set 3.758x speedup, val set 5.105x speedup, step: 27
JOB test speedup 0.9266868756169832
TPCH test speedup 4.016726095711141
TPCH skew test speedup 3.762396774187944
Epoch 46/300 |loss: 0.000964| train set 5.188x speedup, test set 3.762x speedup, val set 5.223x speedup, step: 28
JOB test speedup 0.9352476425884962
TPCH test speedup 4.070071550759024
TPCH skew test speedup 3.810094514182636
Epoch 47/300 |loss: 0.000928| train set 5.194x speedup, test set 3.810x speedup, val set 5.168x speedup, step: 29
JOB test speedup 0.9253929319026604
TPCH test speedup 3.9770269495710178
TPCH skew test speedup 3.5367261682911266
Epoch 48/300 |loss: 0.000852| train set 5.193x speedup, test set 3.537x speedup, val set 5.091x speedup, step: 30
JOB test speedup 0.9409317849973702
TPCH test speedup 3.9268179125232083
TPCH skew test speedup 3.698179756966652
Epoch 49/300 |loss: 0.001064| train set 5.082x speedup, test set 3.698x speedup, val set 4.669x speedup, step: 31
JOB test speedup 0.9295847611099299
TPCH test speedup 4.071103311000926
TPCH skew test speedup 3.811570027250353
Epoch 50/300 |loss: 0.001010| train set 5.113x speedup, test set 3.812x speedup, val set 5.162x speedup, step: 32
JOB test speedup 0.9298658035511691
TPCH test speedup 3.961953941417072
TPCH skew test speedup 3.728738974344229
Epoch 51/300 |loss: 0.000839| train set 5.202x speedup, test set 3.729x speedup, val set 5.040x speedup, step: 33
JOB test speedup 0.9361610996032139
TPCH test speedup 4.02321096929225
TPCH skew test speedup 3.792285204022848
Epoch 52/300 |loss: 0.000796| train set 5.154x speedup, test set 3.792x speedup, val set 5.229x speedup, step: 34
JOB test speedup 0.9209942486637279
TPCH test speedup 3.9779736581002303
TPCH skew test speedup 3.7463499275573393
Epoch 53/300 |loss: 0.000841| train set 5.193x speedup, test set 3.746x speedup, val set 5.062x speedup, step: 35
JOB test speedup 0.9217327514545934
TPCH test speedup 4.071069647064658
TPCH skew test speedup 3.8574127569327756
Epoch 54/300 |loss: 0.000777| train set 5.195x speedup, test set 3.857x speedup, val set 4.927x speedup, step: 36
JOB test speedup 0.9276536770116411
TPCH test speedup 3.9775551472631747
TPCH skew test speedup 3.7483270364983325
Epoch 55/300 |loss: 0.000897| train set 5.201x speedup, test set 3.748x speedup, val set 5.181x speedup, step: 37
JOB test speedup 0.8108356610531492
TPCH test speedup 3.975527466598495
TPCH skew test speedup 3.744902819809521
Epoch 56/300 |loss: 0.000911| train set 5.189x speedup, test set 3.745x speedup, val set 4.908x speedup, step: 38
JOB test speedup 0.9218057058211043
TPCH test speedup 4.044401910808845
TPCH skew test speedup 3.807464330965888
Epoch 57/300 |loss: 0.000911| train set 5.173x speedup, test set 3.807x speedup, val set 5.174x speedup, step: 39
early stopping at epoch 57
Training per epoch cost 2.350 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.678s, pg runtime 0.207s, speedup 0.305x
04, opt runtime 0.920s, model runtime 1.680s, pg runtime 1.680s, speedup 1.000x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 4.212s, pg runtime 57.198s, speedup 13.581x
14, opt runtime 0.113s, model runtime 0.153s, pg runtime 0.153s, speedup 1.000x
15, opt runtime 2.238s, model runtime 2.271s, pg runtime 2.718s, speedup 1.197x
16, opt runtime 0.441s, model runtime 0.489s, pg runtime 0.453s, speedup 0.928x
17, opt runtime 0.327s, model runtime 0.349s, pg runtime 0.354s, speedup 1.012x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.064s, model runtime 0.397s, pg runtime 0.089s, speedup 0.225x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 0.096s, pg runtime 2.389s, speedup 24.808x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.719s, pg runtime 3.112s, speedup 1.144x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.214s, pg runtime 0.158s, speedup 0.739x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.398s, pg runtime 1.438s, speedup 1.028x
20, opt runtime 1.428s, model runtime 1.645s, pg runtime 1.428s, speedup 0.868x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 10.621s, pg runtime 32.969s, speedup 3.104x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.642s, model runtime 2.195s, pg runtime 1.752s, speedup 0.798x
26, opt runtime 1.423s, model runtime 1.495s, pg runtime 1.423s, speedup 0.951x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
30, opt runtime 5.539s, model runtime 5.690s, pg runtime 5.539s, speedup 0.973x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.244s, pg runtime 1.206s, speedup 0.970x
40, opt runtime 1.086s, model runtime 1.160s, pg runtime 1.181s, speedup 1.018x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.359s, pg runtime 1.587s, speedup 1.168x
20, opt runtime 1.308s, model runtime 1.308s, pg runtime 1.528s, speedup 1.168x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.433s, model runtime 1.911s, pg runtime 1.433s, speedup 0.750x
26, opt runtime 1.420s, model runtime 1.837s, pg runtime 1.420s, speedup 0.773x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
30, opt runtime 5.271s, model runtime 5.766s, pg runtime 5.271s, speedup 0.914x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.239s, pg runtime 1.161s, speedup 0.938x
40, opt runtime 1.020s, model runtime 1.161s, pg runtime 1.125s, speedup 0.969x
====================
JOB best validation speedup epoch: 19, train speedup 5.043, test speedup 0.977, val speedup 5.380
TPCH best validation speedup epoch: 19, train speedup 5.043, test speedup 4.311, val speedup 5.380
TPCH Skew best validation speedup epoch: 19, train speedup 5.043, test speedup 3.987, val speedup 5.380
execution cost 0:03:18.276086
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.136962, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.7240135627018456
TPCH test speedup 3.4364693610738257
TPCH skew test speedup 3.0329988767864067
Epoch 3/300 |loss: 0.007709| train set 2.672x speedup, test set 3.033x speedup, val set 2.832x speedup, step: 4
JOB test speedup 1.8210120707798199
TPCH test speedup 4.076346203778694
TPCH skew test speedup 3.8893974062326477
Epoch 4/300 |loss: 0.006294| train set 4.329x speedup, test set 3.889x speedup, val set 4.518x speedup, step: 1
JOB test speedup 1.5637076548120277
TPCH test speedup 4.087892166928235
TPCH skew test speedup 3.910085199850733
Epoch 5/300 |loss: 0.007972| train set 3.257x speedup, test set 3.910x speedup, val set 3.512x speedup, step: 2
JOB test speedup 1.9649648422259467
TPCH test speedup 3.8488107489675403
TPCH skew test speedup 3.802154317049555
Epoch 6/300 |loss: 0.005321| train set 4.542x speedup, test set 3.802x speedup, val set 4.803x speedup, step: 3
JOB test speedup 2.012413556892234
TPCH test speedup 3.7004590730970213
TPCH skew test speedup 3.2564373162087605
Epoch 7/300 |loss: 0.004723| train set 3.034x speedup, test set 3.256x speedup, val set 3.496x speedup, step: 4
JOB test speedup 1.5770568966683773
TPCH test speedup 4.3036632392242264
TPCH skew test speedup 4.006519210529233
Epoch 8/300 |loss: 0.005131| train set 4.903x speedup, test set 4.007x speedup, val set 5.272x speedup, step: 5
JOB test speedup 1.9915697201475728
TPCH test speedup 4.047094135277397
TPCH skew test speedup 3.8413867177541388
Epoch 9/300 |loss: 0.004339| train set 4.464x speedup, test set 3.841x speedup, val set 4.832x speedup, step: 1
JOB test speedup 1.829413698329962
TPCH test speedup 3.8441728165707896
TPCH skew test speedup 3.6259851572326713
Epoch 10/300 |loss: 0.004124| train set 4.117x speedup, test set 3.626x speedup, val set 4.352x speedup, step: 2
JOB test speedup 1.788953639216504
TPCH test speedup 3.9509034849047135
TPCH skew test speedup 3.6755503388668718
Epoch 11/300 |loss: 0.003686| train set 4.993x speedup, test set 3.676x speedup, val set 5.212x speedup, step: 3
JOB test speedup 1.7533271344429353
TPCH test speedup 4.341352622914609
TPCH skew test speedup 3.7699488835963613
Epoch 12/300 |loss: 0.003577| train set 4.999x speedup, test set 3.770x speedup, val set 4.217x speedup, step: 4
JOB test speedup 1.9045850414049903
TPCH test speedup 4.341400674646246
TPCH skew test speedup 4.004154088118369
Epoch 13/300 |loss: 0.002783| train set 5.160x speedup, test set 4.004x speedup, val set 5.359x speedup, step: 5
JOB test speedup 2.001773338543112
TPCH test speedup 4.342717137601907
TPCH skew test speedup 4.053831152203724
Epoch 14/300 |loss: 0.002973| train set 5.141x speedup, test set 4.054x speedup, val set 5.362x speedup, step: 1
JOB test speedup 1.6778803233819184
TPCH test speedup 3.7585274839513616
TPCH skew test speedup 3.4696246473206345
Epoch 15/300 |loss: 0.002981| train set 3.883x speedup, test set 3.470x speedup, val set 4.120x speedup, step: 2
JOB test speedup 1.2229177287604043
TPCH test speedup 4.279520366512301
TPCH skew test speedup 3.9899729472614527
Epoch 16/300 |loss: 0.002760| train set 5.087x speedup, test set 3.990x speedup, val set 5.302x speedup, step: 3
JOB test speedup 1.9676952366499247
TPCH test speedup 4.277724532372606
TPCH skew test speedup 3.9874786887821116
Epoch 17/300 |loss: 0.003418| train set 4.699x speedup, test set 3.987x speedup, val set 4.174x speedup, step: 4
JOB test speedup 0.9817138009035719
TPCH test speedup 4.3149330518854585
TPCH skew test speedup 3.818743203052145
Epoch 18/300 |loss: 0.002400| train set 5.006x speedup, test set 3.819x speedup, val set 4.236x speedup, step: 5
JOB test speedup 0.9318371347055804
TPCH test speedup 4.314763567077135
TPCH skew test speedup 3.9894657539307996
Epoch 19/300 |loss: 0.002187| train set 5.121x speedup, test set 3.989x speedup, val set 5.455x speedup, step: 1
JOB test speedup 0.9691916039470637
TPCH test speedup 3.4836164594148658
TPCH skew test speedup 3.1297491387026386
Epoch 20/300 |loss: 0.002120| train set 3.961x speedup, test set 3.130x speedup, val set 4.017x speedup, step: 2
JOB test speedup 0.96753996691028
TPCH test speedup 4.157421173245388
TPCH skew test speedup 3.891227102025227
Epoch 21/300 |loss: 0.002345| train set 5.077x speedup, test set 3.891x speedup, val set 4.659x speedup, step: 3
JOB test speedup 0.9832169819706615
TPCH test speedup 3.5744198499685567
TPCH skew test speedup 3.2686399828230637
Epoch 22/300 |loss: 0.002255| train set 5.089x speedup, test set 3.269x speedup, val set 4.222x speedup, step: 4
JOB test speedup 0.9647231126625657
TPCH test speedup 4.35665556398024
TPCH skew test speedup 4.055615423989514
Epoch 23/300 |loss: 0.001885| train set 5.185x speedup, test set 4.056x speedup, val set 5.353x speedup, step: 5
JOB test speedup 0.9678214749732047
TPCH test speedup 4.208043551976889
TPCH skew test speedup 3.918741544555991
Epoch 24/300 |loss: 0.001713| train set 5.157x speedup, test set 3.919x speedup, val set 4.798x speedup, step: 6
JOB test speedup 0.9610907799619364
TPCH test speedup 4.168151454374778
TPCH skew test speedup 3.892190824301843
Epoch 25/300 |loss: 0.001903| train set 5.196x speedup, test set 3.892x speedup, val set 5.348x speedup, step: 7
JOB test speedup 0.9550966898670777
TPCH test speedup 4.139569149497173
TPCH skew test speedup 3.6389999952782826
Epoch 26/300 |loss: 0.001607| train set 5.161x speedup, test set 3.639x speedup, val set 5.064x speedup, step: 8
JOB test speedup 0.9505721664355177
TPCH test speedup 4.152535269564649
TPCH skew test speedup 3.8699373468723826
Epoch 27/300 |loss: 0.001582| train set 4.881x speedup, test set 3.870x speedup, val set 5.464x speedup, step: 9
JOB test speedup 0.9316926021665841
TPCH test speedup 4.121758717931952
TPCH skew test speedup 3.882028670157505
Epoch 28/300 |loss: 0.001735| train set 5.179x speedup, test set 3.882x speedup, val set 5.162x speedup, step: 10
JOB test speedup 0.9449629972997202
TPCH test speedup 4.022418203569349
TPCH skew test speedup 3.818731395474509
Epoch 29/300 |loss: 0.001499| train set 5.171x speedup, test set 3.819x speedup, val set 5.013x speedup, step: 11
JOB test speedup 0.9395541647696145
TPCH test speedup 4.0252127234979955
TPCH skew test speedup 3.591554061937285
Epoch 30/300 |loss: 0.001643| train set 5.199x speedup, test set 3.592x speedup, val set 4.856x speedup, step: 12
JOB test speedup 0.9272744420256214
TPCH test speedup 4.144761526764451
TPCH skew test speedup 3.88646002368606
Epoch 31/300 |loss: 0.001424| train set 5.174x speedup, test set 3.886x speedup, val set 5.087x speedup, step: 13
JOB test speedup 0.9291108929043872
TPCH test speedup 4.160413191622461
TPCH skew test speedup 3.8849114174619044
Epoch 32/300 |loss: 0.001488| train set 5.025x speedup, test set 3.885x speedup, val set 5.476x speedup, step: 14
JOB test speedup 0.9407655210928991
TPCH test speedup 4.167825407564425
TPCH skew test speedup 3.806176992124157
Epoch 33/300 |loss: 0.001599| train set 5.194x speedup, test set 3.806x speedup, val set 5.267x speedup, step: 15
JOB test speedup 0.8732965395757669
TPCH test speedup 4.023147930265519
TPCH skew test speedup 3.7555896375900146
Epoch 34/300 |loss: 0.001459| train set 5.188x speedup, test set 3.756x speedup, val set 4.801x speedup, step: 16
JOB test speedup 0.9541046432077894
TPCH test speedup 3.950288419015103
TPCH skew test speedup 3.7713321999150993
Epoch 35/300 |loss: 0.001347| train set 5.098x speedup, test set 3.771x speedup, val set 4.805x speedup, step: 17
JOB test speedup 0.9254375473174988
TPCH test speedup 3.910795772379366
TPCH skew test speedup 3.5410362858841404
Epoch 36/300 |loss: 0.001208| train set 5.187x speedup, test set 3.541x speedup, val set 4.911x speedup, step: 18
JOB test speedup 0.9320023217167384
TPCH test speedup 4.009528151550252
TPCH skew test speedup 3.885825602582249
Epoch 37/300 |loss: 0.001336| train set 5.094x speedup, test set 3.886x speedup, val set 4.210x speedup, step: 19
JOB test speedup 0.9503265035416563
TPCH test speedup 4.123449795048074
TPCH skew test speedup 3.891535767672342
Epoch 38/300 |loss: 0.001491| train set 5.102x speedup, test set 3.892x speedup, val set 5.297x speedup, step: 20
JOB test speedup 0.9363018046496931
TPCH test speedup 4.012795233991965
TPCH skew test speedup 3.8174347957504913
Epoch 39/300 |loss: 0.001257| train set 5.079x speedup, test set 3.817x speedup, val set 4.493x speedup, step: 21
JOB test speedup 0.659954380936076
TPCH test speedup 4.016407393050943
TPCH skew test speedup 3.8185954062850835
Epoch 40/300 |loss: 0.001070| train set 5.176x speedup, test set 3.819x speedup, val set 4.806x speedup, step: 22
JOB test speedup 0.9207432913825903
TPCH test speedup 4.011831880718944
TPCH skew test speedup 3.8890678014373576
Epoch 41/300 |loss: 0.001102| train set 5.072x speedup, test set 3.889x speedup, val set 5.209x speedup, step: 23
JOB test speedup 0.9320740005257964
TPCH test speedup 4.1492384080107705
TPCH skew test speedup 3.893399382731631
Epoch 42/300 |loss: 0.001214| train set 5.143x speedup, test set 3.893x speedup, val set 5.182x speedup, step: 24
JOB test speedup 0.935998877658366
TPCH test speedup 4.126136942240895
TPCH skew test speedup 3.894960537569419
Epoch 43/300 |loss: 0.001163| train set 5.036x speedup, test set 3.895x speedup, val set 4.651x speedup, step: 25
JOB test speedup 0.9525571589846887
TPCH test speedup 4.127112061770311
TPCH skew test speedup 3.8976155119189118
Epoch 44/300 |loss: 0.001173| train set 5.171x speedup, test set 3.898x speedup, val set 4.577x speedup, step: 26
JOB test speedup 0.9448026518582093
TPCH test speedup 3.878779740992268
TPCH skew test speedup 3.635176086240181
Epoch 45/300 |loss: 0.000927| train set 5.191x speedup, test set 3.635x speedup, val set 4.733x speedup, step: 27
JOB test speedup 0.9278539627198359
TPCH test speedup 4.15998900420155
TPCH skew test speedup 3.890114324810269
Epoch 46/300 |loss: 0.001070| train set 5.113x speedup, test set 3.890x speedup, val set 4.732x speedup, step: 28
JOB test speedup 1.2557727920083885
TPCH test speedup 4.020784629415758
TPCH skew test speedup 3.82303070475469
Epoch 47/300 |loss: 0.000901| train set 5.199x speedup, test set 3.823x speedup, val set 4.587x speedup, step: 29
JOB test speedup 1.240211136889413
TPCH test speedup 3.9165110462828685
TPCH skew test speedup 3.754521096257171
Epoch 48/300 |loss: 0.000891| train set 5.193x speedup, test set 3.755x speedup, val set 4.492x speedup, step: 30
JOB test speedup 0.8639998495856682
TPCH test speedup 4.018880342537408
TPCH skew test speedup 3.7774698913153895
Epoch 49/300 |loss: 0.001086| train set 5.065x speedup, test set 3.777x speedup, val set 4.558x speedup, step: 31
JOB test speedup 0.849608461752281
TPCH test speedup 4.101537192876996
TPCH skew test speedup 3.8410048070777796
Epoch 50/300 |loss: 0.000936| train set 5.201x speedup, test set 3.841x speedup, val set 5.210x speedup, step: 32
JOB test speedup 0.9437923352613179
TPCH test speedup 3.9988992899402285
TPCH skew test speedup 3.7974970573873956
Epoch 51/300 |loss: 0.000856| train set 5.195x speedup, test set 3.797x speedup, val set 5.031x speedup, step: 33
JOB test speedup 0.9228825288278208
TPCH test speedup 4.222169631595489
TPCH skew test speedup 3.8878323076987695
Epoch 52/300 |loss: 0.000840| train set 5.166x speedup, test set 3.888x speedup, val set 4.732x speedup, step: 34
JOB test speedup 0.9322477447392207
TPCH test speedup 4.169741152081411
TPCH skew test speedup 3.8932615128996915
Epoch 53/300 |loss: 0.000815| train set 5.196x speedup, test set 3.893x speedup, val set 5.198x speedup, step: 35
JOB test speedup 0.9431128609577409
TPCH test speedup 4.062623573787058
TPCH skew test speedup 3.6104760497849147
Epoch 54/300 |loss: 0.000776| train set 5.169x speedup, test set 3.610x speedup, val set 5.095x speedup, step: 36
JOB test speedup 0.9402459299991845
TPCH test speedup 4.061218291911342
TPCH skew test speedup 3.6035346445047614
Epoch 55/300 |loss: 0.000860| train set 5.183x speedup, test set 3.604x speedup, val set 5.035x speedup, step: 37
JOB test speedup 0.8573768040846457
TPCH test speedup 4.192850501091696
TPCH skew test speedup 3.9637033150183374
Epoch 56/300 |loss: 0.000922| train set 5.170x speedup, test set 3.964x speedup, val set 5.190x speedup, step: 38
JOB test speedup 0.882151469501709
TPCH test speedup 3.98860931126498
TPCH skew test speedup 3.7711177302887626
Epoch 57/300 |loss: 0.000868| train set 5.190x speedup, test set 3.771x speedup, val set 4.670x speedup, step: 39
JOB test speedup 0.8609205415276917
TPCH test speedup 4.196559820678563
TPCH skew test speedup 3.963867411422556
Epoch 58/300 |loss: 0.000822| train set 5.057x speedup, test set 3.964x speedup, val set 5.239x speedup, step: 40
JOB test speedup 0.8803003010804501
TPCH test speedup 4.023226410857145
TPCH skew test speedup 3.8071221049552175
Epoch 59/300 |loss: 0.000956| train set 5.143x speedup, test set 3.807x speedup, val set 4.453x speedup, step: 41
JOB test speedup 0.8719153863760551
TPCH test speedup 4.1463224914346535
TPCH skew test speedup 3.8717311302517836
Epoch 60/300 |loss: 0.000858| train set 5.089x speedup, test set 3.872x speedup, val set 5.204x speedup, step: 42
early stopping at epoch 60
Training per epoch cost 2.330 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.678s, pg runtime 0.207s, speedup 0.305x
04, opt runtime 0.920s, model runtime 1.675s, pg runtime 1.680s, speedup 1.003x
05, opt runtime 2.262s, model runtime 3.549s, pg runtime 3.549s, speedup 1.000x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 4.238s, pg runtime 0.942s, speedup 0.222x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.738s, pg runtime 0.738s, speedup 1.000x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.198s, pg runtime 0.153s, speedup 0.772x
15, opt runtime 2.238s, model runtime 2.271s, pg runtime 2.718s, speedup 1.197x
16, opt runtime 0.441s, model runtime 0.453s, pg runtime 0.453s, speedup 1.000x
17, opt runtime 0.327s, model runtime 0.349s, pg runtime 0.354s, speedup 1.012x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.064s, model runtime 0.397s, pg runtime 0.089s, speedup 0.225x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 4.408s, pg runtime 3.112s, speedup 0.706x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.208s, pg runtime 0.161s, speedup 0.774x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.438s, pg runtime 1.438s, speedup 1.000x
20, opt runtime 1.428s, model runtime 1.428s, pg runtime 1.428s, speedup 1.000x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 10.621s, pg runtime 32.969s, speedup 3.104x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.642s, model runtime 2.195s, pg runtime 1.752s, speedup 0.798x
26, opt runtime 1.423s, model runtime 1.495s, pg runtime 1.423s, speedup 0.951x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.572s, pg runtime 5.572s, speedup 1.000x
30, opt runtime 5.539s, model runtime 5.539s, pg runtime 5.539s, speedup 1.000x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.587s, pg runtime 1.587s, speedup 1.000x
20, opt runtime 1.308s, model runtime 1.528s, pg runtime 1.528s, speedup 1.000x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.433s, model runtime 1.911s, pg runtime 1.433s, speedup 0.750x
26, opt runtime 1.420s, model runtime 1.837s, pg runtime 1.420s, speedup 0.773x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.291s, pg runtime 5.291s, speedup 1.000x
30, opt runtime 5.271s, model runtime 5.271s, pg runtime 5.271s, speedup 1.000x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 19, train speedup 5.121, test speedup 0.932, val speedup 5.455
TPCH best validation speedup epoch: 19, train speedup 5.121, test speedup 4.315, val speedup 5.455
TPCH Skew best validation speedup epoch: 19, train speedup 5.121, test speedup 3.989, val speedup 5.455
execution cost 0:03:26.569357
==================================================
all print will write to path record/postgresql/cross/one/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_repeat
grain: repeat
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/one/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: JOB
tgt: TPCH
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test query:  ['1d.sql' '10c.sql' '11c.sql' '12c.sql' '13d.sql' '14c.sql' '15d.sql'
 '16b.sql' '17a.sql' '18c.sql' '19d.sql' '2d.sql' '20c.sql' '21a.sql'
 '22c.sql' '23c.sql' '24a.sql' '25c.sql' '26c.sql' '27c.sql' '28c.sql'
 '29b.sql' '3c.sql' '30c.sql' '31c.sql' '32b.sql' '33c.sql' '4a.sql'
 '5c.sql' '6d.sql' '7c.sql' '8c.sql' '9d.sql']
load JOB succ
load TPCH...
[2, 3, 4, 5, 7, 9] [6, 8] [1, 0]
[0, 3, 4, 7, 8, 9] [5, 2] [6, 1]
[0, 4, 6, 7, 8, 9] [1, 3] [5, 2]
[0, 3, 4, 5, 7, 8] [1, 9] [2, 6]
[0, 3, 4, 6, 8, 9] [7, 2] [1, 5]
[1, 2, 3, 4, 6, 8] [5, 9] [7, 0]
[2, 3, 4, 5, 7, 8] [1, 6] [0, 9]
[1, 4, 6, 7, 8, 9] [0, 2] [5, 3]
[3, 4, 5, 7, 8, 9] [1, 0] [2, 6]
[0, 1, 2, 5, 7, 8] [3, 9] [4, 6]
[0, 2, 3, 5, 7, 9] [4, 6] [8, 1]
[0, 1, 2, 3, 5, 6] [9, 8] [7, 4]
[0, 3, 4, 5, 7, 9] [1, 2] [6, 8]
[2, 3, 4, 5, 6, 9] [0, 7] [1, 8]
[0, 1, 5, 6, 8, 9] [3, 2] [4, 7]
[0, 1, 4, 5, 6, 9] [8, 2] [7, 3]
[0, 2, 3, 6, 7, 9] [8, 5] [4, 1]
[0, 1, 2, 6, 7, 9] [5, 3] [4, 8]
[1, 2, 3, 4, 6, 8] [7, 9] [5, 0]
[0, 3, 5, 7, 8, 9] [2, 6] [1, 4]
load TPCH succ
load TPCH_Skew...
[0, 4, 5, 7, 8, 9] [6, 1] [2, 3]
[0, 1, 2, 3, 8, 9] [4, 5] [7, 6]
[0, 1, 2, 3, 7, 9] [4, 5] [6, 8]
[2, 3, 4, 5, 8, 9] [1, 6] [0, 7]
[0, 1, 2, 4, 6, 8] [7, 3] [9, 5]
[1, 3, 5, 7, 8, 9] [0, 6] [2, 4]
[0, 4, 5, 7, 8, 9] [3, 1] [2, 6]
[0, 1, 2, 4, 6, 8] [9, 3] [5, 7]
[0, 1, 2, 3, 7, 8] [9, 4] [6, 5]
[0, 1, 4, 6, 8, 9] [3, 2] [5, 7]
[2, 3, 5, 7, 8, 9] [4, 6] [1, 0]
[0, 1, 2, 4, 5, 9] [8, 7] [3, 6]
[1, 3, 4, 7, 8, 9] [2, 5] [6, 0]
[1, 2, 3, 5, 6, 8] [0, 9] [4, 7]
[0, 2, 4, 5, 7, 8] [9, 6] [1, 3]
[0, 2, 3, 6, 8, 9] [7, 1] [5, 4]
[0, 2, 4, 5, 8, 9] [6, 3] [7, 1]
[0, 1, 3, 4, 8, 9] [6, 5] [7, 2]
[0, 1, 3, 6, 8, 9] [2, 4] [5, 7]
[0, 1, 3, 4, 8, 9] [5, 2] [6, 7]
load TPCH Skew succ
construct training samples cost 0:00:01.150051, and there are 9408 training samples
in channel 9
JOB test speedup 0.7686292802101365
TPCH test speedup 2.9812207966292403
TPCH skew test speedup 2.749018023148992
Epoch 0/300 |loss: 0.036741| train set 2.395x speedup, test set 2.749x speedup, val set 2.657x speedup, step: 1
JOB test speedup 0.7666528217170246
TPCH test speedup 2.968049139504092
TPCH skew test speedup 2.6688607118311496
Epoch 1/300 |loss: 0.016391| train set 2.744x speedup, test set 2.669x speedup, val set 2.942x speedup, step: 2
JOB test speedup 0.7362563829808758
TPCH test speedup 3.0894238713179627
TPCH skew test speedup 2.908969454181809
Epoch 2/300 |loss: 0.010457| train set 2.877x speedup, test set 2.909x speedup, val set 3.142x speedup, step: 3
JOB test speedup 1.7165732084692926
TPCH test speedup 3.1898741631599945
TPCH skew test speedup 3.0085922635269875
Epoch 3/300 |loss: 0.007704| train set 2.564x speedup, test set 3.009x speedup, val set 2.915x speedup, step: 4
JOB test speedup 1.9260246846428575
TPCH test speedup 4.089532119794656
TPCH skew test speedup 3.9124835460649194
Epoch 4/300 |loss: 0.006293| train set 4.398x speedup, test set 3.912x speedup, val set 4.670x speedup, step: 1
JOB test speedup 1.6248873242573845
TPCH test speedup 4.0781895602624845
TPCH skew test speedup 3.9131267023901457
Epoch 5/300 |loss: 0.007915| train set 3.286x speedup, test set 3.913x speedup, val set 3.495x speedup, step: 2
JOB test speedup 1.8929915463139857
TPCH test speedup 4.158960529372654
TPCH skew test speedup 3.802920999688202
Epoch 6/300 |loss: 0.005289| train set 4.539x speedup, test set 3.803x speedup, val set 4.816x speedup, step: 3
JOB test speedup 1.9968206040477516
TPCH test speedup 3.7523951469534462
TPCH skew test speedup 3.2982948252842763
Epoch 7/300 |loss: 0.004660| train set 3.183x speedup, test set 3.298x speedup, val set 3.519x speedup, step: 4
JOB test speedup 1.5607638086235867
TPCH test speedup 4.240916202593349
TPCH skew test speedup 3.942675617253527
Epoch 8/300 |loss: 0.005092| train set 4.914x speedup, test set 3.943x speedup, val set 5.155x speedup, step: 5
JOB test speedup 1.6972779723214015
TPCH test speedup 4.331478491657006
TPCH skew test speedup 4.061700391182665
Epoch 9/300 |loss: 0.004451| train set 4.762x speedup, test set 4.062x speedup, val set 4.960x speedup, step: 1
JOB test speedup 1.9427778401600975
TPCH test speedup 3.675567433406677
TPCH skew test speedup 3.5612619103899075
Epoch 10/300 |loss: 0.004230| train set 4.330x speedup, test set 3.561x speedup, val set 4.369x speedup, step: 2
JOB test speedup 1.7386911072404305
TPCH test speedup 4.272570998543544
TPCH skew test speedup 3.9686214077078317
Epoch 11/300 |loss: 0.003748| train set 4.913x speedup, test set 3.969x speedup, val set 5.205x speedup, step: 3
JOB test speedup 1.6866372342996854
TPCH test speedup 4.307175291595007
TPCH skew test speedup 3.9767031660497176
Epoch 12/300 |loss: 0.003600| train set 5.033x speedup, test set 3.977x speedup, val set 5.387x speedup, step: 4
JOB test speedup 1.7046367687212094
TPCH test speedup 4.131351062161481
TPCH skew test speedup 3.825969972770842
Epoch 13/300 |loss: 0.002841| train set 5.140x speedup, test set 3.826x speedup, val set 5.396x speedup, step: 5
JOB test speedup 1.8128696487289409
TPCH test speedup 4.012837224555078
TPCH skew test speedup 3.7527934731299473
Epoch 14/300 |loss: 0.003013| train set 5.119x speedup, test set 3.753x speedup, val set 5.377x speedup, step: 1
JOB test speedup 1.7604092440340882
TPCH test speedup 3.590588014025327
TPCH skew test speedup 3.2929197770006042
Epoch 15/300 |loss: 0.002987| train set 3.881x speedup, test set 3.293x speedup, val set 4.118x speedup, step: 2
JOB test speedup 0.9635609401188716
TPCH test speedup 4.310721834350888
TPCH skew test speedup 4.016937552079784
Epoch 16/300 |loss: 0.002716| train set 5.177x speedup, test set 4.017x speedup, val set 5.288x speedup, step: 3
JOB test speedup 0.958926639263284
TPCH test speedup 4.173085165811872
TPCH skew test speedup 3.916405014886979
Epoch 17/300 |loss: 0.003423| train set 5.076x speedup, test set 3.916x speedup, val set 4.167x speedup, step: 4
JOB test speedup 0.7417808307993481
TPCH test speedup 4.284677986797883
TPCH skew test speedup 3.9725702023611946
Epoch 18/300 |loss: 0.002367| train set 4.976x speedup, test set 3.973x speedup, val set 3.945x speedup, step: 5
JOB test speedup 0.9326028696696973
TPCH test speedup 4.309667870376465
TPCH skew test speedup 3.985934696243164
Epoch 19/300 |loss: 0.002258| train set 4.950x speedup, test set 3.986x speedup, val set 5.424x speedup, step: 1
JOB test speedup 0.9382240460996006
TPCH test speedup 3.5429162912498473
TPCH skew test speedup 3.3589799144713677
Epoch 20/300 |loss: 0.002082| train set 5.107x speedup, test set 3.359x speedup, val set 4.031x speedup, step: 2
JOB test speedup 0.956657722045165
TPCH test speedup 3.961731829160101
TPCH skew test speedup 3.8215010874001845
Epoch 21/300 |loss: 0.002465| train set 4.655x speedup, test set 3.822x speedup, val set 4.969x speedup, step: 3
JOB test speedup 0.9511819447530089
TPCH test speedup 3.545963658456484
TPCH skew test speedup 3.333426382846874
Epoch 22/300 |loss: 0.002307| train set 5.090x speedup, test set 3.333x speedup, val set 4.185x speedup, step: 4
JOB test speedup 0.9502571937547474
TPCH test speedup 4.324631199319453
TPCH skew test speedup 4.029943473362389
Epoch 23/300 |loss: 0.001883| train set 5.190x speedup, test set 4.030x speedup, val set 5.385x speedup, step: 5
JOB test speedup 0.9693834245053324
TPCH test speedup 4.312765237186437
TPCH skew test speedup 3.986930860940265
Epoch 24/300 |loss: 0.001731| train set 5.190x speedup, test set 3.987x speedup, val set 5.391x speedup, step: 6
JOB test speedup 0.9636876468530644
TPCH test speedup 4.071265621791378
TPCH skew test speedup 3.823793658910051
Epoch 25/300 |loss: 0.001905| train set 5.104x speedup, test set 3.824x speedup, val set 4.946x speedup, step: 7
JOB test speedup 0.9519796675729546
TPCH test speedup 4.209279767470098
TPCH skew test speedup 3.8975476960854327
Epoch 26/300 |loss: 0.001668| train set 5.147x speedup, test set 3.898x speedup, val set 5.323x speedup, step: 8
JOB test speedup 0.8680340833599839
TPCH test speedup 4.247072529377316
TPCH skew test speedup 3.9700391211769257
Epoch 27/300 |loss: 0.001678| train set 4.937x speedup, test set 3.970x speedup, val set 5.358x speedup, step: 9
JOB test speedup 0.9261675169925763
TPCH test speedup 4.276465838855383
TPCH skew test speedup 3.9854898811503223
Epoch 28/300 |loss: 0.001680| train set 5.173x speedup, test set 3.985x speedup, val set 5.368x speedup, step: 10
JOB test speedup 0.9142372112542975
TPCH test speedup 4.068800874686549
TPCH skew test speedup 3.8423469711818874
Epoch 29/300 |loss: 0.001530| train set 4.995x speedup, test set 3.842x speedup, val set 5.261x speedup, step: 11
JOB test speedup 0.9441937460697043
TPCH test speedup 4.00023573320506
TPCH skew test speedup 3.7927186409806968
Epoch 30/300 |loss: 0.001549| train set 5.186x speedup, test set 3.793x speedup, val set 5.392x speedup, step: 12
JOB test speedup 0.9359776096424437
TPCH test speedup 4.227785535851997
TPCH skew test speedup 3.9194353670384987
Epoch 31/300 |loss: 0.001470| train set 5.167x speedup, test set 3.919x speedup, val set 5.274x speedup, step: 13
JOB test speedup 0.9245468163824977
TPCH test speedup 3.991573173727871
TPCH skew test speedup 3.8622885019328392
Epoch 32/300 |loss: 0.001521| train set 5.093x speedup, test set 3.862x speedup, val set 5.464x speedup, step: 14
JOB test speedup 0.9385355065034597
TPCH test speedup 4.059788924829583
TPCH skew test speedup 3.8254463716771796
Epoch 33/300 |loss: 0.001482| train set 5.193x speedup, test set 3.825x speedup, val set 5.052x speedup, step: 15
JOB test speedup 0.9428742770649595
TPCH test speedup 4.07824217150636
TPCH skew test speedup 3.8468867222107
Epoch 34/300 |loss: 0.001357| train set 5.186x speedup, test set 3.847x speedup, val set 5.224x speedup, step: 16
JOB test speedup 0.9446255472730785
TPCH test speedup 4.043419743372032
TPCH skew test speedup 3.826967979595042
Epoch 35/300 |loss: 0.001255| train set 5.198x speedup, test set 3.827x speedup, val set 5.259x speedup, step: 17
JOB test speedup 0.9426383789531069
TPCH test speedup 3.9369518081157056
TPCH skew test speedup 3.5586845405594203
Epoch 36/300 |loss: 0.001316| train set 5.167x speedup, test set 3.559x speedup, val set 4.933x speedup, step: 18
JOB test speedup 0.9372610148377772
TPCH test speedup 3.66535499823206
TPCH skew test speedup 3.5103322208922823
Epoch 37/300 |loss: 0.001260| train set 5.190x speedup, test set 3.510x speedup, val set 5.326x speedup, step: 19
JOB test speedup 0.9350934873776843
TPCH test speedup 4.070800612571813
TPCH skew test speedup 3.881538504773136
Epoch 38/300 |loss: 0.001253| train set 5.156x speedup, test set 3.882x speedup, val set 5.338x speedup, step: 20
JOB test speedup 0.883199979150253
TPCH test speedup 4.142689100673933
TPCH skew test speedup 3.871154294842461
Epoch 39/300 |loss: 0.001242| train set 5.083x speedup, test set 3.871x speedup, val set 5.240x speedup, step: 21
JOB test speedup 0.6561672042014358
TPCH test speedup 4.068153174411612
TPCH skew test speedup 3.8307890170316248
Epoch 40/300 |loss: 0.001038| train set 5.186x speedup, test set 3.831x speedup, val set 5.097x speedup, step: 22
JOB test speedup 0.8925704384568041
TPCH test speedup 3.9838082319641015
TPCH skew test speedup 3.7565592414295894
Epoch 41/300 |loss: 0.001035| train set 5.166x speedup, test set 3.757x speedup, val set 5.058x speedup, step: 23
JOB test speedup 0.9396387148030686
TPCH test speedup 4.128844701773167
TPCH skew test speedup 3.862258203770737
Epoch 42/300 |loss: 0.001143| train set 5.068x speedup, test set 3.862x speedup, val set 5.282x speedup, step: 24
JOB test speedup 0.9037296772015898
TPCH test speedup 4.086823028520566
TPCH skew test speedup 3.8600119657695258
Epoch 43/300 |loss: 0.001076| train set 5.168x speedup, test set 3.860x speedup, val set 4.619x speedup, step: 25
JOB test speedup 0.9559969165779315
TPCH test speedup 4.260726410187119
TPCH skew test speedup 3.98409114444967
Epoch 44/300 |loss: 0.001135| train set 5.192x speedup, test set 3.984x speedup, val set 4.851x speedup, step: 26
JOB test speedup 0.9422748124283513
TPCH test speedup 4.088368405407118
TPCH skew test speedup 3.8508207617693233
Epoch 45/300 |loss: 0.000879| train set 5.194x speedup, test set 3.851x speedup, val set 5.181x speedup, step: 27
JOB test speedup 0.9458892000718572
TPCH test speedup 4.2562877683700275
TPCH skew test speedup 3.9339002745409424
Epoch 46/300 |loss: 0.000912| train set 5.102x speedup, test set 3.934x speedup, val set 5.221x speedup, step: 28
JOB test speedup 0.9438161847967707
TPCH test speedup 4.296811935137763
TPCH skew test speedup 3.987997216158556
Epoch 47/300 |loss: 0.000840| train set 5.172x speedup, test set 3.988x speedup, val set 5.405x speedup, step: 29
JOB test speedup 0.9378585360014685
TPCH test speedup 4.304688510244079
TPCH skew test speedup 3.9846793061578185
Epoch 48/300 |loss: 0.000827| train set 5.196x speedup, test set 3.985x speedup, val set 5.333x speedup, step: 30
JOB test speedup 0.9501821902696873
TPCH test speedup 4.206037842405806
TPCH skew test speedup 3.8992991156185255
Epoch 49/300 |loss: 0.001026| train set 5.171x speedup, test set 3.899x speedup, val set 5.337x speedup, step: 31
JOB test speedup 0.9405328815219629
TPCH test speedup 4.059426104959856
TPCH skew test speedup 3.8351672966365515
Epoch 50/300 |loss: 0.000981| train set 5.097x speedup, test set 3.835x speedup, val set 5.327x speedup, step: 32
JOB test speedup 0.935521171346574
TPCH test speedup 4.237848788020481
TPCH skew test speedup 3.92668531070827
Epoch 51/300 |loss: 0.000964| train set 5.182x speedup, test set 3.927x speedup, val set 5.296x speedup, step: 33
JOB test speedup 0.9430828676045948
TPCH test speedup 4.094415207952648
TPCH skew test speedup 3.8869538548848213
Epoch 52/300 |loss: 0.000763| train set 5.189x speedup, test set 3.887x speedup, val set 5.355x speedup, step: 34
JOB test speedup 0.660604432242843
TPCH test speedup 4.309405065489296
TPCH skew test speedup 3.987329215251435
Epoch 53/300 |loss: 0.000831| train set 5.190x speedup, test set 3.987x speedup, val set 5.428x speedup, step: 35
JOB test speedup 0.9586082979087484
TPCH test speedup 4.167461112089236
TPCH skew test speedup 3.8722314596686016
Epoch 54/300 |loss: 0.000774| train set 5.101x speedup, test set 3.872x speedup, val set 5.140x speedup, step: 36
JOB test speedup 0.9511615306395832
TPCH test speedup 4.264532597000213
TPCH skew test speedup 3.9508781490613356
Epoch 55/300 |loss: 0.000828| train set 5.196x speedup, test set 3.951x speedup, val set 5.430x speedup, step: 37
JOB test speedup 0.6514543461598983
TPCH test speedup 4.045812463518674
TPCH skew test speedup 3.814587622864104
Epoch 56/300 |loss: 0.000863| train set 5.096x speedup, test set 3.815x speedup, val set 5.128x speedup, step: 38
JOB test speedup 0.9267277767436483
TPCH test speedup 4.1209262493620695
TPCH skew test speedup 3.8837991067859985
Epoch 57/300 |loss: 0.000912| train set 5.195x speedup, test set 3.884x speedup, val set 5.417x speedup, step: 39
early stopping at epoch 57
Training per epoch cost 2.393 s
Optimal speedup on JOB test set is 3.408x
Optimal speedup on tpch test set is 5.720x
Optimal speedup on tpch skew test set is 5.389x
========== JOB
01, opt runtime 0.007s, model runtime 0.375s, pg runtime 0.081s, speedup 0.215x
02, opt runtime 1.299s, model runtime 4.760s, pg runtime 5.855s, speedup 1.230x
03, opt runtime 0.207s, model runtime 0.675s, pg runtime 0.207s, speedup 0.306x
04, opt runtime 0.920s, model runtime 1.675s, pg runtime 1.680s, speedup 1.003x
05, opt runtime 2.262s, model runtime 7.745s, pg runtime 3.549s, speedup 0.458x
06, opt runtime 0.756s, model runtime 0.756s, pg runtime 0.802s, speedup 1.060x
07, opt runtime 0.919s, model runtime 0.974s, pg runtime 0.942s, speedup 0.967x
08, opt runtime 4.223s, model runtime 4.223s, pg runtime 18.741s, speedup 4.438x
09, opt runtime 2.324s, model runtime 2.324s, pg runtime 10.605s, speedup 4.563x
10, opt runtime 2.846s, model runtime 3.507s, pg runtime 3.507s, speedup 1.000x
11, opt runtime 4.443s, model runtime 97.125s, pg runtime 13.945s, speedup 0.144x
12, opt runtime 0.517s, model runtime 0.768s, pg runtime 0.738s, speedup 0.961x
13, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
14, opt runtime 0.113s, model runtime 0.162s, pg runtime 0.153s, speedup 0.943x
15, opt runtime 2.238s, model runtime 2.271s, pg runtime 2.718s, speedup 1.197x
16, opt runtime 0.441s, model runtime 0.467s, pg runtime 0.453s, speedup 0.972x
17, opt runtime 0.327s, model runtime 0.733s, pg runtime 0.354s, speedup 0.482x
18, opt runtime 2.962s, model runtime 6.876s, pg runtime 6.876s, speedup 1.000x
19, opt runtime 1.923s, model runtime 1.923s, pg runtime 3.540s, speedup 1.841x
20, opt runtime 0.064s, model runtime 0.397s, pg runtime 0.089s, speedup 0.225x
21, opt runtime 0.953s, model runtime 5.597s, pg runtime 4.730s, speedup 0.845x
22, opt runtime 0.093s, model runtime 2.487s, pg runtime 2.389s, speedup 0.961x
23, opt runtime 0.389s, model runtime 0.389s, pg runtime 0.389s, speedup 1.000x
24, opt runtime 2.719s, model runtime 2.938s, pg runtime 3.112s, speedup 1.059x
25, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
26, opt runtime 0.161s, model runtime 0.200s, pg runtime 0.161s, speedup 0.805x
27, opt runtime 0.068s, model runtime 0.157s, pg runtime 0.239s, speedup 1.525x
28, opt runtime 0.157s, model runtime 0.157s, pg runtime 0.157s, speedup 1.000x
29, opt runtime 0.158s, model runtime 0.238s, pg runtime 0.158s, speedup 0.666x
30, opt runtime 1.646s, model runtime 4.855s, pg runtime 4.855s, speedup 1.000x
31, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
32, opt runtime 4.513s, model runtime 7.283s, pg runtime 6.444s, speedup 0.885x
33, opt runtime 2.755s, model runtime 5.521s, pg runtime 5.521s, speedup 1.000x
========== TPCH
01, opt runtime 34.775s, model runtime 37.830s, pg runtime 37.830s, speedup 1.000x
02, opt runtime 31.109s, model runtime 31.109s, pg runtime 31.109s, speedup 1.000x
03, opt runtime 29.502s, model runtime 29.502s, pg runtime 112.305s, speedup 3.807x
04, opt runtime 30.267s, model runtime 30.267s, pg runtime 100.885s, speedup 3.333x
05, opt runtime 23.961s, model runtime 32.278s, pg runtime 32.278s, speedup 1.000x
06, opt runtime 25.597s, model runtime 27.136s, pg runtime 27.136s, speedup 1.000x
07, opt runtime 6.284s, model runtime 6.284s, pg runtime 31.019s, speedup 4.937x
08, opt runtime 7.377s, model runtime 8.474s, pg runtime 28.655s, speedup 3.382x
09, opt runtime 5.543s, model runtime 5.543s, pg runtime 5.543s, speedup 1.000x
10, opt runtime 5.237s, model runtime 5.237s, pg runtime 5.237s, speedup 1.000x
11, opt runtime 23.205s, model runtime 23.205s, pg runtime 87.340s, speedup 3.764x
12, opt runtime 26.602s, model runtime 26.602s, pg runtime 85.447s, speedup 3.212x
13, opt runtime 3.332s, model runtime 4.140s, pg runtime 21.298s, speedup 5.144x
14, opt runtime 3.258s, model runtime 3.312s, pg runtime 18.141s, speedup 5.478x
15, opt runtime 53.298s, model runtime 148.707s, pg runtime 148.707s, speedup 1.000x
16, opt runtime 53.440s, model runtime 140.742s, pg runtime 140.742s, speedup 1.000x
17, opt runtime 10.788s, model runtime 10.788s, pg runtime 32.939s, speedup 3.053x
18, opt runtime 6.149s, model runtime 6.149s, pg runtime 30.760s, speedup 5.003x
19, opt runtime 1.347s, model runtime 1.654s, pg runtime 1.438s, speedup 0.869x
20, opt runtime 1.428s, model runtime 1.715s, pg runtime 1.428s, speedup 0.833x
21, opt runtime 25.034s, model runtime 25.034s, pg runtime 25.034s, speedup 1.000x
22, opt runtime 20.897s, model runtime 23.708s, pg runtime 23.708s, speedup 1.000x
23, opt runtime 6.250s, model runtime 10.621s, pg runtime 32.969s, speedup 3.104x
24, opt runtime 6.234s, model runtime 10.545s, pg runtime 32.540s, speedup 3.086x
25, opt runtime 1.642s, model runtime 2.195s, pg runtime 1.752s, speedup 0.798x
26, opt runtime 1.423s, model runtime 1.495s, pg runtime 1.423s, speedup 0.951x
27, opt runtime 6.789s, model runtime 7.799s, pg runtime 7.799s, speedup 1.000x
28, opt runtime 7.199s, model runtime 7.619s, pg runtime 7.619s, speedup 1.000x
29, opt runtime 5.572s, model runtime 5.971s, pg runtime 5.572s, speedup 0.933x
30, opt runtime 5.539s, model runtime 5.690s, pg runtime 5.539s, speedup 0.973x
31, opt runtime 24.840s, model runtime 24.840s, pg runtime 626.529s, speedup 25.222x
32, opt runtime 24.662s, model runtime 24.662s, pg runtime 613.999s, speedup 24.896x
33, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
34, opt runtime 39.191s, model runtime 42.882s, pg runtime 75.984s, speedup 1.772x
35, opt runtime 18.690s, model runtime 18.690s, pg runtime 651.942s, speedup 34.881x
36, opt runtime 16.280s, model runtime 16.280s, pg runtime 634.990s, speedup 39.005x
37, opt runtime 19.707s, model runtime 19.707s, pg runtime 19.707s, speedup 1.000x
38, opt runtime 18.262s, model runtime 18.262s, pg runtime 18.262s, speedup 1.000x
39, opt runtime 1.088s, model runtime 1.206s, pg runtime 1.206s, speedup 1.000x
40, opt runtime 1.086s, model runtime 1.181s, pg runtime 1.181s, speedup 1.000x
========== TPCH skew
01, opt runtime 38.026s, model runtime 38.026s, pg runtime 38.026s, speedup 1.000x
02, opt runtime 34.296s, model runtime 34.296s, pg runtime 34.296s, speedup 1.000x
03, opt runtime 32.482s, model runtime 32.482s, pg runtime 123.411s, speedup 3.799x
04, opt runtime 31.996s, model runtime 31.996s, pg runtime 120.854s, speedup 3.777x
05, opt runtime 14.023s, model runtime 31.705s, pg runtime 31.705s, speedup 1.000x
06, opt runtime 30.304s, model runtime 30.711s, pg runtime 30.711s, speedup 1.000x
07, opt runtime 6.123s, model runtime 6.123s, pg runtime 14.081s, speedup 2.300x
08, opt runtime 5.471s, model runtime 5.471s, pg runtime 13.410s, speedup 2.451x
09, opt runtime 8.207s, model runtime 8.207s, pg runtime 8.207s, speedup 1.000x
10, opt runtime 5.531s, model runtime 5.531s, pg runtime 5.531s, speedup 1.000x
11, opt runtime 23.224s, model runtime 23.224s, pg runtime 83.100s, speedup 3.578x
12, opt runtime 24.103s, model runtime 24.103s, pg runtime 75.612s, speedup 3.137x
13, opt runtime 3.004s, model runtime 3.428s, pg runtime 17.818s, speedup 5.197x
14, opt runtime 3.244s, model runtime 3.244s, pg runtime 17.707s, speedup 5.458x
15, opt runtime 52.135s, model runtime 153.848s, pg runtime 102.039s, speedup 0.663x
16, opt runtime 54.696s, model runtime 159.476s, pg runtime 98.172s, speedup 0.616x
17, opt runtime 5.629s, model runtime 6.658s, pg runtime 42.976s, speedup 6.455x
18, opt runtime 6.531s, model runtime 6.531s, pg runtime 29.727s, speedup 4.551x
19, opt runtime 1.359s, model runtime 1.558s, pg runtime 1.587s, speedup 1.018x
20, opt runtime 1.308s, model runtime 1.585s, pg runtime 1.528s, speedup 0.964x
21, opt runtime 26.669s, model runtime 30.614s, pg runtime 30.614s, speedup 1.000x
22, opt runtime 28.744s, model runtime 29.665s, pg runtime 29.665s, speedup 1.000x
23, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
24, opt runtime 5.806s, model runtime 10.043s, pg runtime 31.870s, speedup 3.173x
25, opt runtime 1.433s, model runtime 1.911s, pg runtime 1.433s, speedup 0.750x
26, opt runtime 1.420s, model runtime 1.837s, pg runtime 1.420s, speedup 0.773x
27, opt runtime 7.419s, model runtime 7.675s, pg runtime 7.675s, speedup 1.000x
28, opt runtime 7.312s, model runtime 7.655s, pg runtime 7.655s, speedup 1.000x
29, opt runtime 5.291s, model runtime 5.616s, pg runtime 5.291s, speedup 0.942x
30, opt runtime 5.271s, model runtime 5.766s, pg runtime 5.271s, speedup 0.914x
31, opt runtime 24.465s, model runtime 24.465s, pg runtime 644.779s, speedup 26.356x
32, opt runtime 25.478s, model runtime 25.478s, pg runtime 642.079s, speedup 25.201x
33, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
34, opt runtime 41.237s, model runtime 44.767s, pg runtime 78.181s, speedup 1.746x
35, opt runtime 16.301s, model runtime 16.655s, pg runtime 646.719s, speedup 38.830x
36, opt runtime 16.482s, model runtime 16.482s, pg runtime 622.915s, speedup 37.794x
37, opt runtime 32.901s, model runtime 32.901s, pg runtime 32.901s, speedup 1.000x
38, opt runtime 32.492s, model runtime 32.492s, pg runtime 32.492s, speedup 1.000x
39, opt runtime 1.116s, model runtime 1.161s, pg runtime 1.161s, speedup 1.000x
40, opt runtime 1.020s, model runtime 1.125s, pg runtime 1.125s, speedup 1.000x
====================
JOB best validation speedup epoch: 19, train speedup 4.950, test speedup 0.933, val speedup 5.424
TPCH best validation speedup epoch: 19, train speedup 4.950, test speedup 4.310, val speedup 5.424
TPCH Skew best validation speedup epoch: 19, train speedup 4.950, test speedup 3.986, val speedup 5.424
execution cost 0:03:20.038501
==================================================
