all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.932667, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005512| train set 1.512x speedup, test set 1.242x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005147| train set 1.530x speedup, test set 1.334x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004081| train set 1.466x speedup, test set 1.223x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.003776| train set 1.520x speedup, test set 1.366x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003286| train set 1.524x speedup, test set 0.872x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002680| train set 1.790x speedup, test set 1.493x speedup, val set 0.450x speedup, step: 2
Epoch 10/300 |loss: 0.003070| train set 1.786x speedup, test set 1.528x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002282| train set 1.805x speedup, test set 0.964x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002115| train set 1.732x speedup, test set 0.862x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001822| train set 1.776x speedup, test set 1.003x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001431| train set 1.776x speedup, test set 0.878x speedup, val set 1.000x speedup, step: 1
Epoch 15/300 |loss: 0.001718| train set 1.808x speedup, test set 1.004x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.001492| train set 1.807x speedup, test set 1.012x speedup, val set 0.822x speedup, step: 3
Epoch 17/300 |loss: 0.001248| train set 1.807x speedup, test set 0.998x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001392| train set 1.740x speedup, test set 0.862x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001121| train set 1.810x speedup, test set 0.995x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001052| train set 1.808x speedup, test set 1.002x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001063| train set 1.810x speedup, test set 0.997x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001119| train set 1.805x speedup, test set 0.998x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001097| train set 1.809x speedup, test set 0.864x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001069| train set 1.775x speedup, test set 1.004x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001222| train set 1.774x speedup, test set 1.008x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001051| train set 1.809x speedup, test set 1.001x speedup, val set 0.822x speedup, step: 2
Epoch 27/300 |loss: 0.001037| train set 1.773x speedup, test set 1.004x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001206| train set 1.810x speedup, test set 1.008x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001124| train set 1.810x speedup, test set 0.997x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.948 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.333s, pg runtime 8.283s, speedup 0.994x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.373s, pg runtime 10.605s, speedup 1.022x
10, opt runtime 3.248s, model runtime 10.020s, pg runtime 10.538s, speedup 1.052x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 11.835s, pg runtime 10.685s, speedup 0.903x
14, opt runtime 0.157s, model runtime 0.537s, pg runtime 0.393s, speedup 0.732x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.388s, pg runtime 3.645s, speedup 9.388x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 0.995, val speedup 1.000
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.810, test speedup 0.997, val speedup 1.000
last model at epoch 29, train speedup 1.810, test speedup 0.997, val speedup 1.000
execution cost 0:01:29.013614
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.992464, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005510| train set 1.537x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005133| train set 1.530x speedup, test set 1.274x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004162| train set 1.443x speedup, test set 1.291x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004430| train set 1.548x speedup, test set 1.785x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003825| train set 1.551x speedup, test set 1.732x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002614| train set 1.791x speedup, test set 1.630x speedup, val set 0.429x speedup, step: 2
Epoch 10/300 |loss: 0.002740| train set 1.786x speedup, test set 1.659x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002330| train set 1.790x speedup, test set 1.037x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002160| train set 1.727x speedup, test set 0.863x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001652| train set 1.776x speedup, test set 1.003x speedup, val set 1.000x speedup, step: 1
Epoch 14/300 |loss: 0.001380| train set 1.776x speedup, test set 0.874x speedup, val set 1.000x speedup, step: 1
Epoch 15/300 |loss: 0.001665| train set 1.791x speedup, test set 1.727x speedup, val set 1.000x speedup, step: 1
Epoch 16/300 |loss: 0.002128| train set 1.748x speedup, test set 0.862x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001490| train set 1.807x speedup, test set 0.991x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001474| train set 1.809x speedup, test set 1.008x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001113| train set 1.810x speedup, test set 1.070x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001038| train set 1.810x speedup, test set 1.021x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001055| train set 1.810x speedup, test set 1.072x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001061| train set 1.803x speedup, test set 1.027x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001046| train set 1.810x speedup, test set 0.999x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001042| train set 1.771x speedup, test set 1.010x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001155| train set 1.810x speedup, test set 0.859x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001037| train set 1.809x speedup, test set 0.991x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001018| train set 1.773x speedup, test set 1.042x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001195| train set 1.773x speedup, test set 0.981x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001061| train set 1.810x speedup, test set 0.980x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.942 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.388s, pg runtime 3.645s, speedup 9.388x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 1.070, val speedup 1.000
best test speedup epoch: 7, train speedup 1.548, test speedup 1.785, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.810, test speedup 0.980, val speedup 1.000
last model at epoch 29, train speedup 1.810, test speedup 0.980, val speedup 1.000
execution cost 0:01:27.204069
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.986394, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005511| train set 1.537x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005145| train set 1.530x speedup, test set 1.315x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004144| train set 1.746x speedup, test set 1.231x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004406| train set 1.548x speedup, test set 1.007x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003850| train set 1.551x speedup, test set 1.726x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002681| train set 1.790x speedup, test set 1.546x speedup, val set 0.343x speedup, step: 2
Epoch 10/300 |loss: 0.002615| train set 1.805x speedup, test set 1.498x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002389| train set 1.805x speedup, test set 1.839x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002112| train set 1.730x speedup, test set 0.873x speedup, val set 0.744x speedup, step: 5
Epoch 13/300 |loss: 0.001797| train set 1.776x speedup, test set 1.007x speedup, val set 0.477x speedup, step: 6
Epoch 14/300 |loss: 0.001385| train set 1.776x speedup, test set 0.879x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001503| train set 1.791x speedup, test set 0.966x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.001635| train set 1.791x speedup, test set 1.839x speedup, val set 0.450x speedup, step: 3
Epoch 17/300 |loss: 0.001683| train set 1.786x speedup, test set 1.667x speedup, val set 0.477x speedup, step: 4
Epoch 18/300 |loss: 0.001523| train set 1.809x speedup, test set 0.855x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001147| train set 1.810x speedup, test set 1.050x speedup, val set 0.477x speedup, step: 2
Epoch 20/300 |loss: 0.001050| train set 1.810x speedup, test set 1.008x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001042| train set 1.810x speedup, test set 1.034x speedup, val set 0.895x speedup, step: 2
Epoch 22/300 |loss: 0.001083| train set 1.802x speedup, test set 1.008x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001118| train set 1.776x speedup, test set 1.010x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001047| train set 1.775x speedup, test set 1.018x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001192| train set 1.772x speedup, test set 0.993x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001044| train set 1.809x speedup, test set 1.022x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001028| train set 1.771x speedup, test set 1.021x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001181| train set 1.807x speedup, test set 0.993x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001098| train set 1.806x speedup, test set 1.034x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.967 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.333s, pg runtime 8.283s, speedup 0.994x
07, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
08, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
09, opt runtime 2.324s, model runtime 10.373s, pg runtime 10.605s, speedup 1.022x
10, opt runtime 3.248s, model runtime 10.020s, pg runtime 10.538s, speedup 1.052x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 1.050, val speedup 0.477
best test speedup epoch: 16, train speedup 1.791, test speedup 1.839, val speedup 0.450
best validation speedup epoch: 29, train speedup 1.806, test speedup 1.034, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 1.034, val speedup 1.000
execution cost 0:01:28.718303
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.614766, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012197| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007280| train set 1.436x speedup, test set 1.264x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006063| train set 1.451x speedup, test set 1.171x speedup, val set 0.501x speedup, step: 4
Epoch 4/300 |loss: 0.005548| train set 1.525x speedup, test set 1.252x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005114| train set 1.530x speedup, test set 1.231x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004137| train set 1.432x speedup, test set 1.243x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004456| train set 1.520x speedup, test set 1.325x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003822| train set 1.551x speedup, test set 1.709x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002659| train set 1.791x speedup, test set 1.532x speedup, val set 0.343x speedup, step: 2
Epoch 10/300 |loss: 0.003123| train set 1.788x speedup, test set 1.595x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002406| train set 1.806x speedup, test set 1.013x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002144| train set 1.727x speedup, test set 0.860x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001823| train set 1.776x speedup, test set 1.004x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001458| train set 1.776x speedup, test set 0.879x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001748| train set 1.791x speedup, test set 0.989x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.002154| train set 1.747x speedup, test set 0.862x speedup, val set 0.822x speedup, step: 1
Epoch 17/300 |loss: 0.001479| train set 1.756x speedup, test set 1.009x speedup, val set 0.477x speedup, step: 2
Epoch 18/300 |loss: 0.001503| train set 1.809x speedup, test set 0.859x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001109| train set 1.810x speedup, test set 1.021x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001033| train set 1.810x speedup, test set 1.010x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001084| train set 1.810x speedup, test set 1.012x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001059| train set 1.804x speedup, test set 1.021x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001048| train set 1.772x speedup, test set 0.867x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001047| train set 1.775x speedup, test set 0.867x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001179| train set 1.776x speedup, test set 0.849x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001015| train set 1.809x speedup, test set 1.011x speedup, val set 0.822x speedup, step: 2
Epoch 27/300 |loss: 0.001008| train set 1.772x speedup, test set 0.867x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001200| train set 1.772x speedup, test set 0.996x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001116| train set 1.805x speedup, test set 1.018x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.718 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.333s, pg runtime 8.283s, speedup 0.994x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.537s, pg runtime 0.393s, speedup 0.732x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.388s, pg runtime 3.645s, speedup 9.388x
20, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 20, train speedup 1.810, test speedup 1.010, val speedup 1.000
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.805, test speedup 1.018, val speedup 1.000
last model at epoch 29, train speedup 1.805, test speedup 1.018, val speedup 1.000
execution cost 0:01:12.137231
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.958858, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006184| train set 1.454x speedup, test set 1.550x speedup, val set 0.482x speedup, step: 4
Epoch 4/300 |loss: 0.005478| train set 1.537x speedup, test set 1.336x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004933| train set 1.530x speedup, test set 0.867x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004217| train set 1.466x speedup, test set 1.249x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004302| train set 1.520x speedup, test set 1.037x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003833| train set 1.551x speedup, test set 1.822x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002648| train set 1.790x speedup, test set 1.721x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.002841| train set 1.786x speedup, test set 1.621x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002356| train set 1.806x speedup, test set 1.051x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002146| train set 1.729x speedup, test set 0.866x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001681| train set 1.754x speedup, test set 1.004x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001367| train set 1.776x speedup, test set 0.863x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001637| train set 1.791x speedup, test set 1.608x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.002006| train set 1.747x speedup, test set 1.012x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001481| train set 1.809x speedup, test set 1.636x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001486| train set 1.775x speedup, test set 0.824x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001168| train set 1.810x speedup, test set 1.661x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001058| train set 1.810x speedup, test set 0.817x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001061| train set 1.805x speedup, test set 0.975x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001068| train set 1.806x speedup, test set 0.991x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001121| train set 1.772x speedup, test set 0.992x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001068| train set 1.809x speedup, test set 1.004x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001227| train set 1.776x speedup, test set 0.976x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001072| train set 1.807x speedup, test set 1.007x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001028| train set 1.774x speedup, test set 1.023x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001220| train set 1.810x speedup, test set 1.602x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001120| train set 1.786x speedup, test set 1.605x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.964 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
08, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.323s, pg runtime 53.885s, speedup 23.201x
16, opt runtime 1.876s, model runtime 7.477s, pg runtime 6.089s, speedup 0.814x
17, opt runtime 2.413s, model runtime 5.597s, pg runtime 57.198s, speedup 10.219x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 10.045s, pg runtime 8.605s, speedup 0.857x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 1.661, val speedup 1.000
best test speedup epoch: 8, train speedup 1.551, test speedup 1.822, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.786, test speedup 1.605, val speedup 1.000
last model at epoch 29, train speedup 1.786, test speedup 1.605, val speedup 1.000
execution cost 0:01:29.401297
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:01.020668, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006107| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005513| train set 1.537x speedup, test set 1.229x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005414| train set 1.555x speedup, test set 1.239x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004035| train set 1.466x speedup, test set 1.272x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004265| train set 1.521x speedup, test set 0.864x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003940| train set 1.585x speedup, test set 1.575x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002737| train set 1.790x speedup, test set 1.498x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.003048| train set 1.786x speedup, test set 1.498x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002431| train set 1.803x speedup, test set 1.668x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002179| train set 1.729x speedup, test set 0.859x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001884| train set 1.810x speedup, test set 1.538x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001460| train set 1.775x speedup, test set 0.860x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001806| train set 1.790x speedup, test set 1.604x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.002111| train set 1.807x speedup, test set 1.014x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001499| train set 1.806x speedup, test set 1.517x speedup, val set 0.895x speedup, step: 2
Epoch 18/300 |loss: 0.001327| train set 1.809x speedup, test set 1.233x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001122| train set 1.810x speedup, test set 1.517x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001037| train set 1.808x speedup, test set 1.590x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001044| train set 1.810x speedup, test set 0.974x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001062| train set 1.802x speedup, test set 0.980x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001100| train set 1.810x speedup, test set 0.954x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001073| train set 1.775x speedup, test set 1.622x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001178| train set 1.772x speedup, test set 1.606x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001039| train set 1.809x speedup, test set 1.661x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001024| train set 1.774x speedup, test set 1.635x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001183| train set 1.806x speedup, test set 1.580x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001065| train set 1.802x speedup, test set 1.608x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.956 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
08, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 1.517, val speedup 1.000
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.802, test speedup 1.608, val speedup 1.000
last model at epoch 29, train speedup 1.802, test speedup 1.608, val speedup 1.000
execution cost 0:01:28.731590
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:01.121000, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006086| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005519| train set 1.527x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004820| train set 1.530x speedup, test set 1.323x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004262| train set 1.444x speedup, test set 1.310x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004366| train set 1.536x speedup, test set 1.385x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003859| train set 1.764x speedup, test set 1.769x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002771| train set 1.743x speedup, test set 1.712x speedup, val set 0.450x speedup, step: 2
Epoch 10/300 |loss: 0.002620| train set 1.803x speedup, test set 1.599x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002367| train set 1.805x speedup, test set 1.653x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002069| train set 1.732x speedup, test set 1.678x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001423| train set 1.810x speedup, test set 1.669x speedup, val set 0.822x speedup, step: 1
Epoch 14/300 |loss: 0.001222| train set 1.776x speedup, test set 1.732x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001528| train set 1.791x speedup, test set 1.573x speedup, val set 0.643x speedup, step: 2
Epoch 16/300 |loss: 0.001989| train set 1.747x speedup, test set 1.724x speedup, val set 0.822x speedup, step: 1
Epoch 17/300 |loss: 0.001472| train set 1.810x speedup, test set 1.704x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001411| train set 1.810x speedup, test set 1.533x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001071| train set 1.810x speedup, test set 1.719x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001041| train set 1.810x speedup, test set 1.511x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001044| train set 1.806x speedup, test set 1.663x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001065| train set 1.806x speedup, test set 1.658x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001065| train set 1.775x speedup, test set 1.576x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001060| train set 1.807x speedup, test set 1.726x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001176| train set 1.716x speedup, test set 1.599x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001118| train set 1.809x speedup, test set 1.687x speedup, val set 0.846x speedup, step: 2
Epoch 27/300 |loss: 0.001029| train set 1.773x speedup, test set 1.683x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001282| train set 1.748x speedup, test set 1.606x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001145| train set 1.806x speedup, test set 1.510x speedup, val set 0.887x speedup, step: 2
early stopping at epoch 29
Training per epoch cost 0.970 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 0.310s, pg runtime 2.352s, speedup 7.592x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 17, train speedup 1.810, test speedup 1.704, val speedup 1.000
best test speedup epoch: 8, train speedup 1.764, test speedup 1.769, val speedup 0.822
best validation speedup epoch: 28, train speedup 1.748, test speedup 1.606, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 1.510, val speedup 0.887
execution cost 0:01:28.264426
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.674153, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006084| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005507| train set 1.537x speedup, test set 1.239x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004890| train set 1.530x speedup, test set 1.300x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004298| train set 1.444x speedup, test set 1.257x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004468| train set 1.536x speedup, test set 1.037x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.004152| train set 1.538x speedup, test set 1.681x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002789| train set 1.746x speedup, test set 1.615x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.003426| train set 1.805x speedup, test set 1.597x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002508| train set 1.801x speedup, test set 1.605x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002041| train set 1.729x speedup, test set 0.852x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001925| train set 1.810x speedup, test set 1.511x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001506| train set 1.776x speedup, test set 0.994x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001721| train set 1.791x speedup, test set 1.511x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.002253| train set 1.549x speedup, test set 1.513x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001877| train set 1.810x speedup, test set 1.502x speedup, val set 0.477x speedup, step: 2
Epoch 18/300 |loss: 0.001195| train set 1.810x speedup, test set 1.452x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001039| train set 1.810x speedup, test set 1.511x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001028| train set 1.810x speedup, test set 1.511x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001056| train set 1.773x speedup, test set 1.511x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001060| train set 1.802x speedup, test set 1.502x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001087| train set 1.806x speedup, test set 1.466x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001057| train set 1.775x speedup, test set 1.449x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001139| train set 1.776x speedup, test set 1.457x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001016| train set 1.808x speedup, test set 1.502x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001021| train set 1.774x speedup, test set 1.511x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001383| train set 1.806x speedup, test set 1.174x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001444| train set 1.802x speedup, test set 1.509x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.715 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.826s, pg runtime 3.645s, speedup 4.416x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.128s, pg runtime 0.965s, speedup 0.856x
====================
best train speedup epoch: 17, train speedup 1.810, test speedup 1.502, val speedup 0.477
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.802, test speedup 1.509, val speedup 1.000
last model at epoch 29, train speedup 1.802, test speedup 1.509, val speedup 1.000
execution cost 0:01:11.897753
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.995518, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005511| train set 1.537x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005147| train set 1.530x speedup, test set 1.293x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004138| train set 1.444x speedup, test set 1.223x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004352| train set 1.761x speedup, test set 1.020x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003804| train set 1.551x speedup, test set 1.726x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002663| train set 1.810x speedup, test set 1.533x speedup, val set 0.450x speedup, step: 2
Epoch 10/300 |loss: 0.002790| train set 1.788x speedup, test set 1.498x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002308| train set 1.810x speedup, test set 1.813x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002113| train set 1.727x speedup, test set 0.869x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001719| train set 1.809x speedup, test set 0.860x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001336| train set 1.776x speedup, test set 0.878x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001687| train set 1.791x speedup, test set 0.960x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.001972| train set 1.543x speedup, test set 0.848x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001494| train set 1.806x speedup, test set 0.925x speedup, val set 0.477x speedup, step: 2
Epoch 18/300 |loss: 0.001454| train set 1.810x speedup, test set 0.818x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001140| train set 1.810x speedup, test set 0.972x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001032| train set 1.810x speedup, test set 0.839x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001055| train set 1.806x speedup, test set 1.016x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001062| train set 1.804x speedup, test set 1.019x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001091| train set 1.810x speedup, test set 0.975x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001050| train set 1.775x speedup, test set 1.008x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001181| train set 1.774x speedup, test set 0.916x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001037| train set 1.809x speedup, test set 1.006x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001022| train set 1.771x speedup, test set 1.051x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001140| train set 1.810x speedup, test set 0.941x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001082| train set 1.806x speedup, test set 0.976x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.932 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.373s, pg runtime 10.605s, speedup 1.022x
10, opt runtime 3.248s, model runtime 10.020s, pg runtime 10.538s, speedup 1.052x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 0.972, val speedup 1.000
best test speedup epoch: 11, train speedup 1.810, test speedup 1.813, val speedup 0.477
best validation speedup epoch: 29, train speedup 1.806, test speedup 0.976, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 0.976, val speedup 1.000
execution cost 0:01:27.561677
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.982371, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005513| train set 1.512x speedup, test set 1.242x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005166| train set 1.530x speedup, test set 1.315x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004095| train set 1.466x speedup, test set 1.231x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004302| train set 1.547x speedup, test set 1.044x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003747| train set 1.551x speedup, test set 1.726x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002579| train set 1.790x speedup, test set 1.533x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.002566| train set 1.790x speedup, test set 1.497x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002317| train set 1.806x speedup, test set 1.667x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002167| train set 1.730x speedup, test set 0.860x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001698| train set 1.776x speedup, test set 0.865x speedup, val set 0.822x speedup, step: 1
Epoch 14/300 |loss: 0.001226| train set 1.776x speedup, test set 0.867x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001818| train set 1.803x speedup, test set 0.993x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.001892| train set 1.773x speedup, test set 0.860x speedup, val set 0.822x speedup, step: 1
Epoch 17/300 |loss: 0.001337| train set 1.795x speedup, test set 0.854x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001532| train set 1.808x speedup, test set 0.862x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001271| train set 1.806x speedup, test set 0.862x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001053| train set 1.810x speedup, test set 0.862x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001061| train set 1.808x speedup, test set 0.855x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001103| train set 1.804x speedup, test set 0.859x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001043| train set 1.776x speedup, test set 0.867x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001063| train set 1.775x speedup, test set 0.868x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001167| train set 1.771x speedup, test set 0.862x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001066| train set 1.809x speedup, test set 0.867x speedup, val set 0.822x speedup, step: 2
Epoch 27/300 |loss: 0.001060| train set 1.773x speedup, test set 0.868x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001240| train set 1.803x speedup, test set 0.862x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001117| train set 1.806x speedup, test set 0.833x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.948 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.333s, pg runtime 8.283s, speedup 0.994x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.373s, pg runtime 10.605s, speedup 1.022x
10, opt runtime 3.248s, model runtime 10.020s, pg runtime 10.538s, speedup 1.052x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 48.924s, pg runtime 13.945s, speedup 0.285x
13, opt runtime 5.179s, model runtime 11.835s, pg runtime 10.685s, speedup 0.903x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 20, train speedup 1.810, test speedup 0.862, val speedup 1.000
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.806, test speedup 0.833, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 0.833, val speedup 1.000
execution cost 0:01:26.209571
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.557096, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006084| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005507| train set 1.537x speedup, test set 1.239x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004878| train set 1.530x speedup, test set 0.846x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004232| train set 1.444x speedup, test set 1.275x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004497| train set 1.548x speedup, test set 1.037x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.004037| train set 1.540x speedup, test set 1.828x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002569| train set 1.790x speedup, test set 1.519x speedup, val set 0.358x speedup, step: 2
Epoch 10/300 |loss: 0.002659| train set 1.788x speedup, test set 1.597x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002280| train set 1.803x speedup, test set 1.037x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002026| train set 1.727x speedup, test set 0.998x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001619| train set 1.809x speedup, test set 1.762x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001309| train set 1.776x speedup, test set 0.865x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001686| train set 1.788x speedup, test set 1.025x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.001471| train set 1.810x speedup, test set 1.043x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001159| train set 1.810x speedup, test set 1.030x speedup, val set 0.752x speedup, step: 2
Epoch 18/300 |loss: 0.001174| train set 1.810x speedup, test set 0.850x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001152| train set 1.810x speedup, test set 1.044x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001058| train set 1.809x speedup, test set 0.991x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001106| train set 1.807x speedup, test set 1.043x speedup, val set 0.477x speedup, step: 2
Epoch 22/300 |loss: 0.001213| train set 1.806x speedup, test set 1.006x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001103| train set 1.810x speedup, test set 0.999x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001081| train set 1.773x speedup, test set 1.003x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001135| train set 1.776x speedup, test set 0.991x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001056| train set 1.809x speedup, test set 1.666x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001008| train set 1.776x speedup, test set 1.718x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001158| train set 1.810x speedup, test set 1.508x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001297| train set 1.798x speedup, test set 1.509x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.530 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 1.044, val speedup 1.000
best test speedup epoch: 8, train speedup 1.540, test speedup 1.828, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.798, test speedup 1.509, val speedup 1.000
last model at epoch 29, train speedup 1.798, test speedup 1.509, val speedup 1.000
execution cost 0:00:38.806416
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.608568, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005511| train set 1.537x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005147| train set 1.530x speedup, test set 1.293x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004140| train set 1.444x speedup, test set 1.223x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004417| train set 1.548x speedup, test set 1.048x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.004002| train set 1.551x speedup, test set 1.580x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002594| train set 1.807x speedup, test set 1.513x speedup, val set 0.429x speedup, step: 2
Epoch 10/300 |loss: 0.002758| train set 1.788x speedup, test set 1.498x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002340| train set 1.806x speedup, test set 1.635x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002081| train set 1.731x speedup, test set 0.862x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001570| train set 1.776x speedup, test set 1.321x speedup, val set 1.000x speedup, step: 1
Epoch 14/300 |loss: 0.001265| train set 1.776x speedup, test set 0.886x speedup, val set 0.822x speedup, step: 2
Epoch 15/300 |loss: 0.001746| train set 1.783x speedup, test set 0.856x speedup, val set 1.000x speedup, step: 1
Epoch 16/300 |loss: 0.001527| train set 1.808x speedup, test set 0.865x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001204| train set 1.800x speedup, test set 0.837x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001234| train set 1.810x speedup, test set 0.866x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001123| train set 1.810x speedup, test set 0.859x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001046| train set 1.808x speedup, test set 0.866x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001063| train set 1.809x speedup, test set 1.034x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001148| train set 1.806x speedup, test set 0.865x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001113| train set 1.810x speedup, test set 0.859x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001075| train set 1.809x speedup, test set 0.866x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001118| train set 1.776x speedup, test set 0.837x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001060| train set 1.809x speedup, test set 1.000x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001019| train set 1.774x speedup, test set 0.858x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001174| train set 1.810x speedup, test set 0.948x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001165| train set 1.806x speedup, test set 0.945x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.502 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 0.859, val speedup 1.000
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.806, test speedup 0.945, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 0.945, val speedup 1.000
execution cost 0:00:38.831722
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.526820, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005513| train set 1.512x speedup, test set 1.242x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005155| train set 1.530x speedup, test set 1.293x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004070| train set 1.466x speedup, test set 1.284x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004504| train set 1.548x speedup, test set 1.735x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003879| train set 1.551x speedup, test set 1.590x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002710| train set 1.790x speedup, test set 1.533x speedup, val set 0.358x speedup, step: 2
Epoch 10/300 |loss: 0.002729| train set 1.786x speedup, test set 1.501x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002354| train set 1.805x speedup, test set 1.669x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002166| train set 1.730x speedup, test set 0.863x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001824| train set 1.810x speedup, test set 0.998x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001428| train set 1.776x speedup, test set 0.869x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001719| train set 1.790x speedup, test set 1.610x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.002271| train set 1.716x speedup, test set 0.995x speedup, val set 0.822x speedup, step: 1
Epoch 17/300 |loss: 0.001495| train set 1.810x speedup, test set 1.579x speedup, val set 0.477x speedup, step: 2
Epoch 18/300 |loss: 0.001414| train set 1.810x speedup, test set 1.585x speedup, val set 0.895x speedup, step: 1
Epoch 19/300 |loss: 0.001121| train set 1.810x speedup, test set 1.018x speedup, val set 0.477x speedup, step: 2
Epoch 20/300 |loss: 0.001033| train set 1.810x speedup, test set 0.976x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001057| train set 1.810x speedup, test set 1.009x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001063| train set 1.808x speedup, test set 1.023x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001075| train set 1.775x speedup, test set 0.996x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001048| train set 1.775x speedup, test set 1.004x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001169| train set 1.776x speedup, test set 0.961x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001028| train set 1.809x speedup, test set 0.985x speedup, val set 0.851x speedup, step: 2
Epoch 27/300 |loss: 0.001024| train set 1.773x speedup, test set 0.986x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001137| train set 1.810x speedup, test set 0.948x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001049| train set 1.806x speedup, test set 0.986x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.508 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 0.164s, pg runtime 0.393s, speedup 2.396x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.826s, pg runtime 3.645s, speedup 4.416x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 1.018, val speedup 0.477
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.806, test speedup 0.986, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 0.986, val speedup 1.000
execution cost 0:00:38.434955
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.529507, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005510| train set 1.537x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005132| train set 1.530x speedup, test set 1.274x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004097| train set 1.444x speedup, test set 1.224x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004214| train set 1.520x speedup, test set 1.344x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003763| train set 1.551x speedup, test set 1.330x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002662| train set 1.790x speedup, test set 1.630x speedup, val set 0.450x speedup, step: 2
Epoch 10/300 |loss: 0.002511| train set 1.805x speedup, test set 1.548x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002380| train set 1.806x speedup, test set 1.766x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002088| train set 1.733x speedup, test set 0.863x speedup, val set 0.808x speedup, step: 5
Epoch 13/300 |loss: 0.001510| train set 1.776x speedup, test set 1.022x speedup, val set 0.477x speedup, step: 6
Epoch 14/300 |loss: 0.001231| train set 1.776x speedup, test set 0.867x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001444| train set 1.810x speedup, test set 1.020x speedup, val set 1.000x speedup, step: 1
Epoch 16/300 |loss: 0.001545| train set 1.807x speedup, test set 0.998x speedup, val set 0.822x speedup, step: 2
Epoch 17/300 |loss: 0.001246| train set 1.806x speedup, test set 0.993x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001275| train set 1.775x speedup, test set 0.861x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001133| train set 1.809x speedup, test set 0.993x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001033| train set 1.810x speedup, test set 0.854x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001094| train set 1.810x speedup, test set 1.020x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001185| train set 1.806x speedup, test set 0.994x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001163| train set 1.806x speedup, test set 0.993x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001104| train set 1.773x speedup, test set 0.853x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001275| train set 1.776x speedup, test set 1.034x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001060| train set 1.807x speedup, test set 0.993x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001132| train set 1.774x speedup, test set 1.006x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001207| train set 1.808x speedup, test set 0.934x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001111| train set 1.806x speedup, test set 0.934x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.505 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 21, train speedup 1.810, test speedup 1.020, val speedup 1.000
best test speedup epoch: 11, train speedup 1.806, test speedup 1.766, val speedup 0.477
best validation speedup epoch: 29, train speedup 1.806, test speedup 0.934, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 0.934, val speedup 1.000
execution cost 0:00:37.525980
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.520944, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005512| train set 1.537x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005163| train set 1.530x speedup, test set 1.293x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004063| train set 1.444x speedup, test set 1.265x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004277| train set 1.548x speedup, test set 0.870x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003622| train set 1.551x speedup, test set 1.341x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002653| train set 1.790x speedup, test set 1.541x speedup, val set 0.429x speedup, step: 2
Epoch 10/300 |loss: 0.002818| train set 1.789x speedup, test set 1.571x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002294| train set 1.805x speedup, test set 1.685x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002096| train set 1.730x speedup, test set 0.862x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001706| train set 1.810x speedup, test set 0.861x speedup, val set 0.822x speedup, step: 1
Epoch 14/300 |loss: 0.001316| train set 1.776x speedup, test set 0.869x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001620| train set 1.791x speedup, test set 1.008x speedup, val set 1.000x speedup, step: 1
Epoch 16/300 |loss: 0.001785| train set 1.807x speedup, test set 0.861x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001241| train set 1.792x speedup, test set 1.000x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001280| train set 1.810x speedup, test set 0.869x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001118| train set 1.810x speedup, test set 1.004x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001043| train set 1.808x speedup, test set 0.865x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001078| train set 1.806x speedup, test set 1.015x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001088| train set 1.806x speedup, test set 1.004x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001109| train set 1.810x speedup, test set 0.867x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001176| train set 1.773x speedup, test set 0.861x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001123| train set 1.774x speedup, test set 1.000x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001030| train set 1.809x speedup, test set 1.004x speedup, val set 0.822x speedup, step: 2
Epoch 27/300 |loss: 0.001033| train set 1.774x speedup, test set 0.865x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001201| train set 1.810x speedup, test set 0.821x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001108| train set 1.786x speedup, test set 0.971x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.539 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.373s, pg runtime 10.605s, speedup 1.022x
10, opt runtime 3.248s, model runtime 10.020s, pg runtime 10.538s, speedup 1.052x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 10.240s, pg runtime 10.685s, speedup 1.043x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.826s, pg runtime 3.645s, speedup 4.416x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 13, train speedup 1.810, test speedup 0.861, val speedup 0.822
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.786, test speedup 0.971, val speedup 1.000
last model at epoch 29, train speedup 1.786, test speedup 0.971, val speedup 1.000
execution cost 0:00:38.847513
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.538431, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006084| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005498| train set 1.512x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004884| train set 1.530x speedup, test set 1.302x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004300| train set 1.466x speedup, test set 1.224x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004444| train set 1.548x speedup, test set 1.044x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003881| train set 1.765x speedup, test set 1.761x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002519| train set 1.786x speedup, test set 1.636x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.002883| train set 1.803x speedup, test set 1.502x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002346| train set 1.805x speedup, test set 1.648x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002006| train set 1.729x speedup, test set 0.993x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001568| train set 1.732x speedup, test set 1.708x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001286| train set 1.776x speedup, test set 0.853x speedup, val set 1.000x speedup, step: 1
Epoch 15/300 |loss: 0.001559| train set 1.791x speedup, test set 1.580x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.002158| train set 1.810x speedup, test set 0.991x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001338| train set 1.746x speedup, test set 1.649x speedup, val set 0.477x speedup, step: 2
Epoch 18/300 |loss: 0.001454| train set 1.810x speedup, test set 0.820x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001141| train set 1.810x speedup, test set 1.715x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001027| train set 1.810x speedup, test set 1.012x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001044| train set 1.810x speedup, test set 1.006x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001101| train set 1.808x speedup, test set 0.987x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001103| train set 1.810x speedup, test set 0.984x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001038| train set 1.809x speedup, test set 1.010x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001151| train set 1.773x speedup, test set 1.001x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001049| train set 1.809x speedup, test set 1.005x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001065| train set 1.771x speedup, test set 1.011x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001233| train set 1.810x speedup, test set 1.758x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001079| train set 1.806x speedup, test set 1.607x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.529 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 10.020s, pg runtime 10.538s, speedup 1.052x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 1.715, val speedup 1.000
best test speedup epoch: 8, train speedup 1.765, test speedup 1.761, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.806, test speedup 1.607, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 1.607, val speedup 1.000
execution cost 0:00:39.717146
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.538917, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046361| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012203| train set 1.340x speedup, test set 0.994x speedup, val set 0.327x speedup, step: 2
Epoch 2/300 |loss: 0.007293| train set 1.336x speedup, test set 1.539x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006144| train set 1.451x speedup, test set 1.515x speedup, val set 0.356x speedup, step: 4
Epoch 4/300 |loss: 0.005394| train set 1.515x speedup, test set 0.845x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005276| train set 1.529x speedup, test set 1.389x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004000| train set 1.464x speedup, test set 1.325x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004501| train set 1.544x speedup, test set 0.981x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003908| train set 1.764x speedup, test set 1.676x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002544| train set 1.806x speedup, test set 0.981x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.002902| train set 1.731x speedup, test set 0.979x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002453| train set 1.786x speedup, test set 1.008x speedup, val set 0.450x speedup, step: 4
Epoch 12/300 |loss: 0.002109| train set 1.733x speedup, test set 0.861x speedup, val set 0.744x speedup, step: 5
Epoch 13/300 |loss: 0.001660| train set 1.776x speedup, test set 0.999x speedup, val set 0.477x speedup, step: 6
Epoch 14/300 |loss: 0.001444| train set 1.776x speedup, test set 0.870x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001632| train set 1.790x speedup, test set 0.993x speedup, val set 0.450x speedup, step: 2
Epoch 16/300 |loss: 0.001685| train set 1.748x speedup, test set 0.861x speedup, val set 0.822x speedup, step: 1
Epoch 17/300 |loss: 0.001420| train set 1.747x speedup, test set 0.964x speedup, val set 0.477x speedup, step: 2
Epoch 18/300 |loss: 0.001306| train set 1.809x speedup, test set 0.854x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001114| train set 1.806x speedup, test set 0.971x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001045| train set 1.810x speedup, test set 0.971x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001050| train set 1.772x speedup, test set 0.982x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001058| train set 1.808x speedup, test set 0.971x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001079| train set 1.810x speedup, test set 0.823x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001118| train set 1.775x speedup, test set 0.853x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001142| train set 1.776x speedup, test set 0.827x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001060| train set 1.809x speedup, test set 0.858x speedup, val set 0.822x speedup, step: 2
Epoch 27/300 |loss: 0.001024| train set 1.772x speedup, test set 0.864x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001200| train set 1.810x speedup, test set 0.802x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001104| train set 1.806x speedup, test set 0.957x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.550 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 8.106s, pg runtime 8.283s, speedup 1.022x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.373s, pg runtime 10.605s, speedup 1.022x
10, opt runtime 3.248s, model runtime 10.020s, pg runtime 10.538s, speedup 1.052x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 8.144s, pg runtime 13.945s, speedup 1.712x
13, opt runtime 5.179s, model runtime 11.835s, pg runtime 10.685s, speedup 0.903x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 1.091s, pg runtime 2.558s, speedup 2.346x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 28, train speedup 1.810, test speedup 0.802, val speedup 1.000
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.806, test speedup 0.957, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 0.957, val speedup 1.000
execution cost 0:00:39.595023
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.686292, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006084| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005498| train set 1.512x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004897| train set 1.530x speedup, test set 1.278x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004346| train set 1.444x speedup, test set 1.231x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004275| train set 1.548x speedup, test set 1.354x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003554| train set 1.551x speedup, test set 1.822x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002584| train set 1.786x speedup, test set 1.613x speedup, val set 0.450x speedup, step: 2
Epoch 10/300 |loss: 0.002898| train set 1.786x speedup, test set 1.603x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002377| train set 1.810x speedup, test set 1.009x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002116| train set 1.731x speedup, test set 0.866x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001658| train set 1.809x speedup, test set 1.583x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001419| train set 1.776x speedup, test set 0.865x speedup, val set 1.000x speedup, step: 1
Epoch 15/300 |loss: 0.001585| train set 1.791x speedup, test set 0.957x speedup, val set 1.000x speedup, step: 1
Epoch 16/300 |loss: 0.001811| train set 1.809x speedup, test set 1.002x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001240| train set 1.765x speedup, test set 1.661x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001249| train set 1.808x speedup, test set 1.191x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001155| train set 1.810x speedup, test set 1.627x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001044| train set 1.810x speedup, test set 1.500x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001058| train set 1.805x speedup, test set 1.576x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001220| train set 1.806x speedup, test set 0.981x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001117| train set 1.776x speedup, test set 1.500x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001056| train set 1.775x speedup, test set 1.592x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001140| train set 1.809x speedup, test set 1.502x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001029| train set 1.807x speedup, test set 1.500x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001023| train set 1.773x speedup, test set 1.452x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001264| train set 1.810x speedup, test set 1.449x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001170| train set 1.810x speedup, test set 1.504x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.522 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.128s, pg runtime 0.965s, speedup 0.856x
====================
best train speedup epoch: 11, train speedup 1.810, test speedup 1.009, val speedup 0.477
best test speedup epoch: 8, train speedup 1.551, test speedup 1.822, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.810, test speedup 1.504, val speedup 1.000
last model at epoch 29, train speedup 1.810, test speedup 1.504, val speedup 1.000
execution cost 0:00:39.009160
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.518454, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005500| train set 1.540x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005105| train set 1.530x speedup, test set 1.274x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004173| train set 1.466x speedup, test set 1.231x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004442| train set 1.551x speedup, test set 1.732x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.004146| train set 1.539x speedup, test set 1.571x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002755| train set 1.790x speedup, test set 1.718x speedup, val set 0.450x speedup, step: 2
Epoch 10/300 |loss: 0.002825| train set 1.788x speedup, test set 1.552x speedup, val set 0.343x speedup, step: 3
Epoch 11/300 |loss: 0.002283| train set 1.806x speedup, test set 1.685x speedup, val set 0.358x speedup, step: 4
Epoch 12/300 |loss: 0.002093| train set 1.730x speedup, test set 0.862x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001756| train set 1.776x speedup, test set 0.867x speedup, val set 1.000x speedup, step: 1
Epoch 14/300 |loss: 0.001348| train set 1.776x speedup, test set 0.879x speedup, val set 0.822x speedup, step: 2
Epoch 15/300 |loss: 0.001593| train set 1.791x speedup, test set 1.010x speedup, val set 0.760x speedup, step: 3
Epoch 16/300 |loss: 0.001655| train set 1.790x speedup, test set 1.018x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001395| train set 1.807x speedup, test set 0.863x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001198| train set 1.810x speedup, test set 0.867x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001128| train set 1.810x speedup, test set 0.877x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001056| train set 1.810x speedup, test set 0.885x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001072| train set 1.807x speedup, test set 1.026x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001152| train set 1.806x speedup, test set 1.026x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001091| train set 1.776x speedup, test set 0.876x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001097| train set 1.809x speedup, test set 0.879x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001156| train set 1.776x speedup, test set 0.868x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001036| train set 1.809x speedup, test set 0.860x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001039| train set 1.773x speedup, test set 0.879x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001244| train set 1.810x speedup, test set 0.869x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001136| train set 1.805x speedup, test set 0.995x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.496 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 8.333s, pg runtime 8.283s, speedup 0.994x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.373s, pg runtime 10.605s, speedup 1.022x
10, opt runtime 3.248s, model runtime 10.020s, pg runtime 10.538s, speedup 1.052x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 11.835s, pg runtime 10.685s, speedup 0.903x
14, opt runtime 0.157s, model runtime 0.537s, pg runtime 0.393s, speedup 0.732x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.388s, pg runtime 3.645s, speedup 9.388x
20, opt runtime 0.626s, model runtime 1.369s, pg runtime 2.558s, speedup 1.868x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 0.877, val speedup 1.000
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.805, test speedup 0.995, val speedup 1.000
last model at epoch 29, train speedup 1.805, test speedup 0.995, val speedup 1.000
execution cost 0:00:37.647786
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.679893, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006084| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005507| train set 1.537x speedup, test set 1.239x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004875| train set 1.530x speedup, test set 1.302x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004269| train set 1.444x speedup, test set 1.223x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004300| train set 1.548x speedup, test set 1.797x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003843| train set 1.551x speedup, test set 1.797x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002667| train set 1.786x speedup, test set 1.527x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.002994| train set 1.790x speedup, test set 1.575x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002356| train set 1.810x speedup, test set 1.589x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002280| train set 1.732x speedup, test set 0.855x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001730| train set 1.732x speedup, test set 1.533x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001310| train set 1.775x speedup, test set 0.853x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001609| train set 1.791x speedup, test set 1.562x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.002041| train set 1.732x speedup, test set 0.962x speedup, val set 0.822x speedup, step: 1
Epoch 17/300 |loss: 0.001376| train set 1.810x speedup, test set 0.980x speedup, val set 0.477x speedup, step: 2
Epoch 18/300 |loss: 0.001348| train set 1.810x speedup, test set 0.823x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001179| train set 1.810x speedup, test set 0.980x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001053| train set 1.810x speedup, test set 1.562x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001078| train set 1.774x speedup, test set 1.021x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001182| train set 1.807x speedup, test set 0.988x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001151| train set 1.806x speedup, test set 1.525x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001056| train set 1.809x speedup, test set 0.987x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001111| train set 1.774x speedup, test set 0.934x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001043| train set 1.809x speedup, test set 0.980x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001149| train set 1.774x speedup, test set 1.045x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001225| train set 1.774x speedup, test set 0.933x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001084| train set 1.806x speedup, test set 1.600x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.538 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
08, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 0.980, val speedup 1.000
best test speedup epoch: 8, train speedup 1.551, test speedup 1.797, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.806, test speedup 1.600, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 1.600, val speedup 1.000
execution cost 0:00:40.440351
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.566127, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005511| train set 1.537x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005147| train set 1.530x speedup, test set 1.293x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004138| train set 1.444x speedup, test set 1.223x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004352| train set 1.761x speedup, test set 1.020x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003792| train set 1.551x speedup, test set 1.650x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002697| train set 1.790x speedup, test set 1.630x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.002845| train set 1.788x speedup, test set 1.498x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002237| train set 1.806x speedup, test set 1.778x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002071| train set 1.730x speedup, test set 0.870x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001543| train set 1.776x speedup, test set 0.865x speedup, val set 0.955x speedup, step: 1
Epoch 14/300 |loss: 0.001264| train set 1.776x speedup, test set 0.872x speedup, val set 0.822x speedup, step: 2
Epoch 15/300 |loss: 0.001574| train set 1.810x speedup, test set 1.020x speedup, val set 1.000x speedup, step: 1
Epoch 16/300 |loss: 0.001893| train set 1.807x speedup, test set 0.856x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001363| train set 1.806x speedup, test set 1.016x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001386| train set 1.809x speedup, test set 0.827x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001258| train set 1.810x speedup, test set 0.945x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001059| train set 1.810x speedup, test set 0.817x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001045| train set 1.810x speedup, test set 1.027x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001065| train set 1.804x speedup, test set 0.862x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001061| train set 1.776x speedup, test set 0.865x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001063| train set 1.809x speedup, test set 0.863x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001200| train set 1.774x speedup, test set 0.817x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001033| train set 1.809x speedup, test set 0.855x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001051| train set 1.773x speedup, test set 0.870x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001273| train set 1.810x speedup, test set 0.798x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001135| train set 1.806x speedup, test set 0.937x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.500 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 15, train speedup 1.810, test speedup 1.020, val speedup 1.000
best test speedup epoch: 11, train speedup 1.806, test speedup 1.778, val speedup 0.477
best validation speedup epoch: 29, train speedup 1.806, test speedup 0.937, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 0.937, val speedup 1.000
execution cost 0:00:37.790929
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.564185, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006084| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005507| train set 1.537x speedup, test set 1.239x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004876| train set 1.530x speedup, test set 1.249x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004330| train set 1.444x speedup, test set 1.233x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004363| train set 1.761x speedup, test set 1.037x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003784| train set 1.765x speedup, test set 1.706x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002619| train set 1.790x speedup, test set 1.531x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.002993| train set 1.790x speedup, test set 1.663x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002316| train set 1.786x speedup, test set 1.037x speedup, val set 0.450x speedup, step: 4
Epoch 12/300 |loss: 0.002143| train set 1.729x speedup, test set 0.851x speedup, val set 0.744x speedup, step: 5
Epoch 13/300 |loss: 0.001631| train set 1.765x speedup, test set 0.986x speedup, val set 0.477x speedup, step: 6
Epoch 14/300 |loss: 0.001247| train set 1.776x speedup, test set 0.851x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001531| train set 1.791x speedup, test set 0.976x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.002103| train set 1.749x speedup, test set 0.852x speedup, val set 0.846x speedup, step: 1
Epoch 17/300 |loss: 0.001348| train set 1.803x speedup, test set 1.003x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001503| train set 1.810x speedup, test set 0.991x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001141| train set 1.810x speedup, test set 1.063x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001027| train set 1.810x speedup, test set 1.019x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001057| train set 1.810x speedup, test set 1.019x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001092| train set 1.806x speedup, test set 1.025x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001058| train set 1.810x speedup, test set 0.992x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001053| train set 1.775x speedup, test set 0.993x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001109| train set 1.773x speedup, test set 0.991x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001034| train set 1.808x speedup, test set 0.998x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001027| train set 1.774x speedup, test set 0.991x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001271| train set 1.810x speedup, test set 0.952x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001116| train set 1.806x speedup, test set 0.952x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.498 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.669s, pg runtime 3.645s, speedup 5.451x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 1.063, val speedup 1.000
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.806, test speedup 0.952, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 0.952, val speedup 1.000
execution cost 0:00:36.993159
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.528456, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006084| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005507| train set 1.537x speedup, test set 1.239x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004875| train set 1.530x speedup, test set 1.302x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004271| train set 1.444x speedup, test set 1.223x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004210| train set 1.547x speedup, test set 1.797x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003701| train set 1.548x speedup, test set 1.721x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002992| train set 1.787x speedup, test set 1.795x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.002809| train set 1.786x speedup, test set 1.547x speedup, val set 0.454x speedup, step: 3
Epoch 11/300 |loss: 0.002238| train set 1.806x speedup, test set 1.035x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002138| train set 1.728x speedup, test set 0.860x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001668| train set 1.810x speedup, test set 1.028x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001258| train set 1.776x speedup, test set 0.871x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001627| train set 1.791x speedup, test set 0.980x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.001434| train set 1.809x speedup, test set 1.035x speedup, val set 0.477x speedup, step: 3
Epoch 17/300 |loss: 0.001156| train set 1.810x speedup, test set 1.635x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001571| train set 1.810x speedup, test set 0.915x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001123| train set 1.810x speedup, test set 1.010x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001042| train set 1.810x speedup, test set 0.988x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001082| train set 1.805x speedup, test set 0.989x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001144| train set 1.806x speedup, test set 1.006x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001101| train set 1.810x speedup, test set 0.988x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001069| train set 1.809x speedup, test set 0.973x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001141| train set 1.770x speedup, test set 0.986x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001036| train set 1.806x speedup, test set 0.981x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001051| train set 1.775x speedup, test set 0.986x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001250| train set 1.809x speedup, test set 0.964x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001144| train set 1.805x speedup, test set 1.706x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.489 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
08, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 8.279s, pg runtime 8.279s, speedup 1.000x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.434s, pg runtime 8.605s, speedup 1.020x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 17, train speedup 1.810, test speedup 1.635, val speedup 1.000
best test speedup epoch: 7, train speedup 1.547, test speedup 1.797, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.805, test speedup 1.706, val speedup 1.000
last model at epoch 29, train speedup 1.805, test speedup 1.706, val speedup 1.000
execution cost 0:00:35.881528
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.661488, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005511| train set 1.537x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005145| train set 1.530x speedup, test set 1.315x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004145| train set 1.745x speedup, test set 1.231x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004401| train set 1.548x speedup, test set 0.873x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003687| train set 1.551x speedup, test set 1.634x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002693| train set 1.790x speedup, test set 1.511x speedup, val set 0.450x speedup, step: 2
Epoch 10/300 |loss: 0.002695| train set 1.788x speedup, test set 1.596x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002424| train set 1.805x speedup, test set 1.050x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002103| train set 1.730x speedup, test set 0.864x speedup, val set 0.744x speedup, step: 5
Epoch 13/300 |loss: 0.001772| train set 1.810x speedup, test set 0.993x speedup, val set 0.477x speedup, step: 6
Epoch 14/300 |loss: 0.001319| train set 1.776x speedup, test set 0.872x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001402| train set 1.810x speedup, test set 1.071x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.001419| train set 1.791x speedup, test set 1.050x speedup, val set 0.477x speedup, step: 3
Epoch 17/300 |loss: 0.001364| train set 1.807x speedup, test set 1.035x speedup, val set 0.477x speedup, step: 4
Epoch 18/300 |loss: 0.001246| train set 1.809x speedup, test set 0.995x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001119| train set 1.810x speedup, test set 1.073x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001072| train set 1.810x speedup, test set 0.997x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001145| train set 1.809x speedup, test set 1.035x speedup, val set 0.477x speedup, step: 2
Epoch 22/300 |loss: 0.001236| train set 1.806x speedup, test set 1.034x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001111| train set 1.810x speedup, test set 0.993x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001073| train set 1.775x speedup, test set 1.028x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001119| train set 1.773x speedup, test set 1.038x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001052| train set 1.809x speedup, test set 1.069x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001047| train set 1.772x speedup, test set 1.076x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001185| train set 1.806x speedup, test set 1.009x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001119| train set 1.806x speedup, test set 1.012x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.507 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
08, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 1.073, val speedup 1.000
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.806, test speedup 1.012, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 1.012, val speedup 1.000
execution cost 0:00:37.556902
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.575147, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006107| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005513| train set 1.537x speedup, test set 1.229x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005441| train set 1.530x speedup, test set 1.239x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004052| train set 1.444x speedup, test set 1.242x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004388| train set 1.537x speedup, test set 1.351x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003665| train set 1.547x speedup, test set 1.769x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002785| train set 1.790x speedup, test set 1.603x speedup, val set 0.358x speedup, step: 2
Epoch 10/300 |loss: 0.002983| train set 1.788x speedup, test set 1.501x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002283| train set 1.791x speedup, test set 1.051x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002098| train set 1.727x speedup, test set 0.875x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001700| train set 1.776x speedup, test set 1.021x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001328| train set 1.776x speedup, test set 0.878x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001603| train set 1.791x speedup, test set 1.022x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.001639| train set 1.807x speedup, test set 1.032x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001161| train set 1.807x speedup, test set 1.018x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001421| train set 1.809x speedup, test set 0.855x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001158| train set 1.810x speedup, test set 1.012x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001047| train set 1.808x speedup, test set 0.997x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001063| train set 1.810x speedup, test set 1.026x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001087| train set 1.802x speedup, test set 0.976x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001102| train set 1.771x speedup, test set 1.016x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001088| train set 1.809x speedup, test set 1.005x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001198| train set 1.810x speedup, test set 0.987x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001043| train set 1.810x speedup, test set 0.983x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001027| train set 1.773x speedup, test set 1.010x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001214| train set 1.806x speedup, test set 0.972x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001076| train set 1.791x speedup, test set 0.978x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.514 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 6.368s, pg runtime 6.143s, speedup 0.965x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.829s, pg runtime 10.605s, speedup 0.979x
10, opt runtime 3.248s, model runtime 10.638s, pg runtime 10.538s, speedup 0.991x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.388s, pg runtime 3.645s, speedup 9.388x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 10.045s, pg runtime 8.605s, speedup 0.857x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 21, train speedup 1.810, test speedup 1.026, val speedup 1.000
best test speedup epoch: 8, train speedup 1.547, test speedup 1.769, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.791, test speedup 0.978, val speedup 1.000
last model at epoch 29, train speedup 1.791, test speedup 0.978, val speedup 1.000
execution cost 0:00:38.365874
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.616739, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005510| train set 1.537x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005134| train set 1.530x speedup, test set 1.274x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004094| train set 1.444x speedup, test set 1.223x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004270| train set 1.547x speedup, test set 1.336x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003836| train set 1.551x speedup, test set 1.330x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002694| train set 1.790x speedup, test set 1.588x speedup, val set 0.450x speedup, step: 2
Epoch 10/300 |loss: 0.002993| train set 1.790x speedup, test set 1.596x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002280| train set 1.786x speedup, test set 1.034x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002179| train set 1.730x speedup, test set 0.870x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001742| train set 1.809x speedup, test set 1.021x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001406| train set 1.776x speedup, test set 0.872x speedup, val set 1.000x speedup, step: 1
Epoch 15/300 |loss: 0.001766| train set 1.791x speedup, test set 1.004x speedup, val set 1.000x speedup, step: 1
Epoch 16/300 |loss: 0.001572| train set 1.810x speedup, test set 1.030x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001201| train set 1.810x speedup, test set 1.004x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001458| train set 1.809x speedup, test set 0.862x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001101| train set 1.810x speedup, test set 1.025x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001037| train set 1.810x speedup, test set 0.993x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001072| train set 1.809x speedup, test set 1.067x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001074| train set 1.804x speedup, test set 1.014x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001105| train set 1.775x speedup, test set 0.858x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001055| train set 1.771x speedup, test set 0.996x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001157| train set 1.773x speedup, test set 1.004x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001030| train set 1.809x speedup, test set 0.998x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001040| train set 1.773x speedup, test set 1.057x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001191| train set 1.806x speedup, test set 1.008x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001103| train set 1.806x speedup, test set 0.976x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.520 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.243s, pg runtime 0.206s, speedup 0.850x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.373s, pg runtime 10.605s, speedup 1.022x
10, opt runtime 3.248s, model runtime 10.020s, pg runtime 10.538s, speedup 1.052x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 16, train speedup 1.810, test speedup 1.030, val speedup 1.000
best test speedup epoch: 0, train speedup 0.788, test speedup 1.737, val speedup 0.691
best validation speedup epoch: 29, train speedup 1.806, test speedup 0.976, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 0.976, val speedup 1.000
execution cost 0:00:37.962400
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.543624, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006084| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005507| train set 1.537x speedup, test set 1.239x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004890| train set 1.530x speedup, test set 1.303x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004298| train set 1.444x speedup, test set 1.231x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004257| train set 1.551x speedup, test set 1.797x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003669| train set 1.551x speedup, test set 1.618x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002641| train set 1.786x speedup, test set 1.520x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.003062| train set 1.789x speedup, test set 1.595x speedup, val set 0.450x speedup, step: 3
Epoch 11/300 |loss: 0.002281| train set 1.805x speedup, test set 1.029x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002164| train set 1.733x speedup, test set 1.002x speedup, val set 0.744x speedup, step: 5
Epoch 13/300 |loss: 0.001659| train set 1.810x speedup, test set 1.005x speedup, val set 1.000x speedup, step: 1
Epoch 14/300 |loss: 0.001386| train set 1.776x speedup, test set 0.853x speedup, val set 0.822x speedup, step: 2
Epoch 15/300 |loss: 0.001748| train set 1.791x speedup, test set 0.974x speedup, val set 0.477x speedup, step: 3
Epoch 16/300 |loss: 0.002240| train set 1.747x speedup, test set 0.966x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001650| train set 1.810x speedup, test set 0.976x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001337| train set 1.809x speedup, test set 0.978x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001047| train set 1.810x speedup, test set 1.034x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001024| train set 1.810x speedup, test set 0.958x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001054| train set 1.809x speedup, test set 1.025x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001060| train set 1.806x speedup, test set 0.967x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001054| train set 1.810x speedup, test set 0.987x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001046| train set 1.775x speedup, test set 0.857x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001120| train set 1.773x speedup, test set 0.955x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001032| train set 1.773x speedup, test set 0.859x speedup, val set 0.928x speedup, step: 2
Epoch 27/300 |loss: 0.001036| train set 1.774x speedup, test set 0.995x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001228| train set 1.810x speedup, test set 0.957x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001107| train set 1.810x speedup, test set 1.503x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.485 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 0.826s, pg runtime 3.645s, speedup 4.416x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 10.045s, pg runtime 8.605s, speedup 0.857x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 17, train speedup 1.810, test speedup 0.976, val speedup 1.000
best test speedup epoch: 7, train speedup 1.551, test speedup 1.797, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.810, test speedup 1.503, val speedup 1.000
last model at epoch 29, train speedup 1.810, test speedup 1.503, val speedup 1.000
execution cost 0:00:36.191181
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.554963, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007253| train set 1.433x speedup, test set 1.614x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006105| train set 1.450x speedup, test set 1.496x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005511| train set 1.537x speedup, test set 1.236x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.005147| train set 1.530x speedup, test set 1.293x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004138| train set 1.444x speedup, test set 1.223x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004352| train set 1.761x speedup, test set 1.020x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003804| train set 1.551x speedup, test set 1.726x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002663| train set 1.810x speedup, test set 1.527x speedup, val set 0.450x speedup, step: 2
Epoch 10/300 |loss: 0.002797| train set 1.788x speedup, test set 1.498x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002352| train set 1.809x speedup, test set 1.813x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002113| train set 1.732x speedup, test set 0.876x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001703| train set 1.776x speedup, test set 0.877x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001326| train set 1.776x speedup, test set 0.879x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001567| train set 1.791x speedup, test set 1.025x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.001495| train set 1.810x speedup, test set 1.006x speedup, val set 0.477x speedup, step: 3
Epoch 17/300 |loss: 0.001229| train set 1.802x speedup, test set 1.010x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001375| train set 1.809x speedup, test set 0.861x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001139| train set 1.810x speedup, test set 1.020x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001045| train set 1.808x speedup, test set 0.859x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001074| train set 1.810x speedup, test set 1.021x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001099| train set 1.806x speedup, test set 0.976x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001093| train set 1.810x speedup, test set 0.862x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001145| train set 1.775x speedup, test set 1.008x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001162| train set 1.775x speedup, test set 0.972x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001065| train set 1.809x speedup, test set 0.984x speedup, val set 1.000x speedup, step: 1
Epoch 27/300 |loss: 0.001044| train set 1.774x speedup, test set 0.959x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001152| train set 1.799x speedup, test set 1.501x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001126| train set 1.806x speedup, test set 0.980x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.497 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 19.080s, pg runtime 18.741s, speedup 0.982x
03, opt runtime 1.763s, model runtime 1.804s, pg runtime 1.763s, speedup 0.977x
04, opt runtime 1.386s, model runtime 1.408s, pg runtime 1.386s, speedup 0.985x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 10.373s, pg runtime 10.605s, speedup 1.022x
10, opt runtime 3.248s, model runtime 10.020s, pg runtime 10.538s, speedup 1.052x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 52.559s, pg runtime 53.885s, speedup 1.025x
16, opt runtime 1.876s, model runtime 6.015s, pg runtime 6.089s, speedup 1.012x
17, opt runtime 2.413s, model runtime 58.779s, pg runtime 57.198s, speedup 0.973x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.529s, pg runtime 0.434s, speedup 0.820x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 8.605s, pg runtime 8.605s, speedup 1.000x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 16, train speedup 1.810, test speedup 1.006, val speedup 0.477
best test speedup epoch: 11, train speedup 1.809, test speedup 1.813, val speedup 0.477
best validation speedup epoch: 29, train speedup 1.806, test speedup 0.980, val speedup 1.000
last model at epoch 29, train speedup 1.806, test speedup 0.980, val speedup 1.000
execution cost 0:00:37.819557
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.532584, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006084| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005507| train set 1.537x speedup, test set 1.239x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004890| train set 1.530x speedup, test set 1.303x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004284| train set 1.444x speedup, test set 1.224x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004242| train set 1.548x speedup, test set 1.819x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003694| train set 1.551x speedup, test set 1.635x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002669| train set 1.790x speedup, test set 1.527x speedup, val set 0.477x speedup, step: 2
Epoch 10/300 |loss: 0.002763| train set 1.786x speedup, test set 1.573x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002385| train set 1.810x speedup, test set 1.030x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002144| train set 1.727x speedup, test set 0.863x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001764| train set 1.776x speedup, test set 1.002x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001350| train set 1.776x speedup, test set 0.873x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001581| train set 1.810x speedup, test set 0.966x speedup, val set 0.477x speedup, step: 2
Epoch 16/300 |loss: 0.001618| train set 1.810x speedup, test set 1.035x speedup, val set 0.477x speedup, step: 3
Epoch 17/300 |loss: 0.001212| train set 1.807x speedup, test set 0.993x speedup, val set 0.477x speedup, step: 4
Epoch 18/300 |loss: 0.001584| train set 1.809x speedup, test set 0.958x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001135| train set 1.810x speedup, test set 0.992x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001050| train set 1.810x speedup, test set 1.000x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001086| train set 1.808x speedup, test set 0.992x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001230| train set 1.803x speedup, test set 1.012x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001103| train set 1.810x speedup, test set 0.955x speedup, val set 1.000x speedup, step: 1
Epoch 24/300 |loss: 0.001059| train set 1.773x speedup, test set 1.013x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001218| train set 1.770x speedup, test set 0.956x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001097| train set 1.775x speedup, test set 0.958x speedup, val set 0.822x speedup, step: 2
Epoch 27/300 |loss: 0.001017| train set 1.775x speedup, test set 0.966x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001208| train set 1.808x speedup, test set 0.942x speedup, val set 1.000x speedup, step: 1
Epoch 29/300 |loss: 0.001108| train set 1.807x speedup, test set 1.501x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.497 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 7.027s, pg runtime 5.879s, speedup 0.837x
08, opt runtime 1.737s, model runtime 7.022s, pg runtime 5.994s, speedup 0.854x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.434s, pg runtime 0.332s, speedup 0.765x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 0.992, val speedup 1.000
best test speedup epoch: 7, train speedup 1.548, test speedup 1.819, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.807, test speedup 1.501, val speedup 1.000
last model at epoch 29, train speedup 1.807, test speedup 1.501, val speedup 1.000
execution cost 0:00:37.561646
==================================================
all print will write to path record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
==================================================
Model: <class 'src.models.TCNN.TCNN'>
NUM_HINT_SET: 49
app: point
batch_size: 128
candidate_list: 30
data_root_path: ./db_benchmark_datasets
dataset: join-order-benchmark
dbms: postgresql
epochs: 300
execute_sql: 0
expname: main_adhoc
grain: adhoc
lr: 0.001
meta_save_path: record/postgresql/join-order-benchmark/execute_sql
model: TCNN
npseed: 42
pairwise: False
parameter: 
pre_execute_all: 0
sample_num: 1000
sampling: -1
save_path: record/postgresql/cross/TPCH_JOB/TCNN/slow_split/point
seed: 42
shuffle_num: 1
slow: 1
split_ratio: 0.1
src: TPCH
tgt: JOB
tolerance: 10
train: 1
weighted: False

Loaded number of JOB queries: 113
(113, 49)
(113, 49)
21a.sql
test templates:  ['7', '28', '31', '16', '19', '17', '20']
test queries:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
test query:  ['16a.sql' '16b.sql' '16c.sql' '16d.sql' '17b.sql' '17f.sql' '17d.sql'
 '17c.sql' '17a.sql' '17e.sql' '19a.sql' '19d.sql' '19c.sql' '19b.sql'
 '20b.sql' '20a.sql' '20c.sql' '28c.sql' '28b.sql' '28a.sql' '31b.sql'
 '31a.sql' '31c.sql' '7b.sql' '7c.sql' '7a.sql']
load JOB succ
load TPCH...
TPCH test template [17, 20, 3, 9]
load TPCH succ
load TPCH_Skew...
TPCH test template [17, 20, 3, 9]
load TPCH Skew succ
train, test, validation (140, 49) (26, 49) (20, 49)
construct training samples cost 0:00:00.521661, and there are 6860 training samples
in channel 9
Epoch 0/300 |loss: 0.046358| train set 0.788x speedup, test set 1.737x speedup, val set 0.691x speedup, step: 1
Epoch 1/300 |loss: 0.012202| train set 1.340x speedup, test set 0.994x speedup, val set 0.348x speedup, step: 2
Epoch 2/300 |loss: 0.007256| train set 1.432x speedup, test set 1.381x speedup, val set 0.501x speedup, step: 3
Epoch 3/300 |loss: 0.006086| train set 1.451x speedup, test set 1.566x speedup, val set 0.348x speedup, step: 4
Epoch 4/300 |loss: 0.005517| train set 1.527x speedup, test set 1.244x speedup, val set 0.501x speedup, step: 5
Epoch 5/300 |loss: 0.004894| train set 1.530x speedup, test set 1.325x speedup, val set 0.501x speedup, step: 6
Epoch 6/300 |loss: 0.004146| train set 1.444x speedup, test set 1.257x speedup, val set 0.501x speedup, step: 7
Epoch 7/300 |loss: 0.004306| train set 1.547x speedup, test set 1.738x speedup, val set 0.822x speedup, step: 1
Epoch 8/300 |loss: 0.003744| train set 1.551x speedup, test set 1.769x speedup, val set 0.822x speedup, step: 1
Epoch 9/300 |loss: 0.002641| train set 1.790x speedup, test set 1.527x speedup, val set 0.450x speedup, step: 2
Epoch 10/300 |loss: 0.002649| train set 1.807x speedup, test set 1.501x speedup, val set 0.477x speedup, step: 3
Epoch 11/300 |loss: 0.002376| train set 1.806x speedup, test set 1.742x speedup, val set 0.477x speedup, step: 4
Epoch 12/300 |loss: 0.002056| train set 1.727x speedup, test set 0.989x speedup, val set 0.822x speedup, step: 1
Epoch 13/300 |loss: 0.001582| train set 1.764x speedup, test set 1.708x speedup, val set 0.477x speedup, step: 2
Epoch 14/300 |loss: 0.001249| train set 1.776x speedup, test set 0.850x speedup, val set 0.822x speedup, step: 1
Epoch 15/300 |loss: 0.001870| train set 1.791x speedup, test set 1.501x speedup, val set 0.450x speedup, step: 2
Epoch 16/300 |loss: 0.002191| train set 1.764x speedup, test set 0.981x speedup, val set 1.000x speedup, step: 1
Epoch 17/300 |loss: 0.001400| train set 1.746x speedup, test set 1.552x speedup, val set 1.000x speedup, step: 1
Epoch 18/300 |loss: 0.001269| train set 1.809x speedup, test set 1.610x speedup, val set 1.000x speedup, step: 1
Epoch 19/300 |loss: 0.001083| train set 1.810x speedup, test set 1.635x speedup, val set 1.000x speedup, step: 1
Epoch 20/300 |loss: 0.001032| train set 1.810x speedup, test set 0.980x speedup, val set 1.000x speedup, step: 1
Epoch 21/300 |loss: 0.001060| train set 1.806x speedup, test set 1.753x speedup, val set 1.000x speedup, step: 1
Epoch 22/300 |loss: 0.001110| train set 1.806x speedup, test set 0.980x speedup, val set 1.000x speedup, step: 1
Epoch 23/300 |loss: 0.001109| train set 1.776x speedup, test set 0.916x speedup, val set 0.887x speedup, step: 2
Epoch 24/300 |loss: 0.001059| train set 1.809x speedup, test set 0.971x speedup, val set 1.000x speedup, step: 1
Epoch 25/300 |loss: 0.001127| train set 1.775x speedup, test set 1.508x speedup, val set 1.000x speedup, step: 1
Epoch 26/300 |loss: 0.001031| train set 1.807x speedup, test set 0.983x speedup, val set 0.887x speedup, step: 2
Epoch 27/300 |loss: 0.001014| train set 1.773x speedup, test set 1.000x speedup, val set 1.000x speedup, step: 1
Epoch 28/300 |loss: 0.001296| train set 1.810x speedup, test set 1.178x speedup, val set 0.887x speedup, step: 2
Epoch 29/300 |loss: 0.001182| train set 1.809x speedup, test set 1.601x speedup, val set 1.000x speedup, step: 1
early stopping at epoch 29
Training per epoch cost 0.514 s
Optimal speedup on test set is 4.686x
01, opt runtime 0.206s, model runtime 0.250s, pg runtime 0.206s, speedup 0.826x
02, opt runtime 4.223s, model runtime 24.532s, pg runtime 18.741s, speedup 0.764x
03, opt runtime 1.763s, model runtime 2.314s, pg runtime 1.763s, speedup 0.762x
04, opt runtime 1.386s, model runtime 1.765s, pg runtime 1.386s, speedup 0.785x
05, opt runtime 3.504s, model runtime 7.352s, pg runtime 6.143s, speedup 0.836x
06, opt runtime 2.593s, model runtime 10.279s, pg runtime 8.283s, speedup 0.806x
07, opt runtime 2.046s, model runtime 2.046s, pg runtime 5.879s, speedup 2.874x
08, opt runtime 1.737s, model runtime 1.737s, pg runtime 5.994s, speedup 3.452x
09, opt runtime 2.324s, model runtime 13.370s, pg runtime 10.605s, speedup 0.793x
10, opt runtime 3.248s, model runtime 13.242s, pg runtime 10.538s, speedup 0.796x
11, opt runtime 0.294s, model runtime 2.841s, pg runtime 2.352s, speedup 0.828x
12, opt runtime 4.443s, model runtime 7.665s, pg runtime 13.945s, speedup 1.819x
13, opt runtime 5.179s, model runtime 5.179s, pg runtime 10.685s, speedup 2.063x
14, opt runtime 0.157s, model runtime 7.683s, pg runtime 0.393s, speedup 0.051x
15, opt runtime 1.829s, model runtime 2.252s, pg runtime 53.885s, speedup 23.927x
16, opt runtime 1.876s, model runtime 7.549s, pg runtime 6.089s, speedup 0.807x
17, opt runtime 2.413s, model runtime 5.628s, pg runtime 57.198s, speedup 10.163x
18, opt runtime 0.953s, model runtime 8.321s, pg runtime 4.730s, speedup 0.568x
19, opt runtime 0.379s, model runtime 1.412s, pg runtime 3.645s, speedup 2.582x
20, opt runtime 0.626s, model runtime 0.782s, pg runtime 2.558s, speedup 3.272x
21, opt runtime 0.434s, model runtime 0.526s, pg runtime 0.434s, speedup 0.825x
22, opt runtime 3.136s, model runtime 7.012s, pg runtime 5.620s, speedup 0.801x
23, opt runtime 4.173s, model runtime 10.634s, pg runtime 8.279s, speedup 0.778x
24, opt runtime 0.332s, model runtime 0.384s, pg runtime 0.332s, speedup 0.865x
25, opt runtime 2.971s, model runtime 9.625s, pg runtime 8.605s, speedup 0.894x
26, opt runtime 0.965s, model runtime 1.311s, pg runtime 0.965s, speedup 0.736x
====================
best train speedup epoch: 19, train speedup 1.810, test speedup 1.635, val speedup 1.000
best test speedup epoch: 8, train speedup 1.551, test speedup 1.769, val speedup 0.822
best validation speedup epoch: 29, train speedup 1.809, test speedup 1.601, val speedup 1.000
last model at epoch 29, train speedup 1.809, test speedup 1.601, val speedup 1.000
execution cost 0:00:37.656513
==================================================
